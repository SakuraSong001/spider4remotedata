(function(a,b){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=a.document?b(a,true):function(a){if(!a.document){throw new Error("jQuery requires a window with a document")}return b(a)}}else{b(a)}})(typeof window!=="undefined"?window:this,function(a,b){var c=[];var d=c.slice;var e=c.concat;var f=c.push;var g=c.indexOf;var h={};var i=h.toString;var j=h.hasOwnProperty;var k={};var l="1.11.1",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return a!=null?a<0?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);b.prevObject=this;b.context=this.context;return b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice};m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=false;if(typeof g==="boolean"){j=g;g=arguments[h]||{};h++}if(typeof g!=="object"&&!m.isFunction(g)){g={}}if(h===i){g=this;h--}for(;h<i;h++){if((e=arguments[h])!=null){for(d in e){a=g[d];c=e[d];if(g===c){continue}if(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))){if(b){b=false;f=a&&m.isArray(a)?a:[]}else{f=a&&m.isPlainObject(a)?a:{}}g[d]=m.extend(j,f,c)}else if(c!==undefined){g[d]=c}}}}return g};m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:true,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return m.type(a)==="function"},isArray:Array.isArray||function(a){return m.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a){return false}return true},isPlainObject:function(a){var b;if(!a||m.type(a)!=="object"||a.nodeType||m.isWindow(a)){return false}try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf")){return false}}catch(a){return false}if(k.ownLast){for(b in a){return j.call(a,b)}}for(b in a){}return b===undefined||j.call(a,b)},type:function(a){if(a==null){return a+""}return typeof a==="object"||typeof a==="function"?h[i.call(a)]||"object":typeof a},globalEval:function(b){if(b&&m.trim(b)){(a.execScript||function(b){a["eval"].call(a,b)})(b)}},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;e<f;e++){d=b.apply(a[e],c);if(d===false){break}}}else{for(e in a){d=b.apply(a[e],c);if(d===false){break}}}}else{if(g){for(;e<f;e++){d=b.call(a[e],e,a[e]);if(d===false){break}}}else{for(e in a){d=b.call(a[e],e,a[e]);if(d===false){break}}}}return a},trim:function(a){return a==null?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];if(a!=null){if(r(Object(a))){m.merge(c,typeof a==="string"?[a]:a)}else{f.call(c,a)}}return c},inArray:function(a,b,c){var d;if(b){if(g){return g.call(b,a,c)}d=b.length;c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(d<c){a[e++]=b[d++]}if(c!==c){while(b[d]!==undefined){a[e++]=b[d++]}}a.length=e;return a},grep:function(a,b,c){var d,e=[],f=0,g=a.length,h=!c;for(;f<g;f++){d=!b(a[f],f);if(d!==h){e.push(a[f])}}return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h){for(;f<g;f++){d=b(a[f],f,c);if(d!=null){i.push(d)}}}else{for(f in a){d=b(a[f],f,c);if(d!=null){i.push(d)}}}return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;if(typeof b==="string"){f=a[b];b=a;a=f}if(!m.isFunction(a)){return undefined}c=d.call(arguments,2);e=function(){return a.apply(b||this,c.concat(d.call(arguments)))};e.guid=a.guid=a.guid||m.guid++;return e},now:function(){return+new Date},support:k});m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b=a.length,c=m.type(a);if(c==="function"||m.isWindow(a)){return false}if(a.nodeType===1&&b){return true}return c==="array"||b===0||typeof b==="number"&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=fa(),z=fa(),A=fa(),B=function(a,b){if(a===b){l=true}return 0},C=typeof undefined,D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){var b=0,c=this.length;for(;b<c;b++){if(this[b]===a){return b}}return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|"+".*"+")\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,d&1023|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes);F[v.childNodes.length].nodeType}catch(a){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]){}a.length=c-1}}}function ea(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n){m(b)}b=b||n;d=d||[];if(!a||typeof a!=="string"){return d}if((k=b.nodeType)!==1&&k!==9){return[]}if(p&&!e){if(f=_.exec(a)){if(j=f[1]){if(k===9){h=b.getElementById(j);if(h&&h.parentNode){if(h.id===j){d.push(h);return d}}else{return d}}else{if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j){d.push(h);return d}}}else if(f[2]){I.apply(d,b.getElementsByTagName(a));return d}else if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName){I.apply(d,b.getElementsByClassName(j));return d}}if(c.qsa&&(!q||!q.test(a))){s=r=u;w=b;x=k===9&&a;if(k===1&&b.nodeName.toLowerCase()!=="object"){o=g(a);if(r=b.getAttribute("id")){s=r.replace(ba,"\\$&")}else{b.setAttribute("id",s)}s="[id='"+s+"'] ";l=o.length;while(l--){o[l]=s+pa(o[l])}w=aa.test(a)&&na(b.parentNode)||b;x=o.join(",")}if(x){try{I.apply(d,w.querySelectorAll(x));return d}catch(a){}finally{if(!r){b.removeAttribute("id")}}}}}return i(a.replace(R,"$1"),b,d,e)}function fa(){var a=[];function b(c,e){if(a.push(c+" ")>d.cacheLength){delete b[a.shift()]}return b[c+" "]=e}return b}function ga(a){a[u]=true;return a}function ha(a){var b=n.createElement("div");try{return!!a(b)}catch(a){return false}finally{if(b.parentNode){b.parentNode.removeChild(b)}b=null}}function ia(a,b){var c=a.split("|"),e=a.length;while(e--){d.attrHandle[c[e]]=b}}function ja(a,b){var c=b&&a,d=c&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d){return d}if(c){while(c=c.nextSibling){if(c===b){return-1}}}return a?1:-1}function ka(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function la(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function ma(a){return ga(function(b){b=+b;return ga(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--){if(c[e=f[g]]){c[e]=!(d[e]=c[e])}}})})}function na(a){return a&&typeof a.getElementsByTagName!==C&&a}c=ea.support={};f=ea.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":false};m=ea.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;if(e===n||e.nodeType!==9||!e.documentElement){return n}n=e;o=e.documentElement;p=!f(e);if(g&&g!==g.top){if(g.addEventListener){g.addEventListener("unload",function(){m()},false)}else if(g.attachEvent){g.attachEvent("onunload",function(){m()})}}c.attributes=ha(function(a){a.className="i";return!a.getAttribute("className")});c.getElementsByTagName=ha(function(a){a.appendChild(e.createComment(""));return!a.getElementsByTagName("*").length});c.getElementsByClassName=$.test(e.getElementsByClassName)&&ha(function(a){a.innerHTML="<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return a.getElementsByClassName("i").length===2});c.getById=ha(function(a){o.appendChild(a).id=u;return!e.getElementsByName||!e.getElementsByName(u).length});if(c.getById){d.find["ID"]=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}};d.filter["ID"]=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}}else{delete d.find["ID"];d.filter["ID"]=function(a){var b=a.replace(ca,da);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}}d.find["TAG"]=c.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==C){return b.getElementsByTagName(a)}}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if(a==="*"){while(c=f[e++]){if(c.nodeType===1){d.push(c)}}return d}return f};d.find["CLASS"]=c.getElementsByClassName&&function(a,b){if(typeof b.getElementsByClassName!==C&&p){return b.getElementsByClassName(a)}};r=[];q=[];if(c.qsa=$.test(e.querySelectorAll)){ha(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";if(a.querySelectorAll("[msallowclip^='']").length){q.push("[*^$]="+M+"*(?:''|\"\")")}if(!a.querySelectorAll("[selected]").length){q.push("\\["+M+"*(?:value|"+L+")")}if(!a.querySelectorAll(":checked").length){q.push(":checked")}});ha(function(a){var b=e.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("name","D");if(a.querySelectorAll("[name=d]").length){q.push("name"+M+"*[*^$|!~]?=")}if(!a.querySelectorAll(":enabled").length){q.push(":enabled",":disabled")}a.querySelectorAll("*,:x");q.push(",.*:")})}if(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector)){ha(function(a){c.disconnectedMatch=s.call(a,"div");s.call(a,"[s!='']:x");r.push("!=",Q)})}q=q.length&&new RegExp(q.join("|"));r=r.length&&new RegExp(r.join("|"));b=$.test(o.compareDocumentPosition);t=b||$.test(o.contains)?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&d.nodeType===1&&(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return true}}}return false};B=b?function(a,b){if(a===b){l=true;return 0}var d=!a.compareDocumentPosition-!b.compareDocumentPosition;if(d){return d}d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(d&1||!c.sortDetached&&b.compareDocumentPosition(a)===d){if(a===e||a.ownerDocument===v&&t(v,a)){return-1}if(b===e||b.ownerDocument===v&&t(v,b)){return 1}return k?K.call(k,a)-K.call(k,b):0}return d&4?-1:1}:function(a,b){if(a===b){l=true;return 0}var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g){return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0}else if(f===g){return ja(a,b)}c=a;while(c=c.parentNode){h.unshift(c)}c=b;while(c=c.parentNode){i.unshift(c)}while(h[d]===i[d]){d++}return d?ja(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0};return e};ea.matches=function(a,b){return ea(a,null,null,b)};ea.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n){m(a)}b=b.replace(U,"='$1']");if(c.matchesSelector&&p&&(!r||!r.test(b))&&(!q||!q.test(b))){try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&a.document.nodeType!==11){return d}}catch(a){}}return ea(b,n,null,[a]).length>0};ea.contains=function(a,b){if((a.ownerDocument||a)!==n){m(a)}return t(a,b)};ea.attr=function(a,b){if((a.ownerDocument||a)!==n){m(a)}var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):undefined;return f!==undefined?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null};ea.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};ea.uniqueSort=function(a){var b,d=[],e=0,f=0;l=!c.detectDuplicates;k=!c.sortStable&&a.slice(0);a.sort(B);if(l){while(b=a[f++]){if(b===a[f]){e=d.push(f)}}while(e--){a.splice(d[e],1)}}k=null;return a};e=ea.getText=function(a){var b,c="",d=0,f=a.nodeType;if(!f){while(b=a[d++]){c+=e(b)}}else if(f===1||f===9||f===11){if(typeof a.textContent==="string"){return a.textContent}else{for(a=a.firstChild;a;a=a.nextSibling){c+=e(a)}}}else if(f===3||f===4){return a.nodeValue}return c};d=ea.selectors={cacheLength:50,createPseudo:ga,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ca,da);a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da);if(a[2]==="~="){a[3]=" "+a[3]+" "}return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();if(a[1].slice(0,3)==="nth"){if(!a[3]){ea.error(a[0])}a[4]=+(a[4]?a[5]+(a[6]||1):2*(a[3]==="even"||a[3]==="odd"));a[5]=+(a[7]+a[8]||a[3]==="odd")}else if(a[3]){ea.error(a[0])}return a},PSEUDO:function(a){var b,c=!a[6]&&a[2];if(X["CHILD"].test(a[0])){return null}if(a[3]){a[2]=a[4]||a[5]||""}else if(c&&V.test(c)&&(b=g(c,true))&&(b=c.indexOf(")",c.length-b)-c.length)){a[0]=a[0].slice(0,b);a[2]=c.slice(0,b)}return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return a==="*"?function(){return true}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test(typeof a.className==="string"&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ea.attr(d,a);if(e==null){return b==="!="}if(!b){return true}e+="";return b==="="?e===c:b==="!="?e!==c:b==="^="?c&&e.indexOf(c)===0:b==="*="?c&&e.indexOf(c)>-1:b==="$="?c&&e.slice(-c.length)===c:b==="~="?(" "+e+" ").indexOf(c)>-1:b==="|="?e===c||e.slice(0,c.length+1)===c+"-":false}},CHILD:function(a,b,c,d,e){var f=a.slice(0,3)!=="nth",g=a.slice(-4)!=="last",h=b==="of-type";return d===1&&e===0?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p]){if(h?l.nodeName.toLowerCase()===r:l.nodeType===1){return false}}o=p=a==="only"&&!o&&"nextSibling"}return true}o=[g?q.firstChild:q.lastChild];if(g&&s){k=q[u]||(q[u]={});j=k[a]||[];n=j[0]===w&&j[1];m=j[0]===w&&j[2];l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if(l.nodeType===1&&++m&&l===b){k[a]=[w,n,m];break}}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w){m=j[1]}else{while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if((h?l.nodeName.toLowerCase()===r:l.nodeType===1)&&++m){if(s){(l[u]||(l[u]={}))[a]=[w,m]}if(l===b){break}}}}m-=e;return m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ea.error("unsupported pseudo: "+a);if(e[u]){return e(b)}if(e.length>1){c=[a,a,"",b];return d.setFilters.hasOwnProperty(a.toLowerCase())?ga(function(a,c){var d,f=e(a,b),g=f.length;while(g--){d=K.call(a,f[g]);a[d]=!(c[d]=f[g])}}):function(a){return e(a,0,c)}}return e}},pseudos:{not:ga(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ga(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--){if(f=g[h]){a[h]=!(b[h]=f)}}}):function(a,e,f){b[0]=a;d(b,null,f,c);return!c.pop()}}),has:ga(function(a){return function(b){return ea(a,b).length>0}}),contains:ga(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ga(function(a){if(!W.test(a||"")){ea.error("unsupported lang: "+a)}a=a.replace(ca,da).toLowerCase();return function(b){var c;do{if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang")){c=c.toLowerCase();return c===a||c.indexOf(a+"-")===0}}while((b=b.parentNode)&&b.nodeType===1);return false}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===false},disabled:function(a){return a.disabled===true},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){if(a.parentNode){a.parentNode.selectedIndex}return a.selected===true},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling){if(a.nodeType<6){return false}}return true},parent:function(a){return!d.pseudos["empty"](a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},text:function(a){var b;return a.nodeName.toLowerCase()==="input"&&a.type==="text"&&((b=a.getAttribute("type"))==null||b.toLowerCase()==="text")},first:ma(function(){return[0]}),last:ma(function(a,b){return[b-1]}),eq:ma(function(a,b,c){return[c<0?c+b:c]}),even:ma(function(a,b){var c=0;for(;c<b;c+=2){a.push(c)}return a}),odd:ma(function(a,b){var c=1;for(;c<b;c+=2){a.push(c)}return a}),lt:ma(function(a,b,c){var d=c<0?c+b:c;for(;--d>=0;){a.push(d)}return a}),gt:ma(function(a,b,c){var d=c<0?c+b:c;for(;++d<b;){a.push(d)}return a})}};d.pseudos["nth"]=d.pseudos["eq"];for(b in{radio:true,checkbox:true,file:true,password:true,image:true}){d.pseudos[b]=ka(b)}for(b in{submit:true,reset:true}){d.pseudos[b]=la(b)}function oa(){}oa.prototype=d.filters=d.pseudos;d.setFilters=new oa;g=ea.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k){return b?0:k.slice(0)}h=a;i=[];j=d.preFilter;while(h){if(!c||(e=S.exec(h))){if(e){h=h.slice(e[0].length)||h}i.push(f=[])}c=false;if(e=T.exec(h)){c=e.shift();f.push({value:c,type:e[0].replace(R," ")});h=h.slice(c.length)}for(g in d.filter){if((e=X[g].exec(h))&&(!j[g]||(e=j[g](e)))){c=e.shift();f.push({value:c,type:g,matches:e});h=h.slice(c.length)}}if(!c){break}}return b?h.length:h?ea.error(a):z(a,i).slice(0)};function pa(a){var b=0,c=a.length,d="";for(;b<c;b++){d+=a[b].value}return d}function qa(a,b,c){var d=b.dir,e=c&&d==="parentNode",f=x++;return b.first?function(b,c,f){while(b=b[d]){if(b.nodeType===1||e){return a(b,c,f)}}}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d]){if(b.nodeType===1||e){if(a(b,c,g)){return true}}}}else{while(b=b[d]){if(b.nodeType===1||e){i=b[u]||(b[u]={});if((h=i[d])&&h[0]===w&&h[1]===f){return j[2]=h[2]}else{i[d]=j;if(j[2]=a(b,c,g)){return true}}}}}}}function ra(a){return a.length>1?function(b,c,d){var e=a.length;while(e--){if(!a[e](b,c,d)){return false}}return true}:a[0]}function sa(a,b,c){var d=0,e=b.length;for(;d<e;d++){ea(a,b[d],c)}return c}function ta(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++){if(f=a[h]){if(!c||c(f,d,e)){g.push(f);if(j){b.push(h)}}}}return g}function ua(a,b,c,d,e,f){if(d&&!d[u]){d=ua(d)}if(e&&!e[u]){e=ua(e,f)}return ga(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||sa(b||"*",h.nodeType?[h]:h,[]),q=a&&(f||!b)?ta(p,m,a,h,i):p,r=c?e||(f?a:o||d)?[]:g:q;if(c){c(q,r,h,i)}if(d){j=ta(r,n);d(j,[],h,i);k=j.length;while(k--){if(l=j[k]){r[n[k]]=!(q[n[k]]=l)}}}if(f){if(e||a){if(e){j=[];k=r.length;while(k--){if(l=r[k]){j.push(q[k]=l)}}e(null,r=[],j,i)}k=r.length;while(k--){if((l=r[k])&&(j=e?K.call(f,l):m[k])>-1){f[j]=!(g[j]=l)}}}}else{r=ta(r===g?r.splice(o,r.length):r);if(e){e(null,g,r,i)}else{I.apply(g,r)}}})}function va(a){var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=qa(function(a){return a===b},h,true),l=qa(function(a){return K.call(b,a)>-1},h,true),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];for(;i<f;i++){if(c=d.relative[a[i].type]){m=[qa(ra(m),c)]}else{c=d.filter[a[i].type].apply(null,a[i].matches);if(c[u]){e=++i;for(;e<f;e++){if(d.relative[a[e].type]){break}}return ua(i>1&&ra(m),i>1&&pa(a.slice(0,i-1).concat({value:a[i-2].type===" "?"*":""})).replace(R,"$1"),c,i<e&&va(a.slice(i,e)),e<f&&va(a=a.slice(e)),e<f&&pa(a))}m.push(c)}}return ra(m)}function wa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find["TAG"]("*",k),v=w+=t==null?1:Math.random()||.1,x=u.length;if(k){j=g!==n&&g}for(;q!==x&&(l=u[q])!=null;q++){if(e&&l){m=0;while(o=a[m++]){if(o(l,g,h)){i.push(l);break}}if(k){w=v}}if(c){if(l=!o&&l){p--}if(f){r.push(l)}}}p+=q;if(c&&q!==p){m=0;while(o=b[m++]){o(r,s,g,h)}if(f){if(p>0){while(q--){if(!(r[q]||s[q])){s[q]=G.call(i)}}}s=ta(s)}I.apply(i,s);if(k&&!f&&s.length>0&&p+b.length>1){ea.uniqueSort(i)}}if(k){w=v;j=t}return r};return c?ga(f):f}h=ea.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){if(!b){b=g(a)}c=b.length;while(c--){f=va(b[c]);if(f[u]){d.push(f)}else{e.push(f)}}f=A(a,wa(e,d));f.selector=a}return f};i=ea.select=function(a,b,e,f){var i,j,k,l,m,n=typeof a==="function"&&a,o=!f&&g(a=n.selector||a);e=e||[];if(o.length===1){j=o[0]=o[0].slice(0);if(j.length>2&&(k=j[0]).type==="ID"&&c.getById&&b.nodeType===9&&p&&d.relative[j[1].type]){b=(d.find["ID"](k.matches[0].replace(ca,da),b)||[])[0];if(!b){return e}else if(n){b=b.parentNode}a=a.slice(j.shift().value.length)}i=X["needsContext"].test(a)?0:j.length;while(i--){k=j[i];if(d.relative[l=k.type]){break}if(m=d.find[l]){if(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&na(b.parentNode)||b)){j.splice(i,1);a=f.length&&pa(j);if(!a){I.apply(e,f);return e}break}}}}(n||h(a,o))(f,b,!p,e,aa.test(a)&&na(b.parentNode)||b);return e};c.sortStable=u.split("").sort(B).join("")===u;c.detectDuplicates=!!l;m();c.sortDetached=ha(function(a){return a.compareDocumentPosition(n.createElement("div"))&1});if(!ha(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild.getAttribute("href")==="#"})){ia("type|href|height|width",function(a,b,c){if(!c){return a.getAttribute(b,b.toLowerCase()==="type"?1:2)}})}if(!c.attributes||!ha(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return a.firstChild.getAttribute("value")===""})){ia("value",function(a,b,c){if(!c&&a.nodeName.toLowerCase()==="input"){return a.defaultValue}})}if(!ha(function(a){return a.getAttribute("disabled")==null})){ia(L,function(a,b,c){var d;if(!c){return a[b]===true?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}})}return ea}(a);m.find=s;m.expr=s.selectors;m.expr[":"]=m.expr.pseudos;m.unique=s.uniqueSort;m.text=s.getText;m.isXMLDoc=s.isXML;m.contains=s.contains;var t=m.expr.match.needsContext;var u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/;var v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b)){return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c})}if(b.nodeType){return m.grep(a,function(a){return a===b!==c})}if(typeof b==="string"){if(v.test(b)){return m.filter(b,a,c)}b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];if(c){a=":not("+a+")"}return b.length===1&&d.nodeType===1?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return a.nodeType===1}))};m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if(typeof a!=="string"){return this.pushStack(m(a).filter(function(){for(b=0;b<e;b++){if(m.contains(d[b],this)){return true}}}))}for(b=0;b<e;b++){m.find(a,d[b],c)}c=this.pushStack(e>1?m.unique(c):c);c.selector=this.selector?this.selector+" "+a:a;return c},filter:function(a){return this.pushStack(w(this,a||[],false))},not:function(a){return this.pushStack(w(this,a||[],true))},is:function(a){return!!w(this,typeof a==="string"&&t.test(a)?m(a):a||[],false).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a){return this}if(typeof a==="string"){if(a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3){c=[null,a,null]}else{c=z.exec(a)}if(c&&(c[1]||!b)){if(c[1]){b=b instanceof m?b[0]:b;m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,true));if(u.test(c[1])&&m.isPlainObject(b)){for(c in b){if(m.isFunction(this[c])){this[c](b[c])}else{this.attr(c,b[c])}}}return this}else{d=y.getElementById(c[2]);if(d&&d.parentNode){if(d.id!==c[2]){return x.find(a)}this.length=1;this[0]=d}this.context=y;this.selector=a;return this}}else if(!b||b.jquery){return(b||x).find(a)}else{return this.constructor(b).find(a)}}else if(a.nodeType){this.context=this[0]=a;this.length=1;return this}else if(m.isFunction(a)){return typeof x.ready!=="undefined"?x.ready(a):a(m)}if(a.selector!==undefined){this.selector=a.selector;this.context=a.context}return m.makeArray(a,this)};A.prototype=m.fn;x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:true,contents:true,next:true,prev:true};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&e.nodeType!==9&&(c===undefined||e.nodeType!==1||!m(e).is(c))){if(e.nodeType===1){d.push(e)}e=e[b]}return d},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){if(a.nodeType===1&&a!==b){c.push(a)}}return c}});m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++){if(m.contains(this,c[b])){return true}}})},closest:function(a,b){var c,d=0,e=this.length,f=[],g=t.test(a)||typeof a!=="string"?m(a,b||this.context):0;for(;d<e;d++){for(c=this[d];c&&c!==b;c=c.parentNode){if(c.nodeType<11&&(g?g.index(c)>-1:c.nodeType===1&&m.find.matchesSelector(c,a))){f.push(c);break}}}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof a==="string"){return m.inArray(this[0],m(a))}return m.inArray(a.jquery?a[0]:a,this)},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do{a=a[b]}while(a&&a.nodeType!==1);return a}m.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);if(a.slice(-5)!=="Until"){d=c}if(d&&typeof d==="string"){e=m.filter(d,e)}if(this.length>1){if(!C[a]){e=m.unique(e)}if(B.test(a)){e=e.reverse()}}return this.pushStack(e)}});var E=/\S+/g;var F={};function G(a){var b=F[a]={};m.each(a.match(E)||[],function(a,c){b[c]=true});return b}m.Callbacks=function(a){a=typeof a==="string"?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){c=a.memory&&l;d=true;f=g||0;g=0;e=h.length;b=true;for(;h&&f<e;f++){if(h[f].apply(l[0],l[1])===false&&a.stopOnFalse){c=false;break}}b=false;if(h){if(i){if(i.length){j(i.shift())}}else if(c){h=[]}else{k.disable()}}},k={add:function(){if(h){var d=h.length;(function b(c){m.each(c,function(c,d){var e=m.type(d);if(e==="function"){if(!a.unique||!k.has(d)){h.push(d)}}else if(d&&d.length&&e!=="string"){b(d)}})})(arguments);if(b){e=h.length}else if(c){g=d;j(c)}}return this},remove:function(){if(h){m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1){h.splice(d,1);if(b){if(d<=e){e--}if(d<=f){f--}}}})}return this},has:function(a){return a?m.inArray(a,h)>-1:!!(h&&h.length)},empty:function(){h=[];e=0;return this},disable:function(){h=i=c=undefined;return this},disabled:function(){return!h},lock:function(){i=undefined;if(!c){k.disable()}return this},locked:function(){return!i},fireWith:function(a,c){if(h&&(!d||i)){c=c||[];c=[a,c.slice?c.slice():c];if(b){i.push(c)}else{j(c)}}return this},fire:function(){k.fireWith(this,arguments);return this},fired:function(){return!!d}};return k};m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);if(a&&m.isFunction(a.promise)){a.promise().done(c.resolve).fail(c.reject).progress(c.notify)}else{c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)}})});a=null}).promise()},promise:function(a){return a!=null?m.extend(a,d):d}},e={};d.pipe=d.then;m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add;if(h){g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock)}e[f[0]]=function(){e[f[0]+"With"](this===e?d:this,arguments);return this};e[f[0]+"With"]=g.fireWith});d.promise(e);if(a){a.call(e,e)}return e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=e!==1||a&&m.isFunction(a.promise)?e:0,g=f===1?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this;c[a]=arguments.length>1?d.call(arguments):e;if(c===i){g.notifyWith(b,c)}else if(!--f){g.resolveWith(b,c)}}},i,j,k;if(e>1){i=new Array(e);j=new Array(e);k=new Array(e);for(;b<e;b++){if(c[b]&&m.isFunction(c[b].promise)){c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i))}else{--f}}}if(!f){g.resolveWith(k,c)}return g.promise()}});var H;m.fn.ready=function(a){m.ready.promise().done(a);return this};m.extend({isReady:false,readyWait:1,holdReady:function(a){if(a){m.readyWait++}else{m.ready(true)}},ready:function(a){if(a===true?--m.readyWait:m.isReady){return}if(!y.body){return setTimeout(m.ready)}m.isReady=true;if(a!==true&&--m.readyWait>0){return}H.resolveWith(y,[m]);if(m.fn.triggerHandler){m(y).triggerHandler("ready");m(y).off("ready")}}});function I(){if(y.addEventListener){y.removeEventListener("DOMContentLoaded",J,false);a.removeEventListener("load",J,false)}else{y.detachEvent("onreadystatechange",J);a.detachEvent("onload",J)}}function J(){if(y.addEventListener||event.type==="load"||y.readyState==="complete"){I();m.ready()}}m.ready.promise=function(b){if(!H){H=m.Deferred();if(y.readyState==="complete"){setTimeout(m.ready)}else if(y.addEventListener){y.addEventListener("DOMContentLoaded",J,false);a.addEventListener("load",J,false)}else{y.attachEvent("onreadystatechange",J);a.attachEvent("onload",J);var c=false;try{c=a.frameElement==null&&y.documentElement}catch(a){}if(c&&c.doScroll){(function a(){if(!m.isReady){try{c.doScroll("left")}catch(b){
return setTimeout(a,50)}I();m.ready()}})()}}}return H.promise(b)};var K=typeof undefined;var L;for(L in m(k)){break}k.ownLast=L!=="0";k.inlineBlockNeedsLayout=false;m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0];if(!c||!c.style){return}b=y.createElement("div");d=y.createElement("div");d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";c.appendChild(d).appendChild(b);if(typeof b.style.zoom!==K){b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1";k.inlineBlockNeedsLayout=a=b.offsetWidth===3;if(a){c.style.zoom=1}}c.removeChild(d)});(function(){var a=y.createElement("div");if(k.deleteExpando==null){k.deleteExpando=true;try{delete a.test}catch(a){k.deleteExpando=false}}a=null})();m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return c!==1&&c!==9?false:!b||b!==true&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(c===undefined&&a.nodeType===1){var d="data-"+b.replace(N,"-$1").toLowerCase();c=a.getAttribute(d);if(typeof c==="string"){try{c=c==="true"?true:c==="false"?false:c==="null"?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(a){}m.data(a,b,c)}else{c=undefined}}return c}function P(a){var b;for(b in a){if(b==="data"&&m.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return false}}return true}function Q(a,b,d,e){if(!m.acceptData(a)){return}var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if((!k||!j[k]||!e&&!j[k].data)&&d===undefined&&typeof b==="string"){return}if(!k){if(i){k=a[h]=c.pop()||m.guid++}else{k=h}}if(!j[k]){j[k]=i?{}:{toJSON:m.noop}}if(typeof b==="object"||typeof b==="function"){if(e){j[k]=m.extend(j[k],b)}else{j[k].data=m.extend(j[k].data,b)}}g=j[k];if(!e){if(!g.data){g.data={}}g=g.data}if(d!==undefined){g[m.camelCase(b)]=d}if(typeof b==="string"){f=g[b];if(f==null){f=g[m.camelCase(b)]}}else{f=g}return f}function R(a,b,c){if(!m.acceptData(a)){return}var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(!g[h]){return}if(b){d=c?g[h]:g[h].data;if(d){if(!m.isArray(b)){if(b in d){b=[b]}else{b=m.camelCase(b);if(b in d){b=[b]}else{b=b.split(" ")}}}else{b=b.concat(m.map(b,m.camelCase))}e=b.length;while(e--){delete d[b[e]]}if(c?!P(d):!m.isEmptyObject(d)){return}}}if(!c){delete g[h].data;if(!P(g[h])){return}}if(f){m.cleanData([a],true)}else if(k.deleteExpando||g!=g.window){delete g[h]}else{g[h]=null}}m.extend({cache:{},noData:{"applet ":true,"embed ":true,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){a=a.nodeType?m.cache[a[m.expando]]:a[m.expando];return!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,true)},_removeData:function(a,b){return R(a,b,true)}});m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(a===undefined){if(this.length){e=m.data(f);if(f.nodeType===1&&!m._data(f,"parsedAttrs")){c=g.length;while(c--){if(g[c]){d=g[c].name;if(d.indexOf("data-")===0){d=m.camelCase(d.slice(5));O(f,d,e[d])}}}m._data(f,"parsedAttrs",true)}}return e}if(typeof a==="object"){return this.each(function(){m.data(this,a)})}return arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):undefined},removeData:function(a){return this.each(function(){m.removeData(this,a)})}});m.extend({queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue";d=m._data(a,b);if(c){if(!d||m.isArray(c)){d=m._data(a,b,m.makeArray(c))}else{d.push(c)}}return d||[]}},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};if(e==="inprogress"){e=c.shift();d--}if(e){if(b==="fx"){c.unshift("inprogress")}delete f.stop;e.call(a,g,f)}if(!d&&f){f.empty.fire()}},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue");m._removeData(a,c)})})}});m.fn.extend({queue:function(a,b){var c=2;if(typeof a!=="string"){b=a;a="fx";c--}if(arguments.length<c){return m.queue(this[0],a)}return b===undefined?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a);if(a==="fx"&&c[0]!=="inprogress"){m.dequeue(this,a)}})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){if(!--d){e.resolveWith(f,[f])}};if(typeof a!=="string"){b=a;a=undefined}a=a||"fx";while(g--){c=m._data(f[g],a+"queueHooks");if(c&&c.empty){d++;c.empty.add(h)}}h();return e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var T=["Top","Right","Bottom","Left"];var U=function(a,b){a=b||a;return m.css(a,"display")==="none"||!m.contains(a.ownerDocument,a)};var V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=c==null;if(m.type(c)==="object"){e=true;for(h in c){m.access(a,b,h,c[h],true,f,g)}}else if(d!==undefined){e=true;if(!m.isFunction(d)){g=true}if(j){if(g){b.call(a,d);b=null}else{j=b;b=function(a,b,c){return j.call(m(a),c)}}}if(b){for(;h<i;h++){b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)))}}}return e?a:j?b.call(a):i?b(a[0],c):f};var W=/^(?:checkbox|radio)$/i;(function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";k.leadingWhitespace=b.firstChild.nodeType===3;k.tbody=!b.getElementsByTagName("tbody").length;k.htmlSerialize=!!b.getElementsByTagName("link").length;k.html5Clone=y.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>";a.type="checkbox";a.checked=true;c.appendChild(a);k.appendChecked=a.checked;b.innerHTML="<textarea>x</textarea>";k.noCloneChecked=!!b.cloneNode(true).lastChild.defaultValue;c.appendChild(b);b.innerHTML="<input type='radio' checked='checked' name='t'/>";k.checkClone=b.cloneNode(true).cloneNode(true).lastChild.checked;k.noCloneEvent=true;if(b.attachEvent){b.attachEvent("onclick",function(){k.noCloneEvent=false});b.cloneNode(true).click()}if(k.deleteExpando==null){k.deleteExpando=true;try{delete b.test}catch(a){k.deleteExpando=false}}})();(function(){var b,c,d=y.createElement("div");for(b in{submit:true,change:true,focusin:true}){c="on"+b;if(!(k[b+"Bubbles"]=c in a)){d.setAttribute(c,"t");k[b+"Bubbles"]=d.attributes[c].expando===false}}d=null})();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function aa(){return true}function ba(){return false}function ca(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(!r){return}if(c.handler){i=c;c=i.handler;e=i.selector}if(!c.guid){c.guid=m.guid++}if(!(g=r.events)){g=r.events={}}if(!(k=r.handle)){k=r.handle=function(a){return typeof m!==K&&(!a||m.event.triggered!==a.type)?m.event.dispatch.apply(k.elem,arguments):undefined};k.elem=a}b=(b||"").match(E)||[""];h=b.length;while(h--){f=_.exec(b[h])||[];o=q=f[1];p=(f[2]||"").split(".").sort();if(!o){continue}j=m.event.special[o]||{};o=(e?j.delegateType:j.bindType)||o;j=m.event.special[o]||{};l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i);if(!(n=g[o])){n=g[o]=[];n.delegateCount=0;if(!j.setup||j.setup.call(a,d,p,k)===false){if(a.addEventListener){a.addEventListener(o,k,false)}else if(a.attachEvent){a.attachEvent("on"+o,k)}}}if(j.add){j.add.call(a,l);if(!l.handler.guid){l.handler.guid=c.guid}}if(e){n.splice(n.delegateCount++,0,l)}else{n.push(l)}m.event.global[o]=true}a=null},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(!r||!(k=r.events)){return}b=(b||"").match(E)||[""];j=b.length;while(j--){h=_.exec(b[j])||[];o=q=h[1];p=(h[2]||"").split(".").sort();if(!o){for(o in k){m.event.remove(a,o+b[j],c,d,true)}continue}l=m.event.special[o]||{};o=(d?l.delegateType:l.bindType)||o;n=k[o]||[];h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");i=f=n.length;while(f--){g=n[f];if((e||q===g.origType)&&(!c||c.guid===g.guid)&&(!h||h.test(g.namespace))&&(!d||d===g.selector||d==="**"&&g.selector)){n.splice(f,1);if(g.selector){n.delegateCount--}if(l.remove){l.remove.call(a,g)}}}if(i&&!n.length){if(!l.teardown||l.teardown.call(a,p,r.handle)===false){m.removeEvent(a,o,r.handle)}delete k[o]}}if(m.isEmptyObject(k)){delete r.handle;m._removeData(a,"events")}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];h=l=d=d||y;if(d.nodeType===3||d.nodeType===8){return}if($.test(p+m.event.triggered)){return}if(p.indexOf(".")>=0){q=p.split(".");p=q.shift();q.sort()}g=p.indexOf(":")<0&&"on"+p;b=b[m.expando]?b:new m.Event(p,typeof b==="object"&&b);b.isTrigger=e?2:3;b.namespace=q.join(".");b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b.result=undefined;if(!b.target){b.target=d}c=c==null?[b]:m.makeArray(c,[b]);k=m.event.special[p]||{};if(!e&&k.trigger&&k.trigger.apply(d,c)===false){return}if(!e&&!k.noBubble&&!m.isWindow(d)){i=k.delegateType||p;if(!$.test(i+p)){h=h.parentNode}for(;h;h=h.parentNode){o.push(h);l=h}if(l===(d.ownerDocument||y)){o.push(l.defaultView||l.parentWindow||a)}}n=0;while((h=o[n++])&&!b.isPropagationStopped()){b.type=n>1?i:k.bindType||p;f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle");if(f){f.apply(h,c)}f=g&&h[g];if(f&&f.apply&&m.acceptData(h)){b.result=f.apply(h,c);if(b.result===false){b.preventDefault()}}}b.type=p;if(!e&&!b.isDefaultPrevented()){if((!k._default||k._default.apply(o.pop(),c)===false)&&m.acceptData(d)){if(g&&d[p]&&!m.isWindow(d)){l=d[g];if(l){d[g]=null}m.event.triggered=p;try{d[p]()}catch(a){}m.event.triggered=undefined;if(l){d[g]=l}}}}return b.result},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};i[0]=a;a.delegateTarget=this;if(k.preDispatch&&k.preDispatch.call(this,a)===false){return}h=m.event.handlers.call(this,a,j);b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem;g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped()){if(!a.namespace_re||a.namespace_re.test(e.namespace)){a.handleObj=e;a.data=e.data;c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i);if(c!==undefined){if((a.result=c)===false){a.preventDefault();a.stopPropagation()}}}}}if(k.postDispatch){k.postDispatch.call(this,a)}return a.result},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||a.type!=="click")){for(;i!=this;i=i.parentNode||this){if(i.nodeType===1&&(i.disabled!==true||a.type!=="click")){e=[];for(f=0;f<h;f++){d=b[f];c=d.selector+" ";if(e[c]===undefined){e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length}if(e[c]){e.push(d)}}if(e.length){g.push({elem:i,handlers:e})}}}}if(h<b.length){g.push({elem:this,handlers:b.slice(h)})}return g},fix:function(a){if(a[m.expando]){return a}var b,c,d,e=a.type,f=a,g=this.fixHooks[e];if(!g){this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}}d=g.props?this.props.concat(g.props):this.props;a=new m.Event(f);b=d.length;while(b--){c=d[b];a[c]=f[c]}if(!a.target){a.target=f.srcElement||y}if(a.target.nodeType===3){a.target=a.target.parentNode}a.metaKey=!!a.metaKey;return g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){if(a.which==null){a.which=b.charCode!=null?b.charCode:b.keyCode}return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;if(a.pageX==null&&b.clientX!=null){d=a.target.ownerDocument||y;e=d.documentElement;c=d.body;a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0);a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)}if(!a.relatedTarget&&g){a.relatedTarget=g===a.target?b.toElement:g}if(!a.which&&f!==undefined){a.which=f&1?1:f&2?3:f&4?2:0}return a}},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==ca()&&this.focus){try{this.focus();return false}catch(a){}}},delegateType:"focusin"},blur:{trigger:function(){if(this===ca()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(m.nodeName(this,"input")&&this.type==="checkbox"&&this.click){this.click();return false}},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){if(a.result!==undefined&&a.originalEvent){a.originalEvent.returnValue=a.result}}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:true,originalEvent:{}});if(d){m.event.trigger(e,null,b)}else{m.event.dispatch.call(b,e)}if(e.isDefaultPrevented()){c.preventDefault()}}};m.removeEvent=y.removeEventListener?function(a,b,c){if(a.removeEventListener){a.removeEventListener(b,c,false)}}:function(a,b,c){var d="on"+b;if(a.detachEvent){if(typeof a[d]===K){a[d]=null}a.detachEvent(d,c)}};m.Event=function(a,b){if(!(this instanceof m.Event)){return new m.Event(a,b)}if(a&&a.type){this.originalEvent=a;this.type=a.type;this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===undefined&&a.returnValue===false?aa:ba}else{this.type=a}if(b){m.extend(this,b)}this.timeStamp=a&&a.timeStamp||m.now();this[m.expando]=true};m.Event.prototype={isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=aa;if(!a){return}if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=aa;if(!a){return}if(a.stopPropagation){a.stopPropagation()}a.cancelBubble=true},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=aa;if(a&&a.stopImmediatePropagation){a.stopImmediatePropagation()}this.stopPropagation()}};m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;if(!e||e!==d&&!m.contains(d,e)){a.type=f.origType;c=f.handler.apply(this,arguments);a.type=b}return c}}});if(!k.submitBubbles){m.event.special.submit={setup:function(){if(m.nodeName(this,"form")){return false}m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:undefined;if(c&&!m._data(c,"submitBubbles")){m.event.add(c,"submit._submit",function(a){a._submit_bubble=true});m._data(c,"submitBubbles",true)}})},postDispatch:function(a){if(a._submit_bubble){delete a._submit_bubble;if(this.parentNode&&!a.isTrigger){m.event.simulate("submit",this.parentNode,a,true)}}},teardown:function(){if(m.nodeName(this,"form")){return false}m.event.remove(this,"._submit")}}}if(!k.changeBubbles){m.event.special.change={setup:function(){if(X.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){m.event.add(this,"propertychange._change",function(a){if(a.originalEvent.propertyName==="checked"){this._just_changed=true}});m.event.add(this,"click._change",function(a){if(this._just_changed&&!a.isTrigger){this._just_changed=false}m.event.simulate("change",this,a,true)})}return false}m.event.add(this,"beforeactivate._change",function(a){var b=a.target;if(X.test(b.nodeName)&&!m._data(b,"changeBubbles")){m.event.add(b,"change._change",function(a){if(this.parentNode&&!a.isSimulated&&!a.isTrigger){m.event.simulate("change",this.parentNode,a,true)}});m._data(b,"changeBubbles",true)}})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){m.event.remove(this,"._change");return!X.test(this.nodeName)}}}if(!k.focusinBubbles){m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),true)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);if(!e){d.addEventListener(a,c,true)}m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;if(!e){d.removeEventListener(a,c,true);m._removeData(d,b)}else{m._data(d,b,e)}}}})}m.fn.extend({on:function(a,b,c,d,e){var f,g;if(typeof a==="object"){if(typeof b!=="string"){c=c||b;b=undefined}for(f in a){this.on(f,b,c,a[f],e)}return this}if(c==null&&d==null){d=b;c=b=undefined}else if(d==null){if(typeof b==="string"){d=c;c=undefined}else{d=c;c=b;b=undefined}}if(d===false){d=ba}else if(!d){return this}if(e===1){g=d;d=function(a){m().off(a);return g.apply(this,arguments)};d.guid=g.guid||(g.guid=m.guid++)}return this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj){d=a.handleObj;m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler);return this}if(typeof a==="object"){for(e in a){this.off(e,b,a[e])}return this}if(b===false||typeof b==="function"){c=b;b=undefined}if(c===false){c=ba}return this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c){return m.event.trigger(a,b,c,true)}}});function da(a){var b=ea.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}var ea="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fa=/ jQuery\d+="(?:null|\d+)"/g,ga=new RegExp("<(?:"+ea+")[\\s/>]","i"),ha=/^\s+/,ia=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ja=/<([\w:]+)/,ka=/<tbody/i,la=/<|&#?\w+;/,ma=/<(?:script|style|link)/i,na=/checked\s*(?:[^=]|=\s*.checked.)/i,oa=/^$|\/(?:java|ecma)script/i,pa=/^true\/(.*)/,qa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ra={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sa=da(y),ta=sa.appendChild(y.createElement("div"));ra.optgroup=ra.option;ra.tbody=ra.tfoot=ra.colgroup=ra.caption=ra.thead;ra.th=ra.td;function ua(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):undefined;if(!f){for(f=[],c=a.childNodes||a;(d=c[e])!=null;e++){if(!b||m.nodeName(d,b)){f.push(d)}else{m.merge(f,ua(d,b))}}}return b===undefined||b&&m.nodeName(a,b)?m.merge([a],f):f}function va(a){if(W.test(a.type)){a.defaultChecked=a.checked}}function wa(a,b){return m.nodeName(a,"table")&&m.nodeName(b.nodeType!==11?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xa(a){a.type=(m.find.attr(a,"type")!==null)+"/"+a.type;return a}function ya(a){var b=pa.exec(a.type);if(b){a.type=b[1]}else{a.removeAttribute("type")}return a}function za(a,b){var c,d=0;for(;(c=a[d])!=null;d++){m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}}function Aa(a,b){if(b.nodeType!==1||!m.hasData(a)){return}var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle;g.events={};for(c in h){for(d=0,e=h[c].length;d<e;d++){m.event.add(b,c,h[c][d])}}}if(g.data){g.data=m.extend({},g.data)}}function Ba(a,b){var c,d,e;if(b.nodeType!==1){return}c=b.nodeName.toLowerCase();if(!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events){m.removeEvent(b,d,e.handle)}b.removeAttribute(m.expando)}if(c==="script"&&b.text!==a.text){xa(b).text=a.text;ya(b)}else if(c==="object"){if(b.parentNode){b.outerHTML=a.outerHTML}if(k.html5Clone&&(a.innerHTML&&!m.trim(b.innerHTML))){b.innerHTML=a.innerHTML}}else if(c==="input"&&W.test(a.type)){b.defaultChecked=b.checked=a.checked;if(b.value!==a.value){b.value=a.value}}else if(c==="option"){b.defaultSelected=b.selected=a.defaultSelected}else if(c==="input"||c==="textarea"){b.defaultValue=a.defaultValue}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!ga.test("<"+a.nodeName+">")){f=a.cloneNode(true)}else{ta.innerHTML=a.outerHTML;ta.removeChild(f=ta.firstChild)}if((!k.noCloneEvent||!k.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!m.isXMLDoc(a)){d=ua(f);h=ua(a);for(g=0;(e=h[g])!=null;++g){if(d[g]){Ba(e,d[g])}}}if(b){if(c){h=h||ua(a);d=d||ua(f);for(g=0;(e=h[g])!=null;g++){Aa(e,d[g])}}else{Aa(a,f)}}d=ua(f,"script");if(d.length>0){za(d,!i&&ua(a,"script"))}d=h=e=null;return f},buildFragment:function(a,b,c,d){var e,f,g,h,i,j,l,n=a.length,o=da(b),p=[],q=0;for(;q<n;q++){f=a[q];if(f||f===0){if(m.type(f)==="object"){m.merge(p,f.nodeType?[f]:f)}else if(!la.test(f)){p.push(b.createTextNode(f))}else{h=h||o.appendChild(b.createElement("div"));i=(ja.exec(f)||["",""])[1].toLowerCase();l=ra[i]||ra._default;h.innerHTML=l[1]+f.replace(ia,"<$1></$2>")+l[2];e=l[0];while(e--){h=h.lastChild}if(!k.leadingWhitespace&&ha.test(f)){p.push(b.createTextNode(ha.exec(f)[0]))}if(!k.tbody){f=i==="table"&&!ka.test(f)?h.firstChild:l[1]==="<table>"&&!ka.test(f)?h:0;e=f&&f.childNodes.length;while(e--){if(m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length){f.removeChild(j)}}}m.merge(p,h.childNodes);h.textContent="";while(h.firstChild){h.removeChild(h.firstChild)}h=o.lastChild}}}if(h){o.removeChild(h)}if(!k.appendChecked){m.grep(ua(p,"input"),va)}q=0;while(f=p[q++]){if(d&&m.inArray(f,d)!==-1){continue}g=m.contains(f.ownerDocument,f);h=ua(o.appendChild(f),"script");if(g){za(h)}if(c){e=0;while(f=h[e++]){if(oa.test(f.type||"")){c.push(f)}}}}h=null;return o},cleanData:function(a,b){var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;for(;(d=a[h])!=null;h++){if(b||m.acceptData(d)){f=d[i];g=f&&j[f];if(g){if(g.events){for(e in g.events){if(n[e]){m.event.remove(d,e)}else{m.removeEvent(d,e,g.handle)}}}if(j[f]){delete j[f];if(l){delete d[i]}else if(typeof d.removeAttribute!==K){d.removeAttribute(i)}else{d[i]=null}c.push(f)}}}}}});m.fn.extend({text:function(a){return V(this,function(a){return a===undefined?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=wa(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=wa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){if(this.parentNode){this.parentNode.insertBefore(a,this)}})},after:function(){return this.domManip(arguments,function(a){if(this.parentNode){this.parentNode.insertBefore(a,this.nextSibling)}})},remove:function(a,b){var c,d=a?m.filter(a,this):this,e=0;for(;(c=d[e])!=null;e++){if(!b&&c.nodeType===1){m.cleanData(ua(c))}if(c.parentNode){if(b&&m.contains(c.ownerDocument,c)){za(ua(c,"script"))}c.parentNode.removeChild(c)}}return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){if(a.nodeType===1){m.cleanData(ua(a,false))}while(a.firstChild){a.removeChild(a.firstChild)}if(a.options&&m.nodeName(a,"select")){a.options.length=0}}return this},clone:function(a,b){a=a==null?false:a;b=b==null?a:b;return this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(a===undefined){return b.nodeType===1?b.innerHTML.replace(fa,""):undefined}if(typeof a==="string"&&!ma.test(a)&&(k.htmlSerialize||!ga.test(a))&&(k.leadingWhitespace||!ha.test(a))&&!ra[(ja.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ia,"<$1></$2>");try{for(;c<d;c++){b=this[c]||{};if(b.nodeType===1){m.cleanData(ua(b,false));b.innerHTML=a}}b=0}catch(a){}}if(b){this.empty().append(a)}},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];this.domManip(arguments,function(b){a=this.parentNode;m.cleanData(ua(this));if(a){a.replaceChild(b,this)}});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,true)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&typeof p==="string"&&!k.checkClone&&na.test(p)){return this.each(function(c){var d=n.eq(c);if(q){a[0]=p.call(this,c,d.html())}d.domManip(a,b)})}if(l){i=m.buildFragment(a,this[0].ownerDocument,false,this);c=i.firstChild;if(i.childNodes.length===1){i=c}if(c){g=m.map(ua(i,"script"),xa);f=g.length;for(;j<l;j++){d=i;if(j!==o){d=m.clone(d,true,true);if(f){m.merge(g,ua(d,"script"))}}b.call(this[j],d,j)}if(f){h=g[g.length-1].ownerDocument;m.map(g,ya);for(j=0;j<f;j++){d=g[j];if(oa.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)){if(d.src){if(m._evalUrl){m._evalUrl(d.src)}}else{m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qa,""))}}}}i=c=null}}return this}});m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){var c,d=0,e=[],g=m(a),h=g.length-1;for(;d<=h;d++){c=d===h?this:this.clone(true);m(g[d])[b](c);f.apply(e,c.get())}return this.pushStack(e)}});var Ca,Da={};function Ea(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");e.detach();return f}function Fa(a){var b=y,c=Da[a];if(!c){c=Ea(a,b);if(c==="none"||!c){Ca=(Ca||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement);b=(Ca[0].contentWindow||Ca[0].contentDocument).document;b.write();b.close();c=Ea(a,b);Ca.detach()}Da[a]=c}return c}(function(){var a;k.shrinkWrapBlocks=function(){if(a!=null){return a}a=false;var b,c,d;c=y.getElementsByTagName("body")[0];if(!c||!c.style){return}b=y.createElement("div");d=y.createElement("div");d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";c.appendChild(d).appendChild(b);if(typeof b.style.zoom!==K){b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;"+"padding:1px;width:1px;zoom:1";b.appendChild(y.createElement("div")).style.width="5px";a=b.offsetWidth!==3}c.removeChild(d);return a}})();var Ga=/^margin/;var Ha=new RegExp("^("+S+")(?!px)[a-z%]+$","i");var Ia,Ja,Ka=/^(top|right|bottom|left)$/;if(a.getComputedStyle){Ia=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};Ja=function(a,b,c){var d,e,f,g,h=a.style;c=c||Ia(a);g=c?c.getPropertyValue(b)||c[b]:undefined;if(c){if(g===""&&!m.contains(a.ownerDocument,a)){g=m.style(a,b)}if(Ha.test(g)&&Ga.test(b)){d=h.width;e=h.minWidth;f=h.maxWidth;h.minWidth=h.maxWidth=h.width=g;g=c.width;h.width=d;h.minWidth=e;h.maxWidth=f}}return g===undefined?g:g+""}}else if(y.documentElement.currentStyle){Ia=function(a){return a.currentStyle};Ja=function(a,b,c){var d,e,f,g,h=a.style;c=c||Ia(a);g=c?c[b]:undefined;if(g==null&&h&&h[b]){g=h[b]}if(Ha.test(g)&&!Ka.test(b)){d=h.left;e=a.runtimeStyle;f=e&&e.left;if(f){e.left=a.currentStyle.left}h.left=b==="fontSize"?"1em":g;g=h.pixelLeft+"px";h.left=d;if(f){e.left=f}}return g===undefined?g:g+""||"auto"}}function La(a,b){return{get:function(){var c=a();if(c==null){return}if(c){delete this.get;return}return(this.get=b).apply(this,arguments)}}}(function(){var b,c,d,e,f,g,h;b=y.createElement("div");b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";d=b.getElementsByTagName("a")[0];c=d&&d.style;if(!c){return}c.cssText="float:left;opacity:.5";k.opacity=c.opacity==="0.5";k.cssFloat=!!c.cssFloat;b.style.backgroundClip="content-box";b.cloneNode(true).style.backgroundClip="";k.clearCloneStyle=b.style.backgroundClip==="content-box";k.boxSizing=c.boxSizing===""||c.MozBoxSizing===""||c.WebkitBoxSizing==="";m.extend(k,{reliableHiddenOffsets:function(){if(g==null){i()}return g},boxSizingReliable:function(){if(f==null){i()}return f},pixelPosition:function(){if(e==null){i()}return e},reliableMarginRight:function(){if(h==null){i()}return h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0];if(!c||!c.style){return}b=y.createElement("div");d=y.createElement("div");d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";c.appendChild(d).appendChild(b);b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;"+"box-sizing:border-box;display:block;margin-top:1%;top:1%;"+"border:1px;padding:1px;width:4px;position:absolute";e=f=false;h=true;if(a.getComputedStyle){e=(a.getComputedStyle(b,null)||{}).top!=="1%";f=(a.getComputedStyle(b,null)||{width:"4px"}).width==="4px";i=b.appendChild(y.createElement("div"));i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;padding:0";i.style.marginRight=i.style.width="0";b.style.width="1px";h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight)}b.innerHTML="<table><tr><td></td><td>t</td></tr></table>";i=b.getElementsByTagName("td");i[0].style.cssText="margin:0;border:0;padding:0;display:none";g=i[0].offsetHeight===0;if(g){i[0].style.display="";i[1].style.display="none";g=i[0].offsetHeight===0}c.removeChild(d)}})();m.swap=function(a,b,c,d){var e,f,g={};for(f in b){g[f]=a.style[f];a.style[f]=b[f]}e=c.apply(a,d||[]);for(f in b){a.style[f]=g[f]}return e};var Ma=/alpha\([^)]*\)/i,Na=/opacity\s*=\s*([^)]*)/,Oa=/^(none|table(?!-c[ea]).+)/,Pa=new RegExp("^("+S+")(.*)$","i"),Qa=new RegExp("^([+-])=("+S+")","i"),Ra={position:"absolute",visibility:"hidden",display:"block"},Sa={letterSpacing:"0",fontWeight:"400"},Ta=["Webkit","O","Moz","ms"];function Ua(a,b){if(b in a){return b}var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ta.length;while(e--){b=Ta[e]+c;if(b in a){return b}}return d}function Va(a,b){var c,d,e,f=[],g=0,h=a.length;for(;g<h;g++){d=a[g];if(!d.style){continue}f[g]=m._data(d,"olddisplay");c=d.style.display;if(b){if(!f[g]&&c==="none"){d.style.display=""}if(d.style.display===""&&U(d)){f[g]=m._data(d,"olddisplay",Fa(d.nodeName))}}else{e=U(d);if(c&&c!=="none"||!e){m._data(d,"olddisplay",e?c:m.css(d,"display"))}}}for(g=0;g<h;g++){d=a[g];if(!d.style){continue}if(!b||d.style.display==="none"||d.style.display===""){d.style.display=b?f[g]||"":"none"}}return a}function Wa(a,b,c){var d=Pa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xa(a,b,c,d,e){var f=c===(d?"border":"content")?4:b==="width"?1:0,g=0;for(;f<4;f+=2){if(c==="margin"){g+=m.css(a,c+T[f],true,e)}if(d){if(c==="content"){g-=m.css(a,"padding"+T[f],true,e)}if(c!=="margin"){g-=m.css(a,"border"+T[f]+"Width",true,e)}}else{g+=m.css(a,"padding"+T[f],true,e);if(c!=="padding"){g+=m.css(a,"border"+T[f]+"Width",true,e)}}}return g}function Ya(a,b,c){var d=true,e=b==="width"?a.offsetWidth:a.offsetHeight,f=Ia(a),g=k.boxSizing&&m.css(a,"boxSizing",false,f)==="border-box";if(e<=0||e==null){e=Ja(a,b,f);if(e<0||e==null){e=a.style[b]}if(Ha.test(e)){return e}d=g&&(k.boxSizingReliable()||e===a.style[b]);e=parseFloat(e)||0}return e+Xa(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ja(a,"opacity");return c===""?"1":c}}}},cssNumber:{columnCount:true,fillOpacity:true,flexGrow:true,
flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{float:k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(!a||a.nodeType===3||a.nodeType===8||!a.style){return}var e,f,g,h=m.camelCase(b),i=a.style;b=m.cssProps[h]||(m.cssProps[h]=Ua(i,h));g=m.cssHooks[b]||m.cssHooks[h];if(c!==undefined){f=typeof c;if(f==="string"&&(e=Qa.exec(c))){c=(e[1]+1)*e[2]+parseFloat(m.css(a,b));f="number"}if(c==null||c!==c){return}if(f==="number"&&!m.cssNumber[h]){c+="px"}if(!k.clearCloneStyle&&c===""&&b.indexOf("background")===0){i[b]="inherit"}if(!g||!("set"in g)||(c=g.set(a,c,d))!==undefined){try{i[b]=c}catch(a){}}}else{if(g&&"get"in g&&(e=g.get(a,false,d))!==undefined){return e}return i[b]}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);b=m.cssProps[h]||(m.cssProps[h]=Ua(a.style,h));g=m.cssHooks[b]||m.cssHooks[h];if(g&&"get"in g){f=g.get(a,true,c)}if(f===undefined){f=Ja(a,b,d)}if(f==="normal"&&b in Sa){f=Sa[b]}if(c===""||c){e=parseFloat(f);return c===true||m.isNumeric(e)?e||0:f}return f}});m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){if(c){return Oa.test(m.css(a,"display"))&&a.offsetWidth===0?m.swap(a,Ra,function(){return Ya(a,b,d)}):Ya(a,b,d)}},set:function(a,c,d){var e=d&&Ia(a);return Wa(a,c,d?Xa(a,b,d,k.boxSizing&&m.css(a,"boxSizing",false,e)==="border-box",e):0)}}});if(!k.opacity){m.cssHooks.opacity={get:function(a,b){return Na.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if((b>=1||b==="")&&m.trim(f.replace(Ma,""))===""&&c.removeAttribute){c.removeAttribute("filter");if(b===""||d&&!d.filter){return}}c.filter=Ma.test(f)?f.replace(Ma,e):f+" "+e}}}m.cssHooks.marginRight=La(k.reliableMarginRight,function(a,b){if(b){return m.swap(a,{display:"inline-block"},Ja,[a,"marginRight"])}});m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){var d=0,e={},f=typeof c==="string"?c.split(" "):[c];for(;d<4;d++){e[a+T[d]+b]=f[d]||f[d-2]||f[0]}return e}};if(!Ga.test(a)){m.cssHooks[a+b].set=Wa}});m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){d=Ia(a);e=b.length;for(;g<e;g++){f[b[g]]=m.css(a,b[g],false,d)}return f}return c!==undefined?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Va(this,true)},hide:function(){return Va(this)},toggle:function(a){if(typeof a==="boolean"){return a?this.show():this.hide()}return this.each(function(){if(U(this)){m(this).show()}else{m(this).hide()}})}});function Za(a,b,c,d,e){return new Za.prototype.init(a,b,c,d,e)}m.Tween=Za;Za.prototype={constructor:Za,init:function(a,b,c,d,e,f){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Za.propHooks[this.prop];return a&&a.get?a.get(this):Za.propHooks._default.get(this)},run:function(a){var b,c=Za.propHooks[this.prop];if(this.options.duration){this.pos=b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration)}else{this.pos=b=a}this.now=(this.end-this.start)*b+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(c&&c.set){c.set(this)}else{Za.propHooks._default.set(this)}return this}};Za.prototype.init.prototype=Za.prototype;Za.propHooks={_default:{get:function(a){var b;if(a.elem[a.prop]!=null&&(!a.elem.style||a.elem.style[a.prop]==null)){return a.elem[a.prop]}b=m.css(a.elem,a.prop,"");return!b||b==="auto"?0:b},set:function(a){if(m.fx.step[a.prop]){m.fx.step[a.prop](a)}else if(a.elem.style&&(a.elem.style[m.cssProps[a.prop]]!=null||m.cssHooks[a.prop])){m.style(a.elem,a.prop,a.now+a.unit)}else{a.elem[a.prop]=a.now}}}};Za.propHooks.scrollTop=Za.propHooks.scrollLeft={set:function(a){if(a.elem.nodeType&&a.elem.parentNode){a.elem[a.prop]=a.now}}};m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};m.fx=Za.prototype.init;m.fx.step={};var $a,_a,ab=/^(?:toggle|show|hide)$/,bb=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cb=/queueHooks$/,db=[ib],eb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bb.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||f!=="px"&&+d)&&bb.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3];e=e||[];g=+d||1;do{h=h||".5";g=g/h;m.style(c.elem,a,g+f)}while(h!==(h=c.cur()/d)&&h!==1&&--i)}if(e){g=c.start=+g||+d||0;c.unit=f;c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]}return c}]};function fb(){setTimeout(function(){$a=undefined});return $a=m.now()}function gb(a,b){var c,d={height:a},e=0;b=b?1:0;for(;e<4;e+=2-b){c=T[e];d["margin"+c]=d["padding"+c]=a}if(b){d.opacity=d.width=a}return d}function hb(a,b,c){var d,e=(eb[b]||[]).concat(eb["*"]),f=0,g=e.length;for(;f<g;f++){if(d=e[f].call(c,b,a)){return d}}}function ib(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");if(!c.queue){h=m._queueHooks(a,"fx");if(h.unqueued==null){h.unqueued=0;i=h.empty.fire;h.empty.fire=function(){if(!h.unqueued){i()}}}h.unqueued++;n.always(function(){n.always(function(){h.unqueued--;if(!m.queue(a,"fx").length){h.empty.fire()}})})}if(a.nodeType===1&&("height"in b||"width"in b)){c.overflow=[p.overflow,p.overflowX,p.overflowY];j=m.css(a,"display");l=j==="none"?m._data(a,"olddisplay")||Fa(a.nodeName):j;if(l==="inline"&&m.css(a,"float")==="none"){if(!k.inlineBlockNeedsLayout||Fa(a.nodeName)==="inline"){p.display="inline-block"}else{p.zoom=1}}}if(c.overflow){p.overflow="hidden";if(!k.shrinkWrapBlocks()){n.always(function(){p.overflow=c.overflow[0];p.overflowX=c.overflow[1];p.overflowY=c.overflow[2]})}}for(d in b){e=b[d];if(ab.exec(e)){delete b[d];f=f||e==="toggle";if(e===(q?"hide":"show")){if(e==="show"&&r&&r[d]!==undefined){q=true}else{continue}}o[d]=r&&r[d]||m.style(a,d)}else{j=undefined}}if(!m.isEmptyObject(o)){if(r){if("hidden"in r){q=r.hidden}}else{r=m._data(a,"fxshow",{})}if(f){r.hidden=!q}if(q){m(a).show()}else{n.done(function(){m(a).hide()})}n.done(function(){var b;m._removeData(a,"fxshow");for(b in o){m.style(a,b,o[b])}});for(d in o){g=hb(q?r[d]:0,d,n);if(!(d in r)){r[d]=g.start;if(q){g.end=g.start;g.start=d==="width"||d==="height"?1:0}}}}else if((j==="none"?Fa(a.nodeName):j)==="inline"){p.display=j}}function jb(a,b){var c,d,e,f,g;for(c in a){d=m.camelCase(c);e=b[d];f=a[c];if(m.isArray(f)){e=f[1];f=a[c]=f[0]}if(c!==d){a[d]=f;delete a[c]}g=m.cssHooks[d];if(g&&"expand"in g){f=g.expand(f);delete a[d];for(c in f){if(!(c in a)){a[c]=f[c];b[c]=e}}}else{b[d]=e}}}function kb(a,b,c){var d,e,f=0,g=db.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e){return false}var b=$a||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;for(;g<i;g++){j.tweens[g].run(f)}h.notifyWith(a,[j,f,c]);if(f<1&&i){return c}else{h.resolveWith(a,[j]);return false}},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(true,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$a||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);j.tweens.push(d);return d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e){return this}e=true;for(;c<d;c++){j.tweens[c].run(1)}if(b){h.resolveWith(a,[j,b])}else{h.rejectWith(a,[j,b])}return this}}),k=j.props;jb(k,j.opts.specialEasing);for(;f<g;f++){d=db[f].call(j,a,k,j.opts);if(d){return d}}m.map(k,hb,j);if(m.isFunction(j.opts.start)){j.opts.start.call(a,j)}m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue}));return j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kb,{tweener:function(a,b){if(m.isFunction(a)){b=a;a=["*"]}else{a=a.split(" ")}var c,d=0,e=a.length;for(;d<e;d++){c=a[d];eb[c]=eb[c]||[];eb[c].unshift(b)}},prefilter:function(a,b){if(b){db.unshift(a)}else{db.push(a)}}});m.speed=function(a,b,c){var d=a&&typeof a==="object"?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};d.duration=m.fx.off?0:typeof d.duration==="number"?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default;if(d.queue==null||d.queue===true){d.queue="fx"}d.old=d.complete;d.complete=function(){if(m.isFunction(d.old)){d.old.call(this)}if(d.queue){m.dequeue(this,d.queue)}};return d};m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kb(this,m.extend({},a),f);if(e||m._data(this,"finish")){b.stop(true)}};g.finish=g;return e||f.queue===false?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};if(typeof a!=="string"){c=b;b=a;a=undefined}if(b&&a!==false){this.queue(a||"fx",[])}return this.each(function(){var b=true,e=a!=null&&a+"queueHooks",f=m.timers,g=m._data(this);if(e){if(g[e]&&g[e].stop){d(g[e])}}else{for(e in g){if(g[e]&&g[e].stop&&cb.test(e)){d(g[e])}}}for(e=f.length;e--;){if(f[e].elem===this&&(a==null||f[e].queue===a)){f[e].anim.stop(c);b=false;f.splice(e,1)}}if(b||!c){m.dequeue(this,a)}})},finish:function(a){if(a!==false){a=a||"fx"}return this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;c.finish=true;m.queue(this,a,[]);if(e&&e.stop){e.stop.call(this,true)}for(b=f.length;b--;){if(f[b].elem===this&&f[b].queue===a){f[b].anim.stop(true);f.splice(b,1)}}for(b=0;b<g;b++){if(d[b]&&d[b].finish){d[b].finish.call(this)}}delete c.finish})}});m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return a==null||typeof a==="boolean"?c.apply(this,arguments):this.animate(gb(b,true),a,d,e)}});m.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});m.timers=[];m.fx.tick=function(){var a,b=m.timers,c=0;$a=m.now();for(;c<b.length;c++){a=b[c];if(!a()&&b[c]===a){b.splice(c--,1)}}if(!b.length){m.fx.stop()}$a=undefined};m.fx.timer=function(a){m.timers.push(a);if(a()){m.fx.start()}else{m.timers.pop()}};m.fx.interval=13;m.fx.start=function(){if(!_a){_a=setInterval(m.fx.tick,m.fx.interval)}};m.fx.stop=function(){clearInterval(_a);_a=null};m.fx.speeds={slow:600,fast:200,_default:400};m.fn.delay=function(a,b){a=m.fx?m.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})};(function(){var a,b,c,d,e;b=y.createElement("div");b.setAttribute("className","t");b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";d=b.getElementsByTagName("a")[0];c=y.createElement("select");e=c.appendChild(y.createElement("option"));a=b.getElementsByTagName("input")[0];d.style.cssText="top:1px";k.getSetAttribute=b.className!=="t";k.style=/top/.test(d.getAttribute("style"));k.hrefNormalized=d.getAttribute("href")==="/a";k.checkOn=!!a.value;k.optSelected=e.selected;k.enctype=!!y.createElement("form").enctype;c.disabled=true;k.optDisabled=!e.disabled;a=y.createElement("input");a.setAttribute("value","");k.input=a.getAttribute("value")==="";a.value="t";a.setAttribute("type","radio");k.radioValue=a.value==="t"})();var lb=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];if(!arguments.length){if(e){b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()];if(b&&"get"in b&&(c=b.get(e,"value"))!==undefined){return c}c=e.value;return typeof c==="string"?c.replace(lb,""):c==null?"":c}return}d=m.isFunction(a);return this.each(function(c){var e;if(this.nodeType!==1){return}if(d){e=a.call(this,c,m(this).val())}else{e=a}if(e==null){e=""}else if(typeof e==="number"){e+=""}else if(m.isArray(e)){e=m.map(e,function(a){return a==null?"":a+""})}b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()];if(!b||!("set"in b)||b.set(this,e,"value")===undefined){this.value=e}})}});m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return b!=null?b:m.trim(m.text(a))}},select:{get:function(a){var b,c,d=a.options,e=a.selectedIndex,f=a.type==="select-one"||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;for(;i<h;i++){c=d[i];if((c.selected||i===e)&&(k.optDisabled?!c.disabled:c.getAttribute("disabled")===null)&&(!c.parentNode.disabled||!m.nodeName(c.parentNode,"optgroup"))){b=m(c).val();if(f){return b}g.push(b)}}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--){d=e[g];if(m.inArray(m.valHooks.option.get(d),f)>=0){try{d.selected=c=true}catch(a){d.scrollHeight}}else{d.selected=false}}if(!c){a.selectedIndex=-1}return e}}}});m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){if(m.isArray(b)){return a.checked=m.inArray(m(a).val(),b)>=0}}};if(!k.checkOn){m.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value}}});var mb,nb,ob=m.expr.attrHandle,pb=/^(?:checked|selected)$/i,qb=k.getSetAttribute,rb=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}});m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(!a||f===3||f===8||f===2){return}if(typeof a.getAttribute===K){return m.prop(a,b,c)}if(f!==1||!m.isXMLDoc(a)){b=b.toLowerCase();d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nb:mb)}if(c!==undefined){if(c===null){m.removeAttr(a,b)}else if(d&&"set"in d&&(e=d.set(a,c,b))!==undefined){return e}else{a.setAttribute(b,c+"");return c}}else if(d&&"get"in d&&(e=d.get(a,b))!==null){return e}else{e=m.find.attr(a,b);return e==null?undefined:e}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&a.nodeType===1){while(c=f[e++]){d=m.propFix[c]||c;if(m.expr.match.bool.test(c)){if(rb&&qb||!pb.test(c)){a[d]=false}else{a[m.camelCase("default-"+c)]=a[d]=false}}else{m.attr(a,c,"")}a.removeAttribute(qb?c:d)}}},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&b==="radio"&&m.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);if(c){a.value=c}return b}}}}});nb={set:function(a,b,c){if(b===false){m.removeAttr(a,c)}else if(rb&&qb||!pb.test(c)){a.setAttribute(!qb&&m.propFix[c]||c,c)}else{a[m.camelCase("default-"+c)]=a[c]=true}return c}};m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ob[b]||m.find.attr;ob[b]=rb&&qb||!pb.test(b)?function(a,b,d){var e,f;if(!d){f=ob[b];ob[b]=e;e=c(a,b,d)!=null?b.toLowerCase():null;ob[b]=f}return e}:function(a,b,c){if(!c){return a[m.camelCase("default-"+b)]?b.toLowerCase():null}}});if(!rb||!qb){m.attrHooks.value={set:function(a,b,c){if(m.nodeName(a,"input")){a.defaultValue=b}else{return mb&&mb.set(a,b,c)}}}}if(!qb){mb={set:function(a,b,c){var d=a.getAttributeNode(c);if(!d){a.setAttributeNode(d=a.ownerDocument.createAttribute(c))}d.value=b+="";if(c==="value"||b===a.getAttribute(c)){return b}}};ob.id=ob.name=ob.coords=function(a,b,c){var d;if(!c){return(d=a.getAttributeNode(b))&&d.value!==""?d.value:null}};m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);if(c&&c.specified){return c.value}},set:mb.set};m.attrHooks.contenteditable={set:function(a,b,c){mb.set(a,b===""?false:b,c)}};m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}}})}if(!k.style){m.attrHooks.style={get:function(a){return a.style.cssText||undefined},set:function(a,b){return a.style.cssText=b+""}}}var sb=/^(?:input|select|textarea|button|object)$/i,tb=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){a=m.propFix[a]||a;return this.each(function(){try{this[a]=undefined;delete this[a]}catch(a){}})}});m.extend({propFix:{for:"htmlFor",class:"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(!a||g===3||g===8||g===2){return}f=g!==1||!m.isXMLDoc(a);if(f){b=m.propFix[b]||b;e=m.propHooks[b]}if(c!==undefined){return e&&"set"in e&&(d=e.set(a,c,b))!==undefined?d:a[b]=c}else{return e&&"get"in e&&(d=e.get(a,b))!==null?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sb.test(a.nodeName)||tb.test(a.nodeName)&&a.href?0:-1}}}});if(!k.hrefNormalized){m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}})}if(!k.optSelected){m.propHooks.selected={get:function(a){var b=a.parentNode;if(b){b.selectedIndex;if(b.parentNode){b.parentNode.selectedIndex}}return null}}}m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this});if(!k.enctype){m.propFix.enctype="encoding"}var ub=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=typeof a==="string"&&a;if(m.isFunction(a)){return this.each(function(b){m(this).addClass(a.call(this,b,this.className))})}if(j){b=(a||"").match(E)||[];for(;h<i;h++){c=this[h];d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(ub," "):" ");if(d){f=0;while(e=b[f++]){if(d.indexOf(" "+e+" ")<0){d+=e+" "}}g=m.trim(d);if(c.className!==g){c.className=g}}}}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=arguments.length===0||typeof a==="string"&&a;if(m.isFunction(a)){return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))})}if(j){b=(a||"").match(E)||[];for(;h<i;h++){c=this[h];d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(ub," "):"");if(d){f=0;while(e=b[f++]){while(d.indexOf(" "+e+" ")>=0){d=d.replace(" "+e+" "," ")}}g=a?m.trim(d):"";if(c.className!==g){c.className=g}}}}return this},toggleClass:function(a,b){var c=typeof a;if(typeof b==="boolean"&&c==="string"){return b?this.addClass(a):this.removeClass(a)}if(m.isFunction(a)){return this.each(function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)})}return this.each(function(){if(c==="string"){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++]){if(e.hasClass(b)){e.removeClass(b)}else{e.addClass(b)}}}else if(c===K||c==="boolean"){if(this.className){m._data(this,"__className__",this.className)}this.className=this.className||a===false?"":m._data(this,"__className__")||""}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(ub," ").indexOf(b)>=0){return true}}return false}});m.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}});m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c)}});var vb=m.now();var wb=/\?/;var xb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse){return a.JSON.parse(b+"")}var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xb,function(a,b,e,f){if(c&&b){d=0}if(d===0){return a}c=e||b;d+=!f-!e;return""}))?Function("return "+e)():m.error("Invalid JSON: "+b)};m.parseXML=function(b){var c,d;if(!b||typeof b!=="string"){return null}try{if(a.DOMParser){d=new DOMParser;c=d.parseFromString(b,"text/xml")}else{c=new ActiveXObject("Microsoft.XMLDOM");c.async="false";c.loadXML(b)}}catch(a){c=undefined}if(!c||!c.documentElement||c.getElementsByTagName("parsererror").length){m.error("Invalid XML: "+b)}return c};var yb,zb,Ab=/#.*$/,Bb=/([?&])_=[^&]*/,Cb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Db=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Eb=/^(?:GET|HEAD)$/,Fb=/^\/\//,Gb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hb={},Ib={},Jb="*/".concat("*");try{zb=location.href}catch(a){zb=y.createElement("a");zb.href="";zb=zb.href}yb=Gb.exec(zb.toLowerCase())||[];function Kb(a){return function(b,c){if(typeof b!=="string"){c=b;b="*"}var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c)){while(d=f[e++]){if(d.charAt(0)==="+"){d=d.slice(1)||"*";(a[d]=a[d]||[]).unshift(c)}else{(a[d]=a[d]||[]).push(c)}}}}}function Lb(a,b,c,d){var e={},f=a===Ib;function g(h){var i;e[h]=true;m.each(a[h]||[],function(a,h){var j=h(b,c,d);if(typeof j==="string"&&!f&&!e[j]){b.dataTypes.unshift(j);g(j);return false}else if(f){return!(i=j)}});return i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Mb(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b){if(b[d]!==undefined){(e[d]?a:c||(c={}))[d]=b[d]}}if(c){m.extend(true,a,c)}return a}function Nb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while(i[0]==="*"){i.shift();if(e===undefined){e=a.mimeType||b.getResponseHeader("Content-Type")}}if(e){for(g in h){if(h[g]&&h[g].test(e)){i.unshift(g);break}}}if(i[0]in c){f=i[0]}else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}if(!d){d=g}}f=f||d}if(f){if(f!==i[0]){i.unshift(f)}return c[f]}}function Ob(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1]){for(g in a.converters){j[g.toLowerCase()]=a.converters[g]}}f=k.shift();while(f){if(a.responseFields[f]){c[a.responseFields[f]]=b}if(!i&&d&&a.dataFilter){b=a.dataFilter(b,a.dataType)}i=f;f=k.shift();if(f){if(f==="*"){f=i}else if(i!=="*"&&i!==f){g=j[i+" "+f]||j["* "+f];if(!g){for(e in j){h=e.split(" ");if(h[1]===f){g=j[i+" "+h[0]]||j["* "+h[0]];if(g){if(g===true){g=j[e]}else if(j[e]!==true){f=h[0];k.unshift(h[1])}break}}}}if(g!==true){if(g&&a["throws"]){b=g(b)}else{try{b=g(b)}catch(a){return{state:"parsererror",error:g?a:"No conversion from "+i+" to "+f}}}}}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zb,type:"GET",isLocal:Db.test(yb[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(a,b){return b?Mb(Mb(a,m.ajaxSettings),b):Mb(m.ajaxSettings,a)},ajaxPrefilter:Kb(Hb),ajaxTransport:Kb(Ib),ajax:function(a,b){if(typeof a==="object"){b=a;a=undefined}b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(t===2){if(!j){j={};while(b=Cb.exec(f)){j[b[1].toLowerCase()]=b[2]}}b=j[a.toLowerCase()]}return b==null?null:b},getAllResponseHeaders:function(){return t===2?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();if(!t){a=s[c]=s[c]||a;r[a]=b}return this},overrideMimeType:function(a){if(!t){k.mimeType=a}return this},statusCode:function(a){var b;if(a){if(t<2){for(b in a){q[b]=[q[b],a[b]]}}else{v.always(a[v.status])}}return this},abort:function(a){var b=a||u;if(i){i.abort(b)}w(0,b);return this}};o.promise(v).complete=p.add;v.success=v.done;v.error=v.fail;k.url=((a||k.url||zb)+"").replace(Ab,"").replace(Fb,yb[1]+"//");k.type=b.method||b.type||k.method||k.type;k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""];if(k.crossDomain==null){c=Gb.exec(k.url.toLowerCase());k.crossDomain=!!(c&&(c[1]!==yb[1]||c[2]!==yb[2]||(c[3]||(c[1]==="http:"?"80":"443"))!==(yb[3]||(yb[1]==="http:"?"80":"443"))))}if(k.data&&k.processData&&typeof k.data!=="string"){k.data=m.param(k.data,k.traditional)}Lb(Hb,k,b,v);if(t===2){return v}h=k.global;if(h&&m.active++===0){m.event.trigger("ajaxStart")}k.type=k.type.toUpperCase();k.hasContent=!Eb.test(k.type);e=k.url;if(!k.hasContent){if(k.data){e=k.url+=(wb.test(e)?"&":"?")+k.data;delete k.data}if(k.cache===false){k.url=Bb.test(e)?e.replace(Bb,"$1_="+vb++):e+(wb.test(e)?"&":"?")+"_="+vb++}}if(k.ifModified){if(m.lastModified[e]){v.setRequestHeader("If-Modified-Since",m.lastModified[e])}if(m.etag[e]){v.setRequestHeader("If-None-Match",m.etag[e])}}if(k.data&&k.hasContent&&k.contentType!==false||b.contentType){v.setRequestHeader("Content-Type",k.contentType)}v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+(k.dataTypes[0]!=="*"?", "+Jb+"; q=0.01":""):k.accepts["*"]);for(d in k.headers){v.setRequestHeader(d,k.headers[d])}if(k.beforeSend&&(k.beforeSend.call(l,v,k)===false||t===2)){return v.abort()}u="abort";for(d in{success:1,error:1,complete:1}){v[d](k[d])}i=Lb(Ib,k,b,v);if(!i){w(-1,"No Transport")}else{v.readyState=1;if(h){n.trigger("ajaxSend",[v,k])}if(k.async&&k.timeout>0){g=setTimeout(function(){v.abort("timeout")},k.timeout)}try{t=1;i.send(r,w)}catch(a){if(t<2){w(-1,a)}else{throw a}}}function w(a,b,c,d){var j,r,s,u,w,x=b;if(t===2){return}t=2;if(g){clearTimeout(g)}i=undefined;f=d||"";v.readyState=a>0?4:0;j=a>=200&&a<300||a===304;if(c){u=Nb(k,v,c)}u=Ob(k,u,v,j);if(j){if(k.ifModified){w=v.getResponseHeader("Last-Modified");if(w){m.lastModified[e]=w}w=v.getResponseHeader("etag");if(w){m.etag[e]=w}}if(a===204||k.type==="HEAD"){x="nocontent"}else if(a===304){x="notmodified"}else{x=u.state;r=u.data;s=u.error;j=!s}}else{s=x;if(a||!x){x="error";if(a<0){a=0}}}v.status=a;v.statusText=(b||x)+"";if(j){o.resolveWith(l,[r,x,v])}else{o.rejectWith(l,[v,x,s])}v.statusCode(q);q=undefined;if(h){n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s])}p.fireWith(l,[v,x]);if(h){n.trigger("ajaxComplete",[v,k]);if(!--m.active){m.event.trigger("ajaxStop")}}}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,undefined,b,"script")}});m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){if(m.isFunction(c)){e=e||d;d=c;c=undefined}return m.ajax({url:a,type:b,dataType:e,data:c,success:d})}});m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}});m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:false,global:false,throws:true})};m.fn.extend({wrapAll:function(a){if(m.isFunction(a)){return this.each(function(b){m(this).wrapAll(a.call(this,b))})}if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){b.insertBefore(this[0])}b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){if(m.isFunction(a)){return this.each(function(b){m(this).wrapInner(a.call(this,b))})}return this.each(function(){var b=m(this),c=b.contents();if(c.length){c.wrapAll(a)}else{b.append(a)}})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){if(!m.nodeName(this,"body")){m(this).replaceWith(this.childNodes)}}).end()}});m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&(a.style&&a.style.display||m.css(a,"display"))==="none"};m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Pb=/%20/g,Qb=/\[\]$/,Rb=/\r?\n/g,Sb=/^(?:submit|button|image|reset|file)$/i,Tb=/^(?:input|select|textarea|keygen)/i;function Ub(a,b,c,d){var e;if(m.isArray(b)){m.each(b,function(b,e){if(c||Qb.test(a)){d(a,e)}else{Ub(a+"["+(typeof e==="object"?b:"")+"]",e,c,d)}})}else if(!c&&m.type(b)==="object"){for(e in b){Ub(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():b==null?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(b===undefined){b=m.ajaxSettings&&m.ajaxSettings.traditional}if(m.isArray(a)||a.jquery&&!m.isPlainObject(a)){m.each(a,function(){e(this.name,this.value)})}else{for(c in a){Ub(c,a[c],b,e)}}return d.join("&").replace(Pb,"+")};m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Tb.test(this.nodeName)&&!Sb.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return c==null?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Rb,"\r\n")}}):{name:b.name,value:c.replace(Rb,"\r\n")}}).get()}});m.ajaxSettings.xhr=a.ActiveXObject!==undefined?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Yb()||Zb()}:Yb;var Vb=0,Wb={},Xb=m.ajaxSettings.xhr();if(a.ActiveXObject){m(a).on("unload",function(){for(var a in Wb){Wb[a](undefined,true)}})}k.cors=!!Xb&&"withCredentials"in Xb;Xb=k.ajax=!!Xb;if(Xb){m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Vb;f.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields){for(e in a.xhrFields){f[e]=a.xhrFields[e]}}if(a.mimeType&&f.overrideMimeType){f.overrideMimeType(a.mimeType)}if(!a.crossDomain&&!c["X-Requested-With"]){c["X-Requested-With"]="XMLHttpRequest"}for(e in c){if(c[e]!==undefined){f.setRequestHeader(e,c[e]+"")}}f.send(a.hasContent&&a.data||null);b=function(c,e){var h,i,j;if(b&&(e||f.readyState===4)){delete Wb[g];b=undefined;f.onreadystatechange=m.noop;if(e){if(f.readyState!==4){f.abort()}}else{j={};h=f.status;if(typeof f.responseText==="string"){j.text=f.responseText}try{i=f.statusText}catch(a){i=""}if(!h&&a.isLocal&&!a.crossDomain){h=j.text?200:404}else if(h===1223){h=204}}}if(j){d(h,i,j,f.getAllResponseHeaders())}};if(!a.async){b()}else if(f.readyState===4){setTimeout(b)}else{f.onreadystatechange=Wb[g]=b}},abort:function(){if(b){b(undefined,true)}}}}})}function Yb(){try{return new a.XMLHttpRequest}catch(a){}}function Zb(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){m.globalEval(a);return a}}});m.ajaxPrefilter("script",function(a){if(a.cache===undefined){a.cache=false}if(a.crossDomain){a.type="GET";a.global=false}});m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script");b.async=true;if(a.scriptCharset){b.charset=a.scriptCharset}b.src=a.url;b.onload=b.onreadystatechange=function(a,c){if(c||!b.readyState||/loaded|complete/.test(b.readyState)){b.onload=b.onreadystatechange=null;if(b.parentNode){b.parentNode.removeChild(b)}b=null;if(!c){e(200,"success")}}};c.insertBefore(b,c.firstChild)},abort:function(){if(b){b.onload(undefined,true)}}}}});var $b=[],_b=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=$b.pop()||m.expando+"_"+vb++;this[a]=true;return a}});m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==false&&(_b.test(b.url)?"url":typeof b.data==="string"&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&_b.test(b.data)&&"data");if(h||b.dataTypes[0]==="jsonp"){e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback;if(h){b[h]=b[h].replace(_b,"$1"+e)}else if(b.jsonp!==false){b.url+=(wb.test(b.url)?"&":"?")+b.jsonp+"="+e}b.converters["script json"]=function(){if(!g){m.error(e+" was not called")}return g[0]};b.dataTypes[0]="json";f=a[e];a[e]=function(){g=arguments};d.always(function(){a[e]=f;if(b[e]){
b.jsonpCallback=c.jsonpCallback;$b.push(e)}if(g&&m.isFunction(f)){f(g[0])}g=f=undefined});return"script"}});m.parseHTML=function(a,b,c){if(!a||typeof a!=="string"){return null}if(typeof b==="boolean"){c=b;b=false}b=b||y;var d=u.exec(a),e=!c&&[];if(d){return[b.createElement(d[1])]}d=m.buildFragment([a],b,e);if(e&&e.length){m(e).remove()}return m.merge([],d.childNodes)};var ac=m.fn.load;m.fn.load=function(a,b,c){if(typeof a!=="string"&&ac){return ac.apply(this,arguments)}var d,e,f,g=this,h=a.indexOf(" ");if(h>=0){d=m.trim(a.slice(h,a.length));a=a.slice(0,h)}if(m.isFunction(b)){c=b;b=undefined}else if(b&&typeof b==="object"){f="POST"}if(g.length>0){m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments;g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])})}return this};m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var bc=a.document.documentElement;function cc(a){return m.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:false}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};if(k==="static"){a.style.position="relative"}h=l.offset();f=m.css(a,"top");i=m.css(a,"left");j=(k==="absolute"||k==="fixed")&&m.inArray("auto",[f,i])>-1;if(j){d=l.position();g=d.top;e=d.left}else{g=parseFloat(f)||0;e=parseFloat(i)||0}if(m.isFunction(b)){b=b.call(a,c,h)}if(b.top!=null){n.top=b.top-h.top+g}if(b.left!=null){n.left=b.left-h.left+e}if("using"in b){b.using.call(a,n)}else{l.css(n)}}};m.fn.extend({offset:function(a){if(arguments.length){return a===undefined?this:this.each(function(b){m.offset.setOffset(this,a,b)})}var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(!f){return}b=f.documentElement;if(!m.contains(b,e)){return d}if(typeof e.getBoundingClientRect!==K){d=e.getBoundingClientRect()}c=cc(f);return{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}},position:function(){if(!this[0]){return}var a,b,c={top:0,left:0},d=this[0];if(m.css(d,"position")==="fixed"){b=d.getBoundingClientRect()}else{a=this.offsetParent();b=this.offset();if(!m.nodeName(a[0],"html")){c=a.offset()}c.top+=m.css(a[0],"borderTopWidth",true);c.left+=m.css(a[0],"borderLeftWidth",true)}return{top:b.top-c.top-m.css(d,"marginTop",true),left:b.left-c.left-m.css(d,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||bc;while(a&&(!m.nodeName(a,"html")&&m.css(a,"position")==="static")){a=a.offsetParent}return a||bc})}});m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=cc(a);if(e===undefined){return f?b in f?f[b]:f.document.documentElement[d]:a[d]}if(f){f.scrollTo(!c?e:m(f).scrollLeft(),c?e:m(f).scrollTop())}else{a[d]=e}},a,d,arguments.length,null)}});m.each(["top","left"],function(a,b){m.cssHooks[b]=La(k.pixelPosition,function(a,c){if(c){c=Ja(a,b);return Ha.test(c)?m(a).position()[b]+"px":c}})});m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||typeof d!=="boolean"),g=c||(d===true||e===true?"margin":"border");return V(this,function(b,c,d){var e;if(m.isWindow(b)){return b.document.documentElement["client"+a]}if(b.nodeType===9){e=b.documentElement;return Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])}return d===undefined?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:undefined,f,null)}})});m.fn.size=function(){return this.length};m.fn.andSelf=m.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return m})}var dc=a.jQuery,ec=a.$;m.noConflict=function(b){if(a.$===m){a.$=ec}if(b&&a.jQuery===m){a.jQuery=dc}return m};if(typeof b===K){a.jQuery=a.$=m}return m});(function(a,b,c){"use strict";function d(a,b){b=b||Error;return function(){var c=arguments[0],d="["+(a?a+":":"")+c+"] ",e=arguments[1],f=arguments,g,h;g=d+e.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1),c;if(b+2<f.length){return Ta(f[b+2])}return a});g=g+"\nhttp://errors.angularjs.org/1.3.20/"+(a?a+"/":"")+c;for(h=2;h<arguments.length;h++){g=g+(h==2?"?":"&")+"p"+(h-2)+"="+encodeURIComponent(Ta(arguments[h]))}return new b(g)}}var e=/^\/(.+)\/([a-z]*)$/;var f="validity";var g=function(a){return M(a)?a.toLowerCase():a};var h=Object.prototype.hasOwnProperty;var i=function(a){return M(a)?a.toUpperCase():a};var j=function(a){return M(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(a.charCodeAt(0)|32)}):a};var k=function(a){return M(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(a.charCodeAt(0)&~32)}):a};if("i"!=="I".toLowerCase()){g=j;i=k}var l,m,n,o=[].slice,p=[].splice,q=[].push,r=Object.prototype.toString,s=d("ng"),t=a.angular||(a.angular={}),u,v=0;l=b.documentMode;function w(a){if(a==null||S(a)){return false}var b="length"in Object(a)&&a.length;if(a.nodeType===La&&b){return true}return M(a)||P(a)||b===0||typeof b==="number"&&b>0&&b-1 in a}function x(a,b,c){var d,e;if(a){if(Q(a)){for(d in a){if(d!="prototype"&&d!="length"&&d!="name"&&(!a.hasOwnProperty||a.hasOwnProperty(d))){b.call(c,a[d],d,a)}}}else if(P(a)||w(a)){var f=typeof a!=="object";for(d=0,e=a.length;d<e;d++){if(f||d in a){b.call(c,a[d],d,a)}}}else if(a.forEach&&a.forEach!==x){a.forEach(b,c,a)}else{for(d in a){if(a.hasOwnProperty(d)){b.call(c,a[d],d,a)}}}}return a}function y(a){return Object.keys(a).sort()}function z(a,b,c){var d=y(a);for(var e=0;e<d.length;e++){b.call(c,a[d[e]],d[e])}return d}function A(a){return function(b,c){a(c,b)}}function B(){return++v}function C(a,b){if(b){a.$$hashKey=b}else{delete a.$$hashKey}}function D(a){var b=a.$$hashKey;for(var c=1,d=arguments.length;c<d;c++){var e=arguments[c];if(e){var f=Object.keys(e);for(var g=0,h=f.length;g<h;g++){var i=f[g];a[i]=e[i]}}}C(a,b);return a}function E(a){return parseInt(a,10)}function F(a,b){return D(Object.create(a),b)}function G(){}G.$inject=[];function H(a){return a}H.$inject=[];function I(a){return function(){return a}}function J(a){return typeof a==="undefined"}function K(a){return typeof a!=="undefined"}function L(a){return a!==null&&typeof a==="object"}function M(a){return typeof a==="string"}function N(a){return typeof a==="number"}function O(a){return r.call(a)==="[object Date]"}var P=Array.isArray;function Q(a){return typeof a==="function"}function R(a){return r.call(a)==="[object RegExp]"}function S(a){return a&&a.window===a}function T(a){return a&&a.$evalAsync&&a.$watch}function U(a){return r.call(a)==="[object File]"}function V(a){return r.call(a)==="[object FormData]"}function W(a){return r.call(a)==="[object Blob]"}function X(a){return typeof a==="boolean"}function Y(a){return a&&Q(a.then)}var Z=function(a){return M(a)?a.trim():a};var $=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function _(a){return!!(a&&(a.nodeName||a.prop&&a.attr&&a.find))}function aa(a){var b={},c=a.split(","),d;for(d=0;d<c.length;d++)b[c[d]]=true;return b}function ba(a){return g(a.nodeName||a[0]&&a[0].nodeName)}function ca(a,b){return Array.prototype.indexOf.call(a,b)!=-1}function da(a,b){var c=a.indexOf(b);if(c>=0)a.splice(c,1);return b}function ea(a,b,c,d){if(S(a)||T(a)){throw s("cpws","Can't copy! Making copies of Window or Scope instances is not supported.")}if(!b){b=a;if(a){if(P(a)){b=ea(a,[],c,d)}else if(O(a)){b=new Date(a.getTime())}else if(R(a)){b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]);b.lastIndex=a.lastIndex}else if(L(a)){var e=Object.create(Object.getPrototypeOf(a));b=ea(a,e,c,d)}}}else{if(a===b)throw s("cpi","Can't copy! Source and destination are identical.");c=c||[];d=d||[];if(L(a)){var f=c.indexOf(a);if(f!==-1)return d[f];c.push(a);d.push(b)}var g;if(P(a)){b.length=0;for(var h=0;h<a.length;h++){g=ea(a[h],null,c,d);if(L(a[h])){c.push(a[h]);d.push(g)}b.push(g)}}else{var i=b.$$hashKey;if(P(b)){b.length=0}else{x(b,function(a,c){delete b[c]})}for(var j in a){if(a.hasOwnProperty(j)){g=ea(a[j],null,c,d);if(L(a[j])){c.push(a[j]);d.push(g)}b[j]=g}}C(b,i)}}return b}function fa(a,b){if(P(a)){b=b||[];for(var c=0,d=a.length;c<d;c++){b[c]=a[c]}}else if(L(a)){b=b||{};for(var e in a){if(!(e.charAt(0)==="$"&&e.charAt(1)==="$")){b[e]=a[e]}}}return b||a}function ga(a,b){if(a===b)return true;if(a===null||b===null)return false;if(a!==a&&b!==b)return true;var d=typeof a,e=typeof b,f,g,h;if(d==e){if(d=="object"){if(P(a)){if(!P(b))return false;if((f=a.length)==b.length){for(g=0;g<f;g++){if(!ga(a[g],b[g]))return false}return true}}else if(O(a)){if(!O(b))return false;return ga(a.getTime(),b.getTime())}else if(R(a)){return R(b)?a.toString()==b.toString():false}else{if(T(a)||T(b)||S(a)||S(b)||P(b)||O(b)||R(b))return false;h={};for(g in a){if(g.charAt(0)==="$"||Q(a[g]))continue;if(!ga(a[g],b[g]))return false;h[g]=true}for(g in b){if(!h.hasOwnProperty(g)&&g.charAt(0)!=="$"&&b[g]!==c&&!Q(b[g]))return false}return true}}}return false}var ha=function(){if(K(ha.isActive_))return ha.isActive_;var a=!!(b.querySelector("[ng-csp]")||b.querySelector("[data-ng-csp]"));if(!a){try{new Function("")}catch(b){a=true}}return ha.isActive_=a};function ia(a,b,c){return a.concat(o.call(b,c))}function ja(a,b){return o.call(a,b||0)}function ka(a,b){var c=arguments.length>2?ja(arguments,2):[];if(Q(b)&&!(b instanceof RegExp)){return c.length?function(){return arguments.length?b.apply(a,ia(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}else{return b}}function la(a,d){var e=d;if(typeof a==="string"&&a.charAt(0)==="$"&&a.charAt(1)==="$"){e=c}else if(S(d)){e="$WINDOW"}else if(d&&b===d){e="$DOCUMENT"}else if(T(d)){e="$SCOPE"}return e}function ma(a,b){if(typeof a==="undefined")return c;if(!N(b)){b=b?2:null}return JSON.stringify(a,la,b)}function na(a){return M(a)?JSON.parse(a):a}function oa(a){a=m(a).clone();try{a.empty()}catch(a){}var b=m("<div>").append(a).html();try{return a[0].nodeType===Na?g(b):b.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+g(b)})}catch(a){return g(b)}}function pa(a){try{return decodeURIComponent(a)}catch(a){}}function qa(a){var b={},c,d;x((a||"").split("&"),function(a){if(a){c=a.replace(/\+/g,"%20").split("=");d=pa(c[0]);if(K(d)){var e=K(c[1])?pa(c[1]):true;if(!h.call(b,d)){b[d]=e}else if(P(b[d])){b[d].push(e)}else{b[d]=[b[d],e]}}}});return b}function ra(a){var b=[];x(a,function(a,c){if(P(a)){x(a,function(a){b.push(ta(c,true)+(a===true?"":"="+ta(a,true)))})}else{b.push(ta(c,true)+(a===true?"":"="+ta(a,true)))}});return b.length?b.join("&"):""}function sa(a){return ta(a,true).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ta(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}var ua=["ng-","data-ng-","ng:","x-ng-"];function va(a,b){var c,d,e=ua.length;a=m(a);for(d=0;d<e;++d){c=ua[d]+b;if(M(c=a.attr(c))){return c}}return null}function wa(a,b){var c,d,e={};x(ua,function(b){var e=b+"app";if(!c&&a.hasAttribute&&a.hasAttribute(e)){c=a;d=a.getAttribute(e)}});x(ua,function(b){var e=b+"app";var f;if(!c&&(f=a.querySelector("["+e.replace(":","\\:")+"]"))){c=f;d=f.getAttribute(e)}});if(c){e.strictDi=va(c,"strict-di")!==null;b(c,d?[d]:[],e)}}function xa(c,d,e){if(!L(e))e={};var f={strictDi:false};e=D(f,e);var g=function(){c=m(c);if(c.injector()){var a=c[0]===b?"document":oa(c);throw s("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"))}d=d||[];d.unshift(["$provide",function(a){a.value("$rootElement",c)}]);if(e.debugInfoEnabled){d.push(["$compileProvider",function(a){a.debugInfoEnabled(true)}])}d.unshift("ng");var f=Ub(d,e.strictDi);f.invoke(["$rootScope","$rootElement","$compile","$injector",function a(b,c,d,e){b.$apply(function(){c.data("$injector",e);d(c)(b)})}]);return f};var h=/^NG_ENABLE_DEBUG_INFO!/;var i=/^NG_DEFER_BOOTSTRAP!/;if(a&&h.test(a.name)){e.debugInfoEnabled=true;a.name=a.name.replace(h,"")}if(a&&!i.test(a.name)){return g()}a.name=a.name.replace(i,"");t.resumeBootstrap=function(a){x(a,function(a){d.push(a)});return g()};if(Q(t.resumeDeferredBootstrap)){t.resumeDeferredBootstrap()}}function ya(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name;a.location.reload()}function za(a){var b=t.element(a).injector();if(!b){throw s("test","no injector found for element argument to getTestability")}return b.get("$$testability")}var Aa=/[A-Z]/g;function Ba(a,b){b=b||"_";return a.replace(Aa,function(a,c){return(c?b:"")+a.toLowerCase()})}var Ca=false;var Da;function Ea(){var b;if(Ca){return}n=a.jQuery;if(n&&n.fn.on){m=n;D(n.fn,{scope:Db.scope,isolateScope:Db.isolateScope,controller:Db.controller,injector:Db.injector,inheritedData:Db.inheritedData});b=n.cleanData;n.cleanData=function(a){var c;if(!Da){for(var d=0,e;(e=a[d])!=null;d++){c=n._data(e,"events");if(c&&c.$destroy){n(e).triggerHandler("$destroy")}}}else{Da=false}b(a)}}else{m=nb}t.element=m;Ca=true}function Fa(a,b,c){if(!a){throw s("areq","Argument '{0}' is {1}",b||"?",c||"required")}return a}function Ga(a,b,c){if(c&&P(a)){a=a[a.length-1]}Fa(Q(a),b,"not a function, got "+(a&&typeof a==="object"?a.constructor.name||"Object":typeof a));return a}function Ha(a,b){if(a==="hasOwnProperty"){throw s("badname","hasOwnProperty is not a valid {0} name",b)}}function Ia(a,b,c){if(!b)return a;var d=b.split(".");var e;var f=a;var g=d.length;for(var h=0;h<g;h++){e=d[h];if(a){a=(f=a)[e]}}if(!c&&Q(a)){return ka(f,a)}return a}function Ja(a){var b=a[0];var c=a[a.length-1];var d=[b];do{b=b.nextSibling;if(!b)break;d.push(b)}while(b!==c);return m(d)}function Ka(){return Object.create(null)}var La=1;var Ma=2;var Na=3;var Oa=8;var Pa=9;var Qa=11;function Ra(a){var b=d("$injector");var c=d("ng");function e(a,b,c){return a[b]||(a[b]=c())}var f=e(a,"angular",Object);f.$$minErr=f.$$minErr||d;return e(f,"module",function(){var a={};return function d(f,g,h){var i=function(a,b){if(a==="hasOwnProperty"){throw c("badname","hasOwnProperty is not a valid {0} name",b)}};i(f,"module");if(g&&a.hasOwnProperty(f)){a[f]=null}return e(a,f,function(){if(!g){throw b("nomod","Module '{0}' is not available! You either misspelled "+"the module name or forgot to load it. If registering a module ensure that you "+"specify the dependencies as the second argument.",f)}var a=[];var c=[];var d=[];var e=j("$injector","invoke","push",c);var i={_invokeQueue:a,_configBlocks:c,_runBlocks:d,requires:g,name:f,provider:j("$provide","provider"),factory:j("$provide","factory"),service:j("$provide","service"),value:j("$provide","value"),constant:j("$provide","constant","unshift"),animation:j("$animateProvider","register"),filter:j("$filterProvider","register"),controller:j("$controllerProvider","register"),directive:j("$compileProvider","directive"),config:e,run:function(a){d.push(a);return this}};if(h){e(h)}return i;function j(b,c,d,e){if(!e)e=a;return function(){e[d||"push"]([b,c,arguments]);return i}}})}})}function Sa(a){var b=[];return JSON.stringify(a,function(a,c){c=la(a,c);if(L(c)){if(b.indexOf(c)>=0)return"<<already seen>>";b.push(c)}return c})}function Ta(a){if(typeof a==="function"){return a.toString().replace(/ \{[\s\S]*$/,"")}else if(typeof a==="undefined"){return"undefined"}else if(typeof a!=="string"){return Sa(a)}return a}var Ua={full:"1.3.20",major:1,minor:3,dot:20,codeName:"shallow-translucence"};function Va(b){D(b,{bootstrap:xa,copy:ea,extend:D,equals:ga,element:m,forEach:x,injector:Ub,noop:G,bind:ka,toJson:ma,fromJson:na,identity:H,isUndefined:J,isDefined:K,isString:M,isFunction:Q,isObject:L,isNumber:N,isElement:_,isArray:P,version:Ua,isDate:O,lowercase:g,uppercase:i,callbacks:{counter:0},getTestability:za,$$minErr:d,$$csp:ha,reloadWithDebugInfo:ya});u=Ra(a);try{u("ngLocale")}catch(a){u("ngLocale",[]).provider("$locale",Fc)}u("ng",["ngLocale"],["$provide",function a(b){b.provider({$$sanitizeUri:Ad});b.provider("$compile",cc).directive({a:qe,input:We,textarea:We,form:xe,script:Pf,select:Sf,style:Uf,option:Tf,ngBind:Ze,ngBindHtml:_e,ngBindTemplate:$e,ngClass:cf,ngClassEven:ef,ngClassOdd:df,ngCloak:ff,ngController:gf,ngForm:ye,ngHide:Jf,ngIf:kf,ngInclude:lf,ngInit:nf,ngNonBindable:Df,ngPluralize:Ef,ngRepeat:Ff,ngShow:If,ngStyle:Kf,ngSwitch:Lf,ngSwitchWhen:Mf,ngSwitchDefault:Nf,ngOptions:Rf,ngTransclude:Of,ngModel:yf,ngList:of,ngChange:af,pattern:Wf,ngPattern:Wf,required:Vf,ngRequired:Vf,minlength:Yf,ngMinlength:Yf,maxlength:Xf,ngMaxlength:Xf,ngValue:Ye,ngModelOptions:Af}).directive({ngInclude:mf}).directive(re).directive(hf);b.provider({$anchorScroll:Vb,$animate:Xb,$browser:$b,$cacheFactory:_b,$controller:kc,$document:lc,$exceptionHandler:mc,$filter:Qd,$interpolate:Dc,$interval:Ec,$http:yc,$httpBackend:Ac,$location:Xc,$log:Yc,$parse:ud,$rootScope:zd,$q:vd,$$q:wd,$sce:Gd,$sceDelegate:Fd,$sniffer:Hd,$templateCache:ac,$templateRequest:Id,$$testability:Jd,$timeout:Kd,$window:Pd,$$rAF:yd,$$asyncCallback:Yb,$$jqLite:Kb})}])}nb.expando="ng339";var Wa=nb.cache={},Xa=1,Ya=function(a,b,c){a.addEventListener(b,c,false)},Za=function(a,b,c){a.removeEventListener(b,c,false)};nb._data=function(a){return this.cache[a[this.expando]]||{}};function $a(){return++Xa}var _a=/([\:\-\_]+(.))/g;var ab=/^moz([A-Z])/;var bb={mouseleave:"mouseout",mouseenter:"mouseover"};var cb=d("jqLite");function db(a){return a.replace(_a,function(a,b,c,d){return d?c.toUpperCase():c}).replace(ab,"Moz$1")}var eb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/;var fb=/<|&#?\w+;/;var gb=/<([\w:]+)/;var hb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;var ib={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option;ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead;ib.th=ib.td;function jb(a){return!fb.test(a)}function kb(a){var b=a.nodeType;return b===La||!b||b===Pa}function lb(a,b){var c,d,e,f=b.createDocumentFragment(),g=[],h;if(jb(a)){g.push(b.createTextNode(a))}else{c=c||f.appendChild(b.createElement("div"));d=(gb.exec(a)||["",""])[1].toLowerCase();e=ib[d]||ib._default;c.innerHTML=e[1]+a.replace(hb,"<$1></$2>")+e[2];h=e[0];while(h--){c=c.lastChild}g=ia(g,c.childNodes);c=f.firstChild;c.textContent=""}f.textContent="";f.innerHTML="";x(g,function(a){f.appendChild(a)});return f}function mb(a,c){c=c||b;var d;if(d=eb.exec(a)){return[c.createElement(d[1])]}if(d=lb(a,c)){return d.childNodes}return[]}function nb(a){if(a instanceof nb){return a}var b;if(M(a)){a=Z(a);b=true}if(!(this instanceof nb)){if(b&&a.charAt(0)!="<"){throw cb("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element")}return new nb(a)}if(b){xb(this,mb(a))}else{xb(this,a)}}function ob(a){return a.cloneNode(true)}function pb(a,b){if(!b)rb(a);if(a.querySelectorAll){var c=a.querySelectorAll("*");for(var d=0,e=c.length;d<e;d++){rb(c[d])}}}function qb(a,b,c,d){if(K(d))throw cb("offargs","jqLite#off() does not support the `selector` argument");var e=sb(a);var f=e&&e.events;var g=e&&e.handle;if(!g)return;if(!b){for(b in f){if(b!=="$destroy"){Za(a,b,g)}delete f[b]}}else{x(b.split(" "),function(b){if(K(c)){var d=f[b];da(d||[],c);if(d&&d.length>0){return}}Za(a,b,g);delete f[b]})}}function rb(a,b){var d=a.ng339;var e=d&&Wa[d];if(e){if(b){delete e.data[b];return}if(e.handle){if(e.events.$destroy){e.handle({},"$destroy")}qb(a)}delete Wa[d];a.ng339=c}}function sb(a,b){var d=a.ng339,e=d&&Wa[d];if(b&&!e){a.ng339=d=$a();e=Wa[d]={events:{},data:{},handle:c}}return e}function tb(a,b,c){if(kb(a)){var d=K(c);var e=!d&&b&&!L(b);var f=!b;var g=sb(a,!e);var h=g&&g.data;if(d){h[b]=c}else{if(f){return h}else{if(e){return h&&h[b]}else{D(h,b)}}}}}function ub(a,b){if(!a.getAttribute)return false;return(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1}function vb(a,b){if(b&&a.setAttribute){x(b.split(" "),function(b){a.setAttribute("class",Z((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Z(b)+" "," ")))})}}function wb(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");x(b.split(" "),function(a){a=Z(a);if(c.indexOf(" "+a+" ")===-1){c+=a+" "}});a.setAttribute("class",Z(c))}}function xb(a,b){if(b){if(b.nodeType){a[a.length++]=b}else{var c=b.length;if(typeof c==="number"&&b.window!==b){if(c){for(var d=0;d<c;d++){a[a.length++]=b[d]}}}else{a[a.length++]=b}}}}function yb(a,b){return zb(a,"$"+(b||"ngController")+"Controller")}function zb(a,b,d){if(a.nodeType==Pa){a=a.documentElement}var e=P(b)?b:[b];while(a){for(var f=0,g=e.length;f<g;f++){if((d=m.data(a,e[f]))!==c)return d}a=a.parentNode||a.nodeType===Qa&&a.host}}function Ab(a){pb(a,true);while(a.firstChild){a.removeChild(a.firstChild)}}function Bb(a,b){if(!b)pb(a);var c=a.parentNode;if(c)c.removeChild(a)}function Cb(b,c){c=c||a;if(c.document.readyState==="complete"){c.setTimeout(b)}else{m(c).on("load",b)}}var Db=nb.prototype={ready:function(c){var d=false;function e(){if(d)return;d=true;c()}if(b.readyState==="complete"){setTimeout(e)}else{this.on("DOMContentLoaded",e);nb(a).on("load",e)}},toString:function(){var a=[];x(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return a>=0?m(this[a]):m(this[this.length+a])},length:0,push:q,sort:[].sort,splice:[].splice};var Eb={};x("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Eb[g(a)]=a});var Fb={};x("input,select,option,textarea,button,form,details".split(","),function(a){Fb[a]=true});var Gb={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};function Hb(a,b){var c=Eb[b.toLowerCase()];return c&&Fb[ba(a)]&&c}function Ib(a,b){var c=a.nodeName;return(c==="INPUT"||c==="TEXTAREA")&&Gb[b]}x({data:tb,removeData:rb},function(a,b){nb[b]=a});x({data:tb,inheritedData:zb,scope:function(a){return m.data(a,"$scope")||zb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return m.data(a,"$isolateScope")||m.data(a,"$isolateScopeNoTemplate")},controller:yb,injector:function(a){return zb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:ub,css:function(a,b,c){b=db(b);if(K(c)){a.style[b]=c}else{return a.style[b]}},attr:function(a,b,d){var e=a.nodeType;if(e===Na||e===Ma||e===Oa){return}var f=g(b);if(Eb[f]){if(K(d)){if(!!d){a[b]=true;a.setAttribute(b,f)}else{a[b]=false;a.removeAttribute(f)}}else{return a[b]||(a.attributes.getNamedItem(b)||G).specified?f:c}}else if(K(d)){a.setAttribute(b,d)}else if(a.getAttribute){var h=a.getAttribute(b,2);return h===null?c:h}},prop:function(a,b,c){if(K(c)){a[b]=c}else{return a[b]}},text:function(){a.$dv="";return a;function a(a,b){if(J(b)){var c=a.nodeType;return c===La||c===Na?a.textContent:""}a.textContent=b}}(),val:function(a,b){if(J(b)){if(a.multiple&&ba(a)==="select"){var c=[];x(a.options,function(a){if(a.selected){c.push(a.value||a.text)}});return c.length===0?null:c}return a.value}a.value=b},html:function(a,b){if(J(b)){return a.innerHTML}pb(a,true);a.innerHTML=b},empty:Ab},function(a,b){nb.prototype[b]=function(b,d){var e,f;var g=this.length;if(a!==Ab&&(a.length==2&&(a!==ub&&a!==yb)?b:d)===c){if(L(b)){for(e=0;e<g;e++){if(a===tb){a(this[e],b)}else{for(f in b){a(this[e],f,b[f])}}}return this}else{var h=a.$dv;var i=h===c?Math.min(g,1):g;for(var j=0;j<i;j++){var k=a(this[j],b,d);h=h?h+k:k}return h}}else{for(e=0;e<g;e++){a(this[e],b,d)}return this}}});function Jb(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type];var f=e?e.length:0;if(!f)return;if(J(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=true;if(c.stopPropagation){c.stopPropagation()}if(g){g.call(c)}}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===true};if(f>1){e=fa(e)}for(var h=0;h<f;h++){if(!c.isImmediatePropagationStopped()){e[h].call(a,c)}}};c.elem=a;return c}x({removeData:rb,on:function a(b,c,d,e){if(K(e))throw cb("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(!kb(b)){return}var f=sb(b,true);var g=f.events;var h=f.handle;if(!h){h=f.handle=Jb(b,g)}var i=c.indexOf(" ")>=0?c.split(" "):[c];var j=i.length;while(j--){c=i[j];var k=g[c];if(!k){g[c]=[];if(c==="mouseenter"||c==="mouseleave"){a(b,bb[c],function(a){var b=this,d=a.relatedTarget;if(!d||d!==b&&!b.contains(d)){h(a,c)}})}else{if(c!=="$destroy"){Ya(b,c,h)}}k=g[c]}k.push(d)}},off:qb,one:function(a,b,c){a=m(a);a.on(b,function d(){a.off(b,c);a.off(b,d)});a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;pb(a);x(new nb(b),function(b){if(c){d.insertBefore(b,c.nextSibling)}else{d.replaceChild(b,a)}c=b})},children:function(a){var b=[];x(a.childNodes,function(a){if(a.nodeType===La)b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c!==La&&c!==Qa)return;b=new nb(b);for(var d=0,e=b.length;d<e;d++){var f=b[d];a.appendChild(f)}},prepend:function(a,b){if(a.nodeType===La){var c=a.firstChild;x(new nb(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=m(b).eq(0).clone()[0];var c=a.parentNode;if(c){c.replaceChild(b,a)}b.appendChild(a)},remove:Bb,detach:function(a){Bb(a,true)},after:function(a,b){var c=a,d=a.parentNode;b=new nb(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];d.insertBefore(g,c.nextSibling);c=g}},addClass:wb,removeClass:vb,toggleClass:function(a,b,c){if(b){x(b.split(" "),function(b){var d=c;if(J(d)){d=!ub(a,b)}(d?wb:vb)(a,b)})}},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==Qa?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){if(a.getElementsByTagName){return a.getElementsByTagName(b)}else{return[]}},clone:ob,triggerHandler:function(a,b,c){var d,e,f;var g=b.type||b;var h=sb(a);var i=h&&h.events;var j=i&&i[g];if(j){d={preventDefault:function(){this.defaultPrevented=true},isDefaultPrevented:function(){return this.defaultPrevented===true},stopImmediatePropagation:function(){this.immediatePropagationStopped=true},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===true},stopPropagation:G,type:g,target:a};if(b.type){d=D(d,b)}e=fa(j);f=c?[d].concat(c):[d];x(e,function(b){if(!d.isImmediatePropagationStopped()){b.apply(a,f)}})}}},function(a,b){nb.prototype[b]=function(b,c,d){var e;for(var f=0,g=this.length;f<g;f++){if(J(e)){e=a(this[f],b,c,d);if(K(e)){e=m(e)}}else{xb(e,a(this[f],b,c,d))}}return K(e)?e:this};nb.prototype.bind=nb.prototype.on;nb.prototype.unbind=nb.prototype.off});function Kb(){this.$get=function a(){return D(nb,{hasClass:function(a,b){if(a.attr)a=a[0];return ub(a,b)},addClass:function(a,b){if(a.attr)a=a[0];return wb(a,b)},removeClass:function(a,b){if(a.attr)a=a[0];return vb(a,b)}})}}function Lb(a,b){var c=a&&a.$$hashKey;if(c){if(typeof c==="function"){c=a.$$hashKey()}return c}var d=typeof a;if(d=="function"||d=="object"&&a!==null){c=a.$$hashKey=d+":"+(b||B)()}else{c=d+":"+a}return c}function Mb(a,b){if(b){var c=0;this.nextUid=function(){return++c}}x(a,this.put,this)}Mb.prototype={put:function(a,b){this[Lb(a,this.nextUid)]=b},get:function(a){return this[Lb(a,this.nextUid)]},remove:function(a){var b=this[a=Lb(a,this.nextUid)];delete this[a];return b}};var Nb=/^function\s*[^\(]*\(\s*([^\)]*)\)/m;var Ob=/,/;var Pb=/^\s*(_?)(\S+?)\1\s*$/;var Qb=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;var Rb=d("$injector");function Sb(a){var b=a.toString().replace(Qb,""),c=b.match(Nb);if(c){return"function("+(c[1]||"").replace(/[\s\r\n]+/," ")+")"}return"fn"}function Tb(a,b,c){var d,e,f,g;if(typeof a==="function"){if(!(d=a.$inject)){d=[];if(a.length){if(b){if(!M(c)||!c){c=a.name||Sb(a)}throw Rb("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c)}e=a.toString().replace(Qb,"");f=e.match(Nb);x(f[1].split(Ob),function(a){a.replace(Pb,function(a,b,c){d.push(c)})})}a.$inject=d}}else if(P(a)){g=a.length-1;Ga(a[g],"fn");d=a.slice(0,g)}else{Ga(a,"fn",true)}return d}function Ub(a,b){b=b===true;var d={},e="Provider",f=[],g=new Mb([],true),h={$provide:{provider:l(m),factory:l(o),service:l(p),value:l(q),constant:l(r),decorator:s}},i=h.$injector=w(h,function(a,b){if(t.isString(b)){f.push(b)}throw Rb("unpr","Unknown provider: {0}",f.join(" <- "))}),j={},k=j.$injector=w(j,function(a,b){var d=i.get(a+e,b);return k.invoke(d.$get,d,c,a)});x(v(a),function(a){k.invoke(a||G)});return k;function l(a){return function(b,c){if(L(b)){x(b,A(a))}else{return a(b,c)}}}function m(a,b){Ha(a,"service");if(Q(b)||P(b)){b=i.instantiate(b)}if(!b.$get){throw Rb("pget","Provider '{0}' must define $get factory method.",a)}return h[a+e]=b}function n(a,b){return function c(){var d=k.invoke(b,this);if(J(d)){throw Rb("undef","Provider '{0}' must return a value from $get factory method.",a)}return d}}function o(a,b,c){return m(a,{$get:c!==false?n(a,b):b})}function p(a,b){return o(a,["$injector",function(a){return a.instantiate(b)}])}function q(a,b){return o(a,I(b),false)}function r(a,b){Ha(a,"constant");h[a]=b;j[a]=b}function s(a,b){var c=i.get(a+e),d=c.$get;c.$get=function(){var a=k.invoke(d,c);return k.invoke(b,null,{$delegate:a})}}function v(a){var b=[],c;x(a,function(a){if(g.get(a))return;g.put(a,true);function d(a){var b,c;for(b=0,c=a.length;b<c;b++){var d=a[b],e=i.get(d[0]);e[d[1]].apply(e,d[2])}}try{if(M(a)){c=u(a);b=b.concat(v(c.requires)).concat(c._runBlocks);d(c._invokeQueue);d(c._configBlocks)}else if(Q(a)){b.push(i.invoke(a))}else if(P(a)){b.push(i.invoke(a))}else{Ga(a,"module")}}catch(b){if(P(a)){a=a[a.length-1]}if(b.message&&b.stack&&b.stack.indexOf(b.message)==-1){b=b.message+"\n"+b.stack}throw Rb("modulerr","Failed to instantiate module {0} due to:\n{1}",a,b.stack||b.message||b)}});return b}function w(a,c){function g(b,e){if(a.hasOwnProperty(b)){if(a[b]===d){throw Rb("cdep","Circular dependency found: {0}",b+" <- "+f.join(" <- "))}return a[b]}else{try{f.unshift(b);a[b]=d;return a[b]=c(b,e)}catch(c){if(a[b]===d){delete a[b]}throw c}finally{f.shift()}}}function i(a,c,d,e){if(typeof d==="string"){e=d;d=null}var f=[],h=Ub.$$annotate(a,b,e),i,j,k;for(j=0,i=h.length;j<i;j++){k=h[j];if(typeof k!=="string"){throw Rb("itkn","Incorrect injection token! Expected service name as string, got {0}",k)}f.push(d&&d.hasOwnProperty(k)?d[k]:g(k,e))}if(P(a)){a=a[i]}return a.apply(c,f)}function j(a,b,c){var d=Object.create((P(a)?a[a.length-1]:a).prototype||null);var e=i(a,d,b,c);return L(e)||Q(e)?e:d}return{invoke:i,instantiate:j,get:g,annotate:Ub.$$annotate,has:function(b){return h.hasOwnProperty(b+e)||a.hasOwnProperty(b)}}}}Ub.$$annotate=Tb;function Vb(){var a=true;this.disableAutoScrolling=function(){a=false};this.$get=["$window","$location","$rootScope",function(b,c,d){var e=b.document;function f(a){var b=null;Array.prototype.some.call(a,function(a){if(ba(a)==="a"){b=a;return true}});return b}function g(){var a=i.yOffset;if(Q(a)){a=a()}else if(_(a)){var c=a[0];var d=b.getComputedStyle(c);if(d.position!=="fixed"){a=0}else{a=c.getBoundingClientRect().bottom}}else if(!N(a)){a=0}return a}function h(a){if(a){a.scrollIntoView();var c=g();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else{b.scrollTo(0,0)}}function i(){var a=c.hash(),b;if(!a)h(null);else if(b=e.getElementById(a))h(b);else if(b=f(e.getElementsByName(a)))h(b);else if(a==="top")h(null)}if(a){d.$watch(function a(){return c.hash()},function a(b,c){if(b===c&&b==="")return;Cb(function(){d.$evalAsync(i)})})}return i}]}var Wb=d("$animate");var Xb=["$provide",function(a){this.$$selectors={};this.register=function(b,c){var d=b+"-animation";if(b&&b.charAt(0)!=".")throw Wb("notcsel","Expecting class selector starting with '.' got '{0}'.",b);this.$$selectors[b.substr(1)]=d;a.factory(d,c)};this.classNameFilter=function(a){if(arguments.length===1){
this.$$classNameFilter=a instanceof RegExp?a:null}return this.$$classNameFilter};this.$get=["$$q","$$asyncCallback","$rootScope",function(a,b,c){var d;function e(b){var d,e=a.defer();e.promise.$$cancelFn=function a(){d&&d()};c.$$postDigest(function a(){d=b(function a(){e.resolve()})});return e.promise}function f(a,b){var c=[],d=[];var e=Ka();x((a.attr("class")||"").split(/\s+/),function(a){e[a]=true});x(b,function(a,b){var f=e[b];if(a===false&&f){d.push(b)}else if(a===true&&!f){c.push(b)}});return c.length+d.length>0&&[c.length?c:null,d.length?d:null]}function g(a,b,c){for(var d=0,e=b.length;d<e;++d){var f=b[d];a[f]=c}}function h(){if(!d){d=a.defer();b(function(){d.resolve();d=null})}return d.promise}function i(a,b){if(t.isObject(b)){var c=D(b.from||{},b.to||{});a.css(c)}}return{animate:function(a,b,c){i(a,{from:b,to:c});return h()},enter:function(a,b,c,d){i(a,d);c?c.after(a):b.prepend(a);return h()},leave:function(a,b){i(a,b);a.remove();return h()},move:function(a,b,c,d){return this.enter(a,b,c,d)},addClass:function(a,b,c){return this.setClass(a,b,[],c)},$$addClassImmediately:function(a,b,c){a=m(a);b=!M(b)?P(b)?b.join(" "):"":b;x(a,function(a){wb(a,b)});i(a,c);return h()},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},$$removeClassImmediately:function(a,b,c){a=m(a);b=!M(b)?P(b)?b.join(" "):"":b;x(a,function(a){vb(a,b)});i(a,c);return h()},setClass:function(a,b,c,d){var h=this;var i="$$animateClasses";var j=false;a=m(a);var k=a.data(i);if(!k){k={classes:{},options:d};j=true}else if(d&&k.options){k.options=t.extend(k.options||{},d)}var l=k.classes;b=P(b)?b:b.split(" ");c=P(c)?c:c.split(" ");g(l,b,true);g(l,c,false);if(j){k.promise=e(function(b){var c=a.data(i);a.removeData(i);if(c){var d=f(a,c.classes);if(d){h.$$setClassImmediately(a,d[0],d[1],c.options)}}b()});a.data(i,k)}return k.promise},$$setClassImmediately:function(a,b,c,d){b&&this.$$addClassImmediately(a,b);c&&this.$$removeClassImmediately(a,c);i(a,d);return h()},enabled:G,cancel:G}}]}];function Yb(){this.$get=["$$rAF","$timeout",function(a,b){return a.supported?function(b){return a(b)}:function(a){return b(a,0,false)}}]}function Zb(a,b,d,e){var f=this,g=b[0],h=a.location,i=a.history,j=a.setTimeout,k=a.clearTimeout,l={};f.isMock=false;var n=0;var o=[];f.$$completeOutstandingRequest=p;f.$$incOutstandingRequestCount=function(){n++};function p(a){try{a.apply(null,ja(arguments,1))}finally{n--;if(n===0){while(o.length){try{o.pop()()}catch(a){d.error(a)}}}}}function q(a){var b=a.indexOf("#");return b===-1?"":a.substr(b)}f.notifyWhenNoOutstandingRequests=function(a){x(r,function(a){a()});if(n===0){a()}else{o.push(a)}};var r=[],s;f.addPollFn=function(a){if(J(s))t(100,j);r.push(a);return a};function t(a,b){(function c(){x(r,function(a){a()});s=b(c,a)})()}var u,v,w=h.href,y=b.find("base"),z=null;F();v=u;f.url=function(b,c,d){if(J(d)){d=null}if(h!==a.location)h=a.location;if(i!==a.history)i=a.history;if(b){var g=v===d;if(w===b&&(!e.history||g)){return f}var j=w&&Nc(w)===Nc(b);w=b;v=d;if(e.history&&(!j||!g)){i[c?"replaceState":"pushState"](d,"",b);F();v=u}else{if(!j||z){z=b}if(c){h.replace(b)}else if(!j){h.href=b}else{h.hash=q(b)}}return f}else{return z||h.href.replace(/%27/g,"'")}};f.state=function(){return u};var A=[],B=false;function C(){F();H()}function D(){try{return i.state}catch(a){}}var E=null;function F(){u=D();u=J(u)?null:u;if(ga(u,E)){u=E}E=u}function H(){if(w===f.url()&&v===u){return}w=f.url();v=u;x(A,function(a){a(f.url(),u)})}f.onUrlChange=function(b){if(!B){if(e.history)m(a).on("popstate",C);m(a).on("hashchange",C);B=true}A.push(b);return b};f.$$checkUrlChange=H;f.baseHref=function(){var a=y.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var I={};var K="";var L=f.baseHref();function N(a){try{return decodeURIComponent(a)}catch(b){return a}}f.cookies=function(a,b){var e,f,h,i,j;if(a){if(b===c){g.cookie=encodeURIComponent(a)+"=;path="+L+";expires=Thu, 01 Jan 1970 00:00:00 GMT"}else{if(M(b)){e=(g.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path="+L).length+1;if(e>4096){d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!")}}}}else{if(g.cookie!==K){K=g.cookie;f=K.split("; ");I={};for(i=0;i<f.length;i++){h=f[i];j=h.indexOf("=");if(j>0){a=N(h.substring(0,j));if(I[a]===c){I[a]=N(h.substring(j+1))}}}}return I}};f.defer=function(a,b){var c;n++;c=j(function(){delete l[c];p(a)},b||0);l[c]=true;return c};f.defer.cancel=function(a){if(l[a]){delete l[a];k(a);p(G);return true}return false}}function $b(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Zb(a,d,b,c)}]}function _b(){this.$get=function(){var a={};function b(b,c){if(b in a){throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",b)}var e=0,f=D({},c,{id:b}),g={},h=c&&c.capacity||Number.MAX_VALUE,i={},j=null,k=null;return a[b]={put:function(a,b){if(h<Number.MAX_VALUE){var c=i[a]||(i[a]={key:a});l(c)}if(J(b))return;if(!(a in g))e++;g[a]=b;if(e>h){this.remove(k.key)}return b},get:function(a){if(h<Number.MAX_VALUE){var b=i[a];if(!b)return;l(b)}return g[a]},remove:function(a){if(h<Number.MAX_VALUE){var b=i[a];if(!b)return;if(b==j)j=b.p;if(b==k)k=b.n;m(b.n,b.p);delete i[a]}delete g[a];e--},removeAll:function(){g={};e=0;i={};j=k=null},destroy:function(){g=null;f=null;i=null;delete a[b]},info:function(){return D({},f,{size:e})}};function l(a){if(a!=j){if(!k){k=a}else if(k==a){k=a.n}m(a.n,a.p);m(a,j);j=a;j.n=null}}function m(a,b){if(a!=b){if(a)a.p=b;if(b)b.n=a}}}b.info=function(){var b={};x(a,function(a,c){b[c]=a.info()});return b};b.get=function(b){return a[b]};return b}}function ac(){this.$get=["$cacheFactory",function(a){return a("templates")}]}var bc=d("$compile");cc.$inject=["$provide","$$sanitizeUriProvider"];function cc(a,d){var e={},f="Directive",h=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,i=/(([\w\-]+)(?:\:([^;]+))?;?)/,j=aa("ngSrc,ngSrcset,src,srcset"),k=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/;var l=/^(on[a-z]+|formaction)$/;function o(a,b){var c=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/;var d={};x(a,function(a,e){var f=a.match(c);if(!f){throw bc("iscp","Invalid isolate scope definition for directive '{0}'."+" Definition: {... {1}: '{2}' ...}",b,e,a)}d[e]={mode:f[1][0],collection:f[2]==="*",optional:f[3]==="?",attrName:f[4]||e}});return d}this.directive=function b(c,d){Ha(c,"directive");if(M(c)){Fa(d,"directiveFactory");if(!e.hasOwnProperty(c)){e[c]=[];a.factory(c+f,["$injector","$exceptionHandler",function(a,b){var d=[];x(e[c],function(e,f){try{var g=a.invoke(e);if(Q(g)){g={compile:I(g)}}else if(!g.compile&&g.link){g.compile=I(g.link)}g.priority=g.priority||0;g.index=f;g.name=g.name||c;g.require=g.require||g.controller&&g.name;g.restrict=g.restrict||"EA";if(L(g.scope)){g.$$isolateBindings=o(g.scope,g.name)}d.push(g)}catch(a){b(a)}});return d}])}e[c].push(d)}else{x(c,A(b))}return this};this.aHrefSanitizationWhitelist=function(a){if(K(a)){d.aHrefSanitizationWhitelist(a);return this}else{return d.aHrefSanitizationWhitelist()}};this.imgSrcSanitizationWhitelist=function(a){if(K(a)){d.imgSrcSanitizationWhitelist(a);return this}else{return d.imgSrcSanitizationWhitelist()}};var p=true;this.debugInfoEnabled=function(a){if(K(a)){p=a;return this}return p};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,d,o,q,r,s,t,u,v,w,y){var z=function(a,b){if(b){var c=Object.keys(b);var d,e,f;for(d=0,e=c.length;d<e;d++){f=c[d];this[f]=b[f]}}else{this.$attr={}}this.$$element=a};z.prototype={$normalize:ec,$addClass:function(a){if(a&&a.length>0){w.addClass(this.$$element,a)}},$removeClass:function(a){if(a&&a.length>0){w.removeClass(this.$$element,a)}},$updateClass:function(a,b){var c=hc(a,b);if(c&&c.length){w.addClass(this.$$element,c)}var d=hc(b,a);if(d&&d.length){w.removeClass(this.$$element,d)}},$set:function(a,b,d,e){var f=this.$$element[0],g=Hb(f,a),h=Ib(f,a),i=a,j;if(g){this.$$element.prop(a,b);e=g}else if(h){this[h]=b;i=h}this[a]=b;if(e){this.$attr[a]=e}else{e=this.$attr[a];if(!e){this.$attr[a]=e=Ba(a,"-")}}j=ba(this.$$element);if(j==="a"&&a==="href"||j==="img"&&a==="src"){this[a]=b=y(b,a==="src")}else if(j==="img"&&a==="srcset"){var k="";var l=Z(b);var m=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/;var n=/\s/.test(l)?m:/(,)/;var p=l.split(n);var q=Math.floor(p.length/2);for(var r=0;r<q;r++){var s=r*2;k+=y(Z(p[s]),true);k+=" "+Z(p[s+1])}var t=Z(p[r*2]).split(/\s/);k+=y(Z(t[0]),true);if(t.length===2){k+=" "+Z(t[1])}this[a]=b=k}if(d!==false){if(b===null||b===c){this.$$element.removeAttr(e)}else{this.$$element.attr(e,b)}}var u=this.$$observers;u&&x(u[i],function(a){try{a(b)}catch(a){o(a)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=Ka()),e=d[a]||(d[a]=[]);e.push(b);t.$evalAsync(function(){if(!e.$$inter&&c.hasOwnProperty(a)){b(c[a])}});return function(){da(e,b)}}};function A(a,b){try{a.addClass(b)}catch(a){}}var B=d.startSymbol(),C=d.endSymbol(),E=B=="{{"||C=="}}"?H:function a(b){return b.replace(/\{\{/g,B).replace(/}}/g,C)},I=/^ngAttr[A-Z]/;J.$$addBindingInfo=p?function a(b,c){var d=b.data("$binding")||[];if(P(c)){d=d.concat(c)}else{d.push(c)}b.data("$binding",d)}:G;J.$$addBindingClass=p?function a(b){A(b,"ng-binding")}:G;J.$$addScopeInfo=p?function a(b,c,d,e){var f=d?e?"$isolateScopeNoTemplate":"$isolateScope":"$scope";b.data(f,c)}:G;J.$$addScopeClass=p?function a(b,c){A(b,c?"ng-isolate-scope":"ng-scope")}:G;return J;function J(a,b,c,d,e){if(!(a instanceof m)){a=m(a)}x(a,function(b,c){if(b.nodeType==Na&&b.nodeValue.match(/\S+/)){a[c]=m(b).wrap("<span></span>").parent()[0]}});var f=N(a,b,a,c,d,e);J.$$addScopeClass(a);var g=null;return function b(c,d,e){Fa(c,"scope");e=e||{};var h=e.parentBoundTranscludeFn,i=e.transcludeControllers,j=e.futureParentElement;if(h&&h.$$boundTransclude){h=h.$$boundTransclude}if(!g){g=K(j)}var k;if(g!=="html"){k=m(fa(g,m("<div>").append(a).html()))}else if(d){k=Db.clone.call(a)}else{k=a}if(i){for(var l in i){k.data("$"+l+"Controller",i[l].instance)}}J.$$addScopeInfo(k,c);if(d)d(k,c);if(f)f(c,k,k,h);return k}}function K(a){var b=a&&a[0];if(!b){return"html"}else{return ba(b)!=="foreignobject"&&b.toString().match(/SVG/)?"svg":"html"}}function N(a,b,d,e,f,g){var h=[],i,j,k,l,n,o,p;for(var q=0;q<a.length;q++){i=new z;j=R(a[q],[],i,q===0?e:c,f);k=j.length?V(j,a[q],i,b,d,null,[],[],g):null;if(k&&k.scope){J.$$addScopeClass(i.$$element)}n=k&&k.terminal||!(l=a[q].childNodes)||!l.length?null:N(l,k?(k.transcludeOnThisElement||!k.templateOnThisElement)&&k.transclude:b);if(k||n){h.push(q,k,n);o=true;p=p||k}g=null}return o?r:null;function r(a,d,e,f){var g,i,j,k,l,n,o,q;var r;if(p){var s=d.length;r=new Array(s);for(l=0;l<h.length;l+=3){o=h[l];r[o]=d[o]}}else{r=d}for(l=0,n=h.length;l<n;){j=r[h[l++]];g=h[l++];i=h[l++];if(g){if(g.scope){k=a.$new();J.$$addScopeInfo(m(j),k)}else{k=a}if(g.transcludeOnThisElement){q=O(a,g.transclude,f,g.elementTranscludeOnThisElement)}else if(!g.templateOnThisElement&&f){q=f}else if(!f&&b){q=O(a,b)}else{q=null}g(i,k,j,e,q)}else if(i){i(a,j.childNodes,c,f)}}}}function O(a,b,c,d){var e=function(d,e,f,g,h){if(!d){d=a.$new(false,h);d.$$transcluded=true}return b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})};return e}function R(a,b,c,d,e){var f=a.nodeType,g=c.$attr,j,k;switch(f){case La:X(b,ec(ba(a)),"E",d,e);for(var l,m,n,o,p,q,r=a.attributes,s=0,t=r&&r.length;s<t;s++){var u=false;var v=false;l=r[s];m=l.name;p=Z(l.value);o=ec(m);if(q=I.test(o)){m=m.replace(dc,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()})}var w=o.replace(/(Start|End)$/,"");if(Y(w)){if(o===w+"Start"){u=m;v=m.substr(0,m.length-5)+"end";m=m.substr(0,m.length-6)}}n=ec(m.toLowerCase());g[n]=m;if(q||!c.hasOwnProperty(n)){c[n]=p;if(Hb(a,n)){c[n]=true}}ia(a,b,p,n,q);X(b,n,"A",d,e,u,v)}k=a.className;if(L(k)){k=k.animVal}if(M(k)&&k!==""){while(j=i.exec(k)){n=ec(j[2]);if(X(b,n,"C",d,e)){c[n]=Z(j[3])}k=k.substr(j.index+j[0].length)}}break;case Na:ea(b,a.nodeValue);break;case Oa:try{j=h.exec(a.nodeValue);if(j){n=ec(j[1]);if(X(b,n,"M",d,e)){c[n]=Z(j[2])}}}catch(a){}break}b.sort(aa);return b}function S(a,b,c){var d=[];var e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a){throw bc("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c)}if(a.nodeType==La){if(a.hasAttribute(b))e++;if(a.hasAttribute(c))e--}d.push(a);a=a.nextSibling}while(e>0)}else{d.push(a)}return m(d)}function U(a,b,c){return function(d,e,f,g,h){e=S(e[0],b,c);return a(d,e,f,g,h)}}function V(a,e,f,g,h,i,j,l,n){n=n||{};var p=-Number.MAX_VALUE,q,t=n.controllerDirectives,u,v=n.newIsolateScopeDirective,w=n.templateDirective,y=n.nonTlbTranscludeDirective,A=false,B=false,C=n.hasElementTranscludeDirective,D=f.$$element=m(e),F,G,H,I=i,K=g,N,O;for(var V=0,X=a.length;V<X;V++){F=a[V];var Y=F.$$start;var aa=F.$$end;if(Y){D=S(e,Y,aa)}H=c;if(p>F.priority){break}if(O=F.scope){if(!F.templateUrl){if(L(O)){ca("new/isolated scope",v||q,F,D);v=F}else{ca("new/isolated scope",v,F,D)}}q=q||F}G=F.name;if(!F.templateUrl&&F.controller){O=F.controller;t=t||{};ca("'"+G+"' controller",t[G],F,D);t[G]=F}if(O=F.transclude){A=true;if(!F.$$tlb){ca("transclusion",y,F,D);y=F}if(O=="element"){C=true;p=F.priority;H=D;D=f.$$element=m(b.createComment(" "+G+": "+f[G]+" "));e=D[0];ka(h,ja(H),e);K=J(H,g,p,I&&I.name,{nonTlbTranscludeDirective:y})}else{H=m(ob(e)).contents();D.empty();K=J(H,g)}}if(F.template){B=true;ca("template",w,F,D);w=F;O=Q(F.template)?F.template(D,f):F.template;O=E(O);if(F.replace){I=F;if(jb(O)){H=[]}else{H=ic(fa(F.templateNamespace,Z(O)))}e=H[0];if(H.length!=1||e.nodeType!==La){throw bc("tplrt","Template for directive '{0}' must have exactly one root element. {1}",G,"")}ka(h,D,e);var ba={$attr:{}};var da=R(e,[],ba);var ea=a.splice(V+1,a.length-(V+1));if(v){W(da)}a=a.concat(da).concat(ea);$(f,ba);X=a.length}else{D.html(O)}}if(F.templateUrl){B=true;ca("template",w,F,D);w=F;if(F.replace){I=F}na=_(a.splice(V,a.length-V),D,f,h,A&&K,j,l,{controllerDirectives:t,newIsolateScopeDirective:v,templateDirective:w,nonTlbTranscludeDirective:y});X=a.length}else if(F.compile){try{N=F.compile(D,f,K);if(Q(N)){ha(null,N,Y,aa)}else if(N){ha(N.pre,N.post,Y,aa)}}catch(a){o(a,oa(D))}}if(F.terminal){na.terminal=true;p=Math.max(p,F.priority)}}na.scope=q&&q.scope===true;na.transcludeOnThisElement=A;na.elementTranscludeOnThisElement=C;na.templateOnThisElement=B;na.transclude=K;n.hasElementTranscludeDirective=C;return na;function ha(a,b,c,d){if(a){if(c)a=U(a,c,d);a.require=F.require;a.directiveName=G;if(v===F||F.$$isolateScope){a=la(a,{isolateScope:true})}j.push(a)}if(b){if(c)b=U(b,c,d);b.require=F.require;b.directiveName=G;if(v===F||F.$$isolateScope){b=la(b,{isolateScope:true})}l.push(b)}}function ia(a,b,c,d){var e,f="data",g=false;var h=c;var i;if(M(b)){i=b.match(k);b=b.substring(i[0].length);if(i[3]){if(i[1])i[3]=null;else i[1]=i[3]}if(i[1]==="^"){f="inheritedData"}else if(i[1]==="^^"){f="inheritedData";h=c.parent()}if(i[2]==="?"){g=true}e=null;if(d&&f==="data"){if(e=d[b]){e=e.instance}}e=e||h[f]("$"+b+"Controller");if(!e&&!g){throw bc("ctreq","Controller '{0}', required by directive '{1}', can't be found!",b,a)}return e||null}else if(P(b)){e=[];x(b,function(b){e.push(ia(a,b,c,d))})}return e}function na(a,b,g,h,i){var k,n,o,p,q,y,A,B,D;if(e===g){D=f;B=f.$$element}else{B=m(g);D=new z(B,f)}if(v){q=b.$new(true)}if(i){A=H;A.$$boundTransclude=i}if(t){u={};y={};x(t,function(a){var c={$scope:a===v||a.$$isolateScope?q:b,$element:B,$attrs:D,$transclude:A},d;p=a.controller;if(p=="@"){p=D[a.name]}d=s(p,c,true,a.controllerAs);y[a.name]=d;if(!C){B.data("$"+a.name+"Controller",d.instance)}u[a.name]=d})}if(v){J.$$addScopeInfo(B,q,true,!(w&&(w===v||w===v.$$originalDirective)));J.$$addScopeClass(B,true);var E=u&&u[v.name];var F=q;if(E&&E.identifier&&v.bindToController===true){F=E.instance}x(q.$$isolateBindings=v.$$isolateBindings,function(a,c){var e=a.attrName,f=a.optional,g=a.mode,h,i,j,k;switch(g){case"@":D.$observe(e,function(a){F[c]=a});D.$$observers[e].$$scope=b;if(D[e]){F[c]=d(D[e])(b)}break;case"=":if(f&&!D[e]){return}i=r(D[e]);if(i.literal){k=ga}else{k=function(a,b){return a===b||a!==a&&b!==b}}j=i.assign||function(){h=F[c]=i(b);throw bc("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",D[e],v.name)};h=F[c]=i(b);var l=function a(d){if(!k(d,F[c])){if(!k(d,h)){F[c]=d}else{j(b,d=F[c])}}return h=d};l.$stateful=true;var m;if(a.collection){m=b.$watchCollection(D[e],l)}else{m=b.$watch(r(D[e],l),null,i.literal)}q.$on("$destroy",m);break;case"&":i=r(D[e]);F[c]=function(a){return i(b,a)};break}})}if(u){x(u,function(a){a()});u=null}for(k=0,n=j.length;k<n;k++){o=j[k];ma(o,o.isolateScope?q:b,B,D,o.require&&ia(o.directiveName,o.require,B,y),A)}var G=b;if(v&&(v.template||v.templateUrl===null)){G=q}a&&a(G,g.childNodes,c,i);for(k=l.length-1;k>=0;k--){o=l[k];ma(o,o.isolateScope?q:b,B,D,o.require&&ia(o.directiveName,o.require,B,y),A)}function H(a,b,d){var e;if(!T(a)){d=b;b=a;a=c}if(C){e=y}if(!d){d=C?B.parent():B}return i(a,b,e,d,G)}}}function W(a){for(var b=0,c=a.length;b<c;b++){a[b]=F(a[b],{$$isolateScope:true})}}function X(b,d,g,h,i,j,k){if(d===i)return null;var l=null;if(e.hasOwnProperty(d)){for(var m,n=a.get(d+f),p=0,q=n.length;p<q;p++){try{m=n[p];if((h===c||h>m.priority)&&m.restrict.indexOf(g)!=-1){if(j){m=F(m,{$$start:j,$$end:k})}b.push(m);l=m}}catch(a){o(a)}}}return l}function Y(b){if(e.hasOwnProperty(b)){for(var c,d=a.get(b+f),g=0,h=d.length;g<h;g++){c=d[g];if(c.multiElement){return true}}}return false}function $(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;x(a,function(d,e){if(e.charAt(0)!="$"){if(b[e]&&b[e]!==d){d+=(e==="style"?";":" ")+b[e]}a.$set(e,d,true,c[e])}});x(b,function(b,f){if(f=="class"){A(e,b);a["class"]=(a["class"]?a["class"]+" ":"")+b}else if(f=="style"){e.attr("style",e.attr("style")+";"+b);a["style"]=(a["style"]?a["style"]+";":"")+b}else if(f.charAt(0)!="$"&&!a.hasOwnProperty(f)){a[f]=b;d[f]=c[f]}})}function _(a,b,c,d,e,f,g,h){var i=[],j,k,l=b[0],n=a.shift(),o=F(n,{templateUrl:null,transclude:null,replace:null,$$originalDirective:n}),p=Q(n.templateUrl)?n.templateUrl(b,c):n.templateUrl,r=n.templateNamespace;b.empty();q(p).then(function(q){var s,t,u,v;q=E(q);if(n.replace){if(jb(q)){u=[]}else{u=ic(fa(r,Z(q)))}s=u[0];if(u.length!=1||s.nodeType!==La){throw bc("tplrt","Template for directive '{0}' must have exactly one root element. {1}",n.name,p)}t={$attr:{}};ka(d,b,s);var w=R(s,[],t);if(L(n.scope)){W(w)}a=w.concat(a);$(c,t)}else{s=l;b.html(q)}a.unshift(o);j=V(a,s,c,e,b,n,f,g,h);x(d,function(a,c){if(a==s){d[c]=b[0]}});k=N(b[0].childNodes,e);while(i.length){var y=i.shift(),z=i.shift(),B=i.shift(),C=i.shift(),D=b[0];if(y.$$destroyed)continue;if(z!==l){var F=z.className;if(!(h.hasElementTranscludeDirective&&n.replace)){D=ob(s)}ka(B,m(z),D);A(m(D),F)}if(j.transcludeOnThisElement){v=O(y,j.transclude,C)}else{v=C}j(k,y,D,d,v)}i=null});return function a(b,c,d,e,f){var g=f;if(c.$$destroyed)return;if(i){i.push(c,d,e,g)}else{if(j.transcludeOnThisElement){g=O(c,j.transclude,f)}j(k,c,d,e,g)}}}function aa(a,b){var c=b.priority-a.priority;if(c!==0)return c;if(a.name!==b.name)return a.name<b.name?-1:1;return a.index-b.index}function ca(a,b,c,d){if(b){throw bc("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",b.name,c.name,a,oa(d))}}function ea(a,b){var c=d(b,true);if(c){a.push({priority:0,compile:function a(b){var d=b.parent(),e=!!d.length;if(e)J.$$addBindingClass(d);return function a(b,d){var f=d.parent();if(!e)J.$$addBindingClass(f);J.$$addBindingInfo(f,c.expressions);b.$watch(c,function a(b){d[0].nodeValue=b})}}})}}function fa(a,c){a=g(a||"html");switch(a){case"svg":case"math":var d=b.createElement("div");d.innerHTML="<"+a+">"+c+"</"+a+">";return d.childNodes[0].childNodes;default:return c}}function ha(a,b){if(b=="srcdoc"){return v.HTML}var c=ba(a);if(b=="xlinkHref"||c=="form"&&b=="action"||c!="img"&&(b=="src"||b=="ngSrc")){return v.RESOURCE_URL}}function ia(a,b,c,e,f){var g=ha(a,e);f=j[e]||f;var h=d(c,true,g,f);if(!h)return;if(e==="multiple"&&ba(a)==="select"){throw bc("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",oa(a))}b.push({priority:100,compile:function(){return{pre:function a(b,i,j){var k=j.$$observers||(j.$$observers={});if(l.test(e)){throw bc("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the "+"ng- versions (such as ng-click instead of onclick) instead.")}var m=j[e];if(m!==c){h=m&&d(m,true,g,f);c=m}if(!h)return;j[e]=h(b);(k[e]||(k[e]=[])).$$inter=true;(j.$$observers&&j.$$observers[e].$$scope||b).$watch(h,function a(b,c){if(e==="class"&&b!=c){j.$updateClass(b,c)}else{j.$set(e,b)}})}}}})}function ka(a,c,d){var e=c[0],f=c.length,g=e.parentNode,h,i;if(a){for(h=0,i=a.length;h<i;h++){if(a[h]==e){a[h++]=d;for(var j=h,k=j+f-1,l=a.length;j<l;j++,k++){if(k<l){a[j]=a[k]}else{delete a[j]}}a.length-=f-1;if(a.context===e){a.context=d}break}}}if(g){g.replaceChild(d,e)}var o=b.createDocumentFragment();o.appendChild(e);m(d).data(m(e).data());if(!n){delete m.cache[e[m.expando]]}else{Da=true;n.cleanData([e])}for(var p=1,q=c.length;p<q;p++){var r=c[p];m(r).remove();o.appendChild(r);delete c[p]}c[0]=d;c.length=1}function la(a,b){return D(function(){return a.apply(null,arguments)},a,b)}function ma(a,b,c,d,e,f){try{a(b,c,d,e,f)}catch(a){o(a,oa(c))}}}]}var dc=/^((?:x|data)[\:\-_])/i;function ec(a){return db(a.replace(dc,""))}function fc(a,b,c,d){}function gc(a,b,c,d,e){}function hc(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){var g=d[f];for(var h=0;h<e.length;h++){if(g==e[h])continue a}c+=(c.length>0?" ":"")+g}return c}function ic(a){a=m(a);var b=a.length;if(b<=1){return a}while(b--){var c=a[b];if(c.nodeType===Oa){p.call(a,b,1)}}return a}var jc=d("$controller");function kc(){var a={},b=false,e=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){Ha(b,"controller");if(L(b)){D(a,b)}else{a[b]=c}};this.allowGlobals=function(){b=true};this.$get=["$injector","$window",function(f,g){return function(d,i,j,k){var l,m,n,o;j=j===true;if(k&&M(k)){o=k}if(M(d)){m=d.match(e);if(!m){throw jc("ctrlfmt","Badly formed controller string '{0}'. "+"Must match `__name__ as __id__` or `__name__`.",d)}n=m[1],o=o||m[3];d=a.hasOwnProperty(n)?a[n]:Ia(i.$scope,n,true)||(b?Ia(g,n,true):c);Ga(d,n,true)}if(j){var p=(P(d)?d[d.length-1]:d).prototype;l=Object.create(p||null);if(o){h(i,o,l,n||d.name)}return D(function(){f.invoke(d,l,i,n);return l},{instance:l,identifier:o})}l=f.instantiate(d,i,n);if(o){h(i,o,l,n||d.name)}return l};function h(a,b,c,e){if(!(a&&L(a.$scope))){throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,b)}a.$scope[b]=c}}]}function lc(){this.$get=["$window",function(a){return m(a.document)}]}function mc(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}var nc="application/json";var oc={"Content-Type":nc+";charset=utf-8"};var pc=/^\[|^\{(?!\{)/;var qc={"[":/]$/,"{":/}$/};var rc=/^\)\]\}',?\n/;function sc(a,b){if(M(a)){var c=a.replace(rc,"").trim();if(c){var d=b("Content-Type");if(d&&d.indexOf(nc)===0||tc(c)){a=na(c)}}}return a}function tc(a){var b=a.match(pc);return b&&qc[b[0]].test(a)}function uc(a){var b=Ka(),c,d,e;if(!a)return b;x(a.split("\n"),function(a){e=a.indexOf(":");c=g(Z(a.substr(0,e)));d=Z(a.substr(e+1));if(c){b[c]=b[c]?b[c]+", "+d:d}});return b}function vc(a){var b=L(a)?a:c;return function(c){if(!b)b=uc(a);if(c){var d=b[g(c)];if(d===void 0){d=null}return d}return b}}function wc(a,b,c,d){if(Q(d))return d(a,b,c);x(d,function(d){a=d(a,b,c)});return a}function xc(a){return 200<=a&&a<300}function yc(){var a=this.defaults={transformResponse:[sc],transformRequest:[function(a){return L(a)&&!U(a)&&!W(a)&&!V(a)?ma(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:fa(oc),put:fa(oc),patch:fa(oc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"};var b=false;this.useApplyAsync=function(a){if(K(a)){b=!!a;return this}return b};var e=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(f,h,j,k,l,m){var n=j("$http");var o=[];x(e,function(a){o.unshift(M(a)?m.get(a):m.invoke(a))});function p(b){if(!t.isObject(b)){throw d("$http")("badreq","Http request configuration must be an object.  Received: {0}",b)}var e=D({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse},b);e.headers=q(b);e.method=i(e.method);var f=function(b){var d=b.headers;var e=wc(b.data,vc(d),c,b.transformRequest);if(J(e)){x(d,function(a,b){if(g(b)==="content-type"){delete d[b]}})}if(J(b.withCredentials)&&!J(a.withCredentials)){b.withCredentials=a.withCredentials}return s(b,e).then(n,n)};var h=[f,c];var j=l.when(e);x(o,function(a){if(a.request||a.requestError){h.unshift(a.request,a.requestError)}if(a.response||a.responseError){h.push(a.response,a.responseError)}});while(h.length){var k=h.shift();var m=h.shift();j=j.then(k,m)}j.success=function(a){Ga(a,"fn");j.then(function(b){a(b.data,b.status,b.headers,e)});return j};j.error=function(a){Ga(a,"fn");j.then(null,function(b){a(b.data,b.status,b.headers,e)});return j};return j;function n(a){var b=D({},a);if(!a.data){b.data=a.data}else{b.data=wc(a.data,a.headers,a.status,e.transformResponse)}return xc(a.status)?b:l.reject(b)}function p(a){var b,c={};x(a,function(a,d){if(Q(a)){b=a();if(b!=null){c[d]=b}}else{c[d]=a}});return c}function q(b){var c=a.headers,d=D({},b.headers),e,f,h;c=D({},c.common,c[g(b.method)]);a:for(e in c){f=g(e);for(h in d){if(g(h)===f){continue a}}d[e]=c[e]}return p(d)}}p.pendingRequests=[];q("get","delete","head","jsonp");r("post","put","patch");p.defaults=a;return p;function q(a){x(arguments,function(a){p[a]=function(b,c){return p(D(c||{},{method:a,url:b}))}})}function r(a){x(arguments,function(a){p[a]=function(b,c,d){return p(D(d||{},{method:a,url:b,data:c}))}})}function s(d,e){var g=l.defer(),i=g.promise,j,m,o=d.headers,q=u(d.url,d.params);p.pendingRequests.push(d);i.then(w,w);if((d.cache||a.cache)&&d.cache!==false&&(d.method==="GET"||d.method==="JSONP")){j=L(d.cache)?d.cache:L(a.cache)?a.cache:n}if(j){m=j.get(q);if(K(m)){if(Y(m)){m.then(v,v)}else{if(P(m)){t(m[1],m[0],fa(m[2]),m[3])}else{t(m,200,{},"OK")}}}else{j.put(q,i)}}if(J(m)){var r=Od(d.url)?h.cookies()[d.xsrfCookieName||a.xsrfCookieName]:c;if(r){o[d.xsrfHeaderName||a.xsrfHeaderName]=r}f(d.method,q,e,s,o,d.timeout,d.withCredentials,d.responseType)}return i;function s(a,c,d,e){if(j){if(xc(a)){j.put(q,[a,c,uc(d),e])}else{j.remove(q)}}function f(){t(c,a,d,e)}if(b){k.$applyAsync(f)}else{f();if(!k.$$phase)k.$apply()}}function t(a,b,c,e){b=b>=-1?b:0;(xc(b)?g.resolve:g.reject)({data:a,status:b,headers:vc(c),config:d,statusText:e})}function v(a){t(a.data,a.status,fa(a.headers()),a.statusText)}function w(){var a=p.pendingRequests.indexOf(d);if(a!==-1)p.pendingRequests.splice(a,1)}}function u(a,b){if(!b)return a;var c=[];z(b,function(a,b){if(a===null||J(a))return;if(!P(a))a=[a];x(a,function(a){if(L(a)){if(O(a)){a=a.toISOString()}else{a=ma(a)}}c.push(ta(b)+"="+ta(a))})});if(c.length>0){a+=(a.indexOf("?")==-1?"?":"&")+c.join("&")}return a}}]}function zc(){return new a.XMLHttpRequest}function Ac(){this.$get=["$browser","$window","$document",function(a,b,c){return Bc(a,zc,a.defer,b.angular.callbacks,c[0])}]}function Bc(a,b,d,e,f){return function(f,i,j,k,l,m,n,o){a.$$incOutstandingRequestCount();i=i||a.url();if(g(f)=="jsonp"){var p="_"+(e.counter++).toString(36);e[p]=function(a){e[p].data=a;e[p].called=true};var q=h(i.replace("JSON_CALLBACK","angular.callbacks."+p),p,function(a,b){v(k,a,e[p].data,"",b);e[p]=G})}else{var r=b();r.open(f,i,true);x(l,function(a,b){if(K(a)){r.setRequestHeader(b,a)}});r.onload=function a(){var b=r.statusText||"";var c="response"in r?r.response:r.responseText;var d=r.status===1223?204:r.status;if(d===0){d=c?200:Nd(i).protocol=="file"?404:0}v(k,d,c,r.getAllResponseHeaders(),b)};var s=function(){v(k,-1,null,null,"")};r.onerror=s;r.onabort=s;if(n){r.withCredentials=true}if(o){try{r.responseType=o}catch(a){if(o!=="json"){throw a}}}r.send(j||null)}if(m>0){var t=d(u,m)}else if(Y(m)){m.then(u)}function u(){q&&q();r&&r.abort()}function v(b,e,f,g,h){if(t!==c){d.cancel(t)}q=r=null;b(e,f,g,h);a.$$completeOutstandingRequest(G)}};function h(a,b,c){var d=f.createElement("script"),g=null;d.type="text/javascript";d.src=a;d.async=true;g=function(a){Za(d,"load",g);Za(d,"error",g);f.body.removeChild(d);d=null;var h=-1;var i="unknown";if(a){if(a.type==="load"&&!e[b].called){a={type:"error"}}i=a.type;h=a.type==="error"?404:200}if(c){c(h,i)}};Ya(d,"load",g);Ya(d,"error",g);f.body.appendChild(d);return g}}var Cc=d("$interpolate");function Dc(){var a="{{";var b="}}";this.startSymbol=function(b){if(b){a=b;return this}else{return a}};this.endSymbol=function(a){if(a){b=a;return this}else{return b}};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){var f=a.length,g=b.length,h=new RegExp(a.replace(/./g,j),"g"),i=new RegExp(b.replace(/./g,j),"g");function j(a){return"\\\\\\"+a}function k(j,k,l,m){m=!!m;var n,o,p=0,q=[],r=[],s=j.length,t,u=[],v=[];while(p<s){if((n=j.indexOf(a,p))!=-1&&(o=j.indexOf(b,n+f))!=-1){if(p!==n){u.push(z(j.substring(p,n)))}t=j.substring(n+f,o);q.push(t);r.push(c(t,A));p=o+g;v.push(u.length);u.push("")}else{if(p!==s){u.push(z(j.substring(p)))}break}}if(l&&u.length>1){throw Cc("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows "+"interpolations that concatenate multiple expressions when a trusted value is "+"required.  See http://docs.angularjs.org/api/ng.$sce",j)}if(!k||q.length){var w=function(a){for(var b=0,c=q.length;b<c;b++){if(m&&J(a[b]))return;u[v[b]]=a[b]}return u.join("")};var x=function(a){return l?e.getTrusted(l,a):e.valueOf(a)};var y=function(a){if(a==null){return""}switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=ma(a)}return a};return D(function a(b){var c=0;var e=q.length;var f=new Array(e);try{for(;c<e;c++){f[c]=r[c](b)}return w(f)}catch(a){var g=Cc("interr","Can't interpolate: {0}\n{1}",j,a.toString());d(g)}},{exp:j,expressions:q,$$watchDelegate:function(a,b,c){var d;return a.$watchGroup(r,function c(e,f){var g=w(e);if(Q(b)){b.call(this,g,e!==f?d:g,a)}d=g},c)}})}function z(c){return c.replace(h,a).replace(i,b)}function A(a){try{a=x(a);return m&&!K(a)?a:y(a)}catch(a){var b=Cc("interr","Can't interpolate: {0}\n{1}",j,a.toString());d(b)}}}k.startSymbol=function(){return a};k.endSymbol=function(){return b};return k}]}function Ec(){this.$get=["$rootScope","$window","$q","$$q",function(a,b,c,d){var e={};function f(f,g,h,i){var j=b.setInterval,k=b.clearInterval,l=0,m=K(i)&&!i,n=(m?d:c).defer(),o=n.promise;h=K(h)?h:0;o.then(null,null,f);o.$$intervalId=j(function b(){n.notify(l++);if(h>0&&l>=h){n.resolve(l);k(o.$$intervalId);delete e[o.$$intervalId]}if(!m)a.$apply()},g);e[o.$$intervalId]=n;return o}f.cancel=function(a){if(a&&a.$$intervalId in e){e[a.$$intervalId].reject("canceled");b.clearInterval(a.$$intervalId);delete e[a.$$intervalId];return true}return false};return f}]}function Fc(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(a){if(a===1){return"one"}return"other"}}}}var Gc=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Hc={http:80,https:443,ftp:21}
;var Ic=d("$location");function Jc(a){var b=a.split("/"),c=b.length;while(c--){b[c]=sa(b[c])}return b.join("/")}function Kc(a,b){var c=Nd(a);b.$$protocol=c.protocol;b.$$host=c.hostname;b.$$port=E(c.port)||Hc[c.protocol]||null}function Lc(a,b){var c=a.charAt(0)!=="/";if(c){a="/"+a}var d=Nd(a);b.$$path=decodeURIComponent(c&&d.pathname.charAt(0)==="/"?d.pathname.substring(1):d.pathname);b.$$search=qa(d.search);b.$$hash=decodeURIComponent(d.hash);if(b.$$path&&b.$$path.charAt(0)!="/"){b.$$path="/"+b.$$path}}function Mc(a,b){if(b.indexOf(a)===0){return b.substr(a.length)}}function Nc(a){var b=a.indexOf("#");return b==-1?a:a.substr(0,b)}function Oc(a){return a.replace(/(#.+)|#$/,"$1")}function Pc(a){return a.substr(0,Nc(a).lastIndexOf("/")+1)}function Qc(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function Rc(a,b,d){this.$$html5=true;d=d||"";Kc(a,this);this.$$parse=function(a){var c=Mc(b,a);if(!M(c)){throw Ic("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,b)}Lc(c,this);if(!this.$$path){this.$$path="/"}this.$$compose()};this.$$compose=function(){var a=ra(this.$$search),c=this.$$hash?"#"+sa(this.$$hash):"";this.$$url=Jc(this.$$path)+(a?"?"+a:"")+c;this.$$absUrl=b+this.$$url.substr(1)};this.$$parseLinkUrl=function(e,f){if(f&&f[0]==="#"){this.hash(f.slice(1));return true}var g,h;var i;if((g=Mc(a,e))!==c){h=g;if((g=Mc(d,g))!==c){i=b+(Mc("/",g)||g)}else{i=a+h}}else if((g=Mc(b,e))!==c){i=b+g}else if(b==e+"/"){i=b}if(i){this.$$parse(i)}return!!i}}function Sc(a,b,c){Kc(a,this);this.$$parse=function(d){var e=Mc(a,d)||Mc(b,d);var f;if(!J(e)&&e.charAt(0)==="#"){f=Mc(c,e);if(J(f)){f=e}}else{if(this.$$html5){f=e}else{f="";if(J(e)){a=d;this.replace()}}}Lc(f,this);this.$$path=g(this.$$path,f,a);this.$$compose();function g(a,b,c){var d=/^\/[A-Z]:(\/.*)/;var e;if(b.indexOf(c)===0){b=b.replace(c,"")}if(d.exec(b)){return a}e=d.exec(a);return e?e[1]:a}};this.$$compose=function(){var b=ra(this.$$search),d=this.$$hash?"#"+sa(this.$$hash):"";this.$$url=Jc(this.$$path)+(b?"?"+b:"")+d;this.$$absUrl=a+(this.$$url?c+this.$$url:"")};this.$$parseLinkUrl=function(b,c){if(Nc(a)==Nc(b)){this.$$parse(b);return true}return false}}function Tc(a,b,c){this.$$html5=true;Sc.apply(this,arguments);this.$$parseLinkUrl=function(d,e){if(e&&e[0]==="#"){this.hash(e.slice(1));return true}var f;var g;if(a==Nc(d)){f=d}else if(g=Mc(b,d)){f=a+c+g}else if(b===d+"/"){f=b}if(f){this.$$parse(f)}return!!f};this.$$compose=function(){var b=ra(this.$$search),d=this.$$hash?"#"+sa(this.$$hash):"";this.$$url=Jc(this.$$path)+(b?"?"+b:"")+d;this.$$absUrl=a+c+this.$$url}}var Uc={$$html5:false,$$replace:false,absUrl:Vc("$$absUrl"),url:function(a){if(J(a))return this.$$url;var b=Gc.exec(a);if(b[1]||a==="")this.path(decodeURIComponent(b[1]));if(b[2]||b[1]||a==="")this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:Vc("$$protocol"),host:Vc("$$host"),port:Vc("$$port"),path:Wc("$$path",function(a){a=a!==null?a.toString():"";return a.charAt(0)=="/"?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(M(a)||N(a)){a=a.toString();this.$$search=qa(a)}else if(L(a)){a=ea(a,{});x(a,function(b,c){if(b==null)delete a[c]});this.$$search=a}else{throw Ic("isrcharg","The first argument of the `$location#search()` call must be a string or an object.")}break;default:if(J(b)||b===null){delete this.$$search[a]}else{this.$$search[a]=b}}this.$$compose();return this},hash:Wc("$$hash",function(a){return a!==null?a.toString():""}),replace:function(){this.$$replace=true;return this}};x([Tc,Sc,Rc],function(a){a.prototype=Object.create(Uc);a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==Rc||!this.$$html5){throw Ic("nostate","History API state support is available only "+"in HTML5 mode and only in browsers supporting HTML5 History API")}this.$$state=J(b)?null:b;return this}});function Vc(a){return function(){return this[a]}}function Wc(a,b){return function(c){if(J(c))return this[a];this[a]=b(c);this.$$compose();return this}}function Xc(){var a="",b={enabled:false,requireBase:true,rewriteLinks:true};this.hashPrefix=function(b){if(K(b)){a=b;return this}else{return a}};this.html5Mode=function(a){if(X(a)){b.enabled=a;return this}else if(L(a)){if(X(a.enabled)){b.enabled=a.enabled}if(X(a.requireBase)){b.requireBase=a.requireBase}if(X(a.rewriteLinks)){b.rewriteLinks=a.rewriteLinks}return this}else{return b}};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){var h,i,j=d.baseHref(),k=d.url(),l;if(b.enabled){if(!j&&b.requireBase){throw Ic("nobase","$location in HTML5 mode requires a <base> tag to be present!")}l=Qc(k)+(j||"/");i=e.history?Rc:Tc}else{l=Nc(k);i=Sc}var n=Pc(l);h=new i(l,n,"#"+a);h.$$parseLinkUrl(k,k);h.$$state=d.state();var o=/^\s*(javascript|mailto):/i;function p(a,b,c){var e=h.url();var f=h.$$state;try{d.url(a,b,c);h.$$state=d.state()}catch(a){h.url(e);h.$$state=f;throw a}}f.on("click",function(a){if(!b.rewriteLinks||a.ctrlKey||a.metaKey||a.shiftKey||a.which==2||a.button==2)return;var e=m(a.target);while(ba(e[0])!=="a"){if(e[0]===f[0]||!(e=e.parent())[0])return}var i=e.prop("href");var j=e.attr("href")||e.attr("xlink:href");if(L(i)&&i.toString()==="[object SVGAnimatedString]"){i=Nd(i.animVal).href}if(o.test(i))return;if(i&&!e.attr("target")&&!a.isDefaultPrevented()){if(h.$$parseLinkUrl(i,j)){a.preventDefault();if(h.absUrl()!=d.url()){c.$apply();g.angular["ff-684208-preventDefault"]=true}}}});if(Oc(h.absUrl())!=Oc(k)){d.url(h.absUrl(),true)}var q=true;d.onUrlChange(function(a,b){if(J(Mc(n,a))){g.location.href=a;return}c.$evalAsync(function(){var d=h.absUrl();var e=h.$$state;var f;h.$$parse(a);h.$$state=b;f=c.$broadcast("$locationChangeStart",a,d,b,e).defaultPrevented;if(h.absUrl()!==a)return;if(f){h.$$parse(d);h.$$state=e;p(d,false,e)}else{q=false;r(d,e)}});if(!c.$$phase)c.$digest()});c.$watch(function a(){var b=Oc(d.url());var f=Oc(h.absUrl());var g=d.state();var i=h.$$replace;var j=b!==f||h.$$html5&&e.history&&g!==h.$$state;if(q||j){q=false;c.$evalAsync(function(){var a=h.absUrl();var d=c.$broadcast("$locationChangeStart",a,b,h.$$state,g).defaultPrevented;if(h.absUrl()!==a)return;if(d){h.$$parse(b);h.$$state=g}else{if(j){p(a,i,g===h.$$state?null:h.$$state)}r(b,g)}})}h.$$replace=false});return h;function r(a,b){c.$broadcast("$locationChangeSuccess",h.absUrl(),a,h.$$state,b)}}]}function Yc(){var a=true,b=this;this.debugEnabled=function(b){if(K(b)){a=b;return this}else{return a}};this.$get=["$window",function(c){return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){if(a){c.apply(b,arguments)}}}()};function d(a){if(a instanceof Error){if(a.stack){a=a.message&&a.stack.indexOf(a.message)===-1?"Error: "+a.message+"\n"+a.stack:a.stack}else if(a.sourceURL){a=a.message+"\n"+a.sourceURL+":"+a.line}}return a}function e(a){var b=c.console||{},e=b[a]||b.log||G,f=false;try{f=!!e.apply}catch(a){}if(f){return function(){var a=[];x(arguments,function(b){a.push(d(b))});return e.apply(b,a)}}return function(a,b){e(a,b==null?"":b)}}}]}var Zc=d("$parse");function $c(a,b){if(a==="__defineGetter__"||a==="__defineSetter__"||a==="__lookupGetter__"||a==="__lookupSetter__"||a==="__proto__"){throw Zc("isecfld","Attempting to access a disallowed field in Angular expressions! "+"Expression: {0}",b)}return a}function _c(a,b){a=a+"";if(!M(a)){throw Zc("iseccst","Cannot convert object to primitive value! "+"Expression: {0}",b)}return a}function ad(a,b){if(a){if(a.constructor===a){throw Zc("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b)}else if(a.window===a){throw Zc("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b)}else if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find)){throw Zc("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b)}else if(a===Object){throw Zc("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}}return a}var bd=Function.prototype.call;var cd=Function.prototype.apply;var dd=Function.prototype.bind;function ed(a,b){if(a){if(a.constructor===a){throw Zc("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b)}else if(a===bd||a===cd||a===dd){throw Zc("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}}var fd=Ka();x({null:function(){return null},true:function(){return true},false:function(){return false},undefined:function(){}},function(a,b){a.constant=a.literal=a.sharedGetter=true;fd[b]=a});fd["this"]=function(a){return a};fd["this"].sharedGetter=true;var gd=D(Ka(),{"+":function(a,b,d,e){d=d(a,b);e=e(a,b);if(K(d)){if(K(e)){return d+e}return d}return K(e)?e:c},"-":function(a,b,c,d){c=c(a,b);d=d(a,b);return(K(c)?c:0)-(K(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"!":function(a,b,c){return!c(a,b)},"=":true,"|":true});var hd={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'};var id=function(a){this.options=a};id.prototype={constructor:id,lex:function(a){this.text=a;this.index=0;this.tokens=[];while(this.index<this.text.length){var b=this.text.charAt(this.index);if(b==='"'||b==="'"){this.readString(b)}else if(this.isNumber(b)||b==="."&&this.isNumber(this.peek())){this.readNumber()}else if(this.isIdent(b)){this.readIdent()}else if(this.is(b,"(){}[].,;:?")){this.tokens.push({index:this.index,text:b});this.index++}else if(this.isWhitespace(b)){this.index++}else{var c=b+this.peek();var d=c+this.peek(2);var e=gd[b];var f=gd[c];var g=gd[d];if(e||f||g){var h=g?d:f?c:b;this.tokens.push({index:this.index,text:h,operator:true});this.index+=h.length}else{this.throwError("Unexpected next character ",this.index,this.index+1)}}}return this.tokens},is:function(a,b){return b.indexOf(a)!==-1},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):false},isNumber:function(a){return"0"<=a&&a<="9"&&typeof a==="string"},isWhitespace:function(a){return a===" "||a==="\r"||a==="\t"||a==="\n"||a==="\v"||a===""},isIdent:function(a){return"a"<=a&&a<="z"||"A"<=a&&a<="Z"||"_"===a||a==="$"},isExpOperator:function(a){return a==="-"||a==="+"||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=K(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw Zc("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){var a="";var b=this.index;while(this.index<this.text.length){var c=g(this.text.charAt(this.index));if(c=="."||this.isNumber(c)){a+=c}else{var d=this.peek();if(c=="e"&&this.isExpOperator(d)){a+=c}else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&a.charAt(a.length-1)=="e"){a+=c}else if(this.isExpOperator(c)&&(!d||!this.isNumber(d))&&a.charAt(a.length-1)=="e"){this.throwError("Invalid exponent")}else{break}}this.index++}this.tokens.push({index:b,text:a,constant:true,value:Number(a)})},readIdent:function(){var a=this.index;while(this.index<this.text.length){var b=this.text.charAt(this.index);if(!(this.isIdent(b)||this.isNumber(b))){break}this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:true})},readString:function(a){var b=this.index;this.index++;var c="";var d=a;var e=false;while(this.index<this.text.length){var f=this.text.charAt(this.index);d+=f;if(e){if(f==="u"){var g=this.text.substring(this.index+1,this.index+5);if(!g.match(/[\da-f]{4}/i))this.throwError("Invalid unicode escape [\\u"+g+"]");this.index+=4;c+=String.fromCharCode(parseInt(g,16))}else{var h=hd[f];c=c+(h||f)}e=false}else if(f==="\\"){e=true}else if(f===a){this.index++;this.tokens.push({index:b,text:d,constant:true,value:c});return}else{c+=f}this.index++}this.throwError("Unterminated quote",b)}};function jd(a){return a.constant}var kd=function(a,b,c){this.lexer=a;this.$filter=b;this.options=c};kd.ZERO=D(function(){return 0},{sharedGetter:true,constant:true});kd.prototype={constructor:kd,parse:function(a){this.text=a;this.tokens=this.lexer.lex(a);var b=this.statements();if(this.tokens.length!==0){this.throwError("is an unexpected token",this.tokens[0])}b.literal=!!b.literal;b.constant=!!b.constant;return b},primary:function(){var a;if(this.expect("(")){a=this.filterChain();this.consume(")")}else if(this.expect("[")){a=this.arrayDeclaration()}else if(this.expect("{")){a=this.object()}else if(this.peek().identifier&&this.peek().text in fd){a=fd[this.consume().text]}else if(this.peek().identifier){a=this.identifier()}else if(this.peek().constant){a=this.constant()}else{this.throwError("not a primary expression",this.peek())}var b,c;while(b=this.expect("(","[",".")){if(b.text==="("){a=this.functionCall(a,c);c=null}else if(b.text==="["){c=a;a=this.objectIndex(a)}else if(b.text==="."){c=a;a=this.fieldAccess(a)}else{this.throwError("IMPOSSIBLE")}}return a},throwError:function(a,b){throw Zc("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(this.tokens.length===0)throw Zc("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){var f=this.tokens[a];var g=f.text;if(g===b||g===c||g===d||g===e||!b&&!c&&!d&&!e){return f}}return false},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);if(e){this.tokens.shift();return e}return false},consume:function(a){if(this.tokens.length===0){throw Zc("ueoe","Unexpected end of expression: {0}",this.text)}var b=this.expect(a);if(!b){this.throwError("is unexpected, expecting ["+a+"]",this.peek())}return b},unaryFn:function(a,b){var c=gd[a];return D(function a(d,e){return c(d,e,b)},{constant:b.constant,inputs:[b]})},binaryFn:function(a,b,c,d){var e=gd[b];return D(function b(d,f){return e(d,f,a,c)},{constant:a.constant&&c.constant,inputs:!d&&[a,c]})},identifier:function(){var a=this.consume().text;while(this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(")){a+=this.consume().text+this.consume().text}return rd(a,this.options,this.text)},constant:function(){var a=this.consume().value;return D(function b(){return a},{constant:true,literal:true})},statements:function(){var a=[];while(true){if(this.tokens.length>0&&!this.peek("}",")",";","]"))a.push(this.filterChain());if(!this.expect(";")){return a.length===1?a[0]:function b(c,d){var e;for(var f=0,g=a.length;f<g;f++){e=a[f](c,d)}return e}}}},filterChain:function(){var a=this.expression();var b;while(b=this.expect("|")){a=this.filter(a)}return a},filter:function(a){var b=this.$filter(this.consume().text);var d;var e;if(this.peek(":")){d=[];e=[];while(this.expect(":")){d.push(this.expression())}}var f=[a].concat(d||[]);return D(function f(g,h){var i=a(g,h);if(e){e[0]=i;var j=d.length;while(j--){e[j+1]=d[j](g,h)}return b.apply(c,e)}return b(i)},{constant:!b.$stateful&&f.every(jd),inputs:!b.$stateful&&f})},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();var b;var c;if(c=this.expect("=")){if(!a.assign){this.throwError("implies assignment but ["+this.text.substring(0,c.index)+"] can not be assigned to",c)}b=this.ternary();return D(function c(d,e){return a.assign(d,b(d,e),e)},{inputs:[a,b]})}return a},ternary:function(){var a=this.logicalOR();var b;var c;if(c=this.expect("?")){b=this.assignment();if(this.consume(":")){var d=this.assignment();return D(function c(e,f){return a(e,f)?b(e,f):d(e,f)},{constant:a.constant&&b.constant&&d.constant})}}return a},logicalOR:function(){var a=this.logicalAND();var b;while(b=this.expect("||")){a=this.binaryFn(a,b.text,this.logicalAND(),true)}return a},logicalAND:function(){var a=this.equality();var b;while(b=this.expect("&&")){a=this.binaryFn(a,b.text,this.equality(),true)}return a},equality:function(){var a=this.relational();var b;while(b=this.expect("==","!=","===","!==")){a=this.binaryFn(a,b.text,this.relational())}return a},relational:function(){var a=this.additive();var b;while(b=this.expect("<",">","<=",">=")){a=this.binaryFn(a,b.text,this.additive())}return a},additive:function(){var a=this.multiplicative();var b;while(b=this.expect("+","-")){a=this.binaryFn(a,b.text,this.multiplicative())}return a},multiplicative:function(){var a=this.unary();var b;while(b=this.expect("*","/","%")){a=this.binaryFn(a,b.text,this.unary())}return a},unary:function(){var a;if(this.expect("+")){return this.primary()}else if(a=this.expect("-")){return this.binaryFn(kd.ZERO,a.text,this.unary())}else if(a=this.expect("!")){return this.unaryFn(a.text,this.unary())}else{return this.primary()}},fieldAccess:function(a){var b=this.identifier();return D(function d(e,f,g){var h=g||a(e,f);return h==null?c:b(h)},{assign:function(c,d,e){var f=a(c,e);if(!f)a.assign(c,f={},e);return b.assign(f,d)}})},objectIndex:function(a){var b=this.text;var d=this.expression();this.consume("]");return D(function e(f,g){var h=a(f,g),i=_c(d(f,g),b),j;$c(i,b);if(!h)return c;j=ad(h[i],b);return j},{assign:function(c,e,f){var g=$c(_c(d(c,f),b),b);var h=ad(a(c,f),b);if(!h)a.assign(c,h={},f);return h[g]=e}})},functionCall:function(a,b){var d=[];if(this.peekToken().text!==")"){do{d.push(this.expression())}while(this.expect(","))}this.consume(")");var e=this.text;var f=d.length?[]:null;return function g(h,i){var j=b?b(h,i):K(b)?c:h;var k=a(h,i,j)||G;if(f){var l=d.length;while(l--){f[l]=ad(d[l](h,i),e)}}ad(j,e);ed(k,e);var m=k.apply?k.apply(j,f):k(f[0],f[1],f[2],f[3],f[4]);if(f){f.length=0}return ad(m,e)}},arrayDeclaration:function(){var a=[];if(this.peekToken().text!=="]"){do{if(this.peek("]")){break}a.push(this.expression())}while(this.expect(","))}this.consume("]");return D(function b(c,d){var e=[];for(var f=0,g=a.length;f<g;f++){e.push(a[f](c,d))}return e},{literal:true,constant:a.every(jd),inputs:a})},object:function(){var a=[],b=[];if(this.peekToken().text!=="}"){do{if(this.peek("}")){break}var c=this.consume();if(c.constant){a.push(c.value)}else if(c.identifier){a.push(c.text)}else{this.throwError("invalid key",c)}this.consume(":");b.push(this.expression())}while(this.expect(","))}this.consume("}");return D(function c(d,e){var f={};for(var g=0,h=b.length;g<h;g++){f[a[g]]=b[g](d,e)}return f},{literal:true,constant:b.every(jd),inputs:b})}};function ld(a,b,c,d,e){ad(a,e);ad(b,e);var f=c.split("."),g;for(var h=0;f.length>1;h++){g=$c(f.shift(),e);var i=h===0&&b&&b[g]||a[g];if(!i){i={};a[g]=i}a=ad(i,e)}g=$c(f.shift(),e);ad(a[g],e);a[g]=d;return d}var md=Ka();var nd=Ka();function od(a){return a=="constructor"}function pd(a,b,d,e,f,g,h){$c(a,g);$c(b,g);$c(d,g);$c(e,g);$c(f,g);var i=function(a){return ad(a,g)};var j=h||od(a)?i:H;var k=h||od(b)?i:H;var l=h||od(d)?i:H;var m=h||od(e)?i:H;var n=h||od(f)?i:H;return function g(h,i){var o=i&&i.hasOwnProperty(a)?i:h;if(o==null)return o;o=j(o[a]);if(!b)return o;if(o==null)return c;o=k(o[b]);if(!d)return o;if(o==null)return c;o=l(o[d]);if(!e)return o;if(o==null)return c;o=m(o[e]);if(!f)return o;if(o==null)return c;o=n(o[f]);return o}}function qd(a,b){return function(c,d){return a(c,d,ad,b)}}function rd(a,b,d){var e=b.expensiveChecks;var f=e?nd:md;var g=f[a];if(g)return g;var h=a.split("."),i=h.length;if(b.csp){if(i<6){g=pd(h[0],h[1],h[2],h[3],h[4],d,e)}else{g=function a(b,f){var g=0,j;do{j=pd(h[g++],h[g++],h[g++],h[g++],h[g++],d,e)(b,f);f=c;b=j}while(g<i);return j}}}else{var j="";if(e){j+="s = eso(s, fe);\nl = eso(l, fe);\n"}var k=e;x(h,function(a,b){$c(a,d);var c=(b?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+"."+a;if(e||od(a)){c="eso("+c+", fe)";k=true}j+="if(s == null) return undefined;\n"+"s="+c+";\n"});j+="return s;";var l=new Function("s","l","eso","fe",j);l.toString=I(j);if(k){l=qd(l,d)}g=l}g.sharedGetter=true;g.assign=function(b,c,d){return ld(b,d,a,c,a)};f[a]=g;return g}var sd=Object.prototype.valueOf;function td(a){return Q(a.valueOf)?a.valueOf():sd.call(a)}function ud(){var a=Ka();var b=Ka();this.$get=["$filter","$sniffer",function(c,d){var e={csp:d.csp,expensiveChecks:false},f={csp:d.csp,expensiveChecks:true};function g(a){var b=a;if(a.sharedGetter){b=function b(c,d){return a(c,d)};b.literal=a.literal;b.constant=a.constant;b.assign=a.assign}return b}return function d(h,i,o){var p,q,r;switch(typeof h){case"string":r=h=h.trim();var s=o?b:a;p=s[r];if(!p){if(h.charAt(0)===":"&&h.charAt(1)===":"){q=true;h=h.substring(2)}var t=o?f:e;var u=new id(t);var v=new kd(u,c,t);p=v.parse(h);if(p.constant){p.$$watchDelegate=m}else if(q){p=g(p);p.$$watchDelegate=p.literal?l:k}else if(p.inputs){p.$$watchDelegate=j}s[r]=p}return n(p,i);case"function":return n(h,i);default:return n(G,i)}};function h(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(!e.constant){if(e.inputs){h(e.inputs,b)}else if(b.indexOf(e)===-1){b.push(e)}}}return b}function i(a,b){if(a==null||b==null){return a===b}if(typeof a==="object"){a=td(a);if(typeof a==="object"){return false}}return a===b||a!==a&&b!==b}function j(a,b,c,d){var e=d.$$inputs||(d.$$inputs=h(d.inputs,[]));var f;if(e.length===1){var g=i;e=e[0];return a.$watch(function a(b){var c=e(b);if(!i(c,g)){f=d(b);g=c&&td(c)}return f},b,c)}var j=[];for(var k=0,l=e.length;k<l;k++){j[k]=i}return a.$watch(function a(b){var c=false;for(var g=0,h=e.length;g<h;g++){var k=e[g](b);if(c||(c=!i(k,j[g]))){j[g]=k&&td(k)}}if(c){f=d(b)}return f},b,c)}function k(a,b,c,d){var e,f;return e=a.$watch(function a(b){return d(b)},function a(c,d,g){f=c;if(Q(b)){b.apply(this,arguments)}if(K(c)){g.$$postDigest(function(){if(K(f)){e()}})}},c)}function l(a,b,c,d){var e,f;return e=a.$watch(function a(b){return d(b)},function a(c,d,h){f=c;if(Q(b)){b.call(this,c,d,h)}if(g(c)){h.$$postDigest(function(){if(g(f))e()})}},c);function g(a){var b=true;x(a,function(a){if(!K(a))b=false});return b}}function m(a,b,c,d){var e;return e=a.$watch(function a(b){return d(b)},function a(c,d,f){if(Q(b)){b.apply(this,arguments)}e()},c)}function n(a,b){if(!b)return a;var c=a.$$watchDelegate;var d=c!==l&&c!==k;var e=d?function c(d,e){var f=a(d,e);return b(f,d,e)}:function c(d,e){var f=a(d,e);var g=b(f,d,e);return K(f)?g:f};if(a.$$watchDelegate&&a.$$watchDelegate!==j){e.$$watchDelegate=a.$$watchDelegate}else if(!b.$stateful){e.$$watchDelegate=j;e.inputs=[a]}return e}}]}function vd(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return xd(function(b){a.$evalAsync(b)},b)}]}function wd(){this.$get=["$browser","$exceptionHandler",function(a,b){return xd(function(b){a.defer(b)},b)}]}function xd(a,b){var e=d("$q",TypeError);function f(a,b,c){var d=false;function e(b){return function(c){if(d)return;d=true;b.call(a,c)}}return[e(b),e(c)]}var g=function(){return new l};function h(){this.$$state={status:0}}h.prototype={then:function(a,b,c){var d=new l;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);if(this.$$state.status>0)k(this.$$state);return d.promise},catch:function(a){return this.then(null,a)},finally:function(a,b){return this.then(function(b){return o(b,true,a)},function(b){return o(b,false,a)},b)}};function i(a,b){return function(c){b.call(a,c)}}function j(a){var d,e,f;f=a.pending;a.processScheduled=false;a.pending=c;for(var g=0,h=f.length;g<h;++g){e=f[g][0];d=f[g][a.status];try{if(Q(d)){e.resolve(d(a.value))}else if(a.status===1){e.resolve(a.value)}else{e.reject(a.value)}}catch(a){e.reject(a);b(a)}}}function k(b){if(b.processScheduled||!b.pending)return;b.processScheduled=true;a(function(){j(b)})}function l(){this.promise=new h;this.resolve=i(this,this.resolve);this.reject=i(this,this.reject);this.notify=i(this,this.notify)}l.prototype={resolve:function(a){if(this.promise.$$state.status)return;if(a===this.promise){this.$$reject(e("qcycle","Expected promise to be resolved with value other than itself '{0}'",a))}else{this.$$resolve(a)}},$$resolve:function(a){var c,d;d=f(this,this.$$resolve,this.$$reject);try{if(L(a)||Q(a))c=a&&a.then;if(Q(c)){this.promise.$$state.status=-1;c.call(a,d[0],d[1],this.notify)}else{this.promise.$$state.value=a;this.promise.$$state.status=1;k(this.promise.$$state)}}catch(a){d[1](a);b(a)}},reject:function(a){if(this.promise.$$state.status)return;this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;k(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;if(this.promise.$$state.status<=0&&d&&d.length){a(function(){var a,e;for(var f=0,g=d.length;f<g;f++){e=d[f][0];a=d[f][3];try{e.notify(Q(a)?a(c):c)}catch(a){b(a)}}})}}};var m=function(a){var b=new l;b.reject(a);return b.promise};var n=function a(b,c){var d=new l;if(c){d.resolve(b)}else{d.reject(b)}return d.promise};var o=function a(b,c,d){var e=null;try{if(Q(d))e=d()}catch(a){return n(a,false)}if(Y(e)){return e.then(function(){return n(b,c)},function(a){return n(a,false)})}else{return n(b,c)}};var p=function(a,b,c,d){var e=new l;e.resolve(a);return e.promise.then(b,c,d)};function q(a){var b=new l,c=0,d=P(a)?[]:{};x(a,function(a,e){c++;p(a).then(function(a){if(d.hasOwnProperty(e))return;d[e]=a;if(!--c)b.resolve(d)},function(a){if(d.hasOwnProperty(e))return;b.reject(a)})});if(c===0){b.resolve(d)}return b.promise}var r=function a(b){if(!Q(b)){throw e("norslvr","Expected resolverFn, got '{0}'",b)}if(!(this instanceof a)){return new a(b)}var c=new l;function d(a){c.resolve(a)}function f(a){c.reject(a)}b(d,f);return c.promise};r.defer=g;r.reject=m;r.when=p;r.all=q;return r}function yd(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame;var d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame;var e=!!c;var f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,false);return function(){b.cancel(c)}};k.supported=e;var g;var h=0;var i=[];return k;function j(){for(var a=0;a<i.length;a++){var b=i[a];if(b){i[a]=null;b()}}h=i.length=0}function k(a){var b=i.length;h++;i.push(a);if(b===0){g=f(j)}return function a(){if(b>=0){i[b]=null;b=null;if(--h===0&&g){g();g=null;i.length=0}}}}}]}function zd(){var a=10;var b=d("$rootScope");var c=null;var e=null;this.digestTtl=function(b){if(arguments.length){a=b}return a};function f(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$id=B();this.$$ChildScope=null}b.prototype=a;return b}this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,g,i,j){function k(a){a.currentScope.$$destroyed=true}function l(){this.$id=B();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=false;this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings=null}l.prototype={constructor:l,$new:function(a,b){var c;b=b||this;if(a){c=new l;c.$root=this.$root}else{if(!this.$$ChildScope){this.$$ChildScope=f(this)}c=new this.$$ChildScope}c.$parent=b;c.$$prevSibling=b.$$childTail;if(b.$$childHead){b.$$childTail.$$nextSibling=c;b.$$childTail=c}else{b.$$childHead=b.$$childTail=c}if(a||b!=this)c.$on("$destroy",k);return c},$watch:function(a,b,d){var e=i(a);if(e.$$watchDelegate){return e.$$watchDelegate(this,b,d,e)}var f=this,g=f.$$watchers,h={fn:b,last:t,get:e,exp:a,eq:!!d};c=null;if(!Q(b)){h.fn=G}if(!g){g=f.$$watchers=[]}g.unshift(h);return function a(){da(g,h);c=null}},$watchGroup:function(a,b){var c=new Array(a.length);var d=new Array(a.length);var e=[];var f=this;var g=false;var h=true;if(!a.length){var i=true;f.$evalAsync(function(){if(i)b(d,d,f)});return function a(){i=false}}if(a.length===1){return this.$watch(a[0],function a(e,f,g){d[0]=e;c[0]=f;b(d,e===f?d:c,g)})}x(a,function(a,b){var h=f.$watch(a,function a(e,h){d[b]=e;c[b]=h;if(!g){g=true;f.$evalAsync(j)}});e.push(h)});function j(){g=false;if(h){h=false;b(d,d,f)}else{b(d,c,f)}}return function a(){while(e.length){e.shift()()}}},$watchCollection:function(a,b){p.$stateful=true;var c=this;var d;var e;var f;var g=b.length>1;var j=0;var k=i(a,p);var l=[];var m={};var n=true;var o=0;function p(a){d=a;var b,c,f,g,h;if(J(d))return;if(!L(d)){if(e!==d){e=d;j++}}else if(w(d)){if(e!==l){e=l;o=e.length=0;j++}b=d.length;if(o!==b){j++;e.length=o=b}for(var i=0;i<b;i++){h=e[i];g=d[i];f=h!==h&&g!==g;if(!f&&h!==g){j++;e[i]=g}}}else{if(e!==m){e=m={};o=0;j++}b=0;for(c in d){if(d.hasOwnProperty(c)){b++;g=d[c];h=e[c];if(c in e){f=h!==h&&g!==g;if(!f&&h!==g){j++;e[c]=g}}else{o++;e[c]=g;j++}}}if(o>b){j++;for(c in e){if(!d.hasOwnProperty(c)){o--;delete e[c]}}}}return j}function q(){if(n){n=false;b(d,d,c)}else{b(d,f,c)}if(g){if(!L(d)){f=d}else if(w(d)){f=new Array(d.length);for(var a=0;a<d.length;a++){f[a]=d[a]}}else{f={};for(var e in d){if(h.call(d,e)){f[e]=d[e]}}}}}return this.$watch(k,q)},$digest:function(){var d,f,h,i,k,l,p=a,s,v,w=this,x=[],y,z,A;q("$digest");j.$$checkUrlChange();if(this===m&&e!==null){j.defer.cancel(e);u()}c=null;do{l=false;v=w;while(n.length){try{A=n.shift();A.scope.$eval(A.expression,A.locals)}catch(a){g(a)}c=null}a:do{if(i=v.$$watchers){k=i.length;while(k--){try{d=i[k];if(d){if((f=d.get(v))!==(h=d.last)&&!(d.eq?ga(f,h):typeof f==="number"&&typeof h==="number"&&isNaN(f)&&isNaN(h))){l=true;c=d;d.last=d.eq?ea(f,null):f;d.fn(f,h===t?f:h,v);if(p<5){y=4-p;if(!x[y])x[y]=[];x[y].push({msg:Q(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):d.exp,newVal:f,oldVal:h})}}else if(d===c){l=false;break a}}}catch(a){g(a)}}}if(!(s=v.$$childHead||v!==w&&v.$$nextSibling)){while(v!==w&&!(s=v.$$nextSibling)){v=v.$parent}}}while(v=s);if((l||n.length)&&!p--){r();throw b("infdig","{0} $digest() iterations reached. Aborting!\n"+"Watchers fired in the last 5 iterations: {1}",a,x)}}while(l||n.length);r();while(o.length){try{o.shift()()}catch(a){g(a)}}},$destroy:function(){if(this.$$destroyed)return;var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=true;if(this===m)return;for(var b in this.$$listenerCount){s(this,this.$$listenerCount[b],b)}if(a.$$childHead==this)a.$$childHead=this.$$nextSibling;if(a.$$childTail==this)a.$$childTail=this.$$prevSibling;if(this.$$prevSibling)this.$$prevSibling.$$nextSibling=this.$$nextSibling;if(this.$$nextSibling)this.$$nextSibling.$$prevSibling=this.$$prevSibling;this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=G;this.$on=this.$watch=this.$watchGroup=function(){return G};this.$$listeners={};this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null},$eval:function(a,b){return i(a)(this,b)},$evalAsync:function(a,b){if(!m.$$phase&&!n.length){j.defer(function(){if(n.length){m.$digest()}})}n.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){o.push(a)},$apply:function(a){try{q("$apply");return this.$eval(a)}catch(a){g(a)}finally{r();try{m.$digest()}catch(a){g(a);throw a}}},$applyAsync:function(a){var b=this;a&&p.push(c);v();function c(){b.$eval(a)}},$on:function(a,b){var c=this.$$listeners[a];if(!c){this.$$listeners[a]=c=[]}c.push(b);var d=this;do{if(!d.$$listenerCount[a]){d.$$listenerCount[a]=0}d.$$listenerCount[a]++}while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);if(d!==-1){c[d]=null;s(e,1,a)}}},$emit:function(a,b){var c=[],d,e=this,f=false,h={name:a,targetScope:e,stopPropagation:function(){f=true},preventDefault:function(){h.defaultPrevented=true},defaultPrevented:false},i=ia([h],arguments,1),j,k;do{d=e.$$listeners[a]||c;h.currentScope=e;for(j=0,k=d.length;j<k;j++){if(!d[j]){d.splice(j,1);j--;k--;continue}try{d[j].apply(null,i)}catch(a){g(a)}}if(f){h.currentScope=null;return h}
e=e.$parent}while(e);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=c,e=c,f={name:a,targetScope:c,preventDefault:function(){f.defaultPrevented=true},defaultPrevented:false};if(!c.$$listenerCount[a])return f;var h=ia([f],arguments,1),i,j,k;while(d=e){f.currentScope=d;i=d.$$listeners[a]||[];for(j=0,k=i.length;j<k;j++){if(!i[j]){i.splice(j,1);j--;k--;continue}try{i[j].apply(null,h)}catch(a){g(a)}}if(!(e=d.$$listenerCount[a]&&d.$$childHead||d!==c&&d.$$nextSibling)){while(d!==c&&!(e=d.$$nextSibling)){d=d.$parent}}}f.currentScope=null;return f}};var m=new l;var n=m.$$asyncQueue=[];var o=m.$$postDigestQueue=[];var p=m.$$applyAsyncQueue=[];return m;function q(a){if(m.$$phase){throw b("inprog","{0} already in progress",m.$$phase)}m.$$phase=a}function r(){m.$$phase=null}function s(a,b,c){do{a.$$listenerCount[c]-=b;if(a.$$listenerCount[c]===0){delete a.$$listenerCount[c]}}while(a=a.$parent)}function t(){}function u(){while(p.length){try{p.shift()()}catch(a){g(a)}}e=null}function v(){if(e===null){e=j.defer(function(){m.$apply(u)})}}}]}function Ad(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){if(K(b)){a=b;return this}return a};this.imgSrcSanitizationWhitelist=function(a){if(K(a)){b=a;return this}return b};this.$get=function(){return function c(d,e){var f=e?b:a;var g;g=Nd(d).href;if(g!==""&&!g.match(f)){return"unsafe:"+g}return d}}}var Bd=d("$sce");var Cd={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function Dd(a){if(a==="self"){return a}else if(M(a)){if(a.indexOf("***")>-1){throw Bd("iwcard","Illegal sequence *** in string matcher.  String: {0}",a)}a=$(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return new RegExp("^"+a+"$")}else if(R(a)){return new RegExp("^"+a.source+"$")}else{throw Bd("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}}function Ed(a){var b=[];if(K(a)){x(a,function(a){b.push(Dd(a))})}return b}function Fd(){this.SCE_CONTEXTS=Cd;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){if(arguments.length){a=Ed(b)}return a};this.resourceUrlBlacklist=function(a){if(arguments.length){b=Ed(a)}return b};this.$get=["$injector",function(d){var e=function a(b){throw Bd("unsafe","Attempting to use an unsafe value in a safe context.")};if(d.has("$sanitize")){e=d.get("$sanitize")}function f(a,b){if(a==="self"){return Od(b)}else{return!!a.exec(b.href)}}function g(c){var d=Nd(c.toString());var e,g,h=false;for(e=0,g=a.length;e<g;e++){if(f(a[e],d)){h=true;break}}if(h){for(e=0,g=b.length;e<g;e++){if(f(b[e],d)){h=false;break}}}return h}function h(a){var b=function a(b){this.$$unwrapTrustedValue=function(){return b}};if(a){b.prototype=new a}b.prototype.valueOf=function a(){return this.$$unwrapTrustedValue()};b.prototype.toString=function a(){return this.$$unwrapTrustedValue().toString()};return b}var i=h(),j={};j[Cd.HTML]=h(i);j[Cd.CSS]=h(i);j[Cd.URL]=h(i);j[Cd.JS]=h(i);j[Cd.RESOURCE_URL]=h(j[Cd.URL]);function k(a,b){var d=j.hasOwnProperty(a)?j[a]:null;if(!d){throw Bd("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b)}if(b===null||b===c||b===""){return b}if(typeof b!=="string"){throw Bd("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a)}return new d(b)}function l(a){if(a instanceof i){return a.$$unwrapTrustedValue()}else{return a}}function m(a,b){if(b===null||b===c||b===""){return b}var d=j.hasOwnProperty(a)?j[a]:null;if(d&&b instanceof d){return b.$$unwrapTrustedValue()}if(a===Cd.RESOURCE_URL){if(g(b)){return b}else{throw Bd("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}}else if(a===Cd.HTML){return e(b)}throw Bd("unsafe","Attempting to use an unsafe value in a safe context.")}return{trustAs:k,getTrusted:m,valueOf:l}}]}function Gd(){var a=true;this.enabled=function(b){if(arguments.length){a=!!b}return a};this.$get=["$parse","$sceDelegate",function(b,c){if(a&&l<8){throw Bd("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks "+"mode.  You can fix this by adding the text <!doctype html> to the top of your HTML "+"document.  See http://docs.angularjs.org/api/ng.$sce for more information.")}var d=fa(Cd);d.isEnabled=function(){return a};d.trustAs=c.trustAs;d.getTrusted=c.getTrusted;d.valueOf=c.valueOf;if(!a){d.trustAs=d.getTrusted=function(a,b){return b};d.valueOf=H}d.parseAs=function a(c,e){var f=b(e);if(f.literal&&f.constant){return f}else{return b(e,function(a){return d.getTrusted(c,a)})}};var e=d.parseAs,f=d.getTrusted,h=d.trustAs;x(Cd,function(a,b){var c=g(b);d[db("parse_as_"+c)]=function(b){return e(a,b)};d[db("get_trusted_"+c)]=function(b){return f(a,b)};d[db("trust_as_"+c)]=function(b){return h(a,b)}});return d}]}function Hd(){this.$get=["$window","$document",function(a,b){var c={},d=E((/android (\d+)/.exec(g((a.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((a.navigator||{}).userAgent),f=b[0]||{},h,i=/^(Moz|webkit|ms)(?=[A-Z])/,j=f.body&&f.body.style,k=false,m=false,n;if(j){for(var o in j){if(n=i.exec(o)){h=n[0];h=h.substr(0,1).toUpperCase()+h.substr(1);break}}if(!h){h="WebkitOpacity"in j&&"webkit"}k=!!("transition"in j||h+"Transition"in j);m=!!("animation"in j||h+"Animation"in j);if(d&&(!k||!m)){k=M(f.body.style.webkitTransition);m=M(f.body.style.webkitAnimation)}}return{history:!!(a.history&&a.history.pushState&&!(d<4)&&!e),hasEvent:function(a){if(a==="input"&&l<=11)return false;if(J(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:ha(),vendorPrefix:h,transitions:k,animations:m,android:d}}]}var bc=d("$compile");function Id(){this.$get=["$templateCache","$http","$q","$sce",function(a,b,c,d){function e(f,g){e.totalPendingRequests++;if(!M(f)||!a.get(f)){f=d.getTrustedResourceUrl(f)}var h=b.defaults&&b.defaults.transformResponse;if(P(h)){h=h.filter(function(a){return a!==sc})}else if(h===sc){h=null}var i={cache:a,transformResponse:h};return b.get(f,i)["finally"](function(){e.totalPendingRequests--}).then(function(a){return a.data},j);function j(a){if(!g){throw bc("tpload","Failed to load template: {0}",f)}return c.reject(a)}}e.totalPendingRequests=0;return e}]}function Jd(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var d={};d.findBindings=function(a,b,c){var d=a.getElementsByClassName("ng-binding");var e=[];x(d,function(a){var d=t.element(a).data("$binding");if(d){x(d,function(d){if(c){var f=new RegExp("(^|\\s)"+$(b)+"(\\s|\\||$)");if(f.test(d)){e.push(a)}}else{if(d.indexOf(b)!=-1){e.push(a)}}})}});return e};d.findModels=function(a,b,c){var d=["ng-","data-ng-","ng\\:"];for(var e=0;e<d.length;++e){var f=c?"=":"*=";var g="["+d[e]+"model"+f+'"'+b+'"]';var h=a.querySelectorAll(g);if(h.length){return h}}};d.getLocation=function(){return c.url()};d.setLocation=function(b){if(b!==c.url()){c.url(b);a.$digest()}};d.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)};return d}]}function Kd(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){var f={};function g(g,h,i){var j=K(i)&&!i,k=(j?d:c).defer(),l=k.promise,m;m=b.defer(function(){try{k.resolve(g())}catch(a){k.reject(a);e(a)}finally{delete f[l.$$timeoutId]}if(!j)a.$apply()},h);l.$$timeoutId=m;f[m]=k;return l}g.cancel=function(a){if(a&&a.$$timeoutId in f){f[a.$$timeoutId].reject("canceled");delete f[a.$$timeoutId];return b.defer.cancel(a.$$timeoutId)}return false};return g}]}var Ld=b.createElement("a");var Md=Nd(a.location.href);function Nd(a){var b=a;if(l){Ld.setAttribute("href",b);b=Ld.href}Ld.setAttribute("href",b);return{href:Ld.href,protocol:Ld.protocol?Ld.protocol.replace(/:$/,""):"",host:Ld.host,search:Ld.search?Ld.search.replace(/^\?/,""):"",hash:Ld.hash?Ld.hash.replace(/^#/,""):"",hostname:Ld.hostname,port:Ld.port,pathname:Ld.pathname.charAt(0)==="/"?Ld.pathname:"/"+Ld.pathname}}function Od(a){var b=M(a)?Nd(a):a;return b.protocol===Md.protocol&&b.host===Md.host}function Pd(){this.$get=I(a)}Qd.$inject=["$provide"];function Qd(a){var b="Filter";function c(d,e){if(L(d)){var f={};x(d,function(a,b){f[b]=c(b,a)});return f}else{return a.factory(d+b,e)}}this.register=c;this.$get=["$injector",function(a){return function(c){return a.get(c+b)}}];c("currency",Ud);c("date",je);c("filter",Rd);c("json",ke);c("limitTo",ne);c("lowercase",le);c("number",Vd);c("orderBy",oe);c("uppercase",me)}function Rd(){return function(a,b,c){if(!P(a))return a;var d=b!==null?typeof b:"null";var e;var f;switch(d){case"function":e=b;break;case"boolean":case"null":case"number":case"string":f=true;case"object":e=Sd(b,c,f);break;default:return a}return a.filter(e)}}function Sd(a,b,c){var d=L(a)&&"$"in a;var e;if(b===true){b=ga}else if(!Q(b)){b=function(a,b){if(J(a)){return false}if(a===null||b===null){return a===b}if(L(a)||L(b)){return false}a=g(""+a);b=g(""+b);return a.indexOf(b)!==-1}}e=function(e){if(d&&!L(e)){return Td(e,a.$,b,false)}return Td(e,a,b,c)};return e}function Td(a,b,c,d,e){var f=a!==null?typeof a:"null";var g=b!==null?typeof b:"null";if(g==="string"&&b.charAt(0)==="!"){return!Td(a,b.substring(1),c,d)}else if(P(a)){return a.some(function(a){return Td(a,b,c,d)})}switch(f){case"object":var h;if(d){for(h in a){if(h.charAt(0)!=="$"&&Td(a[h],b,c,true)){return true}}return e?false:Td(a,b,c,false)}else if(g==="object"){for(h in b){var i=b[h];if(Q(i)||J(i)){continue}var j=h==="$";var k=j?a:a[h];if(!Td(k,i,c,j,j)){return false}}return true}else{return c(a,b)}break;case"function":return false;default:return c(a,b)}}Ud.$inject=["$locale"];function Ud(a){var b=a.NUMBER_FORMATS;return function(a,c,d){if(J(c)){c=b.CURRENCY_SYM}if(J(d)){d=b.PATTERNS[1].maxFrac}return a==null?a:Xd(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}Vd.$inject=["$locale"];function Vd(a){var b=a.NUMBER_FORMATS;return function(a,c){return a==null?a:Xd(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}var Wd=".";function Xd(a,b,c,d,e){if(!isFinite(a)||L(a))return"";var f=a<0;a=Math.abs(a);var g=a+"",h="",i=[];var j=false;if(g.indexOf("e")!==-1){var k=g.match(/([\d\.]+)e(-?)(\d+)/);if(k&&k[2]=="-"&&k[3]>e+1){a=0}else{h=g;j=true}}if(!j){var l=(g.split(Wd)[1]||"").length;if(J(e)){e=Math.min(Math.max(b.minFrac,l),b.maxFrac)}a=+(Math.round(+(a.toString()+"e"+e)).toString()+"e"+-e);var m=(""+a).split(Wd);var n=m[0];m=m[1]||"";var o,p=0,q=b.lgSize,r=b.gSize;if(n.length>=q+r){p=n.length-q;for(o=0;o<p;o++){if((p-o)%r===0&&o!==0){h+=c}h+=n.charAt(o)}}for(o=p;o<n.length;o++){if((n.length-o)%q===0&&o!==0){h+=c}h+=n.charAt(o)}while(m.length<e){m+="0"}if(e&&e!=="0")h+=d+m.substr(0,e)}else{if(e>0&&a<1){h=a.toFixed(e);a=parseFloat(h)}}if(a===0){f=false}i.push(f?b.negPre:b.posPre,h,f?b.negSuf:b.posSuf);return i.join("")}function Yd(a,b,c){var d="";if(a<0){d="-";a=-a}a=""+a;while(a.length<b)a="0"+a;if(c)a=a.substr(a.length-b);return d+a}function Zd(a,b,c,d){c=c||0;return function(e){var f=e["get"+a]();if(c>0||f>-c)f+=c;if(f===0&&c==-12)f=12;return Yd(f,b,d)}}function $d(a,b){return function(c,d){var e=c["get"+a]();var f=i(b?"SHORT"+a:a);return d[f][e]}}function _d(a){var b=-1*a.getTimezoneOffset();var c=b>=0?"+":"";c+=Yd(Math[b>0?"floor":"ceil"](b/60),2)+Yd(Math.abs(b%60),2);return c}function ae(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(b<=4?5:12)-b)}function be(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function ce(a){return function(b){var c=ae(b.getFullYear()),d=be(b);var e=+d-+c,f=1+Math.round(e/6048e5);return Yd(f,a)}}function de(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function ee(a,b){return a.getFullYear()<=0?b.ERAS[0]:b.ERAS[1]}function fe(a,b){return a.getFullYear()<=0?b.ERANAMES[0]:b.ERANAMES[1]}var ge={yyyy:Zd("FullYear",4),yy:Zd("FullYear",2,0,true),y:Zd("FullYear",1),MMMM:$d("Month"),MMM:$d("Month",true),MM:Zd("Month",2,1),M:Zd("Month",1,1),dd:Zd("Date",2),d:Zd("Date",1),HH:Zd("Hours",2),H:Zd("Hours",1),hh:Zd("Hours",2,-12),h:Zd("Hours",1,-12),mm:Zd("Minutes",2),m:Zd("Minutes",1),ss:Zd("Seconds",2),s:Zd("Seconds",1),sss:Zd("Milliseconds",3),EEEE:$d("Day"),EEE:$d("Day",true),a:de,Z:_d,ww:ce(2),w:ce(1),G:ee,GG:ee,GGG:ee,GGGG:fe};var he=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,ie=/^\-?\d+$/;je.$inject=["$locale"];function je(a){var b=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;function c(a){var c;if(c=a.match(b)){var d=new Date(0),e=0,f=0,g=c[8]?d.setUTCFullYear:d.setFullYear,h=c[8]?d.setUTCHours:d.setHours;if(c[9]){e=E(c[9]+c[10]);f=E(c[9]+c[11])}g.call(d,E(c[1]),E(c[2])-1,E(c[3]));var i=E(c[4]||0)-e;var j=E(c[5]||0)-f;var k=E(c[6]||0);var l=Math.round(parseFloat("0."+(c[7]||0))*1e3);h.call(d,i,j,k,l);return d}return a}return function(b,d,e){var f="",g=[],h,i;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;if(M(b)){b=ie.test(b)?E(b):c(b)}if(N(b)){b=new Date(b)}if(!O(b)){return b}while(d){i=he.exec(d);if(i){g=ia(g,i,1);d=g.pop()}else{g.push(d);d=null}}if(e&&e==="UTC"){b=new Date(b.getTime());b.setMinutes(b.getMinutes()+b.getTimezoneOffset())}x(g,function(c){h=ge[c];f+=h?h(b,a.DATETIME_FORMATS):c.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return f}}function ke(){return function(a,b){if(J(b)){b=2}return ma(a,b)}}var le=I(g);var me=I(i);function ne(){return function(a,b){if(N(a))a=a.toString();if(!P(a)&&!M(a))return a;if(Math.abs(Number(b))===Infinity){b=Number(b)}else{b=E(b)}if(b){return b>0?a.slice(0,b):a.slice(b)}else{return M(a)?"":[]}}}oe.$inject=["$parse"];function oe(a){return function(b,c,d){if(!w(b))return b;c=P(c)?c:[c];if(c.length===0){c=["+"]}c=c.map(function(b){var c=false,d=b||H;if(M(b)){if(b.charAt(0)=="+"||b.charAt(0)=="-"){c=b.charAt(0)=="-";b=b.substring(1)}if(b===""){return f(i,c)}d=a(b);if(d.constant){var e=d();return f(function(a,b){return i(a[e],b[e])},c)}}return f(function(a,b){return i(d(a),d(b))},c)});return o.call(b).sort(f(e,d));function e(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(e!==0)return e}return 0}function f(a,b){return b?function(b,c){return a(c,b)}:a}function g(a){switch(typeof a){case"number":case"boolean":case"string":return true;default:return false}}function h(a){if(a===null)return"null";if(typeof a.valueOf==="function"){a=a.valueOf();if(g(a))return a}if(typeof a.toString==="function"){a=a.toString();if(g(a))return a}return""}function i(a,b){var c=typeof a;var d=typeof b;if(c===d&&c==="object"){a=h(a);b=h(b)}if(c===d){if(c==="string"){a=a.toLowerCase();b=b.toLowerCase()}if(a===b)return 0;return a<b?-1:1}else{return c<d?-1:1}}}}function pe(a){if(Q(a)){a={link:a}}a.restrict=a.restrict||"AC";return I(a)}var qe=I({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref&&!b.name){return function(a,b){if(b[0].nodeName.toLowerCase()!=="a")return;var c=r.call(b.prop("href"))==="[object SVGAnimatedString]"?"xlink:href":"href";b.on("click",function(a){if(!b.attr(c)){a.preventDefault()}})}}}});var re={};x(Eb,function(a,b){if(a=="multiple")return;var c=ec("ng-"+b);re[c]=function(){return{restrict:"A",priority:100,link:function(a,d,e){a.$watch(e[c],function a(c){e.$set(b,!!c)})}}}});x(Gb,function(a,b){re[b]=function(){return{priority:100,link:function(a,c,d){if(b==="ngPattern"&&d.ngPattern.charAt(0)=="/"){var f=d.ngPattern.match(e);if(f){d.$set("ngPattern",new RegExp(f[1],f[2]));return}}a.$watch(d[b],function a(c){d.$set(b,c)})}}}});x(["src","srcset","href"],function(a){var b=ec("ng-"+a);re[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;if(a==="href"&&r.call(d.prop("href"))==="[object SVGAnimatedString]"){g="xlinkHref";e.$attr[g]="xlink:href";f=null}e.$observe(b,function(b){if(!b){if(a==="href"){e.$set(g,null)}return}e.$set(g,b);if(l&&f)d.prop(f,e[g])})}}}});var se={$addControl:G,$$renameControl:ue,$removeControl:G,$setValidity:G,$setDirty:G,$setPristine:G,$setSubmitted:G},te="ng-submitted";function ue(a,b){a.$name=b}ve.$inject=["$element","$attrs","$scope","$animate","$interpolate"];function ve(a,b,d,e,f){var g=this,h=[];var i=g.$$parentForm=a.parent().controller("form")||se;g.$error={};g.$$success={};g.$pending=c;g.$name=f(b.name||b.ngForm||"")(d);g.$dirty=false;g.$pristine=true;g.$valid=true;g.$invalid=false;g.$submitted=false;i.$addControl(g);g.$rollbackViewValue=function(){x(h,function(a){a.$rollbackViewValue()})};g.$commitViewValue=function(){x(h,function(a){a.$commitViewValue()})};g.$addControl=function(a){Ha(a.$name,"input");h.push(a);if(a.$name){g[a.$name]=a}};g.$$renameControl=function(a,b){var c=a.$name;if(g[c]===a){delete g[c]}g[b]=a;a.$name=b};g.$removeControl=function(a){if(a.$name&&g[a.$name]===a){delete g[a.$name]}x(g.$pending,function(b,c){g.$setValidity(c,null,a)});x(g.$error,function(b,c){g.$setValidity(c,null,a)});x(g.$$success,function(b,c){g.$setValidity(c,null,a)});da(h,a)};Bf({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];if(!d){a[b]=[c]}else{var e=d.indexOf(c);if(e===-1){d.push(c)}}},unset:function(a,b,c){var d=a[b];if(!d){return}da(d,c);if(d.length===0){delete a[b]}},parentForm:i,$animate:e});g.$setDirty=function(){e.removeClass(a,rf);e.addClass(a,sf);g.$dirty=true;g.$pristine=false;i.$setDirty()};g.$setPristine=function(){e.setClass(a,rf,sf+" "+te);g.$dirty=false;g.$pristine=true;g.$submitted=false;x(h,function(a){a.$setPristine()})};g.$setUntouched=function(){x(h,function(a){a.$setUntouched()})};g.$setSubmitted=function(){e.addClass(a,te);g.$submitted=true;i.$setSubmitted()}}var we=function(a){return["$timeout",function(b){var d={name:"form",restrict:a?"EAC":"E",controller:ve,compile:function d(e,f){e.addClass(rf).addClass(pf);var g=f.name?"name":a&&f.ngForm?"ngForm":false;return{pre:function a(d,e,f,h){if(!("action"in f)){var i=function(a){d.$apply(function(){h.$commitViewValue();h.$setSubmitted()});a.preventDefault()};Ya(e[0],"submit",i);e.on("$destroy",function(){b(function(){Za(e[0],"submit",i)},0,false)})}var j=h.$$parentForm;if(g){ld(d,null,h.$name,h,h.$name);f.$observe(g,function(a){if(h.$name===a)return;ld(d,null,h.$name,c,h.$name);j.$$renameControl(h,a);ld(d,null,h.$name,h,h.$name)})}e.on("$destroy",function(){j.$removeControl(h);if(g){ld(d,null,f[g],c,h.$name)}D(h,se)})}}}};return d}]};var xe=we();var ye=we(true);var ze=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/;var Ae=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/;var Be=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;var Ce=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;var De=/^(\d{4})-(\d{2})-(\d{2})$/;var Ee=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var Fe=/^(\d{4})-W(\d\d)$/;var Ge=/^(\d{4})-(\d\d)$/;var He=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var Ie={text:Ke,date:Oe("date",De,Ne(De,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Oe("datetimelocal",Ee,Ne(Ee,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Oe("time",He,Ne(He,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Oe("week",Fe,Me,"yyyy-Www"),month:Oe("month",Ge,Ne(Ge,["yyyy","MM"]),"yyyy-MM"),number:Qe,url:Re,email:Se,radio:Te,checkbox:Ve,hidden:G,button:G,submit:G,reset:G,file:G};function Je(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Ke(a,b,c,d,e,f){Le(a,b,c,d,e,f);Je(d)}function Le(a,b,c,d,e,f){var h=g(b[0].type);if(!e.android){var i=false;b.on("compositionstart",function(a){i=true});b.on("compositionend",function(){i=false;j()})}var j=function(a){if(k){f.defer.cancel(k);k=null}if(i)return;var e=b.val(),g=a&&a.type;if(h!=="password"&&(!c.ngTrim||c.ngTrim!=="false")){e=Z(e)}if(d.$viewValue!==e||e===""&&d.$$hasNativeValidators){d.$setViewValue(e,g)}};if(e.hasEvent("input")){b.on("input",j)}else{var k;var l=function(a,b,c){if(!k){k=f.defer(function(){k=null;if(!b||b.value!==c){j(a)}})}};b.on("keydown",function(a){var b=a.keyCode;if(b===91||15<b&&b<19||37<=b&&b<=40)return;l(a,this,this.value)});if(e.hasEvent("paste")){b.on("paste cut",l)}}b.on("change",j);d.$render=function(){b.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function Me(a,b){if(O(a)){return a}if(M(a)){Fe.lastIndex=0;var c=Fe.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=ae(d),k=(e-1)*7;if(b){f=b.getHours();g=b.getMinutes();h=b.getSeconds();i=b.getMilliseconds()}return new Date(d,0,j.getDate()+k,f,g,h,i)}}return NaN}function Ne(a,b){return function(c,d){var e,f;if(O(c)){return c}if(M(c)){if(c.charAt(0)=='"'&&c.charAt(c.length-1)=='"'){c=c.substring(1,c.length-1)}if(ze.test(c)){return new Date(c)}a.lastIndex=0;e=a.exec(c);if(e){e.shift();if(d){f={yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1e3}}else{f={yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0}}x(e,function(a,c){if(c<b.length){f[b[c]]=+a}});return new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,f.sss*1e3||0)}}return NaN}}function Oe(a,b,d,e){return function f(g,h,i,j,k,l,m){Pe(g,h,i,j);Le(g,h,i,j,k,l);var n=j&&j.$options&&j.$options.timezone;var o;j.$$parserName=a;j.$parsers.push(function(a){if(j.$isEmpty(a))return null;if(b.test(a)){var e=d(a,o);if(n==="UTC"){e.setMinutes(e.getMinutes()-e.getTimezoneOffset())}return e}return c});j.$formatters.push(function(a){if(a&&!O(a)){throw wf("datefmt","Expected `{0}` to be a date",a)}if(r(a)){o=a;if(o&&n==="UTC"){var b=6e4*o.getTimezoneOffset();o=new Date(o.getTime()+b)}return m("date")(a,e,n)}else{o=null;return""}});if(K(i.min)||i.ngMin){var p;j.$validators.min=function(a){return!r(a)||J(p)||d(a)>=p};i.$observe("min",function(a){p=s(a);j.$validate()})}if(K(i.max)||i.ngMax){var q;j.$validators.max=function(a){return!r(a)||J(q)||d(a)<=q};i.$observe("max",function(a){q=s(a);j.$validate()})}function r(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function s(a){return K(a)?O(a)?a:d(a):c}}}function Pe(a,b,d,e){var g=b[0];var h=e.$$hasNativeValidators=L(g.validity);if(h){e.$parsers.push(function(a){var d=b.prop(f)||{};return d.badInput&&!d.typeMismatch?c:a})}}function Qe(a,b,d,e,f,g){Pe(a,b,d,e);Le(a,b,d,e,f,g);e.$$parserName="number";e.$parsers.push(function(a){if(e.$isEmpty(a))return null;if(Ce.test(a))return parseFloat(a);return c});e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!N(a)){throw wf("numfmt","Expected `{0}` to be a number",a)}a=a.toString()}return a});if(K(d.min)||d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||J(h)||a>=h};d.$observe("min",function(a){if(K(a)&&!N(a)){a=parseFloat(a,10)}h=N(a)&&!isNaN(a)?a:c;e.$validate()})}if(K(d.max)||d.ngMax){var i;e.$validators.max=function(a){return e.$isEmpty(a)||J(i)||a<=i};d.$observe("max",function(a){if(K(a)&&!N(a)){a=parseFloat(a,10)}i=N(a)&&!isNaN(a)?a:c;e.$validate()})}}function Re(a,b,c,d,e,f){Le(a,b,c,d,e,f);Je(d);d.$$parserName="url";d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||Ae.test(c)}}function Se(a,b,c,d,e,f){Le(a,b,c,d,e,f);Je(d);d.$$parserName="email";d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||Be.test(c)}}function Te(a,b,c,d){if(J(c.name)){b.attr("name",B())}var e=function(a){if(b[0].checked){d.$setViewValue(c.value,a&&a.type)}};b.on("click",e);d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue};c.$observe("value",d.$render)}function Ue(a,b,c,d,e){var f;if(K(d)){f=a(d);if(!f.constant){throw wf("constexpr","Expected constant expression for `{0}`, but saw "+"`{1}`.",c,d)}return f(b)}return e}function Ve(a,b,c,d,e,f,g,h){var i=Ue(h,a,"ngTrueValue",c.ngTrueValue,true);var j=Ue(h,a,"ngFalseValue",c.ngFalseValue,false);var k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k);d.$render=function(){b[0].checked=d.$viewValue};d.$isEmpty=function(a){return a===false};d.$formatters.push(function(a){return ga(a,i)});d.$parsers.push(function(a){return a?i:j})}var We=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,h,i){if(i[0]){(Ie[g(h.type)]||Ie.text)(e,f,h,i[0],b,a,c,d)}}}}}];var Xe=/^(true|false|\d+)$/;var Ye=function(){return{restrict:"A",priority:100,compile:function(a,b){if(Xe.test(b.ngValue)){return function a(b,c,d){d.$set("value",b.$eval(d.ngValue))}}else{return function a(b,c,d){b.$watch(d.ngValue,function a(b){d.$set("value",b)})}}}}};var Ze=["$compile",function(a){return{restrict:"AC",compile:function b(d){a.$$addBindingClass(d);return function b(d,e,f){a.$$addBindingInfo(e,f.ngBind);e=e[0];d.$watch(f.ngBind,function a(b){e.textContent=b===c?"":b})}}}}];var $e=["$interpolate","$compile",function(a,b){return{compile:function d(e){b.$$addBindingClass(e);return function d(e,f,g){var h=a(f.attr(g.$attr.ngBindTemplate));b.$$addBindingInfo(f,h.expressions);f=f[0];g.$observe("ngBindTemplate",function(a){f.textContent=a===c?"":a})}}}}];var _e=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function d(e,f){var g=b(f.ngBindHtml);var h=b(f.ngBindHtml,function a(b){return(b||"").toString()});c.$$addBindingClass(e);return function b(d,e,f){c.$$addBindingInfo(e,f.ngBindHtml);d.$watch(h,function b(){e.html(a.getTrustedHtml(g(d))||"")})}}}}];var af=I({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}});function bf(a,b){a="ngClass"+a;return["$animate",function(c){return{restrict:"AC",link:function(f,g,h){var i;f.$watch(h[a],n,true);h.$observe("class",function(b){n(f.$eval(h[a]))});if(a!=="ngClass"){f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var i=e(f.$eval(h[a]));g===b?j(i):k(i)}})}function j(a){var b=l(a,1);h.$addClass(b)}function k(a){var b=l(a,-1);h.$removeClass(b)}function l(a,b){var c=g.data("$classCounts")||{};var d=[];x(a,function(a){if(b>0||c[a]){c[a]=(c[a]||0)+b;if(c[a]===+(b>0)){d.push(a)}}});g.data("$classCounts",c);return d.join(" ")}function m(a,b){var e=d(b,a);var f=d(a,b);e=l(e,1);f=l(f,-1);if(e&&e.length){c.addClass(g,e)}if(f&&f.length){c.removeClass(g,f)}}function n(a){if(b===true||f.$index%2===b){var c=e(a||[]);if(!i){j(c)}else if(!ga(a,i)){var d=e(i);m(d,c)}}i=fa(a)}}};function d(a,b){var c=[];a:for(var d=0;d<a.length;d++){var e=a[d];for(var f=0;f<b.length;f++){if(e==b[f])continue a}c.push(e)}return c}function e(a){if(P(a)){return a}else if(M(a)){return a.split(" ")}else if(L(a)){var b=[];x(a,function(a,c){if(a){b=b.concat(c.split(" "))}});return b}return a}}]}var cf=bf("",true);var df=bf("Odd",0);var ef=bf("Even",1);var ff=pe({compile:function(a,b){b.$set("ngCloak",c);a.removeClass("ng-cloak")}});var gf=[function(){return{restrict:"A",scope:true,controller:"@",priority:500}}];var hf={};var jf={blur:true,focus:true};x("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=ec("ng-"+a);hf[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b],null,true);return function b(c,e){e.on(a,function(b){var e=function(){g(c,{$event:b})};if(jf[a]&&d.$$phase){c.$evalAsync(e)}else{c.$apply(e)}})}}}}]});var kf=["$animate",function(a){return{multiElement:true,transclude:"element",priority:600,terminal:true,restrict:"A",$$tlb:true,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function c(f){if(f){if(!i){g(function(c,f){i=f;c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" ");h={clone:c};a.enter(c,d.parent(),d)})}}else{if(j){j.remove();j=null}if(i){i.$destroy();i=null}if(h){j=Ja(h.clone);a.leave(j).then(function(){j=null});h=null}}})}}}];var lf=["$templateRequest","$anchorScroll","$animate",function(a,b,c){return{restrict:"ECA",priority:400,terminal:true,transclude:"element",controller:t.noop,compile:function(d,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(d,e,i,j,k){var l=0,m,n,o;var p=function(){if(n){n.remove();n=null}if(m){m.$destroy();m=null}if(o){c.leave(o).then(function(){n=null});n=o;o=null}};d.$watch(f,function f(i){var n=function(){if(K(h)&&(!h||d.$eval(h))){b()}};var q=++l;if(i){a(i,true).then(function(a){if(q!==l)return;var b=d.$new();j.template=a;var f=k(b,function(a){p();c.enter(a,null,e).then(n)});m=b;o=f;m.$emit("$includeContentLoaded",i);d.$eval(g)},function(){if(q===l){p();d.$emit("$includeContentError",i)}});d.$emit("$includeContentRequested",i)}else{p();j.template=null}})}}}}];var mf=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){if(/SVG/.test(d[0].toString())){d.empty();a(lb(f.template,b).childNodes)(c,function a(b){d.append(b)},{futureParentElement:d});return}d.html(f.template);a(d.contents())(c)}}}];var nf=pe({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}});var of=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,e){var f=b.attr(d.$attr.ngList)||", ";var g=d.ngTrim!=="false";var h=g?Z(f):f;var i=function(a){if(J(a))return;var b=[];if(a){x(a.split(h),function(a){if(a)b.push(g?Z(a):a)})}return b};e.$parsers.push(i);e.$formatters.push(function(a){if(P(a)){return a.join(f)}return c});e.$isEmpty=function(a){return!a||!a.length}}}};var pf="ng-valid",qf="ng-invalid",rf="ng-pristine",sf="ng-dirty",tf="ng-untouched",uf="ng-touched",vf="ng-pending";var wf=d("ngModel");var xf=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,e,f,g,h,i,j,k){this.$viewValue=Number.NaN;this.$modelValue=Number.NaN;this.$$rawModelValue=c;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=true;this.$touched=false;this.$pristine=true;this.$dirty=false;this.$valid=true;this.$invalid=false;this.$error={};this.$$success={};this.$pending=c;this.$name=k(d.name||"",false)(a);var l=f(d.ngModel),m=l.assign,n=l,o=m,p=null,q,r=this;this.$$setOptions=function(a){r.$options=a;if(a&&a.getterSetter){var b=f(d.ngModel+"()"),c=f(d.ngModel+"($$$p)");n=function(a){var c=l(a);if(Q(c)){c=b(a)}return c};o=function(a,b){if(Q(l(a))){c(a,{$$$p:r.$modelValue})}else{m(a,r.$modelValue)}}}else if(!l.assign){throw wf("nonassign","Expression '{0}' is non-assignable. Element: {1}",d.ngModel,oa(e))}};this.$render=G;this.$isEmpty=function(a){return J(a)||a===""||a===null||a!==a};var s=e.inheritedData("$formController")||se,t=0;Bf({ctrl:this,$element:e,set:function(a,b){a[b]=true},unset:function(a,b){delete a[b]},parentForm:s,$animate:g});this.$setPristine=function(){r.$dirty=false;r.$pristine=true;g.removeClass(e,sf);g.addClass(e,rf)};this.$setDirty=function(){r.$dirty=true;r.$pristine=false;g.removeClass(e,rf);g.addClass(e,sf);s.$setDirty()};this.$setUntouched=function(){r.$touched=false;r.$untouched=true;g.setClass(e,tf,uf)};this.$setTouched=function(){r.$touched=true;r.$untouched=false;g.setClass(e,uf,tf)};this.$rollbackViewValue=function(){h.cancel(p);r.$viewValue=r.$$lastCommittedViewValue;r.$render()};this.$validate=function(){if(N(r.$modelValue)&&isNaN(r.$modelValue)){return}var a=r.$$lastCommittedViewValue;var b=r.$$rawModelValue;var d=r.$valid;var e=r.$modelValue;var f=r.$options&&r.$options.allowInvalid;r.$$runValidators(b,a,function(a){if(!f&&d!==a){r.$modelValue=a?b:c;if(r.$modelValue!==e){r.$$writeModelToScope()}}})};this.$$runValidators=function(a,b,d){t++;var e=t;if(!f()){k(false);return}if(!g()){k(false);return}h();function f(){var a=r.$$parserName||"parse";if(q===c){i(a,null)}else{if(!q){x(r.$validators,function(a,b){i(b,null)});x(r.$asyncValidators,function(a,b){i(b,null)})}i(a,q);return q}return true}function g(){var c=true;x(r.$validators,function(d,e){var f=d(a,b);c=c&&f;i(e,f)});if(!c){x(r.$asyncValidators,function(a,b){i(b,null)});return false}return true}function h(){var d=[];var e=true;x(r.$asyncValidators,function(f,g){var h=f(a,b);if(!Y(h)){throw wf("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",h)}i(g,c);d.push(h.then(function(){i(g,true)},function(a){e=false;i(g,false)}))});if(!d.length){k(true)}else{j.all(d).then(function(){k(e)},G)}}function i(a,b){if(e===t){r.$setValidity(a,b)}}function k(a){if(e===t){d(a)}}}
;this.$commitViewValue=function(){var a=r.$viewValue;h.cancel(p);if(r.$$lastCommittedViewValue===a&&(a!==""||!r.$$hasNativeValidators)){return}r.$$lastCommittedViewValue=a;if(r.$pristine){this.$setDirty()}this.$$parseAndValidate()};this.$$parseAndValidate=function(){var b=r.$$lastCommittedViewValue;var d=b;q=J(d)?c:true;if(q){for(var e=0;e<r.$parsers.length;e++){d=r.$parsers[e](d);if(J(d)){q=false;break}}}if(N(r.$modelValue)&&isNaN(r.$modelValue)){r.$modelValue=n(a)}var f=r.$modelValue;var g=r.$options&&r.$options.allowInvalid;r.$$rawModelValue=d;if(g){r.$modelValue=d;h()}r.$$runValidators(d,r.$$lastCommittedViewValue,function(a){if(!g){r.$modelValue=a?d:c;h()}});function h(){if(r.$modelValue!==f){r.$$writeModelToScope()}}};this.$$writeModelToScope=function(){o(a,r.$modelValue);x(r.$viewChangeListeners,function(a){try{a()}catch(a){b(a)}})};this.$setViewValue=function(a,b){r.$viewValue=a;if(!r.$options||r.$options.updateOnDefault){r.$$debounceViewValueCommit(b)}};this.$$debounceViewValueCommit=function(b){var c=0,d=r.$options,e;if(d&&K(d.debounce)){e=d.debounce;if(N(e)){c=e}else if(N(e[b])){c=e[b]}else if(N(e["default"])){c=e["default"]}}h.cancel(p);if(c){p=h(function(){r.$commitViewValue()},c)}else if(i.$$phase){r.$commitViewValue()}else{a.$apply(function(){r.$commitViewValue()})}};a.$watch(function b(){var d=n(a);if(d!==r.$modelValue&&(r.$modelValue===r.$modelValue||d===d)){r.$modelValue=r.$$rawModelValue=d;q=c;var e=r.$formatters,f=e.length;var g=d;while(f--){g=e[f](g)}if(r.$viewValue!==g){r.$viewValue=r.$$lastCommittedViewValue=g;r.$render();r.$$runValidators(d,g,G)}}return d})}];var yf=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:xf,priority:1,compile:function b(c){c.addClass(rf).addClass(tf).addClass(pf);return{pre:function a(b,c,d,e){var f=e[0],g=e[1]||se;f.$$setOptions(e[2]&&e[2].$options);g.$addControl(f);d.$observe("name",function(a){if(f.$name!==a){g.$$renameControl(f,a)}});b.$on("$destroy",function(){g.$removeControl(f)})},post:function b(c,d,e,f){var g=f[0];if(g.$options&&g.$options.updateOn){d.on(g.$options.updateOn,function(a){g.$$debounceViewValueCommit(a&&a.type)})}d.on("blur",function(b){if(g.$touched)return;if(a.$$phase){c.$evalAsync(g.$setTouched)}else{c.$apply(g.$setTouched)}})}}}}}];var zf=/(\s+|^)default(\s+|$)/;var Af=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=a.$eval(b.ngModelOptions);if(this.$options.updateOn!==c){this.$options.updateOnDefault=false;this.$options.updateOn=Z(this.$options.updateOn.replace(zf,function(){d.$options.updateOnDefault=true;return" "}))}else{this.$options.updateOnDefault=true}}]}};function Bf(a){var b=a.ctrl,d=a.$element,e={},f=a.set,g=a.unset,h=a.parentForm,i=a.$animate;e[qf]=!(e[pf]=d.hasClass(pf));b.$setValidity=j;function j(a,d,e){if(d===c){k("$pending",a,e)}else{l("$pending",a,e)}if(!X(d)){g(b.$error,a,e);g(b.$$success,a,e)}else{if(d){g(b.$error,a,e);f(b.$$success,a,e)}else{f(b.$error,a,e);g(b.$$success,a,e)}}if(b.$pending){m(vf,true);b.$valid=b.$invalid=c;n("",null)}else{m(vf,false);b.$valid=Cf(b.$error);b.$invalid=!b.$valid;n("",b.$valid)}var i;if(b.$pending&&b.$pending[a]){i=c}else if(b.$error[a]){i=false}else if(b.$$success[a]){i=true}else{i=null}n(a,i);h.$setValidity(a,i,b)}function k(a,c,d){if(!b[a]){b[a]={}}f(b[a],c,d)}function l(a,d,e){if(b[a]){g(b[a],d,e)}if(Cf(b[a])){b[a]=c}}function m(a,b){if(b&&!e[a]){i.addClass(d,a);e[a]=true}else if(!b&&e[a]){i.removeClass(d,a);e[a]=false}}function n(a,b){a=a?"-"+Ba(a,"-"):"";m(pf+a,b===true);m(qf+a,b===false)}}function Cf(a){if(a){for(var b in a){return false}}return true}var Df=pe({terminal:true,priority:1e3});var Ef=["$locale","$interpolate",function(a,b){var c=/{}/g,d=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(e,f,h){var i=h.count,j=h.$attr.when&&f.attr(h.$attr.when),k=h.offset||0,l=e.$eval(j)||{},m={},n=b.startSymbol(),o=b.endSymbol(),p=n+i+"-"+k+o,q=t.noop,r;x(h,function(a,b){var c=d.exec(b);if(c){var e=(c[1]?"-":"")+g(c[2]);l[e]=f.attr(h.$attr[b])}});x(l,function(a,d){m[d]=b(a.replace(c,p))});e.$watch(i,function b(c){var d=parseFloat(c);var f=isNaN(d);if(!f&&!(d in l)){d=a.pluralCat(d-k)}if(d!==r&&!(f&&isNaN(r))){q();q=e.$watch(m[d],s);r=d}});function s(a){f.text(a||"")}}}}];var Ff=["$parse","$animate",function(a,e){var f="$$NG_REMOVED";var g=d("ngRepeat");var h=function(a,b,c,d,e,f,g){a[c]=d;if(e)a[e]=f;a.$index=b;a.$first=b===0;a.$last=b===g-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=(b&1)===0)};var i=function(a){return a.clone[0]};var j=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:true,transclude:"element",priority:1e3,terminal:true,$$tlb:true,compile:function d(k,l){var n=l.ngRepeat;var o=b.createComment(" end ngRepeat: "+n+" ");var p=n.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p){throw g("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n)}var q=p[1];var r=p[2];var s=p[3];var t=p[4];p=q.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!p){throw g("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",q)}var u=p[3]||p[1];var v=p[2];if(s&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(s)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(s))){throw g("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",s)}var y,z,A,B;var C={$id:Lb};if(t){y=a(t)}else{A=function(a,b){return Lb(b)};B=function(a){return a}}return function a(b,d,k,l,p){if(y){z=function(a,c,d){if(v)C[v]=a;C[u]=c;C.$index=d;return y(b,C)}}var q=Ka();b.$watchCollection(r,function a(k){var l,r,t=d[0],y,C=Ka(),D,E,F,G,H,I,J,K,L;if(s){b[s]=k}if(w(k)){I=k;H=z||A}else{H=z||B;I=[];for(var M in k){if(k.hasOwnProperty(M)&&M.charAt(0)!="$"){I.push(M)}}I.sort()}D=I.length;K=new Array(D);for(l=0;l<D;l++){E=k===I?l:I[l];F=k[E];G=H(E,F,l);if(q[G]){J=q[G];delete q[G];C[G]=J;K[l]=J}else if(C[G]){x(K,function(a){if(a&&a.scope)q[a.id]=a});throw g("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",n,G,F)}else{K[l]={id:G,scope:c,clone:c};C[G]=true}}for(var N in q){J=q[N];L=Ja(J.clone);e.leave(L);if(L[0].parentNode){for(l=0,r=L.length;l<r;l++){L[l][f]=true}}J.scope.$destroy()}for(l=0;l<D;l++){E=k===I?l:I[l];F=k[E];J=K[l];if(J.scope){y=t;do{y=y.nextSibling}while(y&&y[f]);if(i(J)!=y){e.move(Ja(J.clone),null,m(t))}t=j(J);h(J.scope,l,u,F,v,E,D)}else{p(function a(b,c){J.scope=c;var d=o.cloneNode(false);b[b.length++]=d;e.enter(b,null,m(t));t=d;J.clone=b;C[J.id]=J;h(J.scope,l,u,F,v,E,D)})}}q=C})}}}}];var Gf="ng-hide";var Hf="ng-hide-animate";var If=["$animate",function(a){return{restrict:"A",multiElement:true,link:function(b,c,d){b.$watch(d.ngShow,function b(d){a[d?"removeClass":"addClass"](c,Gf,{tempClasses:Hf})})}}}];var Jf=["$animate",function(a){return{restrict:"A",multiElement:true,link:function(b,c,d){b.$watch(d.ngHide,function b(d){a[d?"addClass":"removeClass"](c,Gf,{tempClasses:Hf})})}}}];var Kf=pe(function(a,b,c){a.$watch(c.ngStyle,function a(c,d){if(d&&c!==d){x(d,function(a,c){b.css(c,"")})}if(c)b.css(c)},true)});var Lf=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function a(){this.cases={}}],link:function(c,d,e,f){var g=e.ngSwitch||e.on,h=[],i=[],j=[],k=[];var l=function(a,b){return function(){a.splice(b,1)}};c.$watch(g,function c(d){var e,g;for(e=0,g=j.length;e<g;++e){a.cancel(j[e])}j.length=0;for(e=0,g=k.length;e<g;++e){var m=Ja(i[e].clone);k[e].$destroy();var n=j[e]=a.leave(m);n.then(l(j,e))}i.length=0;k.length=0;if(h=f.cases["!"+d]||f.cases["?"]){x(h,function(c){c.transclude(function(d,e){k.push(e);var f=c.element;d[d.length++]=b.createComment(" end ngSwitchWhen: ");var g={clone:d};i.push(g);a.enter(d,f.parent(),f)})})}})}}}];var Mf=pe({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:true,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[];d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}});var Nf=pe({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:true,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[];d.cases["?"].push({transclude:e,element:b})}});var Of=pe({restrict:"EAC",link:function(a,b,c,e,f){if(!f){throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! "+"No parent directive that requires a transclusion found. "+"Element: {0}",oa(b))}f(function(a){b.empty();b.append(a)})}});var Pf=["$templateCache",function(a){return{restrict:"E",terminal:true,compile:function(b,c){if(c.type=="text/ng-template"){var d=c.id,e=b[0].text;a.put(d,e)}}}}];var Qf=d("ngOptions");var Rf=I({restrict:"A",terminal:true});var Sf=["$compile","$parse",function(a,d){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,f={$setViewValue:G};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d=this,e={},g=f,h,i;d.databound=c.ngModel;d.init=function(a,b,c){g=a;h=b;i=c};d.addOption=function(b,c){Ha(b,'"option value"');e[b]=true;if(g.$viewValue==b){a.val(b);if(i.parent())i.remove()}if(c&&c[0].hasAttribute("selected")){c[0].selected=true}};d.removeOption=function(a){if(this.hasOption(a)){delete e[a];if(g.$viewValue===a){this.renderUnknownOption(a)}}};d.renderUnknownOption=function(b){var c="? "+Lb(b)+" ?";i.val(c);a.prepend(i);a.val(c);i.prop("selected",true)};d.hasOption=function(a){return e.hasOwnProperty(a)};b.$on("$destroy",function(){d.renderUnknownOption=G})}],link:function(f,g,h,i){if(!i[1])return;var j=i[0],k=i[1],n=h.multiple,o=h.ngOptions,p=false,q,r=false,s=m(b.createElement("option")),t=m(b.createElement("optgroup")),u=s.clone();for(var v=0,w=g.children(),z=w.length;v<z;v++){if(w[v].value===""){q=p=w.eq(v);break}}j.init(k,p,u);if(n){k.$isEmpty=function(a){return!a||a.length===0}}if(o)C(f,g,k);else if(n)B(f,g,k);else A(f,g,k,j);function A(a,b,c,d){c.$render=function(){var a=c.$viewValue;if(d.hasOption(a)){if(u.parent())u.remove();b.val(a);if(a==="")q.prop("selected",true)}else{if(a==null&&q){b.val("")}else{d.renderUnknownOption(a)}}};b.on("change",function(){a.$apply(function(){if(u.parent())u.remove();c.$setViewValue(b.val())})})}function B(a,b,c){var d;c.$render=function(){var a=new Mb(c.$viewValue);x(b.find("option"),function(b){b.selected=K(a.get(b.value))})};a.$watch(function a(){if(!ga(d,c.$viewValue)){d=fa(c.$viewValue);c.$render()}});b.on("change",function(){a.$apply(function(){var a=[];x(b.find("option"),function(b){if(b.selected){a.push(b.value)}});c.$setViewValue(a)})})}function C(b,f,g){var h;if(!(h=o.match(e))){throw Qf("iexp","Expected expression in form of "+"'_select_ (as _label_)? for (_key_,)?_value_ in _collection_'"+" but got '{0}'. Element: {1}",o,oa(f))}var i=d(h[2]||h[1]),k=h[4]||h[6],m=/ as /.test(h[0])&&h[1],q=m?d(m):null,u=h[5],v=d(h[3]||""),w=d(h[2]?h[1]:k),z=d(h[7]),A=h[8],B=A?d(h[8]):null,C={},D=[[{element:f,label:""}]],E={};if(p){a(p)(b);p.removeClass("ng-scope");p.remove()}f.empty();f.on("change",G);g.$render=N;b.$watchCollection(z,L);b.$watchCollection(I,L);if(n){b.$watchCollection(function(){return g.$modelValue},L)}function F(a,c,d){E[k]=d;if(u)E[u]=c;return a(b,E)}function G(){b.$apply(function(){var a=z(b)||[];var c;if(n){c=[];x(f.val(),function(b){b=B?C[b]:b;c.push(H(b,a[b]))})}else{var d=B?C[f.val()]:f.val();c=H(d,a[d])}g.$setViewValue(c);N()})}function H(a,b){if(a==="?"){return c}else if(a===""){return null}else{var d=q?q:w;return F(d,a,b)}}function I(){var a=z(b);var c;if(a&&P(a)){c=new Array(a.length);for(var d=0,e=a.length;d<e;d++){c[d]=F(i,d,a[d])}return c}else if(a){c={};for(var f in a){if(a.hasOwnProperty(f)){c[f]=F(i,f,a[f])}}}return c}function J(a){var b;if(n){if(B&&P(a)){b=new Mb([]);for(var c=0;c<a.length;c++){b.put(F(B,null,a[c]),true)}}else{b=new Mb(a)}}else if(B){a=F(B,null,a)}return function c(d,e){var f;if(B){f=B}else if(q){f=q}else{f=w}if(n){return K(b.remove(F(f,d,e)))}else{return a===F(f,d,e)}}}function L(){if(!r){b.$$postDigest(N);r=true}}function M(a,b,c){a[b]=a[b]||0;a[b]+=c?1:-1}function N(){r=false;var a={"":[]},c=[""],d,e,h,k,m,o,q=g.$viewValue,w=z(b)||[],A=u?y(w):w,G,H,I,L,N,O,P={},Q,R=J(q),S=false,T,U,V,W;C={};for(O=0;L=A.length,O<L;O++){G=O;if(u){G=A[O];if(G.charAt(0)==="$")continue}H=w[G];d=F(v,G,H)||"";if(!(e=a[d])){e=a[d]=[];c.push(d)}Q=R(G,H);S=S||Q;V=F(i,G,H);V=K(V)?V:"";W=B?B(b,E):u?A[O]:O;if(B){C[W]=G}e.push({id:W,label:V,selected:Q})}if(!n){if(p||q===null){a[""].unshift({id:"",label:"",selected:!S})}else if(!S){a[""].unshift({id:"?",label:"",selected:true})}}for(N=0,I=c.length;N<I;N++){d=c[N];e=a[d];if(D.length<=N){k={element:t.clone().attr("label",d),label:e.label};m=[k];D.push(m);f.append(k.element)}else{m=D[N];k=m[0];if(k.label!=d){k.element.attr("label",k.label=d)}}T=null;for(O=0,L=e.length;O<L;O++){h=e[O];if(o=m[O+1]){T=o.element;if(o.label!==h.label){M(P,o.label,false);M(P,h.label,true);T.text(o.label=h.label);T.prop("label",o.label)}if(o.id!==h.id){T.val(o.id=h.id)}if(T[0].selected!==h.selected){T.prop("selected",o.selected=h.selected);if(l){T.prop("selected",o.selected)}}}else{if(h.id===""&&p){U=p}else{(U=s.clone()).val(h.id).prop("selected",h.selected).attr("selected",h.selected).prop("label",h.label).text(h.label)}m.push(o={element:U,label:h.label,id:h.id,selected:h.selected});M(P,h.label,true);if(T){T.after(U)}else{k.element.append(U)}T=U}}O++;while(m.length>O){h=m.pop();M(P,h.label,false);h.element.remove()}}while(D.length>N){e=D.pop();for(O=1;O<e.length;++O){M(P,e[O].label,false)}e[0].element.remove()}x(P,function(a,b){if(a>0){j.addOption(b)}else if(a<0){j.removeOption(b)}})}}}}}];var Tf=["$interpolate",function(a){var b={addOption:G,removeOption:G};return{restrict:"E",priority:100,compile:function(c,d){if(J(d.value)){var e=a(c.text(),true);if(!e){d.$set("value",c.text())}}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);if(!h||!h.databound){h=b}if(e){a.$watch(e,function a(b,e){d.$set("value",b);if(e!==b){h.removeOption(e)}h.addOption(b,c)})}else{h.addOption(d.value,c)}c.on("$destroy",function(){h.removeOption(d.value)})}}}}];var Uf=I({restrict:"E",terminal:false});var Vf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(!d)return;c.required=true;d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)};c.$observe("required",function(){d.$validate()})}}};var Wf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,e,f){if(!f)return;var g,h=e.ngPattern||e.pattern;e.$observe("pattern",function(a){if(M(a)&&a.length>0){a=new RegExp("^"+a+"$")}if(a&&!a.test){throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",h,a,oa(b))}g=a||c;f.$validate()});f.$validators.pattern=function(a,b){return f.$isEmpty(b)||J(g)||g.test(b)}}}};var Xf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(!d)return;var e=-1;c.$observe("maxlength",function(a){var b=E(a);e=isNaN(b)?-1:b;d.$validate()});d.$validators.maxlength=function(a,b){return e<0||d.$isEmpty(b)||b.length<=e}}}};var Yf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(!d)return;var e=0;c.$observe("minlength",function(a){e=E(a)||0;d.$validate()});d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}};if(a.angular.bootstrap){console.log("WARNING: Tried to load angular more than once.");return}Ea();Va(t);m(b).ready(function(){wa(b,xa)})})(window,document);!window.angular.$$csp()&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>');(function(a,b,c){"use strict";b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var a="$$ngAnimateChildren";return function(c,d,e){var f=e.ngAnimateChildren;if(b.isString(f)&&f.length===0){d.data(a,true)}else{c.$watch(f,function(b){d.data(a,!!b)})}}}).factory("$$animateReflow",["$$rAF","$document",function(a,b){var c=b[0].body;return function(b){return a(function(){b(c.offsetWidth)})}}]).config(["$provide","$animateProvider",function(d,e){var f=b.noop;var g=b.forEach;var h=e.$$selectors;var i=b.isArray;var j=b.isString;var k=b.isObject;var l=1;var m="$$ngAnimateState";var n="$$ngAnimateChildren";var o="ng-animate";var p={running:true};function q(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==l){return c}}}function r(a){return a&&b.element(a)}function s(a){return b.element(q(a))}function t(a,b){return q(a)==q(b)}var u;d.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(a,c,d,l,v,w,x,y,z,A){u=A;v.data(m,p);var B=x.$watch(function(){return z.totalPendingRequests},function(a,b){if(a!==0)return;B();x.$$postDigest(function(){x.$$postDigest(function(){p.running=false})})});var C=0;var D=e.classNameFilter();var E=!D?function(){return true}:function(a){return D.test(a)};function F(a,b){var c=a.data(m)||{};if(b){c.running=true;c.structural=true;a.data(m,c)}return c.disabled||c.running&&c.structural}function G(a){var b,d=c.defer();d.promise.$$cancelFn=function(){b&&b()};x.$$postDigest(function(){b=a(function(){d.resolve()})});return d.promise}function H(a){if(k(a)){if(a.tempClasses&&j(a.tempClasses)){a.tempClasses=a.tempClasses.split(/\s+/)}return a}}function I(a,b,c){c=c||{};var d={};g(c,function(a,b){g(b.split(" "),function(b){d[b]=a})});var e=Object.create(null);g((a.attr("class")||"").split(/\s+/),function(a){e[a]=true});var f=[],h=[];g(b&&b.classes||[],function(a,b){var c=e[b];var g=d[b]||{};if(a===false){if(c||g.event=="addClass"){h.push(b)}}else if(a===true){if(!c||g.event=="removeClass"){f.push(b)}}});return f.length+h.length>0&&[f.join(" "),h.join(" ")]}function J(a){if(a){var b=[],c={},e=a.substr(1).split(".");if(l.transitions||l.animations){b.push(d.get(h[""]))}for(var f=0;f<e.length;f++){var g=e[f],i=h[g];if(i&&!c[g]){b.push(d.get(i));c[g]=true}}return b}}function K(a,c,d,e){var h=a[0];if(!h){return}if(e){e.to=e.to||{};e.from=e.from||{}}var j;var k;if(i(d)){j=d[0];k=d[1];if(!j){d=k;c="removeClass"}else if(!k){d=j;c="addClass"}else{d=j+" "+k}}var l=c=="setClass";var m=l||c=="addClass"||c=="removeClass"||c=="animate";var n=a.attr("class");var o=n+" "+d;if(!E(o)){return}var p=f,q=[],r=[],s=f,t=[],u=[];var v=(" "+o).replace(/\s+/g,".");g(J(v),function(a){var b=w(a,c);if(!b&&l){w(a,"addClass");w(a,"removeClass")}});function w(a,b){var c=a[b];var d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];if(c||d){if(b=="leave"){d=c;c=null}u.push({event:b,fn:c});r.push({event:b,fn:d});return true}}function x(b,c,h){var i=[];g(b,function(a){a.fn&&i.push(a)});var l=0;function m(a){if(c){(c[a]||f)();if(++l<i.length)return;c=null}h()}g(i,function(b,f){var g=function(){m(f)};switch(b.event){case"setClass":c.push(b.fn(a,j,k,g,e));break;case"animate":c.push(b.fn(a,d,e.from,e.to,g));break;case"addClass":c.push(b.fn(a,j||d,g,e));break;case"removeClass":c.push(b.fn(a,k||d,g,e));break;default:c.push(b.fn(a,g,e));break}});if(c&&c.length===0){h()}}return{node:h,event:c,className:d,isClassBased:m,isSetClassOperation:l,applyStyles:function(){if(e){a.css(b.extend(e.from||{},e.to||{}))}},before:function(a){p=a;x(r,q,function(){p=f;a()})},after:function(a){s=a;x(u,t,function(){s=f;a()})},cancel:function(){if(q){g(q,function(a){(a||f)(true)});p(true)}if(t){g(t,function(a){(a||f)(true)});s(true)}}}}return{animate:function(a,b,c,d,e){d=d||"ng-inline-animate";e=H(e)||{};e.from=c?b:null;e.to=c?c:b;return G(function(b){return L("animate",d,s(a),null,null,f,e,b)})},enter:function(c,d,e,g){g=H(g);c=b.element(c);d=r(d);e=r(e);F(c,true);a.enter(c,d,e);return G(function(a){return L("enter","ng-enter",s(c),d,e,f,g,a)})},leave:function(c,d){d=H(d);c=b.element(c);M(c);F(c,true);return G(function(b){return L("leave","ng-leave",s(c),null,null,function(){a.leave(c)},d,b)})},move:function(c,d,e,g){g=H(g);c=b.element(c);d=r(d);e=r(e);M(c);F(c,true);a.move(c,d,e);return G(function(a){return L("move","ng-move",s(c),d,e,f,g,a)})},addClass:function(a,b,c){return this.setClass(a,b,[],c)},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},setClass:function(c,d,e,f){f=H(f);var h="$$animateClasses";c=b.element(c);c=s(c);if(F(c)){return a.$$setClassImmediately(c,d,e,f)}var j,k=c.data(h);var l=!!k;if(!k){k={};k.classes={}}j=k.classes;d=i(d)?d:d.split(" ");g(d,function(a){if(a&&a.length){j[a]=true}});e=i(e)?e:e.split(" ");g(e,function(a){if(a&&a.length){j[a]=false}});if(l){if(f&&k.options){k.options=b.extend(k.options||{},f)}return k.promise}else{c.data(h,k={classes:j,options:f})}return k.promise=G(function(b){var d,e,f,g=q(c);if(g){d=c.data(h);c.removeData(h);f=c.parent();e=g.parentNode}if(!e||e["$$NG_REMOVED"]||g["$$NG_REMOVED"]){b();return}var i=c.data(m)||{};var j=I(c,d,i.active);return!j?b():L("setClass",j,c,f,null,function(){if(j[0])a.$$addClassImmediately(c,j[0]);if(j[1])a.$$removeClassImmediately(c,j[1])},d.options,b)})},cancel:function(a){a.$$cancelFn()},enabled:function(a,b){switch(arguments.length){case 2:if(a){N(b)}else{var c=b.data(m)||{};c.disabled=true;b.data(m,c)}break;case 1:p.disabled=!a;break;default:a=!p.disabled;break}return!!a}};function L(a,c,d,e,h,i,j,k){var l=f;var n=K(d,a,c,j);if(!n){G();D();E();H();return l}a=n.event;c=n.className;var p=b.element._data(n.node);p=p&&p.events;if(!e){e=h?h.parent():d.parent()}if(O(d,e)){G();D();E();H();return l}var q=d.data(m)||{};var r=q.active||{};var s=q.totalActive||0;var t=q.last;var v=false;if(s>0){var x=[];if(!n.isClassBased){if(a=="leave"&&r["ng-leave"]){v=true}else{for(var y in r){x.push(r[y])}q={};N(d,true)}}else if(t.event=="setClass"){x.push(t);N(d,c)}else if(r[c]){var z=r[c];if(z.event==a){v=true}else{x.push(z);N(d,c)}}if(x.length>0){g(x,function(a){a.cancel()})}}if(n.isClassBased&&!n.isSetClassOperation&&a!="animate"&&!v){v=a=="addClass"==d.hasClass(c)}if(v){G();D();E();F();return l}r=q.active||{};s=q.totalActive||0;if(a=="leave"){d.one("$destroy",function(a){var c=b.element(this);var d=c.data(m);if(d){var e=d.active["ng-leave"];if(e){e.cancel();N(c,"ng-leave")}}})}u.addClass(d,o);if(j&&j.tempClasses){g(j.tempClasses,function(a){u.addClass(d,a)})}var A=C++;s++;r[c]=n;d.data(m,{last:n,active:r,index:A,totalActive:s});D();n.before(function(b){var e=d.data(m);b=b||!e||!e.active[c]||n.isClassBased&&e.active[c].event!=a;G();if(b===true){H()}else{E();n.after(H)}});return n.cancel;function B(b){var e="$animate:"+b;if(p&&p[e]&&p[e].length>0){w(function(){d.triggerHandler(e,{event:a,className:c})})}}function D(){B("before")}function E(){B("after")}function F(){B("close");k()}function G(){if(!G.hasBeenRun){G.hasBeenRun=true;i()}}function H(){if(!H.hasBeenRun){if(n){n.applyStyles()}H.hasBeenRun=true;if(j&&j.tempClasses){g(j.tempClasses,function(a){u.removeClass(d,a)})}var b=d.data(m);if(b){if(n&&n.isClassBased){N(d,c)}else{w(function(){var b=d.data(m)||{};if(A==b.index){N(d,c,a)}});d.data(m,b)}}F()}}}function M(a){var c=q(a);if(c){var d=b.isFunction(c.getElementsByClassName)?c.getElementsByClassName(o):c.querySelectorAll("."+o);g(d,function(a){a=b.element(a);var c=a.data(m);if(c&&c.active){g(c.active,function(a){a.cancel()})}})}}function N(a,b){if(t(a,v)){if(!p.disabled){p.running=false;p.structural=false}}else if(b){var c=a.data(m)||{};var d=b===true;if(!d&&c.active&&c.active[b]){c.totalActive--;delete c.active[b]}if(d||!c.totalActive){u.removeClass(a,o);a.removeData(m)}}}function O(a,c){if(p.disabled){return true}if(t(a,v)){return p.running}var d,e,f;do{if(c.length===0)break;var g=t(c,v);var h=g?p:c.data(m)||{};if(h.disabled){return true}if(g){f=true}if(d!==false){var i=c.data(n);if(b.isDefined(i)){d=i}}e=e||h.running||h.last&&!h.last.isClassBased}while(c=c.parent());return!f||!d&&e}}]);e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,h,k){var m="",n,o,p,r;if(a.ontransitionend===c&&a.onwebkittransitionend!==c){m="-webkit-";n="WebkitTransition";o="webkitTransitionEnd transitionend"}else{n="transition";o="transitionend"}if(a.onanimationend===c&&a.onwebkitanimationend!==c){m="-webkit-";p="WebkitAnimation";r="webkitAnimationEnd animationend"}else{p="animation";r="animationend"}var s="Duration";var t="Property";var v="Delay";var w="IterationCount";var x="PlayState";var y="$$ngAnimateKey";var z="$$ngAnimateCSS3Data";var A=3;var B=1.5;var C=1e3;var D={};var E=0;var F=[];var G;function H(){if(!G){G=k(function(){F=[];G=null;D={}})}}function I(a,b){if(G){G()}F.push(b);G=k(function(){g(F,function(a){a()});F=[];G=null;D={}})}var J=null;var K=0;var L=[];function M(a,c){var d=q(a);a=b.element(d);L.push(a);var e=Date.now()+c;if(e<=K){return}h.cancel(J);K=e;J=h(function(){N(L);L=[]},c,false)}function N(a){g(a,function(a){var b=a.data(z);if(b){g(b.closeAnimationFns,function(a){a()})}})}function O(a,b){var c=b?D[b]:null;if(!c){var e=0;var f=0;var h=0;var i=0;g(a,function(a){if(a.nodeType==l){var b=d.getComputedStyle(a)||{};var c=b[n+s];e=Math.max(P(c),e);var g=b[n+v];f=Math.max(P(g),f);var j=b[p+v];i=Math.max(P(b[p+v]),i);var k=P(b[p+s]);if(k>0){k*=parseInt(b[p+w],10)||1}h=Math.max(k,h)}});c={total:0,transitionDelay:f,transitionDuration:e,animationDelay:i,animationDuration:h};if(b){D[b]=c}}return c}function P(a){var b=0;var c=j(a)?a.split(/\s*,\s*/):[];g(c,function(a){b=Math.max(parseFloat(a)||0,b)});return b}function Q(a){var b=a.parent();var c=b.data(y);if(!c){b.data(y,++E);c=E}return c+"-"+q(a).getAttribute("class")}function R(a,b,c,d){var e=["ng-enter","ng-leave","ng-move"].indexOf(c)>=0;var f=Q(b);var g=f+" "+c;var h=D[g]?++D[g].total:0;var i={};if(h>0){var j=c+"-stagger";var k=f+" "+j;var l=!D[k];l&&u.addClass(b,j);i=O(b,k);l&&u.removeClass(b,j)}u.addClass(b,c);var m=b.data(z)||{};var n=O(b,g);var o=n.transitionDuration;var p=n.animationDuration;if(e&&o===0&&p===0){u.removeClass(b,c);return false}var r=d||e&&o>0;var s=p>0&&i.animationDelay>0&&i.animationDuration===0;var t=m.closeAnimationFns||[];b.data(z,{stagger:i,cacheKey:g,running:m.running||0,itemIndex:h,blockTransition:r,closeAnimationFns:t});var v=q(b);if(r){T(v,true);if(d){b.css(d)}}if(s){U(v,true)}return true}function S(a,b,c,d,e){var f=q(b);var i=b.data(z);if(f.getAttribute("class").indexOf(c)==-1||!i){d();return}var j="";var k="";g(c.split(" "),function(a,b){var c=(b>0?" ":"")+a;j+=c+"-active";k+=c+"-pending"});var l="";var n=[];var p=i.itemIndex;var s=i.stagger;var t=0;if(p>0){var v=0;if(s.transitionDelay>0&&s.transitionDuration===0){v=s.transitionDelay*p}var w=0;if(s.animationDelay>0&&s.animationDuration===0){w=s.animationDelay*p;n.push(m+"animation-play-state")}t=Math.round(Math.max(v,w)*100)/100}if(!t){u.addClass(b,j);if(i.blockTransition){T(f,false)}}var x=i.cacheKey+" "+j;var y=O(b,x);var D=Math.max(y.transitionDuration,y.animationDuration);if(D===0){u.removeClass(b,j);Y(b,c);d();return}if(!t&&e&&Object.keys(e).length>0){if(!y.transitionDuration){b.css("transition",y.animationDuration+"s linear all");n.push("transition")}b.css(e)}var E=Math.max(y.transitionDelay,y.animationDelay);var F=E*C;if(n.length>0){var G=f.getAttribute("style")||"";if(G.charAt(G.length-1)!==";"){G+=";"}f.setAttribute("style",G+" "+l)}var H=Date.now();var I=r+" "+o;var J=(E+D)*B;var K=(t+J)*C;var L;if(t>0){u.addClass(b,k);L=h(function(){L=null;if(y.transitionDuration>0){T(f,false)}if(y.animationDuration>0){U(f,false)}u.addClass(b,j);u.removeClass(b,k);if(e){if(y.transitionDuration===0){b.css("transition",y.animationDuration+"s linear all")}b.css(e);n.push("transition")}},t*C,false)}b.on(I,P);i.closeAnimationFns.push(function(){N();d()});i.running++;M(b,K);return N;function N(){b.off(I,P);u.removeClass(b,j);u.removeClass(b,k);if(L){h.cancel(L)}Y(b,c);var a=q(b);for(var d in n){a.style.removeProperty(n[d])}}function P(a){a.stopPropagation();var b=a.originalEvent||a;var c=b.$manualTimeStamp||b.timeStamp||Date.now();var e=parseFloat(b.elapsedTime.toFixed(A));if(Math.max(c-H,0)>=F&&e>=D){d()}}}function T(a,b){a.style[n+t]=b?"none":""}function U(a,b){a.style[p+x]=b?"paused":""}function V(a,b,c,d){if(R(a,b,c,d)){return function(a){a&&Y(b,c)}}}function W(a,b,c,d,e){if(b.data(z)){return S(a,b,c,d,e)}else{Y(b,c);d()}}function X(a,b,c,d,e){var g=V(a,b,c,e.from);if(!g){H();d();return}var h=g;I(b,function(){h=W(a,b,c,d,e.to)});return function(a){(h||f)(a)}}function Y(a,b){u.removeClass(a,b);var c=a.data(z);if(c){if(c.running){c.running--}if(!c.running||c.running===0){a.removeData(z)}}}return{animate:function(a,b,c,d,e,f){f=f||{};f.from=c;f.to=d;return X("animate",a,b,e,f)},enter:function(a,b,c){c=c||{};return X("enter",a,"ng-enter",b,c)},leave:function(a,b,c){c=c||{};return X("leave",a,"ng-leave",b,c)},move:function(a,b,c){c=c||{};return X("move",a,"ng-move",b,c)},beforeSetClass:function(a,b,c,d,e){e=e||{};var f=Z(c,"-remove")+" "+Z(b,"-add");var g=V("setClass",a,f,e.from);if(g){I(a,d);return g}H();d()},beforeAddClass:function(a,b,c,d){d=d||{};var e=V("addClass",a,Z(b,"-add"),d.from);if(e){I(a,c);return e}H();c()},beforeRemoveClass:function(a,b,c,d){d=d||{};var e=V("removeClass",a,Z(b,"-remove"),d.from);if(e){I(a,c);return e}H();c()},setClass:function(a,b,c,d,e){e=e||{};c=Z(c,"-remove");b=Z(b,"-add");var f=c+" "+b;return W("setClass",a,f,d,e.to)},addClass:function(a,b,c,d){d=d||{};return W("addClass",a,Z(b,"-add"),c,d.to)},removeClass:function(a,b,c,d){d=d||{};return W("removeClass",a,Z(b,"-remove"),c,d.to)}};function Z(a,b){var c="";a=i(a)?a:a.split(/\s+/);g(a,function(a,d){if(a&&a.length>0){c+=(d>0?" ":"")+a+b}});return c}}])}])})(window,window.angular);(function(a,b,c){"use strict";var d=b.module("ngAria",["ng"]).provider("$aria",e);function e(){var a={ariaHidden:true,ariaChecked:true,ariaDisabled:true,ariaRequired:true,ariaInvalid:true,ariaMultiline:true,ariaValue:true,tabindex:true,bindKeypress:true};this.config=function(c){a=b.extend(a,c)};function c(b,c,d){return function(e,f,g){var h=g.$normalize(c);if(a[h]&&!g[h]){e.$watch(g[b],function(a){if(d){a=!a}f.attr(c,a)})}}}this.$get=function(){return{config:function(b){return a[b]},$$watchExpr:c}}}d.directive("ngShow",["$aria",function(a){return a.$$watchExpr("ngShow","aria-hidden",true)}]).directive("ngHide",["$aria",function(a){return a.$$watchExpr("ngHide","aria-hidden",false)}]).directive("ngModel",["$aria",function(a){function b(b,c,d){return a.config(c)&&!d.attr(b)}function c(a,b){return!b.attr("role")&&b.attr("type")===a&&b[0].nodeName!=="INPUT"}function d(a,b){var c=a.type,d=a.role;return(c||d)==="checkbox"||d==="menuitemcheckbox"?"checkbox":(c||d)==="radio"||d==="menuitemradio"?"radio":c==="range"||d==="progressbar"||d==="slider"?"range":(c||d)==="textbox"||b[0].nodeName==="TEXTAREA"?"multiline":""}return{restrict:"A",require:"?ngModel",priority:200,compile:function(e,f){var g=d(f,e);return{pre:function(a,b,c,d){if(g==="checkbox"&&c.type!=="checkbox"){d.$isEmpty=function(a){return a===false}}},post:function(d,e,f,h){var i=b("tabindex","tabindex",e);function j(){return h.$modelValue}function k(){if(i){i=false;return function a(b){var c=f.value==h.$viewValue;e.attr("aria-checked",c);e.attr("tabindex",0-!c)}}else{return function a(b){e.attr("aria-checked",f.value==h.$viewValue)}}}function l(){e.attr("aria-checked",!h.$isEmpty(h.$viewValue))}switch(g){case"radio":case"checkbox":if(c(g,e)){e.attr("role",g)}if(b("aria-checked","ariaChecked",e)){d.$watch(j,g==="radio"?k():l)}break;case"range":if(c(g,e)){e.attr("role","slider")}if(a.config("ariaValue")){if(f.min&&!e.attr("aria-valuemin")){e.attr("aria-valuemin",f.min)}if(f.max&&!e.attr("aria-valuemax")){e.attr("aria-valuemax",f.max)}if(!e.attr("aria-valuenow")){d.$watch(j,function a(b){
e.attr("aria-valuenow",b)})}}break;case"multiline":if(b("aria-multiline","ariaMultiline",e)){e.attr("aria-multiline",true)}break}if(i){e.attr("tabindex",0)}if(h.$validators.required&&b("aria-required","ariaRequired",e)){d.$watch(function a(){return h.$error.required},function a(b){e.attr("aria-required",!!b)})}if(b("aria-invalid","ariaInvalid",e)){d.$watch(function a(){return h.$invalid},function a(b){e.attr("aria-invalid",!!b)})}}}}}}]).directive("ngDisabled",["$aria",function(a){return a.$$watchExpr("ngDisabled","aria-disabled")}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(a,b,c,d){if(!b.attr("aria-live")){b.attr("aria-live","assertive")}}}}).directive("ngClick",["$aria","$parse",function(a,b){return{restrict:"A",compile:function(c,d){var e=b(d.ngClick,null,true);return function(b,c,d){var f=["BUTTON","A","INPUT","TEXTAREA"];function g(a,b){if(b.indexOf(a[0].nodeName)!==-1){return true}}if(!c.attr("role")&&!g(c,f)){c.attr("role","button")}if(a.config("tabindex")&&!c.attr("tabindex")){c.attr("tabindex",0)}if(a.config("bindKeypress")&&!d.ngKeypress&&!g(c,f)){c.on("keypress",function(a){if(a.keyCode===32||a.keyCode===13){b.$apply(c)}function c(){e(b,{$event:a})}})}}}}}]).directive("ngDblclick",["$aria",function(a){return function(b,c,d){if(a.config("tabindex")&&!c.attr("tabindex")){c.attr("tabindex",0)}}}])})(window,window.angular);angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]);angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]);angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(a,b,c,d){var e=d.has("$animateCss")?d.get("$animateCss"):null;return{link:function(d,f,g){var h=c(g.expanding),i=c(g.expanded),j=c(g.collapsing),k=c(g.collapsed),l=false,m={},n={};o();function o(){l=!!("horizontal"in g);if(l){m={width:""};n={width:"0"}}else{m={height:""};n={height:"0"}}if(!d.$eval(g.uibCollapse)){f.addClass("in").addClass("collapse").attr("aria-expanded",true).attr("aria-hidden",false).css(m)}}function p(a){if(l){return{width:a.scrollWidth+"px"}}return{height:a.scrollHeight+"px"}}function q(){if(f.hasClass("collapse")&&f.hasClass("in")){return}b.resolve(h(d)).then(function(){f.removeClass("collapse").addClass("collapsing").attr("aria-expanded",true).attr("aria-hidden",false);if(e){e(f,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:p(f[0])}).start()["finally"](r)}else{a.addClass(f,"in",{css:{overflow:"hidden"},to:p(f[0])}).then(r)}})}function r(){f.removeClass("collapsing").addClass("collapse").css(m);i(d)}function s(){if(!f.hasClass("collapse")&&!f.hasClass("in")){return t()}b.resolve(j(d)).then(function(){f.css(p(f[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",false).attr("aria-hidden",true);if(e){e(f,{removeClass:"in",to:n}).start()["finally"](t)}else{a.removeClass(f,"in",{to:n}).then(t)}})}function t(){f.css(n);f.removeClass("collapsing").addClass("collapse");k(d)}d.$watch(g.uibCollapse,function(a){if(a){s()}else{q()}})}}}]);angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(a,b,c){c.$observe("disabled",function(a){c.$set("tabindex",a?-1:null)})}}});angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:true}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(a,b,c){this.groups=[];this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;if(e){angular.forEach(this.groups,function(a){if(a!==d){a.isOpen=false}})}};this.addGroup=function(a){var b=this;this.groups.push(a);a.$on("$destroy",function(c){b.removeGroup(a)})};this.removeGroup=function(a){var b=this.groups.indexOf(a);if(b!==-1){this.groups.splice(b,1)}}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:true,templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:true,restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){b.addClass("panel");d.addGroup(a);a.openClass=c.openClass||"panel-open";a.panelClass=c.panelClass||"panel-default";a.$watch("isOpen",function(c){b.toggleClass(a.openClass,!!c);if(c){d.closeOthers(a)}});a.toggleOpen=function(b){if(!a.isDisabled){if(!b||b.which===32){a.isOpen=!a.isOpen}}};var e="accordiongroup-"+a.$id+"-"+Math.floor(Math.random()*1e4);a.headingId=e+"-tab";a.panelId=e+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:true,template:"",replace:true,require:"^uibAccordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(b,c,d,e){b.$watch(function(){return e[d.uibAccordionTransclude]},function(b){if(b){var d=angular.element(c[0].querySelector(a()));d.html("");d.append(b)}})}};function a(){return"uib-accordion-header,"+"data-uib-accordion-header,"+"x-uib-accordion-header,"+"uib\\:accordion-header,"+"[uib-accordion-header],"+"[data-uib-accordion-header],"+"[x-uib-accordion-header]"}});angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function(a,b,c,d,e){a.closeable=!!c.close;b.addClass("alert");c.$set("role","alert");if(a.closeable){b.addClass("alert-dismissible")}var f=angular.isDefined(c.dismissOnTimeout)?d(c.dismissOnTimeout)(a.$parent):null;if(f){e(function(){a.close()},parseInt(f,10))}}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/alert/alert.html"},transclude:true,scope:{close:"&"}}});angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(a){this.activeClass=a.activeClass||"active";this.toggleEvent=a.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(a){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(b,c,d,e){var f=e[0],g=e[1];var h=a(d.uibUncheckable);c.find("input").css({display:"none"});g.$render=function(){c.toggleClass(f.activeClass,angular.equals(g.$modelValue,b.$eval(d.uibBtnRadio)))};c.on(f.toggleEvent,function(){if(d.disabled){return}var a=c.hasClass(f.activeClass);if(!a||angular.isDefined(d.uncheckable)){b.$apply(function(){g.$setViewValue(a?null:b.$eval(d.uibBtnRadio));g.$render()})}});if(d.uibUncheckable){b.$watch(h,function(a){d.$set("uncheckable",a?"":undefined)})}}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(a,b,c,d){var e=d[0],f=d[1];b.find("input").css({display:"none"});function g(){return i(c.btnCheckboxTrue,true)}function h(){return i(c.btnCheckboxFalse,false)}function i(b,c){return angular.isDefined(b)?a.$eval(b):c}f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,g()))};b.on(e.toggleEvent,function(){if(c.disabled){return}a.$apply(function(){f.$setViewValue(b.hasClass(e.activeClass)?h():g());f.$render()})})}}});angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(a,b,c,d,e){var f=this,g=f.slides=a.slides=[],h="uib-slideDirection",i=a.active,j,k,l=[];var m=false;b.addClass("carousel");f.addSlide=function(b,c){g.push({slide:b,element:c});g.sort(function(a,b){return+a.slide.index-+b.slide.index});if(b.index===a.active||g.length===1&&!angular.isNumber(a.active)){if(a.$currentTransition){a.$currentTransition=null}i=b.index;a.active=b.index;p(i);f.select(g[r(b)]);if(g.length===1){a.play()}}};f.getCurrentIndex=function(){for(var a=0;a<g.length;a++){if(g[a].slide.index===i){return a}}};f.next=a.next=function(){var b=(f.getCurrentIndex()+1)%g.length;if(b===0&&a.noWrap()){a.pause();return}return f.select(g[b],"next")};f.prev=a.prev=function(){var b=f.getCurrentIndex()-1<0?g.length-1:f.getCurrentIndex()-1;if(a.noWrap()&&b===g.length-1){a.pause();return}return f.select(g[b],"prev")};f.removeSlide=function(b){var c=r(b);var d=l.indexOf(g[c]);if(d!==-1){l.splice(d,1)}g.splice(c,1);if(g.length>0&&i===c){if(c>=g.length){i=g.length-1;a.active=i;p(i);f.select(g[g.length-1])}else{i=c;a.active=i;p(i);f.select(g[c])}}else if(i>c){i--;a.active=i}if(g.length===0){i=null;a.active=null;n()}};f.select=a.select=function(b,c){var d=r(b.slide);if(c===undefined){c=d>f.getCurrentIndex()?"next":"prev"}if(b.slide.index!==i&&!a.$currentTransition){q(b.slide,d,c)}else if(b&&b.slide.index!==i&&a.$currentTransition){l.push(g[d])}};a.indexOfSlide=function(a){return+a.slide.index};a.isActive=function(b){return a.active===b.slide.index};a.isPrevDisabled=function(){return a.active===0&&a.noWrap()};a.isNextDisabled=function(){return a.active===g.length-1&&a.noWrap()};a.pause=function(){if(!a.noPause){k=false;s()}};a.play=function(){if(!k){k=true;u()}};b.on("mouseenter",a.pause);b.on("mouseleave",a.play);a.$on("$destroy",function(){m=true;s()});a.$watch("noTransition",function(a){e.enabled(b,!a)});a.$watch("interval",u);a.$watchCollection("slides",t);a.$watch("active",function(a){if(angular.isNumber(a)&&i!==a){for(var b=0;b<g.length;b++){if(g[b].slide.index===a){a=b;break}}var c=g[a];if(c){p(a);f.select(g[a]);i=a}}});function n(){while(l.length){l.shift()}}function o(a){for(var b=0,c=g.length;b<c;++b){if(g[b].index===a){return g[b]}}}function p(a){for(var b=0;b<g.length;b++){g[b].slide.active=b===a}}function q(c,d,j){if(m){return}angular.extend(c,{direction:j});angular.extend(g[i].slide||{},{direction:j});if(e.enabled(b)&&!a.$currentTransition&&g[d].element&&f.slides.length>1){g[d].element.data(h,c.direction);var k=f.getCurrentIndex();if(angular.isNumber(k)&&g[k].element){g[k].element.data(h,c.direction)}a.$currentTransition=true;e.on("addClass",g[d].element,function(b,c){if(c==="close"){a.$currentTransition=null;e.off("addClass",b);if(l.length){var d=l.pop().slide;var g=d.index;var h=g>f.getCurrentIndex()?"next":"prev";n();q(d,g,h)}}})}a.active=c.index;i=c.index;p(d);u()}function r(a){for(var b=0;b<g.length;b++){if(g[b].slide===a){return b}}}function s(){if(j){c.cancel(j);j=null}}function t(b){if(!b.length){a.$currentTransition=null;n()}}function u(){s();var b=+a.interval;if(!isNaN(b)&&b>0){j=c(v,b)}}function v(){var b=+a.interval;if(k&&!isNaN(b)&&b>0&&g.length){a.next()}else{a.pause()}}}]).directive("uibCarousel",function(){return{transclude:true,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function(a){return{require:"^uibCarousel",restrict:"A",transclude:true,templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(b,c,d,e){c.addClass("item");e.addSlide(b,c);b.$on("$destroy",function(){e.removeSlide(b)});b.$watch("active",function(b){a[b?"addClass":"removeClass"](c,"active")})}}}]).animation(".item",["$animateCss",function(a){var b="uib-slideDirection";function c(a,b,c){a.removeClass(b);if(c){c()}}return{beforeAddClass:function(d,e,f){if(e==="active"){var g=false;var h=d.data(b);var i=h==="next"?"left":"right";var j=c.bind(this,d,i+" "+h,f);d.addClass(h);a(d,{addClass:i}).start().done(j);return function(){g=true}}f()},beforeRemoveClass:function(d,e,f){if(e==="active"){var g=false;var h=d.data(b);var i=h==="next"?"left":"right";var j=c.bind(this,d,i,f);a(d,{addClass:i}).start().done(j);return function(){g=true}}f()}}}]);angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter",function(a,b,c,d){var e=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var f;var g;this.init=function(){f=b.id;this.parsers={};this.formatters={};g=[{key:"yyyy",regex:"\\d{4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;b.setFullYear(Math.abs(a.getFullYear()));return c(b,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(a){a=+a;this.year=a<69?a+2e3:a+1900},formatter:function(a){var b=new Date;b.setFullYear(Math.abs(a.getFullYear()));return c(b,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;b.setFullYear(Math.abs(a.getFullYear()));return c(b,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){var b=a.getMonth();if(/^[0-9]$/.test(b)){return c(a,"MM")}return c(a,"M")}},{key:"MMMM",regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)},formatter:function(a){return c(a,"MMMM")}},{key:"MMM",regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)},formatter:function(a){return c(a,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){var b=a.getDate();if(/^[1-9]$/.test(b)){return c(a,"dd")}return c(a,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"d")}},{key:"EEEE",regex:b.DATETIME_FORMATS.DAY.join("|"),formatter:function(a){return c(a,"EEEE")}},{key:"EEE",regex:b.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(a){return c(a,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a},formatter:function(a){return c(a,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"s")}},{key:"a",regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){if(this.hours===12){this.hours=0}if(a==="PM"){this.hours+=12}},formatter:function(a){return c(a,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(a){var b=a.match(/([+-])(\d{2})(\d{2})/),c=b[1],d=b[2],e=b[3];this.hours+=m(c+d);this.minutes+=m(c+e)},formatter:function(a){return c(a,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(a){return c(a,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(a){return c(a,"w")}},{key:"GGGG",regex:b.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(a){return c(a,"GGGG")}},{key:"GGG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GGG")}},{key:"GG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GG")}},{key:"G",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"G")}}]};this.init();function h(a){var b=[],c=a.split("");var e=a.indexOf("'");if(e>-1){var f=false;a=a.split("");for(var h=e;h<a.length;h++){if(f){if(a[h]==="'"){if(h+1<a.length&&a[h+1]==="'"){a[h+1]="$";c[h+1]=""}else{c[h]="";f=false}}a[h]="$"}else{if(a[h]==="'"){a[h]="$";c[h]="";f=true}}}a=a.join("")}angular.forEach(g,function(d){var e=a.indexOf(d.key);if(e>-1){a=a.split("");c[e]="("+d.regex+")";a[e]="$";for(var f=e+1,g=e+d.key.length;f<g;f++){c[f]="";a[f]="$"}a=a.join("");b.push({index:e,key:d.key,apply:d.apply,matcher:d.regex})}});return{regex:new RegExp("^"+c.join("")+"$"),map:d(b,"index")}}function i(a){var b=[];var c=0;var d,e;while(c<a.length){if(angular.isNumber(e)){if(a.charAt(c)==="'"){if(c+1>=a.length||a.charAt(c+1)!=="'"){b.push(j(a,e,c));e=null}}else if(c===a.length){while(e<a.length){d=k(a,e);b.push(d);e=d.endIdx}}c++;continue}if(a.charAt(c)==="'"){e=c;c++;continue}d=k(a,c);b.push(d.parser);c=d.endIdx}return b}function j(a,b,c){return function(){return a.substr(b+1,c-b-1)}}function k(a,b){var c=a.substr(b);for(var d=0;d<g.length;d++){if(new RegExp("^"+g[d].key).test(c)){var e=g[d];return{endIdx:b+e.key.length,parser:e.formatter}}}return{endIdx:b+1,parser:function(){return c.charAt(0)}}}this.filter=function(a,c){if(!angular.isDate(a)||isNaN(a)||!c){return""}c=b.DATETIME_FORMATS[c]||c;if(b.id!==f){this.init()}if(!this.formatters[c]){this.formatters[c]=i(c)}var d=this.formatters[c];return d.reduce(function(b,c){return b+c(a)},"")};this.parse=function(c,d,g){if(!angular.isString(c)||!d){return c}d=b.DATETIME_FORMATS[d]||d;d=d.replace(e,"\\$&");if(b.id!==f){this.init()}if(!this.parsers[d]){this.parsers[d]=h(d,"apply")}var i=this.parsers[d],j=i.regex,k=i.map,m=c.match(j),n=false;if(m&&m.length){var o,p;if(angular.isDate(g)&&!isNaN(g.getTime())){o={year:g.getFullYear(),month:g.getMonth(),date:g.getDate(),hours:g.getHours(),minutes:g.getMinutes(),seconds:g.getSeconds(),milliseconds:g.getMilliseconds()}}else{if(g){a.warn("dateparser:","baseDate is not a valid date")}o={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0}}for(var q=1,r=m.length;q<r;q++){var s=k[q-1];if(s.matcher==="Z"){n=true}if(s.apply){s.apply.call(o,m[q])}}var t=n?Date.prototype.setUTCFullYear:Date.prototype.setFullYear;var u=n?Date.prototype.setUTCHours:Date.prototype.setHours;if(l(o.year,o.month,o.date)){if(angular.isDate(g)&&!isNaN(g.getTime())&&!n){p=new Date(g);t.call(p,o.year,o.month,o.date);u.call(p,o.hours,o.minutes,o.seconds,o.milliseconds)}else{p=new Date(0);t.call(p,o.year,o.month,o.date);u.call(p,o.hours||0,o.minutes||0,o.seconds||0,o.milliseconds||0)}}return p}};function l(a,b,c){if(c<1){return false}if(b===1&&c>28){return c===29&&(a%4===0&&a%100!==0||a%400===0)}if(b===3||b===5||b===8||b===10){return c<31}return true}function m(a){return parseInt(a,10)}this.toTimezone=n;this.fromTimezone=o;this.timezoneToOffset=p;this.addDateMinutes=q;this.convertTimezoneToLocal=r;function n(a,b){return a&&b?r(a,b):a}function o(a,b){return a&&b?r(a,b,true):a}function p(a,b){a=a.replace(/:/g,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function q(a,b){a=new Date(a.getTime());a.setMinutes(a.getMinutes()+b);return a}function r(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset();var e=p(b,d);return q(a,c*(e-d))}}]);angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(a){var b=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/;var c=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;var d={};return{restrict:"A",compile:function(d,e){var f=[];var g=[];var h={};var i=null;var j=e.uibIsClass.match(b);var k=j[2];var l=j[1];var m=l.split(",");return n;function n(a,b,c){f.push(a);g.push({scope:a,element:b});m.forEach(function(b,c){o(b,a)});a.$on("$destroy",p)}function o(b,d){var e=b.match(c);var f=d.$eval(e[1]);var i=e[2];var j=h[b];if(!j){var l=function(b){var c=null;g.some(function(a){var d=a.scope.$eval(k);if(d===b){c=a;return true}});if(j.lastActivated!==c){if(j.lastActivated){a.removeClass(j.lastActivated.element,f)}if(c){a.addClass(c.element,f)}j.lastActivated=c}};h[b]=j={lastActivated:null,scope:d,watchFn:l,compareWithExp:i,watcher:d.$watch(i,l)}}j.watchFn(d.$eval(i))}function p(a){var b=a.targetScope;var c=f.indexOf(b);f.splice(c,1);g.splice(c,1);if(f.length){var d=f[0];angular.forEach(h,function(a){if(a.scope===b){a.watcher=d.$watch(a.compareWithExp,a.watchFn);a.scope=d}})}else{h={}}}}}}]);angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",false).value("$datepickerLiteralWarning",true).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:false,showWeeks:true,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(a,b,c,d,e,f,g,h,i,j,k,l){var m=this,n={$setViewValue:angular.noop},o={},p=[];b.addClass("uib-datepicker");c.$set("role","application");if(!a.datepickerOptions){a.datepickerOptions={}}this.modes=["day","month","year"];["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(b){switch(b){case"customClass":case"dateDisabled":a[b]=a.datepickerOptions[b]||angular.noop;break;case"datepickerMode":a.datepickerMode=angular.isDefined(a.datepickerOptions.datepickerMode)?a.datepickerOptions.datepickerMode:i.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":m[b]=angular.isDefined(a.datepickerOptions[b])?e(a.datepickerOptions[b])(a.$parent):i[b];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":m[b]=angular.isDefined(a.datepickerOptions[b])?a.datepickerOptions[b]:i[b];break;case"startingDay":if(angular.isDefined(a.datepickerOptions.startingDay)){m.startingDay=a.datepickerOptions.startingDay}else if(angular.isNumber(i.startingDay)){m.startingDay=i.startingDay}else{m.startingDay=(f.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7}break;case"maxDate":case"minDate":a.$watch("datepickerOptions."+b,function(a){if(a){if(angular.isDate(a)){m[b]=l.fromTimezone(new Date(a),o.timezone)}else{if(j){g.warn("Literal date support has been deprecated, please switch to date object usage")}m[b]=new Date(h(a,"medium"))}}else{m[b]=i[b]?l.fromTimezone(new Date(i[b]),o.timezone):null}m.refreshView()});break;case"maxMode":case"minMode":if(a.datepickerOptions[b]){a.$watch(function(){return a.datepickerOptions[b]},function(c){m[b]=a[b]=angular.isDefined(c)?c:a.datepickerOptions[b];if(b==="minMode"&&m.modes.indexOf(a.datepickerOptions.datepickerMode)<m.modes.indexOf(m[b])||b==="maxMode"&&m.modes.indexOf(a.datepickerOptions.datepickerMode)>m.modes.indexOf(m[b])){a.datepickerMode=m[b];a.datepickerOptions.datepickerMode=m[b]}})}else{m[b]=a[b]=i[b]||null}break}});a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(Math.random()*1e4);a.disabled=angular.isDefined(c.disabled)||false;if(angular.isDefined(c.ngDisabled)){p.push(a.$parent.$watch(c.ngDisabled,function(b){a.disabled=b;m.refreshView()}))}a.isActive=function(b){if(m.compare(b.date,m.activeDate)===0){a.activeDateId=b.uid;return true}return false};this.init=function(b){n=b;o=b.$options||a.datepickerOptions.ngModelOptions||i.ngModelOptions;if(a.datepickerOptions.initDate){m.activeDate=l.fromTimezone(a.datepickerOptions.initDate,o.timezone)||new Date;a.$watch("datepickerOptions.initDate",function(a){if(a&&(n.$isEmpty(n.$modelValue)||n.$invalid)){m.activeDate=l.fromTimezone(a,o.timezone);m.refreshView()}})}else{m.activeDate=new Date}var c=n.$modelValue?new Date(n.$modelValue):new Date;this.activeDate=!isNaN(c)?l.fromTimezone(c,o.timezone):l.fromTimezone(new Date,o.timezone);n.$render=function(){m.render()}};this.render=function(){if(n.$viewValue){var a=new Date(n.$viewValue),b=!isNaN(a);if(b){this.activeDate=l.fromTimezone(a,o.timezone)}else if(!k){g.error('Datepicker directive: "ng-model" value must be a Date object')}}this.refreshView()};this.refreshView=function(){if(this.element){a.selectedDt=null;this._refreshView();if(a.activeDt){a.activeDateId=a.activeDt.uid}var b=n.$viewValue?new Date(n.$viewValue):null;b=l.fromTimezone(b,o.timezone);n.$setValidity("dateDisabled",!b||this.element&&!this.isDisabled(b))}};this.createDateObject=function(b,c){var d=n.$viewValue?new Date(n.$viewValue):null;d=l.fromTimezone(d,o.timezone);var e=new Date;e=l.fromTimezone(e,o.timezone);var f=this.compare(b,e);var g={date:b,label:l.filter(b,c),selected:d&&this.compare(b,d)===0,disabled:this.isDisabled(b),past:f<0,current:f===0,future:f>0,customClass:this.customClass(b)||null};if(d&&this.compare(b,d)===0){a.selectedDt=g}if(m.activeDate&&this.compare(g.date,m.activeDate)===0){a.activeDt=g}return g};this.isDisabled=function(b){return a.disabled||this.minDate&&this.compare(b,this.minDate)<0||this.maxDate&&this.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:a.datepickerMode})};this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})};this.split=function(a,b){var c=[];while(a.length>0){c.push(a.splice(0,b))}return c};a.select=function(b){if(a.datepickerMode===m.minMode){var c=n.$viewValue?l.fromTimezone(new Date(n.$viewValue),o.timezone):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());c=l.toTimezone(c,o.timezone);n.$setViewValue(c);n.$render()}else{m.activeDate=b;r(m.modes[m.modes.indexOf(a.datepickerMode)-1]);a.$emit("uib:datepicker.mode")}a.$broadcast("uib:datepicker.focus")};a.move=function(a){var b=m.activeDate.getFullYear()+a*(m.step.years||0),c=m.activeDate.getMonth()+a*(m.step.months||0);m.activeDate.setFullYear(b,c,1);m.refreshView()};a.toggleMode=function(b){b=b||1;if(a.datepickerMode===m.maxMode&&b===1||a.datepickerMode===m.minMode&&b===-1){return}r(m.modes[m.modes.indexOf(a.datepickerMode)+b]);a.$emit("uib:datepicker.mode")};a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var q=function(){m.element[0].focus()};a.$on("uib:datepicker.focus",q);a.keydown=function(b){var c=a.keys[b.which];if(!c||b.shiftKey||b.altKey||a.disabled){return}b.preventDefault();if(!m.shortcutPropagation){b.stopPropagation()}if(c==="enter"||c==="space"){if(m.isDisabled(m.activeDate)){return}a.select(m.activeDate)}else if(b.ctrlKey&&(c==="up"||c==="down")){a.toggleMode(c==="up"?1:-1)}else{m.handleKeyDown(c,b);m.refreshView()}};b.on("keydown",function(b){a.$apply(function(){a.keydown(b)})});a.$on("$destroy",function(){while(p.length){p.shift()()}});function r(b){a.datepickerMode=b;a.datepickerOptions.datepickerMode=b}}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(a,b,c){var d=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1};this.element=b;function e(a,b){return b===1&&a%4===0&&(a%100!==0||a%400===0)?29:d[b]}this.init=function(b){angular.extend(b,this);a.showWeeks=b.showWeeks;b.refreshView()};this.getDates=function(a,b){var c=new Array(b),d=new Date(a),e=0,f;while(e<b){f=new Date(d);c[e++]=f;d.setDate(d.getDate()+1)}return c};this._refreshView=function(){var b=this.activeDate.getFullYear(),d=this.activeDate.getMonth(),e=new Date(this.activeDate);e.setFullYear(b,d,1);var g=this.startingDay-e.getDay(),h=g>0?7-g:-g,i=new Date(e);if(h>0){i.setDate(-h+1)}var j=this.getDates(i,42);for(var k=0;k<42;k++){j[k]=angular.extend(this.createDateObject(j[k],this.formatDay),{secondary:j[k].getMonth()!==d,uid:a.uniqueId+"-"+k})}a.labels=new Array(7);for(var l=0;l<7;l++){a.labels[l]={abbr:c(j[l].date,this.formatDayHeader),full:c(j[l].date,"EEEE")}}a.title=c(this.activeDate,this.formatDayTitle);a.rows=this.split(j,7);if(a.showWeeks){a.weekNumbers=[];var m=(4+7-this.startingDay)%7,n=a.rows.length;for(var o=0;o<n;o++){a.weekNumbers.push(f(a.rows[o][m].date))}}};this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate());var d=new Date(b.getFullYear(),b.getMonth(),b.getDate());c.setFullYear(a.getFullYear());d.setFullYear(b.getFullYear());return c-d};function f(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((c-b)/864e5)/7)+1}this.handleKeyDown=function(a,b){var c=this.activeDate.getDate();if(a==="left"){c=c-1}else if(a==="up"){c=c-7}else if(a==="right"){c=c+1}else if(a==="down"){c=c+7}else if(a==="pageup"||a==="pagedown"){var d=this.activeDate.getMonth()+(a==="pageup"?-1:1);this.activeDate.setMonth(d,1);c=Math.min(e(this.activeDate.getFullYear(),this.activeDate.getMonth()),c)}else if(a==="home"){c=1}else if(a==="end"){c=e(this.activeDate.getFullYear(),this.activeDate.getMonth())}this.activeDate.setDate(c)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(a,b,c){this.step={years:1};this.element=b;this.init=function(a){angular.extend(a,this);a.refreshView()};this._refreshView=function(){var b=new Array(12),d=this.activeDate.getFullYear(),e;for(var f=0;f<12;f++){e=new Date(this.activeDate);e.setFullYear(d,f,1);b[f]=angular.extend(this.createDateObject(e,this.formatMonth),{uid:a.uniqueId+"-"+f})}a.title=c(this.activeDate,this.formatMonthTitle);a.rows=this.split(b,this.monthColumns);a.yearHeaderColspan=this.monthColumns>3?this.monthColumns-2:1};this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth());var d=new Date(b.getFullYear(),b.getMonth());c.setFullYear(a.getFullYear());d.setFullYear(b.getFullYear());return c-d};this.handleKeyDown=function(a,b){var c=this.activeDate.getMonth();if(a==="left"){c=c-1}else if(a==="up"){c=c-this.monthColumns}else if(a==="right"){c=c+1}else if(a==="down"){c=c+this.monthColumns}else if(a==="pageup"||a==="pagedown"){var d=this.activeDate.getFullYear()+(a==="pageup"?-1:1);this.activeDate.setFullYear(d)}else if(a==="home"){c=0
}else if(a==="end"){c=11}this.activeDate.setMonth(c)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(a,b,c){var d,e;this.element=b;function f(a){return parseInt((a-1)/e,10)*e+1}this.yearpickerInit=function(){d=this.yearColumns;e=this.yearRows*d;this.step={years:e}};this._refreshView=function(){var b=new Array(e),c;for(var g=0,h=f(this.activeDate.getFullYear());g<e;g++){c=new Date(this.activeDate);c.setFullYear(h+g,0,1);b[g]=angular.extend(this.createDateObject(c,this.formatYear),{uid:a.uniqueId+"-"+g})}a.title=[b[0].label,b[e-1].label].join(" - ");a.rows=this.split(b,d);a.columns=d};this.compare=function(a,b){return a.getFullYear()-b.getFullYear()};this.handleKeyDown=function(a,b){var c=this.activeDate.getFullYear();if(a==="left"){c=c-1}else if(a==="up"){c=c-d}else if(a==="right"){c=c+1}else if(a==="down"){c=c+d}else if(a==="pageup"||a==="pagedown"){c+=(a==="pageup"?-1:1)*e}else if(a==="home"){c=f(this.activeDate.getFullYear())}else if(a==="end"){c=f(this.activeDate.getFullYear())+e-1}this.activeDate.setFullYear(c)}}]).directive("uibDatepicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("uibDaypicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibYearpicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(a,b,c,d){var e=d[0];angular.extend(e,d[1]);e.yearpickerInit();e.refreshView()}}});angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){var c;var d;var e={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/};var f={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/};var g=/(HTML|BODY)/;return{getRawNode:function(a){return a.nodeName?a:a[0]||a},parseStyle:function(a){a=parseFloat(a);return isFinite(a)?a:0},offsetParent:function(c){c=this.getRawNode(c);var d=c.offsetParent||a[0].documentElement;function e(a){return(b.getComputedStyle(a).position||"static")==="static"}while(d&&d!==a[0].documentElement&&e(d)){d=d.offsetParent}return d||a[0].documentElement},scrollbarWidth:function(e){if(e){if(angular.isUndefined(d)){var f=a.find("body");f.addClass("uib-position-body-scrollbar-measure");d=b.innerWidth-f[0].clientWidth;d=isFinite(d)?d:0;f.removeClass("uib-position-body-scrollbar-measure")}return d}if(angular.isUndefined(c)){var g=angular.element('<div class="uib-position-scrollbar-measure"></div>');a.find("body").append(g);c=g[0].offsetWidth-g[0].clientWidth;c=isFinite(c)?c:0;g.remove()}return c},scrollbarPadding:function(a){a=this.getRawNode(a);var c=b.getComputedStyle(a);var d=this.parseStyle(c.paddingRight);var e=this.parseStyle(c.paddingBottom);var f=this.scrollParent(a,false,true);var h=this.scrollbarWidth(g.test(f.tagName));return{scrollbarWidth:h,widthOverflow:f.scrollWidth>f.clientWidth,right:d+h,originalRight:d,heightOverflow:f.scrollHeight>f.clientHeight,bottom:e+h,originalBottom:e}},isScrollable:function(a,c){a=this.getRawNode(a);var d=c?e.hidden:e.normal;var f=b.getComputedStyle(a);return d.test(f.overflow+f.overflowY+f.overflowX)},scrollParent:function(c,d,f){c=this.getRawNode(c);var g=d?e.hidden:e.normal;var h=a[0].documentElement;var i=b.getComputedStyle(c);if(f&&g.test(i.overflow+i.overflowY+i.overflowX)){return c}var j=i.position==="absolute";var k=c.parentElement||h;if(k===h||i.position==="fixed"){return h}while(k.parentElement&&k!==h){var l=b.getComputedStyle(k);if(j&&l.position!=="static"){j=false}if(!j&&g.test(l.overflow+l.overflowY+l.overflowX)){break}k=k.parentElement}return k},position:function(c,d){c=this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop);e.left-=this.parseStyle(f.marginLeft)}var g=this.offsetParent(c);var h={top:0,left:0};if(g!==a[0].documentElement){h=this.offset(g);h.top+=g.clientTop-g.scrollTop;h.left+=g.clientLeft-g.scrollLeft}return{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-h.top),left:Math.round(e.left-h.left)}},offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c);e=e!==false?true:false;var f=c.getBoundingClientRect();var g={top:0,left:0,bottom:0,right:0};var h=d?a[0].documentElement:this.scrollParent(c);var i=h.getBoundingClientRect();g.top=i.top+h.clientTop;g.left=i.left+h.clientLeft;if(h===a[0].documentElement){g.top+=b.pageYOffset;g.left+=b.pageXOffset}g.bottom=g.top+h.clientHeight;g.right=g.left+h.clientWidth;if(e){var j=b.getComputedStyle(h);g.top+=this.parseStyle(j.paddingTop);g.bottom-=this.parseStyle(j.paddingBottom);g.left+=this.parseStyle(j.paddingLeft);g.right-=this.parseStyle(j.paddingRight)}return{top:Math.round(f.top-g.top),bottom:Math.round(g.bottom-f.bottom),left:Math.round(f.left-g.left),right:Math.round(g.right-f.right)}},parsePlacement:function(a){var b=f.auto.test(a);if(b){a=a.replace(f.auto,"")}a=a.split("-");a[0]=a[0]||"top";if(!f.primary.test(a[0])){a[0]="top"}a[1]=a[1]||"center";if(!f.secondary.test(a[1])){a[1]="center"}if(b){a[2]=true}else{a[2]=false}return a},positionElements:function(a,c,d,e){a=this.getRawNode(a);c=this.getRawNode(c);var g=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth");var h=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var i=e?this.offset(a):this.position(a);var j={top:0,left:0,placement:""};if(d[2]){var k=this.viewportOffset(a,e);var l=b.getComputedStyle(c);var m={width:g+Math.round(Math.abs(this.parseStyle(l.marginLeft)+this.parseStyle(l.marginRight))),height:h+Math.round(Math.abs(this.parseStyle(l.marginTop)+this.parseStyle(l.marginBottom)))};d[0]=d[0]==="top"&&m.height>k.top&&m.height<=k.bottom?"bottom":d[0]==="bottom"&&m.height>k.bottom&&m.height<=k.top?"top":d[0]==="left"&&m.width>k.left&&m.width<=k.right?"right":d[0]==="right"&&m.width>k.right&&m.width<=k.left?"left":d[0];d[1]=d[1]==="top"&&m.height-i.height>k.bottom&&m.height-i.height<=k.top?"bottom":d[1]==="bottom"&&m.height-i.height>k.top&&m.height-i.height<=k.bottom?"top":d[1]==="left"&&m.width-i.width>k.right&&m.width-i.width<=k.left?"right":d[1]==="right"&&m.width-i.width>k.left&&m.width-i.width<=k.right?"left":d[1];if(d[1]==="center"){if(f.vertical.test(d[0])){var n=i.width/2-g/2;if(k.left+n<0&&m.width-i.width<=k.right){d[1]="left"}else if(k.right+n<0&&m.width-i.width<=k.left){d[1]="right"}}else{var o=i.height/2-m.height/2;if(k.top+o<0&&m.height-i.height<=k.bottom){d[1]="top"}else if(k.bottom+o<0&&m.height-i.height<=k.top){d[1]="bottom"}}}}switch(d[0]){case"top":j.top=i.top-h;break;case"bottom":j.top=i.top+i.height;break;case"left":j.left=i.left-g;break;case"right":j.left=i.left+i.width;break}switch(d[1]){case"top":j.top=i.top;break;case"bottom":j.top=i.top+i.height-h;break;case"left":j.left=i.left;break;case"right":j.left=i.left+i.width-g;break;case"center":if(f.vertical.test(d[0])){j.left=i.left+i.width/2-g/2}else{j.top=i.top+i.height/2-h/2}break}j.top=Math.round(j.top);j.left=Math.round(j.left);j.placement=d[1]==="center"?d[0]:d[0]+"-"+d[1];return j},adjustTop:function(a,b,c,d){if(a.indexOf("top")!==-1&&c!==d){return{top:b.top-d+"px"}}},positionArrow:function(a,c){a=this.getRawNode(a);var d=a.querySelector(".tooltip-inner, .popover-inner");if(!d){return}var e=angular.element(d).hasClass("tooltip-inner");var g=e?a.querySelector(".tooltip-arrow"):a.querySelector(".arrow");if(!g){return}var h={top:"",bottom:"",left:"",right:""};c=this.parsePlacement(c);if(c[1]==="center"){angular.element(g).css(h);return}var i="border-"+c[0]+"-width";var j=b.getComputedStyle(g)[i];var k="border-";if(f.vertical.test(c[0])){k+=c[0]+"-"+c[1]}else{k+=c[1]+"-"+c[0]}k+="-radius";var l=b.getComputedStyle(e?d:a)[k];switch(c[0]){case"top":h.bottom=e?"0":"-"+j;break;case"bottom":h.top=e?"0":"-"+j;break;case"left":h.right=e?"0":"-"+j;break;case"right":h.left=e?"0":"-"+j;break}h[c[1]]=l;angular.element(g).css(h)}}}]);angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",true).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:false,clearText:"Clear",closeOnDateSelection:true,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:true,showButtonBar:true,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q={},r=false;var s,t,u,v,w,x,y,z,A,B,C,D,E,F=[];this.init=function(e){B=e;C=angular.isObject(e.$options)?e.$options:{timezone:null};t=angular.isDefined(c.closeOnDateSelection)?a.$parent.$eval(c.closeOnDateSelection):m.closeOnDateSelection;u=angular.isDefined(c.datepickerAppendToBody)?a.$parent.$eval(c.datepickerAppendToBody):m.appendToBody;v=angular.isDefined(c.onOpenFocus)?a.$parent.$eval(c.onOpenFocus):m.onOpenFocus;w=angular.isDefined(c.datepickerPopupTemplateUrl)?c.datepickerPopupTemplateUrl:m.datepickerPopupTemplateUrl;x=angular.isDefined(c.datepickerTemplateUrl)?c.datepickerTemplateUrl:m.datepickerTemplateUrl;E=angular.isDefined(c.altInputFormats)?a.$parent.$eval(c.altInputFormats):m.altInputFormats;a.showButtonBar=angular.isDefined(c.showButtonBar)?a.$parent.$eval(c.showButtonBar):m.showButtonBar;if(m.html5Types[c.type]){s=m.html5Types[c.type];r=true}else{s=c.uibDatepickerPopup||m.datepickerPopup;c.$observe("uibDatepickerPopup",function(a,b){var c=a||m.datepickerPopup;if(c!==s){s=c;B.$modelValue=null;if(!s){throw new Error("uibDatepickerPopup must have a date format specified.")}}})}if(!s){throw new Error("uibDatepickerPopup must have a date format specified.")}if(r&&c.uibDatepickerPopup){throw new Error("HTML5 date input types do not support custom formats.")}y=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>");y.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":w});z=angular.element(y.children()[0]);z.attr("template-url",x);if(!a.datepickerOptions){a.datepickerOptions={}}if(r){if(c.type==="month"){a.datepickerOptions.datepickerMode="month";a.datepickerOptions.minMode="month"}}z.attr("datepicker-options","datepickerOptions");if(!r){B.$$parserName="date";B.$validators.date=J;B.$parsers.unshift(I);B.$formatters.push(function(b){if(B.$isEmpty(b)){a.date=b;return b}if(angular.isNumber(b)){b=new Date(b)}a.date=l.fromTimezone(b,C.timezone);return l.filter(a.date,s)})}else{B.$formatters.push(function(b){a.date=l.fromTimezone(b,C.timezone);return b})}B.$viewChangeListeners.push(function(){a.date=H(B.$viewValue)});b.on("keydown",L);D=d(y)(a);y.remove();if(u){h.find("body").append(D)}else{b.after(D)}a.$on("$destroy",function(){if(a.isOpen===true){if(!i.$$phase){a.$apply(function(){a.isOpen=false})}}D.remove();b.off("keydown",L);h.off("click",K);if(A){A.off("scroll",M)}angular.element(g).off("resize",M);while(F.length){F.shift()()}})};a.getText=function(b){return a[b+"Text"]||m[b+"Text"]};a.isDisabled=function(b){if(b==="today"){b=l.fromTimezone(new Date,C.timezone)}var c={};angular.forEach(["minDate","maxDate"],function(b){if(!a.datepickerOptions[b]){c[b]=null}else if(angular.isDate(a.datepickerOptions[b])){c[b]=new Date(a.datepickerOptions[b])}else{if(p){e.warn("Literal date support has been deprecated, please switch to date object usage")}c[b]=new Date(k(a.datepickerOptions[b],"medium"))}});return a.datepickerOptions&&c.minDate&&a.compare(b,c.minDate)<0||c.maxDate&&a.compare(b,c.maxDate)>0};a.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())};a.dateSelection=function(c){a.date=c;var d=a.date?l.filter(a.date,s):null;b.val(d);B.$setViewValue(d);if(t){a.isOpen=false;b[0].focus()}};a.keydown=function(c){if(c.which===27){c.stopPropagation();a.isOpen=false;b[0].focus()}};a.select=function(b,c){c.stopPropagation();if(b==="today"){var d=new Date;if(angular.isDate(a.date)){b=new Date(a.date);b.setFullYear(d.getFullYear(),d.getMonth(),d.getDate())}else{b=l.fromTimezone(d,C.timezone);b.setHours(0,0,0,0)}}a.dateSelection(b)};a.close=function(c){c.stopPropagation();a.isOpen=false;b[0].focus()};a.disabled=angular.isDefined(c.disabled)||false;if(c.ngDisabled){F.push(a.$parent.$watch(f(c.ngDisabled),function(b){a.disabled=b}))}a.$watch("isOpen",function(d){if(d){if(!a.disabled){n(function(){M();if(v){a.$broadcast("uib:datepicker.focus")}h.on("click",K);var d=c.popupPlacement?c.popupPlacement:m.placement;if(u||j.parsePlacement(d)[2]){A=A||angular.element(j.scrollParent(b));if(A){A.on("scroll",M)}}else{A=null}angular.element(g).on("resize",M)},0,false)}else{a.isOpen=false}}else{h.off("click",K);if(A){A.off("scroll",M)}angular.element(g).off("resize",M)}});function G(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function H(b){var c=l.parse(b,s,a.date);if(isNaN(c)){for(var d=0;d<E.length;d++){c=l.parse(b,E[d],a.date);if(!isNaN(c)){return c}}}return c}function I(a){if(angular.isNumber(a)){a=new Date(a)}if(!a){return null}if(angular.isDate(a)&&!isNaN(a)){return a}if(angular.isString(a)){var b=H(a);if(!isNaN(b)){return l.fromTimezone(b,C.timezone)}}return B.$options&&B.$options.allowInvalid?a:undefined}function J(a,b){var d=a||b;if(!c.ngRequired&&!d){return true}if(angular.isNumber(d)){d=new Date(d)}if(!d){return true}if(angular.isDate(d)&&!isNaN(d)){return true}if(angular.isString(d)){return!isNaN(H(d))}return false}function K(c){if(!a.isOpen&&a.disabled){return}var d=D[0];var e=b[0].contains(c.target);var f=d.contains!==undefined&&d.contains(c.target);if(a.isOpen&&!(e||f)){a.$apply(function(){a.isOpen=false})}}function L(c){if(c.which===27&&a.isOpen){c.preventDefault();c.stopPropagation();a.$apply(function(){a.isOpen=false});b[0].focus()}else if(c.which===40&&!a.isOpen){c.preventDefault();c.stopPropagation();a.$apply(function(){a.isOpen=true})}}function M(){if(a.isOpen){var d=angular.element(D[0].querySelector(".uib-datepicker-popup"));var e=c.popupPlacement?c.popupPlacement:m.placement;var f=j.positionElements(b,d,e,u);d.css({top:f.top+"px",left:f.left+"px"});if(d.hasClass("uib-position-measure")){d.removeClass("uib-position-measure")}}}a.$on("uib:datepicker.mode",function(){n(M,0,false)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:true,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepickerPopup/popup.html"}}});angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(a){return function(b,c){var d;return function(){var e=this;var f=Array.prototype.slice.call(arguments);if(d){a.cancel(d)}d=a(function(){b.apply(e,f)},c)}}}]);angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(a,b){var c=null;this.open=function(b,e){if(!c){a.on("click",d)}if(c&&c!==b){c.isOpen=false}c=b};this.close=function(b,e){if(c===b){a.off("click",d);a.off("keydown",this.keybindFilter);c=null}};var d=function(a){if(!c){return}if(a&&c.getAutoClose()==="disabled"){return}if(a&&a.which===3){return}var d=c.getToggleElement();if(a&&d&&d[0].contains(a.target)){return}var e=c.getDropdownElement();if(a&&c.getAutoClose()==="outsideClick"&&e&&e[0].contains(a.target)){return}c.focusToggleElement();c.isOpen=false;if(!b.$$phase){c.$apply()}};this.keybindFilter=function(a){if(!c){return}var b=c.getDropdownElement();var e=c.getToggleElement();var f=b&&b[0].contains(a.target);var g=e&&e[0].contains(a.target);if(a.which===27){a.stopPropagation();c.focusToggleElement();d()}else if(c.isKeynavEnabled()&&[38,40].indexOf(a.which)!==-1&&c.isOpen&&(f||g)){a.preventDefault();a.stopPropagation();c.focusDropdownEntry(a.which)}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i,j,k){var l=this,m=a.$new(),n,o=e.appendToOpenClass,p=e.openClass,q,r=angular.noop,s=c.onToggle?d(c.onToggle):angular.noop,t=false,u=null,v=false,w=null,x=i.find("body");b.addClass("dropdown");this.init=function(){if(c.isOpen){q=d(c.isOpen);r=q.assign;a.$watch(q,function(a){m.isOpen=!!a})}if(angular.isDefined(c.dropdownAppendTo)){var e=d(c.dropdownAppendTo)(m);if(e){u=angular.element(e)}}t=angular.isDefined(c.dropdownAppendToBody);v=angular.isDefined(c.keyboardNav);if(t&&!u){u=x}if(u&&l.dropdownMenu){u.append(l.dropdownMenu);b.on("$destroy",function a(){l.dropdownMenu.remove()})}};this.toggle=function(a){m.isOpen=arguments.length?!!a:!m.isOpen;if(angular.isFunction(r)){r(m,m.isOpen)}return m.isOpen};this.isOpen=function(){return m.isOpen};m.getToggleElement=function(){return l.toggleElement};m.getAutoClose=function(){return c.autoClose||"always"};m.getElement=function(){return b};m.isKeynavEnabled=function(){return v};m.focusDropdownEntry=function(a){var c=l.dropdownMenu?angular.element(l.dropdownMenu).find("a"):b.find("ul").eq(0).find("a");switch(a){case 40:{if(!angular.isNumber(l.selectedOption)){l.selectedOption=0}else{l.selectedOption=l.selectedOption===c.length-1?l.selectedOption:l.selectedOption+1}break}case 38:{if(!angular.isNumber(l.selectedOption)){l.selectedOption=c.length-1}else{l.selectedOption=l.selectedOption===0?0:l.selectedOption-1}break}}c[l.selectedOption].focus()};m.getDropdownElement=function(){return l.dropdownMenu};m.focusToggleElement=function(){if(l.toggleElement){l.toggleElement[0].focus()}};m.$watch("isOpen",function(c,d){if(u&&l.dropdownMenu){var e=h.positionElements(b,l.dropdownMenu,"bottom-left",true),q,v,w,x=0;q={top:e.top+"px",display:c?"block":"none"};v=l.dropdownMenu.hasClass("dropdown-menu-right");if(!v){q.left=e.left+"px";q.right="auto"}else{q.left="auto";w=h.scrollbarPadding(u);if(w.heightOverflow&&w.scrollbarWidth){x=w.scrollbarWidth}q.right=window.innerWidth-x-(e.left+b.prop("offsetWidth"))+"px"}if(!t){var y=h.offset(u);q.top=e.top-y.top+"px";if(!v){q.left=e.left-y.left+"px"}else{q.right=window.innerWidth-(e.left-y.left+b.prop("offsetWidth"))+"px"}}l.dropdownMenu.css(q)}var z=u?u:b;var A=z.hasClass(u?o:p);if(A===!c){g[c?"addClass":"removeClass"](z,u?o:p).then(function(){if(angular.isDefined(c)&&c!==d){s(a,{open:!!c})}})}if(c){if(l.dropdownMenuTemplateUrl){k(l.dropdownMenuTemplateUrl).then(function(a){n=m.$new();j(a.trim())(n,function(a){var b=a;l.dropdownMenu.replaceWith(b);l.dropdownMenu=b;i.on("keydown",f.keybindFilter)})})}else{i.on("keydown",f.keybindFilter)}m.focusToggleElement();f.open(m,b)}else{f.close(m,b);if(l.dropdownMenuTemplateUrl){if(n){n.$destroy()}var B=angular.element('<ul class="dropdown-menu"></ul>');l.dropdownMenu.replaceWith(B);l.dropdownMenu=B}l.selectedOption=null}if(angular.isFunction(r)){r(a,c)}})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(a,b,c,d){d.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(a,b,c,d){if(!d||angular.isDefined(c.dropdownNested)){return}b.addClass("dropdown-menu");var e=c.templateUrl;if(e){d.dropdownMenuTemplateUrl=e}if(!d.dropdownMenu){d.dropdownMenu=b}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(a,b,c,d){if(!d){return}b.addClass("dropdown-toggle");d.toggleElement=b;var e=function(e){e.preventDefault();if(!b.hasClass("disabled")&&!c.disabled){a.$apply(function(){d.toggle()})}};b.bind("click",e);b.attr({"aria-haspopup":true,"aria-expanded":false});a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)});a.$on("$destroy",function(){b.unbind("click",e)})}}});angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++){if(b===a[c].key){return a[c]}}},keys:function(){var b=[];for(var c=0;c<a.length;c++){b.push(a[c].key)}return b},top:function(){return a[a.length-1]},remove:function(b){var c=-1;for(var d=0;d<a.length;d++){if(b===a[d].key){c=d;break}}return a.splice(c,1)[0]},removeTop:function(){return a.pop()},length:function(){return a.length}}}}});angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap","ui.bootstrap.position"]).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){if(!a[b]){a[b]=[]}a[b].push(c)},remove:function(b,c){var d=a[b];if(!d){return}var e=d.indexOf(c);if(e!==-1){d.splice(e,1)}if(!d.length){delete a[b]}}}}}}).provider("$uibResolve",function(){var a=this;this.resolver=null;this.setResolver=function(a){this.resolver=a};this.$get=["$injector","$q",function(b,c){var d=a.resolver?b.get(a.resolver):null;return{resolve:function(a,e,f,g){if(d){return d.resolve(a,e,f,g)}var h=[];angular.forEach(a,function(a){if(angular.isFunction(a)||angular.isArray(a)){h.push(c.resolve(b.invoke(a)))}else if(angular.isString(a)){h.push(c.resolve(b.get(a)))}else{h.push(c.resolve(a))}});return c.all(h).then(function(b){var c={};var d=0;angular.forEach(a,function(a,e){c[e]=b[d++]});return c})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(a,b,c){return{restrict:"A",compile:function(a,b){a.addClass(b.backdropClass);return d}};function d(b,d,e){if(e.modalInClass){a.addClass(d,e.modalInClass);b.$on(c.NOW_CLOSING_EVENT,function(c,f){var g=f();if(b.modalOptions.animation){a.removeClass(d,e.modalInClass).then(g)}else{g()}})}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(a,b,c,d){return{scope:{index:"@"},restrict:"A",transclude:true,templateUrl:function(a,b){return b.templateUrl||"uib/template/modal/window.html"},link:function(e,f,g){f.addClass(g.windowTopClass||"");e.size=g.size;e.close=function(b){var c=a.getTop();if(c&&c.value.backdrop&&c.value.backdrop!=="static"&&b.target===b.currentTarget){b.preventDefault();b.stopPropagation();a.dismiss(c.key,"backdrop click")}};f.on("click",e.close);e.$isRendered=true;var h=b.defer();e.$$postDigest(function(){h.resolve()});h.promise.then(function(){var h=null;if(g.modalInClass){h=c(f,{addClass:g.modalInClass}).start();e.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();c(f,{removeClass:g.modalInClass}).start().then(d)})}b.when(h).then(function(){var b=a.getTop();if(b){a.modalRendered(b.key)}if(!(d[0].activeElement&&f[0].contains(d[0].activeElement))){var c=f[0].querySelector("[autofocus]");if(c){c.focus()}else{f[0].focus()}}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(a,b){if(b.modalAnimation){a.addClass(b.uibModalAnimationClass)}}}}).directive("uibModalTransclude",["$animate",function(a){return{link:function(b,c,d,e,f){f(b.$parent,function(b){c.empty();a.enter(b,c)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(a,b,c,d,e,f,g,h,i){var j="modal-open";var k,l;var m=h.createNew();var n=g.createNew();var o={NOW_CLOSING_EVENT:"modal.stack.now-closing"};var p=0;var q=null;var r="data-bootstrap-modal-aria-hidden-count";var s="a[href], area[href], input:not([disabled]):not([tabindex='-1']), "+"button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), "+"iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]";var t;var u=/[A-Z]/g;function v(a){var b="-";return a.replace(u,function(a,c){return(c?b:"")+a.toLowerCase()})}function w(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}function x(){var a=-1;var b=m.keys();for(var c=0;c<b.length;c++){if(m.get(b[c]).value.backdrop){a=c}}if(a>-1&&a<p){a=p}return a}e.$watch(x,function(a){if(l){l.index=a}});function y(a,b){var c=m.get(a).value;var d=c.appendTo;m.remove(a);q=m.top();if(q){p=parseInt(q.value.modalDomEl.attr("index"),10)}B(c.modalDomEl,c.modalScope,function(){var b=c.openedClass||j;n.remove(b,a);var e=n.hasKey(b);d.toggleClass(b,e);if(!e&&t&&t.heightOverflow&&t.scrollbarWidth){if(t.originalRight){d.css({paddingRight:t.originalRight+"px"})}else{d.css({paddingRight:""})}t=null}z(true)},c.closedDeferred);A();if(b&&b.focus){b.focus()}else if(d.focus){d.focus()}}function z(a){var b;if(m.length()>0){b=m.top().value;b.modalDomEl.toggleClass(b.windowTopClass||"",a)}}function A(){if(k&&x()===-1){var a=l;B(k,l,function(){a=null});k=undefined;l=undefined}}function B(b,c,d,e){var g;var h=null;var i=function(){if(!g){g=f.defer();h=g.promise}return function a(){g.resolve()}};c.$broadcast(o.NOW_CLOSING_EVENT,i);return f.when(h).then(j);function j(){if(j.done){return}j.done=true;a.leave(b).then(function(){if(d){d()}b.remove();if(e){e.resolve()}});c.$destroy()}}c.on("keydown",C);e.$on("$destroy",function(){c.off("keydown",C)});function C(a){if(a.isDefaultPrevented()){return a}var b=m.top();if(b){switch(a.which){case 27:{if(b.value.keyboard){a.preventDefault();e.$apply(function(){o.dismiss(b.key,"escape key press")})}break}case 9:{var c=o.loadFocusElementList(b);var d=false;if(a.shiftKey){if(o.isFocusInFirstItem(a,c)||o.isModalFocused(a,b)){d=o.focusLastFocusableElement(c)}}else{if(o.isFocusInLastItem(a,c)){d=o.focusFirstFocusableElement(c)}}if(d){a.preventDefault();a.stopPropagation()}break}}}}o.open=function(b,f){var g=c[0].activeElement,h=f.openedClass||j;z(false);q=m.top();m.add(b,{deferred:f.deferred,renderDeferred:f.renderDeferred,closedDeferred:f.closedDeferred,modalScope:f.scope,backdrop:f.backdrop,keyboard:f.keyboard,openedClass:f.openedClass,windowTopClass:f.windowTopClass,animation:f.animation,appendTo:f.appendTo});n.put(h,b);var o=f.appendTo,s=x();if(!o.length){throw new Error("appendTo element not found. Make sure that the element passed is in DOM.")}if(s>=0&&!k){l=e.$new(true);l.modalOptions=f;l.index=s;k=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>');k.attr({class:"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"});if(f.backdropClass){k.addClass(f.backdropClass)}if(f.animation){k.attr("modal-animation","true")}d(k)(l);a.enter(k,o);if(i.isScrollable(o)){t=i.scrollbarPadding(o);if(t.heightOverflow&&t.scrollbarWidth){o.css({paddingRight:t.right+"px"})}}}var u;if(f.component){u=document.createElement(v(f.component.name));u=angular.element(u);u.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})}else{u=f.content}p=q?parseInt(q.value.modalDomEl.attr("index"),10)+1:0;var w=angular.element('<div uib-modal-window="modal-window"></div>');w.attr({class:"modal","template-url":f.windowTemplateUrl,"window-top-class":f.windowTopClass,role:"dialog","aria-labelledby":f.ariaLabelledBy,"aria-describedby":f.ariaDescribedBy,size:f.size,index:p,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(u);if(f.windowClass){w.addClass(f.windowClass)}if(f.animation){w.attr("modal-animation","true")}o.addClass(h);if(f.scope){f.scope.$$topModalIndex=p}a.enter(d(w)(f.scope),o);m.top().value.modalDomEl=w;m.top().value.modalOpener=g;y(w);function y(a){if(!a||a[0].tagName==="BODY"){return}b(a).forEach(function(a){var b=a.getAttribute("aria-hidden")==="true",c=parseInt(a.getAttribute(r),10);if(!c){c=b?1:0}a.setAttribute(r,c+1);a.setAttribute("aria-hidden","true")});return y(a.parent());function b(a){var b=a.parent()?a.parent().children():[];return Array.prototype.filter.call(b,function(b){return b!==a[0]})}}};function D(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}function E(){Array.prototype.forEach.call(document.querySelectorAll("["+r+"]"),function(a){var b=parseInt(a.getAttribute(r),10),c=b-1;a.setAttribute(r,c);if(!c){a.removeAttribute(r);a.removeAttribute("aria-hidden")}})}o.close=function(a,b){var c=m.get(a);E();if(c&&D(c,b,true)){c.value.modalScope.$$uibDestructionScheduled=true;c.value.deferred.resolve(b);y(a,c.value.modalOpener);return true}return!c};o.dismiss=function(a,b){var c=m.get(a);E();if(c&&D(c,b,false)){c.value.modalScope.$$uibDestructionScheduled=true;c.value.deferred.reject(b);y(a,c.value.modalOpener);return true}return!c};o.dismissAll=function(a){var b=this.getTop();while(b&&this.dismiss(b.key,a)){b=this.getTop()}};o.getTop=function(){return m.top()};o.modalRendered=function(a){var b=m.get(a);o.focusFirstFocusableElement(o.loadFocusElementList(b));if(b){b.value.renderDeferred.resolve()}};o.focusFirstFocusableElement=function(a){if(a.length>0){a[0].focus();return true}return false};o.focusLastFocusableElement=function(a){if(a.length>0){a[a.length-1].focus();return true}return false};o.isModalFocused=function(a,b){if(a&&b){var c=b.value.modalDomEl;if(c&&c.length){return(a.target||a.srcElement)===c[0]}}return false};o.isFocusInFirstItem=function(a,b){if(b.length>0){return(a.target||a.srcElement)===b[0]}return false};o.isFocusInLastItem=function(a,b){if(b.length>0){return(a.target||a.srcElement)===b[b.length-1]}return false};o.loadFocusElementList=function(a){if(a){var b=a.value.modalDomEl;if(b&&b.length){var c=b[0].querySelectorAll(s);return c?Array.prototype.filter.call(c,function(a){return w(a)}):c}}};return o}]).provider("$uibModal",function(){var a={options:{animation:true,backdrop:true,keyboard:true},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(b,c,d,e,f,g,h){var i={};function j(a){return a.template?c.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}var k=null;i.getPromiseChain=function(){return k};i.open=function(e){var i=c.defer();var l=c.defer();var m=c.defer();var n=c.defer();var o={result:i.promise,opened:l.promise,closed:m.promise,rendered:n.promise,close:function(a){return h.close(o,a)},dismiss:function(a){
return h.dismiss(o,a)}};e=angular.extend({},a.options,e);e.resolve=e.resolve||{};e.appendTo=e.appendTo||d.find("body").eq(0);if(!e.component&&!e.template&&!e.templateUrl){throw new Error("One of component or template or templateUrl options is required.")}var p;if(e.component){p=c.when(g.resolve(e.resolve,{},null,null))}else{p=c.all([j(e),g.resolve(e.resolve,{},null,null)])}function q(){return p}var r;r=k=c.all([k]).then(q,q).then(function a(c){var d=e.scope||b;var g=d.$new();g.$close=o.close;g.$dismiss=o.dismiss;g.$on("$destroy",function(){if(!g.$$uibDestructionScheduled){g.$dismiss("$uibUnscheduledDestruction")}});var j={scope:g,deferred:i,renderDeferred:n,closedDeferred:m,animation:e.animation,backdrop:e.backdrop,keyboard:e.keyboard,backdropClass:e.backdropClass,windowTopClass:e.windowTopClass,windowClass:e.windowClass,windowTemplateUrl:e.windowTemplateUrl,ariaLabelledBy:e.ariaLabelledBy,ariaDescribedBy:e.ariaDescribedBy,size:e.size,openedClass:e.openedClass,appendTo:e.appendTo};var k={};var p,q,r={};if(e.component){s(k,false,true,false);k.name=e.component;j.component=k}else if(e.controller){s(r,true,false,true);q=f(e.controller,r,true,e.controllerAs);if(e.controllerAs&&e.bindToController){p=q.instance;p.$close=g.$close;p.$dismiss=g.$dismiss;angular.extend(p,{$resolve:r.$scope.$resolve},d)}p=q();if(angular.isFunction(p.$onInit)){p.$onInit()}}if(!e.component){j.content=c[0]}h.open(o,j);l.resolve(true);function s(a,b,d,e){a.$scope=g;a.$scope.$resolve={};if(d){a.$scope.$uibModalInstance=o}else{a.$uibModalInstance=o}var f=b?c[1]:c;angular.forEach(f,function(b,c){if(e){a[c]=b}a.$scope.$resolve[c]=b})}},function a(b){l.reject(b);i.reject(b)})["finally"](function(){if(k===r){k=null}});return o};return i}]};return a});angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(a){return{create:function(b,c,d){b.setNumPages=d.numPages?a(d.numPages).assign:angular.noop;b.ngModelCtrl={$setViewValue:angular.noop};b._watchers=[];b.init=function(a,e){b.ngModelCtrl=a;b.config=e;a.$render=function(){b.render()};if(d.itemsPerPage){b._watchers.push(c.$parent.$watch(d.itemsPerPage,function(a){b.itemsPerPage=parseInt(a,10);c.totalPages=b.calculateTotalPages();b.updatePage()}))}else{b.itemsPerPage=e.itemsPerPage}c.$watch("totalItems",function(a,d){if(angular.isDefined(a)||a!==d){c.totalPages=b.calculateTotalPages();b.updatePage()}})};b.calculateTotalPages=function(){var a=b.itemsPerPage<1?1:Math.ceil(c.totalItems/b.itemsPerPage);return Math.max(a||0,1)};b.render=function(){c.page=parseInt(b.ngModelCtrl.$viewValue,10)||1};c.selectPage=function(a,d){if(d){d.preventDefault()}var e=!c.ngDisabled||!d;if(e&&c.page!==a&&a>0&&a<=c.totalPages){if(d&&d.target){d.target.blur()}b.ngModelCtrl.$setViewValue(a);b.ngModelCtrl.$render()}};c.getText=function(a){return c[a+"Text"]||b.config[a+"Text"]};c.noPrevious=function(){return c.page===1};c.noNext=function(){return c.page===c.totalPages};b.updatePage=function(){b.setNumPages(c.$parent,c.totalPages);if(c.page>c.totalPages){c.selectPage(c.totalPages)}else{b.ngModelCtrl.$render()}};c.$on("$destroy",function(){while(b._watchers.length){b._watchers.shift()()}})}}}]);angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(a,b,c,d){a.align=angular.isDefined(b.align)?a.$parent.$eval(b.align):d.align;c.create(this,a,b)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:true}).directive("uibPager",["uibPagerConfig",function(a){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(a,b){return b.templateUrl||"uib/template/pager/pager.html"},link:function(b,c,d,e){c.addClass("pager");var f=e[0],g=e[1];if(!g){return}f.init(g,a)}}}]);angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(a,b,c,d,e){var f=this;var g=angular.isDefined(b.maxSize)?a.$parent.$eval(b.maxSize):e.maxSize,h=angular.isDefined(b.rotate)?a.$parent.$eval(b.rotate):e.rotate,i=angular.isDefined(b.forceEllipses)?a.$parent.$eval(b.forceEllipses):e.forceEllipses,j=angular.isDefined(b.boundaryLinkNumbers)?a.$parent.$eval(b.boundaryLinkNumbers):e.boundaryLinkNumbers,k=angular.isDefined(b.pageLabel)?function(c){return a.$parent.$eval(b.pageLabel,{$page:c})}:angular.identity;a.boundaryLinks=angular.isDefined(b.boundaryLinks)?a.$parent.$eval(b.boundaryLinks):e.boundaryLinks;a.directionLinks=angular.isDefined(b.directionLinks)?a.$parent.$eval(b.directionLinks):e.directionLinks;d.create(this,a,b);if(b.maxSize){f._watchers.push(a.$parent.$watch(c(b.maxSize),function(a){g=parseInt(a,10);f.render()}))}function l(a,b,c){return{number:a,text:b,active:c}}function m(a,b){var c=[];var d=1,e=b;var f=angular.isDefined(g)&&g<b;if(f){if(h){d=Math.max(a-Math.floor(g/2),1);e=d+g-1;if(e>b){e=b;d=e-g+1}}else{d=(Math.ceil(a/g)-1)*g+1;e=Math.min(d+g-1,b)}}for(var m=d;m<=e;m++){var n=l(m,k(m),m===a);c.push(n)}if(f&&g>0&&(!h||i||j)){if(d>1){if(!j||d>3){var o=l(d-1,"...",false);c.unshift(o)}if(j){if(d===3){var p=l(2,"2",false);c.unshift(p)}var q=l(1,"1",false);c.unshift(q)}}if(e<b){if(!j||e<b-2){var r=l(e+1,"...",false);c.push(r)}if(j){if(e===b-2){var s=l(b-1,b-1,false);c.push(s)}var t=l(b,b,false);c.push(t)}}}return c}var n=this.render;this.render=function(){n();if(a.page>0&&a.page<=a.totalPages){a.pages=m(a.page,a.totalPages)}}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:false,boundaryLinkNumbers:false,directionLinks:true,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:true,forceEllipses:false}).directive("uibPagination",["$parse","uibPaginationConfig",function(a,b){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"uib/template/pagination/pagination.html"},link:function(a,c,d,e){c.addClass("pagination");var f=e[0],g=e[1];if(!g){return}f.init(g,b)}}}]);angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){var a={placement:"top",placementClassPrefix:"",animation:true,popupDelay:0,popupCloseDelay:0,useContentExp:false};var b={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""};var c={};this.options=function(a){angular.extend(c,a)};this.setTriggers=function a(c){angular.extend(b,c)};function d(a){var b=/[A-Z]/g;var c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,f,g,h,i,j,k,l,m){var n=m.createNew();h.on("keyup",o);k.$on("$destroy",function(){h.off("keyup",o)});function o(a){if(a.which===27){var b=n.top();if(b){b.value.close();b=null}}}return function e(k,m,o,p){p=angular.extend({},a,c,p);function q(a){var c=(a||p.trigger||o).split(" ");var d=c.map(function(a){return b[a]||a});return{show:c,hide:d}}var r=d(k);var s=j.startSymbol();var t=j.endSymbol();var u="<div "+r+"-popup "+'uib-title="'+s+"title"+t+'" '+(p.useContentExp?'content-exp="contentExp()" ':'content="'+s+"content"+t+'" ')+'origin-scope="origScope" '+'class="uib-position-measure '+m+'" '+'tooltip-animation-class="fade"'+"uib-tooltip-classes "+'ng-class="{ in: isOpen }" '+">"+"</div>";return{compile:function(a,b){var c=f(u);return function a(b,d,e,f){var j;var o;var r;var s;var t;var u;var v;var w=angular.isDefined(p.appendToBody)?p.appendToBody:false;var x=q(undefined);var y=angular.isDefined(e[m+"Enable"]);var z=b.$new(true);var A=false;var B=angular.isDefined(e[m+"IsOpen"])?l(e[m+"IsOpen"]):false;var C=p.useContentExp?l(e[k]):false;var D=[];var E;var F=function(){if(!j||!j.html()){return}if(!u){u=g(function(){var a=i.positionElements(d,j,z.placement,w);var b=angular.isDefined(j.offsetHeight)?j.offsetHeight:j.prop("offsetHeight");var c=w?i.offset(d):i.position(d);j.css({top:a.top+"px",left:a.left+"px"});var e=a.placement.split("-");if(!j.hasClass(e[0])){j.removeClass(E.split("-")[0]);j.addClass(e[0])}if(!j.hasClass(p.placementClassPrefix+a.placement)){j.removeClass(p.placementClassPrefix+E);j.addClass(p.placementClassPrefix+a.placement)}v=g(function(){var a=angular.isDefined(j.offsetHeight)?j.offsetHeight:j.prop("offsetHeight");var d=i.adjustTop(e,c,b,a);if(d){j.css(d)}v=null},0,false);if(j.hasClass("uib-position-measure")){i.positionArrow(j,a.placement);j.removeClass("uib-position-measure")}else if(E!==a.placement){i.positionArrow(j,a.placement)}E=a.placement;u=null},0,false)}};z.origScope=b;z.isOpen=false;function G(){if(!z.isOpen){H()}else{I()}}function H(){if(y&&!b.$eval(e[m+"Enable"])){return}M();P();if(z.popupDelay){if(!s){s=g(J,z.popupDelay,false)}}else{J()}}function I(){K();if(z.popupCloseDelay){if(!t){t=g(L,z.popupCloseDelay,false)}}else{L()}}function J(){K();M();if(!z.content){return angular.noop}N();z.$evalAsync(function(){z.isOpen=true;Q(true);F()})}function K(){if(s){g.cancel(s);s=null}if(u){g.cancel(u);u=null}}function L(){if(!z){return}z.$evalAsync(function(){if(z){z.isOpen=false;Q(false);if(z.animation){if(!r){r=g(O,150,false)}}else{O()}}})}function M(){if(t){g.cancel(t);t=null}if(r){g.cancel(r);r=null}}function N(){if(j){return}o=z.$new();j=c(o,function(a){if(w){h.find("body").append(a)}else{d.after(a)}});n.add(z,{close:L});R()}function O(){K();M();S();if(j){j.remove();j=null;if(v){g.cancel(v)}}n.remove(z);if(o){o.$destroy();o=null}}function P(){z.title=e[m+"Title"];if(C){z.content=C(b)}else{z.content=e[k]}z.popupClass=e[m+"Class"];z.placement=angular.isDefined(e[m+"Placement"])?e[m+"Placement"]:p.placement;var a=i.parsePlacement(z.placement);E=a[1]?a[0]+"-"+a[1]:a[0];var c=parseInt(e[m+"PopupDelay"],10);var d=parseInt(e[m+"PopupCloseDelay"],10);z.popupDelay=!isNaN(c)?c:p.popupDelay;z.popupCloseDelay=!isNaN(d)?d:p.popupCloseDelay}function Q(a){if(B&&angular.isFunction(B.assign)){B.assign(b,a)}}z.contentExp=function(){return z.content};e.$observe("disabled",function(a){if(a){K()}if(a&&z.isOpen){L()}});if(B){b.$watch(B,function(a){if(z&&!a===z.isOpen){G()}})}function R(){D.length=0;if(C){D.push(b.$watch(C,function(a){z.content=a;if(!a&&z.isOpen){L()}}));D.push(o.$watch(function(){if(!A){A=true;o.$$postDigest(function(){A=false;if(z&&z.isOpen){F()}})}}))}else{D.push(e.$observe(k,function(a){z.content=a;if(!a&&z.isOpen){L()}else{F()}}))}D.push(e.$observe(m+"Title",function(a){z.title=a;if(z.isOpen){F()}}));D.push(e.$observe(m+"Placement",function(a){z.placement=a?a:p.placement;if(z.isOpen){F()}}))}function S(){if(D.length){angular.forEach(D,function(a){a()});D.length=0}}function T(a){if(!z||!z.isOpen||!j){return}if(!d[0].contains(a.target)&&!j[0].contains(a.target)){I()}}var U=function(){x.show.forEach(function(a){if(a==="outsideClick"){d.off("click",G)}else{d.off(a,H);d.off(a,G)}});x.hide.forEach(function(a){if(a==="outsideClick"){h.off("click",T)}else{d.off(a,I)}})};function V(){var a=[],c=[];var f=b.$eval(e[m+"Trigger"]);U();if(angular.isObject(f)){Object.keys(f).forEach(function(b){a.push(b);c.push(f[b])});x={show:a,hide:c}}else{x=q(f)}if(x.show!=="none"){x.show.forEach(function(a,b){if(a==="outsideClick"){d.on("click",G);h.on("click",T)}else if(a===x.hide[b]){d.on(a,G)}else if(a){d.on(a,H);d.on(x.hide[b],I)}d.on("keypress",function(a){if(a.which===27){I()}})})}}V();var W=b.$eval(e[m+"Animation"]);z.animation=angular.isDefined(W)?!!W:p.animation;var X;var Y=m+"AppendToBody";if(Y in e&&e[Y]===undefined){X=true}else{X=b.$eval(e[Y])}w=angular.isDefined(X)?X:w;b.$on("$destroy",function a(){U();O();z=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h=e.$eval(g.tooltipTemplateTranscludeScope);var i=0,j,k,l;var m=function(){if(k){k.remove();k=null}if(j){j.$destroy();j=null}if(l){a.leave(l).then(function(){k=null});k=l;l=null}};e.$watch(b.parseAsResourceUrl(g.uibTooltipTemplateTransclude),function(b){var g=++i;if(b){d(b,true).then(function(d){if(g!==i){return}var e=h.$new();var k=d;var n=c(k)(e,function(b){m();a.enter(b,f)});j=e;l=n;j.$emit("$includeContentLoaded",b)},function(){if(g===i){m();e.$emit("$includeContentError",b)}});e.$emit("$includeContentRequested",b)}else{m()}});e.$on("$destroy",m)}}}]).directive("uibTooltipClasses",["$uibPosition",function(a){return{restrict:"A",link:function(b,c,d){if(b.placement){var e=a.parsePlacement(b.placement);c.addClass(e[0])}if(b.popupClass){c.addClass(b.popupClass)}if(b.animation){c.addClass(d.tooltipAnimationClass)}}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(a){return a("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(a){return a("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:true})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(a){return a("uibTooltipHtml","tooltip","mouseenter",{useContentExp:true})}]);angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(a){return a("uibPopoverTemplate","popover","click",{useContentExp:true})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(a){return a("uibPopoverHtml","popover","click",{useContentExp:true})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(a){return a("uibPopover","popover","click")}]);angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:true,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[];a.max=f();this.addBar=function(a,b,c){if(!e){b.css({transition:"none"})}this.bars.push(a);a.max=f();a.title=c&&angular.isDefined(c.title)?c.title:"progressbar";a.$watch("value",function(b){a.recalculatePercentage()});a.recalculatePercentage=function(){var b=d.bars.reduce(function(a,b){b.percent=+(100*b.value/b.max).toFixed(2);return a+b.percent},0);if(b>100){a.percent-=b-100}};a.$on("$destroy",function(){b=null;d.removeBar(a)})};this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1);this.bars.forEach(function(a){a.recalculatePercentage()})};a.$watch("maxParam",function(a){d.bars.forEach(function(a){a.max=f();a.recalculatePercentage()})});function f(){return angular.isDefined(a.maxParam)?a.maxParam:c.max}}]).directive("uibProgress",function(){return{replace:true,transclude:true,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:true,transclude:true,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b,c)}}}).directive("uibProgressbar",function(){return{replace:true,transclude:true,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}}});angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:true,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(a,b,c){var d={$setViewValue:angular.noop},e=this;this.init=function(e){d=e;d.$render=this.render;d.$formatters.push(function(a){if(angular.isNumber(a)&&a<<0!==a){a=Math.round(a)}return a});this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn;this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;this.enableReset=angular.isDefined(b.enableReset)?a.$parent.$eval(b.enableReset):c.enableReset;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)};this.buildTemplateObjects=function(a){for(var b=0,c=a.length;b<c;b++){a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b])}return a};this.getTitle=function(a){if(a>=this.titles.length){return a+1}return this.titles[a]};a.rate=function(b){if(!a.readonly&&b>=0&&b<=a.range.length){var c=e.enableReset&&d.$viewValue===b?0:b;d.$setViewValue(c);d.$render()}};a.enter=function(b){if(!a.readonly){a.value=b}a.onHover({value:b})};a.reset=function(){a.value=d.$viewValue;a.onLeave()};a.onKeydown=function(b){if(/(37|38|39|40)/.test(b.which)){b.preventDefault();b.stopPropagation();a.rate(a.value+(b.which===38||b.which===39?1:-1))}};this.render=function(){a.value=d.$viewValue;a.title=e.getTitle(a.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}});angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(a){var b=this,c;b.tabs=[];b.select=function(a,f){if(!d){var g=e(c);var h=b.tabs[g];if(h){h.tab.onDeselect({$event:f,$selectedIndex:a});if(f&&f.isDefaultPrevented()){return}h.tab.active=false}var i=b.tabs[a];if(i){i.tab.onSelect({$event:f});i.tab.active=true;b.active=i.index;c=i.index}else if(!i&&angular.isDefined(c)){b.active=null;c=null}}};b.addTab=function a(c){b.tabs.push({tab:c,index:c.index});b.tabs.sort(function(a,b){if(a.index>b.index){return 1}if(a.index<b.index){return-1}return 0});if(c.index===b.active||!angular.isDefined(b.active)&&b.tabs.length===1){var d=e(c.index);b.select(d)}};b.removeTab=function a(c){var d;for(var e=0;e<b.tabs.length;e++){if(b.tabs[e].tab===c){d=e;break}}if(b.tabs[d].index===b.active){var f=d===b.tabs.length-1?d-1:d+1%b.tabs.length;b.select(f)}b.tabs.splice(d,1)};a.$watch("tabset.active",function(a){if(angular.isDefined(a)&&a!==c){b.select(e(a))}});var d;a.$on("$destroy",function(){d=true});function e(a){for(var c=0;c<b.tabs.length;c++){if(b.tabs[c].index===a){return c}}}}]).directive("uibTabset",function(){return{transclude:true,replace:true,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(a,b){return b.templateUrl||"uib/template/tabs/tabset.html"},link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):false;a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):false}}}).directive("uibTab",["$parse",function(a){return{require:"^uibTabset",replace:true,templateUrl:function(a,b){return b.templateUrl||"uib/template/tabs/tab.html"},transclude:true,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(b,c,d,e,f){b.disabled=false;if(d.disable){b.$parent.$watch(a(d.disable),function(a){b.disabled=!!a})}if(angular.isUndefined(d.index)){if(e.tabs&&e.tabs.length){b.index=Math.max.apply(null,e.tabs.map(function(a){return a.index}))+1}else{b.index=0}}if(angular.isUndefined(d.classes)){b.classes=""}b.select=function(a){if(!b.disabled){var c;for(var d=0;d<e.tabs.length;d++){if(e.tabs[d].tab===b){c=d;break}}e.select(c,a)}};e.addTab(b);b.$on("$destroy",function(){e.removeTab(b)});b.$transcludeFn=f}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(a,b){a.$watch("headingElement",function a(c){if(c){b.html("");b.append(c)}})}}}).directive("uibTabContentTransclude",function(){return{restrict:"A",require:"^uibTabset",link:function(b,c,d){var e=b.$eval(d.uibTabContentTransclude).tab;e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){if(a(b)){e.headingElement=b}else{c.append(b)}})})}};function a(a){return a.tagName&&(a.hasAttribute("uib-tab-heading")||a.hasAttribute("data-uib-tab-heading")||a.hasAttribute("x-uib-tab-heading")||a.tagName.toLowerCase()==="uib-tab-heading"||a.tagName.toLowerCase()==="data-uib-tab-heading"||a.tagName.toLowerCase()==="x-uib-tab-heading"||a.tagName.toLowerCase()==="uib:tab-heading")}});angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:true,showSeconds:false,meridians:null,readonlyInput:false,mousewheel:true,arrowkeys:true,showSpinners:true,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(a,b,c,d,e,f,g){var h,i,j;var k=new Date,l=[],m={$setViewValue:angular.noop},n=angular.isDefined(c.meridians)?a.$parent.$eval(c.meridians):g.meridians||f.DATETIME_FORMATS.AMPMS,o=angular.isDefined(c.padHours)?a.$parent.$eval(c.padHours):true;a.tabindex=angular.isDefined(c.tabindex)?c.tabindex:0;b.removeAttr("tabindex");this.init=function(b,d){m=b;m.$render=this.render;m.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),f=d.eq(1),k=d.eq(2);h=e.controller("ngModel");i=f.controller("ngModel");j=k.controller("ngModel");var l=angular.isDefined(c.mousewheel)?a.$parent.$eval(c.mousewheel):g.mousewheel;if(l){this.setupMousewheelEvents(e,f,k)}var n=angular.isDefined(c.arrowkeys)?a.$parent.$eval(c.arrowkeys):g.arrowkeys;if(n){this.setupArrowkeyEvents(e,f,k)}a.readonlyInput=angular.isDefined(c.readonlyInput)?a.$parent.$eval(c.readonlyInput):g.readonlyInput;this.setupInputEvents(e,f,k)};var p=g.hourStep;if(c.hourStep){l.push(a.$parent.$watch(d(c.hourStep),function(a){p=+a}))}var q=g.minuteStep;if(c.minuteStep){l.push(a.$parent.$watch(d(c.minuteStep),function(a){q=+a}))}var r;l.push(a.$parent.$watch(d(c.min),function(a){var b=new Date(a);r=isNaN(b)?undefined:b}));var s;l.push(a.$parent.$watch(d(c.max),function(a){var b=new Date(a);s=isNaN(b)?undefined:b}));var t=false;if(c.ngDisabled){l.push(a.$parent.$watch(d(c.ngDisabled),function(a){t=a}))}a.noIncrementHours=function(){var a=D(k,p*60);return t||a>s||a<k&&a<r};a.noDecrementHours=function(){var a=D(k,-p*60);return t||a<r||a>k&&a>s};a.noIncrementMinutes=function(){var a=D(k,q);return t||a>s||a<k&&a<r};a.noDecrementMinutes=function(){var a=D(k,-q);return t||a<r||a>k&&a>s};a.noIncrementSeconds=function(){var a=E(k,u);return t||a>s||a<k&&a<r};a.noDecrementSeconds=function(){var a=E(k,-u);return t||a<r||a>k&&a>s};a.noToggleMeridian=function(){if(k.getHours()<12){return t||D(k,12*60)>s}return t||D(k,-12*60)<r};var u=g.secondStep;if(c.secondStep){l.push(a.$parent.$watch(d(c.secondStep),function(a){u=+a}))}a.showSeconds=g.showSeconds;if(c.showSeconds){l.push(a.$parent.$watch(d(c.showSeconds),function(b){a.showSeconds=!!b}))}a.showMeridian=g.showMeridian;if(c.showMeridian){l.push(a.$parent.$watch(d(c.showMeridian),function(b){a.showMeridian=!!b;if(m.$error.time){var c=v(),d=w();if(angular.isDefined(c)&&angular.isDefined(d)){k.setHours(c);z()}}else{B()}}))}function v(){var b=+a.hours;var c=a.showMeridian?b>0&&b<13:b>=0&&b<24;if(!c||a.hours===""){return undefined}if(a.showMeridian){if(b===12){b=0}if(a.meridian===n[1]){b=b+12}}return b}function w(){var b=+a.minutes;var c=b>=0&&b<60;if(!c||a.minutes===""){return undefined}return b}function x(){var b=+a.seconds;return b>=0&&b<60?b:undefined}function y(a,b){if(a===null){return""}return angular.isDefined(a)&&a.toString().length<2&&!b?"0"+a:a.toString()}this.setupMousewheelEvents=function(b,c,d){var e=function(a){if(a.originalEvent){a=a.originalEvent}var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){if(!t){a.$apply(e(b)?a.incrementHours():a.decrementHours())}b.preventDefault()});c.bind("mousewheel wheel",function(b){if(!t){a.$apply(e(b)?a.incrementMinutes():a.decrementMinutes())}b.preventDefault()});d.bind("mousewheel wheel",function(b){if(!t){a.$apply(e(b)?a.incrementSeconds():a.decrementSeconds())}b.preventDefault()})};this.setupArrowkeyEvents=function(b,c,d){b.bind("keydown",function(b){if(!t){if(b.which===38){b.preventDefault();a.incrementHours();a.$apply()}else if(b.which===40){b.preventDefault();a.decrementHours();a.$apply()}}});c.bind("keydown",function(b){if(!t){if(b.which===38){b.preventDefault();a.incrementMinutes();a.$apply()}else if(b.which===40){b.preventDefault();a.decrementMinutes();a.$apply()}}});d.bind("keydown",function(b){if(!t){if(b.which===38){b.preventDefault();a.incrementSeconds();a.$apply()}else if(b.which===40){b.preventDefault();a.decrementSeconds();a.$apply()}}})};this.setupInputEvents=function(b,c,d){if(a.readonlyInput){a.updateHours=angular.noop;a.updateMinutes=angular.noop;a.updateSeconds=angular.noop;return}var e=function(b,c,d){m.$setViewValue(null);m.$setValidity("time",false);if(angular.isDefined(b)){a.invalidHours=b;if(h){h.$setValidity("hours",false)}}if(angular.isDefined(c)){a.invalidMinutes=c;if(i){i.$setValidity("minutes",false)}}if(angular.isDefined(d)){a.invalidSeconds=d;if(j){j.$setValidity("seconds",false)}}};a.updateHours=function(){var a=v(),b=w();m.$setDirty();if(angular.isDefined(a)&&angular.isDefined(b)){k.setHours(a);k.setMinutes(b);if(k<r||k>s){e(true)}else{z("h")}}else{e(true)}};b.bind("blur",function(b){m.$setTouched();if(F()){A()}else if(a.hours===null||a.hours===""){e(true)}else if(!a.invalidHours&&a.hours<10){a.$apply(function(){a.hours=y(a.hours,!o)})}});a.updateMinutes=function(){var a=w(),b=v();m.$setDirty();if(angular.isDefined(a)&&angular.isDefined(b)){k.setHours(b);k.setMinutes(a);if(k<r||k>s){e(undefined,true)}else{z("m")}}else{e(undefined,true)}};c.bind("blur",function(b){m.$setTouched();if(F()){A()}else if(a.minutes===null){e(undefined,true)}else if(!a.invalidMinutes&&a.minutes<10){a.$apply(function(){a.minutes=y(a.minutes)})}});a.updateSeconds=function(){var a=x();m.$setDirty();if(angular.isDefined(a)){k.setSeconds(a);z("s")}else{e(undefined,undefined,true)}};d.bind("blur",function(b){if(F()){A()}else if(!a.invalidSeconds&&a.seconds<10){a.$apply(function(){a.seconds=y(a.seconds)})}})};this.render=function(){var b=m.$viewValue;if(isNaN(b)){m.$setValidity("time",false);e.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}else{if(b){k=b}if(k<r||k>s){m.$setValidity("time",false);a.invalidHours=true;a.invalidMinutes=true}else{A()}B()}};function z(a){A();m.$setViewValue(new Date(k));B(a)}function A(){if(h){h.$setValidity("hours",true)}if(i){i.$setValidity("minutes",true)}if(j){j.$setValidity("seconds",true)}m.$setValidity("time",true);a.invalidHours=false;a.invalidMinutes=false;a.invalidSeconds=false}function B(b){if(!m.$modelValue){a.hours=null;a.minutes=null;a.seconds=null;a.meridian=n[0]}else{var c=k.getHours(),d=k.getMinutes(),e=k.getSeconds();if(a.showMeridian){c=c===0||c===12?12:c%12}a.hours=b==="h"?c:y(c,!o);if(b!=="m"){a.minutes=y(d)}a.meridian=k.getHours()<12?n[0]:n[1];if(b!=="s"){a.seconds=y(e)}a.meridian=k.getHours()<12?n[0]:n[1]}}function C(a){k=E(k,a);z()}function D(a,b){return E(a,b*60)}function E(a,b){var c=new Date(a.getTime()+b*1e3);var d=new Date(a);d.setHours(c.getHours(),c.getMinutes(),c.getSeconds());return d}function F(){return(a.hours===null||a.hours==="")&&(a.minutes===null||a.minutes==="")&&(!a.showSeconds||a.showSeconds&&(a.seconds===null||a.seconds===""))}a.showSpinners=angular.isDefined(c.showSpinners)?a.$parent.$eval(c.showSpinners):g.showSpinners;a.incrementHours=function(){if(!a.noIncrementHours()){C(p*60*60)}};a.decrementHours=function(){if(!a.noDecrementHours()){C(-p*60*60)}};a.incrementMinutes=function(){if(!a.noIncrementMinutes()){C(q*60)}};a.decrementMinutes=function(){if(!a.noDecrementMinutes()){C(-q*60)}};a.incrementSeconds=function(){if(!a.noIncrementSeconds()){C(u)}};a.decrementSeconds=function(){if(!a.noDecrementSeconds()){C(-u)}};a.toggleMeridian=function(){var b=w(),c=v();if(!a.noToggleMeridian()){if(angular.isDefined(b)&&angular.isDefined(c)){C(12*60*(k.getHours()<12?60:-60))}else{a.meridian=a.meridian===n[0]?n[1]:n[0]}}};a.blur=function(){m.$setTouched()};a.$on("$destroy",function(){while(l.length){l.shift()()}})}]).directive("uibTimepicker",["uibTimepickerConfig",function(a){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(b,c){return c.templateUrl||a.templateUrl},link:function(a,b,c,d){var e=d[0],f=d[1];if(f){e.init(f,b.find("input"))}}}}]);angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d){throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_"'+' but got "'+c+'".')}return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=[9,13,27,38,40];var o=200;var p,q;var r=a.$eval(c.typeaheadMinLength);if(!r&&r!==0){r=1}a.$watch(c.typeaheadMinLength,function(a){r=!a&&a!==0?1:a});var s=a.$eval(c.typeaheadWaitMs)||0;var t=a.$eval(c.typeaheadEditable)!==false;a.$watch(c.typeaheadEditable,function(a){t=a!==false});var u=e(c.typeaheadLoading).assign||angular.noop;var v=c.typeaheadShouldSelect?e(c.typeaheadShouldSelect):function(a,b){var c=b.$event;return c.which===13||c.which===9};var w=e(c.typeaheadOnSelect);var x=angular.isDefined(c.typeaheadSelectOnBlur)?a.$eval(c.typeaheadSelectOnBlur):false;var y=e(c.typeaheadNoResults).assign||angular.noop;var z=c.typeaheadInputFormatter?e(c.typeaheadInputFormatter):undefined;var A=c.typeaheadAppendToBody?a.$eval(c.typeaheadAppendToBody):false;var B=c.typeaheadAppendTo?a.$eval(c.typeaheadAppendTo):null;var C=a.$eval(c.typeaheadFocusFirst)!==false;var D=c.typeaheadSelectOnExact?a.$eval(c.typeaheadSelectOnExact):false;var E=e(c.typeaheadIsOpen).assign||angular.noop;var F=a.$eval(c.typeaheadShowHint)||false;var G=e(c.ngModel);var H=e(c.ngModel+"($$$p)");var I=function(b,c){if(angular.isFunction(G(a))&&q&&q.$options&&q.$options.getterSetter){return H(b,{$$$p:c})}return G.assign(b,c)};var J=m.parse(c.uibTypeahead);var K;var L;var M=a.$new();var N=a.$on("$destroy",function(){M.$destroy()});M.$on("$destroy",N);var O="typeahead-"+M.$id+"-"+Math.floor(Math.random()*1e4);b.attr({"aria-autocomplete":"list","aria-expanded":false,"aria-owns":O});var P,Q;if(F){
P=angular.element("<div></div>");P.css("position","relative");b.after(P);Q=b.clone();Q.attr("placeholder","");Q.attr("tabindex","-1");Q.val("");Q.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"});b.css({position:"relative","vertical-align":"top","background-color":"transparent"});if(Q.attr("id")){Q.removeAttr("id")}P.append(Q);Q.after(b)}var R=angular.element("<div uib-typeahead-popup></div>");R.attr({id:O,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"});if(angular.isDefined(c.typeaheadTemplateUrl)){R.attr("template-url",c.typeaheadTemplateUrl)}if(angular.isDefined(c.typeaheadPopupTemplateUrl)){R.attr("popup-template-url",c.typeaheadPopupTemplateUrl)}var S=function(){if(F){Q.val("")}};var T=function(){M.matches=[];M.activeIdx=-1;b.attr("aria-expanded",false);S()};var U=function(a){return O+"-option-"+a};M.$watch("activeIdx",function(a){if(a<0){b.removeAttr("aria-activedescendant")}else{b.attr("aria-activedescendant",U(a))}});var V=function(a,b){if(M.matches.length>b&&a){return a.toUpperCase()===M.matches[b].label.toUpperCase()}return false};var W=function(c,d){var e={$viewValue:c};u(a,true);y(a,false);f.when(J.source(a,e)).then(function(f){var g=c===p.$viewValue;if(g&&K){if(f&&f.length>0){M.activeIdx=C?0:-1;y(a,false);M.matches.length=0;for(var h=0;h<f.length;h++){e[J.itemName]=f[h];M.matches.push({id:U(h),label:J.viewMapper(M,e),model:f[h]})}M.query=c;Z();b.attr("aria-expanded",true);if(D&&M.matches.length===1&&V(c,0)){if(angular.isNumber(M.debounceUpdate)||angular.isObject(M.debounceUpdate)){k(function(){M.select(0,d)},angular.isNumber(M.debounceUpdate)?M.debounceUpdate:M.debounceUpdate["default"])}else{M.select(0,d)}}if(F){var i=M.matches[0].label;if(angular.isString(c)&&c.length>0&&i.slice(0,c.length).toUpperCase()===c.toUpperCase()){Q.val(c+i.slice(c.length))}else{Q.val("")}}}else{T();y(a,true)}}if(g){u(a,false)}},function(){T();u(a,false);y(a,true)})};if(A){angular.element(i).on("resize",Y);h.find("body").on("scroll",Y)}var X=k(function(){if(M.matches.length){Z()}M.moveInProgress=false},o);M.moveInProgress=false;function Y(){if(!M.moveInProgress){M.moveInProgress=true;M.$digest()}X()}function Z(){M.position=A?l.offset(b):l.position(b);M.position.top+=b.prop("offsetHeight")}M.query=undefined;var $;var _=function(a){$=g(function(){W(a)},s)};var aa=function(){if($){g.cancel($)}};T();M.assignIsOpen=function(b){E(a,b)};M.select=function(d,e){var f={};var h,i;L=true;f[J.itemName]=i=M.matches[d].model;h=J.modelMapper(a,f);I(a,h);p.$setValidity("editable",true);p.$setValidity("parse",true);w(a,{$item:i,$model:h,$label:J.viewMapper(a,f),$event:e});T();if(M.$eval(c.typeaheadFocusOnSelect)!==false){g(function(){b[0].focus()},0,false)}};b.on("keydown",function(b){if(M.matches.length===0||n.indexOf(b.which)===-1){return}var c=v(a,{$event:b});if(M.activeIdx===-1&&c||b.which===9&&!!b.shiftKey){T();M.$digest();return}b.preventDefault();var d;switch(b.which){case 27:b.stopPropagation();T();a.$digest();break;case 38:M.activeIdx=(M.activeIdx>0?M.activeIdx:M.matches.length)-1;M.$digest();d=R[0].querySelectorAll(".uib-typeahead-match")[M.activeIdx];d.parentNode.scrollTop=d.offsetTop;break;case 40:M.activeIdx=(M.activeIdx+1)%M.matches.length;M.$digest();d=R[0].querySelectorAll(".uib-typeahead-match")[M.activeIdx];d.parentNode.scrollTop=d.offsetTop;break;default:if(c){M.$apply(function(){if(angular.isNumber(M.debounceUpdate)||angular.isObject(M.debounceUpdate)){k(function(){M.select(M.activeIdx,b)},angular.isNumber(M.debounceUpdate)?M.debounceUpdate:M.debounceUpdate["default"])}else{M.select(M.activeIdx,b)}})}}});b.bind("focus",function(a){K=true;if(r===0&&!p.$viewValue){g(function(){W(p.$viewValue,a)},0)}});b.bind("blur",function(a){if(x&&M.matches.length&&M.activeIdx!==-1&&!L){L=true;M.$apply(function(){if(angular.isObject(M.debounceUpdate)&&angular.isNumber(M.debounceUpdate.blur)){k(function(){M.select(M.activeIdx,a)},M.debounceUpdate.blur)}else{M.select(M.activeIdx,a)}})}if(!t&&p.$error.editable){p.$setViewValue();M.$apply(function(){p.$setValidity("editable",true);p.$setValidity("parse",true)});b.val("")}K=false;L=false});var ba=function(c){if(b[0]!==c.target&&c.which!==3&&M.matches.length!==0){T();if(!j.$$phase){a.$digest()}}};h.on("click",ba);a.$on("$destroy",function(){h.off("click",ba);if(A||B){ca.remove()}if(A){angular.element(i).off("resize",Y);h.find("body").off("scroll",Y)}R.remove();if(F){P.remove()}});var ca=d(R)(M);if(A){h.find("body").append(ca)}else if(B){angular.element(B).eq(0).append(ca)}else{b.after(ca)}this.init=function(b,c){p=b;q=c;M.debounceUpdate=p.$options&&e(p.$options.debounce)(a);p.$parsers.unshift(function(b){K=true;if(r===0||b&&b.length>=r){if(s>0){aa();_(b)}else{W(b)}}else{u(a,false);aa();T()}if(t){return b}if(!b){p.$setValidity("editable",true);return null}p.$setValidity("editable",false);return undefined});p.$formatters.push(function(b){var c,d;var e={};if(!t){p.$setValidity("editable",true)}if(z){e.$model=b;return z(a,e)}e[J.itemName]=b;c=J.viewMapper(a,e);e[J.itemName]=undefined;d=J.viewMapper(a,e);return c!==d?c:b})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(a,b,c,d){d[2].init(d[0],d[1])}}}).directive("uibTypeaheadPopup",["$$debounce",function(a){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:true,templateUrl:function(a,b){return b.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(b,c,d){b.templateUrl=d.templateUrl;b.isOpen=function(){var a=b.matches.length>0;b.assignIsOpen({isOpen:a});return a};b.isActive=function(a){return b.active===a};b.selectActive=function(a){b.active=a};b.selectMatch=function(c,d){var e=b.debounce();if(angular.isNumber(e)||angular.isObject(e)){a(function(){b.select({activeIdx:c,evt:d})},angular.isNumber(e)?e:e["default"])}else{b.select({activeIdx:c,evt:d})}}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"uib/template/typeahead/typeahead-match.html";a(g).then(function(a){var c=angular.element(a.trim());e.replaceWith(c);b(c)(d)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(a,b,c){var d;d=b.has("$sanitize");function e(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function f(a){return/<.*>/g.test(a)}return function(b,g){if(!d&&f(b)){c.warn("Unsafe use of typeahead please use ngSanitize")}b=g?(""+b).replace(new RegExp(e(g),"gi"),"<strong>$&</strong>"):b;if(!d){b=a.trustAsHtml(b)}return b}}]);angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n'+'  <h4 class="panel-title">\n'+'    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n'+"  </h4>\n"+"</div>\n"+'<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n'+'  <div class="panel-body" ng-transclude></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]);angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n'+'  <span aria-hidden="true">&times;</span>\n'+'  <span class="sr-only">Close</span>\n'+"</button>\n"+"<div ng-transclude></div>\n"+"")}]);angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n'+'<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n'+'  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n'+'  <span class="sr-only">previous</span>\n'+"</a>\n"+'<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n'+'  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n'+'  <span class="sr-only">next</span>\n'+"</a>\n"+'<ol class="carousel-indicators" ng-show="slides.length > 1">\n'+'  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n'+'    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n'+"  </li>\n"+"</ol>\n"+"")}]);angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n'+"")}]);angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n'+'  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n'+'  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n'+'  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n'+"  <thead>\n"+"    <tr>\n"+'      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n'+'      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n'+'      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n'+"    </tr>\n"+"    <tr>\n"+'      <th ng-if="showWeeks" class="text-center"></th>\n'+'      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n'+"    </tr>\n"+"  </thead>\n"+"  <tbody>\n"+'    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n'+'      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n'+'      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n'+'        id="{{::dt.uid}}"\n'+'        ng-class="::dt.customClass">\n'+'        <button type="button" class="btn btn-default btn-sm"\n'+'          uib-is-class="\n'+"            'btn-info' for selectedDt,\n"+"            'active' for activeDt\n"+'            on dt"\n'+'          ng-click="select(dt.date)"\n'+'          ng-disabled="::dt.disabled"\n'+"          tabindex=\"-1\"><span ng-class=\"::{'text-muted': dt.secondary, 'text-info': dt.current}\">{{::dt.label}}</span></button>\n"+"      </td>\n"+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"")}]);angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n'+"  <thead>\n"+"    <tr>\n"+'      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n'+'      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n'+'      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n'+"    </tr>\n"+"  </thead>\n"+"  <tbody>\n"+'    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n'+'      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n'+'        id="{{::dt.uid}}"\n'+'        ng-class="::dt.customClass">\n'+'        <button type="button" class="btn btn-default"\n'+'          uib-is-class="\n'+"            'btn-info' for selectedDt,\n"+"            'active' for activeDt\n"+'            on dt"\n'+'          ng-click="select(dt.date)"\n'+'          ng-disabled="::dt.disabled"\n'+'          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n'+"      </td>\n"+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"")}]);angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n'+"  <thead>\n"+"    <tr>\n"+'      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n'+'      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n'+'      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n'+"    </tr>\n"+"  </thead>\n"+"  <tbody>\n"+'    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n'+'      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n'+'        id="{{::dt.uid}}"\n'+'        ng-class="::dt.customClass">\n'+'        <button type="button" class="btn btn-default"\n'+'          uib-is-class="\n'+"            'btn-info' for selectedDt,\n"+"            'active' for activeDt\n"+'            on dt"\n'+'          ng-click="select(dt.date)"\n'+'          ng-disabled="::dt.disabled"\n'+'          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n'+"      </td>\n"+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"")}]);angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n'+"  <li ng-transclude></li>\n"+'  <li ng-if="showButtonBar" class="uib-button-bar">\n'+'    <span class="btn-group pull-left">\n'+'      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n'+'      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n'+"    </span>\n"+'    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n'+"  </li>\n"+"</ul>\n"+"")}]);angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n"+"")}]);angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(a){a.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n'+'<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n'+"")}]);angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("uib/template/pagination/pagination.html",'<li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n'+'<li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n'+'<li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n'+'<li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n'+'<li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n'+"")}]);angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n'+'<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n'+"")}]);angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n'+'<div class="tooltip-inner" ng-bind="content"></div>\n'+"")}]);angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n'+'<div class="tooltip-inner"\n'+'  uib-tooltip-template-transclude="contentExp()"\n'+'  tooltip-template-transclude-scope="originScope()"></div>\n'+"")}]);angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n'+"\n"+'<div class="popover-inner">\n'+'    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n'+'    <div class="popover-content" ng-bind-html="contentExp()"></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n'+"\n"+'<div class="popover-inner">\n'+'    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n'+'    <div class="popover-content"\n'+'      uib-tooltip-template-transclude="contentExp()"\n'+'      tooltip-template-transclude-scope="originScope()"></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n'+"\n"+'<div class="popover-inner">\n'+'    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n'+'    <div class="popover-content" ng-bind="content"></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n'+"")}]);angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]);angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n'+'  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n'+"    <span ng-repeat-start=\"r in range track by $index\" class=\"sr-only\">({{ $index < value ? '*' : ' ' }})</span>\n"+'    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n'+"</span>\n"+"")}]);angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n'+'  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n'+"</li>\n"+"")}]);angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tabset.html","<div>\n"+"  <ul class=\"nav nav-{{tabset.type || 'tabs'}}\" ng-class=\"{'nav-stacked': vertical, 'nav-justified': justified}\" ng-transclude></ul>\n"+'  <div class="tab-content">\n'+'    <div class="tab-pane"\n'+'         ng-repeat="tab in tabset.tabs"\n'+'         ng-class="{active: tabset.active === tab.index}"\n'+'         uib-tab-content-transclude="tab">\n'+"    </div>\n"+"  </div>\n"+"</div>\n"+"")}]);angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n'+"  <tbody>\n"+'    <tr class="text-center" ng-show="::showSpinners">\n'+'      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n'+"      <td>&nbsp;</td>\n"+'      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n'+'      <td ng-show="showSeconds">&nbsp;</td>\n'+'      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n'+'      <td ng-show="showMeridian"></td>\n'+"    </tr>\n"+"    <tr>\n"+'      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n'+'        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n'+"      </td>\n"+'      <td class="uib-separator">:</td>\n'+'      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n'+'        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n'+"      </td>\n"+'      <td ng-show="showSeconds" class="uib-separator">:</td>\n'+'      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n'+'        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n'+"      </td>\n"+'      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n'+"    </tr>\n"+'    <tr class="text-center" ng-show="::showSpinners">\n'+'      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n'+"      <td>&nbsp;</td>\n"+'      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n'+'      <td ng-show="showSeconds">&nbsp;</td>\n'+'      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n'+'      <td ng-show="showMeridian"></td>\n'+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"")}]);angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-match.html","<a href\n"+'   tabindex="-1"\n'+'   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n'+'   ng-attr-title="{{match.label}}"></a>\n'+"")}]);angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n'+'    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n'+'        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n'+"    </li>\n"+"</ul>\n"+"")}]);angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>');angular.$$uibCarouselCss=true});angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>');angular.$$uibDatepickerCss=true});angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>');angular.$$uibPositionCss=true});angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>');angular.$$uibDatepickerpopupCss=true});angular.module("ui.bootstrap.tooltip").run(function(){
!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>');angular.$$uibTooltipCss=true});angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>');angular.$$uibTimepickerCss=true});angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>');angular.$$uibTypeaheadCss=true});(function(a,b,c){"use strict";b.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(a,d){var e={},f={},g,h=false,i=b.copy,j=b.isUndefined;d.addPollFn(function(){var b=d.cookies();if(g!=b){g=b;i(b,f);i(b,e);if(h)a.$apply()}})();h=true;a.$watch(k);return e;function k(){var a,g,h,i;for(a in f){if(j(e[a])){d.cookies(a,c);delete f[a]}}for(a in e){g=e[a];if(!b.isString(g)){g=""+g;e[a]=g}if(g!==f[a]){d.cookies(a,g);f[a]=g;i=true}}if(i){h=d.cookies();for(a in e){if(e[a]!==h[a]){if(j(h[a])){delete e[a];delete f[a]}else{e[a]=f[a]=h[a]}}}}}}]).factory("$cookieStore",["$cookies",function(a){return{get:function(c){var d=a[c];return d?b.fromJson(d):d},put:function(c,d){a[c]=b.toJson(d)},remove:function(b){delete a[b]}}}])})(window,window.angular);(function(a,b,c){"use strict";b.module("ngMessages",[]).directive("ngMessages",["$compile","$animate","$templateRequest",function(a,c,d){var e="ng-active";var f="ng-inactive";return{restrict:"AE",controller:function(){this.$renderNgMessageClasses=b.noop;var a=[];this.registerMessage=function(b,c){for(var d=0;d<a.length;d++){if(a[d].type==c.type){if(b!=d){var e=a[b];a[b]=a[d];if(b<a.length){a[d]=e}else{a.splice(0,d)}}return}}a.splice(b,0,c)};this.renderMessages=function(c,d){c=c||{};var e;b.forEach(a,function(a){if((!e||d)&&f(c[a.type])){a.attach();e=true}else{a.detach()}});this.renderElementClasses(e);function f(a){return a!==null&&a!==false&&a}}},require:"ngMessages",link:function(g,h,i,j){j.renderElementClasses=function(a){a?c.setClass(h,e,f):c.setClass(h,f,e)};var k=b.isString(i.ngMessagesMultiple)||b.isString(i.multiple);var l,m=i.ngMessages||i["for"];g.$watchCollection(m,function(a){l=a;j.renderMessages(a,k)});var n=i.ngMessagesInclude||i.include;if(n){d(n).then(function c(d){var e,f=b.element("<div/>").html(d);b.forEach(f.children(),function(c){c=b.element(c);e?e.after(c):h.prepend(c);e=c;a(c)(g)});j.renderMessages(l,k)})}}}}]).directive("ngMessage",["$animate",function(a){var b=8;return{require:"^ngMessages",transclude:"element",terminal:true,restrict:"AE",link:function(c,d,e,f,g){var h,i;var j=d[0];var k=j.parentNode;for(var l=0,m=0;l<k.childNodes.length;l++){var n=k.childNodes[l];if(n.nodeType==b&&n.nodeValue.indexOf("ngMessage")>=0){if(n===j){h=m;break}m++}}f.registerMessage(h,{type:e.ngMessage||e.when,attach:function(){if(!i){g(c,function(b){a.enter(b,null,d);i=b})}},detach:function(b){if(i){a.leave(i);i=null}}})}}}])})(window,window.angular);(function(a,b,c){"use strict";var d=b.$$minErr("$resource");var e=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;function f(a){return a!=null&&a!==""&&a!=="hasOwnProperty"&&e.test("."+a)}function g(a,b){if(!f(b)){throw d("badmember",'Dotted member path "@{0}" is invalid.',b)}var e=b.split(".");for(var g=0,h=e.length;g<h&&a!==c;g++){var i=e[g];a=a!==null?a[i]:c}return a}function h(a,c){c=c||{};b.forEach(c,function(a,b){delete c[b]});for(var d in a){if(a.hasOwnProperty(d)&&!(d.charAt(0)==="$"&&d.charAt(1)==="$")){c[d]=a[d]}}return c}b.module("ngResource",["ng"]).provider("$resource",function(){var a=this;this.defaults={stripTrailingSlashes:true,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:true},remove:{method:"DELETE"},delete:{method:"DELETE"}}};this.$get=["$http","$q",function(e,f){var i=b.noop,j=b.forEach,k=b.extend,l=b.copy,m=b.isFunction;function n(a){return o(a,true).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function o(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function p(b,c){this.template=b;this.defaults=k({},a.defaults,c);this.urlParams={}}p.prototype={setUrlParams:function(a,c,e){var f=this,g=e||f.template,h,i;var k=f.urlParams={};j(g.split(/\W/),function(a){if(a==="hasOwnProperty"){throw d("badname","hasOwnProperty is not a valid parameter name.")}if(!new RegExp("^\\d+$").test(a)&&a&&new RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(g)){k[a]=true}});g=g.replace(/\\:/g,":");c=c||{};j(f.urlParams,function(a,d){h=c.hasOwnProperty(d)?c[d]:f.defaults[d];if(b.isDefined(h)&&h!==null){i=n(h);g=g.replace(new RegExp(":"+d+"(\\W|$)","g"),function(a,b){return i+b})}else{g=g.replace(new RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){if(c.charAt(0)=="/"){return c}else{return b+c}})}});if(f.defaults.stripTrailingSlashes){g=g.replace(/\/+$/,"")||"/"}g=g.replace(/\/\.(?=\w+($|\?))/,".");a.url=g.replace(/\/\\\./,"/.");j(c,function(b,c){if(!f.urlParams[c]){a.params=a.params||{};a.params[c]=b}})}};function q(n,o,r,s){var t=new p(n,s);r=k({},a.defaults.actions,r);function u(a,b){var c={};b=k({},o,b);j(b,function(b,d){if(m(b)){b=b()}c[d]=b&&b.charAt&&b.charAt(0)=="@"?g(a,b.substr(1)):b});return c}function v(a){return a.resource}function w(a){h(a||{},this)}w.prototype.toJSON=function(){var a=k({},this);delete a.$promise;delete a.$resolved;return a};j(r,function(a,g){var n=/^(POST|PUT|PATCH)$/i.test(a.method);w[g]=function(o,p,q,r){var s={},x,y,z;switch(arguments.length){case 4:z=r;y=q;case 3:case 2:if(m(p)){if(m(o)){y=o;z=p;break}y=p;z=q}else{s=o;x=p;y=q;break}case 1:if(m(o))y=o;else if(n)x=o;else s=o;break;case 0:break;default:throw d("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var A=this instanceof w;var B=A?x:a.isArray?[]:new w(x);var C={};var D=a.interceptor&&a.interceptor.response||v;var E=a.interceptor&&a.interceptor.responseError||c;j(a,function(a,b){if(b!="params"&&b!="isArray"&&b!="interceptor"){C[b]=l(a)}});if(n)C.data=x;t.setUrlParams(C,k({},u(x,a.params||{}),s),a.url);var F=e(C).then(function(c){var e=c.data,f=B.$promise;if(e){if(b.isArray(e)!==!!a.isArray){throw d("badcfg","Error in resource configuration for action `{0}`. Expected response to "+"contain an {1} but got an {2}",g,a.isArray?"array":"object",b.isArray(e)?"array":"object")}if(a.isArray){B.length=0;j(e,function(a){if(typeof a==="object"){B.push(new w(a))}else{B.push(a)}})}else{h(e,B);B.$promise=f}}B.$resolved=true;c.resource=B;return c},function(a){B.$resolved=true;(z||i)(a);return f.reject(a)});F=F.then(function(a){var b=D(a);(y||i)(b,a.headers);return b},E);if(!A){B.$promise=F;B.$resolved=false;return B}return F};w.prototype["$"+g]=function(a,b,c){if(m(a)){c=b;b=a;a={}}var d=w[g].call(this,a,this,b,c);return d.$promise||d}});w.bind=function(a){return q(n,k({},o,a),r)};return w}return q}]})})(window,window.angular);(function(a,b,c){"use strict";var d=b.module("ngRoute",["ng"]).provider("$route",f),e=b.$$minErr("ngRoute");function f(){function a(a,c){return b.extend(Object.create(a),c)}var c={};this.when=function(a,e){var f=b.copy(e);if(b.isUndefined(f.reloadOnSearch)){f.reloadOnSearch=true}if(b.isUndefined(f.caseInsensitiveMatch)){f.caseInsensitiveMatch=this.caseInsensitiveMatch}c[a]=b.extend(f,a&&d(a,f));if(a){var g=a[a.length-1]=="/"?a.substr(0,a.length-1):a+"/";c[g]=b.extend({redirectTo:a},d(g,f))}return this};this.caseInsensitiveMatch=false;function d(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){var f=d==="?"?d:null;var g=d==="*"?d:null;e.push({name:c,optional:!!f});b=b||"";return""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1");d.regexp=new RegExp("^"+a+"$",c?"i":"");return d}this.otherwise=function(a){if(typeof a==="string"){a={redirectTo:a}}this.when(null,a);return this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(d,f,g,h,i,j,k){var l=false,m,n,o={routes:c,reload:function(){l=true;d.$evalAsync(function(){q();r()})},updateParams:function(a){if(this.current&&this.current.$$route){a=b.extend({},this.current.params,a);f.path(t(this.current.$$route.originalPath,a));f.search(a)}else{throw e("norout","Tried updating route when with no current route")}}};d.$on("$locationChangeStart",q);d.$on("$locationChangeSuccess",r);return o;function p(a,b){var c=b.keys,d={};if(!b.regexp)return null;var e=b.regexp.exec(a);if(!e)return null;for(var f=1,g=e.length;f<g;++f){var h=c[f-1];var i=e[f];if(h&&i){d[h.name]=i}}return d}function q(a){var c=o.current;m=s();n=m&&c&&m.$$route===c.$$route&&b.equals(m.pathParams,c.pathParams)&&!m.reloadOnSearch&&!l;if(!n&&(c||m)){if(d.$broadcast("$routeChangeStart",m,c).defaultPrevented){if(a){a.preventDefault()}}}}function r(){var a=o.current;var c=m;if(n){a.params=c.params;b.copy(a.params,g);d.$broadcast("$routeUpdate",a)}else if(c||a){l=false;o.current=c;if(c){if(c.redirectTo){if(b.isString(c.redirectTo)){f.path(t(c.redirectTo,c.params)).search(c.params).replace()}else{f.url(c.redirectTo(c.pathParams,f.path(),f.search())).replace()}}}h.when(c).then(function(){if(c){var a=b.extend({},c.resolve),d,e;b.forEach(a,function(c,d){a[d]=b.isString(c)?i.get(c):i.invoke(c,null,null,d)});if(b.isDefined(d=c.template)){if(b.isFunction(d)){d=d(c.params)}}else if(b.isDefined(e=c.templateUrl)){if(b.isFunction(e)){e=e(c.params)}if(b.isDefined(e)){c.loadedTemplateUrl=k.valueOf(e);d=j(e)}}if(b.isDefined(d)){a["$template"]=d}return h.all(a)}}).then(function(e){if(c==o.current){if(c){c.locals=e;b.copy(c.params,g)}d.$broadcast("$routeChangeSuccess",c,a)}},function(b){if(c==o.current){d.$broadcast("$routeChangeError",c,a,b)}})}}function s(){var d,e;b.forEach(c,function(c,g){if(!e&&(d=p(f.path(),c))){e=a(c,{params:b.extend({},f.search(),d),pathParams:d});e.$$route=c}});return e||c[null]&&a(c[null],{params:{},pathParams:{}})}function t(a,c){var d=[];b.forEach((a||"").split(":"),function(a,b){if(b===0){d.push(a)}else{var e=a.match(/(\w+)(?:[?*])?(.*)/);var f=e[1];d.push(c[f]);d.push(e[2]||"");delete c[f]}});return d.join("")}}]}d.provider("$routeParams",g);function g(){this.$get=function(){return{}}}d.directive("ngView",h);d.directive("ngView",i);h.$inject=["$route","$anchorScroll","$animate"];function h(a,c,d){return{restrict:"ECA",terminal:true,priority:400,transclude:"element",link:function(e,f,g,h,i){var j,k,l,m=g.autoscroll,n=g.onload||"";e.$on("$routeChangeSuccess",p);p();function o(){if(l){d.cancel(l);l=null}if(j){j.$destroy();j=null}if(k){l=d.leave(k);l.then(function(){l=null});k=null}}function p(){var g=a.current&&a.current.locals,h=g&&g.$template;if(b.isDefined(h)){var l=e.$new();var p=a.current;var q=i(l,function(a){d.enter(a,null,k||f).then(function a(){if(b.isDefined(m)&&(!m||e.$eval(m))){c()}});o()});k=q;j=p.scope=l;j.$emit("$viewContentLoaded");j.$eval(n)}else{o()}}}}}i.$inject=["$compile","$controller","$route"];function i(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());if(f.controller){g.$scope=d;var i=b(f.controller,g);if(f.controllerAs){d[f.controllerAs]=i}e.data("$ngControllerController",i);e.children().data("$ngControllerController",i)}h(d)}}}})(window,window.angular);(function(a,b,c){"use strict";var d=b.$$minErr("$sanitize");function e(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];E(b,I(c,function(b,c){return!/^unsafe/.test(a(b,c))}));return c.join("")}}]}function f(a){var c=[];var d=I(c,b.noop);d.chars(a);return c.join("")}var g=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,h=/^<\/\s*([\w:-]+)[^>]*>/,i=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,j=/^</,k=/^<\//,l=/<!--(.*?)-->/g,m=/<!DOCTYPE([^>]*?)>/i,n=/<!\[CDATA\[(.*?)]]>/g,o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,p=/([^\#-~| |!])/g;var q=D("area,br,col,hr,img,wbr");var r=D("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),s=D("rp,rt"),t=b.extend({},s,r);var u=b.extend({},r,D("address,article,"+"aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,"+"h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul"));var v=b.extend({},s,D("a,abbr,acronym,b,"+"bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,"+"samp,small,span,strike,strong,sub,sup,time,tt,u,var"));var w=D("animate,animateColor,animateMotion,animateTransform,circle,defs,"+"desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,"+"line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,"+"stop,svg,switch,text,title,tspan,use");var x=D("script,style");var y=b.extend({},q,u,v,t,w);var z=D("background,cite,href,longdesc,src,usemap,xlink:href");var A=D("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,"+"color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,"+"ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,"+"scope,scrolling,shape,size,span,start,summary,target,title,type,"+"valign,value,vspace,width");var B=D("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,"+"attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,"+"color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,"+"font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,"+"gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,"+"keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,"+"markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,"+"overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,"+"repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,"+"stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,"+"stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,"+"stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,"+"underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,"+"viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,"+"xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,"+"zoomAndPan");var C=b.extend({},z,B,A);function D(a){var b={},c=a.split(","),d;for(d=0;d<c.length;d++)b[c[d]]=true;return b}function E(a,c){if(typeof a!=="string"){if(a===null||typeof a==="undefined"){a=""}else{a=""+a}}var e,f,o,p=[],r=a,s;p.last=function(){return p[p.length-1]};while(a){s="";f=true;if(!p.last()||!x[p.last()]){if(a.indexOf("\x3c!--")===0){e=a.indexOf("--",4);if(e>=0&&a.lastIndexOf("--\x3e",e)===e){if(c.comment)c.comment(a.substring(4,e));a=a.substring(e+3);f=false}}else if(m.test(a)){o=a.match(m);if(o){a=a.replace(o[0],"");f=false}}else if(k.test(a)){o=a.match(h);if(o){a=a.substring(o[0].length);o[0].replace(h,y);f=false}}else if(j.test(a)){o=a.match(g);if(o){if(o[4]){a=a.substring(o[0].length);o[0].replace(g,w)}f=false}else{s+="<";a=a.substring(1)}}if(f){e=a.indexOf("<");s+=e<0?a:a.substring(0,e);a=e<0?"":a.substring(e);if(c.chars)c.chars(G(s))}}else{a=a.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+p.last()+"[^>]*>","i"),function(a,b){b=b.replace(l,"$1").replace(n,"$1");if(c.chars)c.chars(G(b));return""});y("",p.last())}if(a==r){throw d("badparse","The sanitizer was unable to parse the following block "+"of html: {0}",a)}r=a}y();function w(a,d,e,f){d=b.lowercase(d);if(u[d]){while(p.last()&&v[p.last()]){y("",p.last())}}if(t[d]&&p.last()==d){y("",d)}f=q[d]||!!f;if(!f)p.push(d);var g={};e.replace(i,function(a,b,c,d,e){var f=c||d||e||"";g[b]=G(f)});if(c.start)c.start(d,g,f)}function y(a,d){var e=0,f;d=b.lowercase(d);if(d)for(e=p.length-1;e>=0;e--)if(p[e]==d)break;if(e>=0){for(f=p.length-1;f>=e;f--)if(c.end)c.end(p[f]);p.length=e}}}var F=document.createElement("pre");function G(a){if(!a){return""}F.innerHTML=a.replace(/</g,"&lt;");return F.textContent}function H(a){return a.replace(/&/g,"&amp;").replace(o,function(a){var b=a.charCodeAt(0);var c=a.charCodeAt(1);return"&#"+((b-55296)*1024+(c-56320)+65536)+";"}).replace(p,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function I(a,c){var d=false;var e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a);if(!d&&x[a]){d=a}if(!d&&y[a]===true){e("<");e(a);b.forEach(f,function(d,f){var g=b.lowercase(f);var h=a==="img"&&g==="src"||g==="background";if(C[g]===true&&(z[g]!==true||c(d,h))){e(" ");e(f);e('="');e(H(d));e('"')}});e(g?"/>":">")}},end:function(a){a=b.lowercase(a);if(!d&&y[a]===true){e("</");e(a);e(">")}if(a==d){d=false}},chars:function(a){if(!d){e(H(a))}}}}b.module("ngSanitize",[]).provider("$sanitize",e);b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/i,d=/^mailto:/i;return function(e,g){if(!e)return e;var h;var i=e;var j=[];var k;var l;while(h=i.match(c)){k=h[0];if(!h[2]&&!h[4]){k=(h[3]?"http://":"mailto:")+k}l=h.index;m(i.substr(0,l));n(k,h[0].replace(d,""));i=i.substring(l+h[0].length)}m(i);return a(j.join(""));function m(a){if(!a){return}j.push(f(a))}function n(a,c){j.push("<a ");if(b.isDefined(g)){j.push('target="',g,'" ')}j.push('href="',a.replace(/"/g,"&quot;"),'">');m(c);j.push("</a>")}}}])})(window,window.angular);(function(a,b,c){"use strict";var d=b.module("ngTouch",[]);function e(a){return b.lowercase(a.nodeName||a[0]&&a[0].nodeName)}d.factory("$swipe",[function(){var a=10;var c={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};function d(a){var b=a.originalEvent||a;var c=b.touches&&b.touches.length?b.touches:[b];var d=b.changedTouches&&b.changedTouches[0]||c[0];return{x:d.clientX,y:d.clientY}}function e(a,d){var e=[];b.forEach(a,function(a){var b=c[a][d];if(b){e.push(b)}});return e.join(" ")}return{bind:function(b,c,f){var g,h;var i;var j;var k=false;f=f||["mouse","touch"];b.on(e(f,"start"),function(a){i=d(a);k=true;g=0;h=0;j=i;c["start"]&&c["start"](i,a)});var l=e(f,"cancel");if(l){b.on(l,function(a){k=false;c["cancel"]&&c["cancel"](a)})}b.on(e(f,"move"),function(b){if(!k)return;if(!i)return;var e=d(b);g+=Math.abs(e.x-j.x);h+=Math.abs(e.y-j.y);j=e;if(g<a&&h<a){return}if(h>g){k=false;c["cancel"]&&c["cancel"](b);return}else{b.preventDefault();c["move"]&&c["move"](e,b)}});b.on(e(f,"end"),function(a){if(!k)return;k=false;c["end"]&&c["end"](d(a),a)})}}}]);d.config(["$provide",function(a){a.decorator("ngClickDirective",["$delegate",function(a){a.shift();return a}])}]);d.directive("ngClick",["$parse","$timeout","$rootElement",function(a,c,d){var f=750;var g=12;var h=2500;var i=25;var j="ng-click-active";var k;var l;var m;function n(a,b,c,d){return Math.abs(a-c)<i&&Math.abs(b-d)<i}function o(a,b,c){for(var d=0;d<a.length;d+=2){if(n(a[d],a[d+1],b,c)){a.splice(d,d+2);return true}}return false}function p(a){if(Date.now()-k>h){return}var b=a.touches&&a.touches.length?a.touches:[a];var c=b[0].clientX;var d=b[0].clientY;if(c<1&&d<1){return}if(m&&m[0]===c&&m[1]===d){return}if(m){m=null}if(e(a.target)==="label"){m=[c,d]}if(o(l,c,d)){return}a.stopPropagation();a.preventDefault();a.target&&a.target.blur&&a.target.blur()}function q(a){var b=a.touches&&a.touches.length?a.touches:[a];var d=b[0].clientX;var e=b[0].clientY;l.push(d,e);c(function(){for(var a=0;a<l.length;a+=2){if(l[a]==d&&l[a+1]==e){l.splice(a,a+2);return}}},h,false)}function r(a,b){if(!l){d[0].addEventListener("click",p,true);d[0].addEventListener("touchstart",q,true);l=[]}k=Date.now();o(l,a,b)}return function(c,d,e){var h=a(e.ngClick),i=false,k,l,m,n;function o(){i=false;d.removeClass(j)}d.on("touchstart",function(a){i=true;k=a.target?a.target:a.srcElement;if(k.nodeType==3){k=k.parentNode}d.addClass(j);l=Date.now();var b=a.originalEvent||a;var c=b.touches&&b.touches.length?b.touches:[b];var e=c[0];m=e.clientX;n=e.clientY});d.on("touchmove",function(a){o()});d.on("touchcancel",function(a){o()});d.on("touchend",function(a){var c=Date.now()-l;var h=a.originalEvent||a;var j=h.changedTouches&&h.changedTouches.length?h.changedTouches:h.touches&&h.touches.length?h.touches:[h];var p=j[0];var q=p.clientX;var s=p.clientY;var t=Math.sqrt(Math.pow(q-m,2)+Math.pow(s-n,2));if(i&&c<f&&t<g){r(q,s);if(k){k.blur()}if(!b.isDefined(e.disabled)||e.disabled===false){d.triggerHandler("click",[a])}}o()});d.onclick=function(a){};d.on("click",function(a,b){c.$apply(function(){h(c,{$event:b||a})})});d.on("mousedown",function(a){d.addClass(j)});d.on("mousemove mouseup",function(a){d.removeClass(j)})}}]);function f(a,c,e){d.directive(a,["$parse","$swipe",function(d,f){var g=75;var h=.3;var i=30;return function(j,k,l){var m=d(l[a]);var n,o;function p(a){if(!n)return false;var b=Math.abs(a.y-n.y);var d=(a.x-n.x)*c;return o&&b<g&&d>0&&d>i&&b/d<h}var q=["touch"];if(!b.isDefined(l["ngSwipeDisableMouse"])){q.push("mouse")}f.bind(k,{start:function(a,b){n=a;o=true},cancel:function(a){o=false},end:function(a,b){if(p(a)){j.$apply(function(){k.triggerHandler(e);m(j,{$event:b})})}}},q)}}])}f("ngSwipeLeft",-1,"swipeleft");f("ngSwipeRight",1,"swiperight")})(window,window.angular);if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||b[0]==1&&b[1]==9&&b[2]<1||b[0]>3){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}}(jQuery);+function(a){"use strict";function b(){var a=document.createElement("bootstrap");var b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b){if(a.style[c]!==undefined){return{end:b[c]}}}return false}a.fn.emulateTransitionEnd=function(b){var c=false;var d=this;a(this).one("bsTransitionEnd",function(){c=true});var e=function(){if(!c)a(d).trigger(a.support.transition.end)};setTimeout(e,b);return this};a(function(){a.support.transition=b();if(!a.support.transition)return;a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}}})}(jQuery);+function(a){"use strict";var b='[data-dismiss="alert"]';var c=function(c){a(c).on("click",b,this.close)};c.VERSION="3.4.1";c.TRANSITION_DURATION=150;c.prototype.close=function(b){var d=a(this);var e=d.attr("data-target");if(!e){e=d.attr("href");e=e&&e.replace(/.*(?=#[^\s]*$)/,"")}e=e==="#"?[]:e;var f=a(document).find(e);if(b)b.preventDefault();if(!f.length){f=d.closest(".alert")}f.trigger(b=a.Event("close.bs.alert"));if(b.isDefaultPrevented())return;f.removeClass("in");function g(){f.detach().trigger("closed.bs.alert").remove()}a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",g).emulateTransitionEnd(c.TRANSITION_DURATION):g()};function d(b){return this.each(function(){var d=a(this);var e=d.data("bs.alert");if(!e)d.data("bs.alert",e=new c(this));if(typeof b=="string")e[b].call(d)})}var e=a.fn.alert;a.fn.alert=d;a.fn.alert.Constructor=c;a.fn.alert.noConflict=function(){a.fn.alert=e;return this};a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery);+function(a){"use strict";var b=function(c,d){this.$element=a(c);this.options=a.extend({},b.DEFAULTS,d);this.isLoading=false};b.VERSION="3.4.1";b.DEFAULTS={loadingText:"loading..."};b.prototype.setState=function(b){var c="disabled";var d=this.$element;var e=d.is("input")?"val":"html";var f=d.data();b+="Text";if(f.resetText==null)d.data("resetText",d[e]());setTimeout(a.proxy(function(){d[e](f[b]==null?this.options[b]:f[b]);if(b=="loadingText"){this.isLoading=true;d.addClass(c).attr(c,c).prop(c,true)}else if(this.isLoading){this.isLoading=false;d.removeClass(c).removeAttr(c).prop(c,false)}},this),0)};b.prototype.toggle=function(){var a=true;var b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");if(c.prop("type")=="radio"){if(c.prop("checked"))a=false;b.find(".active").removeClass("active");this.$element.addClass("active")}else if(c.prop("type")=="checkbox"){if(c.prop("checked")!==this.$element.hasClass("active"))a=false;this.$element.toggleClass("active")}c.prop("checked",this.$element.hasClass("active"));if(a)c.trigger("change")}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"));this.$element.toggleClass("active")}};function c(c){return this.each(function(){var d=a(this);var e=d.data("bs.button");var f=typeof c=="object"&&c;if(!e)d.data("bs.button",e=new b(this,f));if(c=="toggle")e.toggle();else if(c)e.setState(c)})}var d=a.fn.button;a.fn.button=c;a.fn.button.Constructor=b;a.fn.button.noConflict=function(){a.fn.button=d;return this};a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(b){var d=a(b.target).closest(".btn");c.call(d,"toggle");if(!a(b.target).is('input[type="radio"], input[type="checkbox"]')){b.preventDefault();if(d.is("input,button"))d.trigger("focus");else d.find("input:visible,button:visible").first().trigger("focus")}}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery);+function(a){"use strict";var b=function(b,c){this.$element=a(b);this.$indicators=this.$element.find(".carousel-indicators");this.options=c;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};b.VERSION="3.4.1";b.TRANSITION_DURATION=600;b.DEFAULTS={interval:5e3,pause:"hover",wrap:true,keyboard:true};b.prototype.keydown=function(a){if(/input|textarea/i.test(a.target.tagName))return;switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()};b.prototype.cycle=function(b){b||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval));return this};b.prototype.getItemIndex=function(a){this.$items=a.parent().children(".item");return this.$items.index(a||this.$active)};b.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b);var d=a=="prev"&&c===0||a=="next"&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e=a=="prev"?-1:1;var f=(c+e)%this.$items.length;return this.$items.eq(f)};b.prototype.to=function(a){var b=this;var c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(a>this.$items.length-1||a<0)return;if(this.sliding)return this.$element.one("slid.bs.carousel",function(){b.to(a)});if(c==a)return this.pause().cycle();return this.slide(a>c?"next":"prev",this.$items.eq(a))};b.prototype.pause=function(b){b||(this.paused=true);if(this.$element.find(".next, .prev").length&&a.support.transition){this.$element.trigger(a.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};b.prototype.next=function(){if(this.sliding)return;return this.slide("next")};b.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")};b.prototype.slide=function(c,d){var e=this.$element.find(".item.active");var f=d||this.getItemForDirection(c,e);var g=this.interval;var h=c=="next"?"left":"right";var i=this;if(f.hasClass("active"))return this.sliding=false;var j=f[0];var k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});this.$element.trigger(k);if(k.isDefaultPrevented())return;this.sliding=true;g&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});if(a.support.transition&&this.$element.hasClass("slide")){f.addClass(c);if(typeof f==="object"&&f.length){f[0].offsetWidth}e.addClass(h);f.addClass(h);e.one("bsTransitionEnd",function(){f.removeClass([c,h].join(" ")).addClass("active");e.removeClass(["active",h].join(" "));i.sliding=false;setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(b.TRANSITION_DURATION)}else{e.removeClass("active");f.addClass("active");this.sliding=false;this.$element.trigger(m)}g&&this.cycle();return this};function c(c){
return this.each(function(){var d=a(this);var e=d.data("bs.carousel");var f=a.extend({},b.DEFAULTS,d.data(),typeof c=="object"&&c);var g=typeof c=="string"?c:f.slide;if(!e)d.data("bs.carousel",e=new b(this,f));if(typeof c=="number")e.to(c);else if(g)e[g]();else if(f.interval)e.pause().cycle()})}var d=a.fn.carousel;a.fn.carousel=c;a.fn.carousel.Constructor=b;a.fn.carousel.noConflict=function(){a.fn.carousel=d;return this};var e=function(b){var d=a(this);var e=d.attr("href");if(e){e=e.replace(/.*(?=#[^\s]+$)/,"")}var f=d.attr("data-target")||e;var g=a(document).find(f);if(!g.hasClass("carousel"))return;var h=a.extend({},g.data(),d.data());var i=d.attr("data-slide-to");if(i)h.interval=false;c.call(g,h);if(i){g.data("bs.carousel").to(i)}b.preventDefault()};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e);a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery);+function(a){"use strict";var b=function(c,d){this.$element=a(c);this.options=a.extend({},b.DEFAULTS,d);this.$trigger=a('[data-toggle="collapse"][href="#'+c.id+'"],'+'[data-toggle="collapse"][data-target="#'+c.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};b.VERSION="3.4.1";b.TRANSITION_DURATION=350;b.DEFAULTS={toggle:true};b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"};b.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var c;var e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(e&&e.length){c=e.data("bs.collapse");if(c&&c.transitioning)return}var f=a.Event("show.bs.collapse");this.$element.trigger(f);if(f.isDefaultPrevented())return;if(e&&e.length){d.call(e,"hide");c||e.data("bs.collapse",null)}var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(b.TRANSITION_DURATION)[g](this.$element[0][i])};b.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var c=a.Event("hide.bs.collapse");this.$element.trigger(c);if(c.isDefaultPrevented())return;var d=this.dimension();this.$element[d](this.$element[d]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var e=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!a.support.transition)return e.call(this);this.$element[d](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(b.TRANSITION_DURATION)};b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};b.prototype.getParent=function(){return a(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(b,d){var e=a(d);this.addAriaAndCollapsedClass(c(e),e)},this)).end()};b.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c);b.toggleClass("collapsed",!c).attr("aria-expanded",c)};function c(b){var c;var d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(document).find(d)}function d(c){return this.each(function(){var d=a(this);var e=d.data("bs.collapse");var f=a.extend({},b.DEFAULTS,d.data(),typeof c=="object"&&c);if(!e&&f.toggle&&/show|hide/.test(c))f.toggle=false;if(!e)d.data("bs.collapse",e=new b(this,f));if(typeof c=="string")e[c]()})}var e=a.fn.collapse;a.fn.collapse=d;a.fn.collapse.Constructor=b;a.fn.collapse.noConflict=function(){a.fn.collapse=e;return this};a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(b){var e=a(this);if(!e.attr("data-target"))b.preventDefault();var f=c(e);var g=f.data("bs.collapse");var h=g?"toggle":e.data();d.call(f,h)})}(jQuery);+function(a){"use strict";var b=".dropdown-backdrop";var c='[data-toggle="dropdown"]';var d=function(b){a(b).on("click.bs.dropdown",this.toggle)};d.VERSION="3.4.1";function e(b){var c=b.attr("data-target");if(!c){c=b.attr("href");c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,"")}var d=c!=="#"?a(document).find(c):null;return d&&d.length?d:b.parent()}function f(d){if(d&&d.which===3)return;a(b).remove();a(c).each(function(){var b=a(this);var c=e(b);var f={relatedTarget:this};if(!c.hasClass("open"))return;if(d&&d.type=="click"&&/input|textarea/i.test(d.target.tagName)&&a.contains(c[0],d.target))return;c.trigger(d=a.Event("hide.bs.dropdown",f));if(d.isDefaultPrevented())return;b.attr("aria-expanded","false");c.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f))})}d.prototype.toggle=function(b){var c=a(this);if(c.is(".disabled, :disabled"))return;var d=e(c);var g=d.hasClass("open");f();if(!g){if("ontouchstart"in document.documentElement&&!d.closest(".navbar-nav").length){a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",f)}var h={relatedTarget:this};d.trigger(b=a.Event("show.bs.dropdown",h));if(b.isDefaultPrevented())return;c.trigger("focus").attr("aria-expanded","true");d.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return false};d.prototype.keydown=function(b){if(!/(38|40|27|32)/.test(b.which)||/input|textarea/i.test(b.target.tagName))return;var d=a(this);b.preventDefault();b.stopPropagation();if(d.is(".disabled, :disabled"))return;var f=e(d);var g=f.hasClass("open");if(!g&&b.which!=27||g&&b.which==27){if(b.which==27)f.find(c).trigger("focus");return d.trigger("click")}var h=" li:not(.disabled):visible a";var i=f.find(".dropdown-menu"+h);if(!i.length)return;var j=i.index(b.target);if(b.which==38&&j>0)j--;if(b.which==40&&j<i.length-1)j++;if(!~j)j=0;i.eq(j).trigger("focus")};function g(b){return this.each(function(){var c=a(this);var e=c.data("bs.dropdown");if(!e)c.data("bs.dropdown",e=new d(this));if(typeof b=="string")e[b].call(c)})}var h=a.fn.dropdown;a.fn.dropdown=g;a.fn.dropdown.Constructor=d;a.fn.dropdown.noConflict=function(){a.fn.dropdown=h;return this};a(document).on("click.bs.dropdown.data-api",f).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",c,d.prototype.toggle).on("keydown.bs.dropdown.data-api",c,d.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",d.prototype.keydown)}(jQuery);+function(a){"use strict";var b=function(b,c){this.options=c;this.$body=a(document.body);this.$element=a(b);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom";if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};b.VERSION="3.4.1";b.TRANSITION_DURATION=300;b.BACKDROP_TRANSITION_DURATION=150;b.DEFAULTS={backdrop:true,keyboard:true,show:true};b.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)};b.prototype.show=function(c){var d=this;var e=a.Event("show.bs.modal",{relatedTarget:c});this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){if(a(b.target).is(d.$element))d.ignoreBackdropClick=true})});this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");if(!d.$element.parent().length){d.$element.appendTo(d.$body)}d.$element.show().scrollTop(0);d.adjustDialog();if(e){d.$element[0].offsetWidth}d.$element.addClass("in");d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:c});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(b.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)})};b.prototype.hide=function(c){if(c)c.preventDefault();c=a.Event("hide.bs.modal");this.$element.trigger(c);if(!this.isShown||c.isDefaultPrevented())return;this.isShown=false;this.escape();this.resize();a(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(b.TRANSITION_DURATION):this.hideModal()};b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){if(document!==a.target&&this.$element[0]!==a.target&&!this.$element.has(a.target).length){this.$element.trigger("focus")}},this))};b.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){a.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}};b.prototype.resize=function(){if(this.isShown){a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this))}else{a(window).off("resize.bs.modal")}};b.prototype.hideModal=function(){var a=this;this.$element.hide();this.backdrop(function(){a.$body.removeClass("modal-open");a.resetAdjustments();a.resetScrollbar();a.$element.trigger("hidden.bs.modal")})};b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};b.prototype.backdrop=function(c){var d=this;var e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(a.target!==a.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));if(f)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!c)return;f?this.$backdrop.one("bsTransitionEnd",c).emulateTransitionEnd(b.BACKDROP_TRANSITION_DURATION):c()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop();c&&c()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(b.BACKDROP_TRANSITION_DURATION):g()}else if(c){c()}};b.prototype.handleUpdate=function(){this.adjustDialog()};b.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})};b.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};b.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a;this.scrollbarWidth=this.measureScrollbar()};b.prototype.setScrollbar=function(){var b=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var c=this.scrollbarWidth;if(this.bodyIsOverflowing){this.$body.css("padding-right",b+c);a(this.fixedContent).each(function(b,d){var e=d.style.paddingRight;var f=a(d).css("padding-right");a(d).data("padding-right",e).css("padding-right",parseFloat(f)+c+"px")})}};b.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad);a(this.fixedContent).each(function(b,c){var d=a(c).data("padding-right");a(c).removeData("padding-right");c.style.paddingRight=d?d:""})};b.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure";this.$body.append(a);var b=a.offsetWidth-a.clientWidth;this.$body[0].removeChild(a);return b};function c(c,d){return this.each(function(){var e=a(this);var f=e.data("bs.modal");var g=a.extend({},b.DEFAULTS,e.data(),typeof c=="object"&&c);if(!f)e.data("bs.modal",f=new b(this,g));if(typeof c=="string")f[c](d);else if(g.show)f.show(d)})}var d=a.fn.modal;a.fn.modal=c;a.fn.modal.Constructor=b;a.fn.modal.noConflict=function(){a.fn.modal=d;return this};a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var d=a(this);var e=d.attr("href");var f=d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"");var g=a(document).find(f);var h=g.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},g.data(),d.data());if(d.is("a"))b.preventDefault();g.one("show.bs.modal",function(a){if(a.isDefaultPrevented())return;g.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})});c.call(g,h,this)})}(jQuery);+function(a){"use strict";var b=["sanitize","whiteList","sanitizeFn"];var c=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"];var d=/^aria-[\w-]*$/i;var e={"*":["class","dir","id","lang","role",d],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};var f=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi;var g=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function h(b,d){var e=b.nodeName.toLowerCase();if(a.inArray(e,d)!==-1){if(a.inArray(e,c)!==-1){return Boolean(b.nodeValue.match(f)||b.nodeValue.match(g))}return true}var h=a(d).filter(function(a,b){return b instanceof RegExp});for(var i=0,j=h.length;i<j;i++){if(e.match(h[i])){return true}}return false}function i(b,c,d){if(b.length===0){return b}if(d&&typeof d==="function"){return d(b)}if(!document.implementation||!document.implementation.createHTMLDocument){return b}var e=document.implementation.createHTMLDocument("sanitization");e.body.innerHTML=b;var f=a.map(c,function(a,b){return b});var g=a(e.body).find("*");for(var i=0,j=g.length;i<j;i++){var k=g[i];var l=k.nodeName.toLowerCase();if(a.inArray(l,f)===-1){k.parentNode.removeChild(k);continue}var m=a.map(k.attributes,function(a){return a});var n=[].concat(c["*"]||[],c[l]||[]);for(var o=0,p=m.length;o<p;o++){if(!h(m[o],n)){k.removeAttribute(m[o].nodeName)}}}return e.body.innerHTML}var j=function(a,b){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",a,b)};j.VERSION="3.4.1";j.TRANSITION_DURATION=150;j.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0},sanitize:true,sanitizeFn:null,whiteList:e};j.prototype.init=function(b,c,d){this.enabled=true;this.type=b;this.$element=a(c);this.options=this.getOptions(d);this.$viewport=this.options.viewport&&a(document).find(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:false,hover:false,focus:false};if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var e=this.options.trigger.split(" ");for(var f=e.length;f--;){var g=e[f];if(g=="click"){this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this))}else if(g!="manual"){var h=g=="hover"?"mouseenter":"focusin";var i=g=="hover"?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};j.prototype.getDefaults=function(){return j.DEFAULTS};j.prototype.getOptions=function(c){var d=this.$element.data();for(var e in d){if(d.hasOwnProperty(e)&&a.inArray(e,b)!==-1){delete d[e]}}c=a.extend({},this.getDefaults(),d,c);if(c.delay&&typeof c.delay=="number"){c.delay={show:c.delay,hide:c.delay}}if(c.sanitize){c.template=i(c.template,c.whiteList,c.sanitizeFn)}return c};j.prototype.getDelegateOptions=function(){var b={};var c=this.getDefaults();this._options&&a.each(this._options,function(a,d){if(c[a]!=d)b[a]=d});return b};j.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(!c){c=new this.constructor(b.currentTarget,this.getDelegateOptions());a(b.currentTarget).data("bs."+this.type,c)}if(b instanceof a.Event){c.inState[b.type=="focusin"?"focus":"hover"]=true}if(c.tip().hasClass("in")||c.hoverState=="in"){c.hoverState="in";return}clearTimeout(c.timeout);c.hoverState="in";if(!c.options.delay||!c.options.delay.show)return c.show();c.timeout=setTimeout(function(){if(c.hoverState=="in")c.show()},c.options.delay.show)};j.prototype.isInStateTrue=function(){for(var a in this.inState){if(this.inState[a])return true}return false};j.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(!c){c=new this.constructor(b.currentTarget,this.getDelegateOptions());a(b.currentTarget).data("bs."+this.type,c)}if(b instanceof a.Event){c.inState[b.type=="focusout"?"focus":"hover"]=false}if(c.isInStateTrue())return;clearTimeout(c.timeout);c.hoverState="out";if(!c.options.delay||!c.options.delay.hide)return c.hide();c.timeout=setTimeout(function(){if(c.hoverState=="out")c.hide()},c.options.delay.hide)};j.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this;var e=this.tip();var f=this.getUID(this.type);this.setContent();e.attr("id",f);this.$element.attr("aria-describedby",f);if(this.options.animation)e.addClass("fade");var g=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement;var h=/\s?auto?\s?/i;var i=h.test(g);if(i)g=g.replace(h,"")||"top";e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this);this.options.container?e.appendTo(a(document).find(this.options.container)):e.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition();var l=e[0].offsetWidth;var m=e[0].offsetHeight;if(i){var n=g;var o=this.getPosition(this.$viewport);g=g=="bottom"&&k.bottom+m>o.bottom?"top":g=="top"&&k.top-m<o.top?"bottom":g=="right"&&k.right+l>o.width?"left":g=="left"&&k.left-l<o.left?"right":g;e.removeClass(n).addClass(g)}var p=this.getCalculatedOffset(g,k,l,m);this.applyPlacement(p,g);var q=function(){var a=d.hoverState;d.$element.trigger("shown.bs."+d.type);d.hoverState=null;if(a=="out")d.leave(d)};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(j.TRANSITION_DURATION):q()}};j.prototype.applyPlacement=function(b,c){var d=this.tip();var e=d[0].offsetWidth;var f=d[0].offsetHeight;var g=parseInt(d.css("margin-top"),10);var h=parseInt(d.css("margin-left"),10);if(isNaN(g))g=0;if(isNaN(h))h=0;b.top+=g;b.left+=h;a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0);d.addClass("in");var i=d[0].offsetWidth;var j=d[0].offsetHeight;if(c=="top"&&j!=f){b.top=b.top+f-j}var k=this.getViewportAdjustedDelta(c,b,i,j);if(k.left)b.left+=k.left;else b.top+=k.top;var l=/top|bottom/.test(c);var m=l?k.left*2-e+i:k.top*2-f+j;var n=l?"offsetWidth":"offsetHeight";d.offset(b);this.replaceArrow(m,d[0][n],l)};j.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")};j.prototype.setContent=function(){var a=this.tip();var b=this.getTitle();if(this.options.html){if(this.options.sanitize){b=i(b,this.options.whiteList,this.options.sanitizeFn)}a.find(".tooltip-inner").html(b)}else{a.find(".tooltip-inner").text(b)}a.removeClass("fade in top bottom left right")};j.prototype.hide=function(b){var c=this;var d=a(this.$tip);var e=a.Event("hide.bs."+this.type);function f(){if(c.hoverState!="in")d.detach();if(c.$element){c.$element.removeAttr("aria-describedby").trigger("hidden.bs."+c.type)}b&&b()}this.$element.trigger(e);if(e.isDefaultPrevented())return;d.removeClass("in");a.support.transition&&d.hasClass("fade")?d.one("bsTransitionEnd",f).emulateTransitionEnd(j.TRANSITION_DURATION):f();this.hoverState=null;return this};j.prototype.fixTitle=function(){var a=this.$element;if(a.attr("title")||typeof a.attr("data-original-title")!="string"){a.attr("data-original-title",a.attr("title")||"").attr("title","")}};j.prototype.hasContent=function(){return this.getTitle()};j.prototype.getPosition=function(b){b=b||this.$element;var c=b[0];var d=c.tagName=="BODY";var e=c.getBoundingClientRect();if(e.width==null){e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top})}var f=window.SVGElement&&c instanceof window.SVGElement;var g=d?{top:0,left:0}:f?null:b.offset();var h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()};var i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)};j.prototype.getCalculatedOffset=function(a,b,c,d){return a=="bottom"?{top:b.top+b.height,left:b.left+b.width/2-c/2}:a=="top"?{top:b.top-d,left:b.left+b.width/2-c/2}:a=="left"?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}};j.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0;var g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll;var i=b.top+f-g.scroll+d;if(h<g.top){e.top=g.top-h}else if(i>g.top+g.height){e.top=g.top+g.height-i}}else{var j=b.left-f;var k=b.left+f+c;if(j<g.left){e.left=g.left-j}else if(k>g.right){e.left=g.left+g.width-k}}return e};j.prototype.getTitle=function(){var a;var b=this.$element;var c=this.options;a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title);return a};j.prototype.getUID=function(a){do{a+=~~(Math.random()*1e6)}while(document.getElementById(a));return a};j.prototype.tip=function(){if(!this.$tip){this.$tip=a(this.options.template);if(this.$tip.length!=1){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}}return this.$tip};j.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};j.prototype.enable=function(){this.enabled=true};j.prototype.disable=function(){this.enabled=false};j.prototype.toggleEnabled=function(){this.enabled=!this.enabled};j.prototype.toggle=function(b){var c=this;if(b){c=a(b.currentTarget).data("bs."+this.type);if(!c){c=new this.constructor(b.currentTarget,this.getDelegateOptions());a(b.currentTarget).data("bs."+this.type,c)}}if(b){c.inState.click=!c.inState.click;if(c.isInStateTrue())c.enter(c);else c.leave(c)}else{c.tip().hasClass("in")?c.leave(c):c.enter(c)}};j.prototype.destroy=function(){var a=this;clearTimeout(this.timeout);this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type);if(a.$tip){a.$tip.detach()}a.$tip=null;a.$arrow=null;a.$viewport=null;a.$element=null})};j.prototype.sanitizeHtml=function(a){return i(a,this.options.whiteList,this.options.sanitizeFn)};function k(b){return this.each(function(){var c=a(this);var d=c.data("bs.tooltip");var e=typeof b=="object"&&b;if(!d&&/destroy|hide/.test(b))return;if(!d)c.data("bs.tooltip",d=new j(this,e));if(typeof b=="string")d[b]()})}var l=a.fn.tooltip;a.fn.tooltip=k;a.fn.tooltip.Constructor=j;a.fn.tooltip.noConflict=function(){a.fn.tooltip=l;return this}}(jQuery);+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.VERSION="3.4.1";b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);b.prototype.constructor=b;b.prototype.getDefaults=function(){return b.DEFAULTS};b.prototype.setContent=function(){var a=this.tip();var b=this.getTitle();var c=this.getContent();if(this.options.html){var d=typeof c;if(this.options.sanitize){b=this.sanitizeHtml(b);if(d==="string"){c=this.sanitizeHtml(c)}}a.find(".popover-title").html(b);a.find(".popover-content").children().detach().end()[d==="string"?"html":"append"](c)}else{a.find(".popover-title").text(b);a.find(".popover-content").children().detach().end().text(c)}a.removeClass("fade top bottom left right in");if(!a.find(".popover-title").html())a.find(".popover-title").hide()};b.prototype.hasContent=function(){return this.getTitle()||this.getContent()};b.prototype.getContent=function(){var a=this.$element;var b=this.options;return a.attr("data-content")||(typeof b.content=="function"?b.content.call(a[0]):b.content)};b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function c(c){return this.each(function(){var d=a(this);var e=d.data("bs.popover");var f=typeof c=="object"&&c;if(!e&&/destroy|hide/.test(c))return;if(!e)d.data("bs.popover",e=new b(this,f));if(typeof c=="string")e[c]()})}var d=a.fn.popover;a.fn.popover=c;a.fn.popover.Constructor=b;a.fn.popover.noConflict=function(){a.fn.popover=d;return this}}(jQuery);+function(a){"use strict";function b(c,d){this.$body=a(document.body);this.$scrollElement=a(c).is(document.body)?a(window):a(c);this.options=a.extend({},b.DEFAULTS,d);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this));this.refresh();this.process()}b.VERSION="3.4.1";b.DEFAULTS={offset:10};b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};b.prototype.refresh=function(){var b=this;var c="offset";var d=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();if(!a.isWindow(this.$scrollElement[0])){c="position";d=this.$scrollElement.scrollTop()}this.$body.find(this.selector).map(function(){var b=a(this);var e=b.data("target")||b.attr("href");var f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]);b.targets.push(this[1])})};b.prototype.process=function(){var a=this.$scrollElement.scrollTop()+this.options.offset;var b=this.getScrollHeight();var c=this.options.offset+b-this.$scrollElement.height();var d=this.offsets;var e=this.targets;var f=this.activeTarget;var g;if(this.scrollHeight!=b){this.refresh()}if(a>=c){return f!=(g=e[e.length-1])&&this.activate(g)}if(f&&a<d[0]){this.activeTarget=null;return this.clear()}for(g=d.length;g--;){f!=e[g]&&a>=d[g]&&(d[g+1]===undefined||a<d[g+1])&&this.activate(e[g])}};b.prototype.activate=function(b){this.activeTarget=b;this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]';var d=a(c).parents("li").addClass("active");if(d.parent(".dropdown-menu").length){d=d.closest("li.dropdown").addClass("active")}d.trigger("activate.bs.scrollspy")};b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};function c(c){return this.each(function(){var d=a(this);var e=d.data("bs.scrollspy");var f=typeof c=="object"&&c;if(!e)d.data("bs.scrollspy",e=new b(this,f));if(typeof c=="string")e[c]()})}var d=a.fn.scrollspy;a.fn.scrollspy=c;a.fn.scrollspy.Constructor=b;a.fn.scrollspy.noConflict=function(){a.fn.scrollspy=d;return this};a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery);+function(a){"use strict";var b=function(b){this.element=a(b)};b.VERSION="3.4.1";b.TRANSITION_DURATION=150;b.prototype.show=function(){var b=this.element;var c=b.closest("ul:not(.dropdown-menu)");var d=b.data("target");if(!d){d=b.attr("href");d=d&&d.replace(/.*(?=#[^\s]*$)/,"")}if(b.parent("li").hasClass("active"))return;var e=c.find(".active:last a");var f=a.Event("hide.bs.tab",{relatedTarget:b[0]});var g=a.Event("show.bs.tab",{relatedTarget:e[0]});e.trigger(f);b.trigger(g);if(g.isDefaultPrevented()||f.isDefaultPrevented())return;var h=a(document).find(d);this.activate(b.closest("li"),c);this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]});b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})};b.prototype.activate=function(c,d,e){var f=d.find("> .active");var g=e&&a.support.transition&&(f.length&&f.hasClass("fade")||!!d.find("> .fade").length);function h(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);c.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(g){c[0].offsetWidth;c.addClass("in")}else{c.removeClass("fade")}if(c.parent(".dropdown-menu").length){c.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}e&&e()}f.length&&g?f.one("bsTransitionEnd",h).emulateTransitionEnd(b.TRANSITION_DURATION):h();f.removeClass("in")};function c(c){return this.each(function(){var d=a(this);var e=d.data("bs.tab");if(!e)d.data("bs.tab",e=new b(this));if(typeof c=="string")e[c]()})}var d=a.fn.tab;a.fn.tab=c;a.fn.tab.Constructor=b;a.fn.tab.noConflict=function(){a.fn.tab=d;return this};var e=function(b){b.preventDefault();c.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery);+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d);var e=this.options.target===b.DEFAULTS.target?a(this.options.target):a(document).find(this.options.target);this.$target=e.on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this));this.$element=a(c);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()};b.VERSION="3.4.1";b.RESET="affix affix-top affix-bottom";b.DEFAULTS={offset:0,target:window};b.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop();var f=this.$element.offset();var g=this.$target.height();if(c!=null&&this.affixed=="top")return e<c?"top":false;if(this.affixed=="bottom"){if(c!=null)return e+this.unpin<=f.top?false:"bottom";return e+g<=a-d?false:"bottom"}var h=this.affixed==null;var i=h?e:f.top;var j=h?g:b;if(c!=null&&e<=c)return"top";if(d!=null&&i+j>=a-d)return"bottom";return false};b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset
;this.$element.removeClass(b.RESET).addClass("affix");var a=this.$target.scrollTop();var c=this.$element.offset();return this.pinnedOffset=c.top-a};b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)};b.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var c=this.$element.height();var d=this.options.offset;var e=d.top;var f=d.bottom;var g=Math.max(a(document).height(),a(document.body).height());if(typeof d!="object")f=e=d;if(typeof e=="function")e=d.top(this.$element);if(typeof f=="function")f=d.bottom(this.$element);var h=this.getState(g,c,e,f);if(this.affixed!=h){if(this.unpin!=null)this.$element.css("top","");var i="affix"+(h?"-"+h:"");var j=a.Event(i+".bs.affix");this.$element.trigger(j);if(j.isDefaultPrevented())return;this.affixed=h;this.unpin=h=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(b.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}if(h=="bottom"){this.$element.offset({top:g-c-f})}};function c(c){return this.each(function(){var d=a(this);var e=d.data("bs.affix");var f=typeof c=="object"&&c;if(!e)d.data("bs.affix",e=new b(this,f));if(typeof c=="string")e[c]()})}var d=a.fn.affix;a.fn.affix=c;a.fn.affix.Constructor=b;a.fn.affix.noConflict=function(){a.fn.affix=d;return this};a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this);var d=b.data();d.offset=d.offset||{};if(d.offsetBottom!=null)d.offset.bottom=d.offsetBottom;if(d.offsetTop!=null)d.offset.top=d.offsetTop;c.call(b,d)})})}(jQuery);!function(){var a,b,c;!function(d){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m=b&&b.split("/"),n=s.map,o=n&&n["*"]||{};if(a&&"."===a.charAt(0))if(b){for(m=m.slice(0,m.length-1),a=m.concat(a.split("/")),j=0;j<a.length;j+=1)if(l=a[j],"."===l)a.splice(j,1),j-=1;else if(".."===l){if(1===j&&(".."===a[2]||".."===a[0]))break;j>0&&(a.splice(j-1,2),j-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((m||o)&&n){for(c=a.split("/"),j=c.length;j>0;j-=1){if(d=c.slice(0,j).join("/"),m)for(k=m.length;k>0;k-=1)if(e=n[m.slice(0,k).join("/")],e&&(e=e[d])){f=e,g=j;break}if(f)break;!h&&o&&o[d]&&(h=o[d],i=j)}!f&&h&&(f=h,g=i),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function g(a,b){return function(){return n.apply(d,v.call(arguments,0).concat([a,b]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var b=r[a];delete r[a],t[a]=!0,m.apply(d,b)}if(!e(q,a)&&!e(t,a))throw new Error("No "+a);return q[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(a,b,c,f){var h,k,l,m,n,s,u=[];if(f=f||a,"function"==typeof c){for(b=!b.length&&c.length?["require","exports","module"]:b,n=0;n<b.length;n+=1)if(m=o(b[n],f),k=m.f,"require"===k)u[n]=p.require(a);else if("exports"===k)u[n]=p.exports(a),s=!0;else if("module"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=c.apply(q[a],u),a&&(h&&h.exports!==d&&h.exports!==q[a]?q[a]=h.exports:l===d&&s||(q[a]=l))}else a&&(q[a]=c)},a=b=n=function(a,b,c,e,f){return"string"==typeof a?p[a]?p[a](b):j(o(a,b).f):(a.splice||(s=a,b.splice?(a=b,b=c,c=null):a=d),b=b||function(){},"function"==typeof c&&(c=e,e=f),e?m(d,a,b,c):setTimeout(function(){m(d,a,b,c)},4),n)},n.config=function(a){return s=a,s.deps&&n(s.deps,s.callback),n},a._defined=q,c=function(a,b,c){b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},c.amd={jQuery:!0}}(),function(a){"use strict";a("ThirdParty/when",[],function(){function a(a,c,d,e){return b(a).then(c,d,e)}function b(a){var b,c;return a instanceof d?b=a:h(a)?(c=g(),a.then(function(a){c.resolve(a)},function(a){c.reject(a)},function(a){c.progress(a)}),b=c.promise):b=e(a),b}function c(b){return a(b,f)}function d(a){this.then=a}function e(a){var c=new d(function(c){try{return b(c?c(a):a)}catch(a){return f(a)}});return c}function f(a){var c=new d(function(c,d){try{return d?b(d(a)):f(a)}catch(a){return f(a)}});return c}function g(){function a(a,b,c){return m(a,b,c)}function c(a){return o(a)}function e(a){return o(f(a))}function h(a){return n(a)}var i,j,k,l,m,n,o;return j=new d(a),i={then:a,resolve:c,reject:e,progress:h,promise:j,resolver:{resolve:c,reject:e,progress:h}},k=[],l=[],m=function(a,b,c){var d,e;return d=g(),e="function"==typeof c?function(a){try{d.progress(c(a))}catch(a){d.progress(a)}}:function(a){d.progress(a)},k.push(function(c){c.then(a,b).then(d.resolve,d.reject,e)}),l.push(e),d.promise},n=function(a){return p(l,a),a},o=function(a){return a=b(a),m=a.then,o=b,n=r,p(k,a),l=k=v,a},i}function h(a){return a&&"function"==typeof a.then}function i(b,c,d,e,f){return q(2,arguments),a(b,function(b){function h(a){p(a)}function i(a){o(a)}var j,k,l,m,n,o,p,q,s,t;if(s=b.length>>>0,j=Math.max(0,Math.min(c,s)),l=[],k=s-j+1,m=[],n=g(),j)for(q=n.progress,p=function(a){m.push(a),--k||(o=p=r,n.reject(m))},o=function(a){l.push(a),--j||(o=p=r,n.resolve(l))},t=0;s>t;++t)t in b&&a(b[t],i,h,q);else n.resolve(l);return n.then(d,e,f)})}function j(a,b,c,d){function e(a){return b?b(a[0]):a[0]}return i(a,1,e,c,d)}function k(a,b,c,d){return q(1,arguments),m(a,s).then(b,c,d)}function l(){return m(arguments,s)}function m(b,c){return a(b,function(b){var d,e,f,h,i,j;if(f=e=b.length>>>0,d=[],j=g(),f)for(h=function(b,e){a(b,c).then(function(a){d[e]=a,--f||j.resolve(d)},j.reject)},i=0;e>i;i++)i in b?h(b[i],i):--f;else j.resolve(d);return j.promise})}function n(b,c){var d=u.call(arguments,1);return a(b,function(b){var e;return e=b.length,d[0]=function(b,d,f){return a(b,function(b){return a(d,function(a){return c(b,a,f,e)})})},t.apply(b,d)})}function o(b,c,d){var e=arguments.length>2;return a(b,function(a){return a=e?d:a,c.resolve(a),a},function(a){return c.reject(a),f(a)},c.progress)}function p(a,b){for(var c,d=0;c=a[d++];)c(b)}function q(a,b){for(var c,d=b.length;d>a;)if(c=b[--d],null!=c&&"function"!=typeof c)throw new Error("arg "+d+" must be a function")}function r(){}function s(a){return a}var t,u,v;return a.defer=g,a.resolve=b,a.reject=c,a.join=l,a.all=k,a.map=m,a.reduce=n,a.any=j,a.some=i,a.chain=o,a.isPromise=h,d.prototype={always:function(a,b){return this.then(a,a,b)},otherwise:function(a){return this.then(v,a)},yield:function(a){return this.then(function(){return a})},spread:function(a){return this.then(function(b){return k(b,function(b){return a.apply(v,b)})})}},u=[].slice,t=[].reduce||function(a){var b,c,d,e,f;if(f=0,b=Object(this),e=b.length>>>0,c=arguments,c.length<=1)for(;;){if(f in b){d=b[f++];break}if(++f>=e)throw new TypeError}else d=c[1];for(;e>f;++f)f in b&&(d=a(d,b[f],f,b));return d},a})}("function"==typeof c&&c.amd?c:function(a){"object"==typeof exports?module.exports=a():this.when=a()}),c("Core/defined",[],function(){"use strict";var a=function(a){return void 0!==a};return a}),c("Core/defineProperties",["./defined"],function(a){"use strict";var b=function(){try{return"x"in Object.defineProperty({},"x",{})}catch(a){return!1}}(),c=Object.defineProperties;return b&&a(c)||(c=function(a){return a}),c}),c("Core/DeveloperError",["./defined"],function(a){"use strict";var b=function(a){this.name="DeveloperError",this.message=a;var b;try{throw new Error}catch(a){b=a.stack}this.stack=b};return b.prototype.toString=function(){var b=this.name+": "+this.message;return a(this.stack)&&(b+="\n"+this.stack.toString()),b},b.throwInstantiationError=function(){throw new b("This function defines an interface and should not be called directly.")},b}),c("Core/Credit",["./defined","./defineProperties","./DeveloperError"],function(a,b){"use strict";var c=function(b,c,d){var e=a(d),f=a(c),g=a(b);g||f||(b=d),this._text=b,this._imageUrl=c,this._link=d,this._hasLink=e,this._hasImage=f};return b(c.prototype,{text:{get:function(){return this._text}},imageUrl:{get:function(){return this._imageUrl}},link:{get:function(){return this._link}}}),c.prototype.hasImage=function(){return this._hasImage},c.prototype.hasLink=function(){return this._hasLink},c.equals=function(b,c){var d=!a(b),e=!a(c);return b===c||(d&&e||!d&&!e)&&b._text===c._text&&b._imageUrl===c._imageUrl&&b._link===c._link},c.prototype.equals=function(a){return c.equals(this,a)},c}),c("Core/freezeObject",["./defined"],function(a){"use strict";var b=Object.freeze;return a(b)||(b=function(a){return a}),b}),c("Core/defaultValue",["./freezeObject"],function(a){"use strict";var b=function(a,b){return void 0!==a?a:b};return b.EMPTY_OBJECT=a({}),b}),c("ThirdParty/mersenne-twister",[],function(){var a=function(a){void 0==a&&(a=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(a)};return a.prototype.init_genrand=function(a){for(this.mt[0]=a>>>0,this.mti=1;this.mti<this.N;this.mti++){var a=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&a)>>>16)<<16)+1812433253*(65535&a)+this.mti,this.mt[this.mti]>>>=0}},a.prototype.genrand_int32=function(){var a,b=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var c;for(this.mti==this.N+1&&this.init_genrand(5489),c=0;c<this.N-this.M;c++)a=this.mt[c]&this.UPPER_MASK|this.mt[c+1]&this.LOWER_MASK,this.mt[c]=this.mt[c+this.M]^a>>>1^b[1&a];for(;c<this.N-1;c++)a=this.mt[c]&this.UPPER_MASK|this.mt[c+1]&this.LOWER_MASK,this.mt[c]=this.mt[c+(this.M-this.N)]^a>>>1^b[1&a];a=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^a>>>1^b[1&a],this.mti=0}return a=this.mt[this.mti++],a^=a>>>11,a^=2636928640&a<<7,a^=4022730752&a<<15,a^=a>>>18,a>>>0},a.prototype.random=function(){return this.genrand_int32()*(1/4294967296)},a}),c("Core/Math",["../ThirdParty/mersenne-twister","./defaultValue","./defined","./DeveloperError"],function(a,b){"use strict";var c={};c.EPSILON1=.1,c.EPSILON2=.01,c.EPSILON3=.001,c.EPSILON4=1e-4,c.EPSILON5=1e-5,c.EPSILON6=1e-6,c.EPSILON7=1e-7,c.EPSILON8=1e-8,c.EPSILON9=1e-9,c.EPSILON10=1e-10,c.EPSILON11=1e-11,c.EPSILON12=1e-12,c.EPSILON13=1e-13,c.EPSILON14=1e-14,c.EPSILON15=1e-15,c.EPSILON16=1e-16,c.EPSILON17=1e-17,c.EPSILON18=1e-18,c.EPSILON19=1e-19,c.EPSILON20=1e-20,c.GRAVITATIONALPARAMETER=3986004418e5,c.SOLAR_RADIUS=6955e5,c.LUNAR_RADIUS=1737400,c.SIXTY_FOUR_KILOBYTES=65536,c.sign=function(a){return a>0?1:0>a?-1:0},c.signNotZero=function(a){return 0>a?-1:1},c.toSNorm=function(a){return Math.round(255*(.5*c.clamp(a,-1,1)+.5))},c.fromSNorm=function(a){return 2*(c.clamp(a,0,255)/255)-1},c.sinh=function(a){var b=Math.pow(Math.E,a),c=Math.pow(Math.E,-1*a);return.5*(b-c)},c.cosh=function(a){var b=Math.pow(Math.E,a),c=Math.pow(Math.E,-1*a);return.5*(b+c)},c.lerp=function(a,b,c){return(1-c)*a+c*b},c.PI=Math.PI,c.ONE_OVER_PI=1/Math.PI,c.PI_OVER_TWO=.5*Math.PI,c.PI_OVER_THREE=Math.PI/3,c.PI_OVER_FOUR=Math.PI/4,c.PI_OVER_SIX=Math.PI/6,c.THREE_PI_OVER_TWO=.5*3*Math.PI,c.TWO_PI=2*Math.PI,c.ONE_OVER_TWO_PI=1/(2*Math.PI),c.RADIANS_PER_DEGREE=Math.PI/180,c.DEGREES_PER_RADIAN=180/Math.PI,c.RADIANS_PER_ARCSECOND=c.RADIANS_PER_DEGREE/3600,c.toRadians=function(a){return a*c.RADIANS_PER_DEGREE},c.toDegrees=function(a){return a*c.DEGREES_PER_RADIAN},c.convertLongitudeRange=function(a){var b=c.TWO_PI,d=a-Math.floor(a/b)*b;return d<-Math.PI?d+b:d>=Math.PI?d-b:d},c.negativePiToPi=function(a){for(var b=c.EPSILON10,d=c.PI,e=c.TWO_PI;-(d+b)>a;)a+=e;if(-d>a)return-d;for(;a>d+b;)a-=e;return a>d?d:a},c.zeroToTwoPi=function(a){var b=a%c.TWO_PI;return 0>b?(b+c.TWO_PI)%c.TWO_PI:b},c.equalsEpsilon=function(a,c,d){return d=b(d,0),Math.abs(a-c)<=d};var d=[1];c.factorial=function(a){var b=d.length;if(a>=b)for(var c=d[b-1],e=b;a>=e;e++)d.push(c*e);return d[a]},c.incrementWrap=function(a,c,d){return d=b(d,0),++a,a>c&&(a=d),a},c.isPowerOfTwo=function(a){return 0!==a&&0===(a&a-1)},c.nextPowerOfTwo=function(a){return--a,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,++a,a},c.clamp=function(a,b,c){return b>a?b:a>c?c:a};var e=new a;return c.setRandomNumberSeed=function(b){e=new a(b)},c.nextRandomNumber=function(){return e.random()},c.acosClamped=function(a){return Math.acos(c.clamp(a,-1,1))},c.asinClamped=function(a){return Math.asin(c.clamp(a,-1,1))},c}),c("Core/Cartesian3",["./defaultValue","./defined","./DeveloperError","./freezeObject","./Math"],function(a,b,c,d,e){"use strict";var f=function(b,c,d){this.x=a(b,0),this.y=a(c,0),this.z=a(d,0)};f.fromSpherical=function(c,d){b(d)||(d=new f);var e=c.clock,g=c.cone,h=a(c.magnitude,1),i=h*Math.sin(g);return d.x=i*Math.cos(e),d.y=i*Math.sin(e),d.z=h*Math.cos(g),d},f.fromElements=function(a,c,d,e){return b(e)?(e.x=a,e.y=c,e.z=d,e):new f(a,c,d)},f.clone=function(a,c){return b(a)?b(c)?(c.x=a.x,c.y=a.y,c.z=a.z,c):new f(a.x,a.y,a.z):void 0},f.fromCartesian4=f.clone,f.packedLength=3,f.pack=function(b,c,d){d=a(d,0),c[d++]=b.x,c[d++]=b.y,c[d]=b.z},f.unpack=function(c,d,e){return d=a(d,0),b(e)||(e=new f),e.x=c[d++],e.y=c[d++],e.z=c[d],e},f.fromArray=f.unpack,f.maximumComponent=function(a){return Math.max(a.x,a.y,a.z)},f.minimumComponent=function(a){return Math.min(a.x,a.y,a.z)},f.minimumByComponent=function(a,b,c){return c.x=Math.min(a.x,b.x),c.y=Math.min(a.y,b.y),c.z=Math.min(a.z,b.z),c},f.maximumByComponent=function(a,b,c){return c.x=Math.max(a.x,b.x),c.y=Math.max(a.y,b.y),c.z=Math.max(a.z,b.z),c},f.magnitudeSquared=function(a){return a.x*a.x+a.y*a.y+a.z*a.z},f.magnitude=function(a){return Math.sqrt(f.magnitudeSquared(a))};var g=new f;f.distance=function(a,b){return f.subtract(a,b,g),f.magnitude(g)},f.distanceSquared=function(a,b){return f.subtract(a,b,g),f.magnitudeSquared(g)},f.normalize=function(a,b){var c=f.magnitude(a);return b.x=a.x/c,b.y=a.y/c,b.z=a.z/c,b},f.dot=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z},f.multiplyComponents=function(a,b,c){return c.x=a.x*b.x,c.y=a.y*b.y,c.z=a.z*b.z,c},f.add=function(a,b,c){return c.x=a.x+b.x,c.y=a.y+b.y,c.z=a.z+b.z,c},f.subtract=function(a,b,c){return c.x=a.x-b.x,c.y=a.y-b.y,c.z=a.z-b.z,c},f.multiplyByScalar=function(a,b,c){return c.x=a.x*b,c.y=a.y*b,c.z=a.z*b,c},f.divideByScalar=function(a,b,c){return c.x=a.x/b,c.y=a.y/b,c.z=a.z/b,c},f.negate=function(a,b){return b.x=-a.x,b.y=-a.y,b.z=-a.z,b},f.abs=function(a,b){return b.x=Math.abs(a.x),b.y=Math.abs(a.y),b.z=Math.abs(a.z),b};var h=new f;f.lerp=function(a,b,c,d){return f.multiplyByScalar(b,c,h),d=f.multiplyByScalar(a,1-c,d),f.add(h,d,d)};var i=new f,j=new f;f.angleBetween=function(a,b){f.normalize(a,i),f.normalize(b,j);var c=f.dot(i,j),d=f.magnitude(f.cross(i,j,i));return Math.atan2(d,c)};var k=new f;f.mostOrthogonalAxis=function(a,b){var c=f.normalize(a,k);return f.abs(c,c),b=c.x<=c.y?c.x<=c.z?f.clone(f.UNIT_X,b):f.clone(f.UNIT_Z,b):c.y<=c.z?f.clone(f.UNIT_Y,b):f.clone(f.UNIT_Z,b)},f.equals=function(a,c){return a===c||b(a)&&b(c)&&a.x===c.x&&a.y===c.y&&a.z===c.z},f.equalsEpsilon=function(a,c,d){return a===c||b(a)&&b(c)&&Math.abs(a.x-c.x)<=d&&Math.abs(a.y-c.y)<=d&&Math.abs(a.z-c.z)<=d},f.cross=function(a,b,c){var d=a.x,e=a.y,f=a.z,g=b.x,h=b.y,i=b.z,j=e*i-f*h,k=f*g-d*i,l=d*h-e*g;return c.x=j,c.y=k,c.z=l,c},f.fromDegrees=function(a,b,c,d,g){var h=e.toRadians(a),i=e.toRadians(b);return f.fromRadians(h,i,c,d,g)};var l=new f,m=new f,n=new f(40680631590769,40680631590769,40408299984661.445);return f.fromRadians=function(c,d,e,g,h){e=a(e,0);var i=b(g)?g.radiiSquared:n,j=Math.cos(d);l.x=j*Math.cos(c),l.y=j*Math.sin(c),l.z=Math.sin(d),l=f.normalize(l,l),f.multiplyComponents(i,l,m);var k=Math.sqrt(f.dot(l,m));return m=f.divideByScalar(m,k,m),l=f.multiplyByScalar(l,e,l),b(h)||(h=new f),f.add(m,l,h)},f.fromDegreesArray=function(a,b,c){for(var d=new Array(a.length),g=0;g<a.length;g++)d[g]=e.toRadians(a[g]);return f.fromRadiansArray(d,b,c)},f.fromRadiansArray=function(a,c,d){var e=a.length;b(d)?d.length=e/2:d=new Array(e/2);for(var g=0;e>g;g+=2){var h=a[g],i=a[g+1];d[g/2]=f.fromRadians(h,i,0,c,d[g/2])}return d},f.fromDegreesArrayHeights=function(a,b,c){for(var d=new Array(a.length),g=0;g<a.length;g+=3)d[g]=e.toRadians(a[g]),d[g+1]=e.toRadians(a[g+1]),d[g+2]=a[g+2];return f.fromRadiansArrayHeights(d,b,c)},f.fromRadiansArrayHeights=function(a,c,d){var e=a.length;b(d)?d.length=e/3:d=new Array(e/3);for(var g=0;e>g;g+=3){var h=a[g],i=a[g+1],j=a[g+2];d[g/3]=f.fromRadians(h,i,j,c,d[g/3])}return d},f.ZERO=d(new f(0,0,0)),f.UNIT_X=d(new f(1,0,0)),f.UNIT_Y=d(new f(0,1,0)),f.UNIT_Z=d(new f(0,0,1)),f.prototype.clone=function(a){return f.clone(this,a)},f.prototype.equals=function(a){return f.equals(this,a)},f.prototype.equalsEpsilon=function(a,b){return f.equalsEpsilon(this,a,b)},f.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},f}),c("Core/Cartographic",["./defaultValue","./defined","./DeveloperError","./freezeObject","./Math"],function(a,b,c,d,e){"use strict";var f=function(b,c,d){this.longitude=a(b,0),this.latitude=a(c,0),this.height=a(d,0)};return f.fromRadians=function(c,d,e,g){return e=a(e,0),b(g)?(g.longitude=c,g.latitude=d,g.height=e,g):new f(c,d,e)},f.fromDegrees=function(a,b,c,d){return a=e.toRadians(a),b=e.toRadians(b),f.fromRadians(a,b,c,d)},f.clone=function(a,c){return b(a)?b(c)?(c.longitude=a.longitude,c.latitude=a.latitude,c.height=a.height,c):new f(a.longitude,a.latitude,a.height):void 0},f.equals=function(a,c){return a===c||b(a)&&b(c)&&a.longitude===c.longitude&&a.latitude===c.latitude&&a.height===c.height},f.equalsEpsilon=function(a,c,d){return a===c||b(a)&&b(c)&&Math.abs(a.longitude-c.longitude)<=d&&Math.abs(a.latitude-c.latitude)<=d&&Math.abs(a.height-c.height)<=d},f.ZERO=d(new f(0,0,0)),f.prototype.clone=function(a){return f.clone(this,a)},f.prototype.equals=function(a){return f.equals(this,a)},f.prototype.equalsEpsilon=function(a,b){return f.equalsEpsilon(this,a,b)},f.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},f}),c("Core/Ellipsoid",["./Cartesian3","./Cartographic","./defaultValue","./defined","./defineProperties","./DeveloperError","./freezeObject","./Math"],function(a,b,c,d,e,f,g,h){"use strict";function i(b,d,e,f){d=c(d,0),e=c(e,0),f=c(f,0),b._radii=new a(d,e,f),b._radiiSquared=new a(d*d,e*e,f*f),b._radiiToTheFourth=new a(d*d*d*d,e*e*e*e,f*f*f*f),b._oneOverRadii=new a(0===d?0:1/d,0===e?0:1/e,0===f?0:1/f),b._oneOverRadiiSquared=new a(0===d?0:1/(d*d),0===e?0:1/(e*e),0===f?0:1/(f*f)),b._minimumRadius=Math.min(d,e,f),b._maximumRadius=Math.max(d,e,f),b._centerToleranceSquared=h.EPSILON1}var j=function(a,b,c){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,i(this,a,b,c)};e(j.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),j.clone=function(b,c){if(!d(b))return void 0;var e=b._radii;return d(c)?(a.clone(e,c._radii),a.clone(b._radiiSquared,c._radiiSquared),a.clone(b._radiiToTheFourth,c._radiiToTheFourth),a.clone(b._oneOverRadii,c._oneOverRadii),a.clone(b._oneOverRadiiSquared,c._oneOverRadiiSquared),c._minimumRadius=b._minimumRadius,c._maximumRadius=b._maximumRadius,c._centerToleranceSquared=b._centerToleranceSquared,c):new j(e.x,e.y,e.z)},j.fromCartesian3=function(a,b){return d(b)||(b=new j),d(a)?(i(b,a.x,a.y,a.z),b):b},j.WGS84=g(new j(6378137,6378137,6356752.314245179)),j.UNIT_SPHERE=g(new j(1,1,1)),j.MOON=g(new j(h.LUNAR_RADIUS,h.LUNAR_RADIUS,h.LUNAR_RADIUS)),j.prototype.clone=function(a){return j.clone(this,a)},j.prototype.geocentricSurfaceNormal=a.normalize,j.prototype.geodeticSurfaceNormalCartographic=function(b,c){var e=b.longitude,f=b.latitude,g=Math.cos(f),h=g*Math.cos(e),i=g*Math.sin(e),j=Math.sin(f);return d(c)||(c=new a),c.x=h,c.y=i,c.z=j,a.normalize(c,c)},j.prototype.geodeticSurfaceNormal=function(b,c){return d(c)||(c=new a),c=a.multiplyComponents(b,this._oneOverRadiiSquared,c),a.normalize(c,c)};var k=new a,l=new a;j.prototype.cartographicToCartesian=function(b,c){var e=k,f=l;this.geodeticSurfaceNormalCartographic(b,e),a.multiplyComponents(this._radiiSquared,e,f);var g=Math.sqrt(a.dot(e,f));return a.divideByScalar(f,g,f),a.multiplyByScalar(e,b.height,e),d(c)||(c=new a),a.add(f,e,c)},j.prototype.cartographicArrayToCartesianArray=function(a,b){var c=a.length;d(b)?b.length=c:b=new Array(c);for(var e=0;c>e;e++)b[e]=this.cartographicToCartesian(a[e],b[e]);return b};var m=new a,n=new a,o=new a;j.prototype.cartesianToCartographic=function(c,e){var f=this.scaleToGeodeticSurface(c,n);if(!d(f))return void 0;var g=this.geodeticSurfaceNormal(f,m),i=a.subtract(c,f,o),j=Math.atan2(g.y,g.x),k=Math.asin(g.z),l=h.sign(a.dot(i,c))*a.magnitude(i);return d(e)?(e.longitude=j,e.latitude=k,e.height=l,e):new b(j,k,l)},j.prototype.cartesianArrayToCartographicArray=function(a,b){var c=a.length;d(b)?b.length=c:b=new Array(c);for(var e=0;c>e;++e)b[e]=this.cartesianToCartographic(a[e],b[e]);return b};var p=new a,q=new a;return j.prototype.scaleToGeodeticSurface=function(b,c){var e=b.x,f=b.y,g=b.z,i=this._oneOverRadii,j=i.x,k=i.y,l=i.z,m=e*e*j*j,n=f*f*k*k,o=g*g*l*l,r=m+n+o,s=Math.sqrt(1/r),t=a.multiplyByScalar(b,s,p);if(r<this._centerToleranceSquared)return isFinite(s)?a.clone(t,c):void 0;var u=this._oneOverRadiiSquared,v=u.x,w=u.y,x=u.z,y=q;y.x=2*t.x*v,y.y=2*t.y*w,y.z=2*t.z*x;var z,A,B,C,D,E,F,G,H,I,J,K=(1-s)*a.magnitude(b)/(.5*a.magnitude(y)),L=0;do{K-=L,B=1/(1+K*v),C=1/(1+K*w),D=1/(1+K*x),E=B*B,F=C*C,G=D*D,H=E*B,I=F*C,J=G*D,z=m*E+n*F+o*G-1,A=m*H*v+n*I*w+o*J*x;var M=-2*A;L=z/M}while(Math.abs(z)>h.EPSILON12);return d(c)?(c.x=e*B,c.y=f*C,c.z=g*D,c):new a(e*B,f*C,g*D)},j.prototype.scaleToGeocentricSurface=function(b,c){d(c)||(c=new a);var e=b.x,f=b.y,g=b.z,h=this._oneOverRadiiSquared,i=1/Math.sqrt(e*e*h.x+f*f*h.y+g*g*h.z);return a.multiplyByScalar(b,i,c)},j.prototype.transformPositionToScaledSpace=function(b,c){return d(c)||(c=new a),a.multiplyComponents(b,this._oneOverRadii,c)},j.prototype.transformPositionFromScaledSpace=function(b,c){return d(c)||(c=new a),a.multiplyComponents(b,this._radii,c)},j.prototype.equals=function(b){return this===b||d(b)&&a.equals(this._radii,b._radii)},j.prototype.toString=function(){return this._radii.toString()},j}),c("Core/Event",["./defined","./defineProperties","./DeveloperError"],function(a,b){"use strict";var c=function(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1};return b(c.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),c.prototype.addEventListener=function(a,b){this._listeners.push(a),this._scopes.push(b);var c=this;return function(){c.removeEventListener(a,b)}},c.prototype.removeEventListener=function(a,b){for(var c=this._listeners,d=this._scopes,e=-1,f=0;f<c.length;f++)if(c[f]===a&&d[f]===b){e=f;break}return-1!==e?(this._insideRaiseEvent?(this._toRemove.push(e),c[e]=void 0,d[e]=void 0):(c.splice(e,1),d.splice(e,1)),!0):!1},c.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;var b,c=this._listeners,d=this._scopes,e=c.length;for(b=0;e>b;b++){var f=c[b];a(f)&&c[b].apply(d[b],arguments)}var g=this._toRemove;for(e=g.length,b=0;e>b;b++){var h=g[b];c.splice(h,1),d.splice(h,1)}g.length=0,this._insideRaiseEvent=!1},c}),c("Core/Cartesian2",["./defaultValue","./defined","./DeveloperError","./freezeObject","./Math"],function(a,b,c,d,e){"use strict";var f=function(b,c){this.x=a(b,0),this.y=a(c,0)};f.fromElements=function(a,c,d){return b(d)?(d.x=a,d.y=c,d):new f(a,c)},f.clone=function(a,c){return b(a)?b(c)?(c.x=a.x,c.y=a.y,c):new f(a.x,a.y):void 0},f.fromCartesian3=f.clone,f.fromCartesian4=f.clone,f.packedLength=2,f.pack=function(b,c,d){d=a(d,0),c[d++]=b.x,c[d]=b.y},f.unpack=function(c,d,e){return d=a(d,0),b(e)||(e=new f),e.x=c[d++],e.y=c[d],e},f.fromArray=f.unpack,f.maximumComponent=function(a){return Math.max(a.x,a.y)},f.minimumComponent=function(a){return Math.min(a.x,a.y)},f.minimumByComponent=function(a,b,c){return c.x=Math.min(a.x,b.x),c.y=Math.min(a.y,b.y),c},f.maximumByComponent=function(a,b,c){return c.x=Math.max(a.x,b.x),c.y=Math.max(a.y,b.y),c},f.magnitudeSquared=function(a){return a.x*a.x+a.y*a.y},f.magnitude=function(a){return Math.sqrt(f.magnitudeSquared(a))};var g=new f;f.distance=function(a,b){return f.subtract(a,b,g),f.magnitude(g)},f.distanceSquared=function(a,b){return f.subtract(a,b,g),f.magnitudeSquared(g)},f.normalize=function(a,b){var c=f.magnitude(a);return b.x=a.x/c,b.y=a.y/c,b},f.dot=function(a,b){return a.x*b.x+a.y*b.y},f.multiplyComponents=function(a,b,c){return c.x=a.x*b.x,c.y=a.y*b.y,c},f.add=function(a,b,c){return c.x=a.x+b.x,c.y=a.y+b.y,c},f.subtract=function(a,b,c){return c.x=a.x-b.x,c.y=a.y-b.y,c},f.multiplyByScalar=function(a,b,c){return c.x=a.x*b,c.y=a.y*b,c},f.divideByScalar=function(a,b,c){return c.x=a.x/b,c.y=a.y/b,c},f.negate=function(a,b){return b.x=-a.x,b.y=-a.y,b},f.abs=function(a,b){return b.x=Math.abs(a.x),b.y=Math.abs(a.y),b};var h=new f;f.lerp=function(a,b,c,d){return f.multiplyByScalar(b,c,h),d=f.multiplyByScalar(a,1-c,d),f.add(h,d,d)};var i=new f,j=new f;f.angleBetween=function(a,b){return f.normalize(a,i),f.normalize(b,j),e.acosClamped(f.dot(i,j))};var k=new f;return f.mostOrthogonalAxis=function(a,b){var c=f.normalize(a,k);return f.abs(c,c),b=c.x<=c.y?f.clone(f.UNIT_X,b):f.clone(f.UNIT_Y,b)},f.equals=function(a,c){return a===c||b(a)&&b(c)&&a.x===c.x&&a.y===c.y},f.equalsEpsilon=function(a,c,d){return a===c||b(a)&&b(c)&&Math.abs(a.x-c.x)<=d&&Math.abs(a.y-c.y)<=d},f.ZERO=d(new f(0,0)),f.UNIT_X=d(new f(1,0)),f.UNIT_Y=d(new f(0,1)),f.prototype.clone=function(a){return f.clone(this,a)},f.prototype.equals=function(a){return f.equals(this,a)},f.prototype.equalsEpsilon=function(a,b){return f.equalsEpsilon(this,a,b)},f.prototype.toString=function(){return"("+this.x+", "+this.y+")"},f}),c("Core/GeographicProjection",["./Cartesian3","./Cartographic","./defaultValue","./defined","./defineProperties","./DeveloperError","./Ellipsoid"],function(a,b,c,d,e,f,g){"use strict";var h=function(a){this._ellipsoid=c(a,g.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis};return e(h.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),h.prototype.project=function(b,c){var e=this._semimajorAxis,f=b.longitude*e,g=b.latitude*e,h=b.height;return d(c)?(c.x=f,c.y=g,c.z=h,c):new a(f,g,h)},h.prototype.unproject=function(a,c){var e=this._oneOverSemimajorAxis,f=a.x*e,g=a.y*e,h=a.z;return d(c)?(c.longitude=f,c.latitude=g,c.height=h,c):new b(f,g,h)},h}),c("Core/Rectangle",["./Cartographic","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./freezeObject","./Math"],function(a,b,c,d,e,f,g){"use strict";var h=function(a,c,d,e){this.west=b(a,0),this.south=b(c,0),this.east=b(d,0),this.north=b(e,0)};h.fromDegrees=function(a,d,e,f,i){return a=g.toRadians(b(a,0)),d=g.toRadians(b(d,0)),e=g.toRadians(b(e,0)),f=g.toRadians(b(f,0)),c(i)?(i.west=a,i.south=d,i.east=e,i.north=f,i):new h(a,d,e,f)},h.fromCartographicArray=function(a,b){for(var d=Number.MAX_VALUE,e=-Number.MAX_VALUE,f=Number.MAX_VALUE,g=-Number.MAX_VALUE,i=0,j=a.length;j>i;i++){var k=a[i];d=Math.min(d,k.longitude),e=Math.max(e,k.longitude),f=Math.min(f,k.latitude),g=Math.max(g,k.latitude)}return c(b)?(b.west=d,b.south=f,b.east=e,b.north=g,b):new h(d,f,e,g)},h.packedLength=4,h.pack=function(a,c,d){d=b(d,0),c[d++]=a.west,c[d++]=a.south,c[d++]=a.east,c[d]=a.north},h.unpack=function(a,d,e){return d=b(d,0),c(e)||(e=new h),e.west=a[d++],e.south=a[d++],e.east=a[d++],e.north=a[d],e},h.clone=function(a,b){return c(a)?c(b)?(b.west=a.west,b.south=a.south,b.east=a.east,b.north=a.north,b):new h(a.west,a.south,a.east,a.north):void 0},h.prototype.clone=function(a){return h.clone(this,a)},h.prototype.equals=function(a){return h.equals(this,a)},h.equals=function(a,b){return a===b||c(a)&&c(b)&&a.west===b.west&&a.south===b.south&&a.east===b.east&&a.north===b.north},h.prototype.equalsEpsilon=function(a,b){return c(a)&&Math.abs(this.west-a.west)<=b&&Math.abs(this.south-a.south)<=b&&Math.abs(this.east-a.east)<=b&&Math.abs(this.north-a.north)<=b},h.validate=function(){},h.southwest=function(b,d){return c(d)?(d.longitude=b.west,d.latitude=b.south,d.height=0,d):new a(b.west,b.south)},h.northwest=function(b,d){return c(d)?(d.longitude=b.west,d.latitude=b.north,d.height=0,d):new a(b.west,b.north)},h.northeast=function(b,d){return c(d)?(d.longitude=b.east,d.latitude=b.north,d.height=0,d):new a(b.east,b.north)},h.southeast=function(b,d){return c(d)?(d.longitude=b.east,d.latitude=b.south,d.height=0,d):new a(b.east,b.south)},h.center=function(b,d){var e=b.east,f=b.west,h=.5*(f+e);return f>e&&(h=g.negativePiToPi(h+g.PI)),c(d)?(d.longitude=h,d.latitude=.5*(b.south+b.north),d.height=0,d):new a(h,.5*(b.south+b.north))},h.intersectWith=function(a,b,d){var e=Math.max(a.west,b.west),f=Math.max(a.south,b.south),g=Math.min(a.east,b.east),i=Math.min(a.north,b.north);return c(d)?(d.west=e,d.south=f,d.east=g,d.north=i,d):new h(e,f,g,i)},h.contains=function(a,b){return b.longitude>=a.west&&b.longitude<=a.east&&b.latitude>=a.south&&b.latitude<=a.north},h.isEmpty=function(a){return a.west>=a.east||a.south>=a.north};var i=new a;return h.subsample=function(a,d,f,h){d=b(d,e.WGS84),f=b(f,0),c(h)||(h=[]);var j=0,k=a.north,l=a.south,m=a.east,n=a.west,o=i;o.height=f,o.longitude=n,o.latitude=k,h[j]=d.cartographicToCartesian(o,h[j]),j++,o.longitude=m,h[j]=d.cartographicToCartesian(o,h[j]),j++,o.latitude=l,h[j]=d.cartographicToCartesian(o,h[j]),j++,o.longitude=n,h[j]=d.cartographicToCartesian(o,h[j]),j++,o.latitude=0>k?k:l>0?l:0;for(var p=1;8>p;++p){var q=-Math.PI+p*g.PI_OVER_TWO;q>n&&m>q&&(o.longitude=q,h[j]=d.cartographicToCartesian(o,h[j]),j++)}return 0===o.latitude&&(o.longitude=n,h[j]=d.cartographicToCartesian(o,h[j]),j++,o.longitude=m,h[j]=d.cartographicToCartesian(o,h[j]),j++),h.length=j,h},h.MAX_VALUE=f(new h(-Math.PI,-g.PI_OVER_TWO,Math.PI,g.PI_OVER_TWO)),h}),c("Core/GeographicTilingScheme",["./Cartesian2","./defaultValue","./defined","./defineProperties","./DeveloperError","./Ellipsoid","./GeographicProjection","./Math","./Rectangle"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(a){a=b(a,{}),this._ellipsoid=b(a.ellipsoid,f.WGS84),this._rectangle=b(a.rectangle,i.MAX_VALUE),this._projection=new g(this._ellipsoid),this._numberOfLevelZeroTilesX=b(a.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=b(a.numberOfLevelZeroTilesY,1)};return d(j.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),j.prototype.getNumberOfXTilesAtLevel=function(a){return this._numberOfLevelZeroTilesX<<a},j.prototype.getNumberOfYTilesAtLevel=function(a){return this._numberOfLevelZeroTilesY<<a},j.prototype.rectangleToNativeRectangle=function(a,b){var d=h.toDegrees(a.west),e=h.toDegrees(a.south),f=h.toDegrees(a.east),g=h.toDegrees(a.north);return c(b)?(b.west=d,b.south=e,b.east=f,b.north=g,b):new i(d,e,f,g)},j.prototype.tileXYToNativeRectangle=function(a,b,c,d){var e=this.tileXYToRectangle(a,b,c,d);return e.west=h.toDegrees(e.west),e.south=h.toDegrees(e.south),e.east=h.toDegrees(e.east),e.north=h.toDegrees(e.north),e},j.prototype.tileXYToRectangle=function(a,b,d,e){
var f=this._rectangle,g=this.getNumberOfXTilesAtLevel(d),h=this.getNumberOfYTilesAtLevel(d),j=(f.east-f.west)/g,k=a*j+f.west,l=(a+1)*j+f.west,m=(f.north-f.south)/h,n=f.north-b*m,o=f.north-(b+1)*m;return c(e)||(e=new i(k,o,l,n)),e.west=k,e.south=o,e.east=l,e.north=n,e},j.prototype.positionToTileXY=function(b,d,e){var f=this._rectangle;if(b.latitude>f.north||b.latitude<f.south||b.longitude<f.west||b.longitude>f.east)return void 0;var g=this.getNumberOfXTilesAtLevel(d),h=this.getNumberOfYTilesAtLevel(d),i=(f.east-f.west)/g,j=(f.north-f.south)/h,k=0|(b.longitude-f.west)/i;k>=g&&(k=g-1);var l=0|(f.north-b.latitude)/j;return l>=h&&(l=h-1),c(e)?(e.x=k,e.y=l,e):new a(k,l)},j}),c("Core/getImagePixels",["./defined"],function(a){"use strict";var b={},c=function(c,d,e){a(d)||(d=c.width),a(e)||(e=c.height);var f=b[d];a(f)||(f={},b[d]=f);var g=f[e];if(!a(g)){var h=document.createElement("canvas");h.width=d,h.height=e,g=h.getContext("2d"),g.globalCompositeOperation="copy",f[e]=g}return g.drawImage(c,0,0,d,e),g.getImageData(0,0,d,e).data};return c}),c("Core/HeightmapTessellator",["./Cartesian3","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./freezeObject","./Math"],function(a,b,c,d,e,f,g){"use strict";var h={};return h.DEFAULT_STRUCTURE=f({heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1}),h.computeVertices=function(d){var f,i,j,k,l=Math.cos,m=Math.sin,n=Math.sqrt,o=Math.atan,p=Math.exp,q=g.PI_OVER_TWO,r=g.toRadians,s=d.vertices,t=d.heightmap,u=d.width,v=d.height,w=d.skirtHeight,x=b(d.isGeographic,!0),y=b(d.ellipsoid,e.WGS84),z=1/y.maximumRadius,A=d.nativeRectangle,B=d.rectangle;c(B)?(f=B.west,i=B.south,j=B.east,k=B.north):x?(f=r(A.west),i=r(A.south),j=r(A.east),k=r(A.north)):(f=A.west*z,i=q-2*o(p(-A.south*z)),j=A.east*z,k=q-2*o(p(-A.north*z)));var C=b(d.relativeToCenter,a.ZERO),D=b(d.structure,h.DEFAULT_STRUCTURE),E=b(D.heightScale,h.DEFAULT_STRUCTURE.heightScale),F=b(D.heightOffset,h.DEFAULT_STRUCTURE.heightOffset),G=b(D.elementsPerHeight,h.DEFAULT_STRUCTURE.elementsPerHeight),H=b(D.stride,h.DEFAULT_STRUCTURE.stride),I=b(D.elementMultiplier,h.DEFAULT_STRUCTURE.elementMultiplier),J=b(D.isBigEndian,h.DEFAULT_STRUCTURE.isBigEndian),K=(A.east-A.west)/(u-1),L=(A.north-A.south)/(v-1),M=y.radiiSquared,N=M.x,O=M.y,P=M.z,Q=0,R=65536,S=-65536,T=0,U=v,V=0,W=u;w>0&&(--T,++U,--V,++W);for(var X=T;U>X;++X){var Y=X;0>Y&&(Y=0),Y>=v&&(Y=v-1);var Z=A.north-L*Y;Z=x?r(Z):q-2*o(p(-Z*z));for(var $=l(Z),_=m(Z),aa=P*_,ba=(Z-i)/(k-i),ca=V;W>ca;++ca){var da=ca;0>da&&(da=0),da>=u&&(da=u-1);var ea=A.west+K*da;x?ea=r(ea):ea*=z;var fa,ga=Y*u*H+da*H;if(1===G)fa=t[ga];else{fa=0;var ha;if(J)for(ha=0;G>ha;++ha)fa=fa*I+t[ga+ha];else for(ha=G-1;ha>=0;--ha)fa=fa*I+t[ga+ha]}fa=fa*E+F,S=Math.max(S,fa),R=Math.min(R,fa),(ca!==da||X!==Y)&&(fa-=w);var ia=$*l(ea),ja=$*m(ea),ka=N*ia,la=O*ja,ma=n(ka*ia+la*ja+aa*_),na=1/ma,oa=ka*na,pa=la*na,qa=aa*na;s[Q++]=oa+ia*fa-C.x,s[Q++]=pa+ja*fa-C.y,s[Q++]=qa+_*fa-C.z,s[Q++]=fa;var ra=(ea-f)/(j-f);s[Q++]=ra,s[Q++]=ba}}return{maximumHeight:S,minimumHeight:R}},h}),c("ThirdParty/Uri",[],function(){function a(b){if(b instanceof a)this.scheme=b.scheme,this.authority=b.authority,this.path=b.path,this.query=b.query,this.fragment=b.fragment;else if(b){var c=d.exec(b);this.scheme=c[1],this.authority=c[2],this.path=c[3],this.query=c[4],this.fragment=c[5]}}function b(a){var b=unescape(a);return f.test(b)?b:a.toUpperCase()}function c(a,b,c,d){return(b||"")+c.toLowerCase()+(d||"")}a.prototype.scheme=null,a.prototype.authority=null,a.prototype.path="",a.prototype.query=null,a.prototype.fragment=null;var d=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");a.prototype.getScheme=function(){return this.scheme},a.prototype.getAuthority=function(){return this.authority},a.prototype.getPath=function(){return this.path},a.prototype.getQuery=function(){return this.query},a.prototype.getFragment=function(){return this.fragment},a.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},a.prototype.isSameDocumentAs=function(a){return a.scheme==this.scheme&&a.authority==this.authority&&a.path==this.path&&a.query==this.query},a.prototype.equals=function(a){return this.isSameDocumentAs(a)&&a.fragment==this.fragment},a.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(g,c).replace(e,b)),this.path&&(this.path=this.path.replace(e,b)),this.query&&(this.query=this.query.replace(e,b)),this.fragment&&(this.fragment=this.fragment.replace(e,b))};var e=/%[0-9a-z]{2}/gi,f=/[a-zA-Z0-9\-\._~]/,g=/(.*@)?([^@:]*)(:.*)?/;return a.prototype.resolve=function(b){var c=new a;return this.scheme?(c.scheme=this.scheme,c.authority=this.authority,c.path=this.path,c.query=this.query):(c.scheme=b.scheme,this.authority?(c.authority=this.authority,c.path=this.path,c.query=this.query):(c.authority=b.authority,""==this.path?(c.path=b.path,c.query=this.query||b.query):("/"==this.path.charAt(0)?(c.path=this.path,c.removeDotSegments()):(c.path=b.authority&&""==b.path?"/"+this.path:b.path.substring(0,b.path.lastIndexOf("/")+1)+this.path,c.removeDotSegments()),c.query=this.query))),c.fragment=this.fragment,c},a.prototype.removeDotSegments=function(){var a,b=this.path.split("/"),c=[],d=""==b[0];for(d&&b.shift(),""==b[0]?b.shift():null;b.length;)a=b.shift(),".."==a?c.pop():"."!=a&&c.push(a);("."==a||".."==a)&&c.push(""),d&&c.unshift(""),this.path=c.join("/")},a.prototype.toString=function(){var a="";return this.scheme&&(a+=this.scheme+":"),this.authority&&(a+="//"+this.authority),a+=this.path,this.query&&(a+="?"+this.query),this.fragment&&(a+="#"+this.fragment),a},a}),c("Core/buildModuleUrl",["../ThirdParty/Uri","./defined","./DeveloperError","require"],function(a,b,c,d){"use strict";function e(){for(var a=document.getElementsByTagName("script"),b=0,c=a.length;c>b;++b){var d=a[b].getAttribute("src"),e=l.exec(d);if(null!==e)return e[1]}return void 0}function f(){if(b(i))return i;var d;if(d="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:e(),!b(d))throw new c("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.");return i=new a(d).resolve(new a(document.location.href))}function g(a){return d.toUrl("../"+a)}function h(b){return new a(b).resolve(f()).toString()}var i,j,k,l=/((?:.*\/)|^)cesium[\w-]*\.js(?:\W|$)/i,m=function(a){b(j)||(j=b(d.toUrl)?g:h),b(k)||(k=document.createElement("a"));var c=j(a);return k.href=c,k.href=k.href,k.href};return m._cesiumScriptRegex=l,m}),c("Core/destroyObject",["./defaultValue","./DeveloperError"],function(a,b){"use strict";function c(){return!0}var d=function(d,e){function f(){throw new b(e)}e=a(e,"This object was destroyed, i.e., destroy() was called.");for(var g in d)"function"==typeof d[g]&&(d[g]=f);return d.isDestroyed=c,void 0};return d}),c("Core/isCrossOriginUrl",["./defined"],function(a){"use strict";var b,c=function(c){a(b)||(b=document.createElement("a")),b.href=window.location.href;var d=b.host,e=b.protocol;return b.href=c,b.href=b.href,e!==b.protocol||d!==b.host};return c}),c("Core/TaskProcessor",["../ThirdParty/Uri","../ThirdParty/when","./buildModuleUrl","./defaultValue","./defined","./destroyObject","./isCrossOriginUrl","require"],function(a,b,c,d,e,f,g,h){"use strict";function i(){if(!e(o._canTransferArrayBuffer)){var a=new Worker(k("Workers/transferTypedArrayTest.js"));a.postMessage=d(a.webkitPostMessage,a.postMessage);var c=99,f=new Int8Array([c]);try{a.postMessage({array:f},[f.buffer])}catch(a){return o._canTransferArrayBuffer=!1,o._canTransferArrayBuffer}var g=b.defer();a.onmessage=function(b){var d=b.data.array,f=e(d)&&d[0]===c;g.resolve(f),a.terminate(),o._canTransferArrayBuffer=f},o._canTransferArrayBuffer=g.promise}return o._canTransferArrayBuffer}function j(a,b){--a._activeTasks;var c=b.id;if(e(c)){var d=a._deferreds,f=d[c];e(b.error)?f.reject(b.error):f.resolve(b.result),delete d[c]}}function k(a){var b=c(a);if(g(b)){var d,e='importScripts("'+b+'");';try{d=new Blob([e],{type:"application/javascript"})}catch(a){var f=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,h=new f;h.append(e),d=h.getBlob("application/javascript")}var i=window.URL||window.webkitURL;b=i.createObjectURL(d)}return b}function l(){return e(n)||(n=k("Workers/cesiumWorkerBootstrapper.js")),n}function m(b){var f=new Worker(l());f.postMessage=d(f.webkitPostMessage,f.postMessage);var g={loaderConfig:{},workerModule:o._workerModulePrefix+b._workerName};if(e(o._loaderConfig))g.loaderConfig=o._loaderConfig;else if(e(h.toUrl)){var i=new a("..").resolve(new a(c("Workers/cesiumWorkerBootstrapper.js"))).toString();g.loaderConfig.baseUrl=i}else g.loaderConfig.paths={Workers:c("Workers")};return f.postMessage(g),f.onmessage=function(a){j(b,a.data)},f}var n,o=function(a,b){this._workerName=a,this._maximumActiveTasks=d(b,5),this._activeTasks=0,this._deferreds={},this._nextID=0},p=[];return o.prototype.scheduleTask=function(a,c){if(e(this._worker)||(this._worker=m(this)),this._activeTasks>=this._maximumActiveTasks)return void 0;++this._activeTasks;var d=this;return b(i(),function(f){e(c)?f||(c.length=0):c=p;var g=d._nextID++,h=b.defer();return d._deferreds[g]=h,d._worker.postMessage({id:g,parameters:a,canTransferArrayBuffer:f},c),h.promise})},o.prototype.isDestroyed=function(){return!1},o.prototype.destroy=function(){return e(this._worker)&&this._worker.terminate(),f(this)},o._defaultWorkerModulePrefix="Workers/",o._workerModulePrefix=o._defaultWorkerModulePrefix,o._loaderConfig=void 0,o._canTransferArrayBuffer=void 0,o}),c("Core/TerrainMesh",["../Core/defaultValue"],function(a){"use strict";var b=function(b,c,d,e,f,g,h,i){this.center=b,this.vertices=c,this.stride=a(i,6),this.indices=d,this.minimumHeight=e,this.maximumHeight=f,this.boundingSphere3D=g,this.occludeePointInScaledSpace=h};return b}),c("Core/TerrainProvider",["./defined","./defineProperties","./DeveloperError"],function(a,b,c){"use strict";var d=function(){c.throwInstantiationError()};b(d.prototype,{errorEvent:{get:c.throwInstantiationError},credit:{get:c.throwInstantiationError},tilingScheme:{get:c.throwInstantiationError},ready:{get:c.throwInstantiationError},hasWaterMask:{get:c.throwInstantiationError},hasVertexNormals:{get:c.throwInstantiationError}});var e=[];return d.getRegularGridIndices=function(b,c){var d=e[b];a(d)||(e[b]=d=[]);var f=d[c];if(!a(f)){f=d[c]=new Uint16Array(6*(b-1)*(c-1));for(var g=0,h=0,i=0;c-1>i;++i){for(var j=0;b-1>j;++j){var k=g,l=k+b,m=l+1,n=k+1;f[h++]=k,f[h++]=l,f[h++]=n,f[h++]=n,f[h++]=l,f[h++]=m,++g}++g}}return f},d.heightmapTerrainQuality=.25,d.getEstimatedLevelZeroGeometricErrorForAHeightmap=function(a,b,c){return 2*a.maximumRadius*Math.PI*d.heightmapTerrainQuality/(b*c)},d.prototype.requestTileGeometry=c.throwInstantiationError,d.prototype.getLevelMaximumGeometricError=c.throwInstantiationError,d.prototype.getTileDataAvailable=c.throwInstantiationError,d}),c("Core/HeightmapTerrainData",["../ThirdParty/when","./defaultValue","./defined","./defineProperties","./DeveloperError","./GeographicTilingScheme","./HeightmapTessellator","./Math","./Rectangle","./TaskProcessor","./TerrainMesh","./TerrainProvider"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,b,c,d,e,f,g){var h=1,i=a._width,j=a._height,k=f*(i-1),l=k+i-1,m=g*(j-1),n=m+j-1,o=1<<h;k/=o,l/=o,m/=o,n/=o;var p=c*(i-1),q=d*(j-1);k-=p,l-=p,m-=q,n-=q;var r,s,u=0|k,v=0|l,w=0|m,x=0|n,y=v-u+1,z=x-w+1,A=a._buffer,B=a._structure,C=y*z,D=C*B.stride,E=new A.constructor(D),F=0,G=B.stride;if(G>1)for(s=w;x>=s;++s)for(r=u;v>=r;++r)for(var H=(s*i+r)*G,I=0;G>I;++I)E[F++]=A[H+I];else for(s=w;x>=s;++s)for(r=u;v>=r;++r)E[F++]=A[s*i+r];return new t({buffer:E,width:y,height:z,childTileMask:0,structure:a._structure,createdByUpsampling:!0})}function n(a,b,c,d,e,f,g,i){var j,k,l,m,n=a._width,q=a._height,r=a._structure,u=r.stride,v=a._buffer,w=new v.constructor(n*q*u),x=b.tileXYToRectangle(c,d,e),y=b.tileXYToRectangle(f,g,i);if(u>1){var z=r.elementsPerHeight,A=r.elementMultiplier,B=r.isBigEndian,C=Math.pow(A,z-1);for(k=0;q>k;++k)for(l=h.lerp(y.north,y.south,k/(q-1)),j=0;n>j;++j){m=h.lerp(y.west,y.east,j/(n-1));var D=p(v,z,A,u,B,x,n,q,m,l);s(w,z,A,C,u,B,k*n+j,D)}}else for(k=0;q>k;++k)for(l=h.lerp(y.north,y.south,k/(q-1)),j=0;n>j;++j)m=h.lerp(y.west,y.east,j/(n-1)),w[k*n+j]=o(v,x,n,q,m,l);return new t({buffer:w,width:n,height:q,childTileMask:0,structure:a._structure,createdByUpsampling:!0})}function o(a,b,c,d,e,f){var g=(e-b.west)*(c-1)/(b.east-b.west),h=(f-b.south)*(d-1)/(b.north-b.south),i=0|g,j=i+1;j>=c&&(j=c-1,i=c-2);var k=0|h,l=k+1;l>=d&&(l=d-1,k=d-2);var m=g-i,n=h-k;k=d-1-k,l=d-1-l;var o=a[k*c+i],p=a[k*c+j],r=a[l*c+i],s=a[l*c+j];return q(m,n,o,p,r,s)}function p(a,b,c,d,e,f,g,h,i,j){var k=(i-f.west)*(g-1)/(f.east-f.west),l=(j-f.south)*(h-1)/(f.north-f.south),m=0|k,n=m+1;n>=g&&(n=g-1,m=g-2);var o=0|l,p=o+1;p>=h&&(p=h-1,o=h-2);var s=k-m,t=l-o;o=h-1-o,p=h-1-p;var u=r(a,b,c,d,e,o*g+m),v=r(a,b,c,d,e,o*g+n),w=r(a,b,c,d,e,p*g+m),x=r(a,b,c,d,e,p*g+n);return q(s,t,u,v,w,x)}function q(a,b,c,d,e,f){return a>b?c+a*(d-c)+b*(f-d):c+a*(f-e)+b*(e-c)}function r(a,b,c,d,e,f){f*=d;var g,h=0;if(e)for(g=0;b>g;++g)h=h*c+a[f+g];else for(g=b-1;g>=0;--g)h=h*c+a[f+g];return h}function s(a,b,c,d,e,f,g,h){g*=e;var i;if(f)for(i=0;b>i;++i)a[g+i]=0|h/d,h-=a[g+i]*d,d/=c;else for(i=b-1;i>=0;--i)a[g+i]=0|h/d,h-=a[g+i]*d,d/=c}var t=function(a){this._buffer=a.buffer,this._width=a.width,this._height=a.height,this._childTileMask=b(a.childTileMask,15);var d=g.DEFAULT_STRUCTURE,e=a.structure;c(e)?e!==d&&(e.heightScale=b(e.heightScale,d.heightScale),e.heightOffset=b(e.heightOffset,d.heightOffset),e.elementsPerHeight=b(e.elementsPerHeight,d.elementsPerHeight),e.stride=b(e.stride,d.stride),e.elementMultiplier=b(e.elementMultiplier,d.elementMultiplier),e.isBigEndian=b(e.isBigEndian,d.isBigEndian)):e=d,this._structure=e,this._createdByUpsampling=b(a.createdByUpsampling,!1),this._waterMask=a.waterMask};d(t.prototype,{waterMask:{get:function(){return this._waterMask}}});var u=new j("createVerticesFromHeightmap");return t.prototype.createMesh=function(b,d,e,g){var h=b.ellipsoid,j=b.tileXYToNativeRectangle(d,e,g),m=b.tileXYToRectangle(d,e,g),n=h.cartographicToCartesian(i.center(m)),o=this._structure,p=l.getEstimatedLevelZeroGeometricErrorForAHeightmap(h,this._width,b.getNumberOfXTilesAtLevel(0)),q=p/(1<<g),r=u.scheduleTask({heightmap:this._buffer,structure:o,width:this._width,height:this._height,nativeRectangle:j,rectangle:m,relativeToCenter:n,ellipsoid:h,skirtHeight:Math.min(4*q,1e3),isGeographic:b instanceof f});return c(r)?a(r,function(a){return new k(n,new Float32Array(a.vertices),l.getRegularGridIndices(a.gridWidth,a.gridHeight),a.minimumHeight,a.maximumHeight,a.boundingSphere3D,a.occludeePointInScaledSpace)}):void 0},t.prototype.interpolateHeight=function(a,b,c){var d,e=this._width,f=this._height,g=this._structure,h=g.stride;if(h>1){var i=g.elementsPerHeight,j=g.elementMultiplier,k=g.isBigEndian;d=p(this._buffer,i,j,h,k,a,e,f,b,c)}else d=o(this._buffer,a,e,f,b,c);return d*g.heightScale+g.heightOffset},t.prototype.upsample=function(a,b,c,d,e,f,g){var h;return h=1===this._width%2&&1===this._height%2?m(this,a,b,c,d,e,f,g):n(this,a,b,c,d,e,f,g)},t.prototype.isChildAvailable=function(a,b,c,d){var e=2;return c!==2*a&&++e,d!==2*b&&(e-=2),0!==(this._childTileMask&1<<e)},t.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling},t}),c("Core/loadImage",["../ThirdParty/when","./defaultValue","./defined","./DeveloperError","./isCrossOriginUrl"],function(a,b,c,d,e){"use strict";var f=/^data:/,g=function(c,d){return d=b(d,!0),a(c,function(b){var c;c=f.test(b)||!d?!1:e(b);var h=a.defer();return g.createImage(b,c,h),h.promise})};return g.createImage=function(a,b,c){var d=new Image;d.onload=function(){c.resolve(d)},d.onerror=function(a){c.reject(a)},b&&(d.crossOrigin=""),d.src=a},g.defaultCreateImage=g.createImage,g}),c("Core/throttleRequestByServer",["../ThirdParty/Uri","../ThirdParty/when","./defaultValue"],function(a,b,c){"use strict";function d(b){var c=new a(b).resolve(g);c.normalize();var d=c.authority;return/:/.test(d)||(d=d+":"+("https"===c.scheme?"443":"80")),d}var e=6,f={},g=new a(document.location.href),h=function(a,g){var h=d(a),i=c(f[h],0);return i>=e?void 0:(f[h]=i+1,b(g(a),function(a){return f[h]--,a}).otherwise(function(a){return f[h]--,b.reject(a)}))};return h}),c("Core/ArcGisImageServerTerrainProvider",["../ThirdParty/when","./Credit","./defaultValue","./defined","./defineProperties","./DeveloperError","./Ellipsoid","./Event","./GeographicTilingScheme","./getImagePixels","./HeightmapTerrainData","./loadImage","./Math","./TerrainProvider","./throttleRequestByServer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";var p=function(a){this._url=a.url,this._token=a.token,this._tilingScheme=a.tilingScheme,d(this._tilingScheme)||(this._tilingScheme=new i({ellipsoid:c(a.ellipsoid,g.WGS84)})),this._heightmapWidth=65,this._levelZeroMaximumGeometricError=n.getEstimatedLevelZeroGeometricErrorForAHeightmap(this._tilingScheme.ellipsoid,this._heightmapWidth,this._tilingScheme.getNumberOfXTilesAtLevel(0)),this._proxy=a.proxy,this._terrainDataStructure={heightScale:.001,heightOffset:-1e3,elementsPerHeight:3,stride:4,elementMultiplier:256,isBigEndian:!0},this._errorEvent=new h;var e=a.credit;"string"==typeof e&&(e=new b(e)),this._credit=e};return e(p.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return!0}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}}}),p.prototype.requestTileGeometry=function(b,c,e){var f=this._tilingScheme.tileXYToRectangle(b,c,e),g=(f.east-f.west)/(this._heightmapWidth-1),h=(f.north-f.south)/(this._heightmapWidth-1);f.west-=.5*g,f.east+=.5*g,f.south-=.5*h,f.north+=.5*h;var i=m.toDegrees(f.west)+"%2C"+m.toDegrees(f.south)+"%2C"+m.toDegrees(f.east)+"%2C"+m.toDegrees(f.north),n=this._url+"/exportImage?interpolation=RSP_BilinearInterpolation&format=tiff&f=image&size="+this._heightmapWidth+"%2C"+this._heightmapWidth+"&bboxSR=4326&imageSR=4326&bbox="+i;this._token&&(n+="&token="+this._token);var p=this._proxy;d(p)&&(n=p.getURL(n));var q=o(n,l);if(!d(q))return void 0;var r=this;return a(q,function(a){return new k({buffer:j(a),width:r._heightmapWidth,height:r._heightmapWidth,childTileMask:15,structure:r._terrainDataStructure})})},p.prototype.getLevelMaximumGeometricError=function(a){return this._levelZeroMaximumGeometricError/(1<<a)},p.prototype.getTileDataAvailable=function(){return void 0},p}),c("Core/AssociativeArray",["./defined","./defineProperties","./DeveloperError"],function(a,b){"use strict";var c=function(){this._array=[],this._hash={}};return b(c.prototype,{length:{get:function(){return this._array.length}},values:{get:function(){return this._array}}}),c.prototype.contains=function(b){return a(this._hash[b])},c.prototype.set=function(a,b){var c=this._hash[a];b!==c&&(this.remove(a),this._hash[a]=b,this._array.push(b))},c.prototype.get=function(a){return this._hash[a]},c.prototype.remove=function(b){var c=this._hash[b],d=a(c);if(d){var e=this._array;e.splice(e.indexOf(c),1),this._hash[b]=void 0}return d},c.prototype.removeAll=function(){this._hash={},this._array.length=0},c}),c("Core/AttributeCompression",["./Cartesian2","./Cartesian3","./defined","./DeveloperError","./Math"],function(a,b,c,d,e){"use strict";var f={};f.octEncode=function(a,b){if(b.x=a.x/(Math.abs(a.x)+Math.abs(a.y)+Math.abs(a.z)),b.y=a.y/(Math.abs(a.x)+Math.abs(a.y)+Math.abs(a.z)),a.z<0){var c=b.x,d=b.y;b.x=(1-Math.abs(d))*e.signNotZero(c),b.y=(1-Math.abs(c))*e.signNotZero(d)}return b.x=e.toSNorm(b.x),b.y=e.toSNorm(b.y),b},f.octDecode=function(a,c,d){if(d.x=e.fromSNorm(a),d.y=e.fromSNorm(c),d.z=1-(Math.abs(d.x)+Math.abs(d.y)),d.z<0){var f=d.x;d.x=(1-Math.abs(d.y))*e.signNotZero(f),d.y=(1-Math.abs(f))*e.signNotZero(d.y)}return b.normalize(d,d)},f.octPackFloat=function(a){return 256*a.x+a.y};var g=new a;return f.octEncodeFloat=function(a){return f.octEncode(a,g),f.octPackFloat(g)},f.octDecodeFloat=function(a,b){var c=a/256,d=Math.floor(c),e=256*(c-d);return f.octDecode(d,e,b)},f.octPack=function(a,b,c,d){var e=f.octEncodeFloat(a),h=f.octEncodeFloat(b),i=f.octEncode(c,g);return d.x=65536*i.x+e,d.y=65536*i.y+h,d},f.octUnpack=function(a,b,c,d){var e=a.x/65536,g=Math.floor(e),h=65536*(e-g);e=a.y/65536;var i=Math.floor(e),j=65536*(e-i);f.octDecodeFloat(h,b),f.octDecodeFloat(j,c),f.octDecode(g,i,d)},f.compressTextureCoordinates=function(a){var b=1===a.x?4095:0|4096*a.x,c=1===a.y?4095:0|4096*a.y;return 4096*b+c},f.decompressTextureCoordinates=function(a,b){var c=a/4096;return b.x=Math.floor(c)/4096,b.y=c-Math.floor(c),b},f}),c("Core/Intersect",["./freezeObject"],function(a){"use strict";var b={OUTSIDE:-1,INTERSECTING:0,INSIDE:1};return a(b)}),c("Core/AxisAlignedBoundingBox",["./Cartesian3","./defaultValue","./defined","./DeveloperError","./Intersect"],function(a,b,c,d,e){"use strict";var f=function(d,e,f){this.minimum=a.clone(b(d,a.ZERO)),this.maximum=a.clone(b(e,a.ZERO)),c(f)?f=a.clone(f):(f=a.add(this.minimum,this.maximum,new a),a.multiplyByScalar(f,.5,f)),this.center=f};f.fromPoints=function(b,d){if(c(d)||(d=new f),!c(b)||0===b.length)return d.minimum=a.clone(a.ZERO,d.minimum),d.maximum=a.clone(a.ZERO,d.maximum),d.center=a.clone(a.ZERO,d.center),d;for(var e=b[0].x,g=b[0].y,h=b[0].z,i=b[0].x,j=b[0].y,k=b[0].z,l=b.length,m=1;l>m;m++){var n=b[m],o=n.x,p=n.y,q=n.z;e=Math.min(o,e),i=Math.max(o,i),g=Math.min(p,g),j=Math.max(p,j),h=Math.min(q,h),k=Math.max(q,k)}var r=d.minimum;r.x=e,r.y=g,r.z=h;var s=d.maximum;s.x=i,s.y=j,s.z=k;var t=a.add(r,s,d.center);return a.multiplyByScalar(t,.5,t),d},f.clone=function(b,d){return c(b)?c(d)?(d.minimum=a.clone(b.minimum,d.minimum),d.maximum=a.clone(b.maximum,d.maximum),d.center=a.clone(b.center,d.center),d):new f(b.minimum,b.maximum):void 0},f.equals=function(b,d){return b===d||c(b)&&c(d)&&a.equals(b.center,d.center)&&a.equals(b.minimum,d.minimum)&&a.equals(b.maximum,d.maximum)};var g=new a;return f.intersect=function(b,c){g=a.subtract(b.maximum,b.minimum,g);var d=a.multiplyByScalar(g,.5,g),f=d.x*Math.abs(c.x)+d.y*Math.abs(c.y)+d.z*Math.abs(c.z),h=a.dot(b.center,c)+c.w;return h-f>0?e.INSIDE:0>h+f?e.OUTSIDE:e.INTERSECTING},f.prototype.clone=function(a){return f.clone(this,a)},f.prototype.intersect=function(a){return f.intersect(this,a)},f.prototype.equals=function(a){return f.equals(this,a)},f}),c("Core/BingMapsApi",["./defined"],function(a){"use strict";var b={};b.defaultKey=void 0;var c=!1;return b.getKey=function(d){return a(d)?d:a(b.defaultKey)?b.defaultKey:(c||(console.log("This application is using Cesium's default Bing Maps key.  Please create a new key for the application as soon as possible and prior to deployment by visiting https://www.bingmapsportal.com/, and provide your key to Cesium by setting the Cesium.BingMapsApi.defaultKey property before constructing the CesiumWidget or any other object that uses the Bing Maps API."),c=!0),"Aj1ony_-Typ-KjG9SJWiKSHY23U1KmK7yAmZa9lDmuF2osXWkcZ22VPsqmCt0TCt")},b}),c("Core/BoundingRectangle",["./Cartesian2","./Cartographic","./defaultValue","./defined","./DeveloperError","./GeographicProjection","./Intersect","./Rectangle"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(a,b,d,e){this.x=c(a,0),this.y=c(b,0),this.width=c(d,0),this.height=c(e,0)};i.fromPoints=function(a,b){if(d(b)||(b=new i),!d(a)||0===a.length)return b.x=0,b.y=0,b.width=0,b.height=0,b;for(var c=a.length,e=a[0].x,f=a[0].y,g=a[0].x,h=a[0].y,j=1;c>j;j++){var k=a[j],l=k.x,m=k.y;e=Math.min(l,e),g=Math.max(l,g),f=Math.min(m,f),h=Math.max(m,h)}return b.x=e,b.y=f,b.width=g-e,b.height=h-f,b};var j=new f,k=new b,l=new b;return i.fromRectangle=function(b,e,f){if(d(f)||(f=new i),!d(b))return f.x=0,f.y=0,f.width=0,f.height=0,f;e=c(e,j);var g=e.project(h.southwest(b,k)),m=e.project(h.northeast(b,l));return a.subtract(m,g,m),f.x=g.x,f.y=g.y,f.width=m.x,f.height=m.y,f},i.clone=function(a,b){return d(a)?d(b)?(b.x=a.x,b.y=a.y,b.width=a.width,b.height=a.height,b):new i(a.x,a.y,a.width,a.height):void 0},i.union=function(a,b,c){d(c)||(c=new i);var e=Math.min(a.x,b.x),f=Math.min(a.y,b.y),g=Math.max(a.x+a.width,b.x+b.width),h=Math.max(a.y+a.height,b.y+b.height);return c.x=e,c.y=f,c.width=g-e,c.height=h-f,c},i.expand=function(a,b,c){c=i.clone(a,c);var d=b.x-c.x,e=b.y-c.y;return d>c.width?c.width=d:0>d&&(c.width-=d,c.x=b.x),e>c.height?c.height=e:0>e&&(c.height-=e,c.y=b.y),c},i.intersect=function(a,b){var c=a.x,d=a.y,e=b.x,f=b.y;return c>e+b.width||c+a.width<e||d+a.height<f||d>f+b.height?g.OUTSIDE:g.INTERSECTING},i.equals=function(a,b){return a===b||d(a)&&d(b)&&a.x===b.x&&a.y===b.y&&a.width===b.width&&a.height===b.height},i.prototype.clone=function(a){return i.clone(this,a)},i.prototype.intersect=function(a){return i.intersect(this,a)},i.prototype.equals=function(a){return i.equals(this,a)},i}),c("Core/Interval",["./defaultValue"],function(a){"use strict";var b=function(b,c){this.start=a(b,0),this.stop=a(c,0)};return b}),c("Core/Cartesian4",["./defaultValue","./defined","./DeveloperError","./freezeObject"],function(a,b,c,d){"use strict";var e=function(b,c,d,e){this.x=a(b,0),this.y=a(c,0),this.z=a(d,0),this.w=a(e,0)};e.fromElements=function(a,c,d,f,g){return b(g)?(g.x=a,g.y=c,g.z=d,g.w=f,g):new e(a,c,d,f)},e.fromColor=function(a,c){return b(c)?(c.x=a.red,c.y=a.green,c.z=a.blue,c.w=a.alpha,c):new e(a.red,a.green,a.blue,a.alpha)},e.clone=function(a,c){return b(a)?b(c)?(c.x=a.x,c.y=a.y,c.z=a.z,c.w=a.w,c):new e(a.x,a.y,a.z,a.w):void 0},e.packedLength=4,e.pack=function(b,c,d){d=a(d,0),c[d++]=b.x,c[d++]=b.y,c[d++]=b.z,c[d]=b.w},e.unpack=function(c,d,f){return d=a(d,0),b(f)||(f=new e),f.x=c[d++],f.y=c[d++],f.z=c[d++],f.w=c[d],f},e.fromArray=e.unpack,e.maximumComponent=function(a){return Math.max(a.x,a.y,a.z,a.w)},e.minimumComponent=function(a){return Math.min(a.x,a.y,a.z,a.w)},e.minimumByComponent=function(a,b,c){return c.x=Math.min(a.x,b.x),c.y=Math.min(a.y,b.y),c.z=Math.min(a.z,b.z),c.w=Math.min(a.w,b.w),c},e.maximumByComponent=function(a,b,c){return c.x=Math.max(a.x,b.x),c.y=Math.max(a.y,b.y),c.z=Math.max(a.z,b.z),c.w=Math.max(a.w,b.w),c},e.magnitudeSquared=function(a){return a.x*a.x+a.y*a.y+a.z*a.z+a.w*a.w},e.magnitude=function(a){return Math.sqrt(e.magnitudeSquared(a))};var f=new e;e.distance=function(a,b){return e.subtract(a,b,f),e.magnitude(f)},e.distanceSquared=function(a,b){return e.subtract(a,b,f),e.magnitudeSquared(f)},e.normalize=function(a,b){var c=e.magnitude(a);return b.x=a.x/c,b.y=a.y/c,b.z=a.z/c,b.w=a.w/c,b},e.dot=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z+a.w*b.w},e.multiplyComponents=function(a,b,c){return c.x=a.x*b.x,c.y=a.y*b.y,c.z=a.z*b.z,c.w=a.w*b.w,c},e.add=function(a,b,c){return c.x=a.x+b.x,c.y=a.y+b.y,c.z=a.z+b.z,c.w=a.w+b.w,c},e.subtract=function(a,b,c){return c.x=a.x-b.x,c.y=a.y-b.y,c.z=a.z-b.z,c.w=a.w-b.w,c},e.multiplyByScalar=function(a,b,c){return c.x=a.x*b,c.y=a.y*b,c.z=a.z*b,c.w=a.w*b,c},e.divideByScalar=function(a,b,c){return c.x=a.x/b,c.y=a.y/b,c.z=a.z/b,c.w=a.w/b,c},e.negate=function(a,b){return b.x=-a.x,b.y=-a.y,b.z=-a.z,b.w=-a.w,b},e.abs=function(a,b){return b.x=Math.abs(a.x),b.y=Math.abs(a.y),b.z=Math.abs(a.z),b.w=Math.abs(a.w),b};var g=new e;e.lerp=function(a,b,c,d){return e.multiplyByScalar(b,c,g),d=e.multiplyByScalar(a,1-c,d),e.add(g,d,d)};var h=new e;return e.mostOrthogonalAxis=function(a,b){var c=e.normalize(a,h);return e.abs(c,c),b=c.x<=c.y?c.x<=c.z?c.x<=c.w?e.clone(e.UNIT_X,b):e.clone(e.UNIT_W,b):c.z<=c.w?e.clone(e.UNIT_Z,b):e.clone(e.UNIT_W,b):c.y<=c.z?c.y<=c.w?e.clone(e.UNIT_Y,b):e.clone(e.UNIT_W,b):c.z<=c.w?e.clone(e.UNIT_Z,b):e.clone(e.UNIT_W,b)},e.equals=function(a,c){return a===c||b(a)&&b(c)&&a.x===c.x&&a.y===c.y&&a.z===c.z&&a.w===c.w},e.equalsEpsilon=function(a,c,d){return a===c||b(a)&&b(c)&&Math.abs(a.x-c.x)<=d&&Math.abs(a.y-c.y)<=d&&Math.abs(a.z-c.z)<=d&&Math.abs(a.w-c.w)<=d},e.ZERO=d(new e(0,0,0,0)),e.UNIT_X=d(new e(1,0,0,0)),e.UNIT_Y=d(new e(0,1,0,0)),e.UNIT_Z=d(new e(0,0,1,0)),e.UNIT_W=d(new e(0,0,0,1)),e.prototype.clone=function(a){return e.clone(this,a)},e.prototype.equals=function(a){return e.equals(this,a)},e.prototype.equalsEpsilon=function(a,b){return e.equalsEpsilon(this,a,b)},e.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},e}),c("Core/Matrix3",["./Cartesian3","./defaultValue","./defined","./DeveloperError","./freezeObject","./Math"],function(a,b,c,d,e,f){"use strict";function g(a){for(var b=0,c=0;9>c;++c){var d=a[c];b+=d*d}return Math.sqrt(b)}function h(a){for(var b=0,c=0;3>c;++c){var d=a[j.getElementIndex(n[c],m[c])];b+=2*d*d}return Math.sqrt(b)}function i(a,b){for(var c=f.EPSILON15,d=0,e=1,g=0;3>g;++g){var h=Math.abs(a[j.getElementIndex(n[g],m[g])]);h>d&&(e=g,d=h)}var i=1,k=0,l=m[e],o=n[e];if(Math.abs(a[j.getElementIndex(o,l)])>c){var p,q=a[j.getElementIndex(o,o)],r=a[j.getElementIndex(l,l)],s=a[j.getElementIndex(o,l)],t=(q-r)/2/s;p=0>t?-1/(-t+Math.sqrt(1+t*t)):1/(t+Math.sqrt(1+t*t)),i=1/Math.sqrt(1+p*p),k=p*i}return b=j.clone(j.IDENTITY,b),b[j.getElementIndex(l,l)]=b[j.getElementIndex(o,o)]=i,b[j.getElementIndex(o,l)]=k,b[j.getElementIndex(l,o)]=-k,b}var j=function(a,c,d,e,f,g,h,i,j){this[0]=b(a,0),this[1]=b(e,0),this[2]=b(h,0),this[3]=b(c,0),this[4]=b(f,0),this[5]=b(i,0),this[6]=b(d,0),this[7]=b(g,0),this[8]=b(j,0)};j.clone=function(a,b){return c(a)?c(b)?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b):new j(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]):void 0},j.fromArray=function(a,d,e){return d=b(d,0),c(e)||(e=new j),e[0]=a[d],e[1]=a[d+1],e[2]=a[d+2],e[3]=a[d+3],e[4]=a[d+4],e[5]=a[d+5],e[6]=a[d+6],e[7]=a[d+7],e[8]=a[d+8],e},j.fromColumnMajorArray=function(a,b){return j.clone(a,b)},j.fromRowMajorArray=function(a,b){return c(b)?(b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8],b):new j(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},j.fromQuaternion=function(a,b){var d=a.x*a.x,e=a.x*a.y,f=a.x*a.z,g=a.x*a.w,h=a.y*a.y,i=a.y*a.z,k=a.y*a.w,l=a.z*a.z,m=a.z*a.w,n=a.w*a.w,o=d-h-l+n,p=2*(e-m),q=2*(f+k),r=2*(e+m),s=-d+h-l+n,t=2*(i-g),u=2*(f-k),v=2*(i+g),w=-d-h+l+n;return c(b)?(b[0]=o,b[1]=r,b[2]=u,b[3]=p,b[4]=s,b[5]=v,b[6]=q,b[7]=t,b[8]=w,b):new j(o,p,q,r,s,t,u,v,w)},j.fromScale=function(a,b){return c(b)?(b[0]=a.x,b[1]=0,b[2]=0,b[3]=0,b[4]=a.y,b[5]=0,b[6]=0,b[7]=0,b[8]=a.z,b):new j(a.x,0,0,0,a.y,0,0,0,a.z)},j.fromUniformScale=function(a,b){return c(b)?(b[0]=a,b[1]=0,b[2]=0,b[3]=0,b[4]=a,b[5]=0,b[6]=0,b[7]=0,b[8]=a,b):new j(a,0,0,0,a,0,0,0,a)},j.fromCrossProduct=function(a,b){return c(b)?(b[0]=0,b[1]=a.z,b[2]=-a.y,b[3]=-a.z,b[4]=0,b[5]=a.x,b[6]=a.y,b[7]=-a.x,b[8]=0,b):new j(0,-a.z,a.y,a.z,0,-a.x,-a.y,a.x,0)},j.fromRotationX=function(a,b){var d=Math.cos(a),e=Math.sin(a);return c(b)?(b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=d,b[5]=e,b[6]=0,b[7]=-e,b[8]=d,b):new j(1,0,0,0,d,-e,0,e,d)},j.fromRotationY=function(a,b){var d=Math.cos(a),e=Math.sin(a);return c(b)?(b[0]=d,b[1]=0,b[2]=-e,b[3]=0,b[4]=1,b[5]=0,b[6]=e,b[7]=0,b[8]=d,b):new j(d,0,e,0,1,0,-e,0,d)},j.fromRotationZ=function(a,b){var d=Math.cos(a),e=Math.sin(a);return c(b)?(b[0]=d,b[1]=e,b[2]=0,b[3]=-e,b[4]=d,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b):new j(d,-e,0,e,d,0,0,0,1)},j.toArray=function(a,b){return c(b)?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b):[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]},j.getElementIndex=function(a,b){return 3*a+b},j.getColumn=function(a,b,c){var d=3*b,e=a[d],f=a[d+1],g=a[d+2];return c.x=e,c.y=f,c.z=g,c},j.setColumn=function(a,b,c,d){d=j.clone(a,d);var e=3*b;return d[e]=c.x,d[e+1]=c.y,d[e+2]=c.z,d},j.getRow=function(a,b,c){var d=a[b],e=a[b+3],f=a[b+6];return c.x=d,c.y=e,c.z=f,c},j.setRow=function(a,b,c,d){return d=j.clone(a,d),d[b]=c.x,d[b+3]=c.y,d[b+6]=c.z,d};var k=new a;j.getScale=function(b,c){return c.x=a.magnitude(a.fromElements(b[0],b[1],b[2],k)),
c.y=a.magnitude(a.fromElements(b[3],b[4],b[5],k)),c.z=a.magnitude(a.fromElements(b[6],b[7],b[8],k)),c};var l=new a;j.getMaximumScale=function(b){return j.getScale(b,l),a.maximumComponent(l)},j.multiply=function(a,b,c){var d=a[0]*b[0]+a[3]*b[1]+a[6]*b[2],e=a[1]*b[0]+a[4]*b[1]+a[7]*b[2],f=a[2]*b[0]+a[5]*b[1]+a[8]*b[2],g=a[0]*b[3]+a[3]*b[4]+a[6]*b[5],h=a[1]*b[3]+a[4]*b[4]+a[7]*b[5],i=a[2]*b[3]+a[5]*b[4]+a[8]*b[5],j=a[0]*b[6]+a[3]*b[7]+a[6]*b[8],k=a[1]*b[6]+a[4]*b[7]+a[7]*b[8],l=a[2]*b[6]+a[5]*b[7]+a[8]*b[8];return c[0]=d,c[1]=e,c[2]=f,c[3]=g,c[4]=h,c[5]=i,c[6]=j,c[7]=k,c[8]=l,c},j.add=function(a,b,c){return c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c[4]=a[4]+b[4],c[5]=a[5]+b[5],c[6]=a[6]+b[6],c[7]=a[7]+b[7],c[8]=a[8]+b[8],c},j.subtract=function(a,b,c){return c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],c[4]=a[4]-b[4],c[5]=a[5]-b[5],c[6]=a[6]-b[6],c[7]=a[7]-b[7],c[8]=a[8]-b[8],c},j.multiplyByVector=function(a,b,c){var d=b.x,e=b.y,f=b.z,g=a[0]*d+a[3]*e+a[6]*f,h=a[1]*d+a[4]*e+a[7]*f,i=a[2]*d+a[5]*e+a[8]*f;return c.x=g,c.y=h,c.z=i,c},j.multiplyByScalar=function(a,b,c){return c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c[4]=a[4]*b,c[5]=a[5]*b,c[6]=a[6]*b,c[7]=a[7]*b,c[8]=a[8]*b,c},j.negate=function(a,b){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b[4]=-a[4],b[5]=-a[5],b[6]=-a[6],b[7]=-a[7],b[8]=-a[8],b},j.transpose=function(a,b){var c=a[0],d=a[3],e=a[6],f=a[1],g=a[4],h=a[7],i=a[2],j=a[5],k=a[8];return b[0]=c,b[1]=d,b[2]=e,b[3]=f,b[4]=g,b[5]=h,b[6]=i,b[7]=j,b[8]=k,b};var m=[1,0,0],n=[2,2,1],o=new j,p=new j;return j.computeEigenDecomposition=function(a,b){var d=f.EPSILON20,e=10,k=0,l=0;c(b)||(b={});for(var m=b.unitary=j.clone(j.IDENTITY,b.unitary),n=b.diagonal=j.clone(a,b.diagonal),q=d*g(n);e>l&&h(n)>q;)i(n,o),j.transpose(o,p),j.multiply(n,o,n),j.multiply(p,n,n),j.multiply(m,o,m),++k>2&&(++l,k=0);return b},j.abs=function(a,b){return b[0]=Math.abs(a[0]),b[1]=Math.abs(a[1]),b[2]=Math.abs(a[2]),b[3]=Math.abs(a[3]),b[4]=Math.abs(a[4]),b[5]=Math.abs(a[5]),b[6]=Math.abs(a[6]),b[7]=Math.abs(a[7]),b[8]=Math.abs(a[8]),b},j.determinant=function(a){var b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return b*(f*j-i*g)+e*(i*d-c*j)+h*(c*g-f*d)},j.inverse=function(a,b){var c=a[0],e=a[1],g=a[2],h=a[3],i=a[4],k=a[5],l=a[6],m=a[7],n=a[8],o=j.determinant(a);if(Math.abs(o)<=f.EPSILON15)throw new d("matrix is not invertible");b[0]=i*n-m*k,b[1]=m*g-e*n,b[2]=e*k-i*g,b[3]=l*k-h*n,b[4]=c*n-l*g,b[5]=h*g-c*k,b[6]=h*m-l*i,b[7]=l*e-c*m,b[8]=c*i-h*e;var p=1/o;return j.multiplyByScalar(b,p,b)},j.equals=function(a,b){return a===b||c(a)&&c(b)&&a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]},j.equalsEpsilon=function(a,b,d){return a===b||c(a)&&c(b)&&Math.abs(a[0]-b[0])<=d&&Math.abs(a[1]-b[1])<=d&&Math.abs(a[2]-b[2])<=d&&Math.abs(a[3]-b[3])<=d&&Math.abs(a[4]-b[4])<=d&&Math.abs(a[5]-b[5])<=d&&Math.abs(a[6]-b[6])<=d&&Math.abs(a[7]-b[7])<=d&&Math.abs(a[8]-b[8])<=d},j.IDENTITY=e(new j(1,0,0,0,1,0,0,0,1)),j.COLUMN0ROW0=0,j.COLUMN0ROW1=1,j.COLUMN0ROW2=2,j.COLUMN1ROW0=3,j.COLUMN1ROW1=4,j.COLUMN1ROW2=5,j.COLUMN2ROW0=6,j.COLUMN2ROW1=7,j.COLUMN2ROW2=8,j.prototype.clone=function(a){return j.clone(this,a)},j.prototype.equals=function(a){return j.equals(this,a)},j.prototype.equalsEpsilon=function(a,b){return j.equalsEpsilon(this,a,b)},j.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n"+"("+this[1]+", "+this[4]+", "+this[7]+")\n"+"("+this[2]+", "+this[5]+", "+this[8]+")"},j}),c("Core/RuntimeError",["./defined"],function(a){"use strict";var b=function(a){this.name="RuntimeError",this.message=a;var b;try{throw new Error}catch(a){b=a.stack}this.stack=b};return b.prototype.toString=function(){var b=this.name+": "+this.message;return a(this.stack)&&(b+="\n"+this.stack.toString()),b},b}),c("Core/Matrix4",["./Cartesian3","./Cartesian4","./defaultValue","./defined","./DeveloperError","./freezeObject","./Math","./Matrix3","./RuntimeError"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(a,b,d,e,f,g,h,i,j,k,l,m,n,o,p,q){this[0]=c(a,0),this[1]=c(f,0),this[2]=c(j,0),this[3]=c(n,0),this[4]=c(b,0),this[5]=c(g,0),this[6]=c(k,0),this[7]=c(o,0),this[8]=c(d,0),this[9]=c(h,0),this[10]=c(l,0),this[11]=c(p,0),this[12]=c(e,0),this[13]=c(i,0),this[14]=c(m,0),this[15]=c(q,0)};j.packedLength=16,j.pack=function(a,b,d){d=c(d,0),b[d++]=a[0],b[d++]=a[1],b[d++]=a[2],b[d++]=a[3],b[d++]=a[4],b[d++]=a[5],b[d++]=a[6],b[d++]=a[7],b[d++]=a[8],b[d++]=a[9],b[d++]=a[10],b[d++]=a[11],b[d++]=a[12],b[d++]=a[13],b[d++]=a[14],b[d]=a[15]},j.unpack=function(a,b,e){return b=c(b,0),d(e)||(e=new j),e[0]=a[b++],e[1]=a[b++],e[2]=a[b++],e[3]=a[b++],e[4]=a[b++],e[5]=a[b++],e[6]=a[b++],e[7]=a[b++],e[8]=a[b++],e[9]=a[b++],e[10]=a[b++],e[11]=a[b++],e[12]=a[b++],e[13]=a[b++],e[14]=a[b++],e[15]=a[b],e},j.clone=function(a,b){return d(a)?d(b)?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b):new j(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]):void 0},j.fromArray=j.unpack,j.fromColumnMajorArray=function(a,b){return j.clone(a,b)},j.fromRowMajorArray=function(a,b){return d(b)?(b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15],b):new j(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])},j.fromRotationTranslation=function(b,e,f){return e=c(e,a.ZERO),d(f)?(f[0]=b[0],f[1]=b[1],f[2]=b[2],f[3]=0,f[4]=b[3],f[5]=b[4],f[6]=b[5],f[7]=0,f[8]=b[6],f[9]=b[7],f[10]=b[8],f[11]=0,f[12]=e.x,f[13]=e.y,f[14]=e.z,f[15]=1,f):new j(b[0],b[3],b[6],e.x,b[1],b[4],b[7],e.y,b[2],b[5],b[8],e.z,0,0,0,1)},j.fromTranslationQuaternionRotationScale=function(a,b,c,e){d(e)||(e=new j);var f=c.x,g=c.y,h=c.z,i=b.x*b.x,k=b.x*b.y,l=b.x*b.z,m=b.x*b.w,n=b.y*b.y,o=b.y*b.z,p=b.y*b.w,q=b.z*b.z,r=b.z*b.w,s=b.w*b.w,t=i-n-q+s,u=2*(k-r),v=2*(l+p),w=2*(k+r),x=-i+n-q+s,y=2*(o-m),z=2*(l-p),A=2*(o+m),B=-i-n+q+s;return e[0]=t*f,e[1]=w*f,e[2]=z*f,e[3]=0,e[4]=u*g,e[5]=x*g,e[6]=A*g,e[7]=0,e[8]=v*h,e[9]=y*h,e[10]=B*h,e[11]=0,e[12]=a.x,e[13]=a.y,e[14]=a.z,e[15]=1,e},j.fromTranslation=function(a,b){return j.fromRotationTranslation(h.IDENTITY,a,b)},j.fromScale=function(a,b){return d(b)?(b[0]=a.x,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=a.y,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=a.z,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b):new j(a.x,0,0,0,0,a.y,0,0,0,0,a.z,0,0,0,0,1)},j.fromUniformScale=function(a,b){return d(b)?(b[0]=a,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=a,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=a,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b):new j(a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,1)};var k=new a,l=new a,m=new a;j.fromCamera=function(b,c){var e=b.eye,f=b.target,g=b.up;a.normalize(a.subtract(f,e,k),k),a.normalize(a.cross(k,g,l),l),a.normalize(a.cross(l,k,m),m);var h=l.x,i=l.y,n=l.z,o=k.x,p=k.y,q=k.z,r=m.x,s=m.y,t=m.z,u=e.x,v=e.y,w=e.z,x=h*-u+i*-v+n*-w,y=r*-u+s*-v+t*-w,z=o*u+p*v+q*w;return d(c)?(c[0]=h,c[1]=r,c[2]=-o,c[3]=0,c[4]=i,c[5]=s,c[6]=-p,c[7]=0,c[8]=n,c[9]=t,c[10]=-q,c[11]=0,c[12]=x,c[13]=y,c[14]=z,c[15]=1,c):new j(h,i,n,x,r,s,t,y,-o,-p,-q,z,0,0,0,1)},j.computePerspectiveFieldOfView=function(a,b,c,d,e){var f=Math.tan(.5*a),g=1/f,h=g/b,i=(d+c)/(c-d),j=2*d*c/(c-d);return e[0]=h,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=g,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=i,e[11]=-1,e[12]=0,e[13]=0,e[14]=j,e[15]=0,e},j.computeOrthographicOffCenter=function(a,b,c,d,e,f,g){var h=1/(b-a),i=1/(d-c),j=1/(f-e),k=-(b+a)*h,l=-(d+c)*i,m=-(f+e)*j;return h*=2,i*=2,j*=-2,g[0]=h,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=i,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=j,g[11]=0,g[12]=k,g[13]=l,g[14]=m,g[15]=1,g},j.computePerspectiveOffCenter=function(a,b,c,d,e,f,g){var h=2*e/(b-a),i=2*e/(d-c),j=(b+a)/(b-a),k=(d+c)/(d-c),l=-(f+e)/(f-e),m=-1,n=-2*f*e/(f-e);return g[0]=h,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=i,g[6]=0,g[7]=0,g[8]=j,g[9]=k,g[10]=l,g[11]=m,g[12]=0,g[13]=0,g[14]=n,g[15]=0,g},j.computeInfinitePerspectiveOffCenter=function(a,b,c,d,e,f){var g=2*e/(b-a),h=2*e/(d-c),i=(b+a)/(b-a),j=(d+c)/(d-c),k=-1,l=-1,m=-2*e;return f[0]=g,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=h,f[6]=0,f[7]=0,f[8]=i,f[9]=j,f[10]=k,f[11]=l,f[12]=0,f[13]=0,f[14]=m,f[15]=0,f},j.computeViewportTransformation=function(a,b,d,e){a=c(a,c.EMPTY_OBJECT);var f=c(a.x,0),g=c(a.y,0),h=c(a.width,0),i=c(a.height,0);b=c(b,0),d=c(d,1);var j=.5*h,k=.5*i,l=.5*(d-b),m=j,n=k,o=l,p=f+j,q=g+k,r=b+l,s=1;return e[0]=m,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=o,e[11]=0,e[12]=p,e[13]=q,e[14]=r,e[15]=s,e},j.toArray=function(a,b){return d(b)?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b):[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},j.getElementIndex=function(a,b){return 4*a+b},j.getColumn=function(a,b,c){var d=4*b,e=a[d],f=a[d+1],g=a[d+2],h=a[d+3];return c.x=e,c.y=f,c.z=g,c.w=h,c},j.setColumn=function(a,b,c,d){d=j.clone(a,d);var e=4*b;return d[e]=c.x,d[e+1]=c.y,d[e+2]=c.z,d[e+3]=c.w,d},j.getRow=function(a,b,c){var d=a[b],e=a[b+4],f=a[b+8],g=a[b+12];return c.x=d,c.y=e,c.z=f,c.w=g,c},j.setRow=function(a,b,c,d){return d=j.clone(a,d),d[b]=c.x,d[b+4]=c.y,d[b+8]=c.z,d[b+12]=c.w,d};var n=new a;j.getScale=function(b,c){return c.x=a.magnitude(a.fromElements(b[0],b[1],b[2],n)),c.y=a.magnitude(a.fromElements(b[4],b[5],b[6],n)),c.z=a.magnitude(a.fromElements(b[8],b[9],b[10],n)),c};var o=new a;j.getMaximumScale=function(b){return j.getScale(b,o),a.maximumComponent(o)},j.multiply=function(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],x=b[4],y=b[5],z=b[6],A=b[7],B=b[8],C=b[9],D=b[10],E=b[11],F=b[12],G=b[13],H=b[14],I=b[15],J=d*t+h*u+l*v+p*w,K=e*t+i*u+m*v+q*w,L=f*t+j*u+n*v+r*w,M=g*t+k*u+o*v+s*w,N=d*x+h*y+l*z+p*A,O=e*x+i*y+m*z+q*A,P=f*x+j*y+n*z+r*A,Q=g*x+k*y+o*z+s*A,R=d*B+h*C+l*D+p*E,S=e*B+i*C+m*D+q*E,T=f*B+j*C+n*D+r*E,U=g*B+k*C+o*D+s*E,V=d*F+h*G+l*H+p*I,W=e*F+i*G+m*H+q*I,X=f*F+j*G+n*H+r*I,Y=g*F+k*G+o*H+s*I;return c[0]=J,c[1]=K,c[2]=L,c[3]=M,c[4]=N,c[5]=O,c[6]=P,c[7]=Q,c[8]=R,c[9]=S,c[10]=T,c[11]=U,c[12]=V,c[13]=W,c[14]=X,c[15]=Y,c},j.add=function(a,b,c){return c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c[4]=a[4]+b[4],c[5]=a[5]+b[5],c[6]=a[6]+b[6],c[7]=a[7]+b[7],c[8]=a[8]+b[8],c[9]=a[9]+b[9],c[10]=a[10]+b[10],c[11]=a[11]+b[11],c[12]=a[12]+b[12],c[13]=a[13]+b[13],c[14]=a[14]+b[14],c[15]=a[15]+b[15],c},j.subtract=function(a,b,c){return c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],c[4]=a[4]-b[4],c[5]=a[5]-b[5],c[6]=a[6]-b[6],c[7]=a[7]-b[7],c[8]=a[8]-b[8],c[9]=a[9]-b[9],c[10]=a[10]-b[10],c[11]=a[11]-b[11],c[12]=a[12]-b[12],c[13]=a[13]-b[13],c[14]=a[14]-b[14],c[15]=a[15]-b[15],c},j.multiplyTransformation=function(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[4],h=a[5],i=a[6],j=a[8],k=a[9],l=a[10],m=a[12],n=a[13],o=a[14],p=b[0],q=b[1],r=b[2],s=b[4],t=b[5],u=b[6],v=b[8],w=b[9],x=b[10],y=b[12],z=b[13],A=b[14],B=d*p+g*q+j*r,C=e*p+h*q+k*r,D=f*p+i*q+l*r,E=d*s+g*t+j*u,F=e*s+h*t+k*u,G=f*s+i*t+l*u,H=d*v+g*w+j*x,I=e*v+h*w+k*x,J=f*v+i*w+l*x,K=d*y+g*z+j*A+m,L=e*y+h*z+k*A+n,M=f*y+i*z+l*A+o;return c[0]=B,c[1]=C,c[2]=D,c[3]=0,c[4]=E,c[5]=F,c[6]=G,c[7]=0,c[8]=H,c[9]=I,c[10]=J,c[11]=0,c[12]=K,c[13]=L,c[14]=M,c[15]=1,c},j.multiplyByMatrix3=function(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[4],h=a[5],i=a[6],j=a[8],k=a[9],l=a[10],m=b[0],n=b[1],o=b[2],p=b[3],q=b[4],r=b[5],s=b[6],t=b[7],u=b[8],v=d*m+g*n+j*o,w=e*m+h*n+k*o,x=f*m+i*n+l*o,y=d*p+g*q+j*r,z=e*p+h*q+k*r,A=f*p+i*q+l*r,B=d*s+g*t+j*u,C=e*s+h*t+k*u,D=f*s+i*t+l*u;return c[0]=v,c[1]=w,c[2]=x,c[3]=0,c[4]=y,c[5]=z,c[6]=A,c[7]=0,c[8]=B,c[9]=C,c[10]=D,c[11]=0,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},j.multiplyByTranslation=function(a,b,c){var d=b.x,e=b.y,f=b.z,g=d*a[0]+e*a[4]+f*a[8]+a[12],h=d*a[1]+e*a[5]+f*a[9]+a[13],i=d*a[2]+e*a[6]+f*a[10]+a[14];return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=g,c[13]=h,c[14]=i,c[15]=a[15],c};var p=new a;j.multiplyByUniformScale=function(a,b,c){return p.x=b,p.y=b,p.z=b,j.multiplyByScale(a,p,c)},j.multiplyByScale=function(a,b,c){var d=b.x,e=b.y,f=b.z;return 1===d&&1===e&&1===f?j.clone(a,c):(c[0]=d*a[0],c[1]=d*a[1],c[2]=d*a[2],c[3]=0,c[4]=e*a[4],c[5]=e*a[5],c[6]=e*a[6],c[7]=0,c[8]=f*a[8],c[9]=f*a[9],c[10]=f*a[10],c[11]=0,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=1,c)},j.multiplyByVector=function(a,b,c){var d=b.x,e=b.y,f=b.z,g=b.w,h=a[0]*d+a[4]*e+a[8]*f+a[12]*g,i=a[1]*d+a[5]*e+a[9]*f+a[13]*g,j=a[2]*d+a[6]*e+a[10]*f+a[14]*g,k=a[3]*d+a[7]*e+a[11]*f+a[15]*g;return c.x=h,c.y=i,c.z=j,c.w=k,c},j.multiplyByPointAsVector=function(a,b,c){var d=b.x,e=b.y,f=b.z,g=a[0]*d+a[4]*e+a[8]*f,h=a[1]*d+a[5]*e+a[9]*f,i=a[2]*d+a[6]*e+a[10]*f;return c.x=g,c.y=h,c.z=i,c},j.multiplyByPoint=function(a,b,c){var d=b.x,e=b.y,f=b.z,g=a[0]*d+a[4]*e+a[8]*f+a[12],h=a[1]*d+a[5]*e+a[9]*f+a[13],i=a[2]*d+a[6]*e+a[10]*f+a[14];return c.x=g,c.y=h,c.z=i,c},j.multiplyByScalar=function(a,b,c){return c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c[4]=a[4]*b,c[5]=a[5]*b,c[6]=a[6]*b,c[7]=a[7]*b,c[8]=a[8]*b,c[9]=a[9]*b,c[10]=a[10]*b,c[11]=a[11]*b,c[12]=a[12]*b,c[13]=a[13]*b,c[14]=a[14]*b,c[15]=a[15]*b,c},j.negate=function(a,b){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b[4]=-a[4],b[5]=-a[5],b[6]=-a[6],b[7]=-a[7],b[8]=-a[8],b[9]=-a[9],b[10]=-a[10],b[11]=-a[11],b[12]=-a[12],b[13]=-a[13],b[14]=-a[14],b[15]=-a[15],b},j.transpose=function(a,b){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],h=a[11];return b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=c,b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=d,b[9]=f,b[10]=a[10],b[11]=a[14],b[12]=e,b[13]=g,b[14]=h,b[15]=a[15],b},j.abs=function(a,b){return b[0]=Math.abs(a[0]),b[1]=Math.abs(a[1]),b[2]=Math.abs(a[2]),b[3]=Math.abs(a[3]),b[4]=Math.abs(a[4]),b[5]=Math.abs(a[5]),b[6]=Math.abs(a[6]),b[7]=Math.abs(a[7]),b[8]=Math.abs(a[8]),b[9]=Math.abs(a[9]),b[10]=Math.abs(a[10]),b[11]=Math.abs(a[11]),b[12]=Math.abs(a[12]),b[13]=Math.abs(a[13]),b[14]=Math.abs(a[14]),b[15]=Math.abs(a[15]),b},j.equals=function(a,b){return a===b||d(a)&&d(b)&&a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]},j.equalsEpsilon=function(a,b,c){return a===b||d(a)&&d(b)&&Math.abs(a[0]-b[0])<=c&&Math.abs(a[1]-b[1])<=c&&Math.abs(a[2]-b[2])<=c&&Math.abs(a[3]-b[3])<=c&&Math.abs(a[4]-b[4])<=c&&Math.abs(a[5]-b[5])<=c&&Math.abs(a[6]-b[6])<=c&&Math.abs(a[7]-b[7])<=c&&Math.abs(a[8]-b[8])<=c&&Math.abs(a[9]-b[9])<=c&&Math.abs(a[10]-b[10])<=c&&Math.abs(a[11]-b[11])<=c&&Math.abs(a[12]-b[12])<=c&&Math.abs(a[13]-b[13])<=c&&Math.abs(a[14]-b[14])<=c&&Math.abs(a[15]-b[15])<=c},j.getTranslation=function(a,b){return b.x=a[12],b.y=a[13],b.z=a[14],b},j.getRotation=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[4],b[4]=a[5],b[5]=a[6],b[6]=a[8],b[7]=a[9],b[8]=a[10],b};var q=new h,r=new h,s=new b,t=new b(0,0,0,1);return j.inverse=function(a,c){if(h.equalsEpsilon(j.getRotation(a,q),r,g.EPSILON7)&&b.equals(j.getRow(a,3,s),t))return c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=0,c[11]=0,c[12]=-a[12],c[13]=-a[13],c[14]=-a[14],c[15]=1,c;var d=a[0],e=a[4],f=a[8],k=a[12],l=a[1],m=a[5],n=a[9],o=a[13],p=a[2],u=a[6],v=a[10],w=a[14],x=a[3],y=a[7],z=a[11],A=a[15],B=v*A,C=w*z,D=u*A,E=w*y,F=u*z,G=v*y,H=p*A,I=w*x,J=p*z,K=v*x,L=p*y,M=u*x,N=B*m+E*n+F*o-(C*m+D*n+G*o),O=C*l+H*n+K*o-(B*l+I*n+J*o),P=D*l+I*m+L*o-(E*l+H*m+M*o),Q=G*l+J*m+M*n-(F*l+K*m+L*n),R=C*e+D*f+G*k-(B*e+E*f+F*k),S=B*d+I*f+J*k-(C*d+H*f+K*k),T=E*d+H*e+M*k-(D*d+I*e+L*k),U=F*d+K*e+L*f-(G*d+J*e+M*f);B=f*o,C=k*n,D=e*o,E=k*m,F=e*n,G=f*m,H=d*o,I=k*l,J=d*n,K=f*l,L=d*m,M=e*l;var V=B*y+E*z+F*A-(C*y+D*z+G*A),W=C*x+H*z+K*A-(B*x+I*z+J*A),X=D*x+I*y+L*A-(E*x+H*y+M*A),Y=G*x+J*y+M*z-(F*x+K*y+L*z),Z=D*v+G*w+C*u-(F*w+B*u+E*v),$=J*w+B*p+I*v-(H*v+K*w+C*p),_=H*u+M*w+E*p-(L*w+D*p+I*u),aa=L*v+F*p+K*u-(J*u+M*v+G*p),ba=d*N+e*O+f*P+k*Q;if(Math.abs(ba)<g.EPSILON20)throw new i("matrix is not invertible because its determinate is zero.");return ba=1/ba,c[0]=N*ba,c[1]=O*ba,c[2]=P*ba,c[3]=Q*ba,c[4]=R*ba,c[5]=S*ba,c[6]=T*ba,c[7]=U*ba,c[8]=V*ba,c[9]=W*ba,c[10]=X*ba,c[11]=Y*ba,c[12]=Z*ba,c[13]=$*ba,c[14]=_*ba,c[15]=aa*ba,c},j.inverseTransformation=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[4],g=a[5],h=a[6],i=a[8],j=a[9],k=a[10],l=a[12],m=a[13],n=a[14],o=-c*l-d*m-e*n,p=-f*l-g*m-h*n,q=-i*l-j*m-k*n;return b[0]=c,b[1]=f,b[2]=i,b[3]=0,b[4]=d,b[5]=g,b[6]=j,b[7]=0,b[8]=e,b[9]=h,b[10]=k,b[11]=0,b[12]=o,b[13]=p,b[14]=q,b[15]=1,b},j.IDENTITY=f(new j(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),j.COLUMN0ROW0=0,j.COLUMN0ROW1=1,j.COLUMN0ROW2=2,j.COLUMN0ROW3=3,j.COLUMN1ROW0=4,j.COLUMN1ROW1=5,j.COLUMN1ROW2=6,j.COLUMN1ROW3=7,j.COLUMN2ROW0=8,j.COLUMN2ROW1=9,j.COLUMN2ROW2=10,j.COLUMN2ROW3=11,j.COLUMN3ROW0=12,j.COLUMN3ROW1=13,j.COLUMN3ROW2=14,j.COLUMN3ROW3=15,j.prototype.clone=function(a){return j.clone(this,a)},j.prototype.equals=function(a){return j.equals(this,a)},j.prototype.equalsEpsilon=function(a,b){return j.equalsEpsilon(this,a,b)},j.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n"+"("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n"+"("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n"+"("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"},j}),c("Core/BoundingSphere",["./Cartesian3","./Cartographic","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./GeographicProjection","./Intersect","./Interval","./Matrix4","./Rectangle"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=function(b,d){this.center=a.clone(c(b,a.ZERO)),this.radius=c(d,0)},m=new a,n=new a,o=new a,p=new a,q=new a,r=new a,s=new a,t=new a,u=new a,v=new a,w=new a,x=new a;l.fromPoints=function(b,c){if(d(c)||(c=new l),!d(b)||0===b.length)return c.center=a.clone(a.ZERO,c.center),c.radius=0,c;for(var e=a.clone(b[0],s),f=a.clone(e,m),g=a.clone(e,n),h=a.clone(e,o),i=a.clone(e,p),j=a.clone(e,q),k=a.clone(e,r),y=b.length,z=1;y>z;z++){a.clone(b[z],e);var A=e.x,B=e.y,C=e.z;A<f.x&&a.clone(e,f),A>i.x&&a.clone(e,i),B<g.y&&a.clone(e,g),B>j.y&&a.clone(e,j),C<h.z&&a.clone(e,h),C>k.z&&a.clone(e,k)}var D=a.magnitudeSquared(a.subtract(i,f,t)),E=a.magnitudeSquared(a.subtract(j,g,t)),F=a.magnitudeSquared(a.subtract(k,h,t)),G=f,H=i,I=D;E>I&&(I=E,G=g,H=j),F>I&&(I=F,G=h,H=k);var J=u;J.x=.5*(G.x+H.x),J.y=.5*(G.y+H.y),J.z=.5*(G.z+H.z);var K=a.magnitudeSquared(a.subtract(H,J,t)),L=Math.sqrt(K),M=v;M.x=f.x,M.y=g.y,M.z=h.z;var N=w;N.x=i.x,N.y=j.y,N.z=k.z;var O=a.multiplyByScalar(a.add(M,N,t),.5,x),P=0;for(z=0;y>z;z++){a.clone(b[z],e);var Q=a.magnitude(a.subtract(e,O,t));Q>P&&(P=Q);var R=a.magnitudeSquared(a.subtract(e,J,t));if(R>K){var S=Math.sqrt(R);L=.5*(L+S),K=L*L;var T=S-L;J.x=(L*J.x+T*e.x)/S,J.y=(L*J.y+T*e.y)/S,J.z=(L*J.z+T*e.z)/S}}return P>L?(a.clone(J,c.center),c.radius=L):(a.clone(O,c.center),c.radius=P),c};var y=new g,z=new a,A=new a,B=new b,C=new b;l.fromRectangle2D=function(a,b,c){return l.fromRectangleWithHeights2D(a,b,0,0,c)},l.fromRectangleWithHeights2D=function(b,e,f,g,h){if(d(h)||(h=new l),!d(b))return h.center=a.clone(a.ZERO,h.center),h.radius=0,h;e=c(e,y),k.southwest(b,B),B.height=f,k.northeast(b,C),C.height=g;var i=e.project(B,z),j=e.project(C,A),m=j.x-i.x,n=j.y-i.y,o=j.z-i.z;h.radius=.5*Math.sqrt(m*m+n*n+o*o);var p=h.center;return p.x=i.x+.5*m,p.y=i.y+.5*n,p.z=i.z+.5*o,h};var D=[];l.fromRectangle3D=function(a,b,e,g){b=c(b,f.WGS84),e=c(e,0);var h;return d(a)&&(h=k.subsample(a,b,e,D)),l.fromPoints(h,g)},l.fromVertices=function(b,e,f,g){if(d(g)||(g=new l),!d(b)||0===b.length)return g.center=a.clone(a.ZERO,g.center),g.radius=0,g;e=c(e,a.ZERO),f=c(f,3);var h=s;h.x=b[0]+e.x,h.y=b[1]+e.y,h.z=b[2]+e.z;for(var i=a.clone(h,m),j=a.clone(h,n),k=a.clone(h,o),y=a.clone(h,p),z=a.clone(h,q),A=a.clone(h,r),B=b.length,C=0;B>C;C+=f){var D=b[C]+e.x,E=b[C+1]+e.y,F=b[C+2]+e.z;h.x=D,h.y=E,h.z=F,D<i.x&&a.clone(h,i),D>y.x&&a.clone(h,y),E<j.y&&a.clone(h,j),E>z.y&&a.clone(h,z),F<k.z&&a.clone(h,k),F>A.z&&a.clone(h,A)}var G=a.magnitudeSquared(a.subtract(y,i,t)),H=a.magnitudeSquared(a.subtract(z,j,t)),I=a.magnitudeSquared(a.subtract(A,k,t)),J=i,K=y,L=G;H>L&&(L=H,J=j,K=z),I>L&&(L=I,J=k,K=A);var M=u;M.x=.5*(J.x+K.x),M.y=.5*(J.y+K.y),M.z=.5*(J.z+K.z);var N=a.magnitudeSquared(a.subtract(K,M,t)),O=Math.sqrt(N),P=v;P.x=i.x,P.y=j.y,P.z=k.z;var Q=w;Q.x=y.x,Q.y=z.y,Q.z=A.z;var R=a.multiplyByScalar(a.add(P,Q,t),.5,x),S=0;for(C=0;B>C;C+=f){h.x=b[C]+e.x,h.y=b[C+1]+e.y,h.z=b[C+2]+e.z;var T=a.magnitude(a.subtract(h,R,t));T>S&&(S=T);var U=a.magnitudeSquared(a.subtract(h,M,t));if(U>N){var V=Math.sqrt(U);O=.5*(O+V),N=O*O;var W=V-O;M.x=(O*M.x+W*h.x)/V,M.y=(O*M.y+W*h.y)/V,M.z=(O*M.z+W*h.z)/V}}return S>O?(a.clone(M,g.center),g.radius=O):(a.clone(R,g.center),g.radius=S),g},l.fromCornerPoints=function(b,c,e){d(e)||(e=new l);var f=e.center;return a.add(b,c,f),a.multiplyByScalar(f,.5,f),e.radius=a.distance(f,c),e},l.fromEllipsoid=function(b,c){return d(c)||(c=new l),a.clone(a.ZERO,c.center),c.radius=b.maximumRadius,c},l.clone=function(b,c){return d(b)?d(c)?(c.center=a.clone(b.center,c.center),c.radius=b.radius,c):new l(b.center,b.radius):void 0},l.packedLength=4,l.pack=function(a,b,d){d=c(d,0);var e=a.center;b[d++]=e.x,b[d++]=e.y,b[d++]=e.z,b[d]=a.radius},l.unpack=function(a,b,e){b=c(b,0),d(e)||(e=new l);var f=e.center;return f.x=a[b++],f.y=a[b++],f.z=a[b++],e.radius=a[b],e};var E=new a,F=new a;l.union=function(b,c,e){d(e)||(e=new l);var f=b.center,g=c.center;a.add(f,g,F);var h=a.multiplyByScalar(F,.5,F),i=a.magnitude(a.subtract(f,h,E))+b.radius,j=a.magnitude(a.subtract(g,h,E))+c.radius;return e.radius=Math.max(i,j),a.clone(h,e.center),e};var G=new a;l.expand=function(b,c,d){d=l.clone(b,d);var e=a.magnitude(a.subtract(c,d.center,G));return e>d.radius&&(d.radius=e),d},l.intersect=function(b,c){var d=b.center,e=b.radius,f=a.dot(c,d)+c.w;return-e>f?h.OUTSIDE:e>f?h.INTERSECTING:h.INSIDE},l.transform=function(a,b,c){return d(c)||(c=new l),c.center=j.multiplyByPoint(b,a.center,c.center),c.radius=j.getMaximumScale(b)*a.radius,c};var H=new a;l.distanceSquaredTo=function(b,c){var d=a.subtract(b.center,c,H);return a.magnitudeSquared(d)-b.radius*b.radius},l.transformWithoutScale=function(a,b,c){return d(c)||(c=new l),c.center=j.multiplyByPoint(b,a.center,c.center),c.radius=a.radius,c};var I=new a;l.computePlaneDistances=function(b,c,e,f){d(f)||(f=new i);var g=a.subtract(b.center,c,I),h=a.multiplyByScalar(e,a.dot(e,g),I),j=a.magnitude(h);return f.start=j-b.radius,f.stop=j+b.radius,f};for(var J=new a,K=new a,L=new a,M=new a,N=new a,O=new b,P=new Array(8),Q=0;8>Q;++Q)P[Q]=new a;var R=new g;return l.projectTo2D=function(b,d,e){d=c(d,R);var f=d.ellipsoid,g=b.center,h=b.radius,i=f.geodeticSurfaceNormal(g,J),j=a.cross(a.UNIT_Z,i,K);a.normalize(j,j);var k=a.cross(i,j,L);a.normalize(k,k),a.multiplyByScalar(i,h,i),a.multiplyByScalar(k,h,k),a.multiplyByScalar(j,h,j);var m=a.negate(k,N),n=a.negate(j,M),o=P,p=o[0];a.add(i,k,p),a.add(p,j,p),p=o[1],a.add(i,k,p),a.add(p,n,p),p=o[2],a.add(i,m,p),a.add(p,n,p),p=o[3],a.add(i,m,p),a.add(p,j,p),a.negate(i,i),p=o[4],a.add(i,k,p),a.add(p,j,p),p=o[5],a.add(i,k,p),a.add(p,n,p),p=o[6],a.add(i,m,p),a.add(p,n,p),p=o[7],a.add(i,m,p),a.add(p,j,p);for(var q=o.length,r=0;q>r;++r){var s=o[r];a.add(g,s,s);var t=f.cartesianToCartographic(s,O);d.project(t,s)}e=l.fromPoints(o,e),g=e.center;var u=g.x,v=g.y,w=g.z;return g.x=w,g.y=u,g.z=v,e},l.equals=function(b,c){return b===c||d(b)&&d(c)&&a.equals(b.center,c.center)&&b.radius===c.radius},l.prototype.intersect=function(a){return l.intersect(this,a)},l.prototype.equals=function(a){return l.equals(this,a)},l.prototype.clone=function(a){return l.clone(this,a)},l}),c("Core/Fullscreen",["./defined","./defineProperties"],function(a,b){"use strict";var c,d={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},e={};return b(e,{element:{get:function(){return e.supportsFullscreen()?document[d.fullscreenElement]:void 0}},changeEventName:{get:function(){return e.supportsFullscreen()?d.fullscreenchange:void 0}},errorEventName:{get:function(){return e.supportsFullscreen()?d.fullscreenerror:void 0}},enabled:{get:function(){return e.supportsFullscreen()?document[d.fullscreenEnabled]:void 0}},fullscreen:{get:function(){return e.supportsFullscreen()?null!==e.element:void 0}}}),e.supportsFullscreen=function(){if(a(c))return c;c=!1;var b=document.body;if("function"==typeof b.requestFullscreen)return d.requestFullscreen="requestFullscreen",d.exitFullscreen="exitFullscreen",d.fullscreenEnabled="fullscreenEnabled",d.fullscreenElement="fullscreenElement",d.fullscreenchange="fullscreenchange",d.fullscreenerror="fullscreenerror",c=!0;for(var e,f=["webkit","moz","o","ms","khtml"],g=0,h=f.length;h>g;++g){var i=f[g];e=i+"RequestFullscreen","function"==typeof b[e]?(d.requestFullscreen=e,c=!0):(e=i+"RequestFullScreen","function"==typeof b[e]&&(d.requestFullscreen=e,c=!0)),e=i+"ExitFullscreen","function"==typeof document[e]?d.exitFullscreen=e:(e=i+"CancelFullScreen","function"==typeof document[e]&&(d.exitFullscreen=e)),e=i+"FullscreenEnabled",a(document[e])?d.fullscreenEnabled=e:(e=i+"FullScreenEnabled",a(document[e])&&(d.fullscreenEnabled=e)),e=i+"FullscreenElement",a(document[e])?d.fullscreenElement=e:(e=i+"FullScreenElement",a(document[e])&&(d.fullscreenElement=e)),e=i+"fullscreenchange",a(document["on"+e])&&("ms"===i&&(e="MSFullscreenChange"),d.fullscreenchange=e),e=i+"fullscreenerror",a(document["on"+e])&&("ms"===i&&(e="MSFullscreenError"),d.fullscreenerror=e)}return c},e.requestFullscreen=function(a){e.supportsFullscreen()&&a[d.requestFullscreen]()},e.exitFullscreen=function(){e.supportsFullscreen()&&document[d.exitFullscreen]()},e}),c("Core/FeatureDetection",["./defaultValue","./defined","./Fullscreen"],function(a,b,c){"use strict";function d(a){for(var b=a.split("."),c=0,d=b.length;d>c;++c)b[c]=parseInt(b[c],10);return b}function e(){if(!b(o)){o=!1;var a=/ Chrome\/([\.0-9]+)/.exec(navigator.userAgent);null!==a&&(o=!0,p=d(a[1]))}return o}function f(){return e()&&p}function g(){if(!b(q)&&(q=!1,!e()&&/ Safari\/[\.0-9]+/.test(navigator.userAgent))){var a=/ Version\/([\.0-9]+)/.exec(navigator.userAgent);null!==a&&(q=!0,r=d(a[1]))}return q}function h(){return g()&&r}function i(){if(!b(s)){s=!1;var a=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(navigator.userAgent);null!==a&&(s=!0,t=d(a[1]),t.isNightly=!!a[2])}return s}function j(){return i()&&t}function k(){if(!b(u)){u=!1;var a;"Microsoft Internet Explorer"===navigator.appName?(a=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent),null!==a&&(u=!0,v=d(a[1]))):"Netscape"===navigator.appName&&(a=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent),null!==a&&(u=!0,v=d(a[1])))}return u}function l(){return k()&&v}function m(){if(!b(w)){w=!1;var a=/Firefox\/([\.0-9]+)/.exec(navigator.userAgent);null!==a&&(w=!0,x=d(a[1]))}return w}function n(){return m()&&x}var o,p,q,r,s,t,u,v,w,x,y={isChrome:e,chromeVersion:f,isSafari:g,safariVersion:h,isWebkit:i,webkitVersion:j,isInternetExplorer:k,internetExplorerVersion:l,isFirefox:m,firefoxVersion:n,hardwareConcurrency:a(navigator.hardwareConcurrency,3)};return y.supportsFullscreen=function(){return c.supportsFullscreen()},y.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},y.supportsWebWorkers=function(){return"undefined"!=typeof Worker},y}),c("Core/ComponentDatatype",["./defaultValue","./defined","./DeveloperError","./FeatureDetection","./freezeObject"],function(a,b,c,d,e){"use strict";if(!d.supportsTypedArrays())return{};var f={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,FLOAT:5126,DOUBLE:5130};return f.getSizeInBytes=function(a){switch(a){case f.BYTE:return Int8Array.BYTES_PER_ELEMENT;case f.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case f.SHORT:return Int16Array.BYTES_PER_ELEMENT;case f.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case f.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case f.DOUBLE:return Float64Array.BYTES_PER_ELEMENT;default:throw new c("componentDatatype is not a valid value.")}},f.fromTypedArray=function(a){return a instanceof Int8Array?f.BYTE:a instanceof Uint8Array?f.UNSIGNED_BYTE:a instanceof Int16Array?f.SHORT:a instanceof Uint16Array?f.UNSIGNED_SHORT:a instanceof Float32Array?f.FLOAT:a instanceof Float64Array?f.DOUBLE:void 0},f.validate=function(a){return b(a)&&(a===f.BYTE||a===f.UNSIGNED_BYTE||a===f.SHORT||a===f.UNSIGNED_SHORT||a===f.FLOAT||a===f.DOUBLE)},f.createTypedArray=function(a,b){switch(a){case f.BYTE:return new Int8Array(b);case f.UNSIGNED_BYTE:return new Uint8Array(b);case f.SHORT:return new Int16Array(b);case f.UNSIGNED_SHORT:return new Uint16Array(b);case f.FLOAT:return new Float32Array(b);case f.DOUBLE:return new Float64Array(b);default:throw new c("componentDatatype is not a valid value.")}},f.createArrayBufferView=function(b,d,e,g){switch(e=a(e,0),g=a(g,(d.byteLength-e)/f.getSizeInBytes(b)),b){case f.BYTE:return new Int8Array(d,e,g);case f.UNSIGNED_BYTE:return new Uint8Array(d,e,g);case f.SHORT:return new Int16Array(d,e,g);case f.UNSIGNED_SHORT:return new Uint16Array(d,e,g);case f.FLOAT:return new Float32Array(d,e,g);case f.DOUBLE:return new Float64Array(d,e,g);default:throw new c("componentDatatype is not a valid value.")}},e(f)}),c("Core/GeometryType",["./freezeObject"],function(a){"use strict";var b={NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3};return a(b)}),c("Core/PrimitiveType",["./freezeObject"],function(a){"use strict";var b={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,validate:function(a){return a===b.POINTS||a===b.LINES||a===b.LINE_LOOP||a===b.LINE_STRIP||a===b.TRIANGLES||a===b.TRIANGLE_STRIP||a===b.TRIANGLE_FAN}};return a(b)}),c("Core/Geometry",["./defaultValue","./defined","./DeveloperError","./GeometryType","./PrimitiveType"],function(a,b,c,d,e){"use strict";var f=function(b){b=a(b,a.EMPTY_OBJECT),this.attributes=b.attributes,this.indices=b.indices,this.primitiveType=a(b.primitiveType,e.TRIANGLES),this.boundingSphere=b.boundingSphere,this.geometryType=a(b.geometryType,d.NONE),this.boundingSphereCV=void 0};return f.computeNumberOfVertices=function(a){var d=-1;for(var e in a.attributes)if(a.attributes.hasOwnProperty(e)&&b(a.attributes[e])&&b(a.attributes[e].values)){var f=a.attributes[e],g=f.values.length/f.componentsPerAttribute;if(d!==g&&-1!==d)throw new c("All attribute lists must have the same number of attributes.");d=g}return d},f}),c("Core/GeometryAttribute",["./defaultValue","./defined","./DeveloperError"],function(a){"use strict";var b=function(b){b=a(b,a.EMPTY_OBJECT),this.componentDatatype=b.componentDatatype,this.componentsPerAttribute=b.componentsPerAttribute,this.normalize=a(b.normalize,!1),this.values=b.values};return b}),c("Core/GeometryAttributes",["./defaultValue"],function(a){"use strict";var b=function(b){b=a(b,a.EMPTY_OBJECT),this.position=b.position,this.normal=b.normal,this.st=b.st,this.binormal=b.binormal,this.tangent=b.tangent,this.color=b.color};return b}),c("Core/VertexFormat",["./defaultValue","./freezeObject"],function(a,b){"use strict";var c=function(b){b=a(b,a.EMPTY_OBJECT),this.position=a(b.position,!1),this.normal=a(b.normal,!1),this.st=a(b.st,!1),this.binormal=a(b.binormal,!1),this.tangent=a(b.tangent,!1),this.color=a(b.color,!1)};return c.POSITION_ONLY=b(new c({position:!0})),c.POSITION_AND_NORMAL=b(new c({position:!0,normal:!0})),c.POSITION_NORMAL_AND_ST=b(new c({position:!0,normal:!0,st:!0})),c.POSITION_AND_ST=b(new c({position:!0,st:!0})),c.POSITION_AND_COLOR=b(new c({position:!0,color:!0})),c.ALL=b(new c({position:!0,normal:!0,st:!0,binormal:!0,tangent:!0})),c.DEFAULT=c.POSITION_NORMAL_AND_ST,c}),
c("Core/BoxGeometry",["./BoundingSphere","./Cartesian3","./ComponentDatatype","./defaultValue","./defined","./DeveloperError","./Geometry","./GeometryAttribute","./GeometryAttributes","./PrimitiveType","./VertexFormat"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=new b,m=function(a){a=d(a,d.EMPTY_OBJECT);var c=a.minimumCorner,e=a.maximumCorner,f=d(a.vertexFormat,k.DEFAULT);this._minimumCorner=b.clone(c),this._maximumCorner=b.clone(e),this._vertexFormat=f,this._workerName="createBoxGeometry"};return m.fromDimensions=function(a){a=d(a,d.EMPTY_OBJECT);var c=a.dimensions,e=b.multiplyByScalar(c,.5,new b),f=b.negate(e,new b),g=e,h={minimumCorner:f,maximumCorner:g,vertexFormat:a.vertexFormat};return new m(h)},m.createGeometry=function(d){var e,f,k=d._minimumCorner,m=d._maximumCorner,n=d._vertexFormat,o=new i;if(n.position&&(n.st||n.normal||n.binormal||n.tangent)){if(n.position&&(f=new Float64Array(72),f[0]=k.x,f[1]=k.y,f[2]=m.z,f[3]=m.x,f[4]=k.y,f[5]=m.z,f[6]=m.x,f[7]=m.y,f[8]=m.z,f[9]=k.x,f[10]=m.y,f[11]=m.z,f[12]=k.x,f[13]=k.y,f[14]=k.z,f[15]=m.x,f[16]=k.y,f[17]=k.z,f[18]=m.x,f[19]=m.y,f[20]=k.z,f[21]=k.x,f[22]=m.y,f[23]=k.z,f[24]=m.x,f[25]=k.y,f[26]=k.z,f[27]=m.x,f[28]=m.y,f[29]=k.z,f[30]=m.x,f[31]=m.y,f[32]=m.z,f[33]=m.x,f[34]=k.y,f[35]=m.z,f[36]=k.x,f[37]=k.y,f[38]=k.z,f[39]=k.x,f[40]=m.y,f[41]=k.z,f[42]=k.x,f[43]=m.y,f[44]=m.z,f[45]=k.x,f[46]=k.y,f[47]=m.z,f[48]=k.x,f[49]=m.y,f[50]=k.z,f[51]=m.x,f[52]=m.y,f[53]=k.z,f[54]=m.x,f[55]=m.y,f[56]=m.z,f[57]=k.x,f[58]=m.y,f[59]=m.z,f[60]=k.x,f[61]=k.y,f[62]=k.z,f[63]=m.x,f[64]=k.y,f[65]=k.z,f[66]=m.x,f[67]=k.y,f[68]=m.z,f[69]=k.x,f[70]=k.y,f[71]=m.z,o.position=new h({componentDatatype:c.DOUBLE,componentsPerAttribute:3,values:f})),n.normal){var p=new Float32Array(72);p[0]=0,p[1]=0,p[2]=1,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=1,p[9]=0,p[10]=0,p[11]=1,p[12]=0,p[13]=0,p[14]=-1,p[15]=0,p[16]=0,p[17]=-1,p[18]=0,p[19]=0,p[20]=-1,p[21]=0,p[22]=0,p[23]=-1,p[24]=1,p[25]=0,p[26]=0,p[27]=1,p[28]=0,p[29]=0,p[30]=1,p[31]=0,p[32]=0,p[33]=1,p[34]=0,p[35]=0,p[36]=-1,p[37]=0,p[38]=0,p[39]=-1,p[40]=0,p[41]=0,p[42]=-1,p[43]=0,p[44]=0,p[45]=-1,p[46]=0,p[47]=0,p[48]=0,p[49]=1,p[50]=0,p[51]=0,p[52]=1,p[53]=0,p[54]=0,p[55]=1,p[56]=0,p[57]=0,p[58]=1,p[59]=0,p[60]=0,p[61]=-1,p[62]=0,p[63]=0,p[64]=-1,p[65]=0,p[66]=0,p[67]=-1,p[68]=0,p[69]=0,p[70]=-1,p[71]=0,o.normal=new h({componentDatatype:c.FLOAT,componentsPerAttribute:3,values:p})}if(n.st){var q=new Float32Array(48);q[0]=0,q[1]=0,q[2]=1,q[3]=0,q[4]=1,q[5]=1,q[6]=0,q[7]=1,q[8]=1,q[9]=0,q[10]=0,q[11]=0,q[12]=0,q[13]=1,q[14]=1,q[15]=1,q[16]=0,q[17]=0,q[18]=1,q[19]=0,q[20]=1,q[21]=1,q[22]=0,q[23]=1,q[24]=1,q[25]=0,q[26]=0,q[27]=0,q[28]=0,q[29]=1,q[30]=1,q[31]=1,q[32]=1,q[33]=0,q[34]=0,q[35]=0,q[36]=0,q[37]=1,q[38]=1,q[39]=1,q[40]=0,q[41]=0,q[42]=1,q[43]=0,q[44]=1,q[45]=1,q[46]=0,q[47]=1,o.st=new h({componentDatatype:c.FLOAT,componentsPerAttribute:2,values:q})}if(n.tangent){var r=new Float32Array(72);r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r[6]=1,r[7]=0,r[8]=0,r[9]=1,r[10]=0,r[11]=0,r[12]=-1,r[13]=0,r[14]=0,r[15]=-1,r[16]=0,r[17]=0,r[18]=-1,r[19]=0,r[20]=0,r[21]=-1,r[22]=0,r[23]=0,r[24]=0,r[25]=1,r[26]=0,r[27]=0,r[28]=1,r[29]=0,r[30]=0,r[31]=1,r[32]=0,r[33]=0,r[34]=1,r[35]=0,r[36]=0,r[37]=-1,r[38]=0,r[39]=0,r[40]=-1,r[41]=0,r[42]=0,r[43]=-1,r[44]=0,r[45]=0,r[46]=-1,r[47]=0,r[48]=-1,r[49]=0,r[50]=0,r[51]=-1,r[52]=0,r[53]=0,r[54]=-1,r[55]=0,r[56]=0,r[57]=-1,r[58]=0,r[59]=0,r[60]=1,r[61]=0,r[62]=0,r[63]=1,r[64]=0,r[65]=0,r[66]=1,r[67]=0,r[68]=0,r[69]=1,r[70]=0,r[71]=0,o.tangent=new h({componentDatatype:c.FLOAT,componentsPerAttribute:3,values:r})}if(n.binormal){var s=new Float32Array(72);s[0]=0,s[1]=1,s[2]=0,s[3]=0,s[4]=1,s[5]=0,s[6]=0,s[7]=1,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=1,s[14]=0,s[15]=0,s[16]=1,s[17]=0,s[18]=0,s[19]=1,s[20]=0,s[21]=0,s[22]=1,s[23]=0,s[24]=0,s[25]=0,s[26]=1,s[27]=0,s[28]=0,s[29]=1,s[30]=0,s[31]=0,s[32]=1,s[33]=0,s[34]=0,s[35]=1,s[36]=0,s[37]=0,s[38]=1,s[39]=0,s[40]=0,s[41]=1,s[42]=0,s[43]=0,s[44]=1,s[45]=0,s[46]=0,s[47]=1,s[48]=0,s[49]=0,s[50]=1,s[51]=0,s[52]=0,s[53]=1,s[54]=0,s[55]=0,s[56]=1,s[57]=0,s[58]=0,s[59]=1,s[60]=0,s[61]=0,s[62]=1,s[63]=0,s[64]=0,s[65]=1,s[66]=0,s[67]=0,s[68]=1,s[69]=0,s[70]=0,s[71]=1,o.binormal=new h({componentDatatype:c.FLOAT,componentsPerAttribute:3,values:s})}e=new Uint16Array(36),e[0]=0,e[1]=1,e[2]=2,e[3]=0,e[4]=2,e[5]=3,e[6]=6,e[7]=5,e[8]=4,e[9]=7,e[10]=6,e[11]=4,e[12]=8,e[13]=9,e[14]=10,e[15]=8,e[16]=10,e[17]=11,e[18]=14,e[19]=13,e[20]=12,e[21]=15,e[22]=14,e[23]=12,e[24]=18,e[25]=17,e[26]=16,e[27]=19,e[28]=18,e[29]=16,e[30]=20,e[31]=21,e[32]=22,e[33]=20,e[34]=22,e[35]=23}else f=new Float64Array(24),f[0]=k.x,f[1]=k.y,f[2]=k.z,f[3]=m.x,f[4]=k.y,f[5]=k.z,f[6]=m.x,f[7]=m.y,f[8]=k.z,f[9]=k.x,f[10]=m.y,f[11]=k.z,f[12]=k.x,f[13]=k.y,f[14]=m.z,f[15]=m.x,f[16]=k.y,f[17]=m.z,f[18]=m.x,f[19]=m.y,f[20]=m.z,f[21]=k.x,f[22]=m.y,f[23]=m.z,o.position=new h({componentDatatype:c.DOUBLE,componentsPerAttribute:3,values:f}),e=new Uint16Array(36),e[0]=4,e[1]=5,e[2]=6,e[3]=4,e[4]=6,e[5]=7,e[6]=1,e[7]=0,e[8]=3,e[9]=1,e[10]=3,e[11]=2,e[12]=1,e[13]=6,e[14]=5,e[15]=1,e[16]=2,e[17]=6,e[18]=2,e[19]=3,e[20]=7,e[21]=2,e[22]=7,e[23]=6,e[24]=3,e[25]=0,e[26]=4,e[27]=3,e[28]=4,e[29]=7,e[30]=0,e[31]=1,e[32]=5,e[33]=0,e[34]=5,e[35]=4;var t=b.subtract(m,k,l),u=.5*b.magnitude(t);return new g({attributes:o,indices:e,primitiveType:j.TRIANGLES,boundingSphere:new a(b.ZERO,u)})},m}),c("Core/BoxOutlineGeometry",["./BoundingSphere","./Cartesian3","./ComponentDatatype","./defaultValue","./defined","./DeveloperError","./Geometry","./GeometryAttribute","./GeometryAttributes","./PrimitiveType"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=new b,l=function(a){a=d(a,d.EMPTY_OBJECT);var c=a.minimumCorner,e=a.maximumCorner;this._min=b.clone(c),this._max=b.clone(e),this._workerName="createBoxOutlineGeometry"};return l.fromDimensions=function(a){a=d(a,d.EMPTY_OBJECT);var c=a.dimensions,e=b.multiplyByScalar(c,.5,new b),f=b.negate(e,new b),g=e,h={minimumCorner:f,maximumCorner:g};return new l(h)},l.createGeometry=function(d){var e=d._min,f=d._max,l=new i,m=new Uint16Array(24),n=new Float64Array(24);n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=f.x,n[4]=e.y,n[5]=e.z,n[6]=f.x,n[7]=f.y,n[8]=e.z,n[9]=e.x,n[10]=f.y,n[11]=e.z,n[12]=e.x,n[13]=e.y,n[14]=f.z,n[15]=f.x,n[16]=e.y,n[17]=f.z,n[18]=f.x,n[19]=f.y,n[20]=f.z,n[21]=e.x,n[22]=f.y,n[23]=f.z,l.position=new h({componentDatatype:c.DOUBLE,componentsPerAttribute:3,values:n}),m[0]=4,m[1]=5,m[2]=5,m[3]=6,m[4]=6,m[5]=7,m[6]=7,m[7]=4,m[8]=0,m[9]=1,m[10]=1,m[11]=2,m[12]=2,m[13]=3,m[14]=3,m[15]=0,m[16]=0,m[17]=4,m[18]=1,m[19]=5,m[20]=2,m[21]=6,m[22]=3,m[23]=7;var o=b.subtract(f,e,k),p=.5*b.magnitude(o);return new g({attributes:l,indices:m,primitiveType:j.LINES,boundingSphere:new a(b.ZERO,p)})},l}),c("Core/Spline",["./defaultValue","./defined","./DeveloperError"],function(a,b,c){"use strict";var d=function(){this.times=void 0,this.points=void 0,c.throwInstantiationError()};return d.prototype.evaluate=c.throwInstantiationError,d.prototype.findTimeInterval=function(b,c){var d=this.times,e=d.length;if(c=a(c,0),b>=d[c]){if(e>c+1&&b<d[c+1])return c;if(e>c+2&&b<d[c+2])return c+1}else if(c-1>=0&&b>=d[c-1])return c-1;var f;if(b>d[c])for(f=c;e-1>f&&!(b>=d[f]&&b<d[f+1]);++f);else for(f=c-1;f>=0&&!(b>=d[f]&&b<d[f+1]);--f);return f===e-1&&(f=e-2),f},d}),c("Core/LinearSpline",["./Cartesian3","./defaultValue","./defined","./defineProperties","./DeveloperError","./Spline"],function(a,b,c,d,e,f){"use strict";var g=function(a){a=b(a,b.EMPTY_OBJECT);var c=a.points,d=a.times;this._times=d,this._points=c,this._lastTimeIndex=0};return d(g.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}}),g.prototype.findTimeInterval=f.prototype.findTimeInterval,g.prototype.evaluate=function(b,d){var e=this.points,f=this.times,g=this._lastTimeIndex=this.findTimeInterval(b,this._lastTimeIndex),h=(b-f[g])/(f[g+1]-f[g]);return c(d)||(d=new a),a.lerp(e[g],e[g+1],h,d)},g}),c("Core/TridiagonalSystemSolver",["./Cartesian3","./defined","./DeveloperError"],function(a){"use strict";var b={};return b.solve=function(b,c,d,e){var f,g=new Array(d.length),h=new Array(e.length),i=new Array(e.length);for(f=0;f<h.length;f++)h[f]=new a,i[f]=new a;g[0]=d[0]/c[0],h[0]=a.multiplyByScalar(e[0],1/c[0],h[0]);var j;for(f=1;f<g.length;++f)j=1/(c[f]-g[f-1]*b[f-1]),g[f]=d[f]*j,h[f]=a.subtract(e[f],a.multiplyByScalar(h[f-1],b[f-1],h[f]),h[f]),h[f]=a.multiplyByScalar(h[f],j,h[f]);for(j=1/(c[f]-g[f-1]*b[f-1]),h[f]=a.subtract(e[f],a.multiplyByScalar(h[f-1],b[f-1],h[f]),h[f]),h[f]=a.multiplyByScalar(h[f],j,h[f]),i[i.length-1]=h[h.length-1],f=i.length-2;f>=0;--f)i[f]=a.subtract(h[f],a.multiplyByScalar(i[f+1],g[f],i[f]),i[f]);return i},b}),c("Core/HermiteSpline",["./Cartesian3","./Cartesian4","./defaultValue","./defined","./defineProperties","./DeveloperError","./LinearSpline","./Matrix4","./Spline","./TridiagonalSystemSolver"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(b,c,e){var f=m,g=o,h=n,i=p;f.length=g.length=b.length-1,h.length=i.length=b.length;var k;f[0]=h[0]=1,g[0]=0;var l=i[0];for(d(l)||(l=i[0]=new a),a.clone(c,l),k=1;k<f.length-1;++k)f[k]=g[k]=1,h[k]=4,l=i[k],d(l)||(l=i[k]=new a),a.subtract(b[k+1],b[k-1],l),a.multiplyByScalar(l,3,l);return f[k]=0,g[k]=1,h[k]=4,l=i[k],d(l)||(l=i[k]=new a),a.subtract(b[k+1],b[k-1],l),a.multiplyByScalar(l,3,l),h[k+1]=1,l=i[k+1],d(l)||(l=i[k+1]=new a),a.clone(e,l),j.solve(f,h,g,i)}function l(b){var c=m,e=o,f=n,g=p;c.length=e.length=b.length-1,f.length=g.length=b.length;var h;c[0]=e[0]=1,f[0]=2;var i=g[0];for(d(i)||(i=g[0]=new a),a.subtract(b[1],b[0],i),a.multiplyByScalar(i,3,i),h=1;h<c.length;++h)c[h]=e[h]=1,f[h]=4,i=g[h],d(i)||(i=g[h]=new a),a.subtract(b[h+1],b[h-1],i),a.multiplyByScalar(i,3,i);return f[h]=2,i=g[h],d(i)||(i=g[h]=new a),a.subtract(b[h],b[h-1],i),a.multiplyByScalar(i,3,i),j.solve(c,f,e,g)}var m=[],n=[],o=[],p=[],q=function(a){a=c(a,c.EMPTY_OBJECT);var b=a.points,d=a.times,e=a.inTangents,f=a.outTangents;this._times=d,this._points=b,this._inTangents=e,this._outTangents=f,this._lastTimeIndex=0};e(q.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}},inTangents:{get:function(){return this._inTangents}},outTangents:{get:function(){return this._outTangents}}}),q.createC1=function(a){a=c(a,c.EMPTY_OBJECT);var b=a.times,d=a.points,e=a.tangents,f=e.slice(0,e.length-1),g=e.slice(1,e.length);return new q({times:b,points:d,inTangents:g,outTangents:f})},q.createNaturalCubic=function(a){a=c(a,c.EMPTY_OBJECT);var b=a.times,d=a.points;if(d.length<3)return new g({points:d,times:b});var e=l(d),f=e.slice(0,e.length-1),h=e.slice(1,e.length);return new q({times:b,points:d,inTangents:h,outTangents:f})},q.createClampedCubic=function(a){a=c(a,c.EMPTY_OBJECT);var b=a.times,d=a.points,e=a.firstTangent,f=a.lastTangent;if(d.length<3)return new g({points:d,times:b});var h=k(d,e,f),i=h.slice(0,h.length-1),j=h.slice(1,h.length);return new q({times:b,points:d,inTangents:j,outTangents:i})},q.hermiteCoefficientMatrix=new h(2,-3,0,1,-2,3,0,0,1,-2,1,0,1,-1,0,0),q.prototype.findTimeInterval=i.prototype.findTimeInterval;var r=new b,s=new a;return q.prototype.evaluate=function(b,c){d(c)||(c=new a);var e=this.points,f=this.times,g=this.inTangents,i=this.outTangents,j=this._lastTimeIndex=this.findTimeInterval(b,this._lastTimeIndex),k=(b-f[j])/(f[j+1]-f[j]),l=r;l.z=k,l.y=k*k,l.x=l.y*k,l.w=1;var m=h.multiplyByVector(q.hermiteCoefficientMatrix,l,l);return c=a.multiplyByScalar(e[j],m.x,c),a.multiplyByScalar(e[j+1],m.y,s),a.add(c,s,c),a.multiplyByScalar(i[j],m.z,s),a.add(c,s,c),a.multiplyByScalar(g[j],m.w,s),a.add(c,s,c)},q}),c("Core/CatmullRomSpline",["./Cartesian3","./Cartesian4","./defaultValue","./defined","./defineProperties","./DeveloperError","./HermiteSpline","./Matrix4","./Spline"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(b){var c=b.points,e=b.times;if(c.length<3){var f=e[0],i=1/(e[1]-f),j=c[0],n=c[1];return function(b,c){d(c)||(c=new a);var e=(b-f)*i;return a.lerp(j,n,e,c)}}return function(f,i){d(i)||(i=new a);var j=b._lastTimeIndex=b.findTimeInterval(f,b._lastTimeIndex),n=(f-e[j])/(e[j+1]-e[j]),o=k;o.z=n,o.y=n*n,o.x=o.y*n,o.w=1;var q,r,s,t,u;return 0===j?(q=c[0],r=c[1],s=b.firstTangent,t=a.subtract(c[2],q,l),a.multiplyByScalar(t,.5,t),u=h.multiplyByVector(g.hermiteCoefficientMatrix,o,o)):j===c.length-2?(q=c[j],r=c[j+1],t=b.lastTangent,s=a.subtract(r,c[j-1],l),a.multiplyByScalar(s,.5,s),u=h.multiplyByVector(g.hermiteCoefficientMatrix,o,o)):(q=c[j-1],r=c[j],s=c[j+1],t=c[j+2],u=h.multiplyByVector(p.catmullRomCoefficientMatrix,o,o)),i=a.multiplyByScalar(q,u.x,i),a.multiplyByScalar(r,u.y,m),a.add(i,m,i),a.multiplyByScalar(s,u.z,m),a.add(i,m,i),a.multiplyByScalar(t,u.w,m),a.add(i,m,i)}}var k=new b,l=new a,m=new a,n=new a,o=new a,p=function(b){b=c(b,c.EMPTY_OBJECT);var e=b.points,f=b.times,g=b.firstTangent,h=b.lastTangent;if(e.length>2&&(d(g)||(g=n,a.multiplyByScalar(e[1],2,g),a.subtract(g,e[2],g),a.subtract(g,e[0],g),a.multiplyByScalar(g,.5,g)),!d(h))){var i=e.length-1;h=o,a.multiplyByScalar(e[i-1],2,h),a.subtract(e[i],h,h),a.add(h,e[i-2],h),a.multiplyByScalar(h,.5,h)}this._times=f,this._points=e,this._firstTangent=a.clone(g),this._lastTangent=a.clone(h),this._evaluateFunction=j(this),this._lastTimeIndex=0};return e(p.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}},firstTangent:{get:function(){return this._firstTangent}},lastTangent:{get:function(){return this._lastTangent}}}),p.catmullRomCoefficientMatrix=new h(-.5,1,-.5,0,1.5,-2.5,0,1,-1.5,2,.5,0,.5,-.5,0,0),p.prototype.findTimeInterval=i.prototype.findTimeInterval,p.prototype.evaluate=function(a,b){return this._evaluateFunction(a,b)},p}),c("Core/appendForwardSlash",[],function(){"use strict";var a=function(a){return(0===a.length||"/"!==a[a.length-1])&&(a+="/"),a};return a}),c("Core/IndexDatatype",["./defined","./DeveloperError","./freezeObject","./Math"],function(a,b,c,d){"use strict";var e={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125};return e.getSizeInBytes=function(a){switch(a){case e.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case e.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case e.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT}},e.validate=function(b){return a(b)&&(b===e.UNSIGNED_BYTE||b===e.UNSIGNED_SHORT||b===e.UNSIGNED_INT)},e.createTypedArray=function(a,b){return a>d.SIXTY_FOUR_KILOBYTES?new Uint32Array(b):new Uint16Array(b)},e.createTypedArrayFromArrayBuffer=function(a,b,c,e){return a>d.SIXTY_FOUR_KILOBYTES?new Uint32Array(b,c,e):new Uint16Array(b,c,e)},c(e)}),c("Core/parseResponseHeaders",[],function(){"use strict";var a=function(a){var b={};if(!a)return b;for(var c=a.split("\r\n"),d=0;d<c.length;++d){var e=c[d],f=e.indexOf(": ");if(f>0){var g=e.substring(0,f),h=e.substring(f+2);b[g]=h}}return b};return a}),c("Core/RequestErrorEvent",["./defined","./parseResponseHeaders"],function(a,b){"use strict";var c=function(a,c,d){this.statusCode=a,this.response=c,this.responseHeaders=d,"string"==typeof this.responseHeaders&&(this.responseHeaders=b(this.responseHeaders))};return c.prototype.toString=function(){var b="Request has failed.";return a(this.statusCode)&&(b+=" Status Code: "+this.statusCode),b},c}),c("Core/loadWithXhr",["../ThirdParty/when","./defaultValue","./defined","./DeveloperError","./RequestErrorEvent","./RuntimeError"],function(a,b,c,d,e,f){"use strict";function g(a,b){var c=decodeURIComponent(b);return a?atob(c):c}function h(a,b){for(var c=g(a,b),d=new ArrayBuffer(c.length),e=new Uint8Array(d),f=0;f<c.length;f++)e[f]=c.charCodeAt(f);return d}function i(a,c){c=b(c,"");var e=a[1],f=!!a[2],i=a[3];switch(c){case"":case"text":return g(f,i);case"arraybuffer":return h(f,i);case"blob":var j=h(f,i);return new Blob([j],{type:e});case"document":var k=new DOMParser;return k.parseFromString(g(f,i),e);case"json":return JSON.parse(g(f,i));default:throw new d("Unhandled responseType: "+c)}}var j=function(c){c=b(c,b.EMPTY_OBJECT);var d=c.responseType,e=b(c.method,"GET"),f=c.data,g=c.headers,h=c.overrideMimeType;return a(c.url,function(b){var c=a.defer();return j.load(b,d,e,f,g,c,h),c.promise})},k=/^data:(.*?)(;base64)?,(.*)$/;return j.load=function(a,b,d,g,h,j,l){var m=k.exec(a);if(null!==m)return j.resolve(i(m,b)),void 0;var n=new XMLHttpRequest;if(c(l)&&c(n.overrideMimeType)&&n.overrideMimeType(l),n.open(d,a,!0),c(h))for(var o in h)h.hasOwnProperty(o)&&n.setRequestHeader(o,h[o]);c(b)&&(n.responseType=b),n.onload=function(){200===n.status?c(n.response)?j.resolve(n.response):c(n.responseXML)&&n.responseXML.hasChildNodes()?j.resolve(n.responseXML):c(n.responseText)?j.resolve(n.responseText):j.reject(new f("unknown XMLHttpRequest response type.")):j.reject(new e(n.status,n.response,n.getAllResponseHeaders()))},n.onerror=function(){j.reject(new e)},n.send(g)},j.defaultLoad=j.load,j}),c("Core/loadArrayBuffer",["./loadWithXhr"],function(a){"use strict";var b=function(b,c){return a({url:b,responseType:"arraybuffer",headers:c})};return b}),c("Core/clone",["./defaultValue"],function(a){"use strict";var b=function(c,d){if(null===c||"object"!=typeof c)return c;d=a(d,!1);var e=new c.constructor;for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];d&&(g=b(g,d)),e[f]=g}return e};return b}),c("Core/loadText",["./loadWithXhr"],function(a){"use strict";var b=function(b,c){return a({url:b,headers:c})};return b}),c("Core/loadJson",["./clone","./defined","./DeveloperError","./loadText"],function(a,b,c,d){"use strict";var e={Accept:"application/json,*/*;q=0.01"},f=function(c,f){return b(f)?b(f.Accept)||(f=a(f),f.Accept=e.Accept):f=e,d(c,f).then(function(a){return JSON.parse(a)})};return f}),c("Core/Intersections2D",["./Cartesian3","./defined","./DeveloperError"],function(a,b){"use strict";var c={};return c.clipTriangleAtAxisAlignedThreshold=function(a,c,d,e,f,g){b(g)?g.length=0:g=[];var h,i,j;c?(h=a>d,i=a>e,j=a>f):(h=d>a,i=e>a,j=f>a);var k,l,m,n,o,p,q=h+i+j;return 1===q?h?(k=(a-d)/(e-d),l=(a-d)/(f-d),g.push(1),g.push(2),1!==l&&(g.push(-1),g.push(0),g.push(2),g.push(l)),1!==k&&(g.push(-1),g.push(0),g.push(1),g.push(k))):i?(m=(a-e)/(f-e),n=(a-e)/(d-e),g.push(2),g.push(0),1!==n&&(g.push(-1),g.push(1),g.push(0),g.push(n)),1!==m&&(g.push(-1),g.push(1),g.push(2),g.push(m))):j&&(o=(a-f)/(d-f),p=(a-f)/(e-f),g.push(0),g.push(1),1!==p&&(g.push(-1),g.push(2),g.push(1),g.push(p)),1!==o&&(g.push(-1),g.push(2),g.push(0),g.push(o))):2===q?h||d===a?i||e===a?j||f===a||(l=(a-d)/(f-d),m=(a-e)/(f-e),g.push(2),g.push(-1),g.push(0),g.push(2),g.push(l),g.push(-1),g.push(1),g.push(2),g.push(m)):(p=(a-f)/(e-f),k=(a-d)/(e-d),g.push(1),g.push(-1),g.push(2),g.push(1),g.push(p),g.push(-1),g.push(0),g.push(1),g.push(k)):(n=(a-e)/(d-e),o=(a-f)/(d-f),g.push(0),g.push(-1),g.push(1),g.push(0),g.push(n),g.push(-1),g.push(2),g.push(0),g.push(o)):3===q||(g.push(0),g.push(1),g.push(2)),g},c.computeBarycentricCoordinates=function(c,d,e,f,g,h,i,j,k){var l=e-i,m=i-g,n=h-j,o=f-j,p=1/(n*l+m*o),q=d-j,r=c-i,s=(n*r+m*q)*p,t=(-o*r+l*q)*p,u=1-s-t;return b(k)?(k.x=s,k.y=t,k.z=u,k):new a(s,t,u)},c}),c("Core/QuantizedMeshTerrainData",["../ThirdParty/when","./BoundingSphere","./Cartesian3","./defaultValue","./defined","./defineProperties","./DeveloperError","./IndexDatatype","./Intersections2D","./Math","./TaskProcessor","./TerrainMesh"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,b,c){o.length=a.length;for(var d=!1,e=0,f=a.length;f>e;++e)o[e]=a[e],d=d||e>0&&b(a[e-1],a[e])>0;return d?(o.sort(b),h.createTypedArray(c,o)):a}var n=function(a){function b(a,b){return g[a]-g[b]}function c(a,b){return f[a]-f[b]}this._quantizedVertices=a.quantizedVertices,this._encodedNormals=a.encodedNormals,this._indices=a.indices,this._minimumHeight=a.minimumHeight,this._maximumHeight=a.maximumHeight,this._boundingSphere=a.boundingSphere,this._horizonOcclusionPoint=a.horizonOcclusionPoint;var e=this._quantizedVertices.length/3,f=this._uValues=this._quantizedVertices.subarray(0,e),g=this._vValues=this._quantizedVertices.subarray(e,2*e);this._heightValues=this._quantizedVertices.subarray(2*e,3*e),this._westIndices=m(a.westIndices,b,e),this._southIndices=m(a.southIndices,c,e),this._eastIndices=m(a.eastIndices,b,e),this._northIndices=m(a.northIndices,c,e),this._westSkirtHeight=a.westSkirtHeight,this._southSkirtHeight=a.southSkirtHeight,this._eastSkirtHeight=a.eastSkirtHeight,this._northSkirtHeight=a.northSkirtHeight,this._childTileMask=d(a.childTileMask,15),this._createdByUpsampling=d(a.createdByUpsampling,!1),this._waterMask=a.waterMask};f(n.prototype,{waterMask:{get:function(){return this._waterMask}}});var o=[],p=new k("createVerticesFromQuantizedTerrainMesh");n.prototype.createMesh=function(b,c,d,f){var g=b.ellipsoid,i=b.tileXYToRectangle(c,d,f),j=p.scheduleTask({minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,quantizedVertices:this._quantizedVertices,octEncodedNormals:this._encodedNormals,indices:this._indices,westIndices:this._westIndices,southIndices:this._southIndices,eastIndices:this._eastIndices,northIndices:this._northIndices,westSkirtHeight:this._westSkirtHeight,southSkirtHeight:this._southSkirtHeight,eastSkirtHeight:this._eastSkirtHeight,northSkirtHeight:this._northSkirtHeight,rectangle:i,relativeToCenter:this._boundingSphere.center,ellipsoid:g});if(!e(j))return void 0;var k=this;return a(j,function(a){var b=k._quantizedVertices.length/3;b+=k._westIndices.length+k._southIndices.length+k._eastIndices.length+k._northIndices.length;var c=h.createTypedArray(b,a.indices);return new l(k._boundingSphere.center,new Float32Array(a.vertices),c,k._minimumHeight,k._maximumHeight,k._boundingSphere,k._horizonOcclusionPoint,e(k._encodedNormals)?7:6)})};var q=new k("upsampleQuantizedTerrainMesh");n.prototype.upsample=function(d,f,g,i,j,k,l){var m=2*f!==j,o=2*g===k,p=d.ellipsoid,r=d.tileXYToRectangle(j,k,l),s=q.scheduleTask({vertices:this._quantizedVertices,indices:this._indices,encodedNormals:this._encodedNormals,minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,isEastChild:m,isNorthChild:o,childRectangle:r,ellipsoid:p});if(!e(s))return void 0;var t=Math.min(this._westSkirtHeight,this._eastSkirtHeight);t=Math.min(t,this._southSkirtHeight),t=Math.min(t,this._northSkirtHeight);var u=m?.5*t:this._westSkirtHeight,v=o?.5*t:this._southSkirtHeight,w=m?this._eastSkirtHeight:.5*t,x=o?this._northSkirtHeight:.5*t;return a(s,function(a){var d,f=h.createTypedArray(a.vertices.length/3,a.indices);return e(a.encodedNormals)&&(d=new Uint8Array(a.encodedNormals)),new n({quantizedVertices:new Uint16Array(a.vertices),indices:f,encodedNormals:d,minimumHeight:a.minimumHeight,maximumHeight:a.maximumHeight,boundingSphere:b.clone(a.boundingSphere),horizonOcclusionPoint:c.clone(a.horizonOcclusionPoint),westIndices:a.westIndices,southIndices:a.southIndices,eastIndices:a.eastIndices,northIndices:a.northIndices,westSkirtHeight:u,southSkirtHeight:v,eastSkirtHeight:w,northSkirtHeight:x,childTileMask:0,createdByUpsampling:!0})})};var r=32767,s=new c;return n.prototype.interpolateHeight=function(a,b,c){var d=j.clamp((b-a.west)/(a.east-a.west),0,1);d*=r;var e=j.clamp((c-a.south)/(a.north-a.south),0,1);e*=r;for(var f=this._uValues,g=this._vValues,h=this._heightValues,k=this._indices,l=0,m=k.length;m>l;l+=3){var n=k[l],o=k[l+1],p=k[l+2],q=f[n],t=f[o],u=f[p],v=g[n],w=g[o],x=g[p],y=i.computeBarycentricCoordinates(d,e,q,v,t,w,u,x,s);if(y.x>=-1e-15&&y.y>=-1e-15&&y.z>=-1e-15){var z=y.x*h[n]+y.y*h[o]+y.z*h[p];return j.lerp(this._minimumHeight,this._maximumHeight,z/r)}}return void 0},n.prototype.isChildAvailable=function(a,b,c,d){var e=2;return c!==2*a&&++e,d!==2*b&&(e-=2),0!==(this._childTileMask&1<<e)},n.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling},n}),c("Core/formatError",["./defined"],function(a){"use strict";var b=function(b){var c,d=b.name,e=b.message;c=a(d)&&a(e)?d+": "+e:b.toString();var f=b.stack;return a(f)&&(c+="\n"+f),c};return b}),c("Core/TileProviderError",["./defaultValue","./defined","./formatError"],function(a,b,c){"use strict";var d=function(b,c,d,e,f,g){this.provider=b,this.message=c,this.x=d,this.y=e,this.level=f,this.timesRetried=a(g,0),this.retry=!1};return d.handleError=function(a,e,f,g,h,i,j,k){var l=a;return b(a)?(l.provider=e,l.message=g,l.x=h,l.y=i,l.level=j,l.retry=!1,++l.timesRetried):l=new d(e,g,h,i,j,0),f.numberOfListeners>0?f.raiseEvent(l):console.log('An error occurred in "'+e.constructor.name+'": '+c(g)),l.retry&&b(k)&&k(),l},d.handleSuccess=function(a){b(a)&&(a.timesRetried=-1)},d}),c("Core/CesiumTerrainProvider",["../ThirdParty/Uri","../ThirdParty/when","./appendForwardSlash","./BoundingSphere","./Cartesian3","./Credit","./defaultValue","./defined","./defineProperties","./DeveloperError","./Event","./GeographicTilingScheme","./HeightmapTerrainData","./IndexDatatype","./loadArrayBuffer","./loadJson","./QuantizedMeshTerrainData","./RuntimeError","./TerrainProvider","./throttleRequestByServer","./TileProviderError"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){"use strict";function v(a){if(h(a)&&0!==a.length){var b=a.join("-");return{Accept:"application/vnd.quantized-mesh;extensions="+b+",application/octet-stream;q=0.9,*/*;q=0.01"}}return{Accept:"application/vnd.quantized-mesh,application/octet-stream;q=0.9,*/*;q=0.01"}}function w(a,b){var c=new Uint16Array(b,0,a._heightmapWidth*a._heightmapWidth);return new m({buffer:c,childTileMask:new Uint8Array(b,c.byteLength,1)[0],waterMask:new Uint8Array(b,c.byteLength+1,b.byteLength-c.byteLength-1),width:a._heightmapWidth,height:a._heightmapWidth,structure:a._heightmapStructure})}function x(a,b,c,f,g,h){function i(a){return a>>1^-(1&a)}var j=0,k=3,l=k+1,m=Float64Array.BYTES_PER_ELEMENT*k,o=Float64Array.BYTES_PER_ELEMENT*l,p=3,r=Uint16Array.BYTES_PER_ELEMENT*p,s=3,t=Uint16Array.BYTES_PER_ELEMENT,u=t*s,v=new DataView(b),w=new e(v.getFloat64(j,!0),v.getFloat64(j+8,!0),v.getFloat64(j+16,!0));j+=m;var x=v.getFloat32(j,!0);j+=Float32Array.BYTES_PER_ELEMENT;var z=v.getFloat32(j,!0);j+=Float32Array.BYTES_PER_ELEMENT;var A=new d(new e(v.getFloat64(j,!0),v.getFloat64(j+8,!0),v.getFloat64(j+16,!0)),v.getFloat64(j+m,!0));j+=o;var C=new e(v.getFloat64(j,!0),v.getFloat64(j+8,!0),v.getFloat64(j+16,!0));j+=m;var D=v.getUint32(j,!0);j+=Uint32Array.BYTES_PER_ELEMENT;var E=new Uint16Array(b,j,3*D);j+=D*r,D>65536&&(t=Uint32Array.BYTES_PER_ELEMENT,u=t*s);var F,G=E.subarray(0,D),H=E.subarray(D,2*D),I=E.subarray(2*D,3*D),J=0,K=0,L=0;for(F=0;D>F;++F)J+=i(G[F]),K+=i(H[F]),L+=i(I[F]),G[F]=J,H[F]=K,I[F]=L;0!==j%t&&(j+=t-j%t);var M=v.getUint32(j,!0);j+=Uint32Array.BYTES_PER_ELEMENT;var N=n.createTypedArrayFromArrayBuffer(D,b,j,M*s);j+=M*u;var O=0;for(F=0;F<N.length;++F){var P=N[F];N[F]=O-P,0===P&&++O}var Q=v.getUint32(j,!0);j+=Uint32Array.BYTES_PER_ELEMENT;var R=n.createTypedArrayFromArrayBuffer(D,b,j,Q);j+=Q*t;var S=v.getUint32(j,!0);j+=Uint32Array.BYTES_PER_ELEMENT;var T=n.createTypedArrayFromArrayBuffer(D,b,j,S);j+=S*t;var U=v.getUint32(j,!0);j+=Uint32Array.BYTES_PER_ELEMENT;var V=n.createTypedArrayFromArrayBuffer(D,b,j,U);j+=U*t;var W=v.getUint32(j,!0);j+=Uint32Array.BYTES_PER_ELEMENT;var X=n.createTypedArrayFromArrayBuffer(D,b,j,W);j+=W*t;for(var Y;j<v.byteLength;){var Z=v.getUint8(j,!0);j+=Uint8Array.BYTES_PER_ELEMENT;var $=v.getUint32(j,a._littleEndianExtensionSize);j+=Uint32Array.BYTES_PER_ELEMENT,Z===B.OCT_VERTEX_NORMALS&&(Y=new Uint8Array(b,j,2*D)),j+=$}var _=5*a.getLevelMaximumGeometricError(c);return new q({center:w,minimumHeight:x,maximumHeight:z,boundingSphere:A,horizonOcclusionPoint:C,quantizedVertices:E,encodedNormals:Y,indices:N,westIndices:R,southIndices:T,eastIndices:V,northIndices:X,westSkirtHeight:_,southSkirtHeight:_,eastSkirtHeight:_,northSkirtHeight:_,childTileMask:y(a,c,f,h)})}function y(a,b,c,d){var e=a._availableTiles;if(!e||0===e.length)return 15;var f=b+1;if(f>=e.length)return 0;var g=e[f],h=0;return h|=z(g,2*c,2*d)?1:0,h|=z(g,2*c+1,2*d)?2:0,h|=z(g,2*c,2*d+1)?4:0,h|=z(g,2*c+1,2*d+1)?8:0}function z(a,b,c){for(var d=0,e=a.length;e>d;++d){var f=a[d];if(b>=f.startX&&b<=f.endX&&c>=f.startY&&c<=f.endY)return!0}return!1}var A=function(d){function e(b){var c;if(!b.format)return c="The tile format is not specified in the layer.json file.",o=u.handleError(o,q,q._errorEvent,c,void 0,void 0,void 0,j),void 0;if(!b.tiles||0===b.tiles.length)return c="The layer.json file does not specify any tile URL templates.",o=u.handleError(o,q,q._errorEvent,c,void 0,void 0,void 0,j),void 0;if("heightmap-1.0"===b.format)q._heightmapStructure={heightScale:.2,heightOffset:-1e3,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1},q._hasWaterMask=!0;else{if(0!==b.format.indexOf("quantized-mesh-1."))return c='The tile format "'+b.format+'" is invalid or not supported.',o=u.handleError(o,q,q._errorEvent,c,void 0,void 0,void 0,j),void 0;q._hasWaterMask=!1}var d=new a(n);q._tileUrlTemplates=b.tiles;for(var e=0;e<q._tileUrlTemplates.length;++e)q._tileUrlTemplates[e]=new a(q._tileUrlTemplates[e]).resolve(d).toString().replace("{version}",b.version);q._availableTiles=b.available,!h(q._credit)&&h(b.attribution)&&null!==b.attribution&&(q._credit=new f(b.attribution)),h(b.extensions)&&-1!==b.extensions.indexOf("octvertexnormals")?q._hasVertexNormals=!0:h(b.extensions)&&-1!==b.extensions.indexOf("vertexnormals")&&(q._hasVertexNormals=!0,q._littleEndianExtensionSize=!1),q._ready=!0}function i(a){if(h(a)&&404===a.statusCode)return e({tilejson:"2.1.0",format:"heightmap-1.0",version:"1.0.0",scheme:"tms",tiles:["{z}/{x}/{y}.terrain?v={version}"]}),void 0;var b="An error occurred while accessing "+n+".";o=u.handleError(o,q,q._errorEvent,b,void 0,void 0,void 0,j)}function j(){var a=p(n);b(a,e,i)}this._url=c(d.url),this._proxy=d.proxy,this._tilingScheme=new l({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1}),this._heightmapWidth=65,this._levelZeroMaximumGeometricError=s.getEstimatedLevelZeroGeometricErrorForAHeightmap(this._tilingScheme.ellipsoid,this._heightmapWidth,this._tilingScheme.getNumberOfXTilesAtLevel(0)),this._heightmapStructure=void 0,this._hasWaterMask=!1,this._hasVertexNormals=!1,this._requestVertexNormals=g(d.requestVertexNormals,!1),this._littleEndianExtensionSize=!0,this._errorEvent=new k;var m=d.credit;"string"==typeof m&&(m=new f(m)),this._credit=m,this._ready=!1;var n=this._url+"layer.json";h(this._proxy)&&(n=this._proxy.getURL(n));var o,q=this;j()},B={OCT_VERTEX_NORMALS:1};return A.prototype.requestTileGeometry=function(a,c,d,e){var f=this._tileUrlTemplates;if(0===f.length)return void 0;var i=this._tilingScheme.getNumberOfYTilesAtLevel(d),j=i-c-1,k=f[0].replace("{z}",d).replace("{x}",a).replace("{y}",j),l=this._proxy;h(l)&&(k=l.getURL(k));var m,n=[];this._requestVertexNormals&&this._hasVertexNormals&&n.push(this._littleEndianExtensionSize?"octvertexnormals":"vertexnormals");var p=function(a){return o(a,v(n))};if(e=g(e,!0)){if(m=t(k,p),!h(m))return void 0}else m=p(k);var q=this;return b(m,function(b){return h(q._heightmapStructure)?w(q,b,d,a,c,j):x(q,b,d,a,c,j)})},i(A.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return this._ready}},hasWaterMask:{get:function(){return this._hasWaterMask}},hasVertexNormals:{get:function(){return this._hasVertexNormals&&this._requestVertexNormals}},requestVertexNormals:{get:function(){return this._requestVertexNormals}}}),A.prototype.getLevelMaximumGeometricError=function(a){return this._levelZeroMaximumGeometricError/(1<<a)},A.prototype.getTileDataAvailable=function(a,b,c){var d=this._availableTiles;if(d&&0!==d.length){if(c>=d.length)return!1;var e=d[c],f=this._tilingScheme.getNumberOfYTilesAtLevel(c),g=f-b-1;return z(e,a,g)}return void 0},A}),c("Core/Quaternion",["./Cartesian3","./defaultValue","./defined","./DeveloperError","./FeatureDetection","./freezeObject","./Math","./Matrix3"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(a,c,d,e){this.x=b(a,0),this.y=b(c,0),this.z=b(d,0),this.w=b(e,0)},j=new a;i.fromAxisAngle=function(b,d,e){var f=d/2,g=Math.sin(f);j=a.normalize(b,j)
;var h=j.x*g,k=j.y*g,l=j.z*g,m=Math.cos(f);return c(e)?(e.x=h,e.y=k,e.z=l,e.w=m,e):new i(h,k,l,m)};var k=[1,2,0],l=new Array(3);i.fromRotationMatrix=function(a,b){var d,e,f,g,j,m=a[h.COLUMN0ROW0],n=a[h.COLUMN1ROW1],o=a[h.COLUMN2ROW2],p=m+n+o;if(p>0)d=Math.sqrt(p+1),j=.5*d,d=.5/d,e=(a[h.COLUMN1ROW2]-a[h.COLUMN2ROW1])*d,f=(a[h.COLUMN2ROW0]-a[h.COLUMN0ROW2])*d,g=(a[h.COLUMN0ROW1]-a[h.COLUMN1ROW0])*d;else{var q=k,r=0;n>m&&(r=1),o>m&&o>n&&(r=2);var s=q[r],t=q[s];d=Math.sqrt(a[h.getElementIndex(r,r)]-a[h.getElementIndex(s,s)]-a[h.getElementIndex(t,t)]+1);var u=l;u[r]=.5*d,d=.5/d,j=(a[h.getElementIndex(t,s)]-a[h.getElementIndex(s,t)])*d,u[s]=(a[h.getElementIndex(s,r)]+a[h.getElementIndex(r,s)])*d,u[t]=(a[h.getElementIndex(t,r)]+a[h.getElementIndex(r,t)])*d,e=-u[0],f=-u[1],g=-u[2]}return c(b)?(b.x=e,b.y=f,b.z=g,b.w=j,b):new i(e,f,g,j)};var m=new a,n=new a,o=new i,p=new i,q=new i;i.packedLength=4,i.pack=function(a,c,d){d=b(d,0),c[d++]=a.x,c[d++]=a.y,c[d++]=a.z,c[d]=a.w},i.unpack=function(a,d,e){return d=b(d,0),c(e)||(e=new i),e.x=a[d],e.y=a[d+1],e.z=a[d+2],e.w=a[d+3],e},i.packedInterpolationLength=3,i.convertPackedArrayForInterpolation=function(a,b,c,d){i.unpack(a,4*c,q),i.conjugate(q,q);for(var e=0,f=c-b+1;f>e;e++){var g=3*e;i.unpack(a,4*(b+e),o),i.multiply(o,q,o),o.w<0&&i.negate(o,o),i.computeAxis(o,m);var h=i.computeAngle(o);d[g]=m.x*h,d[g+1]=m.y*h,d[g+2]=m.z*h}},i.unpackInterpolationResult=function(b,d,e,f,g){c(g)||(g=new i),a.fromArray(b,0,n);var h=a.magnitude(n);return i.unpack(d,4*f,p),0===h?i.clone(i.IDENTITY,o):i.fromAxisAngle(n,h,o),i.multiply(o,p,g)},i.clone=function(a,b){return c(a)?c(b)?(b.x=a.x,b.y=a.y,b.z=a.z,b.w=a.w,b):new i(a.x,a.y,a.z,a.w):void 0},i.conjugate=function(a,b){return b.x=-a.x,b.y=-a.y,b.z=-a.z,b.w=a.w,b},i.magnitudeSquared=function(a){return a.x*a.x+a.y*a.y+a.z*a.z+a.w*a.w},i.magnitude=function(a){return Math.sqrt(i.magnitudeSquared(a))},i.normalize=function(a,b){var c=1/i.magnitude(a),d=a.x*c,e=a.y*c,f=a.z*c,g=a.w*c;return b.x=d,b.y=e,b.z=f,b.w=g,b},i.inverse=function(a,b){var c=i.magnitudeSquared(a);return b=i.conjugate(a,b),i.multiplyByScalar(b,1/c,b)},i.add=function(a,b,c){return c.x=a.x+b.x,c.y=a.y+b.y,c.z=a.z+b.z,c.w=a.w+b.w,c},i.subtract=function(a,b,c){return c.x=a.x-b.x,c.y=a.y-b.y,c.z=a.z-b.z,c.w=a.w-b.w,c},i.negate=function(a,b){return b.x=-a.x,b.y=-a.y,b.z=-a.z,b.w=-a.w,b},i.dot=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z+a.w*b.w},i.multiply=function(a,b,c){var d=a.x,e=a.y,f=a.z,g=a.w,h=b.x,i=b.y,j=b.z,k=b.w,l=g*h+d*k+e*j-f*i,m=g*i-d*j+e*k+f*h,n=g*j+d*i-e*h+f*k,o=g*k-d*h-e*i-f*j;return c.x=l,c.y=m,c.z=n,c.w=o,c},i.multiplyByScalar=function(a,b,c){return c.x=a.x*b,c.y=a.y*b,c.z=a.z*b,c.w=a.w*b,c},i.divideByScalar=function(a,b,c){return c.x=a.x/b,c.y=a.y/b,c.z=a.z/b,c.w=a.w/b,c},i.computeAxis=function(a,b){var c=a.w;if(Math.abs(c-1)<g.EPSILON6)return b.x=b.y=b.z=0,b;var d=1/Math.sqrt(1-c*c);return b.x=a.x*d,b.y=a.y*d,b.z=a.z*d,b},i.computeAngle=function(a){return Math.abs(a.w-1)<g.EPSILON6?0:2*Math.acos(a.w)};var r=new i;i.lerp=function(a,b,c,d){return r=i.multiplyByScalar(b,c,r),d=i.multiplyByScalar(a,1-c,d),i.add(r,d,d)};var s=new i,t=new i,u=new i;i.slerp=function(a,b,c,d){var e=i.dot(a,b),f=b;if(0>e&&(e=-e,f=s=i.negate(b,s)),1-e<g.EPSILON6)return i.lerp(a,f,c,d);var h=Math.acos(e);return t=i.multiplyByScalar(a,Math.sin((1-c)*h),t),u=i.multiplyByScalar(f,Math.sin(c*h),u),d=i.add(t,u,d),i.multiplyByScalar(d,1/Math.sin(h),d)},i.log=function(b,c){var d=g.acosClamped(b.w),e=0;return 0!==d&&(e=d/Math.sin(d)),a.multiplyByScalar(b,e,c)},i.exp=function(b,c){var d=a.magnitude(b),e=0;return 0!==d&&(e=Math.sin(d)/d),c.x=b.x*e,c.y=b.y*e,c.z=b.z*e,c.w=Math.cos(d),c};var v=new a,w=new a,x=new i,y=new i;i.computeInnerQuadrangle=function(b,c,d,e){var f=i.conjugate(c,x);i.multiply(f,d,y);var g=i.log(y,v);i.multiply(f,b,y);var h=i.log(y,w);return a.add(g,h,g),a.multiplyByScalar(g,.25,g),a.negate(g,g),i.exp(g,x),i.multiply(c,x,e)},i.squad=function(a,b,c,d,e,f){var g=i.slerp(a,b,e,x),h=i.slerp(c,d,e,y);return i.slerp(g,h,2*e*(1-e),f)};for(var z=new i,A=1.9011074535173003,B=e.supportsTypedArrays()?new Float32Array(8):[],C=e.supportsTypedArrays()?new Float32Array(8):[],D=e.supportsTypedArrays()?new Float32Array(8):[],E=e.supportsTypedArrays()?new Float32Array(8):[],F=0;7>F;++F){var G=F+1,H=2*G+1;B[F]=1/(G*H),C[F]=G/H}return B[7]=A/136,C[7]=8*A/17,i.fastSlerp=function(a,b,c,d){var e,f=i.dot(a,b);f>=0?e=1:(e=-1,f=-f);for(var g=f-1,h=1-c,j=c*c,k=h*h,l=7;l>=0;--l)D[l]=(B[l]*j-C[l])*g,E[l]=(B[l]*k-C[l])*g;var m=e*c*(1+D[0]*(1+D[1]*(1+D[2]*(1+D[3]*(1+D[4]*(1+D[5]*(1+D[6]*(1+D[7])))))))),n=h*(1+E[0]*(1+E[1]*(1+E[2]*(1+E[3]*(1+E[4]*(1+E[5]*(1+E[6]*(1+E[7])))))))),o=i.multiplyByScalar(a,n,z);return i.multiplyByScalar(b,m,d),i.add(o,d,d)},i.fastSquad=function(a,b,c,d,e,f){var g=i.fastSlerp(a,b,e,x),h=i.fastSlerp(c,d,e,y);return i.fastSlerp(g,h,2*e*(1-e),f)},i.equals=function(a,b){return a===b||c(a)&&c(b)&&a.x===b.x&&a.y===b.y&&a.z===b.z&&a.w===b.w},i.equalsEpsilon=function(a,b,d){return a===b||c(a)&&c(b)&&Math.abs(a.x-b.x)<=d&&Math.abs(a.y-b.y)<=d&&Math.abs(a.z-b.z)<=d&&Math.abs(a.w-b.w)<=d},i.ZERO=f(new i(0,0,0,0)),i.IDENTITY=f(new i(0,0,0,1)),i.prototype.clone=function(a){return i.clone(this,a)},i.prototype.equals=function(a){return i.equals(this,a)},i.prototype.equalsEpsilon=function(a,b){return i.equalsEpsilon(this,a,b)},i.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},i}),c("Core/EllipseGeometryLibrary",["./Cartesian3","./Math","./Matrix3","./Quaternion"],function(a,b,c,d){"use strict";function e(b,e,f,k,l,m,n,o,p,q){var r=b+e;a.multiplyByScalar(k,Math.cos(r),g),a.multiplyByScalar(f,Math.sin(r),h),a.add(g,h,g);var s=Math.cos(b);s*=s;var t=Math.sin(b);t*=t;var u=m/Math.sqrt(n*s+l*t),v=u/o;return d.fromAxisAngle(g,v,i),c.fromQuaternion(i,j),c.multiplyByVector(j,p,q),a.normalize(q,q),a.multiplyByScalar(q,o,q),q}var f={},g=new a,h=new a,i=new d,j=new c,k=new a,l=new a,m=new a,n=new a;f.raisePositionsToHeight=function(b,c,d){for(var e=c.ellipsoid,f=c.height,g=c.extrudedHeight,h=d?2*(b.length/3):b.length/3,i=new Float64Array(3*h),j=n,o=b.length,p=d?o:0,q=0;o>q;q+=3){var r,s=q+1,t=q+2,u=a.fromArray(b,q,k);u=e.scaleToGeodeticSurface(u,u),r=a.clone(u,l),j=e.geodeticSurfaceNormal(u,j);var v=a.multiplyByScalar(j,f,m);u=a.add(u,v,u),d&&(v=a.multiplyByScalar(j,g,v),r=a.add(r,v,r),i[q+p]=r.x,i[s+p]=r.y,i[t+p]=r.z),i[q]=u.x,i[s]=u.y,i[t]=u.z}return i};var o=new a,p=new a,q=new a;return f.computeEllipsePositions=function(c,d,f){var g=c.semiMinorAxis,h=c.semiMajorAxis,i=c.rotation,j=c.center,n=8*c.granularity,r=g*g,s=h*h,t=h*g,u=a.magnitude(j),v=a.normalize(j,o),w=a.cross(a.UNIT_Z,j,p);w=a.normalize(w,w);var x,y,z,A,B,C=a.cross(v,w,q),D=1+Math.ceil(b.PI_OVER_TWO/n),E=b.PI_OVER_TWO/(D-1),F=2*D*(D+1),G=d?new Array(3*F):void 0,H=0,I=k,J=l,K=f?[]:void 0,L=f?[]:void 0,M=b.PI_OVER_TWO;for(x=0;D>x&&M>0;++x){if(I=e(M,i,C,w,r,t,s,u,v,I),J=e(Math.PI-M,i,C,w,r,t,s,u,v,J),d){for(G[H++]=I.x,G[H++]=I.y,G[H++]=I.z,z=2*x+2,y=1;z-1>y;++y)A=y/(z-1),B=a.lerp(I,J,A,m),G[H++]=B.x,G[H++]=B.y,G[H++]=B.z;G[H++]=J.x,G[H++]=J.y,G[H++]=J.z}f&&(L.unshift(I.x,I.y,I.z),0!==x&&K.push(J.x,J.y,J.z)),M=b.PI_OVER_TWO-(x+1)*E}for(D=x,x=D;x>0;--x){if(M=b.PI_OVER_TWO-(x-1)*E,I=e(-M,i,C,w,r,t,s,u,v,I),J=e(M+Math.PI,i,C,w,r,t,s,u,v,J),d){for(G[H++]=I.x,G[H++]=I.y,G[H++]=I.z,z=2*(x-1)+2,y=1;z-1>y;++y)A=y/(z-1),B=a.lerp(I,J,A,m),G[H++]=B.x,G[H++]=B.y,G[H++]=B.z;G[H++]=J.x,G[H++]=J.y,G[H++]=J.z}f&&(L.unshift(I.x,I.y,I.z),1!==x&&K.push(J.x,J.y,J.z))}var N={};return d&&(G.length!==H&&(F=H/3,G.length=H),N.positions=G,N.numPts=D),f&&(N.outerPositions=L.concat(K)),N},f}),c("Core/GeometryInstance",["./defaultValue","./defined","./DeveloperError","./Matrix4"],function(a,b,c,d){"use strict";var e=function(b){b=a(b,a.EMPTY_OBJECT),this.geometry=b.geometry,this.modelMatrix=d.clone(a(b.modelMatrix,d.IDENTITY)),this.id=b.id,this.pickPrimitive=b.pickPrimitive,this.attributes=a(b.attributes,{}),this.westHemisphereGeometry=void 0,this.eastHemisphereGeometry=void 0};return e}),c("Core/barycentricCoordinates",["./Cartesian2","./Cartesian3","./defined","./DeveloperError"],function(a,b,c){"use strict";var d=new b,e=new b,f=new b,g=function(g,h,i,j,k){c(k)||(k=new b);var l,m,n,o,p,q,r,s;c(h.z)?(l=b.subtract(i,h,d),m=b.subtract(j,h,e),n=b.subtract(g,h,f),o=b.dot(l,l),p=b.dot(l,m),q=b.dot(l,n),r=b.dot(m,m),s=b.dot(m,n)):(l=a.subtract(i,h,d),m=a.subtract(j,h,e),n=a.subtract(g,h,f),o=a.dot(l,l),p=a.dot(l,m),q=a.dot(l,n),r=a.dot(m,m),s=a.dot(m,n));var t=1/(o*r-p*p);return k.y=(r*q-p*s)*t,k.z=(o*s-p*q)*t,k.x=1-k.y-k.z,k};return g}),c("Core/deprecationWarning",["./defined","./DeveloperError"],function(a){"use strict";var b={},c=function(c,d){a(b[c])||(b[c]=!0,console.log(d))};return c}),c("Core/EncodedCartesian3",["./Cartesian3","./defined","./DeveloperError"],function(a,b){"use strict";var c=function(){this.high=a.clone(a.ZERO),this.low=a.clone(a.ZERO)};c.encode=function(a,c){b(c)||(c={high:0,low:0});var d;return a>=0?(d=65536*Math.floor(a/65536),c.high=d,c.low=a-d):(d=65536*Math.floor(-a/65536),c.high=-d,c.low=a+d),c};var d={high:0,low:0};c.fromCartesian=function(a,e){b(e)||(e=new c);var f=e.high,g=e.low;return c.encode(a.x,d),f.x=d.high,g.x=d.low,c.encode(a.y,d),f.y=d.high,g.y=d.low,c.encode(a.z,d),f.z=d.high,g.z=d.low,e};var e=new c;return c.writeElements=function(a,b,d){c.fromCartesian(a,e);var f=e.high,g=e.low;b[d]=f.x,b[d+1]=f.y,b[d+2]=f.z,b[d+3]=g.x,b[d+4]=g.y,b[d+5]=g.z},c}),c("Core/QuadraticRealPolynomial",["./DeveloperError","./Math"],function(a,b){"use strict";function c(a,c,d){var e=a+c;return b.sign(a)!==b.sign(c)&&Math.abs(e/Math.max(Math.abs(a),Math.abs(c)))<d?0:e}var d={};return d.computeDiscriminant=function(a,b,c){var d=b*b-4*a*c;return d},d.computeRealRoots=function(a,d,e){var f;if(0===a)return 0===d?[]:[-e/d];if(0===d){if(0===e)return[0,0];var g=Math.abs(e),h=Math.abs(a);if(h>g&&g/h<b.EPSILON14)return[0,0];if(g>h&&h/g<b.EPSILON14)return[];if(f=-e/a,0>f)return[];var i=Math.sqrt(f);return[-i,i]}if(0===e)return f=-d/a,0>f?[f,0]:[0,f];var j=d*d,k=4*a*e,l=c(j,-k,b.EPSILON14);if(0>l)return[];var m=-.5*c(d,b.sign(d)*Math.sqrt(l),b.EPSILON14);return d>0?[m/a,e/m]:[e/m,m/a]},d}),c("Core/CubicRealPolynomial",["./DeveloperError","./QuadraticRealPolynomial"],function(a,b){"use strict";function c(a,b,c,d){var e,f,g=a,h=b/3,i=c/3,j=d,k=g*i,l=h*j,m=h*h,n=i*i,o=g*i-m,p=g*j-h*i,q=h*j-n,r=4*o*q-p*p;if(0>r){var s,t,u;m*l>=k*n?(s=g,t=o,u=-2*h*o+g*p):(s=j,t=q,u=-j*p+2*i*q);var v=0>u?-1:1,w=-v*Math.abs(s)*Math.sqrt(-r);f=-u+w;var x=f/2,y=0>x?-Math.pow(-x,1/3):Math.pow(x,1/3),z=f===w?-y:-t/y;return e=0>=t?y+z:-u/(y*y+z*z+t),m*l>=k*n?[(e-h)/g]:[-j/(e+i)]}var A=o,B=-2*h*o+g*p,C=q,D=-j*p+2*i*q,E=Math.sqrt(r),F=Math.sqrt(3)/2,G=Math.abs(Math.atan2(g*E,-B)/3);e=2*Math.sqrt(-A);var H=Math.cos(G);f=e*H;var I=e*(-H/2-F*Math.sin(G)),J=f+I>2*h?f-h:I-h,K=g,L=J/K;G=Math.abs(Math.atan2(j*E,-D)/3),e=2*Math.sqrt(-C),H=Math.cos(G),f=e*H,I=e*(-H/2-F*Math.sin(G));var M=-j,N=2*i>f+I?f+i:I+i,O=M/N,P=K*N,Q=-J*N-K*M,R=J*M,S=(i*Q-h*R)/(-h*Q+i*P);return S>=L?O>=L?O>=S?[L,S,O]:[L,O,S]:[O,L,S]:O>=L?[S,L,O]:O>=S?[S,O,L]:[O,S,L]}var d={};return d.computeDiscriminant=function(a,b,c,d){var e=a*a,f=b*b,g=c*c,h=d*d,i=18*a*b*c*d+f*g-27*e*h-4*(a*g*c+f*b*d);return i},d.computeRealRoots=function(a,d,e,f){var g,h;if(0===a)return b.computeRealRoots(d,e,f);if(0===d){if(0===e){if(0===f)return[0,0,0];h=-f/a;var i=0>h?-Math.pow(-h,1/3):Math.pow(h,1/3);return[i,i,i]}return 0===f?(g=b.computeRealRoots(a,0,e),0===g.Length?[0]:[g[0],0,g[1]]):c(a,0,e,f)}return 0===e?0===f?(h=-d/a,0>h?[h,0,0]:[0,0,h]):c(a,d,0,f):0===f?(g=b.computeRealRoots(a,d,e),0===g.length?[0]:g[1]<=0?[g[0],g[1],0]:g[0]>=0?[0,g[0],g[1]]:[g[0],0,g[1]]):c(a,d,e,f)},d}),c("Core/QuarticRealPolynomial",["./CubicRealPolynomial","./DeveloperError","./Math","./QuadraticRealPolynomial"],function(a,b,c,d){"use strict";function e(b,e,f,g){var h=b*b,i=e-3*h/8,j=f-e*b/2+h*b/8,k=g-f*b/4+e*h/16-3*h*h/256,l=a.computeRealRoots(1,2*i,i*i-4*k,-j*j);if(l.length>0){var m=-b/4,n=l[l.length-1];if(Math.abs(n)<c.EPSILON14){var o=d.computeRealRoots(1,i,k);if(2===o.length){var p,q=o[0],r=o[1];if(q>=0&&r>=0){var s=Math.sqrt(q),t=Math.sqrt(r);return[m-t,m-s,m+s,m+t]}if(q>=0&&0>r)return p=Math.sqrt(q),[m-p,m+p];if(0>q&&r>=0)return p=Math.sqrt(r),[m-p,m+p]}return[]}if(n>0){var u=Math.sqrt(n),v=(i+n-j/u)/2,w=(i+n+j/u)/2,x=d.computeRealRoots(1,u,v),y=d.computeRealRoots(1,-u,w);return 0!==x.length?(x[0]+=m,x[1]+=m,0!==y.length?(y[0]+=m,y[1]+=m,x[1]<=y[0]?[x[0],x[1],y[0],y[1]]:y[1]<=x[0]?[y[0],y[1],x[0],x[1]]:x[0]>=y[0]&&x[1]<=y[1]?[y[0],x[0],x[1],y[1]]:y[0]>=x[0]&&y[1]<=x[1]?[x[0],y[0],y[1],x[1]]:x[0]>y[0]&&x[0]<y[1]?[y[0],x[0],y[1],x[1]]:[x[0],y[0],x[1],y[1]]):x):0!==y.length?(y[0]+=m,y[1]+=m,y):[]}}return[]}function f(b,e,f,g){var h=f*f,i=e*e,j=b*b,k=-2*e,l=f*b+i-4*g,m=j*g-f*e*b+h,n=a.computeRealRoots(1,k,l,m);if(n.length>0){var o,p,q=n[0],r=e-q,s=r*r,t=b/2,u=r/2,v=s-4*g,w=s+4*Math.abs(g),x=j-4*q,y=j+4*Math.abs(q);if(0>q||x*w>v*y){var z=Math.sqrt(x);o=z/2,p=0===z?0:(b*u-f)/z}else{var A=Math.sqrt(v);o=0===A?0:(b*u-f)/A,p=A/2}var B,C;0===t&&0===o?(B=0,C=0):c.sign(t)===c.sign(o)?(B=t+o,C=q/B):(C=t-o,B=q/C);var D,E;0===u&&0===p?(D=0,E=0):c.sign(u)===c.sign(p)?(D=u+p,E=g/D):(E=u-p,D=g/E);var F=d.computeRealRoots(1,B,D),G=d.computeRealRoots(1,C,E);if(0!==F.length)return 0!==G.length?F[1]<=G[0]?[F[0],F[1],G[0],G[1]]:G[1]<=F[0]?[G[0],G[1],F[0],F[1]]:F[0]>=G[0]&&F[1]<=G[1]?[G[0],F[0],F[1],G[1]]:G[0]>=F[0]&&G[1]<=F[1]?[F[0],G[0],G[1],F[1]]:F[0]>G[0]&&F[0]<G[1]?[G[0],F[0],G[1],F[1]]:[F[0],G[0],F[1],G[1]]:F;if(0!==G.length)return G}return[]}var g={};return g.computeDiscriminant=function(a,b,c,d,e){var f=a*a,g=f*a,h=b*b,i=h*b,j=c*c,k=j*c,l=d*d,m=l*d,n=e*e,o=n*e,p=h*j*l-4*i*m-4*a*k*l+18*a*b*c*m-27*f*l*l+256*g*o+e*(18*i*c*d-4*h*k+16*a*j*j-80*a*b*j*d-6*a*h*l+144*f*c*l)+n*(144*a*h*c-27*h*h-128*f*j-192*f*b*d);return p},g.computeRealRoots=function(b,d,g,h,i){if(Math.abs(b)<c.EPSILON15)return a.computeRealRoots(d,g,h,i);var j=d/b,k=g/b,l=h/b,m=i/b,n=0>j?1:0;switch(n+=0>k?n+1:n,n+=0>l?n+1:n,n+=0>m?n+1:n){case 0:return e(j,k,l,m);case 1:return f(j,k,l,m);case 2:return f(j,k,l,m);case 3:return e(j,k,l,m);case 4:return e(j,k,l,m);case 5:return f(j,k,l,m);case 6:return e(j,k,l,m);case 7:return e(j,k,l,m);case 8:return f(j,k,l,m);case 9:return e(j,k,l,m);case 10:return e(j,k,l,m);case 11:return f(j,k,l,m);case 12:return e(j,k,l,m);case 13:return e(j,k,l,m);case 14:return e(j,k,l,m);case 15:return e(j,k,l,m);default:return void 0}},g}),c("Core/Ray",["./Cartesian3","./defaultValue","./defined","./DeveloperError"],function(a,b,c){"use strict";var d=function(c,d){d=a.clone(b(d,a.ZERO)),a.equals(d,a.ZERO)||a.normalize(d,d),this.origin=a.clone(b(c,a.ZERO)),this.direction=d};return d.getPoint=function(b,d,e){return c(e)||(e=new a),e=a.multiplyByScalar(b.direction,d,e),a.add(b.origin,e,e)},d}),c("Core/IntersectionTests",["./Cartesian3","./Cartographic","./defaultValue","./defined","./DeveloperError","./Math","./Matrix3","./QuadraticRealPolynomial","./QuarticRealPolynomial","./Ray"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(b,d,e,g,h){h=c(h,!1);var i,j,k,l,m,n=b.origin,o=b.direction,p=a.subtract(e,d,q),v=a.subtract(g,d,r),w=a.cross(o,v,s),x=a.dot(p,w);if(h){if(x<f.EPSILON6)return void 0;if(i=a.subtract(n,d,t),k=a.dot(i,w),0>k||k>x)return void 0;if(j=a.cross(i,p,u),l=a.dot(o,j),0>l||k+l>x)return void 0;m=a.dot(v,j)/x}else{if(Math.abs(x)<f.EPSILON6)return void 0;var y=1/x;if(i=a.subtract(n,d,t),k=a.dot(i,w)*y,0>k||k>1)return void 0;if(j=a.cross(i,p,u),l=a.dot(o,j)*y,0>l||k+l>1)return void 0;m=a.dot(v,j)*y}return m}function l(a,b,c,d){var e=b*b-4*a*c;if(0>e)return void 0;if(e>0){var f=1/(2*a),g=Math.sqrt(e),h=(-b+g)*f,i=(-b-g)*f;return i>h?(d.root0=h,d.root1=i):(d.root0=i,d.root1=h),d}var j=-b/(2*a);return 0===j?void 0:(d.root0=d.root1=j,d)}function m(b,c,e){d(e)||(e={});var f=b.origin,g=b.direction,h=c.center,i=c.radius*c.radius,j=a.subtract(f,h,s),k=a.dot(g,g),m=2*a.dot(g,j),n=a.magnitudeSquared(j)-i,o=l(k,m,n,w);return d(o)?(e.start=o.root0,e.stop=o.root1,e):void 0}function n(a,b,c){var d=a+b;return f.sign(a)!==f.sign(b)&&Math.abs(d/Math.max(Math.abs(a),Math.abs(b)))<c?0:d}function o(b,c,d,e,j){var k,l=e*e,m=j*j,o=(b[g.COLUMN1ROW1]-b[g.COLUMN2ROW2])*m,p=j*(e*n(b[g.COLUMN1ROW0],b[g.COLUMN0ROW1],f.EPSILON15)+c.y),q=b[g.COLUMN0ROW0]*l+b[g.COLUMN2ROW2]*m+e*c.x+d,r=m*n(b[g.COLUMN2ROW1],b[g.COLUMN1ROW2],f.EPSILON15),s=j*(e*n(b[g.COLUMN2ROW0],b[g.COLUMN0ROW2])+c.z),t=[];if(0===s&&0===r){if(k=h.computeRealRoots(o,p,q),0===k.length)return t;var u=k[0],v=Math.sqrt(Math.max(1-u*u,0));if(t.push(new a(e,j*u,j*-v)),t.push(new a(e,j*u,j*v)),2===k.length){var w=k[1],x=Math.sqrt(Math.max(1-w*w,0));t.push(new a(e,j*w,j*-x)),t.push(new a(e,j*w,j*x))}return t}var y=s*s,z=r*r,A=o*o,B=s*r,C=A+z,D=2*(p*o+B),E=2*q*o+p*p-z+y,F=2*(q*p-B),G=q*q-y;if(0===C&&0===D&&0===E&&0===F)return t;k=i.computeRealRoots(C,D,E,F,G);var H=k.length;if(0===H)return t;for(var I=0;H>I;++I){var J,K=k[I],L=K*K,M=Math.max(1-L,0),N=Math.sqrt(M);J=f.sign(o)===f.sign(q)?n(o*L+q,p*K,f.EPSILON12):f.sign(q)===f.sign(p*K)?n(o*L,p*K+q,f.EPSILON12):n(o*L+p*K,q,f.EPSILON12);var O=n(r*K,s,f.EPSILON15),P=J*O;0>P?t.push(new a(e,j*K,j*N)):P>0?t.push(new a(e,j*K,j*-N)):0!==N?(t.push(new a(e,j*K,j*-N)),t.push(new a(e,j*K,j*N)),++I):t.push(new a(e,j*K,j*N))}return t}var p={};p.rayPlane=function(b,c,e){d(e)||(e=new a);var g=b.origin,h=b.direction,i=c.normal,j=a.dot(i,h);if(Math.abs(j)<f.EPSILON15)return void 0;var k=(-c.distance-a.dot(i,g))/j;return 0>k?void 0:(e=a.multiplyByScalar(h,k,e),a.add(g,e,e))};var q=new a,r=new a,s=new a,t=new a,u=new a;p.rayTriangle=function(b,c,e,f,g,h){var i=k(b,c,e,f,g);return!d(i)||0>i?void 0:(d(h)||(h=new a),a.multiplyByScalar(b.direction,i,h),a.add(b.origin,h,h))};var v=new j;p.lineSegmentTriangle=function(b,c,e,f,g,h,i){var j=v;a.clone(b,j.origin),a.subtract(c,b,j.direction),a.normalize(j.direction,j.direction);var l=k(j,e,f,g,h);return!d(l)||0>l||l>a.distance(b,c)?void 0:(d(i)||(i=new a),a.multiplyByScalar(j.direction,l,i),a.add(j.origin,i,i))};var w={root0:0,root1:0};p.raySphere=function(a,b,c){return c=m(a,b,c),!d(c)||c.stop<0?void 0:(c.start=Math.max(c.start,0),c)};var x=new j;p.lineSegmentSphere=function(b,c,e,f){var g=x;a.clone(b,g.origin);var h=a.subtract(c,b,g.direction),i=a.magnitude(h);return a.normalize(h,h),f=m(g,e,f),!d(f)||f.stop<0||f.start>i?void 0:(f.start=Math.max(f.start,0),f.stop=Math.min(f.stop,i),f)};var y=new a,z=new a;p.rayEllipsoid=function(b,c){var d,e,f,g,h,i=c.oneOverRadii,j=a.multiplyComponents(i,b.origin,y),k=a.multiplyComponents(i,b.direction,z),l=a.magnitudeSquared(j),m=a.dot(j,k);if(l>1){if(m>=0)return void 0;var n=m*m;if(d=l-1,e=a.magnitudeSquared(k),f=e*d,f>n)return void 0;if(n>f){g=m*m-f,h=-m+Math.sqrt(g);var o=h/e,p=d/h;return p>o?{start:o,stop:p}:{start:p,stop:o}}var q=Math.sqrt(d/e);return{start:q,stop:q}}return 1>l?(d=l-1,e=a.magnitudeSquared(k),f=e*d,g=m*m-f,h=-m+Math.sqrt(g),{start:0,stop:h/e}):0>m?(e=a.magnitudeSquared(k),{start:0,stop:-m/e}):void 0};var A=new a,B=new a,C=new a,D=new a,E=new a,F=new g,G=new g,H=new g,I=new g,J=new g,K=new g,L=new g,M=new a,N=new a,O=new b;p.grazingAltitudeLocation=function(b,c){var e=b.origin,h=b.direction,i=c.geodeticSurfaceNormal(e);if(a.dot(h,i)>=0)return e;var j=d(this.rayEllipsoid(b,c)),k=c.transformPositionToScaledSpace(h),l=a.normalize(k,A),m=a.mostOrthogonalAxis(k,D),n=a.normalize(a.cross(m,l,B),B),p=a.normalize(a.cross(l,n,C),C),q=F;q[0]=l.x,q[1]=l.y,q[2]=l.z,q[3]=n.x,q[4]=n.y,q[5]=n.z,q[6]=p.x,q[7]=p.y,q[8]=p.z;var r=g.transpose(q,G),s=g.fromScale(c.radii,H),t=g.fromScale(c.oneOverRadii,I),u=J;u[0]=0,u[1]=-h.z,u[2]=h.y,u[3]=h.z,u[4]=0,u[5]=-h.x,u[6]=-h.y,u[7]=h.x,u[8]=0;var v,w,x=g.multiply(g.multiply(r,t,K),u,K),y=g.multiply(g.multiply(x,s,L),q,L),z=g.multiplyByVector(x,e,E),P=o(y,a.negate(z,A),0,0,1),Q=P.length;if(Q>0){for(var R=a.clone(a.ZERO,N),S=Number.NEGATIVE_INFINITY,T=0;Q>T;++T){v=g.multiplyByVector(s,g.multiplyByVector(q,P[T],M),M);var U=a.normalize(a.subtract(v,e,D),D),V=a.dot(U,h);V>S&&(S=V,R=a.clone(v,R))}var W=c.cartesianToCartographic(R,O);return S=f.clamp(S,0,1),w=a.magnitude(a.subtract(R,e,D))*Math.sqrt(1-S*S),w=j?-w:w,W.height=w,c.cartographicToCartesian(W)}return void 0};var P=new a;return p.lineSegmentPlane=function(b,c,e,g){d(g)||(g=new a);var h=a.subtract(c,b,P),i=e.normal,j=a.dot(i,h);if(Math.abs(j)<f.EPSILON6)return void 0;var k=a.dot(i,b),l=-(e.distance+k)/j;return 0>l||l>1?void 0:(a.multiplyByScalar(h,l,g),a.add(b,g,g),g)},p.trianglePlaneIntersection=function(b,c,d,e){var f=e.normal,g=e.distance,h=a.dot(f,b)+g<0,i=a.dot(f,c)+g<0,j=a.dot(f,d)+g<0,k=0;k+=h?1:0,k+=i?1:0,k+=j?1:0;var l,m;if((1===k||2===k)&&(l=new a,m=new a),1===k){if(h)return p.lineSegmentPlane(b,c,e,l),p.lineSegmentPlane(b,d,e,m),{positions:[b,c,d,l,m],indices:[0,3,4,1,2,4,1,4,3]};if(i)return p.lineSegmentPlane(c,d,e,l),p.lineSegmentPlane(c,b,e,m),{positions:[b,c,d,l,m],indices:[1,3,4,2,0,4,2,4,3]};if(j)return p.lineSegmentPlane(d,b,e,l),p.lineSegmentPlane(d,c,e,m),{positions:[b,c,d,l,m],indices:[2,3,4,0,1,4,0,4,3]}}else if(2===k){if(!h)return p.lineSegmentPlane(c,b,e,l),p.lineSegmentPlane(d,b,e,m),{positions:[b,c,d,l,m],indices:[1,2,4,1,4,3,0,3,4]};if(!i)return p.lineSegmentPlane(d,c,e,l),p.lineSegmentPlane(b,c,e,m),{positions:[b,c,d,l,m],indices:[2,0,4,2,4,3,1,3,4]};if(!j)return p.lineSegmentPlane(b,d,e,l),p.lineSegmentPlane(c,d,e,m),{positions:[b,c,d,l,m],indices:[0,1,4,0,4,3,2,3,4]}}return void 0},p}),c("Core/Plane",["./Cartesian3","./defined","./DeveloperError"],function(a,b){"use strict";var c=function(b,c){this.normal=a.clone(b),this.distance=c};return c.fromPointNormal=function(d,e,f){var g=-a.dot(e,d);return b(f)?(a.clone(e,f.normal),f.distance=g,f):new c(e,g)},c.getPointDistance=function(b,c){return a.dot(b.normal,c)+b.distance},c}),c("Core/Tipsify",["./defaultValue","./defined","./DeveloperError"],function(a,b){"use strict";var c={};return c.calculateACMR=function(c){c=a(c,a.EMPTY_OBJECT);var d=c.indices,e=c.maximumIndex,f=a(c.cacheSize,24),g=d.length;if(!b(e)){e=0;for(var h=0,i=d[h];g>h;)i>e&&(e=i),++h,i=d[h]}for(var j=[],k=0;e+1>k;k++)j[k]=0;for(var l=f+1,m=0;g>m;++m)l-j[d[m]]>f&&(j[d[m]]=l,++l);return(l-f+1)/(g/3)},c.tipsify=function(c){function d(a,b,c,d){for(;b.length>=1;){var e=b[b.length-1];if(b.splice(b.length-1,1),a[e].numLiveTriangles>0)return e}for(;d>f;){if(a[f].numLiveTriangles>0)return++f,f-1;++f}return-1}function e(a,b,c,e,f,g,h){for(var i,j=-1,k=-1,l=0;l<c.length;){var m=c[l];e[m].numLiveTriangles&&(i=0,f-e[m].timeStamp+2*e[m].numLiveTriangles<=b&&(i=f-e[m].timeStamp),(i>k||-1===k)&&(k=i,j=m)),++l}return-1===j?d(e,g,a,h):j}c=a(c,a.EMPTY_OBJECT);var f,g=c.indices,h=c.maximumIndex,i=a(c.cacheSize,24),j=g.length,k=0,l=0,m=g[l],n=j;if(b(h))k=h+1;else{for(;n>l;)m>k&&(k=m),++l,m=g[l];if(-1===k)return 0;++k}for(var o=[],p=0;k>p;p++)o[p]={numLiveTriangles:0,timeStamp:0,vertexTriangles:[]};l=0;for(var q=0;n>l;)o[g[l]].vertexTriangles.push(q),++o[g[l]].numLiveTriangles,o[g[l+1]].vertexTriangles.push(q),++o[g[l+1]].numLiveTriangles,o[g[l+2]].vertexTriangles.push(q),++o[g[l+2]].numLiveTriangles,++q,l+=3;var r=0,s=i+1;f=1;var t,u,v=[],w=[],x=0,y=[],z=j/3,A=[];for(p=0;z>p;p++)A[p]=!1;for(var B,C;-1!==r;){v=[],u=o[r],C=u.vertexTriangles.length;for(var D=0;C>D;++D)if(q=u.vertexTriangles[D],!A[q]){A[q]=!0,l=q+q+q;for(var E=0;3>E;++E)B=g[l],v.push(B),w.push(B),y[x]=B,++x,t=o[B],--t.numLiveTriangles,s-t.timeStamp>i&&(t.timeStamp=s,++s),++l}r=e(g,i,v,o,s,w,k)}return y},c}),c("Core/GeometryPipeline",["./AttributeCompression","./barycentricCoordinates","./BoundingSphere","./Cartesian2","./Cartesian3","./Cartesian4","./Cartographic","./ComponentDatatype","./defaultValue","./defined","./deprecationWarning","./DeveloperError","./EncodedCartesian3","./GeographicProjection","./Geometry","./GeometryAttribute","./GeometryInstance","./GeometryType","./IndexDatatype","./Intersect","./IntersectionTests","./Math","./Matrix3","./Matrix4","./Plane","./PrimitiveType","./Tipsify"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){"use strict";function B(a,b,c,d,e){a[b++]=c,a[b++]=d,a[b++]=d,a[b++]=e,a[b++]=e,a[b]=c}function C(a){for(var b=a.length,c=6*(b/3),d=s.createTypedArray(b,c),e=0,f=0;b>f;f+=3,e+=6)B(d,e,a[f],a[f+1],a[f+2]);return d}function D(a){var b=a.length;if(b>=3){var c=6*(b-2),d=s.createTypedArray(b,c);B(d,0,a[0],a[1],a[2]);for(var e=6,f=3;b>f;++f,e+=6)B(d,e,a[f-1],a[f],a[f-2]);return d}return new Uint16Array}function E(a){if(a.length>0){for(var b=a.length-1,c=6*(b-1),d=s.createTypedArray(b,c),e=a[0],f=0,g=1;b>g;++g,f+=6)B(d,f,e,a[g],a[g+1]);return d}return new Uint16Array}function F(a){var b={};for(var c in a)if(a.hasOwnProperty(c)&&j(a[c])&&j(a[c].values)){var d=a[c];b[c]=new p({componentDatatype:d.componentDatatype,componentsPerAttribute:d.componentsPerAttribute,normalize:d.normalize,values:[]})}return b}function G(a,b,c){for(var d in b)if(b.hasOwnProperty(d)&&j(b[d])&&j(b[d].values))for(var e=b[d],f=0;f<e.componentsPerAttribute;++f)a[d].values.push(e.values[c*e.componentsPerAttribute+f])}function H(a,b){if(j(b))for(var c=b.values,d=c.length,f=0;d>f;f+=3)e.unpack(c,f,ga),x.multiplyByPoint(a,ga,ga),e.pack(ga,c,f)}function I(a,b){if(j(b))for(var c=b.values,d=c.length,f=0;d>f;f+=3)e.unpack(c,f,ga),w.multiplyByVector(a,ga,ga),ga=e.normalize(ga,ga),e.pack(ga,c,f)}function J(a,b){var c,d=a.length,e={},f=a[0][b].attributes;for(c in f)if(f.hasOwnProperty(c)&&j(f[c])&&j(f[c].values)){for(var g=f[c],i=g.values.length,k=!0,l=1;d>l;++l){var m=a[l][b].attributes[c];if(!j(m)||g.componentDatatype!==m.componentDatatype||g.componentsPerAttribute!==m.componentsPerAttribute||g.normalize!==m.normalize){k=!1;break}i+=m.values.length}k&&(e[c]=new p({componentDatatype:g.componentDatatype,componentsPerAttribute:g.componentsPerAttribute,normalize:g.normalize,values:h.createTypedArray(g.componentDatatype,i)}))}return e}function K(a,b){var d,f,g,h,i=a.length;a[0].modelMatrix;var k,l,m,n=j(a[0][b].indices),p=a[0][b].primitiveType,q=J(a,b);for(d in q)if(q.hasOwnProperty(d))for(k=q[d].values,h=0,f=0;i>f;++f)for(l=a[f][b].attributes[d].values,m=l.length,g=0;m>g;++g)k[h++]=l[g];var r;if(n){var t=0;for(f=0;i>f;++f)t+=a[f][b].indices.length;var u=o.computeNumberOfVertices(new o({attributes:q,primitiveType:z.POINTS})),v=s.createTypedArray(u,t),w=0,x=0;for(f=0;i>f;++f){var y=a[f][b].indices,A=y.length;for(h=0;A>h;++h)v[w++]=x+y[h];x+=o.computeNumberOfVertices(a[f][b])}r=v}var B,C=new e,D=0;for(f=0;i>f;++f){if(B=a[f][b].boundingSphere,!j(B)){C=void 0;break}e.add(B.center,C,C)}if(j(C))for(e.divideByScalar(C,i,C),f=0;i>f;++f){B=a[f][b].boundingSphere;var E=e.magnitude(e.subtract(B.center,C,ja))+B.radius;E>D&&(D=E)}return new o({attributes:q,indices:r,primitiveType:p,boundingSphere:j(C)?new c(C,D):void 0})}function L(a){if(j(a.indices))return a;for(var b=o.computeNumberOfVertices(a),c=s.createTypedArray(b,b),d=0;b>d;++d)c[d]=d;return a.indices=c,a}function M(a){var b=o.computeNumberOfVertices(a),c=s.createTypedArray(b,3*(b-2));c[0]=1,c[1]=0,c[2]=2;for(var d=3,e=3;b>e;++e)c[d++]=e-1,c[d++]=0,c[d++]=e;return a.indices=c,a.primitiveType=z.TRIANGLES,a}function N(a){var b=o.computeNumberOfVertices(a),c=s.createTypedArray(b,3*(b-2));c[0]=0,c[1]=1,c[2]=2,b>3&&(c[3]=0,c[4]=2,c[5]=3);for(var d=6,e=3;b-1>e;e+=2)c[d++]=e,c[d++]=e-1,c[d++]=e+1,b>e+2&&(c[d++]=e,c[d++]=e+1,c[d++]=e+2);return a.indices=c,a.primitiveType=z.TRIANGLES,a}function O(a){if(j(a.indices))return a;for(var b=o.computeNumberOfVertices(a),c=s.createTypedArray(b,b),d=0;b>d;++d)c[d]=d;return a.indices=c,a}function P(a){var b=o.computeNumberOfVertices(a),c=s.createTypedArray(b,2*(b-1));c[0]=0,c[1]=1;for(var d=2,e=2;b>e;++e)c[d++]=e-1,c[d++]=e;return a.indices=c,a.primitiveType=z.LINES,a}function Q(a){var b=o.computeNumberOfVertices(a),c=s.createTypedArray(b,2*b);c[0]=0,c[1]=1;for(var d=2,e=2;b>e;++e)c[d++]=e-1,c[d++]=e;return c[d++]=b-1,c[d]=0,a.indices=c,a.primitiveType=z.LINES,a}function R(a){switch(a.primitiveType){case z.TRIANGLE_FAN:return M(a);case z.TRIANGLE_STRIP:return N(a);case z.TRIANGLES:return L(a);case z.LINE_STRIP:return P(a);case z.LINE_LOOP:return Q(a);case z.LINES:return O(a)}return a}function S(a,b){Math.abs(a.y)<v.EPSILON6&&(a.y=b?-v.EPSILON6:v.EPSILON6)}function T(a,b,c){if(0!==a.y&&0!==b.y&&0!==c.y)return S(a,a.y<0),S(b,b.y<0),S(c,c.y<0),void 0;var d,e=Math.abs(a.y),f=Math.abs(b.y),g=Math.abs(c.y);d=e>f?e>g?v.sign(a.y):v.sign(c.y):f>g?v.sign(b.y):v.sign(c.y);var h=0>d;S(a,h),S(b,h),S(c,h)}function U(a,b,c,d){e.add(a,e.multiplyByScalar(e.subtract(b,a,va),a.y/(a.y-b.y),va),c),e.clone(c,d),S(c,!0),S(d,!1)}function V(a,b,c){if(a.x>=0||b.x>=0||c.x>=0)return void 0;T(a,b,c);var d=a.y<0,e=b.y<0,f=c.y<0,g=0;g+=d?1:0,g+=e?1:0,g+=f?1:0;var h=Aa.indices;1===g?(h[1]=3,h[2]=4,h[5]=6,h[7]=6,h[8]=5,d?(U(a,b,wa,ya),U(a,c,xa,za),h[0]=0,h[3]=1,h[4]=2,h[6]=1):e?(U(b,c,wa,ya),U(b,a,xa,za),h[0]=1,h[3]=2,h[4]=0,h[6]=2):f&&(U(c,a,wa,ya),U(c,b,xa,za),h[0]=2,h[3]=0,h[4]=1,h[6]=0)):2===g&&(h[2]=4,h[4]=4,h[5]=3,h[7]=5,h[8]=6,d?e?f||(U(c,a,wa,ya),U(c,b,xa,za),h[0]=0,h[1]=1,h[3]=0,h[6]=2):(U(b,c,wa,ya),U(b,a,xa,za),h[0]=2,h[1]=0,h[3]=2,h[6]=1):(U(a,b,wa,ya),U(a,c,xa,za),h[0]=1,h[1]=2,h[3]=1,h[6]=0));var i=Aa.positions;return i[0]=a,i[1]=b,i[2]=c,i.length=3,(1===g||2===g)&&(i[3]=wa,i[4]=xa,i[5]=ya,i[6]=za,i.length=7),Aa}function W(a,b){var d=a.attributes;if(0===d.position.values.length)return void 0;for(var e in d)if(d.hasOwnProperty(e)&&j(d[e])&&j(d[e].values)){var f=d[e];f.values=h.createTypedArray(f.componentDatatype,f.values)}var g=o.computeNumberOfVertices(a);return a.indices=s.createTypedArray(g,a.indices),b&&(a.boundingSphere=c.fromVertices(d.position.values)),a}function X(a){var b=a.attributes,c={};for(var d in b)if(b.hasOwnProperty(d)&&j(b[d])&&j(b[d].values)){var e=b[d];c[d]=new p({componentDatatype:e.componentDatatype,componentsPerAttribute:e.componentsPerAttribute,normalize:e.normalize,values:[]})}return new o({attributes:c,indices:[],primitiveType:a.primitiveType})}function Y(a,b,c){var d=j(a.geometry.boundingSphere);b=W(b,d),c=W(c,d),j(c)&&!j(b)?a.geometry=c:!j(c)&&j(b)?a.geometry=b:(a.westHemisphereGeometry=b,a.eastHemisphereGeometry=c,a.geometry=void 0)}function Z(a,c,f,g,h,i,k,l,m,n,o){if(j(i)||j(k)||j(l)||j(m)){var p=e.fromArray(h,3*a,Ba),q=e.fromArray(h,3*c,Ca),r=e.fromArray(h,3*f,Da),s=b(g,p,q,r,Ea);if(j(i)){var t=e.fromArray(i,3*a,Ba),u=e.fromArray(i,3*c,Ca),v=e.fromArray(i,3*f,Da);e.multiplyByScalar(t,s.x,t),e.multiplyByScalar(u,s.y,u),e.multiplyByScalar(v,s.z,v);var w=e.add(t,u,t);e.add(w,v,w),e.normalize(w,w),e.pack(w,n.normal.values,3*o)}if(j(k)){var x=e.fromArray(k,3*a,Ba),y=e.fromArray(k,3*c,Ca),z=e.fromArray(k,3*f,Da);e.multiplyByScalar(x,s.x,x),e.multiplyByScalar(y,s.y,y),e.multiplyByScalar(z,s.z,z);var A=e.add(x,y,x);e.add(A,z,A),e.normalize(A,A),e.pack(A,n.binormal.values,3*o)}if(j(l)){var B=e.fromArray(l,3*a,Ba),C=e.fromArray(l,3*c,Ca),D=e.fromArray(l,3*f,Da);e.multiplyByScalar(B,s.x,B),e.multiplyByScalar(C,s.y,C),e.multiplyByScalar(D,s.z,D);var E=e.add(B,C,B);e.add(E,D,E),e.normalize(E,E),e.pack(E,n.tangent.values,3*o)}if(j(m)){var F=d.fromArray(m,2*a,Fa),G=d.fromArray(m,2*c,Ga),H=d.fromArray(m,2*f,Ha);d.multiplyByScalar(F,s.x,F),d.multiplyByScalar(G,s.y,G),d.multiplyByScalar(H,s.z,H);var I=d.add(F,G,F);d.add(I,H,I),d.pack(I,n.st.values,2*o)}}}function $(a,b,c,d,e,f){var g=a.position.values.length/3;if(-1!==e){var h=d[e],i=c[h];return-1===i?(c[h]=g,a.position.values.push(f.x,f.y,f.z),b.push(g),g):(b.push(i),i)}return a.position.values.push(f.x,f.y,f.z),b.push(g),g}function _(a){var b,c,d,f,g,h=a.geometry,i=h.attributes,k=i.position.values,l=j(i.normal)?i.normal.values:void 0,m=j(i.binormal)?i.binormal.values:void 0,n=j(i.tangent)?i.tangent.values:void 0,o=j(i.st)?i.st.values:void 0,p=h.indices,q=X(h),r=X(h),s=[];s.length=k.length/3;var t=[];for(t.length=k.length/3,g=0;g<s.length;++g)s[g]=-1,t[g]=-1;var u=p.length;for(g=0;u>g;g+=3){var v=p[g],w=p[g+1],x=p[g+2],y=e.fromArray(k,3*v),z=e.fromArray(k,3*w),A=e.fromArray(k,3*x),B=V(y,z,A);if(j(B)&&B.positions.length>3)for(var C=B.positions,D=B.indices,E=D.length,F=0;E>F;++F){var G=D[F],H=C[G]
;H.y<0?(b=r.attributes,c=r.indices,d=s):(b=q.attributes,c=q.indices,d=t),f=$(b,c,d,p,3>G?g+G:-1,H),Z(v,w,x,H,k,l,m,n,o,b,f)}else j(B)&&(y=B.positions[0],z=B.positions[1],A=B.positions[2]),y.y<0?(b=r.attributes,c=r.indices,d=s):(b=q.attributes,c=q.indices,d=t),f=$(b,c,d,p,g,y),Z(v,w,x,y,k,l,m,n,o,b,f),f=$(b,c,d,p,g+1,z),Z(v,w,x,z,k,l,m,n,o,b,f),f=$(b,c,d,p,g+2,A),Z(v,w,x,A,k,l,m,n,o,b,f)}Y(a,r,q)}function aa(a){var b,c=a.geometry,d=c.attributes,f=d.position.values,g=c.indices,h=X(c),i=X(c),k=g.length,l=[];l.length=f.length/3;var m=[];for(m.length=f.length/3,b=0;b<l.length;++b)l[b]=-1,m[b]=-1;for(b=0;k>b;b+=2){var n=g[b],o=g[b+1],p=e.fromArray(f,3*n,Ba),q=e.fromArray(f,3*o,Ca);Math.abs(p.y)<v.EPSILON6&&(p.y=p.y<0?-v.EPSILON6:v.EPSILON6),Math.abs(q.y)<v.EPSILON6&&(q.y=q.y<0?-v.EPSILON6:v.EPSILON6);var r=h.attributes,s=h.indices,t=m,w=i.attributes,x=i.indices,y=l,z=u.lineSegmentPlane(p,q,Ia,Da);if(j(z)){var A=e.multiplyByScalar(e.UNIT_Y,5*v.EPSILON9,Ja);p.y<0&&(e.negate(A,A),r=i.attributes,s=i.indices,t=l,w=h.attributes,x=h.indices,y=m);var B=e.add(z,A,Ka);$(r,s,t,g,b,p),$(r,s,t,g,-1,B),e.negate(A,A),e.add(z,A,B),$(w,x,y,g,-1,B),$(w,x,y,g,b+1,q)}else{var C,D,E;p.y<0?(C=i.attributes,D=i.indices,E=l):(C=h.attributes,D=h.indices,E=m),$(C,D,E,g,b,p),$(C,D,E,g,b+1,q)}}Y(a,i,h)}function ba(a){var b=a.geometry,c=b.attributes,g=c.position.values,h=c.prevPosition.values,i=c.nextPosition.values,k=c.expandAndWidth.values;b.indices;var l,m,n,o=j(c.st)?c.st.values:void 0,p=j(c.color)?c.color.values:void 0,q=X(b),r=X(b),s=g.length/3;for(l=0;s>l;l+=4){var t=l,w=l+1,x=l+2,y=l+3,z=e.fromArray(g,3*t,Na),A=e.fromArray(g,3*w,Oa),B=e.fromArray(g,3*x,Pa),C=e.fromArray(g,3*y,Qa);Math.abs(z.y)<v.EPSILON6&&(z.y=v.EPSILON6*(B.y<0?-1:1),A.y=z.y),Math.abs(B.y)<v.EPSILON6&&(B.y=v.EPSILON6*(z.y<0?-1:1),C.y=B.y);var D=q.attributes,E=q.indices,F=r.attributes,G=r.indices,H=u.lineSegmentPlane(z,B,Ia,Ra);if(j(H)){var I=e.multiplyByScalar(e.UNIT_Y,5*v.EPSILON9,Sa);z.y<0&&(e.negate(I,I),D=r.attributes,E=r.indices,F=q.attributes,G=q.indices);var J=e.add(H,I,Ta);for(D.position.values.push(z.x,z.y,z.z,A.x,A.y,A.z),D.position.values.push(J.x,J.y,J.z),D.position.values.push(J.x,J.y,J.z),e.negate(I,I),e.add(H,I,J),F.position.values.push(J.x,J.y,J.z),F.position.values.push(J.x,J.y,J.z),F.position.values.push(B.x,B.y,B.z,C.x,C.y,C.z),m=3*t;3*t+6>m;++m)D.prevPosition.values.push(h[m]);for(D.prevPosition.values.push(z.x,z.y,z.z,z.x,z.y,z.z),F.prevPosition.values.push(z.x,z.y,z.z,z.x,z.y,z.z),m=3*x;3*x+6>m;++m)F.prevPosition.values.push(h[m]);for(m=3*t;3*t+6>m;++m)D.nextPosition.values.push(i[m]);for(D.nextPosition.values.push(B.x,B.y,B.z,B.x,B.y,B.z),F.nextPosition.values.push(B.x,B.y,B.z,B.x,B.y,B.z),m=3*x;3*x+6>m;++m)F.nextPosition.values.push(i[m]);var K=d.fromArray(k,2*t,La),L=Math.abs(K.y);D.expandAndWidth.values.push(-1,L,1,L),D.expandAndWidth.values.push(-1,-L,1,-L),F.expandAndWidth.values.push(-1,L,1,L),F.expandAndWidth.values.push(-1,-L,1,-L);var M=e.magnitudeSquared(e.subtract(H,z,Qa));if(M/=e.magnitudeSquared(e.subtract(B,z,Qa)),j(p)){var N=f.fromArray(p,4*t,Ua),O=f.fromArray(p,4*x,Ua),P=v.lerp(N.x,O.x,M),Q=v.lerp(N.y,O.y,M),R=v.lerp(N.z,O.z,M),S=v.lerp(N.w,O.w,M);for(m=4*t;4*t+8>m;++m)D.color.values.push(p[m]);for(D.color.values.push(P,Q,R,S),D.color.values.push(P,Q,R,S),F.color.values.push(P,Q,R,S),F.color.values.push(P,Q,R,S),m=4*x;4*x+8>m;++m)F.color.values.push(p[m])}if(j(o)){var T=d.fromArray(o,2*t,La),U=d.fromArray(o,2*(l+3),Ma),V=v.lerp(T.x,U.x,M);for(m=2*t;2*t+4>m;++m)D.st.values.push(o[m]);for(D.st.values.push(V,T.y),D.st.values.push(V,U.y),F.st.values.push(V,T.y),F.st.values.push(V,U.y),m=2*x;2*x+4>m;++m)F.st.values.push(o[m])}n=D.position.values.length/3-4,E.push(n,n+2,n+1),E.push(n+1,n+2,n+3),n=F.position.values.length/3-4,G.push(n,n+2,n+1),G.push(n+1,n+2,n+3)}else{var W,Z;for(z.y<0?(W=r.attributes,Z=r.indices):(W=q.attributes,Z=q.indices),W.position.values.push(z.x,z.y,z.z),W.position.values.push(A.x,A.y,A.z),W.position.values.push(B.x,B.y,B.z),W.position.values.push(C.x,C.y,C.z),m=3*l;3*l+12>m;++m)W.prevPosition.values.push(h[m]),W.nextPosition.values.push(i[m]);for(m=2*l;2*l+8>m;++m)W.expandAndWidth.values.push(k[m]),j(o)&&W.st.values.push(o[m]);if(j(p))for(m=4*l;4*l+16>m;++m)W.color.values.push(p[m]);n=W.position.values.length/3-4,Z.push(n,n+2,n+1),Z.push(n+1,n+2,n+3)}}Y(a,r,q)}var ca={};ca.toWireframe=function(a){var b=a.indices;if(j(b)){switch(a.primitiveType){case z.TRIANGLES:a.indices=C(b);break;case z.TRIANGLE_STRIP:a.indices=D(b);break;case z.TRIANGLE_FAN:a.indices=E(b);break;default:throw new l("geometry.primitiveType must be TRIANGLES, TRIANGLE_STRIP, or TRIANGLE_FAN.")}a.primitiveType=z.LINES}return a},ca.createLineSegmentsForVectors=function(a,b,d){b=i(b,"normal"),d=i(d,1e4);for(var e=a.attributes.position.values,f=a.attributes[b].values,g=e.length,k=new Float64Array(2*g),l=0,m=0;g>m;m+=3)k[l++]=e[m],k[l++]=e[m+1],k[l++]=e[m+2],k[l++]=e[m]+f[m]*d,k[l++]=e[m+1]+f[m+1]*d,k[l++]=e[m+2]+f[m+2]*d;var n,q=a.boundingSphere;return j(q)&&(n=new c(q.center,q.radius+d)),new o({attributes:{position:new p({componentDatatype:h.DOUBLE,componentsPerAttribute:3,values:k})},primitiveType:z.LINES,boundingSphere:n})},ca.createAttributeLocations=function(a){var b,c=["position","positionHigh","positionLow","position3DHigh","position3DLow","position2DHigh","position2DLow","pickColor","normal","st","binormal","tangent","compressedAttributes"],d=a.attributes,e={},f=0,g=c.length;for(b=0;g>b;++b){var h=c[b];j(d[h])&&(e[h]=f++)}for(var i in d)d.hasOwnProperty(i)&&!j(e[i])&&(e[i]=f++);return e},ca.reorderForPreVertexCache=function(a){var b=o.computeNumberOfVertices(a),c=a.indices;if(j(c)){for(var d=new Int32Array(b),e=0;b>e;e++)d[e]=-1;for(var f,g=c,i=g.length,k=s.createTypedArray(b,i),l=0,m=0,n=0;i>l;)f=d[g[l]],-1!==f?k[m]=f:(f=g[l],d[f]=n,k[m]=n,++n),++l,++m;a.indices=k;var p=a.attributes;for(var q in p)if(p.hasOwnProperty(q)&&j(p[q])&&j(p[q].values)){for(var r=p[q],t=r.values,u=0,v=r.componentsPerAttribute,w=h.createTypedArray(r.componentDatatype,n*v);b>u;){var x=d[u];if(-1!==x)for(e=0;v>e;e++)w[v*x+e]=t[v*u+e];++u}r.values=w}}return a},ca.reorderForPostVertexCache=function(a,b){var c=a.indices;if(a.primitiveType===z.TRIANGLES&&j(c)){for(var d=c.length,e=0,f=0;d>f;f++)c[f]>e&&(e=c[f]);a.indices=A.tipsify({indices:c,maximumIndex:e,cacheSize:b})}return a},ca.fitToUnsignedShortIndices=function(a){var b=[],c=o.computeNumberOfVertices(a);if(j(a.indices)&&c>v.SIXTY_FOUR_KILOBYTES){var d,e=[],f=[],g=0,h=F(a.attributes),i=a.indices,k=i.length;a.primitiveType===z.TRIANGLES?d=3:a.primitiveType===z.LINES?d=2:a.primitiveType===z.POINTS&&(d=1);for(var l=0;k>l;l+=d){for(var m=0;d>m;++m){var n=i[l+m],p=e[n];j(p)||(p=g++,e[n]=p,G(h,a.attributes,n)),f.push(p)}g+d>v.SIXTY_FOUR_KILOBYTES&&(b.push(new o({attributes:h,indices:f,primitiveType:a.primitiveType,boundingSphere:a.boundingSphere,boundingSphereCV:a.boundingSphereCV})),e=[],f=[],g=0,h=F(a.attributes))}0!==f.length&&b.push(new o({attributes:h,indices:f,primitiveType:a.primitiveType,boundingSphere:a.boundingSphere,boundingSphereCV:a.boundingSphereCV}))}else b.push(a);return b};var da=new e,ea=new g;ca.projectTo2D=function(a,b,c,d,f){var g=a.attributes[b];f=j(f)?f:new n;for(var i=f.ellipsoid,k=g.values,m=new Float64Array(k.length),o=0,q=0;q<k.length;q+=3){var r=e.fromArray(k,q,da),s=i.cartesianToCartographic(r,ea);if(!j(s))throw new l("Could not project point ("+r.x+", "+r.y+", "+r.z+") to 2D.");var t=f.project(s,da);m[o++]=t.x,m[o++]=t.y,m[o++]=t.z}return a.attributes[c]=g,a.attributes[d]=new p({componentDatatype:h.DOUBLE,componentsPerAttribute:3,values:m}),delete a.attributes[b],a};var fa={high:0,low:0};ca.encodeAttribute=function(a,b,c,d){for(var e=a.attributes[b],f=e.values,g=f.length,i=new Float32Array(g),j=new Float32Array(g),k=0;g>k;++k)m.encode(f[k],fa),i[k]=fa.high,j[k]=fa.low;var l=e.componentsPerAttribute;return a.attributes[c]=new p({componentDatatype:h.FLOAT,componentsPerAttribute:l,values:i}),a.attributes[d]=new p({componentDatatype:h.FLOAT,componentsPerAttribute:l,values:j}),delete a.attributes[b],a};var ga=new e,ha=new x,ia=new w;ca.transformToWorldCoordinates=function(a){var b=a.modelMatrix;if(x.equals(b,x.IDENTITY))return a;var d=a.geometry.attributes;H(b,d.position),H(b,d.prevPosition),H(b,d.nextPosition),(j(d.normal)||j(d.binormal)||j(d.tangent))&&(x.inverse(b,ha),x.transpose(ha,ha),x.getRotation(ha,ia),I(ia,d.normal),I(ia,d.binormal),I(ia,d.tangent));var e=a.geometry.boundingSphere;return j(e)&&(a.geometry.boundingSphere=c.transform(e,b,e)),a.modelMatrix=x.clone(x.IDENTITY),a};var ja=new e;ca.combineInstances=function(a){for(var b=[],c=[],d=a.length,e=0;d>e;++e){var f=a[e];j(f.geometry)?b.push(f):c.push(f)}var g=[];return b.length>0&&g.push(K(b,"geometry")),c.length>0&&(g.push(K(c,"westHemisphereGeometry")),g.push(K(c,"eastHemisphereGeometry"))),g},ca.combine=function(a){k("GeometryPipeline.combine","GeometryPipeline.combine was deprecated in Cesium 1.4. It will be removed in Cesium 1.5. Use GeometryPipeline.combineInstances.");for(var b=[],c=a.length,d=0;c>d;++d){var e=a[d];j(e.geometry)?b.push(e):(b.push(new q({geometry:e.westHemisphereGeometry,attributes:e.attributes,modelMatrix:e.modelMatrix,id:e.id,pickPrimitive:e.pickPrimitive})),b.push(new q({geometry:e.eastHemisphereGeometry,attributes:e.attributes,modelMatrix:e.modelMatrix,id:e.id,pickPrimitive:e.pickPrimitive})))}return K(b,"geometry")};var ka=new e,la=new e,ma=new e,na=new e;ca.computeNormal=function(a){for(var b=a.indices,c=a.attributes,d=c.position.values,f=c.position.values.length/3,g=b.length,i=new Array(f),j=new Array(g/3),k=new Array(g),l=0;f>l;l++)i[l]={indexOffset:0,count:0,currentCount:0};var m=0;for(l=0;g>l;l+=3){var n=b[l],o=b[l+1],q=b[l+2],r=3*n,s=3*o,t=3*q;la.x=d[r],la.y=d[r+1],la.z=d[r+2],ma.x=d[s],ma.y=d[s+1],ma.z=d[s+2],na.x=d[t],na.y=d[t+1],na.z=d[t+2],i[n].count++,i[o].count++,i[q].count++,e.subtract(ma,la,ma),e.subtract(na,la,na),j[m]=e.cross(ma,na,new e),m++}var u=0;for(l=0;f>l;l++)i[l].indexOffset+=u,u+=i[l].count;m=0;var v;for(l=0;g>l;l+=3){v=i[b[l]];var w=v.indexOffset+v.currentCount;k[w]=m,v.currentCount++,v=i[b[l+1]],w=v.indexOffset+v.currentCount,k[w]=m,v.currentCount++,v=i[b[l+2]],w=v.indexOffset+v.currentCount,k[w]=m,v.currentCount++,m++}var x=new Float32Array(3*f);for(l=0;f>l;l++){var y=3*l;if(v=i[l],v.count>0){for(e.clone(e.ZERO,ka),m=0;m<v.count;m++)e.add(ka,j[k[v.indexOffset+m]],ka);e.normalize(ka,ka),x[y]=ka.x,x[y+1]=ka.y,x[y+2]=ka.z}else x[y]=0,x[y+1]=0,x[y+2]=1}return a.attributes.normal=new p({componentDatatype:h.FLOAT,componentsPerAttribute:3,values:x}),a};var oa=new e,pa=new e,qa=new e;ca.computeBinormalAndTangent=function(a){a.attributes;for(var b=a.indices,c=a.attributes.position.values,d=a.attributes.normal.values,f=a.attributes.st.values,g=a.attributes.position.values.length/3,i=b.length,j=new Array(3*g),k=0;k<j.length;k++)j[k]=0;var l,m,n;for(k=0;i>k;k+=3){var o=b[k],q=b[k+1],r=b[k+2];l=3*o,m=3*q,n=3*r;var s=2*o,t=2*q,u=2*r,v=c[l],w=c[l+1],x=c[l+2],y=f[s],z=f[s+1],A=f[t+1]-z,B=f[u+1]-z,C=1/((f[t]-y)*B-(f[u]-y)*A),D=(B*(c[m]-v)-A*(c[n]-v))*C,E=(B*(c[m+1]-w)-A*(c[n+1]-w))*C,F=(B*(c[m+2]-x)-A*(c[n+2]-x))*C;j[l]+=D,j[l+1]+=E,j[l+2]+=F,j[m]+=D,j[m+1]+=E,j[m+2]+=F,j[n]+=D,j[n+1]+=E,j[n+2]+=F}var G=new Float32Array(3*g),H=new Float32Array(3*g);for(k=0;g>k;k++){l=3*k,m=l+1,n=l+2;var I=e.fromArray(d,l,oa),J=e.fromArray(j,l,qa),K=e.dot(I,J);e.multiplyByScalar(I,K,pa),e.normalize(e.subtract(J,pa,J),J),H[l]=J.x,H[m]=J.y,H[n]=J.z,e.normalize(e.cross(I,J,J),J),G[l]=J.x,G[m]=J.y,G[n]=J.z}return a.attributes.tangent=new p({componentDatatype:h.FLOAT,componentsPerAttribute:3,values:H}),a.attributes.binormal=new p({componentDatatype:h.FLOAT,componentsPerAttribute:3,values:G}),a};var ra=new d,sa=new e,ta=new e,ua=new e;ca.compressVertices=function(b){var c=b.attributes.normal,f=b.attributes.st;if(!j(c)&&!j(f))return b;var g,i,k,l,m=b.attributes.tangent,n=b.attributes.binormal;j(c)&&(g=c.values),j(f)&&(i=f.values),j(m)&&(k=m.values),n&&(l=n.values);var o=j(g)?g.length:i.length,q=j(g)?3:2,r=o/q,s=r,t=j(i)&&j(g)?2:1;t+=j(k)||j(l)?1:0,s*=t;for(var u=new Float32Array(s),v=0,w=0;r>w;++w){j(i)&&(d.fromArray(i,2*w,ra),u[v++]=a.compressTextureCoordinates(ra));var x=3*w;j(g)&&j(k)&&j(l)?(e.fromArray(g,x,sa),e.fromArray(k,x,ta),e.fromArray(l,x,ua),a.octPack(sa,ta,ua,ra),u[v++]=ra.x,u[v++]=ra.y):(j(g)&&(e.fromArray(g,x,sa),u[v++]=a.octEncodeFloat(sa)),j(k)&&(e.fromArray(k,x,sa),u[v++]=a.octEncodeFloat(sa)),j(l)&&(e.fromArray(l,x,sa),u[v++]=a.octEncodeFloat(sa)))}return b.attributes.compressedAttributes=new p({componentDatatype:h.FLOAT,componentsPerAttribute:t,values:u}),j(g)&&delete b.attributes.normal,j(i)&&delete b.attributes.st,j(k)&&delete b.attributes.tangent,j(l)&&delete b.attributes.binormal,b};var va=new e,wa=new e,xa=new e,ya=new e,za=new e,Aa={positions:new Array(7),indices:new Array(9)},Ba=new e,Ca=new e,Da=new e,Ea=new e,Fa=new d,Ga=new d,Ha=new d,Ia=y.fromPointNormal(e.ZERO,e.UNIT_Y),Ja=new e,Ka=new e,La=new d,Ma=new d,Na=new e,Oa=new e,Pa=new e,Qa=new e,Ra=new e,Sa=new e,Ta=new e,Ua=new f;return new f,ca.splitLongitude=function(a){var b=a.geometry,d=b.boundingSphere;if(j(d)){var e=d.center.x-d.radius;if(e>0||c.intersect(d,f.UNIT_Y)!==t.INTERSECTING)return a}if(b.geometryType!==r.NONE)switch(b.geometryType){case r.POLYLINES:ba(a);break;case r.TRIANGLES:_(a);break;case r.LINES:aa(a)}else R(b),b.primitiveType===z.TRIANGLES?_(a):b.primitiveType===z.LINES&&aa(a);return a},ca.wrapLongitude=function(a){k("GeometryPipeline.wrapLongitude","GeometryPipeline.wrapLongitude was deprecated in Cesium 1.4. It will be removed in Cesium 1.5. Use GeometryPipeline.splitLongitude.");var b=ca.splitLongitude(new q({geometry:a}));if(j(b.geometry))return b.geometry;var c=[b,new q({geometry:b.westHemisphereGeometry})];return b.geometry=b.eastHemisphereGeometry,delete b.eastHemisphereGeometry,delete b.westHemisphereGeometry,ca.combine(c)},ca}),c("Core/EllipseGeometry",["./BoundingSphere","./Cartesian2","./Cartesian3","./Cartographic","./ComponentDatatype","./defaultValue","./defined","./DeveloperError","./EllipseGeometryLibrary","./Ellipsoid","./GeographicProjection","./Geometry","./GeometryAttribute","./GeometryAttributes","./GeometryInstance","./GeometryPipeline","./IndexDatatype","./Math","./Matrix3","./PrimitiveType","./Quaternion","./VertexFormat"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){"use strict";function w(a,b,d){var f=b.vertexFormat,g=b.center,h=b.semiMajorAxis,j=b.ellipsoid,l=b.stRotation,o=d?2*(a.length/3):a.length/3,p=f.st?new Float32Array(2*o):void 0,q=f.normal?new Float32Array(3*o):void 0,r=f.tangent?new Float32Array(3*o):void 0,t=f.binormal?new Float32Array(3*o):void 0,v=0,w=J,x=K,y=L,z=new k(j),A=z.project(j.cartesianToCartographic(g,M),N),B=j.scaleToGeodeticSurface(g,C);j.geodeticSurfaceNormal(B,B);for(var F=u.fromAxisAngle(B,l,I),O=s.fromQuaternion(F,H),P=a.length,Q=d?P:0,R=2*(Q/3),S=0;P>S;S+=3){var T=S+1,U=S+2,V=c.fromArray(a,S,C);if(f.st){var W=s.multiplyByVector(O,V,D),X=z.project(j.cartesianToCartographic(W,M),E);c.subtract(X,A,X),G.x=(X.x+h)/(2*h),G.y=(X.y+h)/(2*h),d&&(p[v+R]=G.x,p[v+1+R]=G.y),p[v++]=G.x,p[v++]=G.y}w=j.geodeticSurfaceNormal(V,w),(f.normal||f.tangent||f.binormal)&&((f.tangent||f.binormal)&&(x=c.cross(c.UNIT_Z,w,x),s.multiplyByVector(O,x,x)),f.normal&&(q[S]=w.x,q[T]=w.y,q[U]=w.z,d&&(q[S+Q]=-w.x,q[T+Q]=-w.y,q[U+Q]=-w.z)),f.tangent&&(r[S]=x.x,r[T]=x.y,r[U]=x.z,d&&(r[S+Q]=-x.x,r[T+Q]=-x.y,r[U+Q]=-x.z)),f.binormal&&(y=c.cross(w,x,y),t[S]=y.x,t[T]=y.y,t[U]=y.z,d&&(t[S+Q]=y.x,t[T+Q]=y.y,t[U+Q]=y.z)))}var Y=new n;if(f.position){var Z=i.raisePositionsToHeight(a,b,d);Y.position=new m({componentDatatype:e.DOUBLE,componentsPerAttribute:3,values:Z})}return f.st&&(Y.st=new m({componentDatatype:e.FLOAT,componentsPerAttribute:2,values:p})),f.normal&&(Y.normal=new m({componentDatatype:e.FLOAT,componentsPerAttribute:3,values:q})),f.tangent&&(Y.tangent=new m({componentDatatype:e.FLOAT,componentsPerAttribute:3,values:r})),f.binormal&&(Y.binormal=new m({componentDatatype:e.FLOAT,componentsPerAttribute:3,values:t})),Y}function x(a){var b,c,d,e,f,g=new Array(2*a*(a+1)),h=0;for(e=1;a>e;++e){for(d=e*(e+1),b=(e-1)*e,g[h++]=d++,g[h++]=b,g[h++]=d,c=2*e,f=0;c-1>f;++f)g[h++]=d,g[h++]=b++,g[h++]=b,g[h++]=d++,g[h++]=b,g[h++]=d;g[h++]=d++,g[h++]=b,g[h++]=d}for(c=2*a,++d,++b,e=0;c-1>e;++e)g[h++]=d,g[h++]=b++,g[h++]=b,g[h++]=d++,g[h++]=b,g[h++]=d;for(++b,++d,e=a-1;e>0;--e){for(g[h++]=b++,g[h++]=b,g[h++]=d,c=2*e,f=0;c-1>f;++f)g[h++]=d,g[h++]=b++,g[h++]=b,g[h++]=d++,g[h++]=b,g[h++]=d;g[h++]=b++,g[h++]=b++,g[h++]=d++}return g}function y(b){var d=b.center;O=c.multiplyByScalar(b.ellipsoid.geodeticSurfaceNormal(d,O),b.height,O),O=c.add(d,O,O);var e=new a(O,b.semiMajorAxis),f=i.computeEllipsePositions(b,!0,!1),g=f.positions,h=f.numPts,j=w(g,b,!1),k=x(h);return k=q.createTypedArray(g.length/3,k),{boundingSphere:e,attributes:j,indices:k}}function z(a,b){var d=b.vertexFormat,f=b.center,g=b.semiMajorAxis,h=b.ellipsoid,i=b.height,j=b.extrudedHeight,l=b.stRotation,o=2*(a.length/3),p=new Float64Array(3*o),q=d.st?new Float32Array(2*o):void 0,r=d.normal?new Float32Array(3*o):void 0,t=d.tangent?new Float32Array(3*o):void 0,v=d.binormal?new Float32Array(3*o):void 0,w=0,x=J,y=K,z=L,A=new k(h),B=A.project(h.cartesianToCartographic(f,M),N),O=h.scaleToGeodeticSurface(f,C);h.geodeticSurfaceNormal(O,O);for(var P=u.fromAxisAngle(O,l,I),Q=s.fromQuaternion(P,H),R=a.length,S=2*(R/3),T=0;R>T;T+=3){var U,V=T+1,W=T+2,X=c.fromArray(a,T,C);if(d.st){var Y=s.multiplyByVector(Q,X,D),Z=A.project(h.cartesianToCartographic(Y,M),E);c.subtract(Z,B,Z),G.x=(Z.x+g)/(2*g),G.y=(Z.y+g)/(2*g),q[w+S]=G.x,q[w+1+S]=G.y,q[w++]=G.x,q[w++]=G.y}X=h.scaleToGeodeticSurface(X,X),U=c.clone(X,D),x=h.geodeticSurfaceNormal(X,x);var $=c.multiplyByScalar(x,i,F);if(X=c.add(X,$,X),$=c.multiplyByScalar(x,j,$),U=c.add(U,$,U),d.position&&(p[T+R]=U.x,p[V+R]=U.y,p[W+R]=U.z,p[T]=X.x,p[V]=X.y,p[W]=X.z),d.normal||d.tangent||d.binormal){z=c.clone(x,z);var _=c.fromArray(a,(T+3)%R,F);c.subtract(_,X,_);var aa=c.subtract(U,X,E);x=c.normalize(c.cross(aa,_,x),x),d.normal&&(r[T]=x.x,r[V]=x.y,r[W]=x.z,r[T+R]=x.x,r[V+R]=x.y,r[W+R]=x.z),d.tangent&&(y=c.normalize(c.cross(z,x,y),y),t[T]=y.x,t[V]=y.y,t[W]=y.z,t[T+R]=y.x,t[T+1+R]=y.y,t[T+2+R]=y.z),d.binormal&&(v[T]=z.x,v[V]=z.y,v[W]=z.z,v[T+R]=z.x,v[V+R]=z.y,v[W+R]=z.z)}}var ba=new n;return d.position&&(ba.position=new m({componentDatatype:e.DOUBLE,componentsPerAttribute:3,values:p})),d.st&&(ba.st=new m({componentDatatype:e.FLOAT,componentsPerAttribute:2,values:q})),d.normal&&(ba.normal=new m({componentDatatype:e.FLOAT,componentsPerAttribute:3,values:r})),d.tangent&&(ba.tangent=new m({componentDatatype:e.FLOAT,componentsPerAttribute:3,values:t})),d.binormal&&(ba.binormal=new m({componentDatatype:e.FLOAT,componentsPerAttribute:3,values:v})),ba}function A(a){for(var b,c,d,e,f=a.length/3,g=q.createTypedArray(f,6*f),h=0,i=0;f-1>i;i++)b=i,d=i+f,c=b+1,e=c+f,g[h++]=b,g[h++]=d,g[h++]=c,g[h++]=c,g[h++]=d,g[h++]=e;return b=f-1,d=i+f,c=0,e=c+f,g[h++]=b,g[h++]=d,g[h++]=c,g[h++]=c,g[h++]=d,g[h++]=e,g}function B(b){var d=b.center,e=b.ellipsoid,f=b.semiMajorAxis,g=c.multiplyByScalar(e.geodeticSurfaceNormal(d,C),b.height,C);P.center=c.add(d,g,P.center),P.radius=f,g=c.multiplyByScalar(e.geodeticSurfaceNormal(d,g),b.extrudedHeight,g),Q.center=c.add(d,g,Q.center),Q.radius=f;var h=i.computeEllipsePositions(b,!0,!0),j=h.positions,k=h.numPts,m=h.outerPositions,n=a.union(P,Q),r=w(j,b,!0),s=x(k),u=s.length;s.length=2*u;for(var v=j.length/3,y=0;u>y;y+=3)s[y+u]=s[y+2]+v,s[y+1+u]=s[y+1]+v,s[y+2+u]=s[y]+v;var B=q.createTypedArray(2*v/3,s),D=new l({attributes:r,indices:B,primitiveType:t.TRIANGLES}),E=z(m,b);s=A(m);var F=q.createTypedArray(2*m.length/3,s),G=new l({attributes:E,indices:F,primitiveType:t.TRIANGLES}),H=p.combineInstances([new o({geometry:D}),new o({geometry:G})]);return{boundingSphere:n,attributes:H[0].attributes,indices:H[0].indices}}var C=new c,D=new c,E=new c,F=new c,G=new b,H=new s,I=new u,J=new c,K=new c,L=new c,M=new d,N=new c,O=new c,P=new a,Q=new a,R=function(a){a=f(a,f.EMPTY_OBJECT);var b=a.center,d=a.semiMajorAxis,e=a.semiMinorAxis,h=f(a.granularity,r.RADIANS_PER_DEGREE),i=f(a.height,0),k=a.extrudedHeight,l=g(k)&&!r.equalsEpsilon(i,k,1);this._center=c.clone(b),this._semiMajorAxis=d,this._semiMinorAxis=e,this._ellipsoid=f(a.ellipsoid,j.WGS84),this._rotation=f(a.rotation,0),this._stRotation=f(a.stRotation,0),this._height=i,this._granularity=h,this._vertexFormat=f(a.vertexFormat,v.DEFAULT),this._extrudedHeight=k,this._extrude=l,this._workerName="createEllipseGeometry"};return R.createGeometry=function(a){var b,c={center:a._center,semiMajorAxis:a._semiMajorAxis,semiMinorAxis:a._semiMinorAxis,ellipsoid:a._ellipsoid,rotation:a._rotation,height:a._height,extrudedHeight:a._extrudedHeight,granularity:a._granularity,vertexFormat:a._vertexFormat,stRotation:a._stRotation};return a._extrude?(c.extrudedHeight=Math.min(a._extrudedHeight,a._height),c.height=Math.max(a._extrudedHeight,a._height),b=B(c)):b=y(c),new l({attributes:b.attributes,indices:b.indices,primitiveType:t.TRIANGLES,boundingSphere:b.boundingSphere})},R}),c("Core/CircleGeometry",["./defaultValue","./defined","./DeveloperError","./EllipseGeometry"],function(a,b,c,d){"use strict";var e=function(b){b=a(b,a.EMPTY_OBJECT);var c=b.radius,e={center:b.center,semiMajorAxis:c,semiMinorAxis:c,ellipsoid:b.ellipsoid,height:b.height,extrudedHeight:b.extrudedHeight,granularity:b.granularity,vertexFormat:b.vertexFormat,stRotation:b.stRotation};this._ellipseGeometry=new d(e),this._workerName="createCircleGeometry"};return e.createGeometry=function(a){return d.createGeometry(a._ellipseGeometry)},e}),c("Core/EllipseOutlineGeometry",["./BoundingSphere","./Cartesian3","./ComponentDatatype","./defaultValue","./defined","./DeveloperError","./EllipseGeometryLibrary","./Ellipsoid","./Geometry","./GeometryAttribute","./GeometryAttributes","./IndexDatatype","./Math","./PrimitiveType"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(d){var e=d.center;r=b.multiplyByScalar(d.ellipsoid.geodeticSurfaceNormal(e,r),d.height,r),r=b.add(e,r,r);for(var f=new a(r,d.semiMajorAxis),h=g.computeEllipsePositions(d,!1,!0).outerPositions,i=new k({position:new j({componentDatatype:c.DOUBLE,componentsPerAttribute:3,values:g.raisePositionsToHeight(h,d,!1)})}),m=h.length/3,n=l.createTypedArray(m,2*m),o=0,p=0;m-1>p;p++)n[o++]=p,n[o++]=p+1;return n[o++]=m-1,n[o++]=0,{boundingSphere:f,attributes:i,indices:n}}function p(e){var f=d(e.numberOfVerticalLines,16);f=Math.max(f,0);var h=e.center,i=e.ellipsoid,m=e.semiMajorAxis,n=b.multiplyByScalar(i.geodeticSurfaceNormal(h,q),e.height,q);s.center=b.add(h,n,s.center),s.radius=m,n=b.multiplyByScalar(i.geodeticSurfaceNormal(h,n),e.extrudedHeight,n),t.center=b.add(h,n,t.center),t.radius=m;var o=g.computeEllipsePositions(e,!1,!0).outerPositions,p=new k({position:new j({componentDatatype:c.DOUBLE,componentsPerAttribute:3,values:g.raisePositionsToHeight(o,e,!0)})});o=p.position.values;var r=a.union(s,t),u=o.length/3,v=l.createTypedArray(u,2*u+2*f);u/=2;for(var w=0,x=0;u-1>x;x++)v[w++]=x,v[w++]=x+1,v[w++]=x+u,v[w++]=x+u+1;v[w++]=u-1,v[w++]=0,v[w++]=u+u-1,v[w++]=u;var y;if(f>0){var z=Math.min(f,u);y=Math.round(u/z)}var A=Math.min(y*f,u);if(f>0)for(x=0;A>x;x+=y)v[w++]=x,v[w++]=x+u;return{boundingSphere:r,attributes:p,indices:v}}var q=new b,r=new b,s=new a,t=new a,u=function(a){a=d(a,d.EMPTY_OBJECT);var c=a.center,f=a.semiMajorAxis,g=a.semiMinorAxis,i=d(a.granularity,m.RADIANS_PER_DEGREE),j=d(a.height,0),k=a.extrudedHeight,l=e(k)&&!m.equalsEpsilon(j,k,1);this._center=b.clone(c),this._semiMajorAxis=f,this._semiMinorAxis=g,this._ellipsoid=d(a.ellipsoid,h.WGS84),this._rotation=d(a.rotation,0),this._height=j,this._granularity=i,this._extrudedHeight=k,this._extrude=l,this._numberOfVerticalLines=Math.max(d(a.numberOfVerticalLines,16),0),this._workerName="createEllipseOutlineGeometry"};return u.createGeometry=function(a){var b,c={center:a._center,semiMajorAxis:a._semiMajorAxis,semiMinorAxis:a._semiMinorAxis,ellipsoid:a._ellipsoid,rotation:a._rotation,height:a._height,extrudedHeight:a._extrudedHeight,granularity:a._granularity,numberOfVerticalLines:a._numberOfVerticalLines};return a._extrude?(c.extrudedHeight=Math.min(a._extrudedHeight,a._height),c.height=Math.max(a._extrudedHeight,a._height),b=p(c)):b=o(c),new i({attributes:b.attributes,indices:b.indices,primitiveType:n.LINES,boundingSphere:b.boundingSphere})},u}),c("Core/CircleOutlineGeometry",["./defaultValue","./defined","./DeveloperError","./EllipseOutlineGeometry"],function(a,b,c,d){"use strict";var e=function(b){b=a(b,a.EMPTY_OBJECT);var c=b.radius,e={center:b.center,semiMajorAxis:c,semiMinorAxis:c,ellipsoid:b.ellipsoid,height:b.height,extrudedHeight:b.extrudedHeight,granularity:b.granularity,numberOfVerticalLines:b.numberOfVerticalLines};this._ellipseGeometry=new d(e),this._workerName="createCircleOutlineGeometry"};return e.createGeometry=function(a){return d.createGeometry(a._ellipseGeometry)},e}),c("Core/ClockRange",["./freezeObject"],function(a){"use strict";var b={UNBOUNDED:0,CLAMPED:1,LOOP_STOP:2};return a(b)}),c("Core/ClockStep",["./freezeObject"],function(a){"use strict";var b={TICK_DEPENDENT:0,SYSTEM_CLOCK_MULTIPLIER:1,SYSTEM_CLOCK:2};return a(b)}),c("Core/getTimestamp",["./defined"],function(a){"use strict";var b;return b="undefined"!=typeof performance&&a(performance.now)?function(){return performance.now()}:function(){return Date.now()}}),c("ThirdParty/sprintf",[],function(){function a(){var a=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,b=arguments,c=0,d=b[c++],e=function(a,b,c,d){c||(c=" ");var e=a.length>=b?"":Array(1+b-a.length>>>0).join(c);return d?a+e:e+a},f=function(a,b,c,d,f,g){var h=d-a.length;return h>0&&(a=c||!f?e(a,d,g,c):a.slice(0,b.length)+e("",h,"0",!0)+a.slice(b.length)),a},g=function(a,b,c,d,g,h,i){var j=a>>>0;return c=c&&j&&{2:"0b",8:"0",16:"0x"}[b]||"",a=c+e(j.toString(b),h||0,"0",!1),f(a,c,d,g,i)},h=function(a,b,c,d,e,g){return null!=d&&(a=a.slice(0,d)),f(a,"",b,c,e,g)},i=function(a,d,i,j,k,l,m){var n,o,p,q,r;if("%%"==a)return"%";for(var s=!1,t="",u=!1,v=!1,w=" ",x=i.length,y=0;i&&x>y;y++)switch(i.charAt(y)){case" ":t=" ";break;case"+":t="+";break;case"-":s=!0;break;case"'":w=i.charAt(y+1);break;case"0":u=!0;break;case"#":v=!0}if(j=j?"*"==j?+b[c++]:"*"==j.charAt(0)?+b[j.slice(1,-1)]:+j:0,0>j&&(j=-j,s=!0),!isFinite(j))throw new Error("sprintf: (minimum-)width must be finite");switch(l=l?"*"==l?+b[c++]:"*"==l.charAt(0)?+b[l.slice(1,-1)]:+l:"fFeE".indexOf(m)>-1?6:"d"==m?0:void 0,r=d?b[d.slice(0,-1)]:b[c++],m){case"s":return h(String(r),s,j,l,u,w);case"c":return h(String.fromCharCode(+r),s,j,l,u);case"b":return g(r,2,v,s,j,l,u);case"o":return g(r,8,v,s,j,l,u);case"x":return g(r,16,v,s,j,l,u);case"X":return g(r,16,v,s,j,l,u).toUpperCase();case"u":return g(r,10,v,s,j,l,u);case"i":case"d":return n=+r||0,n=Math.round(n-n%1),o=0>n?"-":t,r=o+e(String(Math.abs(n)),l,"0",!1),f(r,o,s,j,u);case"e":case"E":case"f":case"F":case"g":case"G":return n=+r,o=0>n?"-":t,p=["toExponential","toFixed","toPrecision"]["efg".indexOf(m.toLowerCase())],q=["toString","toUpperCase"]["eEfFgG".indexOf(m)%2],r=o+Math.abs(n)[p](l),f(r,o,s,j,u)[q]();default:return a}};return d.replace(a,i)}return a}),c("Core/binarySearch",["./defined","./DeveloperError"],function(){"use strict";var a=function(a,b,c){for(var d,e,f=0,g=a.length-1;g>=f;)if(d=~~((f+g)/2),e=c(a[d],b),0>e)f=d+1;else{if(!(e>0))return d;g=d-1}return~(g+1)};return a}),c("Core/GregorianDate",[],function(){"use strict";var a=function(a,b,c,d,e,f,g,h){this.year=a,this.month=b,this.day=c,this.hour=d,this.minute=e,this.second=f,this.millisecond=g,this.isLeapSecond=h};return a}),c("Core/isLeapYear",["./DeveloperError"],function(){"use strict";function a(a){return 0===a%4&&0!==a%100||0===a%400}return a}),c("Core/LeapSecond",[],function(){"use strict";var a=function(a,b){this.julianDate=a,this.offset=b};return a}),c("Core/TimeConstants",["./freezeObject"],function(a){"use strict";var b={SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5};return a(b)}),c("Core/TimeStandard",["./freezeObject"],function(a){"use strict";var b={UTC:0,TAI:1};return a(b)}),c("Core/JulianDate",["../ThirdParty/sprintf","./binarySearch","./defaultValue","./defined","./DeveloperError","./GregorianDate","./isLeapYear","./LeapSecond","./TimeConstants","./TimeStandard"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,b){return D.compare(a.julianDate,b.julianDate)}function l(a){s.julianDate=a;var c=D.leapSeconds,d=b(c,s,k);0>d&&(d=~d),d>=c.length&&(d=c.length-1);var e=c[d].offset;if(d>0){var f=D.secondsDifference(c[d].julianDate,a);f>e&&(d--,e=c[d].offset)}D.addSeconds(a,e,a)}function m(a,c){s.julianDate=a;var d=D.leapSeconds,e=b(d,s,k);if(0>e&&(e=~e),0===e)return D.addSeconds(a,-d[0].offset,c);if(e>=d.length)return D.addSeconds(a,-d[e-1].offset,c);var f=D.secondsDifference(d[e].julianDate,a);return 0===f?D.addSeconds(a,-d[e].offset,c):1>=f?void 0:D.addSeconds(a,-d[--e].offset,c)}function n(a,b,c){var d=0|b/i.SECONDS_PER_DAY;return a+=d,b-=i.SECONDS_PER_DAY*d,0>b&&(a--,b+=i.SECONDS_PER_DAY),c.dayNumber=a,c.secondsOfDay=b,c}function o(a,b,c,d,e,f,g){var h=0|(b-14)/12,j=a+4800+h,k=(0|1461*j/4)+(0|367*(b-2-12*h)/12)-(0|3*((j+100)/100)/4)+c-32075;d-=12,0>d&&(d+=24);var l=f+(d*i.SECONDS_PER_HOUR+e*i.SECONDS_PER_MINUTE+g*i.SECONDS_PER_MILLISECOND);return l>=43200&&(k-=1),[k,l]}var p=new f,q=[31,28,31,30,31,30,31,31,30,31,30,31],r=29,s=new h,t=/^(\d{4})$/,u=/^(\d{4})-(\d{2})$/,v=/^(\d{4})-?(\d{3})$/,w=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,x=/^(\d{4})-?(\d{2})-?(\d{2})$/,y=/([Z+\-])?(\d{2})?:?(\d{2})?$/,z=/^(\d{2})(\.\d+)?/.source+y.source,A=/^(\d{2}):?(\d{2})(\.\d+)?/.source+y.source,B=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+y.source,C="Invalid ISO 8601 date.",D=function(a,b,d){this.dayNumber=void 0,this.secondsOfDay=void 0,a=c(a,0),b=c(b,0),d=c(d,j.UTC);var e=0|a;b+=(a-e)*i.SECONDS_PER_DAY,n(e,b,this),d===j.UTC&&l(this)};D.fromDate=function(a,b){var c=o(a.getUTCFullYear(),a.getUTCMonth()+1,a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds());return d(b)?(n(c[0],c[1],b),l(b),b):new D(c[0],c[1],j.UTC)},D.fromIso8601=function(a,b){a=a.replace(",",".");var c,f,h,i=a.split("T"),k=1,m=1,p=0,s=0,y=0,E=0,F=i[0],G=i[1];if(!d(F))throw new e(C);var H;if(i=F.match(x),null!==i){if(H=F.split("-").length-1,H>0&&2!==H)throw new e(C);c=+i[1],k=+i[2],m=+i[3]}else if(i=F.match(u),null!==i)c=+i[1],k=+i[2];else if(i=F.match(t),null!==i)c=+i[1];else{var I;if(i=F.match(v),null!==i){if(c=+i[1],I=+i[2],h=g(c),1>I||h&&I>366||!h&&I>365)throw new e(C)}else{if(i=F.match(w),null===i)throw new e(C);c=+i[1];var J=+i[2],K=+i[3]||0;if(H=F.split("-").length-1,H>0&&(!d(i[3])&&1!==H||d(i[3])&&2!==H))throw new e(C);var L=new Date(Date.UTC(c,0,4));I=7*J+K-L.getUTCDay()-3}f=new Date(Date.UTC(c,0,1)),f.setUTCDate(I),k=f.getUTCMonth()+1,m=f.getUTCDate()}if(h=g(c),1>k||k>12||1>m||(2!==k||!h)&&m>q[k-1]||h&&2===k&&m>r)throw new e(C);var M;if(d(G)){if(i=G.match(B),null!==i){if(H=G.split(":").length-1,H>0&&2!==H&&3!==H)throw new e(C);p=+i[1],s=+i[2],y=+i[3],E=1e3*+(i[4]||0),M=5}else if(i=G.match(A),null!==i){if(H=G.split(":").length-1,H>0&&1!==H)throw new e(C);p=+i[1],s=+i[2],y=60*+(i[3]||0),M=4}else{if(i=G.match(z),null===i)throw new e(C);p=+i[1],s=60*+(i[2]||0),M=3}if(s>=60||y>=61||p>24||24===p&&(s>0||y>0||E>0))throw new e(C);var N=i[M],O=+i[M+1],P=+(i[M+2]||0);switch(N){case"+":p-=O,s-=P;break;case"-":p+=O,s+=P;break;case"Z":break;default:s+=new Date(Date.UTC(c,k-1,m,p,s)).getTimezoneOffset()}}else s+=new Date(Date.UTC(c,k-1,m)).getTimezoneOffset();var Q=60===y;for(Q&&y--;s>=60;)s-=60,p++;for(;p>=24;)p-=24,m++;for(f=h&&2===k?r:q[k-1];m>f;)m-=f,k++,k>12&&(k-=12,c++),f=h&&2===k?r:q[k-1];for(;0>s;)s+=60,p--;for(;0>p;)p+=24,m--;for(;1>m;)k--,1>k&&(k+=12,c--),f=h&&2===k?r:q[k-1],m+=f;var R=o(c,k,m,p,s,y,E)
;return d(b)?(n(R[0],R[1],b),l(b)):b=new D(R[0],R[1],j.UTC),Q&&D.addSeconds(b,1,b),b},D.now=function(a){return D.fromDate(new Date,a)};var E=new D(0,0,j.TAI);return D.toGregorianDate=function(a,b){var c=!1,e=m(a,E);d(e)||(D.addSeconds(a,-1,E),e=m(E,E),c=!0);var g=e.dayNumber,h=e.secondsOfDay;h>=43200&&(g+=1);var j=0|g+68569,k=0|4*j/146097;j=0|j-(0|(146097*k+3)/4);var l=0|4e3*(j+1)/1461001;j=0|j-(0|1461*l/4)+31;var n=0|80*j/2447,o=0|j-(0|2447*n/80);j=0|n/11;var p=0|n+2-12*j,q=0|100*(k-49)+l+j,r=0|h/i.SECONDS_PER_HOUR,s=h-r*i.SECONDS_PER_HOUR,t=0|s/i.SECONDS_PER_MINUTE;s-=t*i.SECONDS_PER_MINUTE;var u=0|s,v=(s-u)/i.SECONDS_PER_MILLISECOND;return r+=12,r>23&&(r-=24),c&&(u+=1),d(b)?(b.year=q,b.month=p,b.day=o,b.hour=r,b.minute=t,b.second=u,b.millisecond=v,b.isLeapSecond=c,b):new f(q,p,o,r,t,u,v,c)},D.toDate=function(a){var b=D.toGregorianDate(a,p),c=b.second;return b.isLeapSecond&&(c-=1),new Date(Date.UTC(b.year,b.month-1,b.day,b.hour,b.minute,c,b.millisecond))},D.toIso8601=function(b,c){var e,f=D.toGregorianDate(b,f);return d(c)||0===f.millisecond?d(c)&&0!==c?(e=(.01*f.millisecond).toFixed(c).replace(".","").slice(0,c),a("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",f.year,f.month,f.day,f.hour,f.minute,f.second,e)):a("%04d-%02d-%02dT%02d:%02d:%02dZ",f.year,f.month,f.day,f.hour,f.minute,f.second):(e=(.01*f.millisecond).toString().replace(".",""),a("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",f.year,f.month,f.day,f.hour,f.minute,f.second,e))},D.clone=function(a,b){return d(a)?d(b)?(b.dayNumber=a.dayNumber,b.secondsOfDay=a.secondsOfDay,b):new D(a.dayNumber,a.secondsOfDay,j.TAI):void 0},D.compare=function(a,b){var c=a.dayNumber-b.dayNumber;return 0!==c?c:a.secondsOfDay-b.secondsOfDay},D.equals=function(a,b){return a===b||d(a)&&d(b)&&a.dayNumber===b.dayNumber&&a.secondsOfDay===b.secondsOfDay},D.equalsEpsilon=function(a,b,c){return a===b||d(a)&&d(b)&&Math.abs(D.secondsDifference(a,b))<=c},D.totalDays=function(a){return a.dayNumber+a.secondsOfDay/i.SECONDS_PER_DAY},D.secondsDifference=function(a,b){var c=(a.dayNumber-b.dayNumber)*i.SECONDS_PER_DAY;return c+(a.secondsOfDay-b.secondsOfDay)},D.daysDifference=function(a,b){var c=a.dayNumber-b.dayNumber,d=(a.secondsOfDay-b.secondsOfDay)/i.SECONDS_PER_DAY;return c+d},D.computeTaiMinusUtc=function(a){s.julianDate=a;var c=D.leapSeconds,d=b(c,s,k);return 0>d&&(d=~d,--d,0>d&&(d=0)),c[d].offset},D.addSeconds=function(a,b,c){return n(a.dayNumber,a.secondsOfDay+b,c)},D.addMinutes=function(a,b,c){var d=a.secondsOfDay+b*i.SECONDS_PER_MINUTE;return n(a.dayNumber,d,c)},D.addHours=function(a,b,c){var d=a.secondsOfDay+b*i.SECONDS_PER_HOUR;return n(a.dayNumber,d,c)},D.addDays=function(a,b,c){var d=a.dayNumber+b;return n(d,a.secondsOfDay,c)},D.lessThan=function(a,b){return D.compare(a,b)<0},D.lessThanOrEquals=function(a,b){return D.compare(a,b)<=0},D.greaterThan=function(a,b){return D.compare(a,b)>0},D.greaterThanOrEquals=function(a,b){return D.compare(a,b)>=0},D.prototype.clone=function(a){return D.clone(this,a)},D.prototype.equals=function(a){return D.equals(this,a)},D.prototype.equalsEpsilon=function(a,b){return D.equalsEpsilon(this,a,b)},D.prototype.toString=function(){return D.toIso8601(this)},D.leapSeconds=[new h(new D(2441317,43210,j.TAI),10),new h(new D(2441499,43211,j.TAI),11),new h(new D(2441683,43212,j.TAI),12),new h(new D(2442048,43213,j.TAI),13),new h(new D(2442413,43214,j.TAI),14),new h(new D(2442778,43215,j.TAI),15),new h(new D(2443144,43216,j.TAI),16),new h(new D(2443509,43217,j.TAI),17),new h(new D(2443874,43218,j.TAI),18),new h(new D(2444239,43219,j.TAI),19),new h(new D(2444786,43220,j.TAI),20),new h(new D(2445151,43221,j.TAI),21),new h(new D(2445516,43222,j.TAI),22),new h(new D(2446247,43223,j.TAI),23),new h(new D(2447161,43224,j.TAI),24),new h(new D(2447892,43225,j.TAI),25),new h(new D(2448257,43226,j.TAI),26),new h(new D(2448804,43227,j.TAI),27),new h(new D(2449169,43228,j.TAI),28),new h(new D(2449534,43229,j.TAI),29),new h(new D(2450083,43230,j.TAI),30),new h(new D(2450630,43231,j.TAI),31),new h(new D(2451179,43232,j.TAI),32),new h(new D(2453736,43233,j.TAI),33),new h(new D(2454832,43234,j.TAI),34),new h(new D(2456109,43235,j.TAI),35)],D}),c("Core/Clock",["./ClockRange","./ClockStep","./defaultValue","./defined","./DeveloperError","./Event","./getTimestamp","./JulianDate"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(e){e=c(e,c.EMPTY_OBJECT);var i=e.startTime,j=!d(i),k=e.stopTime,l=!d(k),m=e.currentTime,n=!d(m);j&&l&&n?(m=h.now(),i=h.clone(m),k=h.addDays(m,1,new h)):j&&l?(i=h.clone(m),k=h.addDays(m,1,new h)):j&&n?(i=h.addDays(k,-1,new h),m=h.clone(i)):n&&l?(m=h.clone(i),k=h.addDays(i,1,new h)):n?m=h.clone(i):l?k=h.addDays(m,1,new h):j&&(i=h.clone(m)),this.startTime=i,this.stopTime=k,this.currentTime=m,this.multiplier=c(e.multiplier,1),this.clockStep=c(e.clockStep,b.SYSTEM_CLOCK_MULTIPLIER),this.clockRange=c(e.clockRange,a.UNBOUNDED),this.canAnimate=c(e.canAnimate,!0),this.shouldAnimate=c(e.shouldAnimate,!0),this.onTick=new f,this._lastSystemTime=g()};return i.prototype.tick=function(){var c=g(),d=h.clone(this.currentTime),e=this.startTime,f=this.stopTime,i=this.multiplier;if(this.canAnimate&&this.shouldAnimate)if(this.clockStep===b.SYSTEM_CLOCK)d=h.now(d);else{if(this.clockStep===b.TICK_DEPENDENT)d=h.addSeconds(d,i,d);else{var j=c-this._lastSystemTime;d=h.addSeconds(d,i*(j/1e3),d)}if(this.clockRange===a.CLAMPED)h.lessThan(d,e)?d=h.clone(e,d):h.greaterThan(d,f)&&(d=h.clone(f,d));else if(this.clockRange===a.LOOP_STOP)for(h.lessThan(d,e)&&(d=h.clone(e,d));h.greaterThan(d,f);)d=h.addSeconds(e,h.secondsDifference(d,f),d)}return this.currentTime=d,this._lastSystemTime=c,this.onTick.raiseEvent(this),d},i}),c("Core/Color",["./defaultValue","./defined","./DeveloperError","./FeatureDetection","./freezeObject","./Math"],function(a,b,c,d,e,f){"use strict";function g(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var h=function(b,c,d,e){this.red=a(b,1),this.green=a(c,1),this.blue=a(d,1),this.alpha=a(e,1)};h.fromCartesian4=function(a,c){return b(c)?(c.red=a.x,c.green=a.y,c.blue=a.z,c.alpha=a.w,c):new h(a.x,a.y,a.z,a.w)},h.fromBytes=function(b,c,d,e){return b=h.byteToFloat(a(b,255)),c=h.byteToFloat(a(c,255)),d=h.byteToFloat(a(d,255)),e=h.byteToFloat(a(e,255)),new h(b,c,d,e)};var i,j,k;d.supportsTypedArrays()&&(i=new ArrayBuffer(4),j=new Uint32Array(i),k=new Uint8Array(i)),h.fromRgba=function(a){return j[0]=a,h.fromBytes(k[0],k[1],k[2],k[3])},h.fromHsl=function(b,c,d,e){b=a(b,0)%1,c=a(c,0),d=a(d,0),e=a(e,1);var f=d,i=d,j=d;if(0!==c){var k;k=.5>d?d*(1+c):d+c-d*c;var l=2*d-k;f=g(l,k,b+1/3),i=g(l,k,b),j=g(l,k,b-1/3)}return new h(f,i,j,e)},h.fromRandom=function(c,d){c=a(c,a.EMPTY_OBJECT);var e=c.red;if(!b(e)){var g=a(c.minimumRed,0),i=a(c.maximumRed,1);e=g+f.nextRandomNumber()*(i-g)}var j=c.green;if(!b(j)){var k=a(c.minimumGreen,0),l=a(c.maximumGreen,1);j=k+f.nextRandomNumber()*(l-k)}var m=c.blue;if(!b(m)){var n=a(c.minimumBlue,0),o=a(c.maximumBlue,1);m=n+f.nextRandomNumber()*(o-n)}var p=c.alpha;if(!b(p)){var q=a(c.minimumAlpha,0),r=a(c.maximumAlpha,1);p=q+f.nextRandomNumber()*(r-q)}return b(d)?(d.red=e,d.green=j,d.blue=m,d.alpha=p,d):new h(e,j,m,p)};var l=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i,m=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i,n=/^rgba?\(\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)(?:\s*,\s*([0-9.]+))?\s*\)$/i,o=/^hsla?\(\s*([0-9.]+)\s*,\s*([0-9.]+%)\s*,\s*([0-9.]+%)(?:\s*,\s*([0-9.]+))?\s*\)$/i;return h.fromCssColorString=function(c){var d=h[c.toUpperCase()];if(b(d))return h.clone(d);var e=l.exec(c);return null!==e?new h(parseInt(e[1],16)/15,parseInt(e[2],16)/15,parseInt(e[3],16)/15):(e=m.exec(c),null!==e?new h(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255):(e=n.exec(c),null!==e?new h(parseFloat(e[1])/("%"===e[1].substr(-1)?100:255),parseFloat(e[2])/("%"===e[2].substr(-1)?100:255),parseFloat(e[3])/("%"===e[3].substr(-1)?100:255),parseFloat(a(e[4],"1.0"))):(e=o.exec(c),null!==e?h.fromHsl(parseFloat(e[1])/360,parseFloat(e[2])/100,parseFloat(e[3])/100,parseFloat(a(e[4],"1.0"))):void 0)))},h.packedLength=4,h.pack=function(b,c,d){d=a(d,0),c[d++]=b.red,c[d++]=b.green,c[d++]=b.blue,c[d]=b.alpha},h.unpack=function(c,d,e){return d=a(d,0),b(e)||(e=new h),e.red=c[d++],e.green=c[d++],e.blue=c[d++],e.alpha=c[d],e},h.byteToFloat=function(a){return a/255},h.floatToByte=function(a){return 1===a?255:0|256*a},h.clone=function(a,c){return b(a)?b(c)?(c.red=a.red,c.green=a.green,c.blue=a.blue,c.alpha=a.alpha,c):new h(a.red,a.green,a.blue,a.alpha):void 0},h.equals=function(a,c){return a===c||b(a)&&b(c)&&a.red===c.red&&a.green===c.green&&a.blue===c.blue&&a.alpha===c.alpha},h.prototype.clone=function(a){return h.clone(this,a)},h.prototype.equals=function(a){return h.equals(this,a)},h.prototype.equalsEpsilon=function(a,c){return this===a||b(a)&&Math.abs(this.red-a.red)<=c&&Math.abs(this.green-a.green)<=c&&Math.abs(this.blue-a.blue)<=c&&Math.abs(this.alpha-a.alpha)<=c},h.prototype.toString=function(){return"("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},h.prototype.toCssColorString=function(){var a=h.floatToByte(this.red),b=h.floatToByte(this.green),c=h.floatToByte(this.blue);return 1===this.alpha?"rgb("+a+","+b+","+c+")":"rgba("+a+","+b+","+c+","+this.alpha+")"},h.prototype.toBytes=function(a){var c=h.floatToByte(this.red),d=h.floatToByte(this.green),e=h.floatToByte(this.blue),f=h.floatToByte(this.alpha);return b(a)?(a[0]=c,a[1]=d,a[2]=e,a[3]=f,a):[c,d,e,f]},h.prototype.toRgba=function(){return k[0]=h.floatToByte(this.red),k[1]=h.floatToByte(this.green),k[2]=h.floatToByte(this.blue),k[3]=h.floatToByte(this.alpha),j[0]},h.prototype.brighten=function(a,b){return a=1-a,b.red=1-(1-this.red)*a,b.green=1-(1-this.green)*a,b.blue=1-(1-this.blue)*a,b.alpha=this.alpha,b},h.prototype.darken=function(a,b){return a=1-a,b.red=this.red*a,b.green=this.green*a,b.blue=this.blue*a,b.alpha=this.alpha,b},h.ALICEBLUE=e(h.fromCssColorString("#F0F8FF")),h.ANTIQUEWHITE=e(h.fromCssColorString("#FAEBD7")),h.AQUA=e(h.fromCssColorString("#00FFFF")),h.AQUAMARINE=e(h.fromCssColorString("#7FFFD4")),h.AZURE=e(h.fromCssColorString("#F0FFFF")),h.BEIGE=e(h.fromCssColorString("#F5F5DC")),h.BISQUE=e(h.fromCssColorString("#FFE4C4")),h.BLACK=e(h.fromCssColorString("#000000")),h.BLANCHEDALMOND=e(h.fromCssColorString("#FFEBCD")),h.BLUE=e(h.fromCssColorString("#0000FF")),h.BLUEVIOLET=e(h.fromCssColorString("#8A2BE2")),h.BROWN=e(h.fromCssColorString("#A52A2A")),h.BURLYWOOD=e(h.fromCssColorString("#DEB887")),h.CADETBLUE=e(h.fromCssColorString("#5F9EA0")),h.CHARTREUSE=e(h.fromCssColorString("#7FFF00")),h.CHOCOLATE=e(h.fromCssColorString("#D2691E")),h.CORAL=e(h.fromCssColorString("#FF7F50")),h.CORNFLOWERBLUE=e(h.fromCssColorString("#6495ED")),h.CORNSILK=e(h.fromCssColorString("#FFF8DC")),h.CRIMSON=e(h.fromCssColorString("#DC143C")),h.CYAN=e(h.fromCssColorString("#00FFFF")),h.DARKBLUE=e(h.fromCssColorString("#00008B")),h.DARKCYAN=e(h.fromCssColorString("#008B8B")),h.DARKGOLDENROD=e(h.fromCssColorString("#B8860B")),h.DARKGRAY=e(h.fromCssColorString("#A9A9A9")),h.DARKGREEN=e(h.fromCssColorString("#006400")),h.DARKGREY=h.DARKGRAY,h.DARKKHAKI=e(h.fromCssColorString("#BDB76B")),h.DARKMAGENTA=e(h.fromCssColorString("#8B008B")),h.DARKOLIVEGREEN=e(h.fromCssColorString("#556B2F")),h.DARKORANGE=e(h.fromCssColorString("#FF8C00")),h.DARKORCHID=e(h.fromCssColorString("#9932CC")),h.DARKRED=e(h.fromCssColorString("#8B0000")),h.DARKSALMON=e(h.fromCssColorString("#E9967A")),h.DARKSEAGREEN=e(h.fromCssColorString("#8FBC8F")),h.DARKSLATEBLUE=e(h.fromCssColorString("#483D8B")),h.DARKSLATEGRAY=e(h.fromCssColorString("#2F4F4F")),h.DARKSLATEGREY=h.DARKSLATEGRAY,h.DARKTURQUOISE=e(h.fromCssColorString("#00CED1")),h.DARKVIOLET=e(h.fromCssColorString("#9400D3")),h.DEEPPINK=e(h.fromCssColorString("#FF1493")),h.DEEPSKYBLUE=e(h.fromCssColorString("#00BFFF")),h.DIMGRAY=e(h.fromCssColorString("#696969")),h.DIMGREY=h.DIMGRAY,h.DODGERBLUE=e(h.fromCssColorString("#1E90FF")),h.FIREBRICK=e(h.fromCssColorString("#B22222")),h.FLORALWHITE=e(h.fromCssColorString("#FFFAF0")),h.FORESTGREEN=e(h.fromCssColorString("#228B22")),h.FUSCHIA=e(h.fromCssColorString("#FF00FF")),h.GAINSBORO=e(h.fromCssColorString("#DCDCDC")),h.GHOSTWHITE=e(h.fromCssColorString("#F8F8FF")),h.GOLD=e(h.fromCssColorString("#FFD700")),h.GOLDENROD=e(h.fromCssColorString("#DAA520")),h.GRAY=e(h.fromCssColorString("#808080")),h.GREEN=e(h.fromCssColorString("#008000")),h.GREENYELLOW=e(h.fromCssColorString("#ADFF2F")),h.GREY=h.GRAY,h.HONEYDEW=e(h.fromCssColorString("#F0FFF0")),h.HOTPINK=e(h.fromCssColorString("#FF69B4")),h.INDIANRED=e(h.fromCssColorString("#CD5C5C")),h.INDIGO=e(h.fromCssColorString("#4B0082")),h.IVORY=e(h.fromCssColorString("#FFFFF0")),h.KHAKI=e(h.fromCssColorString("#F0E68C")),h.LAVENDER=e(h.fromCssColorString("#E6E6FA")),h.LAVENDAR_BLUSH=e(h.fromCssColorString("#FFF0F5")),h.LAWNGREEN=e(h.fromCssColorString("#7CFC00")),h.LEMONCHIFFON=e(h.fromCssColorString("#FFFACD")),h.LIGHTBLUE=e(h.fromCssColorString("#ADD8E6")),h.LIGHTCORAL=e(h.fromCssColorString("#F08080")),h.LIGHTCYAN=e(h.fromCssColorString("#E0FFFF")),h.LIGHTGOLDENRODYELLOW=e(h.fromCssColorString("#FAFAD2")),h.LIGHTGRAY=e(h.fromCssColorString("#D3D3D3")),h.LIGHTGREEN=e(h.fromCssColorString("#90EE90")),h.LIGHTGREY=h.LIGHTGRAY,h.LIGHTPINK=e(h.fromCssColorString("#FFB6C1")),h.LIGHTSEAGREEN=e(h.fromCssColorString("#20B2AA")),h.LIGHTSKYBLUE=e(h.fromCssColorString("#87CEFA")),h.LIGHTSLATEGRAY=e(h.fromCssColorString("#778899")),h.LIGHTSLATEGREY=h.LIGHTSLATEGRAY,h.LIGHTSTEELBLUE=e(h.fromCssColorString("#B0C4DE")),h.LIGHTYELLOW=e(h.fromCssColorString("#FFFFE0")),h.LIME=e(h.fromCssColorString("#00FF00")),h.LIMEGREEN=e(h.fromCssColorString("#32CD32")),h.LINEN=e(h.fromCssColorString("#FAF0E6")),h.MAGENTA=e(h.fromCssColorString("#FF00FF")),h.MAROON=e(h.fromCssColorString("#800000")),h.MEDIUMAQUAMARINE=e(h.fromCssColorString("#66CDAA")),h.MEDIUMBLUE=e(h.fromCssColorString("#0000CD")),h.MEDIUMORCHID=e(h.fromCssColorString("#BA55D3")),h.MEDIUMPURPLE=e(h.fromCssColorString("#9370DB")),h.MEDIUMSEAGREEN=e(h.fromCssColorString("#3CB371")),h.MEDIUMSLATEBLUE=e(h.fromCssColorString("#7B68EE")),h.MEDIUMSPRINGGREEN=e(h.fromCssColorString("#00FA9A")),h.MEDIUMTURQUOISE=e(h.fromCssColorString("#48D1CC")),h.MEDIUMVIOLETRED=e(h.fromCssColorString("#C71585")),h.MIDNIGHTBLUE=e(h.fromCssColorString("#191970")),h.MINTCREAM=e(h.fromCssColorString("#F5FFFA")),h.MISTYROSE=e(h.fromCssColorString("#FFE4E1")),h.MOCCASIN=e(h.fromCssColorString("#FFE4B5")),h.NAVAJOWHITE=e(h.fromCssColorString("#FFDEAD")),h.NAVY=e(h.fromCssColorString("#000080")),h.OLDLACE=e(h.fromCssColorString("#FDF5E6")),h.OLIVE=e(h.fromCssColorString("#808000")),h.OLIVEDRAB=e(h.fromCssColorString("#6B8E23")),h.ORANGE=e(h.fromCssColorString("#FFA500")),h.ORANGERED=e(h.fromCssColorString("#FF4500")),h.ORCHID=e(h.fromCssColorString("#DA70D6")),h.PALEGOLDENROD=e(h.fromCssColorString("#EEE8AA")),h.PALEGREEN=e(h.fromCssColorString("#98FB98")),h.PALETURQUOISE=e(h.fromCssColorString("#AFEEEE")),h.PALEVIOLETRED=e(h.fromCssColorString("#DB7093")),h.PAPAYAWHIP=e(h.fromCssColorString("#FFEFD5")),h.PEACHPUFF=e(h.fromCssColorString("#FFDAB9")),h.PERU=e(h.fromCssColorString("#CD853F")),h.PINK=e(h.fromCssColorString("#FFC0CB")),h.PLUM=e(h.fromCssColorString("#DDA0DD")),h.POWDERBLUE=e(h.fromCssColorString("#B0E0E6")),h.PURPLE=e(h.fromCssColorString("#800080")),h.RED=e(h.fromCssColorString("#FF0000")),h.ROSYBROWN=e(h.fromCssColorString("#BC8F8F")),h.ROYALBLUE=e(h.fromCssColorString("#4169E1")),h.SADDLEBROWN=e(h.fromCssColorString("#8B4513")),h.SALMON=e(h.fromCssColorString("#FA8072")),h.SANDYBROWN=e(h.fromCssColorString("#F4A460")),h.SEAGREEN=e(h.fromCssColorString("#2E8B57")),h.SEASHELL=e(h.fromCssColorString("#FFF5EE")),h.SIENNA=e(h.fromCssColorString("#A0522D")),h.SILVER=e(h.fromCssColorString("#C0C0C0")),h.SKYBLUE=e(h.fromCssColorString("#87CEEB")),h.SLATEBLUE=e(h.fromCssColorString("#6A5ACD")),h.SLATEGRAY=e(h.fromCssColorString("#708090")),h.SLATEGREY=h.SLATEGRAY,h.SNOW=e(h.fromCssColorString("#FFFAFA")),h.SPRINGGREEN=e(h.fromCssColorString("#00FF7F")),h.STEELBLUE=e(h.fromCssColorString("#4682B4")),h.TAN=e(h.fromCssColorString("#D2B48C")),h.TEAL=e(h.fromCssColorString("#008080")),h.THISTLE=e(h.fromCssColorString("#D8BFD8")),h.TOMATO=e(h.fromCssColorString("#FF6347")),h.TURQUOISE=e(h.fromCssColorString("#40E0D0")),h.VIOLET=e(h.fromCssColorString("#EE82EE")),h.WHEAT=e(h.fromCssColorString("#F5DEB3")),h.WHITE=e(h.fromCssColorString("#FFFFFF")),h.WHITESMOKE=e(h.fromCssColorString("#F5F5F5")),h.YELLOW=e(h.fromCssColorString("#FFFF00")),h.YELLOWGREEN=e(h.fromCssColorString("#9ACD32")),h}),c("Core/ColorGeometryInstanceAttribute",["./Color","./ComponentDatatype","./defaultValue","./defined","./defineProperties","./DeveloperError"],function(a,b,c,d,e){"use strict";var f=function(b,d,e,f){b=c(b,1),d=c(d,1),e=c(e,1),f=c(f,1),this.value=new Uint8Array([a.floatToByte(b),a.floatToByte(d),a.floatToByte(e),a.floatToByte(f)])};return e(f.prototype,{componentDatatype:{get:function(){return b.UNSIGNED_BYTE}},componentsPerAttribute:{get:function(){return 4}},normalize:{get:function(){return!0}}}),f.fromColor=function(a){return new f(a.red,a.green,a.blue,a.alpha)},f.toValue=function(a,b){return d(b)?a.toBytes(b):new Uint8Array(a.toBytes())},f}),c("Core/CornerType",["./freezeObject"],function(a){"use strict";var b={ROUNDED:0,MITERED:1,BEVELED:2};return a(b)}),c("Core/isArray",["./defined"],function(a){"use strict";var b=Array.isArray;return a(b)||(b=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),b}),c("Core/EllipsoidGeodesic",["./Cartesian3","./Cartographic","./defaultValue","./defined","./defineProperties","./DeveloperError","./Ellipsoid","./Math"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){var b=a._uSquared,c=a._ellipsoid.maximumRadius,d=a._ellipsoid.minimumRadius,e=(c-d)/c,f=Math.cos(a._startHeading),g=Math.sin(a._startHeading),h=(1-e)*Math.tan(a._start.latitude),i=1/Math.sqrt(1+h*h),j=i*h,k=Math.atan2(h,f),l=i*g,m=l*l,n=1-m,o=Math.sqrt(n),p=b/4,q=p*p,r=q*p,s=q*q,t=1+p-3*q/4+5*r/4-175*s/64,u=1-p+15*q/8-35*r/8,v=1-3*p+35*q/4,w=1-5*p,x=t*k-u*Math.sin(2*k)*p/2-v*Math.sin(4*k)*q/16-w*Math.sin(6*k)*r/48-5*Math.sin(8*k)*s/512,y=a._constants;y.a=c,y.b=d,y.f=e,y.cosineHeading=f,y.sineHeading=g,y.tanU=h,y.cosineU=i,y.sineU=j,y.sigma=k,y.sineAlpha=l,y.sineSquaredAlpha=m,y.cosineSquaredAlpha=n,y.cosineAlpha=o,y.u2Over4=p,y.u4Over16=q,y.u6Over64=r,y.u8Over256=s,y.a0=t,y.a1=u,y.a2=v,y.a3=w,y.distanceRatio=x}function j(a,b){return a*b*(4+a*(4-3*b))/16}function k(a,b,c,d,e,f,g){var h=j(a,c);return(1-h)*a*b*(d+h*e*(g+h*f*(2*g*g-1)))}function l(a,b,c,d,e,f,g){var i,j,l,m,n,o=(b-c)/b,p=f-d,q=Math.atan((1-o)*Math.tan(e)),r=Math.atan((1-o)*Math.tan(g)),s=Math.cos(q),t=Math.sin(q),u=Math.cos(r),v=Math.sin(r),w=s*u,x=s*v,y=t*v,z=t*u,A=p,B=h.TWO_PI,C=Math.cos(A),D=Math.sin(A);do{C=Math.cos(A),D=Math.sin(A);var E=x-z*C;l=Math.sqrt(u*u*D*D+E*E),j=y+w*C,i=Math.atan2(l,j);var F;0===l?(F=0,m=1):(F=w*D/l,m=1-F*F),B=A,n=j-2*y/m,isNaN(n)&&(n=0),A=p+k(o,F,m,i,l,j,n)}while(Math.abs(A-B)>h.EPSILON12);var G=m*(b*b-c*c)/(c*c),H=1+G*(4096+G*(G*(320-175*G)-768))/16384,I=G*(256+G*(G*(74-47*G)-128))/1024,J=n*n,K=I*l*(n+I*(j*(2*J-1)-I*n*(4*l*l-3)*(4*J-3)/6)/4),L=c*H*(i-K),M=Math.atan2(u*D,x-z*C),N=Math.atan2(s*D,x*C-z);a._distance=L,a._startHeading=M,a._endHeading=N,a._uSquared=G}function m(c,d,e,f){a.normalize(f.cartographicToCartesian(d,o),n),a.normalize(f.cartographicToCartesian(e,o),o),l(c,f.maximumRadius,f.minimumRadius,d.longitude,d.latitude,e.longitude,e.latitude),d.height=0,e.height=0,c._start=b.clone(d,c._start),c._end=b.clone(e,c._end),i(c)}var n=new a,o=new a,p=function(a,e,f){var h=c(f,g.WGS84);this._ellipsoid=h,this._start=new b,this._end=new b,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,d(a)&&d(e)&&m(this,a,e,h)};return e(p.prototype,{surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return this._startHeading}},endHeading:{get:function(){return this._endHeading}}}),p.prototype.setEndPoints=function(a,b){m(this,a,b,this._ellipsoid)},p.prototype.interpolateUsingFraction=function(a,b){return this.interpolateUsingSurfaceDistance(this._distance*a,b)},p.prototype.interpolateUsingSurfaceDistance=function(a,c){var e=this._constants,f=e.distanceRatio+a/e.b,g=Math.cos(2*f),h=Math.cos(4*f),i=Math.cos(6*f),j=Math.sin(2*f),l=Math.sin(4*f),m=Math.sin(6*f),n=Math.sin(8*f),o=f*f,p=f*o,q=e.u8Over256,r=e.u2Over4,s=e.u6Over64,t=e.u4Over16,u=2*p*q*g/3+f*(1-r+7*t/4-15*s/4+579*q/64-(t-15*s/4+187*q/16)*g-(5*s/4-115*q/16)*h-29*q*i/16)+(r/2-t+71*s/32-85*q/16)*j+(5*t/16-5*s/4+383*q/96)*l-o*((s-11*q/2)*j+5*q*l/2)+(29*s/96-29*q/16)*m+539*q*n/1536,v=Math.asin(Math.sin(u)*e.cosineAlpha),w=Math.atan(e.a/e.b*Math.tan(v));u-=e.sigma;var x=Math.cos(2*e.sigma+u),y=Math.sin(u),z=Math.cos(u),A=e.cosineU*z,B=e.sineU*y,C=Math.atan2(y*e.sineHeading,A-B*e.cosineHeading),D=C-k(e.f,e.sineAlpha,e.cosineSquaredAlpha,u,y,z,x);return d(c)?(c.longitude=this._start.longitude+D,c.latitude=w,c.height=0,c):new b(this._start.longitude+D,w,0)},p}),c("Core/PolylinePipeline",["./Cartesian3","./Cartographic","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./EllipsoidGeodesic","./IntersectionTests","./isArray","./Math","./Matrix4","./Plane"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,b,c){var d,e=new Array(a);if(b===c){for(d=0;a>d;d++)e[d]=b;return e}var f=c-b,g=f/a;for(d=1;a>d;d++){var h=b+d*g;e[d]=h}return e[0]=b,e}function n(b,c,d,e,f,g,h,i){var j=e.scaleToGeodeticSurface(b,B),k=e.scaleToGeodeticSurface(c,C),l=o.numberOfPoints(b,c,d),n=e.cartesianToCartographic(j,y),p=e.cartesianToCartographic(k,z),q=m(l,f,g);D.setEndPoints(n,p);var r=D.surfaceDistance/l,s=i;n.height=f;var t=e.cartographicToCartesian(n,A);a.pack(t,h,s),s+=3;for(var u=1;l>u;u++){var v=D.interpolateUsingSurfaceDistance(u*r,z);v.height=q[u],t=e.cartographicToCartesian(v,A),a.pack(t,h,s),s+=3}return s}var o={};o.numberOfPoints=function(b,c,d){var e=a.angleBetween(b,c);return Math.ceil(e/d)};var p=new b;o.extractHeights=function(a,b){for(var c=a.length,d=new Array(c),e=0;c>e;e++){var f=a[e];d[e]=b.cartesianToCartographic(f,p).height}return d};var q=new k,r=new a,s=new a,t=new l(a.ZERO,0),u=new a,v=new l(a.ZERO,0),w=new a,x=new a,y=new b,z=new b,A=new a,B=new a,C=new a,D=new g;return o.wrapLongitude=function(b,e){var f=[],g=[];if(d(b)&&b.length>0){e=c(e,k.IDENTITY);var i=k.inverseTransformation(e,q),j=k.multiplyByPoint(i,a.ZERO,r),m=k.multiplyByPointAsVector(i,a.UNIT_Y,s),n=l.fromPointNormal(j,m,t),o=k.multiplyByPointAsVector(i,a.UNIT_X,u),p=l.fromPointNormal(j,o,v),y=1;f.push(a.clone(b[0]));for(var z=f[0],A=b.length,B=1;A>B;++B){var C=b[B];if(l.getPointDistance(p,z)<0||l.getPointDistance(p,C)<0){var D=h.lineSegmentPlane(z,C,n,w);if(d(D)){var E=a.multiplyByScalar(m,5e-9,x);l.getPointDistance(n,z)<0&&a.negate(E,E),f.push(a.add(D,E,new a)),g.push(y+1),a.negate(E,E),f.push(a.add(D,E,new a)),y=1}}f.push(a.clone(b[B])),y++,z=C}g.push(y)}return{positions:f,lengths:g}},o.removeDuplicates=function(b){var c=b.length;if(2>c)return void 0;var d,e,f;for(d=1;c>d&&(e=b[d-1],f=b[d],!a.equals(e,f));++d);if(d===c)return void 0;var g=[];for(g.push(b[0]);c>d;++d)e=b[d-1],f=b[d],a.equals(e,f)||g.push(a.clone(f));return g},o.generateArc=function(b){d(b)||(b={});var e,g,h,k=b.positions,l=c(b.ellipsoid,f.WGS84),m=c(b.height,0),p=c(b.granularity,j.RADIANS_PER_DEGREE),q=k.length,r=0;for(e=0;q-1>e;e++)g=k[e],h=k[e+1],r+=o.numberOfPoints(g,h,p);r++;var s=3*r,t=new Array(s),u=0;for(e=0;q-1>e;e++){g=k[e],h=k[e+1];var v,w;i(m)?(v=m[e],w=m[e+1]):(v=m,w=m),u=n(g,h,p,l,v,w,t,u)}var x=k[q-1],z=l.cartesianToCartographic(x,y);z.height=i(m)?m[q-1]:m;var B=l.cartographicToCartesian(z,A);return a.pack(B,t,s-3),t},o.generateCartesianArc=function(b){for(var c=o.generateArc(b),d=c.length/3,e=new Array(d),f=0;d>f;f++)e[f]=a.unpack(c,3*f);return e},o}),c("Core/EarthOrientationParametersSample",[],function(){"use strict";var a=function(a,b,c,d,e){this.xPoleWander=a,this.yPoleWander=b,this.xPoleOffset=c,this.yPoleOffset=d,this.ut1MinusUtc=e};return a}),c("Core/EarthOrientationParameters",["../ThirdParty/when","./binarySearch","./defaultValue","./defined","./EarthOrientationParametersSample","./freezeObject","./JulianDate","./LeapSecond","./loadJson","./RuntimeError","./TimeConstants","./TimeStandard"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,b){return g.compare(a.julianDate,b)}function n(a,c){if(!d(c.columnNames))return a._dataError="Error in loaded EOP data: The columnNames property is required.",void 0;if(!d(c.samples))return a._dataError="Error in loaded EOP data: The samples property is required.",void 0;var e=c.columnNames.indexOf("modifiedJulianDateUtc"),f=c.columnNames.indexOf("xPoleWanderRadians"),i=c.columnNames.indexOf("yPoleWanderRadians"),j=c.columnNames.indexOf("ut1MinusUtcSeconds"),n=c.columnNames.indexOf("xCelestialPoleOffsetRadians"),o=c.columnNames.indexOf("yCelestialPoleOffsetRadians"),p=c.columnNames.indexOf("taiMinusUtcSeconds");if(0>e||0>f||0>i||0>j||0>n||0>o||0>p)return a._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns",void 0;var q=a._samples=c.samples,r=a._dates=[];a._dateColumn=e,a._xPoleWanderRadiansColumn=f,a._yPoleWanderRadiansColumn=i,a._ut1MinusUtcSecondsColumn=j,a._xCelestialPoleOffsetRadiansColumn=n,a._yCelestialPoleOffsetRadiansColumn=o,a._taiMinusUtcSecondsColumn=p,a._columnCount=c.columnNames.length,a._lastIndex=void 0;for(var s,t=a._addNewLeapSeconds,u=0,v=q.length;v>u;u+=a._columnCount){var w=q[u+e],x=q[u+p],y=w+k.MODIFIED_JULIAN_DATE_DIFFERENCE,z=new g(y,x,l.TAI);if(r.push(z),t){if(x!==s&&d(s)){var A=g.leapSeconds,B=b(A,z,m);if(0>B){var C=new h(z,x);A.splice(~B,0,C)}}s=x}}}function o(a,b,c,d,e){var f=c*d;e.xPoleWander=b[f+a._xPoleWanderRadiansColumn],e.yPoleWander=b[f+a._yPoleWanderRadiansColumn],e.xPoleOffset=b[f+a._xCelestialPoleOffsetRadiansColumn],e.yPoleOffset=b[f+a._yCelestialPoleOffsetRadiansColumn],e.ut1MinusUtc=b[f+a._ut1MinusUtcSecondsColumn]}function p(a,b,c){return b+a*(c-b)}function q(a,b,c,d,e,f,h){var i=a._columnCount;if(f>b.length-1)return h.xPoleWander=0,h.yPoleWander=0,h.xPoleOffset=0,h.yPoleOffset=0,h.ut1MinusUtc=0,h;var j=b[e],k=b[f];if(j.equals(k)||d.equals(j))return o(a,c,e,i,h),h;if(d.equals(k))return o(a,c,f,i,h),h;var l=g.secondsDifference(d,j)/g.secondsDifference(k,j),m=e*i,n=f*i,q=c[m+a._ut1MinusUtcSecondsColumn],r=c[n+a._ut1MinusUtcSecondsColumn],s=r-q;if(s>.5||-.5>s){var t=c[m+a._taiMinusUtcSecondsColumn],u=c[n+a._taiMinusUtcSecondsColumn];t!==u&&(k.equals(d)?q=r:r-=u-t)}return h.xPoleWander=p(l,c[m+a._xPoleWanderRadiansColumn],c[n+a._xPoleWanderRadiansColumn]),h.yPoleWander=p(l,c[m+a._yPoleWanderRadiansColumn],c[n+a._yPoleWanderRadiansColumn]),h.xPoleOffset=p(l,c[m+a._xCelestialPoleOffsetRadiansColumn],c[n+a._xCelestialPoleOffsetRadiansColumn]),h.yPoleOffset=p(l,c[m+a._yCelestialPoleOffsetRadiansColumn],c[n+a._yCelestialPoleOffsetRadiansColumn]),h.ut1MinusUtc=p(l,q,r),h}var r=function(b){if(b=c(b,c.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=c(b.addNewLeapSeconds,!0),d(b.data))n(this,b.data);else if(d(b.url)){var e=this;this._downloadPromise=a(i(b.url),function(a){n(e,a)},function(){e._dataError="An error occurred while retrieving the EOP data from the URL "+b.url+"."})}else n(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})};return r.NONE=f({getPromiseToLoad:function(){return a()},compute:function(a,b){return d(b)?(b.xPoleWander=0,b.yPoleWander=0,b.xPoleOffset=0,b.yPoleOffset=0,b.ut1MinusUtc=0):b=new e(0,0,0,0,0),b}}),r.prototype.getPromiseToLoad=function(){return a(this._downloadPromise)},r.prototype.compute=function(a,c){if(!d(this._samples)){if(d(this._dataError))throw new j(this._dataError);return void 0}if(d(c)||(c=new e(0,0,0,0,0)),0===this._samples.length)return c.xPoleWander=0,c.yPoleWander=0,c.xPoleOffset=0,c.yPoleOffset=0,c.ut1MinusUtc=0,c;var f=this._dates,h=this._lastIndex,i=0,k=0;if(d(h)){var l=f[h],m=f[h+1],n=g.lessThanOrEquals(l,a),o=!d(m),p=o||g.greaterThanOrEquals(m,a);if(n&&p)return i=h,!o&&m.equals(a)&&++i,k=i+1,q(this,f,this._samples,a,i,k,c),c}var r=b(f,a,g.compare,this._dateColumn);return r>=0?(r<f.length-1&&f[r+1].equals(a)&&++r,i=r,k=r):(k=~r,i=k-1,0>i&&(i=0)),this._lastIndex=i,q(this,f,this._samples,a,i,k,c),c},r}),c("Core/Iau2006XysSample",[],function(){"use strict";var a=function(a,b,c){this.x=a,this.y=b,this.s=c};return a}),c("Core/Iau2006XysData",["../ThirdParty/when","./buildModuleUrl","./defaultValue","./defined","./Iau2006XysSample","./JulianDate","./loadJson","./TimeStandard"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b,c){var d=l;return d.dayNumber=b,d.secondsOfDay=c,f.daysDifference(d,a._sampleZeroDateTT)}function j(c,e){if(c._chunkDownloadsInProgress[e])return c._chunkDownloadsInProgress[e];var f=a.defer();c._chunkDownloadsInProgress[e]=f;var h,i=c._xysFileUrlTemplate;return h=d(i)?i.replace("{0}",e):b("Assets/IAU2006_XYS/IAU2006_XYS_"+e+".json"),a(g(h),function(a){c._chunkDownloadsInProgress[e]=!1;for(var b=c._samples,d=a.samples,g=3*e*c._samplesPerXysFile,h=0,i=d.length;i>h;++h)b[g+h]=d[h];f.resolve()}),f.promise}var k=function(a){a=c(a,c.EMPTY_OBJECT),this._xysFileUrlTemplate=a.xysFileUrlTemplate,this._interpolationOrder=c(a.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=c(a.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new f(this._sampleZeroJulianEphemerisDate,0,h.TAI),this._stepSizeDays=c(a.stepSizeDays,1),this._samplesPerXysFile=c(a.samplesPerXysFile,1e3),this._totalSamples=c(a.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var b=this._interpolationOrder,d=this._denominators=new Array(b+1),e=this._xTable=new Array(b+1),g=Math.pow(this._stepSizeDays,b),i=0;b>=i;++i){d[i]=g,e[i]=i*this._stepSizeDays;for(var j=0;b>=j;++j)j!==i&&(d[i]*=i-j);d[i]=1/d[i]}this._work=new Array(b+1),this._coef=new Array(b+1)},l=new f(0,0,h.TAI);return k.prototype.preload=function(b,c,d,e){var f=i(this,b,c),g=i(this,d,e),h=0|f/this._stepSizeDays-this._interpolationOrder/2;0>h&&(h=0);var k=g/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;k>=this._totalSamples&&(k=this._totalSamples-1);for(var l=0|h/this._samplesPerXysFile,m=0|k/this._samplesPerXysFile,n=[],o=l;m>=o;++o)n.push(j(this,o));return a.all(n)},k.prototype.computeXysRadians=function(a,b,c){var f=i(this,a,b);if(0>f)return void 0;var g=0|f/this._stepSizeDays;if(g>=this._totalSamples)return void 0;var h=this._interpolationOrder,k=g-(0|h/2);0>k&&(k=0);var l=k+h;l>=this._totalSamples&&(l=this._totalSamples-1,k=l-h,0>k&&(k=0));var m=!1,n=this._samples;if(d(n[3*k])||(j(this,0|k/this._samplesPerXysFile),m=!0),d(n[3*l])||(j(this,0|l/this._samplesPerXysFile),m=!0),m)return void 0;d(c)?(c.x=0,c.y=0,c.s=0):c=new e(0,0,0);var o,p,q=f-k*this._stepSizeDays,r=this._work,s=this._denominators,t=this._coef,u=this._xTable;for(o=0;h>=o;++o)r[o]=q-u[o];for(o=0;h>=o;++o){for(t[o]=1,p=0;h>=p;++p)p!==o&&(t[o]*=r[p]);t[o]*=s[o];var v=3*(k+o);c.x+=t[o]*n[v++],c.y+=t[o]*n[v++],c.s+=t[o]*n[v]}return c},k}),
c("Core/Transforms",["../ThirdParty/when","./Cartesian2","./Cartesian3","./Cartesian4","./defaultValue","./defined","./DeveloperError","./EarthOrientationParameters","./EarthOrientationParametersSample","./Ellipsoid","./Iau2006XysData","./Iau2006XysSample","./JulianDate","./Math","./Matrix3","./Matrix4","./TimeConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";var r={},s=new c,t=new c,u=new c;r.eastNorthUpToFixedFrame=function(a,b,d){if(n.equalsEpsilon(a.x,0,n.EPSILON14)&&n.equalsEpsilon(a.y,0,n.EPSILON14)){var g=n.sign(a.z);return f(d)?(d[0]=0,d[1]=1,d[2]=0,d[3]=0,d[4]=-g,d[5]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=g,d[11]=0,d[12]=a.x,d[13]=a.y,d[14]=a.z,d[15]=1,d):new p(0,-g,0,a.x,1,0,0,a.y,0,0,g,a.z,0,0,0,1)}var h=s,i=t,k=u;return b=e(b,j.WGS84),b.geodeticSurfaceNormal(a,h),i.x=-a.y,i.y=a.x,i.z=0,c.normalize(i,i),c.cross(h,i,k),f(d)?(d[0]=i.x,d[1]=i.y,d[2]=i.z,d[3]=0,d[4]=k.x,d[5]=k.y,d[6]=k.z,d[7]=0,d[8]=h.x,d[9]=h.y,d[10]=h.z,d[11]=0,d[12]=a.x,d[13]=a.y,d[14]=a.z,d[15]=1,d):new p(i.x,k.x,h.x,a.x,i.y,k.y,h.y,a.y,i.z,k.z,h.z,a.z,0,0,0,1)};var v=new c,w=new c,x=new c;r.northEastDownToFixedFrame=function(a,b,d){if(n.equalsEpsilon(a.x,0,n.EPSILON14)&&n.equalsEpsilon(a.y,0,n.EPSILON14)){var g=n.sign(a.z);return f(d)?(d[0]=-g,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=-g,d[11]=0,d[12]=a.x,d[13]=a.y,d[14]=a.z,d[15]=1,d):new p(-g,0,0,a.x,0,1,0,a.y,0,0,-g,a.z,0,0,0,1)}var h=v,i=w,k=x;return b=e(b,j.WGS84),b.geodeticSurfaceNormal(a,h),i.x=-a.y,i.y=a.x,i.z=0,c.normalize(i,i),c.cross(h,i,k),f(d)?(d[0]=k.x,d[1]=k.y,d[2]=k.z,d[3]=0,d[4]=i.x,d[5]=i.y,d[6]=i.z,d[7]=0,d[8]=-h.x,d[9]=-h.y,d[10]=-h.z,d[11]=0,d[12]=a.x,d[13]=a.y,d[14]=a.z,d[15]=1,d):new p(k.x,i.x,-h.x,a.x,k.y,i.y,-h.y,a.y,k.z,i.z,-h.z,a.z,0,0,0,1)},r.northUpEastToFixedFrame=function(a,b,d){if(n.equalsEpsilon(a.x,0,n.EPSILON14)&&n.equalsEpsilon(a.y,0,n.EPSILON14)){var g=n.sign(a.z);return f(d)?(d[0]=-g,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=0,d[6]=g,d[7]=0,d[8]=0,d[9]=1,d[10]=0,d[11]=0,d[12]=a.x,d[13]=a.y,d[14]=a.z,d[15]=1,d):new p(-g,0,0,a.x,0,0,1,a.y,0,g,0,a.z,0,0,0,1)}var h=s,i=t,k=u;return b=e(b,j.WGS84),b.geodeticSurfaceNormal(a,h),i.x=-a.y,i.y=a.x,i.z=0,c.normalize(i,i),c.cross(h,i,k),f(d)?(d[0]=k.x,d[1]=k.y,d[2]=k.z,d[3]=0,d[4]=h.x,d[5]=h.y,d[6]=h.z,d[7]=0,d[8]=i.x,d[9]=i.y,d[10]=i.z,d[11]=0,d[12]=a.x,d[13]=a.y,d[14]=a.z,d[15]=1,d):new p(k.x,h.x,i.x,a.x,k.y,h.y,i.y,a.y,k.z,h.z,i.z,a.z,0,0,0,1)};var y=24110.54841,z=8640184.812866,A=.093104,B=-62e-7,C=1.1772758384668e-19,D=72921158553e-15,E=n.TWO_PI/86400,F=new m;r.computeTemeToPseudoFixedMatrix=function(a,b){F=m.addSeconds(a,-m.computeTaiMinusUtc(a),F);var c,d=F.dayNumber,e=F.secondsOfDay,g=d-2451545;c=e>=43200?(g+.5)/q.DAYS_PER_JULIAN_CENTURY:(g-.5)/q.DAYS_PER_JULIAN_CENTURY;var h=y+c*(z+c*(A+c*B)),i=h*E%n.TWO_PI,j=D+C*(d-2451545.5),k=(e+.5*q.SECONDS_PER_DAY)%q.SECONDS_PER_DAY,l=i+j*k,p=Math.cos(l),r=Math.sin(l);return f(b)?(b[0]=p,b[1]=-r,b[2]=0,b[3]=r,b[4]=p,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b):new o(p,r,0,-r,p,0,0,0,1)},r.iau2006XysData=new k,r.earthOrientationParameters=h.NONE;var G=32.184,H=2451545;r.preloadIcrfFixed=function(b){var c=b.start.dayNumber,d=b.start.secondsOfDay+G,e=b.stop.dayNumber,f=b.stop.secondsOfDay+G,g=r.iau2006XysData.preload(c,d,e,f),h=r.earthOrientationParameters.getPromiseToLoad();return a.all([g,h])},r.computeIcrfToFixedMatrix=function(a,b){f(b)||(b=new o);var c=r.computeFixedToIcrfMatrix(a,b);return f(c)?o.transpose(c,b):void 0};var I=new l(0,0,0),J=new i(0,0,0,0,0,0),K=new o,L=new o;r.computeFixedToIcrfMatrix=function(a,b){f(b)||(b=new o);var c=r.earthOrientationParameters.compute(a,J);if(!f(c))return void 0;var d=a.dayNumber,e=a.secondsOfDay+G,g=r.iau2006XysData.computeXysRadians(d,e,I);if(!f(g))return void 0;var h=g.x+c.xPoleOffset,i=g.y+c.yPoleOffset,j=1/(1+Math.sqrt(1-h*h-i*i)),k=K;k[0]=1-j*h*h,k[3]=-j*h*i,k[6]=h,k[1]=-j*h*i,k[4]=1-j*i*i,k[7]=i,k[2]=-h,k[5]=-i,k[8]=1-j*(h*h+i*i);var l=o.fromRotationZ(-g.s,L),p=o.multiply(k,l,K),s=a.dayNumber,t=a.secondsOfDay-m.computeTaiMinusUtc(a)+c.ut1MinusUtc,u=s-2451545,v=t/q.SECONDS_PER_DAY,w=.779057273264+v+.00273781191135448*(u+v);w=w%1*n.TWO_PI;var x=o.fromRotationZ(w,L),y=o.multiply(p,x,K),z=Math.cos(c.xPoleWander),A=Math.cos(c.yPoleWander),B=Math.sin(c.xPoleWander),C=Math.sin(c.yPoleWander),D=d-H+e/q.SECONDS_PER_DAY;D/=36525;var E=-47e-6*D*n.RADIANS_PER_DEGREE/3600,F=Math.cos(E),M=Math.sin(E),N=L;return N[0]=z*F,N[1]=z*M,N[2]=B,N[3]=-A*M+C*B*F,N[4]=A*F+C*B*M,N[5]=-C*z,N[6]=-C*M-A*B*F,N[7]=C*F-A*B*M,N[8]=A*z,o.multiply(y,N,b)};var M=new d;return r.pointToWindowCoordinates=function(a,b,c,d){return d=r.pointToGLWindowCoordinates(a,b,c,d),d.y=2*b[5]-d.y,d},r.pointToGLWindowCoordinates=function(a,c,e,g){f(g)||(g=new b);var h=M;return p.multiplyByVector(a,d.fromElements(e.x,e.y,e.z,1,h),h),d.multiplyByScalar(h,1/h.w,h),p.multiplyByVector(c,h,h),b.fromCartesian4(h,g)},r}),c("Core/EllipsoidTangentPlane",["./AxisAlignedBoundingBox","./Cartesian2","./Cartesian3","./Cartesian4","./defaultValue","./defined","./defineProperties","./DeveloperError","./Ellipsoid","./IntersectionTests","./Matrix4","./Plane","./Ray","./Transforms"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";var o=new d,p=function(a,b){b=e(b,i.WGS84),a=b.scaleToGeodeticSurface(a);var d=n.eastNorthUpToFixedFrame(a,b);this._ellipsoid=b,this._origin=a,this._xAxis=c.fromCartesian4(k.getColumn(d,0,o)),this._yAxis=c.fromCartesian4(k.getColumn(d,1,o));var f=c.fromCartesian4(k.getColumn(d,2,o));this._plane=l.fromPointNormal(a,f)};g(p.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},origin:{get:function(){return this._origin}}});var q=new a;p.fromPoints=function(b,c){var d=a.fromPoints(b,q);return new p(d.center,c)};var r=new m,s=new c;p.prototype.projectPointOntoPlane=function(a,d){var e=r;e.origin=a,c.normalize(a,e.direction);var g=j.rayPlane(e,this._plane,s);if(f(g)||(c.negate(e.direction,e.direction),g=j.rayPlane(e,this._plane,s)),f(g)){var h=c.subtract(g,this._origin,g),i=c.dot(this._xAxis,h),k=c.dot(this._yAxis,h);return f(d)?(d.x=i,d.y=k,d):new b(i,k)}return void 0},p.prototype.projectPointsOntoPlane=function(a,b){f(b)||(b=[]);for(var c=0,d=a.length,e=0;d>e;e++){var g=this.projectPointOntoPlane(a[e],b[c]);f(g)&&(b[c]=g,c++)}return b.length=c,b};var t=new c;return p.prototype.projectPointsOntoEllipsoid=function(a,b){var d=a.length;f(b)?b.length=d:b=new Array(d);for(var e=this._ellipsoid,g=this._origin,h=this._xAxis,i=this._yAxis,j=t,k=0;d>k;++k){var l=a[k];c.multiplyByScalar(h,l.x,j),f(b[k])||(b[k]=new c);var m=c.add(g,j,b[k]);c.multiplyByScalar(i,l.y,j),c.add(m,j,m),e.scaleToGeocentricSurface(m,m)}return b},p}),c("Core/PolylineVolumeGeometryLibrary",["./Cartesian2","./Cartesian3","./Cartesian4","./Cartographic","./CornerType","./EllipsoidTangentPlane","./Math","./Matrix3","./Matrix4","./PolylinePipeline","./Quaternion","./Transforms"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,b){for(var c=new Array(a.length),d=0;d<a.length;d++){var e=a[d];I=b.cartesianToCartographic(e,I),c[d]=I.height,a[d]=b.scaleToGeodeticSurface(e,e)}return c}function n(a,c,d,e){var f,g=a[0],h=a[1],i=b.angleBetween(g,h),j=Math.ceil(i/e),k=new Array(j);if(c===d){for(f=0;j>f;f++)k[f]=c;return k.push(d),k}var l=d-c,m=l/j;for(f=1;j>f;f++){var n=c+f*m;k[f]=n}return k[0]=c,k.push(d),k}function o(c,d,e,g){var h=new f(e,g),i=h.projectPointOntoPlane(b.add(e,c,V),V),j=h.projectPointOntoPlane(b.add(e,d,W),W),k=a.angleBetween(i,j);return j.x*i.y-j.y*i.x>=0?-k:k}function p(a,c,d,e,f,g,j,k){var m=O,n=P;K=l.eastNorthUpToFixedFrame(a,f,K),m=i.multiplyByPointAsVector(K,J,m),m=b.normalize(m,m);var p=o(m,c,a,f);M=h.fromRotationZ(p,M),Q.z=g,K=i.multiplyTransformation(K,i.fromRotationTranslation(M,Q,L),K);var q=N;q[0]=j;for(var r=0;k>r;r++)for(var s=0;s<d.length;s+=3)n=b.fromArray(d,s,n),n=h.multiplyByVector(q,n,n),n=i.multiplyByPoint(K,n,n),e.push(n.x,n.y,n.z);return e}function q(a,c,d,e,f,g,h){for(var i=0;i<a.length;i+=3){var j=b.fromArray(a,i,R);e=p(j,c,d,e,f,g[i/3],h,1)}return e}function r(a,b){var c=a.length,d=new Array(6*c),e=0,f=b.x+b.width/2,g=b.y+b.height/2,h=a[0];d[e++]=h.x-f,d[e++]=0,d[e++]=h.y-g;for(var i=1;c>i;i++){h=a[i];var j=h.x-f,k=h.y-g;d[e++]=j,d[e++]=0,d[e++]=k,d[e++]=j,d[e++]=0,d[e++]=k}return h=a[0],d[e++]=h.x-f,d[e++]=0,d[e++]=h.y-g,d}function s(a,b){for(var c=a.length,d=new Array(3*c),e=0,f=b.x+b.width/2,g=b.y+b.height/2,h=0;c>h;h++)d[e++]=a[h].x-f,d[e++]=0,d[e++]=a[h].y-g;return d}function t(a,c,d,f,i,j,l,m,n,o){var q,r=b.angleBetween(b.subtract(c,a,F),b.subtract(d,a,G)),s=f===e.BEVELED?0:Math.ceil(r/g.toRadians(5));q=i?h.fromQuaternion(k.fromAxisAngle(b.negate(a,F),r/(s+1),S),U):h.fromQuaternion(k.fromAxisAngle(a,r/(s+1),S),U);var t,u;if(c=b.clone(c,T),s>0)for(var v=o?2:1,w=0;s>w;w++)c=h.multiplyByVector(q,c,c),t=b.subtract(c,a,F),t=b.normalize(t,t),i||(t=b.negate(t,t)),u=j.scaleToGeodeticSurface(c,G),l=p(u,t,m,l,j,n,1,v);else t=b.subtract(c,a,F),t=b.normalize(t,t),i||(t=b.negate(t,t)),u=j.scaleToGeodeticSurface(c,G),l=p(u,t,m,l,j,n,1,1),d=b.clone(d,T),t=b.subtract(d,a,F),t=b.normalize(t,t),i||(t=b.negate(t,t)),u=j.scaleToGeodeticSurface(d,G),l=p(u,t,m,l,j,n,1,1);return l}function u(a,b){return g.equalsEpsilon(a.latitude,b.latitude,g.EPSILON6)&&g.equalsEpsilon(a.longitude,b.longitude,g.EPSILON6)}var v=[new b,new b],w=new b,x=new b,y=new b,z=new b,A=new b,B=new b,C=new b,D=new b,E=new b,F=new b,G=new b,H={},I=new d,J=new b(-1,0,0),K=new i,L=new i,M=new h,N=h.IDENTITY.clone(),O=new b,P=new c,Q=new b,R=new b,S=new k,T=new b,U=new h;H.removeDuplicatesFromShape=function(b){for(var c=b.length,d=[],e=c-1,f=0;c>f;e=f++){var g=b[e],h=b[f];a.equals(g,h)||d.push(h)}return d};var V=new b,W=new b;H.angleIsGreaterThanPi=function(a,c,d,e){var g=new f(d,e),h=g.projectPointOntoPlane(b.add(d,a,V),V),i=g.projectPointOntoPlane(b.add(d,c,W),W);return i.x*h.y-i.y*h.x>=0};var X=new d,Y=new d;return H.removeDuplicatesFromPositions=function(a,b){var c=a.length;if(2>c)return a.slice(0);var d=[];d.push(a[0]);for(var e=1;c>e;++e){var f=a[e-1],g=a[e],h=b.cartesianToCartographic(f,X),i=b.cartesianToCartographic(g,Y);u(h,i)||d.push(g)}return d},H.computePositions=function(a,c,d,f,h){var i=f._ellipsoid,k=m(a,i),l=f._granularity,o=f._cornerType,u=h?r(c,d):s(c,d),G=h?s(c,d):void 0,I=d.height/2,J=d.width/2,K=a.length,L=[],M=h?[]:void 0,N=w,O=x,P=y,Q=z,R=A,S=B,T=C,U=D,V=E,W=a[0],X=a[1];Q=i.geodeticSurfaceNormal(W,Q),N=b.subtract(X,W,N),N=b.normalize(N,N),U=b.cross(Q,N,U),U=b.normalize(U,U);var Y=k[0],Z=k[1];h&&(M=p(W,U,G,M,i,Y+I,1,1)),V=b.clone(W,V),W=X,O=b.negate(N,O);for(var $,_,aa=1;K-1>aa;aa++){var ba=h?2:1;X=a[aa+1],N=b.subtract(X,W,N),N=b.normalize(N,N),P=b.add(N,O,P),P=b.normalize(P,P),Q=i.geodeticSurfaceNormal(W,Q);var ca=!b.equalsEpsilon(b.negate(P,F),Q,g.EPSILON2);if(ca){P=b.cross(P,Q,P),P=b.cross(Q,P,P),P=b.normalize(P,P);var da=1/Math.max(.25,b.magnitude(b.cross(P,O,F))),ea=H.angleIsGreaterThanPi(N,O,W,i);ea?(R=b.add(W,b.multiplyByScalar(P,da*J,P),R),S=b.add(R,b.multiplyByScalar(U,J,S),S),v[0]=b.clone(V,v[0]),v[1]=b.clone(S,v[1]),$=n(v,Y+I,Z+I,l),_=j.generateArc({positions:v,granularity:l,ellipsoid:i}),L=q(_,U,u,L,i,$,1),U=b.cross(Q,N,U),U=b.normalize(U,U),T=b.add(R,b.multiplyByScalar(U,J,T),T),o===e.ROUNDED||o===e.BEVELED?t(R,S,T,o,ea,i,L,u,Z+I,h):(P=b.negate(P,P),L=p(W,P,u,L,i,Z+I,da,ba)),V=b.clone(T,V)):(R=b.add(W,b.multiplyByScalar(P,da*J,P),R),S=b.add(R,b.multiplyByScalar(U,-J,S),S),v[0]=b.clone(V,v[0]),v[1]=b.clone(S,v[1]),$=n(v,Y+I,Z+I,l),_=j.generateArc({positions:v,granularity:l,ellipsoid:i}),L=q(_,U,u,L,i,$,1),U=b.cross(Q,N,U),U=b.normalize(U,U),T=b.add(R,b.multiplyByScalar(U,-J,T),T),o===e.ROUNDED||o===e.BEVELED?t(R,S,T,o,ea,i,L,u,Z+I,h):L=p(W,P,u,L,i,Z+I,da,ba),V=b.clone(T,V)),O=b.negate(N,O)}else L=p(V,U,u,L,i,Y+I,1,1),V=W;Y=Z,Z=k[aa+1],W=X}v[0]=b.clone(V,v[0]),v[1]=b.clone(W,v[1]),$=n(v,Y+I,Z+I,l),_=j.generateArc({positions:v,granularity:l,ellipsoid:i}),L=q(_,U,u,L,i,$,1),h&&(M=p(W,U,G,M,i,Z+I,1,1)),K=L.length;var fa=h?K+M.length:K,ga=new Float64Array(fa);return ga.set(L),h&&ga.set(M,K),ga},H}),c("Core/CorridorGeometryLibrary",["./Cartesian3","./CornerType","./defined","./isArray","./Math","./Matrix3","./PolylinePipeline","./PolylineVolumeGeometryLibrary","./Quaternion"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(c,d,g,h,j){var k=a.angleBetween(a.subtract(d,c,p),a.subtract(g,c,q)),l=h===b.BEVELED?1:Math.ceil(k/e.toRadians(5))+1,m=3*l,n=new Array(m);n[m-3]=g.x,n[m-2]=g.y,n[m-1]=g.z;var o;o=j?f.fromQuaternion(i.fromAxisAngle(a.negate(c,p),k/l,E),F):f.fromQuaternion(i.fromAxisAngle(c,k/l,E),F);var r=0;d=a.clone(d,p);for(var s=0;l>s;s++)d=f.multiplyByVector(o,d,d),n[r++]=d.x,n[r++]=d.y,n[r++]=d.z;return n}function k(c){var d=u,e=v,f=w,g=c[1];e=a.fromArray(c[1],g.length-3,e),f=a.fromArray(c[0],0,f),d=a.multiplyByScalar(a.add(e,f,d),.5,d);var h=j(d,e,f,b.ROUNDED,!1),i=c.length-1,k=c[i-1];g=c[i],e=a.fromArray(k,k.length-3,e),f=a.fromArray(g,0,f),d=a.multiplyByScalar(a.add(e,f,d),.5,d);var l=j(d,e,f,b.ROUNDED,!1);return[h,l]}function l(b,c,d,e){var f=p;return e?f=a.add(b,c,f):(c=a.negate(c,c),f=a.add(b,c,f)),[f.x,f.y,f.z,d.x,d.y,d.z]}function m(b,c,d,e){for(var f=new Array(b.length),g=new Array(b.length),h=a.multiplyByScalar(c,d,p),i=a.negate(h,q),j=0,k=b.length-1,l=0;l<b.length;l+=3){var m=a.fromArray(b,l,r),n=a.add(m,i,s);f[j++]=n.x,f[j++]=n.y,f[j++]=n.z;var o=a.add(m,h,s);g[k--]=o.z,g[k--]=o.y,g[k--]=o.x}return e.push(f,g),e}function n(a,b){for(var c=0;c<a.length;c++)a[c]=b.scaleToGeodeticSurface(a[c],a[c]);return a}var o={},p=new a,q=new a,r=new a,s=new a,t=[new a,new a],u=new a,v=new a,w=new a,x=new a,y=new a,z=new a,A=new a,B=new a,C=new a,D=new a,E=new i,F=new f;o.addAttribute=function(a,b,d,e){var f=b.x,g=b.y,h=b.z;c(d)&&(a[d]=f,a[d+1]=g,a[d+2]=h),c(e)&&(a[e]=h,a[e-1]=g,a[e-2]=f)},o.computePositions=function(c){var d=c.granularity,f=c.positions,i=c.ellipsoid;f=n(f,i);var o=c.width/2,q=c.cornerType,r=c.saveAttributes,s=u,E=v,F=w,G=x,H=y,I=z,J=A,K=B,L=C,M=D,N=[],O=r?[]:void 0,P=r?[]:void 0,Q=f[0],R=f[1];E=a.normalize(a.subtract(R,Q,E),E),s=i.geodeticSurfaceNormal(Q,s),G=a.normalize(a.cross(s,E,G),G),r&&(O.push(G.x,G.y,G.z),P.push(s.x,s.y,s.z)),J=a.clone(Q,J),Q=R,F=a.negate(E,F);var S,T,U=[],V=f.length;for(T=1;V-1>T;T++){s=i.geodeticSurfaceNormal(Q,s),R=f[T+1],E=a.normalize(a.subtract(R,Q,E),E),H=a.normalize(a.add(E,F,H),H);var W=!a.equalsEpsilon(a.negate(H,p),s,e.EPSILON2);if(W){H=a.cross(H,s,H),H=a.cross(s,H,H);var X=o/Math.max(.25,a.magnitude(a.cross(H,F,p))),Y=h.angleIsGreaterThanPi(E,F,Q,i);H=a.multiplyByScalar(H,X,H),Y?(K=a.add(Q,H,K),M=a.add(K,a.multiplyByScalar(G,o,M),M),L=a.add(K,a.multiplyByScalar(G,2*o,L),L),t[0]=a.clone(J,t[0]),t[1]=a.clone(M,t[1]),S=g.generateArc({positions:t,granularity:d,ellipsoid:i}),N=m(S,G,o,N),r&&(O.push(G.x,G.y,G.z),P.push(s.x,s.y,s.z)),I=a.clone(L,I),G=a.normalize(a.cross(s,E,G),G),L=a.add(K,a.multiplyByScalar(G,2*o,L),L),J=a.add(K,a.multiplyByScalar(G,o,J),J),q===b.ROUNDED||q===b.BEVELED?U.push({leftPositions:j(K,I,L,q,Y)}):U.push({leftPositions:l(Q,a.negate(H,H),L,Y)})):(L=a.add(Q,H,L),M=a.add(L,a.negate(a.multiplyByScalar(G,o,M),M),M),K=a.add(L,a.negate(a.multiplyByScalar(G,2*o,K),K),K),t[0]=a.clone(J,t[0]),t[1]=a.clone(M,t[1]),S=g.generateArc({positions:t,granularity:d,ellipsoid:i}),N=m(S,G,o,N),r&&(O.push(G.x,G.y,G.z),P.push(s.x,s.y,s.z)),I=a.clone(K,I),G=a.normalize(a.cross(s,E,G),G),K=a.add(L,a.negate(a.multiplyByScalar(G,2*o,K),K),K),J=a.add(L,a.negate(a.multiplyByScalar(G,o,J),J),J),q===b.ROUNDED||q===b.BEVELED?U.push({rightPositions:j(L,I,K,q,Y)}):U.push({rightPositions:l(Q,H,K,Y)})),F=a.negate(E,F)}Q=R}s=i.geodeticSurfaceNormal(Q,s),t[0]=a.clone(J,t[0]),t[1]=a.clone(Q,t[1]),S=g.generateArc({positions:t,granularity:d,ellipsoid:i}),N=m(S,G,o,N),r&&(O.push(G.x,G.y,G.z),P.push(s.x,s.y,s.z));var Z;return q===b.ROUNDED&&(Z=k(N)),{positions:N,corners:U,lefts:O,normals:P,endPositions:Z}};var G=new a,H=new a;return o.scaleToGeodeticHeight=function(b,c,e,f){var g=b.length,h=d(f)?f:new Array(b.length);h.length=b.length;for(var i=c,j=0;g>j;j+=3){var k=e.scaleToGeodeticSurface(a.fromArray(b,j,H),H),l=G;0!==c&&(l=e.geodeticSurfaceNormal(k,l),l=a.multiplyByScalar(l,i,l),k=a.add(k,l,k)),h[j]=k.x,h[j+1]=k.y,h[j+2]=k.z}return h},o}),c("Core/CorridorGeometry",["./BoundingSphere","./Cartesian3","./ComponentDatatype","./CornerType","./CorridorGeometryLibrary","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./Geometry","./GeometryAttribute","./GeometryAttributes","./IndexDatatype","./Math","./PolylinePipeline","./PrimitiveType","./VertexFormat"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";function r(a,c,d,f,g,h){var i=a.normals,j=a.tangents,k=a.binormals,l=b.normalize(b.cross(d,c,C),C);h.normal&&e.addAttribute(i,c,f,g),h.binormal&&e.addAttribute(k,d,f,g),h.tangent&&e.addAttribute(j,l,f,g)}function s(a,d,f){var h,i,j,o=a.positions,p=a.corners,q=a.endPositions,s=a.lefts,t=a.normals,u=new l,v=0,A=0,E=0;for(i=0;i<o.length;i+=2)j=o[i].length-3,v+=j,E+=2*j,A+=o[i+1].length-3;for(v+=3,A+=3,i=0;i<p.length;i++){h=p[i];var F=p[i].leftPositions;g(F)?(j=F.length,v+=j,E+=j):(j=p[i].rightPositions.length,A+=j,E+=j)}var G,H=g(q);H&&(G=q[0].length-3,v+=G,A+=G,G/=3,E+=6*G);var I,J,K,L,M,N,O=v+A,P=new Float64Array(O),Q=d.normal?new Float32Array(O):void 0,R=d.tangent?new Float32Array(O):void 0,S=d.binormal?new Float32Array(O):void 0,T={normals:Q,tangents:R,binormals:S},U=0,V=O-1,W=w,X=x,Y=G/2,Z=m.createTypedArray(O/3,E),$=0;if(H){N=y,M=z;var _=q[0];for(W=b.fromArray(t,0,W),X=b.fromArray(s,0,X),i=0;Y>i;i++)N=b.fromArray(_,3*(Y-1-i),N),M=b.fromArray(_,3*(Y+i),M),e.addAttribute(P,M,U),e.addAttribute(P,N,void 0,V),r(T,W,X,U,V,d),J=U/3,L=J+1,I=(V-2)/3,K=I-1,Z[$++]=I,Z[$++]=J,Z[$++]=K,Z[$++]=K,Z[$++]=J,Z[$++]=L,U+=3,V-=3}var aa=0,ba=0,ca=o[aa++],da=o[aa++];P.set(ca,U),P.set(da,V-da.length+1),X=b.fromArray(s,ba,X);var ea,fa;for(j=da.length-3,i=0;j>i;i+=3)ea=f.geodeticSurfaceNormal(b.fromArray(ca,i,C),C),fa=f.geodeticSurfaceNormal(b.fromArray(da,j-i,D),D),W=b.normalize(b.add(ea,fa,W),W),r(T,W,X,U,V,d),J=U/3,L=J+1,I=(V-2)/3,K=I-1,Z[$++]=I,Z[$++]=J,Z[$++]=K,Z[$++]=K,Z[$++]=J,Z[$++]=L,U+=3,V-=3;for(ea=f.geodeticSurfaceNormal(b.fromArray(ca,j,C),C),fa=f.geodeticSurfaceNormal(b.fromArray(da,j,D),D),W=b.normalize(b.add(ea,fa,W),W),ba+=3,i=0;i<p.length;i++){var ga;h=p[i];var ha,ia,ja=h.leftPositions,ka=h.rightPositions,la=B,ma=y,na=z;if(W=b.fromArray(t,ba,W),g(ja)){for(r(T,W,X,void 0,V,d),V-=3,ha=L,ia=K,ga=0;ga<ja.length/3;ga++)la=b.fromArray(ja,3*ga,la),Z[$++]=ha,Z[$++]=ia-ga-1,Z[$++]=ia-ga,e.addAttribute(P,la,void 0,V),ma=b.fromArray(P,3*(ia-ga-1),ma),na=b.fromArray(P,3*ha,na),X=b.normalize(b.subtract(ma,na,X),X),r(T,W,X,void 0,V,d),V-=3;la=b.fromArray(P,3*ha,la),ma=b.subtract(b.fromArray(P,3*ia,ma),la,ma),na=b.subtract(b.fromArray(P,3*(ia-ga),na),la,na),X=b.normalize(b.add(ma,na,X),X),r(T,W,X,U,void 0,d),U+=3}else{for(r(T,W,X,U,void 0,d),U+=3,ha=K,ia=L,ga=0;ga<ka.length/3;ga++)la=b.fromArray(ka,3*ga,la),Z[$++]=ha,Z[$++]=ia+ga,Z[$++]=ia+ga+1,e.addAttribute(P,la,U),ma=b.fromArray(P,3*ha,ma),na=b.fromArray(P,3*(ia+ga),na),X=b.normalize(b.subtract(ma,na,X),X),r(T,W,X,U,void 0,d),U+=3;la=b.fromArray(P,3*ha,la),ma=b.subtract(b.fromArray(P,3*(ia+ga),ma),la,ma),na=b.subtract(b.fromArray(P,3*ia,na),la,na),X=b.normalize(b.negate(b.add(na,ma,X),X),X),r(T,W,X,void 0,V,d),V-=3}for(ca=o[aa++],da=o[aa++],ca.splice(0,3),da.splice(da.length-3,3),P.set(ca,U),P.set(da,V-da.length+1),j=da.length-3,ba+=3,X=b.fromArray(s,ba,X),ga=0;ga<da.length;ga+=3)ea=f.geodeticSurfaceNormal(b.fromArray(ca,ga,C),C),fa=f.geodeticSurfaceNormal(b.fromArray(da,j-ga,D),D),W=b.normalize(b.add(ea,fa,W),W),r(T,W,X,U,V,d),L=U/3,J=L-1,K=(V-2)/3,I=K+1,Z[$++]=I,Z[$++]=J,Z[$++]=K,Z[$++]=K,Z[$++]=J,Z[$++]=L,U+=3,V-=3;U-=3,V+=3}if(W=b.fromArray(t,t.length-3,W),r(T,W,X,U,V,d),H){U+=3,V-=3,N=y,M=z;var oa=q[1];for(i=0;Y>i;i++)N=b.fromArray(oa,3*(G-i-1),N),M=b.fromArray(oa,3*i,M),e.addAttribute(P,N,void 0,V),e.addAttribute(P,M,U),r(T,W,X,U,V,d),L=U/3,J=L-1,K=(V-2)/3,I=K+1,Z[$++]=I,Z[$++]=J,Z[$++]=K,Z[$++]=K,Z[$++]=J,Z[$++]=L,U+=3,V-=3}if(u.position=new k({componentDatatype:c.DOUBLE,componentsPerAttribute:3,values:P}),d.st){var pa,qa,ra=new Float32Array(2*(O/3)),sa=0;if(H){v/=3,A/=3;var ta=Math.PI/(G+1);qa=1/(v-G+1),pa=1/(A-G+1);var ua,va=G/2;for(i=va+1;G+1>i;i++)ua=n.PI_OVER_TWO+ta*i,ra[sa++]=pa*(1+Math.cos(ua)),ra[sa++]=.5*(1+Math.sin(ua));for(i=1;A-G+1>i;i++)ra[sa++]=i*pa,ra[sa++]=0;for(i=G;i>va;i--)ua=n.PI_OVER_TWO-i*ta,ra[sa++]=1-pa*(1+Math.cos(ua)),ra[sa++]=.5*(1+Math.sin(ua));for(i=va;i>0;i--)ua=n.PI_OVER_TWO-ta*i,ra[sa++]=1-qa*(1+Math.cos(ua)),ra[sa++]=.5*(1+Math.sin(ua));for(i=v-G;i>0;i--)ra[sa++]=i*qa,ra[sa++]=1;for(i=1;va+1>i;i++)ua=n.PI_OVER_TWO+ta*i,ra[sa++]=qa*(1+Math.cos(ua)),ra[sa++]=.5*(1+Math.sin(ua))}else{for(v/=3,A/=3,qa=1/(v-1),pa=1/(A-1),i=0;A>i;i++)ra[sa++]=i*pa,ra[sa++]=0;for(i=v;i>0;i--)ra[sa++]=(i-1)*qa,ra[sa++]=1}u.st=new k({componentDatatype:c.FLOAT,componentsPerAttribute:2,values:ra})}return d.normal&&(u.normal=new k({componentDatatype:c.FLOAT,componentsPerAttribute:3,values:T.normals})),d.tangent&&(u.tangent=new k({componentDatatype:c.FLOAT,componentsPerAttribute:3,values:T.tangents})),d.binormal&&(u.binormal=new k({componentDatatype:c.FLOAT,componentsPerAttribute:3,values:T.binormals})),{attributes:u,indices:Z}}function t(a,c){if(!(c.normal||c.binormal||c.tangent||c.st))return a;var d,f,g=a.position.values;(c.normal||c.binormal)&&(d=a.normal.values,f=a.binormal.values);var h,i=a.position.values.length/18,j=3*i,k=2*i,l=2*j;if(c.normal||c.binormal||c.tangent){var m=c.normal?new Float32Array(6*j):void 0,n=c.binormal?new Float32Array(6*j):void 0,o=c.tangent?new Float32Array(6*j):void 0,p=w,q=x,r=y,s=z,t=A,u=B,v=l;for(h=0;j>h;h+=3){var C=v+l;p=b.fromArray(g,h,p),q=b.fromArray(g,h+j,q),r=b.fromArray(g,(h+3)%j,r),q=b.subtract(q,p,q),r=b.subtract(r,p,r),s=b.normalize(b.cross(q,r,s),s),c.normal&&(e.addAttribute(m,s,C),e.addAttribute(m,s,C+3),e.addAttribute(m,s,v),e.addAttribute(m,s,v+3)),(c.tangent||c.binormal)&&(u=b.fromArray(d,h,u),c.binormal&&(e.addAttribute(n,u,C),e.addAttribute(n,u,C+3),e.addAttribute(n,u,v),e.addAttribute(n,u,v+3)),c.tangent&&(t=b.normalize(b.cross(u,s,t),t),e.addAttribute(o,t,C),e.addAttribute(o,t,C+3),e.addAttribute(o,t,v),e.addAttribute(o,t,v+3))),v+=6}if(c.normal){for(m.set(d),h=0;j>h;h+=3)m[h+j]=-d[h],m[h+j+1]=-d[h+1],m[h+j+2]=-d[h+2];a.normal.values=m}else a.normal=void 0;if(c.binormal?(n.set(f),n.set(f,j),a.binormal.values=n):a.binormal=void 0,c.tangent){var D=a.tangent.values;o.set(D),o.set(D,j),a.tangent.values=o}}if(c.st){var E=a.st.values,F=new Float32Array(6*k);F.set(E),F.set(E,k);for(var G=2*k,H=0;2>H;H++){for(F[G++]=E[0],F[G++]=E[1],h=2;k>h;h+=2){var I=E[h],J=E[h+1];F[G++]=I,F[G++]=J,F[G++]=I,F[G++]=J}F[G++]=E[0],F[G++]=E[1]}a.st.values=F}return a}function u(a,b,c){c[b++]=a[0],c[b++]=a[1],c[b++]=a[2];for(var d=3;d<a.length;d+=3){var e=a[d],f=a[d+1],g=a[d+2];c[b++]=e,c[b++]=f,c[b++]=g,c[b++]=e,c[b++]=f,c[b++]=g}return c[b++]=a[0],c[b++]=a[1],c[b++]=a[2],c}function v(a,b){var c=new q({position:b.positon,normal:b.normal||b.binormal,tangent:b.tangent,binormal:b.normal||b.binormal,st:b.st}),d=a.ellipsoid,f=e.computePositions(a),g=s(f,c,d),h=a.height,i=a.extrudedHeight,j=g.attributes,k=g.indices,l=j.position.values,n=l.length,o=new Float64Array(6*n),p=new Float64Array(n);p.set(l);var r=new Float64Array(4*n);l=e.scaleToGeodeticHeight(l,h,d,l),r=u(l,0,r),p=e.scaleToGeodeticHeight(p,i,d,p),r=u(p,2*n,r),o.set(l),o.set(p,n),o.set(r,2*n),j.position.values=o,n/=3;var v,w=k.length,x=n+n,y=m.createTypedArray(o.length/3,2*w+3*x);y.set(k);var z=w;for(v=0;w>v;v+=3){var A=k[v],B=k[v+1],C=k[v+2];y[z++]=C+n,y[z++]=B+n,y[z++]=A+n}j=t(j,b);var D,E,F,G;for(v=0;x>v;v+=2)D=v+x,E=D+x,F=D+1,G=E+1,y[z++]=D,y[z++]=E,y[z++]=F,y[z++]=F,y[z++]=E,y[z++]=G;return{attributes:j,indices:y}}var w=new b,x=new b,y=new b,z=new b,A=new b,B=new b,C=new b,D=new b,E=function(a){a=f(a,f.EMPTY_OBJECT);var b=a.positions,c=a.width;this._positions=b,this._width=c,this._ellipsoid=f(a.ellipsoid,i.WGS84),this._height=f(a.height,0),this._extrudedHeight=f(a.extrudedHeight,this._height),this._cornerType=f(a.cornerType,d.ROUNDED),this._vertexFormat=f(a.vertexFormat,q.DEFAULT),this._granularity=f(a.granularity,n.RADIANS_PER_DEGREE),this._workerName="createCorridorGeometry"};return E.createGeometry=function(b){var c=b._positions,d=b._height,f=b._extrudedHeight,h=d!==f,i=o.removeDuplicates(c);g(i)||(i=c);var k,l=b._ellipsoid,m=b._vertexFormat,n={ellipsoid:l,positions:i,width:b._width,cornerType:b._cornerType,granularity:b._granularity,saveAttributes:!0};if(h){var q=Math.max(d,f);f=Math.min(d,f),d=q,n.height=d,n.extrudedHeight=f,k=v(n,m)}else{var r=e.computePositions(n);k=s(r,m,l),k.attributes.position.values=e.scaleToGeodeticHeight(k.attributes.position.values,d,l,k.attributes.position.values)}var t=k.attributes,u=a.fromVertices(t.position.values,void 0,3);return m.position||(k.attributes.position.values=void 0),new j({attributes:t,indices:k.indices,primitiveType:p.TRIANGLES,boundingSphere:u})},E}),c("Core/CorridorOutlineGeometry",["./BoundingSphere","./Cartesian3","./ComponentDatatype","./CornerType","./CorridorGeometryLibrary","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./Geometry","./GeometryAttribute","./GeometryAttributes","./IndexDatatype","./Math","./PolylinePipeline","./PrimitiveType"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";function q(a,f){var h,i,j,n=[],o=a.positions,p=a.corners,q=a.endPositions,r=new l,v=0,w=0,x=0;for(i=0;i<o.length;i+=2)j=o[i].length-3,v+=j,x+=4*(j/3),w+=o[i+1].length-3;for(v+=3,w+=3,i=0;i<p.length;i++){h=p[i];var y=p[i].leftPositions;g(y)?(j=y.length,v+=j,x+=2*(j/3)):(j=p[i].rightPositions.length,w+=j,x+=2*(j/3))}var z,A=g(q);A&&(z=q[0].length-3,v+=z,w+=z,z/=3,x+=4*z);var B,C,D,E,F,G,H=v+w,I=new Float64Array(H),J=0,K=H-1,L=z/2,M=m.createTypedArray(H/3,x+4),N=0;if(M[N++]=J/3,M[N++]=(K-2)/3,A){n.push(J/3),G=s,F=t;var O=q[0];for(i=0;L>i;i++)G=b.fromArray(O,3*(L-1-i),G),F=b.fromArray(O,3*(L+i),F),e.addAttribute(I,F,J),e.addAttribute(I,G,void 0,K),C=J/3,E=C+1,B=(K-2)/3,D=B-1,M[N++]=B,M[N++]=D,M[N++]=C,M[N++]=E,J+=3,K-=3}var P=0,Q=o[P++],R=o[P++];for(I.set(Q,J),I.set(R,K-R.length+1),j=R.length-3,n.push(J/3,(K-2)/3),i=0;j>i;i+=3)C=J/3,E=C+1,B=(K-2)/3,D=B-1,M[N++]=B,M[N++]=D,M[N++]=C,M[N++]=E,J+=3,K-=3;for(i=0;i<p.length;i++){var S;h=p[i];var T,U=h.leftPositions,V=h.rightPositions,W=u;if(g(U)){for(K-=3,T=D,n.push(E),S=0;S<U.length/3;S++)W=b.fromArray(U,3*S,W),M[N++]=T-S-1,M[N++]=T-S,e.addAttribute(I,W,void 0,K),K-=3;n.push(T-Math.floor(U.length/6)),f===d.BEVELED&&n.push((K-2)/3+1),J+=3}else{for(J+=3,T=E,n.push(D),S=0;S<V.length/3;S++)W=b.fromArray(V,3*S,W),M[N++]=T+S,M[N++]=T+S+1,e.addAttribute(I,W,J),J+=3;n.push(T+Math.floor(V.length/6)),f===d.BEVELED&&n.push(J/3-1),K-=3}for(Q=o[P++],R=o[P++],Q.splice(0,3),R.splice(R.length-3,3),I.set(Q,J),I.set(R,K-R.length+1),j=R.length-3,S=0;S<R.length;S+=3)E=J/3,C=E-1,D=(K-2)/3,B=D+1,M[N++]=B,M[N++]=D,M[N++]=C,M[N++]=E,J+=3,K-=3;J-=3,K+=3,n.push(J/3,(K-2)/3)}if(A){J+=3,K-=3,G=s,F=t;var X=q[1];for(i=0;L>i;i++)G=b.fromArray(X,3*(z-i-1),G),F=b.fromArray(X,3*i,F),e.addAttribute(I,G,void 0,K),e.addAttribute(I,F,J),E=J/3,C=E-1,D=(K-2)/3,B=D+1,M[N++]=B,M[N++]=D,M[N++]=C,M[N++]=E,J+=3,K-=3;n.push(J/3)}else n.push(J/3,(K-2)/3);return M[N++]=J/3,M[N++]=(K-2)/3,r.position=new k({componentDatatype:c.DOUBLE,componentsPerAttribute:3,values:I}),{attributes:r,indices:M,wallIndices:n}}function r(a){var b=a.ellipsoid,c=e.computePositions(a),d=q(c,a.cornerType),f=d.wallIndices,g=a.height,h=a.extrudedHeight,i=d.attributes,j=d.indices,k=i.position.values,l=k.length,n=new Float64Array(l);n.set(k);var o=new Float64Array(2*l);k=e.scaleToGeodeticHeight(k,g,b,k),n=e.scaleToGeodeticHeight(n,h,b,n),o.set(k),o.set(n,l),i.position.values=o,l/=3;var p,r=j.length,s=m.createTypedArray(o.length/3,2*(r+f.length));s.set(j);var t=r;for(p=0;r>p;p+=2){var u=j[p],v=j[p+1];s[t++]=u+l,s[t++]=v+l}var w,x;for(p=0;p<f.length;p++)w=f[p],x=w+l,s[t++]=w,s[t++]=x;return{attributes:i,indices:s}}var s=new b,t=new b,u=new b,v=function(a){a=f(a,f.EMPTY_OBJECT);var b=a.positions,c=a.width;this._positions=b,this._width=c,this._ellipsoid=f(a.ellipsoid,i.WGS84),this._height=f(a.height,0),this._extrudedHeight=f(a.extrudedHeight,this._height),this._cornerType=f(a.cornerType,d.ROUNDED),this._granularity=f(a.granularity,n.RADIANS_PER_DEGREE),this._workerName="createCorridorOutlineGeometry"};return v.createGeometry=function(b){var c=b._positions,d=b._height,f=b._extrudedHeight,h=d!==f,i=o.removeDuplicates(c);g(i)||(i=c);var k,l=b._ellipsoid,m={ellipsoid:l,positions:i,width:b._width,cornerType:b._cornerType,granularity:b._granularity,saveAttributes:!1};if(h){var n=Math.max(d,f);f=Math.min(d,f),d=n,m.height=d,m.extrudedHeight=f,k=r(m)}else{var s=e.computePositions(m);k=q(s,m.cornerType),k.attributes.position.values=e.scaleToGeodeticHeight(k.attributes.position.values,d,l,k.attributes.position.values)}var t=k.attributes,u=a.fromVertices(t.position.values,void 0,3);return new j({attributes:t,indices:k.indices,primitiveType:p.LINES,boundingSphere:u})},v}),c("Core/CylinderGeometryLibrary",["./Math"],function(a){"use strict";var b={};return b.computePositions=function(b,c,d,e,f){var g,h=.5*b,i=-h,j=e+e,k=f?2*j:j,l=new Float64Array(3*k),m=0,n=0,o=f?3*j:0,p=f?3*(j+e):3*e;for(g=0;e>g;g++){var q=g/e*a.TWO_PI,r=Math.cos(q),s=Math.sin(q),t=r*d,u=s*d,v=r*c,w=s*c;l[n+o]=t,l[n+o+1]=u,l[n+o+2]=i,l[n+p]=v,l[n+p+1]=w,l[n+p+2]=h,n+=3,f&&(l[m++]=t,l[m++]=u,l[m++]=i,l[m++]=v,l[m++]=w,l[m++]=h)}return l},b}),c("Core/CylinderGeometry",["./BoundingSphere","./Cartesian2","./Cartesian3","./ComponentDatatype","./CylinderGeometryLibrary","./defaultValue","./defined","./DeveloperError","./Geometry","./GeometryAttribute","./GeometryAttributes","./IndexDatatype","./Math","./PrimitiveType","./VertexFormat"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";var p=new b,q=new c,r=new c,s=new c,t=new c,u=function(a){a=f(a,f.EMPTY_OBJECT);var b=a.length,c=a.topRadius,d=a.bottomRadius,e=f(a.vertexFormat,o.DEFAULT),g=f(a.slices,128);this._length=b,this._topRadius=c,this._bottomRadius=d,this._vertexFormat=e,this._slices=g,this._workerName="createCylinderGeometry"};return u.createGeometry=function(f){var g,h=f._length,o=f._topRadius,u=f._bottomRadius,v=f._vertexFormat,w=f._slices,x=w+w,y=w+x,z=x+x,A=e.computePositions(h,o,u,w,!0),B=v.st?new Float32Array(2*z):void 0,C=v.normal?new Float32Array(3*z):void 0,D=v.tangent?new Float32Array(3*z):void 0,E=v.binormal?new Float32Array(3*z):void 0,F=v.normal||v.tangent||v.binormal;if(F){var G=v.tangent||v.binormal,H=0,I=0,J=0,K=q;K.z=0;var L=s,M=r;for(g=0;w>g;g++){var N=g/w*m.TWO_PI,O=Math.cos(N),P=Math.sin(N);F&&(K.x=O,K.y=P,G&&(L=c.normalize(c.cross(c.UNIT_Z,K,L),L)),v.normal&&(C[H++]=O,C[H++]=P,C[H++]=0,C[H++]=O,C[H++]=P,C[H++]=0),v.tangent&&(D[I++]=L.x,D[I++]=L.y,D[I++]=L.z,D[I++]=L.x,D[I++]=L.y,D[I++]=L.z),v.binormal&&(M=c.normalize(c.cross(K,L,M),M),E[J++]=M.x,E[J++]=M.y,E[J++]=M.z,E[J++]=M.x,E[J++]=M.y,E[J++]=M.z))}for(g=0;w>g;g++)v.normal&&(C[H++]=0,C[H++]=0,C[H++]=-1),v.tangent&&(D[I++]=1,D[I++]=0,D[I++]=0),v.binormal&&(E[J++]=0,E[J++]=-1,E[J++]=0);for(g=0;w>g;g++)v.normal&&(C[H++]=0,C[H++]=0,C[H++]=1),v.tangent&&(D[I++]=1,D[I++]=0,D[I++]=0),v.binormal&&(E[J++]=0,E[J++]=1,E[J++]=0)}var Q=12*w-12,R=l.createTypedArray(z,Q),S=0,T=0;for(g=0;w-1>g;g++)R[S++]=T,R[S++]=T+2,R[S++]=T+3,R[S++]=T,R[S++]=T+3,R[S++]=T+1,T+=2;for(R[S++]=x-2,R[S++]=0,R[S++]=1,R[S++]=x-2,R[S++]=1,R[S++]=x-1,g=1;w-1>g;g++)R[S++]=x+g+1,R[S++]=x+g,R[S++]=x;for(g=1;w-1>g;g++)R[S++]=y,R[S++]=y+g,R[S++]=y+g+1;var U=0;if(v.st){var V=Math.max(o,u);for(g=0;z>g;g++){var W=c.fromArray(A,3*g,t);B[U++]=(W.x+V)/(2*V),B[U++]=(W.y+V)/(2*V)}}var X=new k;v.position&&(X.position=new j({componentDatatype:d.DOUBLE,componentsPerAttribute:3,values:A})),v.normal&&(X.normal=new j({componentDatatype:d.FLOAT,componentsPerAttribute:3,values:C})),v.tangent&&(X.tangent=new j({componentDatatype:d.FLOAT,componentsPerAttribute:3,values:D})),v.binormal&&(X.binormal=new j({componentDatatype:d.FLOAT,componentsPerAttribute:3,values:E})),v.st&&(X.st=new j({
componentDatatype:d.FLOAT,componentsPerAttribute:2,values:B})),p.x=.5*h,p.y=Math.max(u,o);var Y=new a(c.ZERO,b.magnitude(p));return new i({attributes:X,indices:R,primitiveType:n.TRIANGLES,boundingSphere:Y})},u}),c("Core/CylinderOutlineGeometry",["./BoundingSphere","./Cartesian2","./Cartesian3","./ComponentDatatype","./CylinderGeometryLibrary","./defaultValue","./defined","./DeveloperError","./Geometry","./GeometryAttribute","./GeometryAttributes","./IndexDatatype","./PrimitiveType"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=new b,o=function(a){a=f(a,f.EMPTY_OBJECT);var b=a.length,c=a.topRadius,d=a.bottomRadius,e=f(a.slices,128),g=Math.max(f(a.numberOfVerticalLines,16),0);this._length=b,this._topRadius=c,this._bottomRadius=d,this._slices=e,this._numberOfVerticalLines=g,this._workerName="createCylinderOutlineGeometry"};return o.createGeometry=function(f){var g,h=f._length,o=f._topRadius,p=f._bottomRadius,q=f._slices,r=f._numberOfVerticalLines,s=2*q,t=e.computePositions(h,o,p,q,!1),u=2*q;if(r>0){var v=Math.min(r,q);g=Math.round(q/v),u+=v}for(var w=l.createTypedArray(s,2*u),x=0,y=0;q-1>y;y++)w[x++]=y,w[x++]=y+1,w[x++]=y+q,w[x++]=y+1+q;if(w[x++]=q-1,w[x++]=0,w[x++]=q+q-1,w[x++]=q,r>0)for(y=0;q>y;y+=g)w[x++]=y,w[x++]=y+q;var z=new k;z.position=new j({componentDatatype:d.DOUBLE,componentsPerAttribute:3,values:t}),n.x=.5*h,n.y=Math.max(p,o);var A=new a(c.ZERO,b.magnitude(n));return new i({attributes:z,indices:w,primitiveType:m.LINES,boundingSphere:A})},o}),c("Core/DefaultProxy",[],function(){"use strict";var a=function(a){this.proxy=a};return a.prototype.getURL=function(a){return this.proxy+"?"+encodeURIComponent(a)},a}),c("ThirdParty/Tween",[],function(){void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var a=a||function(){var a=[];return{REVISION:"13",getAll:function(){return a},removeAll:function(){a=[]},add:function(b){a.push(b)},remove:function(b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)},update:function(b){if(0===a.length)return!1;var c=0;for(b=void 0!==b?b:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();c<a.length;)a[c].update(b)?c++:a.splice(c,1);return!0}}}();return a.Tween=function(b){var c=b,d={},e={},f={},g=1e3,h=0,i=!1,j=!1,k=!1,l=0,m=null,n=a.Easing.Linear.None,o=a.Interpolation.Linear,p=[],q=null,r=!1,s=null,t=null,u=null;for(var v in b)d[v]=parseFloat(b[v],10);this.to=function(a,b){return void 0!==b&&(g=b),e=a,this},this.start=function(b){a.add(this),j=!0,r=!1,m=void 0!==b?b:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),m+=l;for(var g in e){if(e[g]instanceof Array){if(0===e[g].length)continue;e[g]=[c[g]].concat(e[g])}d[g]=c[g],d[g]instanceof Array==!1&&(d[g]*=1),f[g]=d[g]||0}return this},this.stop=function(){return j?(a.remove(this),j=!1,null!==u&&u.call(c),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var a=0,b=p.length;b>a;a++)p[a].stop()},this.delay=function(a){return l=a,this},this.repeat=function(a){return h=a,this},this.yoyo=function(a){return i=a,this},this.easing=function(a){return n=a,this},this.interpolation=function(a){return o=a,this},this.chain=function(){return p=arguments,this},this.onStart=function(a){return q=a,this},this.onUpdate=function(a){return s=a,this},this.onComplete=function(a){return t=a,this},this.onStop=function(a){return u=a,this},this.update=function(a){var b;if(m>a)return!0;r===!1&&(null!==q&&q.call(c),r=!0);var j=(a-m)/g;j=j>1?1:j;var u=n(j);for(b in e){var v=d[b]||0,w=e[b];w instanceof Array?c[b]=o(w,u):("string"==typeof w&&(w=v+parseFloat(w,10)),"number"==typeof w&&(c[b]=v+(w-v)*u))}if(null!==s&&s.call(c,u),1==j){if(h>0){isFinite(h)&&h--;for(b in f){if("string"==typeof e[b]&&(f[b]=f[b]+parseFloat(e[b],10)),i){var x=f[b];f[b]=e[b],e[b]=x}d[b]=f[b]}return i&&(k=!k),m=a+l,!0}null!==t&&t.call(c);for(var y=0,z=p.length;z>y;y++)p[y].start(a);return!1}return!0}},a.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return--a*a*a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),-(c*Math.pow(2,10*(a-=1))*Math.sin((a-b)*2*Math.PI/d)))},Out:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),c*Math.pow(2,-10*a)*Math.sin((a-b)*2*Math.PI/d)+1)},InOut:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),(a*=2)<1?-.5*c*Math.pow(2,10*(a-=1))*Math.sin((a-b)*2*Math.PI/d):.5*c*Math.pow(2,-10*(a-=1))*Math.sin((a-b)*2*Math.PI/d)+1)}},Back:{In:function(a){var b=1.70158;return a*a*((b+1)*a-b)},Out:function(a){var b=1.70158;return--a*a*((b+1)*a+b)+1},InOut:function(a){var b=2.5949095;return(a*=2)<1?.5*a*a*((b+1)*a-b):.5*((a-=2)*a*((b+1)*a+b)+2)}},Bounce:{In:function(b){return 1-a.Easing.Bounce.Out(1-b)},Out:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},InOut:function(b){return.5>b?.5*a.Easing.Bounce.In(2*b):.5*a.Easing.Bounce.Out(2*b-1)+.5}}},a.Interpolation={Linear:function(b,c){var d=b.length-1,e=d*c,f=Math.floor(e),g=a.Interpolation.Utils.Linear;return 0>c?g(b[0],b[1],e):c>1?g(b[d],b[d-1],d-e):g(b[f],b[f+1>d?d:f+1],e-f)},Bezier:function(b,c){var d,e=0,f=b.length-1,g=Math.pow,h=a.Interpolation.Utils.Bernstein;for(d=0;f>=d;d++)e+=g(1-c,f-d)*g(c,d)*b[d]*h(f,d);return e},CatmullRom:function(b,c){var d=b.length-1,e=d*c,f=Math.floor(e),g=a.Interpolation.Utils.CatmullRom;return b[0]===b[d]?(0>c&&(f=Math.floor(e=d*(1+c))),g(b[(f-1+d)%d],b[f],b[(f+1)%d],b[(f+2)%d],e-f)):0>c?b[0]-(g(b[0],b[0],b[1],b[1],-e)-b[0]):c>1?b[d]-(g(b[d],b[d],b[d-1],b[d-1],e-d)-b[d]):g(b[f?f-1:0],b[f],b[f+1>d?d:f+1],b[f+2>d?d:f+2],e-f)},Utils:{Linear:function(a,b,c){return(b-a)*c+a},Bernstein:function(b,c){var d=a.Interpolation.Utils.Factorial;return d(b)/d(c)/d(b-c)},Factorial:function(){var a=[1];return function(b){var c,d=1;if(a[b])return a[b];for(c=b;c>1;c--)d*=c;return a[b]=d}}(),CatmullRom:function(a,b,c,d,e){var f=.5*(c-a),g=.5*(d-b),h=e*e,i=e*h;return(2*b-2*c+f+g)*i+(-3*b+3*c-2*f-g)*h+f*e+b}}},a}),c("Core/EasingFunction",["../ThirdParty/Tween","./freezeObject"],function(a,b){"use strict";var c={LINEAR_NONE:a.Easing.Linear.None,QUADRACTIC_IN:a.Easing.Quadratic.In,QUADRACTIC_OUT:a.Easing.Quadratic.Out,QUADRACTIC_IN_OUT:a.Easing.Quadratic.InOut,CUBIC_IN:a.Easing.Cubic.In,CUBIC_OUT:a.Easing.Cubic.Out,CUBIC_IN_OUT:a.Easing.Cubic.InOut,QUARTIC_IN:a.Easing.Quartic.In,QUARTIC_OUT:a.Easing.Quartic.Out,QUARTIC_IN_OUT:a.Easing.Quartic.InOut,QUINTIC_IN:a.Easing.Quintic.In,QUINTIC_OUT:a.Easing.Quintic.Out,QUINTIC_IN_OUT:a.Easing.Quintic.InOut,SINUSOIDAL_IN:a.Easing.Sinusoidal.In,SINUSOIDAL_OUT:a.Easing.Sinusoidal.Out,SINUSOIDAL_IN_OUT:a.Easing.Sinusoidal.InOut,EXPONENTIAL_IN:a.Easing.Exponential.In,EXPONENTIAL_OUT:a.Easing.Exponential.Out,EXPONENTIAL_IN_OUT:a.Easing.Exponential.InOut,CIRCULAR_IN:a.Easing.Circular.In,CIRCULAR_OUT:a.Easing.Circular.Out,CIRCULAR_IN_OUT:a.Easing.Circular.InOut,ELASTIC_IN:a.Easing.Elastic.In,ELASTIC_OUT:a.Easing.Elastic.Out,ELASTIC_IN_OUT:a.Easing.Elastic.InOut,BACK_IN:a.Easing.Back.In,BACK_OUT:a.Easing.Back.Out,BACK_IN_OUT:a.Easing.Back.InOut,BOUNCE_IN:a.Easing.Bounce.In,BOUNCE_OUT:a.Easing.Bounce.Out,BOUNCE_IN_OUT:a.Easing.Bounce.InOut};return b(c)}),c("Core/EllipsoidGeometry",["./BoundingSphere","./Cartesian2","./Cartesian3","./ComponentDatatype","./defaultValue","./DeveloperError","./Ellipsoid","./Geometry","./GeometryAttribute","./GeometryAttributes","./IndexDatatype","./Math","./PrimitiveType","./VertexFormat"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";var o=new c,p=new c,q=new c,r=new c,s=new c,t=new c(1,1,1),u=Math.cos,v=Math.sin,w=function(a){a=e(a,e.EMPTY_OBJECT);var b=e(a.radii,t),d=e(a.stackPartitions,64),f=e(a.slicePartitions,64),g=e(a.vertexFormat,n.DEFAULT);this._radii=c.clone(b),this._stackPartitions=d,this._slicePartitions=f,this._vertexFormat=g,this._workerName="createEllipsoidGeometry"};return w.createGeometry=function(e){var f,n,t=e._radii,w=g.fromCartesian3(t),x=e._vertexFormat,y=e._slicePartitions+1,z=e._stackPartitions+1,A=z*y,B=new Float64Array(3*A),C=6*(y-1)*(z-1),D=k.createTypedArray(A,C),E=x.normal?new Float32Array(3*A):void 0,F=x.tangent?new Float32Array(3*A):void 0,G=x.binormal?new Float32Array(3*A):void 0,H=x.st?new Float32Array(2*A):void 0,I=new Array(y),J=new Array(y),K=0;for(f=0;y>f;f++){var L=l.TWO_PI*f/(y-1);I[f]=u(L),J[f]=v(L),B[K++]=0,B[K++]=0,B[K++]=t.z}for(f=1;z-1>f;f++){var M=Math.PI*f/(z-1),N=v(M),O=t.x*N,P=t.y*N,Q=t.z*u(M);for(n=0;y>n;n++)B[K++]=I[n]*O,B[K++]=J[n]*P,B[K++]=Q}for(f=0;y>f;f++)B[K++]=0,B[K++]=0,B[K++]=-t.z;var R=new j;x.position&&(R.position=new i({componentDatatype:d.DOUBLE,componentsPerAttribute:3,values:B}));var S=0,T=0,U=0,V=0;if(x.st||x.normal||x.tangent||x.binormal){for(f=0;A>f;f++){var W=c.fromArray(B,3*f,o),X=w.geodeticSurfaceNormal(W,p);if(x.st){var Y=b.negate(X,s);b.magnitude(Y)<l.EPSILON6&&(K=3*(f+y*Math.floor(.5*z)),K>B.length&&(K=3*(f-y*Math.floor(.5*z))),c.fromArray(B,K,Y),w.geodeticSurfaceNormal(Y,Y),b.negate(Y,Y)),H[S++]=Math.atan2(Y.y,Y.x)/l.TWO_PI+.5,H[S++]=Math.asin(X.z)/Math.PI+.5}if(x.normal&&(E[T++]=X.x,E[T++]=X.y,E[T++]=X.z),x.tangent||x.binormal){var Z=q;if(y>f||f>A-y-1?(c.cross(c.UNIT_X,X,Z),c.normalize(Z,Z)):(c.cross(c.UNIT_Z,X,Z),c.normalize(Z,Z)),x.tangent&&(F[U++]=Z.x,F[U++]=Z.y,F[U++]=Z.z),x.binormal){var $=c.cross(X,Z,r);c.normalize($,$),G[V++]=$.x,G[V++]=$.y,G[V++]=$.z}}}x.st&&(R.st=new i({componentDatatype:d.FLOAT,componentsPerAttribute:2,values:H})),x.normal&&(R.normal=new i({componentDatatype:d.FLOAT,componentsPerAttribute:3,values:E})),x.tangent&&(R.tangent=new i({componentDatatype:d.FLOAT,componentsPerAttribute:3,values:F})),x.binormal&&(R.binormal=new i({componentDatatype:d.FLOAT,componentsPerAttribute:3,values:G}))}for(K=0,f=0;z>f;f++){var _=f*y,aa=(f+1)*y;for(n=0;y-1>n;n++)D[K++]=aa+n,D[K++]=aa+n+1,D[K++]=_+n+1,D[K++]=aa+n,D[K++]=_+n+1,D[K++]=_+n}return new h({attributes:R,indices:D,primitiveType:m.TRIANGLES,boundingSphere:a.fromEllipsoid(w)})},w}),c("Core/EllipsoidOutlineGeometry",["./BoundingSphere","./Cartesian3","./ComponentDatatype","./defaultValue","./DeveloperError","./Ellipsoid","./Geometry","./GeometryAttribute","./GeometryAttributes","./IndexDatatype","./Math","./PrimitiveType"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=new b(1,1,1),n=Math.cos,o=Math.sin,p=function(a){a=d(a,d.EMPTY_OBJECT);var c=d(a.radii,m),e=d(a.stackPartitions,10),f=d(a.slicePartitions,8),g=d(a.subdivisions,128);this._radii=b.clone(c),this._stackPartitions=e,this._slicePartitions=f,this._subdivisions=g,this._workerName="createEllipsoidOutlineGeometry"};return p.createGeometry=function(b){var d,e,m,p,q,r,s=b._radii,t=f.fromCartesian3(s),u=b._stackPartitions,v=b._slicePartitions,w=b._subdivisions,x=w*(u+v-1),y=x-v+2,z=new Float64Array(3*y),A=j.createTypedArray(y,2*x),B=0,C=new Array(w),D=new Array(w);for(d=0;w>d;d++)m=k.TWO_PI*d/w,C[d]=n(m),D[d]=o(m);for(d=1;u>d;d++)for(p=Math.PI*d/u,q=n(p),r=o(p),e=0;w>e;e++)z[B++]=s.x*C[e]*r,z[B++]=s.y*D[e]*r,z[B++]=s.z*q;for(C.length=v,D.length=v,d=0;v>d;d++)m=k.TWO_PI*d/v,C[d]=n(m),D[d]=o(m);for(z[B++]=0,z[B++]=0,z[B++]=s.z,d=1;w>d;d++)for(p=Math.PI*d/w,q=n(p),r=o(p),e=0;v>e;e++)z[B++]=s.x*C[e]*r,z[B++]=s.y*D[e]*r,z[B++]=s.z*q;for(z[B++]=0,z[B++]=0,z[B++]=-s.z,B=0,d=0;u-1>d;++d){var E=d*w;for(e=0;w-1>e;++e)A[B++]=E+e,A[B++]=E+e+1;A[B++]=E+w-1,A[B++]=E}var F=w*(u-1);for(e=1;v+1>e;++e)A[B++]=F,A[B++]=F+e;for(d=0;w-2>d;++d){var G=d*v+1+F,H=(d+1)*v+1+F;for(e=0;v-1>e;++e)A[B++]=H+e,A[B++]=G+e;A[B++]=H+v-1,A[B++]=G+v-1}var I=z.length/3-1;for(e=I-1;e>I-v-1;--e)A[B++]=I,A[B++]=e;var J=new i({position:new h({componentDatatype:c.DOUBLE,componentsPerAttribute:3,values:z})});return new g({attributes:J,indices:A,primitiveType:l.LINES,boundingSphere:a.fromEllipsoid(t)})},p}),c("Core/EllipsoidTerrainProvider",["./defaultValue","./defined","./defineProperties","./Ellipsoid","./Event","./GeographicTilingScheme","./HeightmapTerrainData","./TerrainProvider"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(c){c=a(c,{}),this._tilingScheme=c.tilingScheme,b(this._tilingScheme)||(this._tilingScheme=new f({ellipsoid:a(c.ellipsoid,d.WGS84)})),this._levelZeroMaximumGeometricError=h.getEstimatedLevelZeroGeometricErrorForAHeightmap(this._tilingScheme.ellipsoid,64,this._tilingScheme.getNumberOfXTilesAtLevel(0));var i=16,j=16;this._terrainData=new g({buffer:new Uint8Array(i*j),width:16,height:16}),this._errorEvent=new e};return c(i.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return void 0}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return!0}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}}}),i.prototype.requestTileGeometry=function(){return this._terrainData},i.prototype.getLevelMaximumGeometricError=function(a){return this._levelZeroMaximumGeometricError/(1<<a)},i.prototype.getTileDataAvailable=function(){return void 0},i}),c("Core/EllipsoidalOccluder",["./BoundingSphere","./Cartesian3","./defaultValue","./defined","./defineProperties","./DeveloperError","./Rectangle"],function(a,b,c,d,e,f,g){"use strict";function h(a,c,d){var e=a.transformPositionToScaledSpace(c,o),f=b.magnitudeSquared(e),g=Math.sqrt(f),h=b.divideByScalar(e,g,p);f=Math.max(1,f),g=Math.max(1,g);var i=b.dot(h,d),j=b.magnitude(b.cross(h,d,h)),k=1/g,l=Math.sqrt(f-1)*k;return 1/(i*k-j*l)}function i(a,c,d){return 0>=c||c===1/0||c!==c?void 0:b.multiplyByScalar(a,c,d)}function j(a,c){return a.transformPositionToScaledSpace(c,q),b.normalize(q,q)}var k=function(a,c){this._ellipsoid=a,this._cameraPosition=new b,this._cameraPositionInScaledSpace=new b,this._distanceToLimbInScaledSpaceSquared=0,d(c)&&(this.cameraPosition=c)};e(k.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},cameraPosition:{get:function(){return this._cameraPosition},set:function(a){var c=this._ellipsoid,d=c.transformPositionToScaledSpace(a,this._cameraPositionInScaledSpace),e=b.magnitudeSquared(d)-1;b.clone(a,this._cameraPosition),this._cameraPositionInScaledSpace=d,this._distanceToLimbInScaledSpaceSquared=e}}});var l=new b;k.prototype.isPointVisible=function(a){var b=this._ellipsoid,c=b.transformPositionToScaledSpace(a,l);return this.isScaledSpacePointVisible(c)},k.prototype.isScaledSpacePointVisible=function(a){var c=this._cameraPositionInScaledSpace,d=this._distanceToLimbInScaledSpaceSquared,e=b.subtract(a,c,l),f=-b.dot(e,c),g=f>d&&f*f/b.magnitudeSquared(e)>d;return!g},k.prototype.computeHorizonCullingPoint=function(a,c,e){d(e)||(e=new b);for(var f=this._ellipsoid,g=j(f,a),k=0,l=0,m=c.length;m>l;++l){var n=c[l],o=h(f,n,g);k=Math.max(k,o)}return i(g,k,e)};var m=new b;k.prototype.computeHorizonCullingPointFromVertices=function(a,e,f,g,k){d(k)||(k=new b),g=c(g,b.ZERO);for(var l=this._ellipsoid,n=j(l,a),o=0,p=0,q=e.length;q>p;p+=f){m.x=e[p]+g.x,m.y=e[p+1]+g.y,m.z=e[p+2]+g.z;var r=h(l,m,n);o=Math.max(o,r)}return i(n,o,k)};var n=[];k.prototype.computeHorizonCullingPointFromRectangle=function(c,d,e){var f=g.subsample(c,d,0,n),h=a.fromPoints(f);return b.magnitude(h.center)<.1*d.minimumRadius?void 0:this.computeHorizonCullingPoint(h.center,f,e)};var o=new b,p=new b,q=new b;return k}),c("Core/EventHelper",["./defined","./DeveloperError"],function(){"use strict";var a=function(){this._removalFunctions=[]};return a.prototype.add=function(a,b,c){var d=a.addEventListener(b,c);this._removalFunctions.push(d);var e=this;return function(){d();var a=e._removalFunctions;a.splice(a.indexOf(d),1)}},a.prototype.removeAll=function(){for(var a=this._removalFunctions,b=0,c=a.length;c>b;++b)a[b]();a.length=0},a}),c("Core/ExtrapolationType",["./freezeObject"],function(a){"use strict";var b={NONE:0,HOLD:1,EXTRAPOLATE:2};return a(b)}),c("Core/GeometryInstanceAttribute",["./defaultValue","./defined","./DeveloperError"],function(a){"use strict";var b=function(b){b=a(b,a.EMPTY_OBJECT),this.componentDatatype=b.componentDatatype,this.componentsPerAttribute=b.componentsPerAttribute,this.normalize=a(b.normalize,!1),this.value=b.value};return b}),c("Core/HermitePolynomialApproximation",["./defaultValue","./defined","./DeveloperError","./Math"],function(a,b,c,d){"use strict";function e(a,b,c,d,f,g){var h,i,j,k=0;if(d>0){for(i=0;f>i;i++){for(h=!1,j=0;j<g.length&&!h;j++)i===g[j]&&(h=!0);h||(g.push(i),k+=e(a,b,c,d-1,f,g),g.splice(g.length-1,1))}return k}for(k=1,i=0;f>i;i++){for(h=!1,j=0;j<g.length&&!h;j++)i===g[j]&&(h=!0);h||(k*=a-c[b[i]])}return k}function f(a,b,c,e,f,g){for(var h,i,j=-1,k=b.length,l=k*(k+1)/2,m=0;f>m;m++){var n=Math.floor(m*l);for(h=0;k>h;h++)i=b[h]*f*(g+1)+m,a[n+h]=e[i];for(var o=1;k>o;o++){var p=0,q=Math.floor(o*(1-o)/2)+k*o,r=!1;for(h=0;k-o>h;h++){var s,t,u=c[b[h]],v=c[b[h+o]];if(0>=v-u)i=b[h]*f*(g+1)+f*o+m,s=e[i],t=s/d.factorial(o),a[n+q+p]=t,p++;else{var w=Math.floor((o-1)*(2-o)/2)+k*(o-1);s=a[n+w+h+1]-a[n+w+h],t=s/(v-u),a[n+q+p]=t,p++}r=r||0!==s}r&&(j=Math.max(j,o))}}return j}var g=d.factorial,h={type:"Hermite"};h.getRequiredDataPoints=function(b,c){return c=a(c,0),Math.max(Math.floor((b+1)/(c+1)),2)},h.interpolateOrderZero=function(a,c,d,f,h){b(h)||(h=new Array(f));var i,j,k,l,m,n,o=c.length,p=new Array(f);for(i=0;f>i;i++){h[i]=0;var q=new Array(o);for(p[i]=q,j=0;o>j;j++)q[j]=[]}var r=o,s=new Array(r);for(i=0;r>i;i++)s[i]=i;var t=o-1;for(l=0;f>l;l++){for(j=0;r>j;j++)n=s[j]*f+l,p[l][0].push(d[n]);for(i=1;r>i;i++){var u=!1;for(j=0;r-i>j;j++){var v,w=c[s[j]],x=c[s[j+i]];0>=x-w?(n=s[j]*f+f*i+l,v=d[n],p[l][i].push(v/g(i))):(v=p[l][i-1][j+1]-p[l][i-1][j],p[l][i].push(v/(x-w))),u=u||0!==v}u||(t=i-1)}}for(k=0,m=0;m>=k;k++)for(i=k;t>=i;i++){var y=e(a,s,c,k,i,[]);for(l=0;f>l;l++){var z=p[l][i][0];h[l+k*f]+=z*y}}return h};var i=[];return h.interpolate=function(a,c,d,g,h,j,k){var l=g*(j+1);b(k)||(k=new Array(l));for(var m=0;l>m;m++)k[m]=0;for(var n=c.length,o=new Array(n*(h+1)),p=0;n>p;p++)for(var q=0;h+1>q;q++)o[p*(h+1)+q]=p;for(var r=o.length,s=i,t=f(s,o,c,d,g,h),u=[],v=r*(r+1)/2,w=Math.min(t,j),x=0;w>=x;x++)for(p=x;t>=p;p++){u.length=0;for(var y=e(a,o,c,x,p,u),z=Math.floor(p*(1-p)/2)+r*p,A=0;g>A;A++){var B=Math.floor(A*v),C=s[B+z];k[A+x*g]+=C*y}}return k},h}),c("Core/IauOrientationParameters",[],function(){"use strict";var a=function(a,b,c,d){this.rightAscension=a,this.declination=b,this.rotation=c,this.rotationRate=d};return a}),c("Core/Iau2000Orientation",["./defined","./IauOrientationParameters","./JulianDate","./Math","./TimeConstants"],function(a,b,c,d,e){"use strict";var f={},g=32.184,h=2451545,i=-.0529921,j=-.1059842,k=13.0120009,l=13.3407154,m=.9856003,n=26.4057084,o=13.064993,p=.3287146,q=1.7484877,r=-.1589763,s=.0036096,t=.1643573,u=12.9590088,v=new c;return f.ComputeMoon=function(f,w){a(f)||(f=c.now()),v=c.addSeconds(f,g,v);var x=c.totalDays(v)-h,y=x/e.DAYS_PER_JULIAN_CENTURY,z=(125.045+i*x)*d.RADIANS_PER_DEGREE,A=(250.089+j*x)*d.RADIANS_PER_DEGREE,B=(260.008+k*x)*d.RADIANS_PER_DEGREE,C=(176.625+l*x)*d.RADIANS_PER_DEGREE,D=(357.529+m*x)*d.RADIANS_PER_DEGREE,E=(311.589+n*x)*d.RADIANS_PER_DEGREE,F=(134.963+o*x)*d.RADIANS_PER_DEGREE,G=(276.617+p*x)*d.RADIANS_PER_DEGREE,H=(34.226+q*x)*d.RADIANS_PER_DEGREE,I=(15.134+r*x)*d.RADIANS_PER_DEGREE,J=(119.743+s*x)*d.RADIANS_PER_DEGREE,K=(239.961+t*x)*d.RADIANS_PER_DEGREE,L=(25.053+u*x)*d.RADIANS_PER_DEGREE,M=Math.sin(z),N=Math.sin(A),O=Math.sin(B),P=Math.sin(C),Q=Math.sin(D),R=Math.sin(E),S=Math.sin(F),T=Math.sin(G),U=Math.sin(H),V=Math.sin(I),W=Math.sin(J),X=Math.sin(K),Y=Math.sin(L),Z=Math.cos(z),$=Math.cos(A),_=Math.cos(B),aa=Math.cos(C),ba=Math.cos(D),ca=Math.cos(E),da=Math.cos(F),ea=Math.cos(G),fa=Math.cos(H),ga=Math.cos(I),ha=Math.cos(J),ia=Math.cos(K),ja=Math.cos(L),ka=(269.9949+.0031*y-3.8787*M-.1204*N+.07*O-.0172*P+.0072*R-.0052*V+.0043*Y)*d.RADIANS_PER_DEGREE,la=(66.5392+.013*y+1.5419*Z+.0239*$-.0278*_+.0068*aa-.0029*ca+9e-4*da+8e-4*ga-9e-4*ja)*d.RADIANS_PER_DEGREE,ma=(38.3213+13.17635815*x-1.4e-12*x*x+3.561*M+.1208*N-.0642*O+.0158*P+.0252*Q-.0066*R-.0047*S-.0046*T+.0028*U+.0052*V+.004*W+.0019*X-.0044*Y)*d.RADIANS_PER_DEGREE,na=(13.17635815-1.4e-12*2*x+3.561*Z*i+.1208*$*j-.0642*_*k+.0158*aa*l+.0252*ba*m-.0066*ca*n-.0047*da*o-.0046*ea*p+.0028*fa*q+.0052*ga*r+.004*ha*s+.0019*ia*t-.0044*ja*u)/86400*d.RADIANS_PER_DEGREE;return a(w)||(w=new b),w.rightAscension=ka,w.declination=la,w.rotation=ma,w.rotationRate=na,w},f}),c("Core/IauOrientationAxes",["./Cartesian3","./defined","./Iau2000Orientation","./JulianDate","./Math","./Matrix3","./Quaternion"],function(a,b,c,d,e,f,g){"use strict";function h(c,d,g){var h=j;h.x=Math.cos(c+e.PI_OVER_TWO),h.y=Math.sin(c+e.PI_OVER_TWO),h.z=0;var i=Math.cos(d),m=l;m.x=i*Math.cos(c),m.y=i*Math.sin(c),m.z=Math.sin(d);var n=a.cross(m,h,k);return b(g)||(g=new f),g[0]=h.x,g[1]=n.x,g[2]=m.x,g[3]=h.y,g[4]=n.y,g[5]=m.y,g[6]=h.z,g[7]=n.z,g[8]=m.z,g}var i=function(a){b(a)&&"function"==typeof a||(a=c.ComputeMoon),this._computeFunction=a},j=new a,k=new a,l=new a,m=new f,n=new g;return i.prototype.evaluate=function(c,i){b(c)||(c=d.now());var j=this._computeFunction(c),k=h(j.rightAscension,j.declination,i),l=e.zeroToTwoPi(j.rotation),o=g.fromAxisAngle(a.UNIT_Z,l,n),p=f.fromQuaternion(g.conjugate(o,o),m),q=f.multiply(p,k,k);return q},i}),c("Core/InterpolationAlgorithm",["./DeveloperError"],function(a){"use strict";var b={};return b.type=void 0,b.getRequiredDataPoints=a.throwInstantiationError,b.interpolateOrderZero=a.throwInstantiationError,b.interpolate=a.throwInstantiationError,b}),c("Core/TimeInterval",["./defaultValue","./defined","./defineProperties","./DeveloperError","./freezeObject","./JulianDate"],function(a,b,c,d,e,f){"use strict";var g=function(c){c=a(c,a.EMPTY_OBJECT),this.start=b(c.start)?f.clone(c.start):new f,this.stop=b(c.stop)?f.clone(c.stop):new f,this.data=c.data,this.isStartIncluded=a(c.isStartIncluded,!0),this.isStopIncluded=a(c.isStopIncluded,!0)};c(g.prototype,{isEmpty:{get:function(){var a=f.compare(this.stop,this.start);return 0>a||0===a&&(!this.isStartIncluded||!this.isStopIncluded)}}});var h={start:void 0,stop:void 0,isStartIncluded:void 0,isStopIncluded:void 0,data:void 0};return g.fromIso8601=function(c,d){var e=c.iso8601.split("/"),i=f.fromIso8601(e[0]),j=f.fromIso8601(e[1]),k=a(c.isStartIncluded,!0),l=a(c.isStopIncluded,!0),m=c.data;return b(d)?(d.start=i,d.stop=j,d.isStartIncluded=k,d.isStopIncluded=l,d.data=m,d):(h.start=i,h.stop=j,h.isStartIncluded=k,h.isStopIncluded=l,h.data=m,new g(h))},g.toIso8601=function(a,b){return f.toIso8601(a.start,b)+"/"+f.toIso8601(a.stop,b)},g.clone=function(a,c){return b(a)?b(c)?(c.start=a.start,c.stop=a.stop,c.isStartIncluded=a.isStartIncluded,c.isStopIncluded=a.isStopIncluded,c.data=a.data,c):new g(a):void 0},g.equals=function(a,c,d){return a===c||b(a)&&b(c)&&(a.isEmpty&&c.isEmpty||a.isStartIncluded===c.isStartIncluded&&a.isStopIncluded===c.isStopIncluded&&f.equals(a.start,c.start)&&f.equals(a.stop,c.stop)&&(a.data===c.data||b(d)&&d(a.data,c.data)))},g.equalsEpsilon=function(a,c,d,e){return a===c||b(a)&&b(c)&&(a.isEmpty&&c.isEmpty||a.isStartIncluded===c.isStartIncluded&&a.isStopIncluded===c.isStopIncluded&&f.equalsEpsilon(a.start,c.start,d)&&f.equalsEpsilon(a.stop,c.stop,d)&&(a.data===c.data||b(e)&&e(a.data,c.data)))},g.intersect=function(a,c,d,e){if(!b(c))return g.clone(g.EMPTY,d);var h=a.start,i=a.stop,j=c.start,k=c.stop,l=f.greaterThanOrEquals(j,h)&&f.greaterThanOrEquals(i,j),m=!l&&f.lessThanOrEquals(j,h)&&f.lessThanOrEquals(h,k);if(!l&&!m)return g.clone(g.EMPTY,d);var n=a.isStartIncluded,o=a.isStopIncluded,p=c.isStartIncluded,q=c.isStopIncluded,r=f.lessThan(i,k);return d.start=l?j:h,d.isStartIncluded=n&&p||!f.equals(j,h)&&(l&&p||m&&n),d.stop=r?i:k,d.isStopIncluded=r?o:o&&q||!f.equals(k,i)&&q,d.data=b(e)?e(a.data,c.data):a.data,d},g.contains=function(a,b){if(a.isEmpty)return!1;var c=f.compare(a.start,b);if(0===c)return a.isStartIncluded;var d=f.compare(b,a.stop);return 0===d?a.isStopIncluded:0>c&&0>d},g.prototype.clone=function(a){return g.clone(this,a)},g.prototype.equals=function(a,b){return g.equals(this,a,b)},g.prototype.equalsEpsilon=function(a,b,c){return g.equalsEpsilon(this,a,b,c)},g.prototype.toString=function(){return g.toIso8601(this)},g.EMPTY=e(new g({start:new f,stop:new f,isStartIncluded:!1,isStopIncluded:!1})),g}),c("Core/Iso8601",["./freezeObject","./JulianDate","./TimeInterval"],function(a,b,c){"use strict";var d=a(b.fromIso8601("0000-01-01T00:00:00Z")),e=a(b.fromIso8601("9999-12-31T24:00:00Z")),f=a(new c({start:d,stop:e})),g={MINIMUM_VALUE:d,MAXIMUM_VALUE:e,MAXIMUM_INTERVAL:f};return g}),c("Core/KeyboardEventModifier",["./freezeObject"],function(a){"use strict";var b={SHIFT:0,CTRL:1,ALT:2};return a(b)}),c("Core/LagrangePolynomialApproximation",["./defined"],function(a){"use strict";var b={type:"Lagrange"};return b.getRequiredDataPoints=function(a){return Math.max(a+1,2)},b.interpolateOrderZero=function(b,c,d,e,f){a(f)||(f=new Array(e));var g,h,i=c.length;for(g=0;e>g;g++)f[g]=0;for(g=0;i>g;g++){var j=1;for(h=0;i>h;h++)if(h!==g){var k=c[g]-c[h];j*=(b-c[h])/k}for(h=0;e>h;h++)f[h]+=j*d[g*e+h]}return f},b}),c("Core/LinearApproximation",["./defined","./DeveloperError"],function(a){"use strict";var b={type:"Linear"};return b.getRequiredDataPoints=function(){return 2},b.interpolateOrderZero=function(b,c,d,e,f){a(f)||(f=new Array(e));var g,h,i,j=c[0],k=c[1];for(g=0;e>g;g++)h=d[g],i=d[g+e],f[g]=((i-h)*b+k*h-j*i)/(k-j);return f},b}),c("Core/MapProjection",["./defineProperties","./DeveloperError"],function(a,b){"use strict";var c=function(){b.throwInstantiationError()};return a(c.prototype,{ellipsoid:{get:b.throwInstantiationError}}),c.prototype.project=b.throwInstantiationError,c.prototype.unproject=b.throwInstantiationError,c}),c("Core/Matrix2",["./Cartesian2","./defaultValue","./defined","./DeveloperError","./freezeObject"],function(a,b,c,d,e){"use strict";var f=function(a,c,d,e){this[0]=b(a,0),this[1]=b(d,0),this[2]=b(c,0),this[3]=b(e,0)};f.clone=function(a,b){return c(a)?c(b)?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b):new f(a[0],a[2],a[1],a[3]):void 0},f.fromArray=function(a,d,e){return d=b(d,0),c(e)||(e=new f),e[0]=a[d],e[1]=a[d+1],e[2]=a[d+2],e[3]=a[d+3],e},f.fromColumnMajorArray=function(a,b){return f.clone(a,b)},f.fromRowMajorArray=function(a,b){return c(b)?(b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3],b):new f(a[0],a[1],a[2],a[3])},f.fromScale=function(a,b){return c(b)?(b[0]=a.x,b[1]=0,b[2]=0,b[3]=a.y,b):new f(a.x,0,0,a.y)},f.fromUniformScale=function(a,b){return c(b)?(b[0]=a,b[1]=0,b[2]=0,b[3]=a,b):new f(a,0,0,a)},f.fromRotation=function(a,b){var d=Math.cos(a),e=Math.sin(a);return c(b)?(b[0]=d,b[1]=e,b[2]=-e,b[3]=d,b):new f(d,-e,e,d)},f.toArray=function(a,b){return c(b)?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b):[a[0],a[1],a[2],a[3]]},f.getElementIndex=function(a,b){return 2*a+b},f.getColumn=function(a,b,c){var d=2*b,e=a[d],f=a[d+1];return c.x=e,c.y=f,c},f.setColumn=function(a,b,c,d){d=f.clone(a,d);var e=2*b;return d[e]=c.x,d[e+1]=c.y,d},f.getRow=function(a,b,c){var d=a[b],e=a[b+2];return c.x=d,c.y=e,c},f.setRow=function(a,b,c,d){return d=f.clone(a,d),d[b]=c.x,d[b+2]=c.y,d};var g=new a;f.getScale=function(b,c){return c.x=a.magnitude(a.fromElements(b[0],b[1],g)),c.y=a.magnitude(a.fromElements(b[2],b[3],g)),c};var h=new a;return f.getMaximumScale=function(b){return f.getScale(b,h),a.maximumComponent(h)},f.multiply=function(a,b,c){var d=a[0]*b[0]+a[2]*b[1],e=a[0]*b[2]+a[2]*b[3],f=a[1]*b[0]+a[3]*b[1],g=a[1]*b[2]+a[3]*b[3];return c[0]=d,c[1]=f,c[2]=e,c[3]=g,c},f.add=function(a,b,c){return c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c},f.subtract=function(a,b,c){return c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],c},f.multiplyByVector=function(a,b,c){var d=a[0]*b.x+a[2]*b.y,e=a[1]*b.x+a[3]*b.y;return c.x=d,c.y=e,c},f.multiplyByScalar=function(a,b,c){return c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c},f.negate=function(a,b){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b},f.transpose=function(a,b){var c=a[0],d=a[2],e=a[1],f=a[3];return b[0]=c,b[1]=d,b[2]=e,b[3]=f,b},f.abs=function(a,b){return b[0]=Math.abs(a[0]),b[1]=Math.abs(a[1]),b[2]=Math.abs(a[2]),b[3]=Math.abs(a[3]),b},f.equals=function(a,b){return a===b||c(a)&&c(b)&&a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},f.equalsEpsilon=function(a,b,d){return a===b||c(a)&&c(b)&&Math.abs(a[0]-b[0])<=d&&Math.abs(a[1]-b[1])<=d&&Math.abs(a[2]-b[2])<=d&&Math.abs(a[3]-b[3])<=d},f.IDENTITY=e(new f(1,0,0,1)),f.COLUMN0ROW0=0,f.COLUMN0ROW1=1,f.COLUMN1ROW0=2,f.COLUMN1ROW1=3,f.prototype.clone=function(a){return f.clone(this,a)},f.prototype.equals=function(a){return f.equals(this,a)},f.prototype.equalsEpsilon=function(a,b){return f.equalsEpsilon(this,a,b)},f.prototype.toString=function(){return"("+this[0]+", "+this[2]+")\n"+"("+this[1]+", "+this[3]+")"},f}),c("Core/NearFarScalar",["./defaultValue","./defined","./DeveloperError"],function(a,b){"use strict";var c=function(b,c,d,e){this.near=a(b,0),this.nearValue=a(c,0),this.far=a(d,1),this.farValue=a(e,0)};return c.clone=function(a,d){return b(a)?b(d)?(d.near=a.near,d.nearValue=a.nearValue,d.far=a.far,d.farValue=a.farValue,d):new c(a.near,a.nearValue,a.far,a.farValue):void 0},c.packedLength=4,c.pack=function(b,c,d){d=a(d,0),c[d++]=b.near,c[d++]=b.nearValue,c[d++]=b.far,c[d]=b.farValue},c.unpack=function(d,e,f){return e=a(e,0),b(f)||(f=new c),f.near=d[e++],f.nearValue=d[e++],f.far=d[e++],f.farValue=d[e],f},c.equals=function(a,c){return a===c||b(a)&&b(c)&&a.near===c.near&&a.nearValue===c.nearValue&&a.far===c.far&&a.farValue===c.farValue},c.prototype.clone=function(a){return c.clone(this,a)},c.prototype.equals=function(a){return c.equals(this,a)},c}),c("Core/ObjectOrientedBoundingBox",["./Cartesian3","./defaultValue","./defined","./DeveloperError","./Matrix3"],function(a,b,c,d,e){"use strict";function f(a,b,c,d,f){var g=b[a]+c[0]*d[e.getElementIndex(0,a)]+c[1]*d[e.getElementIndex(1,a)]+c[2]*d[e.getElementIndex(2,a)];return Math.abs(f[a])>g?!0:!1}function g(a,b,c,d,f){var g=f[0]*d[e.getElementIndex(0,a)]+f[1]*d[e.getElementIndex(1,a)]+f[2]*d[e.getElementIndex(2,a)],h=c[a]+b[0]*d[e.getElementIndex(0,a)]+b[1]*d[e.getElementIndex(1,a)]+b[2]*d[e.getElementIndex(2,a)];return Math.abs(g)>h?!0:!1}function h(a,b,c,d,f,g){var h=g[(a+2)%3]*f[e.getElementIndex((a+1)%3,b)]-g[(a+1)%3]*f[e.getElementIndex((a+2)%3,b)],i=c[(a+1)%3]*f[e.getElementIndex((a+2)%3,b)]+c[(a+2)%3]*f[e.getElementIndex((a+1)%3,b)];return i+=d[(b+1)%3]*f[e.getElementIndex(a,(b+2)%3)]+d[(b+2)%3]*f[e.getElementIndex(a,(b+1)%3)],Math.abs(h)>i?!0:!1}var i=function(c,d,f){this.rotation=e.clone(b(c,e.IDENTITY)),this.translation=a.clone(b(d,a.ZERO)),this.scale=a.clone(b(f,a.ZERO))},j=new a,k=new a,l=new a,m=new a,n=new a,o=new e,p={unitary:new e,diagonal:new e};i.fromPoints=function(b,d){if(c(d)||(d=new i),!c(b)||0===b.length)return d.tranformMatrix=e.IDENTITY,d.translation=a.ZERO,d.scale=a.ZERO,d;var f,g=b.length,h=a.clone(b[0],j);for(f=1;g>f;f++)a.add(h,b[f],h)
;var q=1/g;a.multiplyByScalar(h,q,h);var r,s=0,t=0,u=0,v=0,w=0,x=0;for(f=0;g>f;f++)r=a.subtract(b[f],h,k),s+=r.x*r.x,t+=r.x*r.y,u+=r.x*r.z,v+=r.y*r.y,w+=r.y*r.z,x+=r.z*r.z;s*=q,t*=q,u*=q,v*=q,w*=q,x*=q;var y=o;y[0]=s,y[1]=t,y[2]=u,y[3]=t,y[4]=v,y[5]=w,y[6]=u,y[7]=w,y[8]=x;var z=e.computeEigenDecomposition(y,p),A=e.transpose(z.unitary,d.rotation);r=a.subtract(b[0],h,k);var B=e.multiplyByVector(A,r,l),C=a.clone(B,m),D=a.clone(B,n);for(f=1;g>f;f++)r=a.subtract(b[f],h,r),e.multiplyByVector(A,r,B),a.minimumByComponent(D,B,D),a.maximumByComponent(C,B,C);var E=a.add(D,C,l);a.multiplyByScalar(E,.5,E),e.multiplyByVector(A,E,E),a.add(h,E,d.translation);var F=a.subtract(C,D,l);return a.multiplyByScalar(F,.5,d.scale),d},i.fromBoundingRectangle=function(a,b,d){c(d)||(d=new i),c(b)?e.fromRotationZ(b,d.rotation):e.clone(e.IDENTITY,d.rotation);var f=d.scale;f.x=.5*a.width,f.y=.5*a.height,f.z=0;var g=e.multiplyByVector(d.rotation,f,d.translation);return g.x+=a.x,g.y+=a.y,d},i.clone=function(b,d){return c(b)?c(d)?(e.clone(b.rotation,d.rotation),a.clone(b.translation,d.translation),a.clone(b.scale,d.scale),d):new i(b.rotation,b.translation,b.scale):void 0};var q=new e,r=new e,s=new a,t=new Array(3),u=new Array(3),v=new Array(3);return i.intersect=function(b,c){var d=e.transpose(b.rotation,q),i=e.multiply(d,c.rotation,r);e.abs(i,i);var j=t,k=u,l=v;return a.subtract(b.translation,c.translation,s),e.multiplyByVector(d,s,s),a.pack(s,j),a.pack(b.scale,k),a.pack(c.scale,l),f(0,k,l,i,j)?!1:f(1,k,l,i,j)?!1:f(2,k,l,i,j)?!1:g(0,k,l,i,j)?!1:g(1,k,l,i,j)?!1:g(2,k,l,i,j)?!1:h(0,0,k,l,i,j)?!1:h(1,0,k,l,i,j)?!1:h(2,0,k,l,i,j)?!1:h(0,1,k,l,i,j)?!1:h(1,1,k,l,i,j)?!1:h(2,1,k,l,i,j)?!1:h(0,2,k,l,i,j)?!1:h(1,2,k,l,i,j)?!1:h(2,2,k,l,i,j)?!1:!0},i.equals=function(b,d){return b===d||c(b)&&c(d)&&a.equals(b.transformedPosition,d.transformedPosition)&&e.equals(b.transformMatrix,d.transformMatrix)&&a.equals(b.rectangle,d.rectangle)},i.prototype.clone=function(a){return i.clone(this,a)},i.prototype.equals=function(a){return i.equals(this,a)},i}),c("Core/Visibility",["./freezeObject"],function(a){"use strict";var b={NONE:-1,PARTIAL:0,FULL:1};return a(b)}),c("Core/Occluder",["./BoundingSphere","./Cartesian3","./defaultValue","./defined","./defineProperties","./DeveloperError","./Ellipsoid","./Math","./Rectangle","./Visibility"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=function(a,c){this._occluderPosition=b.clone(a.center),this._occluderRadius=a.radius,this._horizonDistance=0,this._horizonPlaneNormal=void 0,this._horizonPlanePosition=void 0,this._cameraPosition=void 0,this.cameraPosition=c},l=new b;e(k.prototype,{position:{get:function(){return this._occluderPosition}},radius:{get:function(){return this._occluderRadius}},cameraPosition:{set:function(a){a=b.clone(a,this._cameraPosition);var c,d,e,f=b.subtract(this._occluderPosition,a,l),g=b.magnitudeSquared(f),h=this._occluderRadius*this._occluderRadius;if(g>h){c=Math.sqrt(g-h),g=1/Math.sqrt(g),d=b.multiplyByScalar(f,g,l);var i=c*c*g;e=b.add(a,b.multiplyByScalar(d,i,l),l)}else c=Number.MAX_VALUE;this._horizonDistance=c,this._horizonPlaneNormal=d,this._horizonPlanePosition=e,this._cameraPosition=a}}}),k.fromBoundingSphere=function(a,c,e){if(!d(a))throw new f("occluderBoundingSphere is required.");if(!d(c))throw new f("camera position is required.");return d(e)?(b.clone(a.center,e._occluderPosition),e._occluderRadius=a.radius,e.cameraPosition=c,e):new k(a,c)};var m=new b;k.prototype.isPointVisible=function(a){if(this._horizonDistance!==Number.MAX_VALUE){var c=b.subtract(a,this._occluderPosition,m),d=this._occluderRadius;if(d=b.magnitudeSquared(c)-d*d,d>0)return d=Math.sqrt(d)+this._horizonDistance,c=b.subtract(a,this._cameraPosition,c),d*d>b.magnitudeSquared(c)}return!1};var n=new b;k.prototype.isBoundingSphereVisible=function(a){var c=b.clone(a.center,n),d=a.radius;if(this._horizonDistance!==Number.MAX_VALUE){var e=b.subtract(c,this._occluderPosition,m),f=this._occluderRadius-d;if(f=b.magnitudeSquared(e)-f*f,d<this._occluderRadius)return f>0?(f=Math.sqrt(f)+this._horizonDistance,e=b.subtract(c,this._cameraPosition,e),f*f+d*d>b.magnitudeSquared(e)):!1;if(f>0){e=b.subtract(c,this._cameraPosition,e);var g=b.magnitudeSquared(e),h=this._occluderRadius*this._occluderRadius,i=d*d;return(this._horizonDistance*this._horizonDistance+h)*i>g*h?!0:(f=Math.sqrt(f)+this._horizonDistance,f*f+i>g)}return!0}return!1};var o=new b;k.prototype.computeVisibility=function(a){if(!d(a))throw new f("occludeeBS is required.");var c=b.clone(a.center),e=a.radius;if(e>this._occluderRadius)return j.FULL;if(this._horizonDistance!==Number.MAX_VALUE){var g=b.subtract(c,this._occluderPosition,o),h=this._occluderRadius-e,i=b.magnitudeSquared(g);if(h=i-h*h,h>0){h=Math.sqrt(h)+this._horizonDistance,g=b.subtract(c,this._cameraPosition,g);var k=b.magnitudeSquared(g);return k>h*h+e*e?j.NONE:(h=this._occluderRadius+e,h=i-h*h,h>0?(h=Math.sqrt(h)+this._horizonDistance,h*h+e*e>k?j.FULL:j.PARTIAL):(g=b.subtract(c,this._horizonPlanePosition,g),b.dot(g,this._horizonPlaneNormal)>-e?j.PARTIAL:j.FULL))}}return j.NONE};var p=new b;k.computeOccludeePoint=function(a,c,d){var e=b.clone(c),g=b.clone(a.center),h=a.radius,i=d.length;if(b.equals(g,c))throw new f("occludeePosition must be different than occluderBoundingSphere.center");var j=b.normalize(b.subtract(e,g,p),p),l=-b.dot(j,g),m=k._anyRotationVector(g,j,l),n=k._horizonToPlaneNormalDotProduct(a,j,l,m,d[0]);if(!n)return void 0;for(var o,q=1;i>q;++q){if(o=k._horizonToPlaneNormalDotProduct(a,j,l,m,d[q]),!o)return void 0;n>o&&(n=o)}if(.0017453283658983088>n)return void 0;var r=h/n;return b.add(g,b.multiplyByScalar(j,r,p),p)};var q=[];k.computeOccludeePointFromRectangle=function(d,e){e=c(e,g.WGS84);var f=i.subsample(d,e,0,q),h=a.fromPoints(f),j=b.ZERO;return b.equals(j,h.center)?void 0:k.computeOccludeePoint(new a(j,e.minimumRadius),h.center,f)};var r=new b;k._anyRotationVector=function(a,c,d){var e=b.abs(c,r),f=e.x>e.y?0:1;(0===f&&e.z>e.x||1===f&&e.z>e.y)&&(f=2);var g,h=new b;0===f?(e.x=a.x,e.y=a.y+1,e.z=a.z+1,g=b.UNIT_X):1===f?(e.x=a.x+1,e.y=a.y,e.z=a.z+1,g=b.UNIT_Y):(e.x=a.x+1,e.y=a.y+1,e.z=a.z,g=b.UNIT_Z);var i=(b.dot(c,e)+d)/-b.dot(c,g);return b.normalize(b.subtract(b.add(e,b.multiplyByScalar(g,i,h),e),a,e),e)};var s=new b;k._rotationVector=function(a,c,d,e,f){var g=b.subtract(e,a,s);if(g=b.normalize(g,g),b.dot(c,g)<.9999999847691291){var i=b.cross(c,g,g),j=b.magnitude(i);if(j>h.EPSILON13)return b.normalize(i,new b)}return f};var t=new b,u=new b,v=new b,w=new b;return k._horizonToPlaneNormalDotProduct=function(a,c,d,e,f){var g=b.clone(f,t),h=b.clone(a.center,u),i=a.radius,j=b.subtract(h,g,v),k=b.magnitudeSquared(j),l=i*i;if(l>k)return!1;var m=k-l,n=Math.sqrt(m),o=Math.sqrt(k),p=1/o,q=n*p,r=q*n;j=b.normalize(j,j);var s=b.add(g,b.multiplyByScalar(j,r,w),w),x=Math.sqrt(m-r*r),y=this._rotationVector(h,c,d,g,e),z=b.fromElements(y.x*y.x*j.x+(y.x*y.y-y.z)*j.y+(y.x*y.z+y.y)*j.z,(y.x*y.y+y.z)*j.x+y.y*y.y*j.y+(y.y*y.z-y.x)*j.z,(y.x*y.z-y.y)*j.x+(y.y*y.z+y.x)*j.y+y.z*y.z*j.z,t);z=b.normalize(z,z);var A=b.multiplyByScalar(z,x,t);y=b.normalize(b.subtract(b.add(s,A,v),h,v),v);var B=b.dot(c,y);y=b.normalize(b.subtract(b.subtract(s,A,y),h,y),y);var C=b.dot(c,y);return C>B?B:C},k}),c("Core/Packable",["./DeveloperError"],function(a){"use strict";var b={packedLength:void 0,pack:a.throwInstantiationError,unpack:a.throwInstantiationError};return b}),c("Core/PackableForInterpolation",["./DeveloperError"],function(a){"use strict";var b={packedInterpolationLength:void 0,convertPackedArrayForInterpolation:a.throwInstantiationError,unpackInterpolationResult:a.throwInstantiationError};return b}),c("ThirdParty/measureText",[],function(){var a=function(a,b){return document.defaultView.getComputedStyle(a,null).getPropertyValue(b)},b=function(b,c,d,e){var f=b.measureText(c),g=a(b.canvas,"font-family"),h=a(b.canvas,"font-size").replace("px",""),i=!/\S/.test(c);f.fontsize=h;var j=document.createElement("div");j.style.position="absolute",j.style.opacity=0,j.style.font=h+"px "+g,j.innerHTML=c+"<br/>"+c,document.body.appendChild(j),f.leading=1.2*h;var k=a(j,"height");if(k=k.replace("px",""),k>=2*h&&(f.leading=0|k/2),document.body.removeChild(j),i)f.ascent=0,f.descent=0,f.bounds={minx:0,maxx:f.width,miny:0,maxy:0},f.height=0;else{var l=document.createElement("canvas"),m=100;l.width=f.width+m,l.height=3*h,l.style.opacity=1,l.style.fontFamily=g,l.style.fontSize=h;var n=l.getContext("2d");n.font=h+"px "+g;var o=l.width,p=l.height,q=p/2;n.fillStyle="white",n.fillRect(-1,-1,o+2,p+2),d&&(n.strokeStyle="black",n.lineWidth=b.lineWidth,n.strokeText(c,m/2,q)),e&&(n.fillStyle="black",n.fillText(c,m/2,q));for(var r=n.getImageData(0,0,o,p).data,s=0,t=4*o,u=r.length;++s<u&&255===r[s];);var v=0|s/t;for(s=u-1;--s>0&&255===r[s];);var w=0|s/t;for(s=0;u>s&&255===r[s];)s+=t,s>=u&&(s=s-u+4);var x=0|s%t/4,y=1;for(s=u-3;s>=0&&255===r[s];)s-=t,0>s&&(s=u-3-4*y++);var z=0|s%t/4+1;f.ascent=q-v,f.descent=w-q,f.bounds={minx:x-m/2,maxx:z-m/2,miny:0,maxy:w-v},f.height=1+(w-v)}return f};return b}),c("Core/writeTextToCanvas",["../ThirdParty/measureText","./Color","./defaultValue","./defined","./DeveloperError"],function(a,b,c){"use strict";var d=function(d,e){if(""===d)return void 0;e=c(e,c.EMPTY_OBJECT);var f=c(e.font,"10px sans-serif"),g=document.createElement("canvas");g.width=g.height=1,g.style.font=f;var h=g.getContext("2d");h.font=f,h.textBaseline=c(e.textBaseline,"bottom"),g.style.visibility="hidden",document.body.appendChild(g);var i=c(e.stroke,!1),j=c(e.fill,!0),k=2*c(e.strokeWidth,1);h.lineWidth=k;var l=a(h,d,i,j);g.dimensions=l,document.body.removeChild(g),g.style.visibility="";var m=l.height-l.ascent;g.width=l.width,g.height=l.height;var n=g.height-m;if(h.font=f,i){var o=c(e.strokeColor,b.BLACK);h.strokeStyle=o.toCssColorString(),h.lineWidth=k,h.strokeText(d,0,n)}if(j){var p=c(e.fillColor,b.WHITE);h.fillStyle=p.toCssColorString(),h.fillText(d,0,n)}return g};return d}),c("Core/PinBuilder",["./buildModuleUrl","./Color","./defined","./DeveloperError","./loadImage","./writeTextToCanvas"],function(a,b,c,d,e,f){"use strict";function g(a,b,c){a.save(),a.scale(c/24,c/24),a.fillStyle=b.toCssColorString(),a.strokeStyle=b.brighten(.6,k).toCssColorString(),a.lineWidth=.846,a.beginPath(),a.moveTo(6.72,.422),a.lineTo(17.28,.422),a.bezierCurveTo(18.553,.422,19.577,1.758,19.577,3.415),a.lineTo(19.577,10.973),a.bezierCurveTo(19.577,12.63,18.553,13.966,17.282,13.966),a.lineTo(14.386,14.008),a.lineTo(11.826,23.578),a.lineTo(9.614,14.008),a.lineTo(6.719,13.965),a.bezierCurveTo(5.446,13.983,4.422,12.629,4.422,10.972),a.lineTo(4.422,3.416),a.bezierCurveTo(4.423,1.76,5.447,.423,6.718,.423),a.closePath(),a.fill(),a.stroke(),a.restore()}function h(a,c,d){var e=d/2.5,f=e,g=e;c.width>c.height?g=e*(c.height/c.width):c.width<c.height&&(f=e*(c.width/c.height));var h=(d-f)/2,i=7/24*d-g/2;a.globalCompositeOperation="destination-out",a.drawImage(c,h-1,i,f,g),a.drawImage(c,h,i-1,f,g),a.drawImage(c,h+1,i,f,g),a.drawImage(c,h,i+1,f,g),a.globalCompositeOperation="destination-over",a.fillStyle=b.BLACK.toCssColorString(),a.fillRect(h-1,i-1,f+1,g+1),a.globalCompositeOperation="destination-out",a.drawImage(c,h,i,f,g),a.globalCompositeOperation="destination-over",a.fillStyle=b.WHITE.toCssColorString(),a.fillRect(h,i,f,g)}function i(a,b,d,i,j){l[0]=a,l[1]=b,l[2]=d,l[3]=i;var k=JSON.stringify(l),m=j[k];if(c(m))return m;var n=document.createElement("canvas");n.width=i,n.height=i;var o=n.getContext("2d");if(g(o,d,i),c(a)){var p=e(a).then(function(a){return h(o,a,i),j[k]=n,n});return j[k]=p,p}if(c(b)){var q=f(b,{font:"bold "+i+"px sans-serif"});h(o,q,i)}return j[k]=n,n}var j=function(){this._cache={}};j.prototype.fromColor=function(a,b){return i(void 0,void 0,a,b,this._cache)},j.prototype.fromUrl=function(a,b,c){return i(a,void 0,b,c,this._cache)},j.prototype.fromMakiIconId=function(b,c,d){return i(a("Assets/Textures/maki/"+encodeURIComponent(b)+".png"),void 0,c,d,this._cache)},j.prototype.fromText=function(a,b,c){return i(void 0,a,b,c,this._cache)};var k=new b,l=new Array(4);return j}),c("Core/PixelFormat",["./freezeObject"],function(a){"use strict";var b={DEPTH_COMPONENT:6402,DEPTH_STENCIL:34041,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,validate:function(a){return a===b.DEPTH_COMPONENT||a===b.DEPTH_STENCIL||a===b.ALPHA||a===b.RGB||a===b.RGBA||a===b.LUMINANCE||a===b.LUMINANCE_ALPHA},isColorFormat:function(a){return a===b.ALPHA||a===b.RGB||a===b.RGBA||a===b.LUMINANCE||a===b.LUMINANCE_ALPHA},isDepthFormat:function(a){return a===b.DEPTH_COMPONENT||a===b.DEPTH_STENCIL}};return a(b)}),c("Core/PolygonGeometryLibrary",["./Cartesian3","./defaultValue","./defined","./Ellipsoid"],function(a,b,c,d){"use strict";function e(b,c,d,e){return a.subtract(c,b,g),a.multiplyByScalar(g,d/e,g),a.add(b,g,g),[g.x,g.y,g.z]}var f={},g=new a;f.subdivideLine=function(b,c,d){var f=a.distance(b,c),g=a.angleBetween(b,c),h=g/d,i=Math.ceil(Math.log(h)/Math.log(2));1>i&&(i=0);var j=Math.pow(2,i),k=f/j,l=new Array(3*j),m=0;l[m++]=b.x,l[m++]=b.y,l[m++]=b.z;for(var n=1;j>n;n++){var o=e(b,c,n*k,f);l[m++]=o[0],l[m++]=o[1],l[m++]=o[2]}return l};var h=new a,i=new a,j=new a,k=new a;return f.scaleToGeodeticHeightExtruded=function(e,f,g,l,m){l=b(l,d.WGS84);var n=h,o=i,p=j,q=k;if(c(e)&&c(e.attributes)&&c(e.attributes.position))for(var r=e.attributes.position.values,s=r.length/2,t=0;s>t;t+=3)a.fromArray(r,t,p),l.geodeticSurfaceNormal(p,n),q=l.scaleToGeodeticSurface(p,q),o=a.multiplyByScalar(n,g,o),o=a.add(q,o,o),r[t+s]=o.x,r[t+1+s]=o.y,r[t+2+s]=o.z,m&&(q=a.clone(p,q)),o=a.multiplyByScalar(n,f,o),o=a.add(q,o,o),r[t]=o.x,r[t+1]=o.y,r[t+2]=o.z;return e},f}),c("Core/pointInsideTriangle",["./barycentricCoordinates","./Cartesian3"],function(a,b){"use strict";var c=new b,d=function(b,d,e,f){return a(b,d,e,f,c),c.x>0&&c.y>0&&c.z>0};return d}),c("Core/Queue",[],function(){"use strict";var a=function(){this._array=[],this._offset=0,this.length=0};return a.prototype.enqueue=function(a){this._array.push(a),this.length++},a.prototype.dequeue=function(){if(0===this.length)return void 0;var a=this._array,b=this._offset,c=a[b];return a[b]=void 0,b++,b>10&&2*b>a.length&&(this._array=a.slice(b),b=0),this._offset=b,this.length--,c},a.prototype.contains=function(a){return-1!==this._array.indexOf(a)},a.prototype.clear=function(){this._array.length=this._offset=this.length=0},a.prototype.sort=function(a){this._offset>0&&(this._array=this._array.slice(this._offset),this._offset=0),this._array.sort(a)},a}),c("Core/WindingOrder",["./freezeObject"],function(a){"use strict";var b={CLOCKWISE:2304,COUNTER_CLOCKWISE:2305,validate:function(a){return a===b.CLOCKWISE||a===b.COUNTER_CLOCKWISE}};return a(b)}),c("Core/PolygonPipeline",["./Cartesian2","./Cartesian3","./ComponentDatatype","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./EllipsoidTangentPlane","./Geometry","./GeometryAttribute","./Math","./pointInsideTriangle","./PrimitiveType","./Queue","./WindingOrder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";function p(b,c,d){var e=a.subtract(c,b,M),f=a.subtract(d,c,N);return e.x*f.y-e.y*f.x>=0}function q(a){for(var b=a[0].x,c=0,d=0;d<a.length;d++)a[d].x>b&&(b=a[d].x,c=d);return c}function r(a){for(var b=a[0][0].x,c=0,d=0;d<a.length;d++){var e=a[d][q(a[d])].x;e>b&&(b=e,c=d)}return c}function s(a){for(var b=[],c=0;c<a.length;c++){var d=a[(c-1+a.length)%a.length],e=a[c],f=a[(c+1)%a.length];p(d,e,f)||b.push(e)}return b}function t(b,c){for(var d=0;d<b.length;d++)if(a.equals(c,b[d]))return d;return-1}function u(c,e,f){f=d(f,[]);var g=Number.MAX_VALUE,h=q(e),i=new a(e[h].x,c.y);f.push(h),f.push((h+1)%e.length);for(var j=e[0].x,k=j,l=1;l<e.length;++l)e[l].x<j?j=e[l].x:e[l].x>k&&(k=e[l].x);k+=k-j;var m=new b(k,c.y,0);for(l=0;l<e.length;l++){var n=e[l],o=e[(l+1)%e.length];if((n.x>=c.x||o.x>=c.x)&&(n.y>=c.y&&o.y<=c.y||n.y<=c.y&&o.y>=c.y)){var p=(o.y-n.y)*(m.x-c.x)-(o.x-n.x)*(m.y-c.y);if(0!==p){p=1/p;var r=((o.x-n.x)*(c.y-n.y)-(o.y-n.y)*(c.x-n.x))*p,s=((m.x-c.x)*(c.y-n.y)-(m.y-c.y)*(c.x-n.x))*p;if(r>=0&&1>=r&&s>=0&&1>=s){var t=new a(c.x+r*(m.x-c.x),c.y+r*(m.y-c.y)),u=a.subtract(t,c,O);p=a.magnitudeSquared(u),g>p&&(i=t,g=p,f[0]=l,f[1]=(l+1)%e.length)}}}}return i}function v(b,c){var d=r(c),e=c[d],f=q(e),g=e[f],h=[],i=u(g,b,h),j=t(b,i);if(-1!==j)return j;var m=a.magnitudeSquared(a.subtract(b[h[0]],g,P)),n=a.magnitudeSquared(a.subtract(b[h[1]],g,P)),o=n>m?b[h[0]]:b[h[1]],p=s(b),v=p.indexOf(o);-1!==v&&p.splice(v,1);for(var w=[],x=0;x<p.length;x++){var y=p[x];l(y,g,i,o)&&w.push(y)}var z=Number.MAX_VALUE;if(w.length>0){var A=a.fromElements(1,0,P);for(x=0;x<w.length;x++){var B=a.subtract(w[x],g,Q),C=a.magnitude(A)*a.magnitudeSquared(B);if(0!==C){var D=Math.abs(k.acosClamped(a.dot(A,B)/C));z>D&&(z=D,o=w[x])}}}return b.indexOf(o)}function w(a,c,d){for(var e=ha.computeWindingOrder2D(a),f=0;f<c.length;f++){var g=c[f];b.equals(g[0],g[g.length-1])||g.push(g[0]);var i=ha.computeWindingOrder2D(g);i===e&&g.reverse()}var j=h.fromPoints(a,d),k=j.projectPointsOntoPlane(a),l=[];for(f=0;f<c.length;f++)l.push(j.projectPointsOntoPlane(c[f]));var m=v(k,l),n=r(l),o=q(l[n]),p=c[n],s=[];for(f=0;f<a.length;f++)s.push(a[f]);var t,u=[];if(0!==o)for(t=0;t<=p.length;t++){var w=(t+o)%p.length;0!==w&&u.push(p[w])}else for(t=0;t<p.length;t++)u.push(p[(t+o)%p.length]);var x=s.lastIndexOf(a[m]);u.push(a[x]);var y=s.slice(0,x+1),z=s.slice(x+1);return s=y.concat(u,z),c.splice(n,1),s}function x(a){var b="0."+Math.sin(R).toString().substr(5);R+=.2;var c=Math.floor(b*a);return c===a&&c--,c}function y(b,c,d){return z(b,c,d)&&z(c,b,d)&&!I(d[b].position,d[c].position,d)&&!a.equals(d[b].position,d[c].position)}function z(b,c,d){C(b,d);var e=d[b],f=d[c],g=B(b,d,S),h=B(b,d,T),i=a.subtract(d[g].position,e.position,U),j=a.subtract(d[h].position,e.position,V),k=a.subtract(f.position,e.position,W);return D(i,k)?A(i,k):D(j,k)?A(j,k):E(i,j)?H(i,j,k)?!0:!1:F(i,j)?G(i,j,k)?!1:!0:void 0}function A(b,c){return a.magnitude(c)<a.magnitude(b)}function B(a,b,c){var d=a+c;return 0>d&&(d=b.length-1),d===b.length&&(d=0),C(d,b),d}function C(b,c){var d=b-1,e=b+1;0>d&&(d=c.length-1),e===c.length&&(e=0);var g=a.subtract(c[d].position,c[b].position,X),h=a.subtract(c[e].position,c[b].position,Y);if(D(g,h)){var i=new f("Superfluous vertex found.");throw i.vertexIndex=b,i}}function D(a,c){return 0===b.cross(a,c,Z).z}function E(a,c){return b.cross(a,c,$).z<0}function F(a,c){return b.cross(a,c,_).z>0}function G(a,c,d){return b.cross(a,d,aa).z>0&&b.cross(d,c,aa).z>0}function H(a,c,d){return b.cross(a,d,ba).z<0&&b.cross(d,c,ba).z<0}function I(b,c,d){for(var e=0;e<d.length;e++){var f,g=d[e].position;if(f=e<d.length-1?d[e+1].position:d[0].position,!(a.equals(b,g)||a.equals(c,f)||a.equals(b,f)||a.equals(c,g))){var h=(c.y-b.y)/(c.x-b.x),i=(f.y-g.y)/(f.x-g.x);if(!(h===i||isNaN(h)&&isNaN(i))){var j;j=isNaN(h)?b.x:isNaN(i)?g.x:(b.y-g.y-h*b.x+i*g.x)/(i-h);var k=h*j+b.y-h*b.x,l=a.fromElements(j,k,ca);if(!(a.equals(l,b)||a.equals(l,c)||a.equals(l,g)||a.equals(l,f))){var m=K(j,b.x,c.x)&&K(k,b.y,c.y)&&K(j,g.x,f.x)&&K(k,g.y,f.y);if(m)return!0}}}}return!1}function J(b){var c=b[0].position,d=b[1].position,e=b[2].position,f=a.subtract(d,c,da),g=a.subtract(e,c,ea);return D(f,g)}function K(a,b,c){return(a>b||a>c)&&(b>a||c>a)||b===c&&b===a}function L(a){var b=a.length;if(3===b)return J(a)?[]:[a[0].index,a[1].index,a[2].index];if(a.length<3)throw new f("Invalid polygon: must have at least three vertices.");for(var c=!1,d=0;!c;){var e=10*a.length;if(d>e)return[];d++;for(var g=x(a.length),h=g+1;Math.abs(g-h)<2||Math.abs(g-h)>a.length-2;)h=x(a.length);if(g>h){var i=g;g=h,h=i}try{if(y(g,h,a)){var j=a.splice(g,h-g+1,a[g],a[h]);return L(a).concat(L(j))}}catch(b){if(b.hasOwnProperty("vertexIndex"))return a.splice(b.vertexIndex,1),L(a);throw b}}}var M=new a,N=new a,O=new a,P=new a(1,0),Q=new a,R=0,S=-1,T=1,U=new b,V=new b,W=new b,X=new b,Y=new b,Z=new b,$=new b,_=new b,aa=new b,ba=new b,ca=new a,da=new b,ea=new b,fa=new b,ga=new b,ha={};return ha.removeDuplicates=function(a){for(var c=a.length,d=[],e=c-1,f=0;c>f;e=f++){var g=a[e],h=a[f];b.equals(g,h)||d.push(h)}return d},ha.computeArea2D=function(a){for(var b=a.length,c=0,d=b-1,e=0;b>e;d=e++){var f=a[d],g=a[e];c+=f.x*g.y-g.x*f.y}return.5*c},ha.computeWindingOrder2D=function(a){var b=ha.computeArea2D(a);return b>0?o.COUNTER_CLOCKWISE:o.CLOCKWISE},ha.triangulate=function(a){for(var b=a.length,c=[],d=0;b>d;++d)c[d]={position:a[d],index:d};return L(c)},ha.resetSeed=function(a){R=d(a,0)},ha.computeSubdivision=function(a,f,g){g=d(g,k.RADIANS_PER_DEGREE);for(var h=new n,l=f.length,o=0;l>o;o+=3)h.enqueue({i0:f[o],i1:f[o+1],i2:f[o+2]});for(var p,q=a.slice(0),r=[],s={};h.length>0;){var t,u,v=h.dequeue(),w=q[v.i0],x=q[v.i1],y=q[v.i2],z=b.angleBetween(w,x),A=b.angleBetween(x,y),B=b.angleBetween(y,w),C=Math.max(z,Math.max(A,B));C>g?z===C?(t=Math.min(v.i0,v.i1).toString()+" "+Math.max(v.i0,v.i1).toString(),p=s[t],e(p)||(u=b.add(w,x,new b),b.multiplyByScalar(u,.5,u),q.push(u),p=q.length-1,s[t]=p),h.enqueue({i0:v.i0,i1:p,i2:v.i2}),h.enqueue({i0:p,i1:v.i1,i2:v.i2})):A===C?(t=Math.min(v.i1,v.i2).toString()+" "+Math.max(v.i1,v.i2).toString(),p=s[t],e(p)||(u=b.add(x,y,new b),b.multiplyByScalar(u,.5,u),q.push(u),p=q.length-1,s[t]=p),h.enqueue({i0:v.i1,i1:p,i2:v.i0}),h.enqueue({i0:p,i1:v.i2,i2:v.i0})):B===C&&(t=Math.min(v.i2,v.i0).toString()+" "+Math.max(v.i2,v.i0).toString(),p=s[t],e(p)||(u=b.add(y,w,new b),b.multiplyByScalar(u,.5,u),q.push(u),p=q.length-1,s[t]=p),h.enqueue({i0:v.i2,i1:p,i2:v.i1}),h.enqueue({i0:p,i1:v.i0,i2:v.i1})):(r.push(v.i0),r.push(v.i1),r.push(v.i2))}var D=q.length,E=new Array(3*D),F=0;for(p=0;D>p;p++){var G=q[p];E[F++]=G.x,E[F++]=G.y,E[F++]=G.z}return new i({attributes:{position:new j({componentDatatype:c.DOUBLE,componentsPerAttribute:3,values:E})},indices:r,primitiveType:m.TRIANGLES})},ha.scaleToGeodeticHeight=function(a,c,f,h){f=d(f,g.WGS84);var i=fa,j=ga;if(c=d(c,0),h=d(h,!0),e(a)&&e(a.attributes)&&e(a.attributes.position))for(var k=a.attributes.position.values,l=k.length,m=0;l>m;m+=3)b.fromArray(k,m,j),h&&(j=f.scaleToGeodeticSurface(j,j)),i=f.geodeticSurfaceNormal(j,i),b.multiplyByScalar(i,c,i),b.add(j,i,j),k[m]=j.x,k[m+1]=j.y,k[m+2]=j.z;return a},ha.eliminateHoles=function(a,c,e){e=d(e,g.WGS84);for(var f=[],h=0;h<c.length;h++){for(var i=[],j=0;j<c[h].length;j++)i.push(b.clone(c[h][j]));f.push(i)}for(var k=a;f.length>0;)k=w(k,f,e);return k},ha}),c("Core/PolygonGeometry",["./BoundingRectangle","./BoundingSphere","./Cartesian2","./Cartesian3","./ComponentDatatype","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./EllipsoidTangentPlane","./Geometry","./GeometryAttribute","./GeometryAttributes","./GeometryInstance","./GeometryPipeline","./IndexDatatype","./Math","./Matrix3","./PolygonGeometryLibrary","./PolygonPipeline","./PrimitiveType","./Quaternion","./Queue","./VertexFormat","./WindingOrder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){"use strict";function z(a,b,c,e){for(var f=v.fromAxisAngle(a._plane.normal,c,G),h=r.fromQuaternion(f,H),i=Number.POSITIVE_INFINITY,j=Number.NEGATIVE_INFINITY,k=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,m=b.length,n=0;m>n;++n){var o=d.clone(b[n],F);r.multiplyByVector(h,o,o);var p=a.projectPointOntoPlane(o,E);g(p)&&(i=Math.min(i,p.x),j=Math.max(j,p.x),k=Math.min(k,p.y),l=Math.max(l,p.y))}return e.x=i,e.y=k,e.width=j-i,e.height=l-k,e}function A(a,b,c,d){var f=j.fromPoints(b,a),g=f.projectPointsOntoPlane(b,I),h=t.computeWindingOrder2D(g);h===y.CLOCKWISE&&(g.reverse(),b.reverse());var i=t.triangulate(g);i.length<3&&(i=[0,1,2]);var m;if(d){for(var o=b.length,p=new Array(3*o),q=0,r=0;o>r;r++){var s=b[r];p[q++]=s.x,p[q++]=s.y,p[q++]=s.z}m=new k({attributes:{position:new l({componentDatatype:e.DOUBLE,componentsPerAttribute:3,values:p})},indices:i,primitiveType:u.TRIANGLES})}else m=t.computeSubdivision(b,i,c);return new n({geometry:m})}function B(a,b,f,g,h,i,k){if(a.st||a.normal||a.tangent||a.binormal){var m=j.fromPoints(f,g),n=z(m,f,h,J),o=Q;o.x=n.x,o.y=n.y;var p=b.attributes.position.values,s=p.length,t=a.st?new Float32Array(2*(s/3)):void 0,u=a.normal?new Float32Array(s):void 0,w=a.tangent?new Float32Array(s):void 0,x=a.binormal?new Float32Array(s):void 0,y=0,A=0,B=L,C=M,D=N,E=!0,F=v.fromAxisAngle(m._plane.normal,h,T),G=r.fromQuaternion(F,U),H=s/2,I=s/3;i&&(s/=2);for(var V=0;s>V;V+=3){var W=d.fromArray(p,V,S);if(a.st){var X=r.multiplyByVector(G,W,K),Y=m.projectPointOntoPlane(X,R);c.subtract(Y,o,Y),i&&(t[y+I]=Y.x/n.width,t[y+1+I]=Y.y/n.height),t[y]=Y.x/n.width,t[y+1]=Y.y/n.height,y+=2}if(a.normal||a.tangent||a.binormal){var Z=A+1,$=A+2;if(k){if(s>V+3){var _=d.fromArray(p,V+3,O);if(E){var aa=d.fromArray(p,V+s,P);d.subtract(_,W,_),d.subtract(aa,W,aa),B=d.normalize(d.cross(aa,_,B),B),E=!1}d.equalsEpsilon(_,W,q.EPSILON10)&&(E=!0)}(a.tangent||a.binormal)&&(D=g.geodeticSurfaceNormal(W,D),a.tangent&&(C=d.normalize(d.cross(D,B,C),C)))}else B=g.geodeticSurfaceNormal(W,B),(a.tangent||a.binormal)&&(C=d.cross(d.UNIT_Z,B,C),C=d.normalize(r.multiplyByVector(G,C,C),C),a.binormal&&(D=d.normalize(d.cross(B,C,D),D)));a.normal&&(i&&!k?(u[A+H]=-B.x,u[Z+H]=-B.y,u[$+H]=-B.z):(u[A+H]=B.x,u[Z+H]=B.y,u[$+H]=B.z),u[A]=B.x,u[Z]=B.y,u[$]=B.z),a.tangent&&(i&&!k?(w[A+H]=-C.x,w[Z+H]=-C.y,w[$+H]=-C.z):(w[A+H]=C.x,w[Z+H]=C.y,w[$+H]=C.z),w[A]=C.x,w[Z]=C.y,w[$]=C.z),a.binormal&&(i&&(x[A+H]=D.x,x[Z+H]=D.y,x[$+H]=D.z),x[A]=D.x,x[Z]=D.y,x[$]=D.z),A+=3}}a.st&&(b.attributes.st=new l({componentDatatype:e.FLOAT,componentsPerAttribute:2,values:t})),a.normal&&(b.attributes.normal=new l({componentDatatype:e.FLOAT,componentsPerAttribute:3,values:u})),a.tangent&&(b.attributes.tangent=new l({componentDatatype:e.FLOAT,componentsPerAttribute:3,values:w})),a.binormal&&(b.attributes.binormal=new l({componentDatatype:e.FLOAT,componentsPerAttribute:3,values:x}))}return b}function C(a,b,c){var f,g,h,i,j,n,o,r,t,v=[],w=a.length;if(c)for(o=0;w>o;o++)r=a[o],t=a[(o+1)%w],v.push(r.x,r.y,r.z,t.x,t.y,t.z);else for(o=0;w>o;o++)r=a[o],t=a[(o+1)%w],f=s.subdivideLine(r,t,b),f.push(t.x,t.y,t.z),v=v.concat(f);v=v.concat(v),w=v.length;var x=p.createTypedArray(w/3,w-6*a.length);for(g=0,w/=6,o=0;w>o;o++)h=o,i=h+1,r=d.fromArray(v,3*h,O),t=d.fromArray(v,3*i,P),d.equalsEpsilon(r,t,q.EPSILON6)||(j=h+w,n=j+1,x[g++]=h,x[g++]=j,x[g++]=i,x[g++]=i,x[g++]=j,x[g++]=n);return new k({attributes:new m({position:new l({componentDatatype:e.DOUBLE,componentsPerAttribute:3,values:v})}),indices:x,primitiveType:u.TRIANGLES})}function D(a,b,c,d,f){var g=A(a,b,c,f).geometry,h=g.attributes.position.values,i=g.indices,o=h.concat(h),q=o.length/3,r=p.createTypedArray(q,2*i.length);r.set(i);var s,u=i.length,v=q/2;for(s=0;u>s;s+=3){var w=r[s]+v,x=r[s+1]+v,z=r[s+2]+v;r[s+u]=z,r[s+1+u]=x,r[s+2+u]=w}var B=new k({attributes:new m({position:new l({componentDatatype:e.DOUBLE,componentsPerAttribute:3,values:o})}),indices:r,primitiveType:g.primitiveType}),D={topAndBottom:new n({geometry:B})};D.walls=[];var E=d.outerRing,F=j.fromPoints(E,a),G=F.projectPointsOntoPlane(E,V),H=t.computeWindingOrder2D(G);H===y.CLOCKWISE&&E.reverse();var I=C(E,c,f);D.walls.push(new n({geometry:I}));var J=d.holes;for(s=0;s<J.length;s++){var K=J[s];F=j.fromPoints(K,a),G=F.projectPointsOntoPlane(K,V),H=t.computeWindingOrder2D(G),H===y.CLOCKWISE&&K.reverse(),I=C(K,c),D.walls.push(new n({geometry:I}))}return D}var E=new c,F=new d,G=new v,H=new r,I=[],J=new a,K=new d,L=new d,M=new d,N=new d,O=new d,P=new d,Q=new c,R=new c,S=new d,T=new v,U=new r,V=[],W=function(a){a=f(a,f.EMPTY_OBJECT);var b=f(a.vertexFormat,x.DEFAULT),c=f(a.ellipsoid,i.WGS84),d=f(a.granularity,q.RADIANS_PER_DEGREE),e=f(a.stRotation,0),h=f(a.height,0),j=f(a.perPositionHeight,!1),k=a.extrudedHeight,l=g(k)&&(!q.equalsEpsilon(h,k,q.EPSILON6)||j);if(l){var m=k;k=Math.min(m,h),h=Math.max(m,h)}var n=a.polygonHierarchy;this._vertexFormat=b,this._ellipsoid=c,this._granularity=d,this._stRotation=e,this._height=h,this._extrudedHeight=k,this._extrude=l,this._polygonHierarchy=n,this._perPositionHeight=j,this._workerName="createPolygonGeometry"};return W.fromPositions=function(a){a=f(a,f.EMPTY_OBJECT);var b={polygonHierarchy:{positions:a.positions},height:a.height,extrudedHeight:a.extrudedHeight,vertexFormat:a.vertexFormat,stRotation:a.stRotation,ellipsoid:a.ellipsoid,granularity:a.granularity,perPositionHeight:a.perPositionHeight};return new W(b)},W.createGeometry=function(a){var c,d,e,f=a._vertexFormat,i=a._ellipsoid,j=a._granularity,l=a._stRotation,m=a._height,n=a._extrudedHeight,q=a._extrude,r=a._polygonHierarchy,u=a._perPositionHeight,v=[],x=new w;x.enqueue(r),r=[];for(var y;0!==x.length;){var z=x.dequeue(),C=z.positions,E=z.holes;if(C=t.removeDuplicates(C),C.length<3)throw new h("At least three positions are required.");var F=E?E.length:0;if(0===F)r.push({outerRing:C,holes:[]}),v.push(C);else{var G=[];for(y=0;F>y;y++){var H=E[y];if(H.positions=t.removeDuplicates(H.positions),H.positions.length<3)throw new h("At least three positions are required.");G.push(H.positions);var I=0;g(H.holes)&&(I=H.holes.length);for(var J=0;I>J;J++)x.enqueue(H.holes[J])}r.push({outerRing:C,holes:G});var K=t.eliminateHoles(C,G);v.push(K)}}e=v[0];var L,M=[];if(q){for(y=0;y<v.length;y++)if(L=D(i,v[y],j,r[y],u),g(L)){d=L.topAndBottom,d.geometry=s.scaleToGeodeticHeightExtruded(d.geometry,m,n,i,u),d.geometry=B(f,d.geometry,e,i,l,!0,!1),M.push(d),c=L.walls;for(var N=0;N<c.length;N++){var O=c[N];O.geometry=s.scaleToGeodeticHeightExtruded(O.geometry,m,n,i,u),O.geometry=B(f,O.geometry,e,i,l,!0,!0),M.push(O)}}}else for(y=0;y<v.length;y++)L=A(i,v[y],j,u),g(L)&&(L.geometry=t.scaleToGeodeticHeight(L.geometry,m,i,!u),L.geometry=B(f,L.geometry,e,i,l,!1,!1),M.push(L));L=o.combineInstances(M)[0],L.attributes.position.values=new Float64Array(L.attributes.position.values),L.indices=p.createTypedArray(L.attributes.position.values.length/3,L.indices);var P=L.attributes,Q=b.fromVertices(P.position.values);return f.position||delete P.position,new k({attributes:P,indices:L.indices,primitiveType:L.primitiveType,boundingSphere:Q})},W}),c("Core/PolygonOutlineGeometry",["./BoundingSphere","./ComponentDatatype","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./EllipsoidTangentPlane","./Geometry","./GeometryAttribute","./GeometryAttributes","./GeometryInstance","./GeometryPipeline","./IndexDatatype","./Math","./PolygonGeometryLibrary","./PolygonPipeline","./PrimitiveType","./Queue","./WindingOrder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";function t(a,c,d,e){var f=p.removeDuplicates(c),l=g.fromPoints(f,a),n=l.projectPointsOntoPlane(f,v),r=p.computeWindingOrder2D(n);r===s.CLOCKWISE&&(n.reverse(),f.reverse());var t,u=[],w=f.length;if(e)for(t=0;w>t;t++){var x=f[t],y=f[(t+1)%w];u.push(x.x,x.y,x.z,y.x,y.y,y.z)}else for(t=0;w>t;t++)u=u.concat(o.subdivideLine(f[t],f[(t+1)%w],d));w=u.length/3;var z=2*w,A=m.createTypedArray(u.length/3,z),B=0;for(t=0;w-1>t;t++)A[B++]=t,A[B++]=t+1;return A[B++]=w-1,A[B++]=0,new k({geometry:new h({attributes:new j({position:new i({componentDatatype:b.DOUBLE,componentsPerAttribute:3,values:new Float64Array(u)})}),indices:A,primitiveType:q.LINES})})}function u(a,c,d,e){var f=p.removeDuplicates(c),l=g.fromPoints(f,a),n=l.projectPointsOntoPlane(f,v),r=p.computeWindingOrder2D(n);r===s.CLOCKWISE&&(n.reverse(),f.reverse());var t,u=[],w=f.length,x=new Array(w);if(x[0]=0,e){var y,z;for(t=0;w-1>t;t++)y=f[t],z=f[(t+1)%w],u.push(y.x,y.y,y.z,z.x,z.y,z.z),x[t+1]=u.length/3;y=f[w-1],z=f[0],u.push(y.x,y.y,y.z,z.x,z.y,z.z)}else{for(t=0;w-1>t;t++)u=u.concat(o.subdivideLine(f[t],f[t+1],d)),x[t+1]=u.length/3;u=u.concat(o.subdivideLine(f[w-1],f[0],d))}w=u.length/3;var A=2*(2*w+x.length),B=m.createTypedArray(u.length/3,A),C=0;for(t=0;w-1>t;t++)B[C++]=t,B[C++]=t+1,B[C++]=t+w,B[C++]=t+1+w;for(B[C++]=w-1,B[C++]=0,B[C++]=w+w-1,B[C++]=w,t=0;t<x.length;t++){var D=x[t];B[C++]=D,B[C++]=D+w}return u=u.concat(u),new k({geometry:new h({attributes:new j({position:new i({componentDatatype:b.DOUBLE,componentsPerAttribute:3,values:new Float64Array(u)})}),indices:B,primitiveType:q.LINES})})}var v=[],w=function(a){a=c(a,c.EMPTY_OBJECT)
;var b=c(a.ellipsoid,f.WGS84),e=c(a.granularity,n.RADIANS_PER_DEGREE),g=c(a.height,0),h=c(a.perPositionHeight,!1),i=a.extrudedHeight,j=d(i)&&(!n.equalsEpsilon(g,i,n.EPSILON6)||h);if(j){var k=i;i=Math.min(k,g),g=Math.max(k,g)}var l=a.polygonHierarchy;this._ellipsoid=b,this._granularity=e,this._height=g,this._extrudedHeight=i,this._extrude=j,this._polygonHierarchy=l,this._perPositionHeight=h,this._workerName="createPolygonOutlineGeometry"};return w.fromPositions=function(a){a=c(a,c.EMPTY_OBJECT);var b={polygonHierarchy:{positions:a.positions},height:a.height,extrudedHeight:a.extrudedHeight,ellipsoid:a.ellipsoid,granularity:a.granularity,perPositionHeight:a.perPositionHeight};return new w(b)},w.createGeometry=function(b){var c=b._ellipsoid,f=b._granularity,g=b._height,i=b._extrudedHeight,j=b._extrude,k=b._polygonHierarchy,m=b._perPositionHeight,n=[],q=new r;q.enqueue(k);for(var s;0!==q.length;){var v=q.dequeue(),w=v.positions;if(w.length<3)throw new e("At least three positions are required.");var x=v.holes?v.holes.length:0;for(s=0;x>s;s++){var y=v.holes[s];n.push(y.positions);var z=0;d(y.holes)&&(z=y.holes.length);for(var A=0;z>A;A++)q.enqueue(y.holes[A])}n.push(w)}var B,C=[];if(j)for(s=0;s<n.length;s++)B=u(c,n[s],f,m),d(B)&&(B.geometry=o.scaleToGeodeticHeightExtruded(B.geometry,g,i,c,m),C.push(B));else for(s=0;s<n.length;s++)B=t(c,n[s],f,m),d(B)&&(B.geometry=p.scaleToGeodeticHeight(B.geometry,g,c,!m),C.push(B));B=l.combineInstances(C)[0];var D=a.fromVertices(B.attributes.position.values);return new h({attributes:B.attributes,indices:B.indices,primitiveType:B.primitiveType,boundingSphere:D})},w}),c("Core/PolylineGeometry",["./BoundingSphere","./Cartesian3","./Color","./ComponentDatatype","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./Geometry","./GeometryAttribute","./GeometryAttributes","./GeometryType","./IndexDatatype","./Math","./PolylinePipeline","./PrimitiveType","./VertexFormat"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";function r(a,b,d,e,f){var g,h=o.numberOfPoints(a,b,f),i=new Array(h),j=d.red,k=d.green,l=d.blue,m=d.alpha,n=e.red,p=e.green,q=e.blue,r=e.alpha;if(c.equals(d,e)){for(g=0;h>g;g++)i[g]=c.clone(d);return i}var s=(n-j)/h,t=(p-k)/h,u=(q-l)/h,v=(r-m)/h;for(g=0;h>g;g++)i[g]=new c(j+g*s,k+g*t,l+g*u,m+g*v);return i}var s=function(a){a=e(a,e.EMPTY_OBJECT);var b=a.positions,c=a.colors,d=e(a.width,1),f=e(a.colorsPerVertex,!1);this._positions=b,this._colors=c,this._width=d,this._perVertex=f,this._vertexFormat=e(a.vertexFormat,q.DEFAULT),this._followSurface=e(a.followSurface,!0),this._granularity=e(a.granularity,n.RADIANS_PER_DEGREE),this._ellipsoid=e(a.ellipsoid,h.WGS84),this._workerName="createPolylineGeometry"},t=new b,u=new b,v=new b,w=new b;return s.createGeometry=function(e){var g,h,n,q,s,x,y,z=e._width,A=e._vertexFormat,B=e._colors,C=e._perVertex,D=e._followSurface,E=e._granularity,F=e._ellipsoid,G=e._positions;if(D){var H=o.extractHeights(G,F),I=f(B)?[]:void 0;if(f(B)){for(g=0;g<G.length-1;g++)if(q=G[g],s=G[g+1],x=B[g],C&&g<B.length)y=B[g+1],I=I.concat(r(q,s,x,y,E));else{var J=o.numberOfPoints(q,s,E);for(h=0;J>h;h++)I.push(c.clone(x))}I.push(c.clone(B[B.length-1])),B=I}G=o.generateCartesianArc({positions:G,granularity:E,ellipsoid:F,height:H})}else G=e._positions;var K,L=4*G.length-4,M=new Float64Array(3*L),N=new Float64Array(3*L),O=new Float64Array(3*L),P=new Float32Array(2*L),Q=A.st?new Float32Array(2*L):void 0,R=f(B)?new Uint8Array(4*L):void 0,S=0,T=0,U=0,V=0,W=G.length;for(h=0;W>h;++h){0===h?(K=t,b.subtract(G[0],G[1],K),b.add(G[0],K,K)):K=G[h-1],b.clone(K,v),b.clone(G[h],u),h===W-1?(K=t,b.subtract(G[W-1],G[W-2],K),b.add(G[W-1],K,K)):K=G[h+1],b.clone(K,w);var X,Y;f(R)&&(X=0===h||C?B[h]:B[h-1],h!==W-1&&(Y=B[h]));var Z=0===h?2:0,$=h===W-1?2:4;for(n=Z;$>n;++n){b.pack(u,M,S),b.pack(v,N,S),b.pack(w,O,S),S+=3;var _=0>n-2?-1:1;if(P[T++]=2*(n%2)-1,P[T++]=_*z,A.st&&(Q[U++]=h/(W-1),Q[U++]=Math.max(P[T-2],0)),f(R)){var aa=2>n?X:Y;R[V++]=c.floatToByte(aa.red),R[V++]=c.floatToByte(aa.green),R[V++]=c.floatToByte(aa.blue),R[V++]=c.floatToByte(aa.alpha)}}}var ba=new k;ba.position=new j({componentDatatype:d.DOUBLE,componentsPerAttribute:3,values:M}),ba.prevPosition=new j({componentDatatype:d.DOUBLE,componentsPerAttribute:3,values:N}),ba.nextPosition=new j({componentDatatype:d.DOUBLE,componentsPerAttribute:3,values:O}),ba.expandAndWidth=new j({componentDatatype:d.FLOAT,componentsPerAttribute:2,values:P}),A.st&&(ba.st=new j({componentDatatype:d.FLOAT,componentsPerAttribute:2,values:Q})),f(R)&&(ba.color=new j({componentDatatype:d.UNSIGNED_BYTE,componentsPerAttribute:4,values:R,normalize:!0}));var ca=m.createTypedArray(L,6*G.length-6),da=0,ea=0,fa=G.length-1;for(h=0;fa>h;++h)ca[ea++]=da,ca[ea++]=da+2,ca[ea++]=da+1,ca[ea++]=da+1,ca[ea++]=da+2,ca[ea++]=da+3,da+=4;return new i({attributes:ba,indices:ca,primitiveType:p.TRIANGLES,boundingSphere:a.fromPoints(G),geometryType:l.POLYLINES})},s}),c("Core/PolylineVolumeGeometry",["./BoundingRectangle","./BoundingSphere","./ComponentDatatype","./CornerType","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./Geometry","./GeometryAttribute","./GeometryAttributes","./GeometryPipeline","./IndexDatatype","./Math","./PolygonPipeline","./PolylineVolumeGeometryLibrary","./PrimitiveType","./VertexFormat","./WindingOrder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";function t(a,d,e,f){var g=new k;f.position&&(g.position=new j({componentDatatype:c.DOUBLE,componentsPerAttribute:3,values:a}));var h,n,p,r,s,t,u=d.length,v=a.length/3,w=(v-2*u)/(2*u),x=o.triangulate(d),y=6*(w-1)*u+2*x.length,z=m.createTypedArray(v,y),A=2*u,B=0;for(h=0;w-1>h;h++){for(n=0;u-1>n;n++)p=2*n+2*h*u,t=p+A,r=p+1,s=r+A,z[B++]=r,z[B++]=p,z[B++]=s,z[B++]=s,z[B++]=p,z[B++]=t;p=2*u-2+2*h*u,r=p+1,s=r+A,t=p+A,z[B++]=r,z[B++]=p,z[B++]=s,z[B++]=s,z[B++]=p,z[B++]=t}if(f.st||f.tangent||f.binormal){var C,D,E=new Float32Array(2*v),F=1/(w-1),G=1/e.height,H=e.height/2,I=0;for(h=0;w>h;h++){for(C=h*F,D=G*(d[0].y+H),E[I++]=C,E[I++]=D,n=1;u>n;n++)D=G*(d[n].y+H),E[I++]=C,E[I++]=D,E[I++]=C,E[I++]=D;D=G*(d[0].y+H),E[I++]=C,E[I++]=D}for(n=0;u>n;n++)C=0,D=G*(d[n].y+H),E[I++]=C,E[I++]=D;for(n=0;u>n;n++)C=(w-1)*F,D=G*(d[n].y+H),E[I++]=C,E[I++]=D;g.st=new j({componentDatatype:c.FLOAT,componentsPerAttribute:2,values:new Float32Array(E)})}var J=v-2*u;for(h=0;h<x.length;h+=3){var K=x[h]+J,L=x[h+1]+J,M=x[h+2]+J;z[B++]=K,z[B++]=L,z[B++]=M,z[B++]=M+u,z[B++]=L+u,z[B++]=K+u}var N=new i({attributes:g,indices:z,boundingSphere:b.fromVertices(a),primitiveType:q.TRIANGLES});return f.normal&&(N=l.computeNormal(N)),(f.tangent||f.binormal)&&(N=l.computeBinormalAndTangent(N),f.tangent||(N.attributes.tangent=void 0),f.binormal||(N.attributes.binormal=void 0),f.st||(N.attributes.st=void 0)),N}var u=function(a){a=e(a,e.EMPTY_OBJECT);var b=a.polylinePositions,c=a.shapePositions;this._positions=b,this._shape=c,this._ellipsoid=e(a.ellipsoid,h.WGS84),this._height=e(a.height,0),this._cornerType=e(a.cornerType,d.ROUNDED),this._vertexFormat=e(a.vertexFormat,r.DEFAULT),this._granularity=e(a.granularity,n.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeGeometry"},v=new a;return u.createGeometry=function(b){var c=b._positions,d=p.removeDuplicatesFromPositions(c,b._ellipsoid),e=b._shape;e=p.removeDuplicatesFromShape(e),o.computeWindingOrder2D(e)===s.CLOCKWISE&&e.reverse();var f=a.fromPoints(e,v),g=p.computePositions(d,e,f,b,!0);return t(g,e,f,b._vertexFormat)},u}),c("Core/PolylineVolumeOutlineGeometry",["./BoundingRectangle","./BoundingSphere","./ComponentDatatype","./CornerType","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./Geometry","./GeometryAttribute","./GeometryAttributes","./IndexDatatype","./Math","./PolygonPipeline","./PolylineVolumeGeometryLibrary","./PrimitiveType","./WindingOrder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";function r(a,d){var e=new k;e.position=new j({componentDatatype:c.DOUBLE,componentsPerAttribute:3,values:a});var f,g,h=d.length,m=e.position.values.length/3,n=a.length/3,o=n/h,q=l.createTypedArray(m,2*h*(o+1)),r=0;f=0;var s=f*h;for(g=0;h-1>g;g++)q[r++]=g+s,q[r++]=g+s+1;for(q[r++]=h-1+s,q[r++]=s,f=o-1,s=f*h,g=0;h-1>g;g++)q[r++]=g+s,q[r++]=g+s+1;for(q[r++]=h-1+s,q[r++]=s,f=0;o-1>f;f++){var t=h*f,u=t+h;for(g=0;h>g;g++)q[r++]=g+t,q[r++]=g+u}var v=new i({attributes:e,indices:l.createTypedArray(m,q),boundingSphere:b.fromVertices(a),primitiveType:p.LINES});return v}var s=function(a){a=e(a,e.EMPTY_OBJECT);var b=a.polylinePositions,c=a.shapePositions;this._positions=b,this._shape=c,this._ellipsoid=e(a.ellipsoid,h.WGS84),this._cornerType=e(a.cornerType,d.ROUNDED),this._granularity=e(a.granularity,m.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry"},t=new a;return s.createGeometry=function(b){var c=b._positions,d=o.removeDuplicatesFromPositions(c,b._ellipsoid),e=b._shape;e=o.removeDuplicatesFromShape(e),n.computeWindingOrder2D(e)===q.CLOCKWISE&&e.reverse();var f=a.fromPoints(e,t),g=o.computePositions(d,e,f,b,!1);return r(g,e)},s}),c("Core/QuaternionSpline",["./defaultValue","./defined","./defineProperties","./DeveloperError","./Quaternion","./Spline"],function(a,b,c,d,e,f){"use strict";function g(a,c,d){var f=a.length,g=new Array(f);g[0]=b(c)?c:a[0],g[f-1]=b(d)?d:a[f-1];for(var h=1;f-1>h;++h)g[h]=e.computeInnerQuadrangle(a[h-1],a[h],a[h+1],new e);return g}function h(a){var c=a.points,d=a.innerQuadrangles,f=a.times;if(c.length<3){var g=f[0],h=1/(f[1]-g),i=c[0],j=c[1];return function(a,c){b(c)||(c=new e);var d=(a-g)*h;return e.fastSlerp(i,j,d,c)}}return function(g,h){b(h)||(h=new e);var i=a._lastTimeIndex=a.findTimeInterval(g,a._lastTimeIndex),j=(g-f[i])/(f[i+1]-f[i]),k=c[i],l=c[i+1],m=d[i],n=d[i+1];return e.fastSquad(k,l,m,n,j,h)}}var i=function(b){b=a(b,a.EMPTY_OBJECT);var c=b.points,d=b.times,e=b.firstInnerQuadrangle,f=b.lastInnerQuadrangle,i=g(c,e,f);this._times=d,this._points=c,this._innerQuadrangles=i,this._evaluateFunction=h(this),this._lastTimeIndex=0};return c(i.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}},innerQuadrangles:{get:function(){return this._innerQuadrangles}}}),i.prototype.findTimeInterval=f.prototype.findTimeInterval,i.prototype.evaluate=function(a,b){return this._evaluateFunction(a,b)},i}),c("Core/RectangleGeometryLibrary",["./Cartesian3","./Cartographic","./defined","./DeveloperError","./GeographicProjection","./Math","./Matrix2","./Rectangle"],function(a,b,c,d,e,f,g,h){"use strict";var i=Math.cos,j=Math.sin,k=Math.sqrt,l={};l.computePosition=function(a,b,d,e,f){var h=a.ellipsoid.radiiSquared,l=a.nwCorner,m=a.rectangle,n=l.latitude-a.granYCos*b+d*a.granXSin,o=i(n),p=j(n),q=h.z*p,r=l.longitude+b*a.granYSin+d*a.granXCos,s=o*i(r),t=o*j(r),u=h.x*s,v=h.y*t,w=k(u*s+v*t+q*p);e.x=u/w,e.y=v/w,e.z=q/w,c(a.vertexFormat)&&a.vertexFormat.st&&(f.x=(r-m.west)*a.lonScalar-.5,f.y=(n-m.south)*a.latScalar-.5,g.multiplyByVector(a.textureMatrix,f,f),f.x+=.5,f.y+=.5)};var m=new g,n=new a,o=new b,p=new a,q=new e;return l.computeOptions=function(b,e,i){var j,k,l,r,s,t=b._granularity,u=b._ellipsoid,v=b._surfaceHeight,w=b._rotation,x=b._extrudedHeight,y=e.east,z=e.west,A=e.north,B=e.south,C=A-B;z>y?(s=f.TWO_PI-z+y,j=Math.ceil(s/t)+1,k=Math.ceil(C/t)+1,l=s/(j-1),r=C/(k-1)):(s=y-z,j=Math.ceil(s/t)+1,k=Math.ceil(C/t)+1,l=s/(j-1),r=C/(k-1)),i=h.northwest(e,i);var D=h.center(e,o),E=r,F=l,G=0,H=0;if(c(w)){var I=Math.cos(w);E*=I,F*=I;var J=Math.sin(w);G=r*J,H=l*J,n=q.project(i,n),p=q.project(D,p),n=a.subtract(n,p,n);var K=g.fromRotation(w,m);n=g.multiplyByVector(K,n,n),n=a.add(n,p,n),i=q.unproject(n,i);var L=i.latitude,M=L+(j-1)*H,N=L-E*(k-1),O=L-E*(k-1)+(j-1)*H;A=Math.max(L,M,N,O),B=Math.min(L,M,N,O);var P=i.longitude,Q=P+(j-1)*F,R=P+(k-1)*G,S=P+(k-1)*G+(j-1)*F;if(y=Math.max(P,Q,R,S),z=Math.min(P,Q,R,S),A<-f.PI_OVER_TWO||A>f.PI_OVER_TWO||B<-f.PI_OVER_TWO||B>f.PI_OVER_TWO)throw new d("Rotated extent is invalid.");e.north=A,e.south=B,e.east=y,e.west=z}return{granYCos:E,granYSin:G,granXCos:F,granXSin:H,ellipsoid:u,width:j,height:k,surfaceHeight:v,extrudedHeight:x,nwCorner:i,rectangle:e}},l}),c("Core/RectangleGeometry",["./BoundingSphere","./Cartesian2","./Cartesian3","./Cartographic","./ComponentDatatype","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./Geometry","./GeometryAttribute","./GeometryAttributes","./GeometryInstance","./GeometryPipeline","./IndexDatatype","./Math","./Matrix2","./Matrix3","./PolygonPipeline","./PrimitiveType","./Quaternion","./Rectangle","./RectangleGeometryLibrary","./VertexFormat"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){"use strict";function y(a,b){var c=new j({attributes:new l,primitiveType:t.TRIANGLES});return c.attributes.position=new k({componentDatatype:e.DOUBLE,componentsPerAttribute:3,values:b.positions}),a.normal&&(c.attributes.normal=new k({componentDatatype:e.FLOAT,componentsPerAttribute:3,values:b.normals})),a.tangent&&(c.attributes.tangent=new k({componentDatatype:e.FLOAT,componentsPerAttribute:3,values:b.tangents})),a.binormal&&(c.attributes.binormal=new k({componentDatatype:e.FLOAT,componentsPerAttribute:3,values:b.binormals})),c}function z(a,b,d,e){for(var f=a.length,g=b.normal?new Float32Array(f):void 0,h=b.tangent?new Float32Array(f):void 0,i=b.binormal?new Float32Array(f):void 0,j=0,k=I,l=H,m=G,n=0;f>n;n+=3){var o=c.fromArray(a,n,F),p=j+1,q=j+2;(b.normal||b.tangent||b.binormal)&&(m=d.geodeticSurfaceNormal(o,m),(b.tangent||b.binormal)&&(c.cross(c.UNIT_Z,m,l),r.multiplyByVector(e,l,l),c.normalize(l,l),b.binormal&&c.normalize(c.cross(m,l,k),k)),b.normal&&(g[j]=m.x,g[p]=m.y,g[q]=m.z),b.tangent&&(h[j]=l.x,h[p]=l.y,h[q]=l.z),b.binormal&&(i[j]=k.x,i[p]=k.y,i[q]=k.z)),j+=3}return y(b,{positions:a,normals:g,tangents:h,binormals:i})}function A(a,b,d){for(var e=a.length,f=b.normal?new Float32Array(e):void 0,g=b.tangent?new Float32Array(e):void 0,h=b.binormal?new Float32Array(e):void 0,i=0,j=0,k=0,l=!0,m=I,n=H,o=G,q=0;e>q;q+=6){var r=c.fromArray(a,q,F);if(b.normal||b.tangent||b.binormal){var s=c.fromArray(a,q+6,N);if(l){var t=c.fromArray(a,q+3,O);c.subtract(s,r,s),c.subtract(t,r,t),o=c.normalize(c.cross(t,s,o),o),l=!1}c.equalsEpsilon(s,r,p.EPSILON10)&&(l=!0),(b.tangent||b.binormal)&&(m=d.geodeticSurfaceNormal(r,m),b.tangent&&(n=c.normalize(c.cross(m,o,n),n))),b.normal&&(f[i++]=o.x,f[i++]=o.y,f[i++]=o.z,f[i++]=o.x,f[i++]=o.y,f[i++]=o.z),b.tangent&&(g[j++]=n.x,g[j++]=n.y,g[j++]=n.z,g[j++]=n.x,g[j++]=n.y,g[j++]=n.z),b.binormal&&(h[k++]=m.x,h[k++]=m.y,h[k++]=m.z,h[k++]=m.x,h[k++]=m.y,h[k++]=m.z)}}return y(b,{positions:a,normals:f,tangents:g,binormals:h})}function B(a){for(var b=a.vertexFormat,c=a.ellipsoid,d=a.size,f=a.height,g=a.width,h=b.position?new Float64Array(3*d):void 0,i=b.st?new Float32Array(2*d):void 0,j=0,l=0,m=F,n=K,p=Number.MAX_VALUE,q=Number.MAX_VALUE,r=Number.MIN_VALUE,s=Number.MIN_VALUE,t=0;f>t;++t)for(var u=0;g>u;++u)w.computePosition(a,t,u,m,n),h[j++]=m.x,h[j++]=m.y,h[j++]=m.z,b.st&&(i[l++]=n.x,i[l++]=n.y,p=Math.min(p,n.x),q=Math.min(q,n.y),r=Math.max(r,n.x),s=Math.max(s,n.y));if(b.st&&(0>p||0>q||r>1||s>1))for(var v=0;v<i.length;v+=2)i[v]=(i[v]-p)/(r-p),i[v+1]=(i[v+1]-q)/(s-q);for(var x=z(h,b,c,a.tangentRotationMatrix),y=6*(g-1)*(f-1),A=o.createTypedArray(d,y),B=0,C=0,D=0;f-1>D;++D){for(var E=0;g-1>E;++E){var G=B,H=G+g,I=H+1,J=G+1;A[C++]=G,A[C++]=H,A[C++]=J,A[C++]=J,A[C++]=H,A[C++]=I,++B}++B}return x.indices=A,b.st&&(x.attributes.st=new k({componentDatatype:e.FLOAT,componentsPerAttribute:2,values:i})),x}function C(a,b,c,d,e){return a[b++]=d[c],a[b++]=d[c+1],a[b++]=d[c+2],a[b++]=e[c],a[b++]=e[c+1],a[b++]=e[c+2],a}function D(a,b,c,d){return a[b++]=d[c],a[b++]=d[c+1],a[b++]=d[c],a[b++]=d[c+1],a}function E(a){var b,d=a.vertexFormat,f=a.surfaceHeight,g=a.extrudedHeight,h=Math.min(g,f),i=Math.max(g,f),j=a.height,l=a.width,q=a.ellipsoid,r=B(a);if(p.equalsEpsilon(h,i,.1))return r;r=s.scaleToGeodeticHeight(r,i,q,!1);var t=new Float64Array(r.attributes.position.values),u=t.length,v=2*u,w=new Float64Array(v);w.set(t),r=s.scaleToGeodeticHeight(r,h,q);var x=r.attributes.position.values;w.set(x,u),r.attributes.position.values=w;var y,z=d.normal?new Float32Array(v):void 0,E=d.tangent?new Float32Array(v):void 0,F=d.binormal?new Float32Array(v):void 0,G=d.st?new Float32Array(2*(v/3)):void 0;if(d.normal){var H=r.attributes.normal.values;for(z.set(H),b=0;u>b;b++)H[b]=-H[b];z.set(H,u),r.attributes.normal.values=z}if(d.tangent){var I=r.attributes.tangent.values;for(E.set(I),b=0;u>b;b++)I[b]=-I[b];E.set(I,u),r.attributes.tangent.values=E}if(d.binormal){var J=r.attributes.binormal.values;F.set(J),F.set(J,u),r.attributes.binormal.values=F}d.st&&(y=r.attributes.st.values,G.set(y),G.set(y,2*(u/3)),r.attributes.st.values=G);var K=r.indices,L=K.length,M=u/3,P=o.createTypedArray(v/3,2*L);for(P.set(K),b=0;L>b;b+=3)P[b+L]=K[b+2]+M,P[b+1+L]=K[b+1]+M,P[b+2+L]=K[b]+M;r.indices=P;var Q=2*l+2*j-4,R=2*(Q+4),S=new Float64Array(3*R),T=d.st?new Float32Array(2*R):void 0,U=0,V=0,W=l*j;for(b=0;W>b;b+=l)S=C(S,U,3*b,t,x),U+=6,d.st&&(T=D(T,V,2*b,y),V+=4);for(b=W-l;W>b;b++)S=C(S,U,3*b,t,x),U+=6,d.st&&(T=D(T,V,2*b,y),V+=4);for(b=W-1;b>0;b-=l)S=C(S,U,3*b,t,x),U+=6,d.st&&(T=D(T,V,2*b,y),V+=4);for(b=l-1;b>=0;b--)S=C(S,U,3*b,t,x),U+=6,d.st&&(T=D(T,V,2*b,y),V+=4);var X=A(S,d,q);d.st&&(X.attributes.st=new k({componentDatatype:e.FLOAT,componentsPerAttribute:2,values:T}));var Y,Z,$,_,aa=o.createTypedArray(R,6*Q);u=S.length/3;var ba=0;for(b=0;u-1>b;b+=2){Y=b,_=Y+2;var ca=c.fromArray(S,3*Y,N),da=c.fromArray(S,3*_,O);c.equalsEpsilon(ca,da,p.EPSILON10)||(Z=Y+1,$=Z+2,aa[ba++]=Y,aa[ba++]=Z,aa[ba++]=_,aa[ba++]=_,aa[ba++]=Z,aa[ba++]=$)}return X.indices=aa,X=n.combineInstances([new m({geometry:r}),new m({geometry:X})]),X[0]}var F=new c,G=new c,H=new c,I=new c,J=new v,K=new b,L=new a,M=new a,N=new c,O=new c,P=function(a){a=f(a,f.EMPTY_OBJECT);var b=a.rectangle,c=f(a.granularity,p.RADIANS_PER_DEGREE),d=f(a.ellipsoid,i.WGS84),e=f(a.height,0),g=a.rotation,h=a.stRotation,j=f(a.vertexFormat,x.DEFAULT);this._rectangle=b,this._granularity=c,this._ellipsoid=d,this._surfaceHeight=e,this._rotation=g,this._stRotation=h,this._vertexFormat=j,this._extrudedHeight=a.extrudedHeight,this._closeTop=a.closeTop,this._closeBottom=a.closeBottom,this._workerName="createRectangleGeometry"},Q=new q,R=new r,S=new d,T=new u,U=new d;return P.createGeometry=function(b){var d=v.clone(b._rectangle,J),e=b._ellipsoid,f=b._surfaceHeight,h=b._extrudedHeight,i=b._stRotation,k=b._vertexFormat,m=w.computeOptions(b,d,S),n=Q,o=R;if(g(i)){q.fromRotation(-i,n);var p=v.center(d,U),t=e.cartographicToCartesian(p,N);c.normalize(t,t),u.fromAxisAngle(t,-i,T),r.fromQuaternion(T,o)}else q.clone(q.IDENTITY,n),r.clone(r.IDENTITY,o);m.lonScalar=1/(d.east-d.west),m.latScalar=1/(d.north-d.south),m.vertexFormat=k,m.textureMatrix=n,m.tangentRotationMatrix=o,m.size=m.width*m.height;var x,y;if(d=b._rectangle,g(h)){x=E(m);var z=a.fromRectangle3D(d,e,f,M),A=a.fromRectangle3D(d,e,h,L);y=a.union(z,A)}else x=B(m),x=s.scaleToGeodeticHeight(x,f,e,!1),y=a.fromRectangle3D(d,e,f);return k.position||delete x.attributes.position,new j({attributes:new l(x.attributes),indices:x.indices,primitiveType:x.primitiveType,boundingSphere:y})},P}),c("Core/RectangleOutlineGeometry",["./BoundingSphere","./Cartesian3","./Cartographic","./ComponentDatatype","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./Geometry","./GeometryAttribute","./GeometryAttributes","./IndexDatatype","./Math","./PolygonPipeline","./PrimitiveType","./Rectangle","./RectangleGeometryLibrary"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";function r(a){var b,c=a.size,e=a.height,f=a.width,g=new Float64Array(3*c),h=0,m=0,n=v;for(b=0;f>b;b++)q.computePosition(a,m,b,n),g[h++]=n.x,g[h++]=n.y,g[h++]=n.z;for(b=f-1,m=1;e>m;m++)q.computePosition(a,m,b,n),g[h++]=n.x,g[h++]=n.y,g[h++]=n.z;for(m=e-1,b=f-2;b>=0;b--)q.computePosition(a,m,b,n),g[h++]=n.x,g[h++]=n.y,g[h++]=n.z;for(b=0,m=e-2;m>0;m--)q.computePosition(a,m,b,n),g[h++]=n.x,g[h++]=n.y,g[h++]=n.z;for(var p=2*(g.length/3),r=l.createTypedArray(g.length/3,p),s=0,t=0;t<g.length/3-1;t++)r[s++]=t,r[s++]=t+1;r[s++]=g.length/3-1,r[s++]=0;var u=new i({attributes:new k,primitiveType:o.LINES});return u.attributes.position=new j({componentDatatype:d.DOUBLE,componentsPerAttribute:3,values:g}),u.indices=r,u}function s(a){var b=a.surfaceHeight,c=a.extrudedHeight,d=a.ellipsoid,e=Math.min(c,b),f=Math.max(c,b),g=r(a);if(m.equalsEpsilon(e,f,.1))return g;var h=a.height,i=a.width;g=n.scaleToGeodeticHeight(g,f,d,!1);var j=g.attributes.position.values,k=j.length,o=new Float64Array(2*k);o.set(j),g=n.scaleToGeodeticHeight(g,e,d);var p=g.attributes.position.values;o.set(p,k),g.attributes.position.values=o;var q=2*(o.length/3)+8,s=l.createTypedArray(o.length/3,q);k=o.length/6;for(var t=0,u=0;k-1>u;u++)s[t++]=u,s[t++]=u+1,s[t++]=u+k,s[t++]=u+k+1;return s[t++]=k-1,s[t++]=0,s[t++]=k+k-1,s[t++]=k,s[t++]=0,s[t++]=k,s[t++]=i-1,s[t++]=k+i-1,s[t++]=i+h-2,s[t++]=i+h-2+k,s[t++]=2*i+h-3,s[t++]=2*i+h-3+k,g.indices=s,g}var t=new a,u=new a,v=new b,w=new p,x=function(a){a=e(a,e.EMPTY_OBJECT);var b=a.rectangle,c=e(a.granularity,m.RADIANS_PER_DEGREE),d=e(a.ellipsoid,h.WGS84),f=e(a.height,0),g=a.rotation;this._rectangle=b,this._granularity=c,this._ellipsoid=d,this._surfaceHeight=f,this._rotation=g,this._extrudedHeight=a.extrudedHeight,this._workerName="createRectangleOutlineGeometry"},y=new c;return x.createGeometry=function(b){var c=p.clone(b._rectangle,w),d=b._ellipsoid,e=b._surfaceHeight,g=b._extrudedHeight,h=q.computeOptions(b,c,y);h.size=2*h.width+2*h.height-4;var j,k;if(c=b._rectangle,f(g)){j=s(h);var l=a.fromRectangle3D(c,d,e,u),m=a.fromRectangle3D(c,d,g,t);k=a.union(l,m)}else j=r(h),j=n.scaleToGeodeticHeight(j,e,d,!1),k=a.fromRectangle3D(c,d,e);return new i({attributes:j.attributes,indices:j.indices,primitiveType:o.LINES,boundingSphere:k})},x}),c("Core/ReferenceFrame",["./freezeObject"],function(a){"use strict";var b={FIXED:0,INERTIAL:1};return a(b)}),c("Core/ScreenSpaceEventType",["./freezeObject"],function(a){"use strict";var b={LEFT_DOWN:0,LEFT_UP:1,LEFT_CLICK:2,LEFT_DOUBLE_CLICK:3,RIGHT_DOWN:5,RIGHT_UP:6,RIGHT_CLICK:7,RIGHT_DOUBLE_CLICK:8,MIDDLE_DOWN:10,MIDDLE_UP:11,MIDDLE_CLICK:12,MIDDLE_DOUBLE_CLICK:13,MOUSE_MOVE:15,WHEEL:16,PINCH_START:17,PINCH_END:18,PINCH_MOVE:19};return a(b)}),c("Core/ScreenSpaceEventHandler",["./AssociativeArray","./Cartesian2","./defaultValue","./defined","./destroyObject","./DeveloperError","./KeyboardEventModifier","./ScreenSpaceEventType"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b,c){var d=a._element;if(d===document)return c.x=b.clientX,c.y=b.clientY,c;var e=d.getBoundingClientRect();return c.x=b.clientX-e.left,c.y=b.clientY-e.top,c}function j(a,b){var c=a;return d(b)&&(c+="+"+b),c}function k(a){return a.shiftKey?g.SHIFT:a.ctrlKey?g.CTRL:a.altKey?g.ALT:void 0}function l(a,b,c,d){var e=function(b){d(a,b)};c.addEventListener(b,e,!1),a._removalFunctions.push(function(){c.removeEventListener(b,e,!1)})}function m(a){var b=a._element,c=d(b.disableRootEvents)?b:document;d(window.PointerEvent)?(l(a,"pointerdown",b,y),l(a,"pointerup",b,z),l(a,"pointermove",b,A)):(l(a,"mousedown",b,o),l(a,"mouseup",c,p),l(a,"mousemove",c,q),l(a,"touchstart",b,t),l(a,"touchend",c,u),l(a,"touchmove",c,w)),l(a,"dblclick",b,r);var e;e="onwheel"in b?"wheel":d(document.onmousewheel)?"mousewheel":"DOMMouseScroll",l(a,e,b,s)}function n(a){for(var b=a._removalFunctions,c=0;c<b.length;++c)b[c]()}function o(a,c){if(!a._seenAnyTouchEvents){var e=c.button;a._buttonDown=e;var f;if(e===B.LEFT)f=h.LEFT_DOWN;else if(e===B.MIDDLE)f=h.MIDDLE_DOWN;else{if(e!==B.RIGHT)return;f=h.RIGHT_DOWN}var g=i(a,c,a._primaryPosition);b.clone(g,a._primaryStartPosition),b.clone(g,a._primaryPreviousPosition);var j=k(c),l=a.getInputAction(f,j);d(l)&&(b.clone(g,C.position),l(C),c.preventDefault())}}function p(a,c){if(!a._seenAnyTouchEvents){var e=c.button;a._buttonDown=void 0;var f,g;if(e===B.LEFT)f=h.LEFT_UP,g=h.LEFT_CLICK;else if(e===B.MIDDLE)f=h.MIDDLE_UP,g=h.MIDDLE_CLICK;else{if(e!==B.RIGHT)return;f=h.RIGHT_UP,g=h.RIGHT_CLICK}var j=k(c),l=a.getInputAction(f,j),m=a.getInputAction(g,j);if(d(l)||d(m)){var n=i(a,c,a._primaryPosition);if(d(l)&&(b.clone(n,D.position),l(D)),d(m)){var o=a._primaryStartPosition,p=o.x-n.x,q=o.y-n.y,r=Math.sqrt(p*p+q*q);r<a._clickPixelTolerance&&(b.clone(n,E.position),m(E))}}}}function q(a,c){if(!a._seenAnyTouchEvents){var e=k(c),f=i(a,c,a._primaryPosition),g=a._primaryPreviousPosition,j=a.getInputAction(h.MOUSE_MOVE,e);d(j)&&(b.clone(g,F.startPosition),b.clone(f,F.endPosition),j(F)),b.clone(f,g),d(a._buttonDown)&&c.preventDefault()}}function r(a,b){var c,e=b.button;if(e===B.LEFT)c=h.LEFT_DOUBLE_CLICK;else if(e===B.MIDDLE)c=h.MIDDLE_DOUBLE_CLICK;else{if(e!==B.RIGHT)return;c=h.RIGHT_DOUBLE_CLICK}var f=k(b),g=a.getInputAction(c,f);d(g)&&(i(a,b,G.position),g(G))}function s(a,b){var c;if(d(b.deltaY)){var e=b.deltaMode;c=e===b.DOM_DELTA_PIXEL?-b.deltaY:e===b.DOM_DELTA_LINE?40*-b.deltaY:120*-b.deltaY}else c=b.detail>0?-120*b.detail:b.wheelDelta;if(d(c)){var f=k(b),g=a.getInputAction(h.WHEEL,f);d(g)&&(g(c),b.preventDefault())}}function t(a,c){a._seenAnyTouchEvents=!0;var d,e,f,g=c.changedTouches,h=g.length,j=a._positions;for(d=0;h>d;++d)e=g[d],f=e.identifier,j.set(f,i(a,e,new b));v(a,c);var k=a._previousPositions;for(d=0;h>d;++d)e=g[d],f=e.identifier,k.set(f,b.clone(j.get(f)))}function u(a,b){a._seenAnyTouchEvents=!0;var c,d,e,f=b.changedTouches,g=f.length,h=a._positions;for(c=0;g>c;++c)d=f[c],e=d.identifier,h.remove(e);v(a,b);var i=a._previousPositions;for(c=0;g>c;++c)d=f[c],e=d.identifier,i.remove(e)}function v(a,c){var e,f,g=k(c),i=a._positions,j=a._previousPositions,l=i.length;if(1!==l&&a._buttonDown===B.LEFT&&(a._buttonDown=void 0,e=a.getInputAction(h.LEFT_UP,g),d(e)&&(b.clone(a._primaryPosition,J.position),e(J)),0===l&&(f=a.getInputAction(h.LEFT_CLICK,g),d(f)))){var m=a._primaryStartPosition,n=j.values[0],o=m.x-n.x,p=m.y-n.y,q=Math.sqrt(o*o+p*p);q<a._clickPixelTolerance&&(b.clone(a._primaryPosition,K.position),f(K))}if(2!==l&&a._isPinching&&(a._isPinching=!1,e=a.getInputAction(h.PINCH_END,g),d(e)&&e()),1===l){var r=i.values[0];b.clone(r,a._primaryPosition),b.clone(r,a._primaryStartPosition),b.clone(r,a._primaryPreviousPosition),a._buttonDown=B.LEFT,e=a.getInputAction(h.LEFT_DOWN,g),d(e)&&(b.clone(r,H.position),e(H)),c.preventDefault()}2===l&&(a._isPinching=!0,e=a.getInputAction(h.PINCH_START,g),d(e)&&(b.clone(i.values[0],I.position1),b.clone(i.values[1],I.position2),e(I)))}function w(a,c){a._seenAnyTouchEvents=!0;var e,f,g,h=c.changedTouches,j=h.length,k=a._positions;for(e=0;j>e;++e){f=h[e],g=f.identifier;var l=k.get(g);d(l)&&i(a,f,l)}x(a,c);var m=a._previousPositions;for(e=0;j>e;++e)f=h[e],g=f.identifier,b.clone(k.get(g),m.get(g))}function x(a,c){var e,f=k(c),g=a._positions,i=a._previousPositions,j=g.length;if(1===j&&a._buttonDown===B.LEFT){var l=g.values[0];b.clone(l,a._primaryPosition);var m=a._primaryPreviousPosition;e=a.getInputAction(h.MOUSE_MOVE,f),d(e)&&(b.clone(m,L.startPosition),b.clone(l,L.endPosition),e(L)),b.clone(l,m),c.preventDefault()}else if(2===j&&a._isPinching&&(e=a.getInputAction(h.PINCH_MOVE,f),d(e))){var n=g.values[0],o=g.values[1],p=i.values[0],q=i.values[1],r=o.x-n.x,s=o.y-n.y,t=.25*Math.sqrt(r*r+s*s),u=q.x-p.x,v=q.y-p.y,w=.25*Math.sqrt(u*u+v*v),x=.125*(o.y+n.y),y=.125*(q.y+p.y),z=Math.atan2(s,r),A=Math.atan2(v,u);b.fromElements(0,w,M.distance.startPosition),b.fromElements(0,t,M.distance.endPosition),b.fromElements(A,y,M.angleAndHeight.startPosition),b.fromElements(z,x,M.angleAndHeight.endPosition),e(M)}}function y(a,c){if(c.target.setPointerCapture(c.pointerId),"touch"===c.pointerType){var d=a._positions,e=c.pointerId;d.set(e,i(a,c,new b)),v(a,c);var f=a._previousPositions;f.set(e,b.clone(d.get(e)))}else o(a,c)}function z(a,b){if("touch"===b.pointerType){var c=a._positions,d=b.pointerId;c.remove(d),v(a,b);var e=a._previousPositions;e.remove(d)}else p(a,b)}function A(a,c){if("touch"===c.pointerType){var d=a._positions,e=c.pointerId;i(a,c,d.get(e)),x(a,c);var f=a._previousPositions;b.clone(d.get(e),f.get(e))}else q(a,c)}var B={LEFT:0,MIDDLE:1,RIGHT:2},C={position:new b},D={position:new b},E={position:new b},F={startPosition:new b,endPosition:new b},G={position:new b},H={position:new b},I={position1:new b,position2:new b},J={position:new b},K={position:new b},L={startPosition:new b,endPosition:new b},M={distance:{startPosition:new b,endPosition:new b},angleAndHeight:{startPosition:new b,endPosition:new b}},N=function(d){this._inputEvents={},this._buttonDown=void 0,this._isPinching=!1,this._seenAnyTouchEvents=!1,this._primaryStartPosition=new b,this._primaryPosition=new b,this._primaryPreviousPosition=new b,this._positions=new a,this._previousPositions=new a,this._removalFunctions=[],this._clickPixelTolerance=5,this._element=c(d,document),m(this)};return N.prototype.setInputAction=function(a,b,c){var d=j(b,c);this._inputEvents[d]=a},N.prototype.getInputAction=function(a,b){var c=j(a,b);return this._inputEvents[c]},N.prototype.removeInputAction=function(a,b){var c=j(a,b);delete this._inputEvents[c]},N.prototype.isDestroyed=function(){return!1},N.prototype.destroy=function(){return n(this),e(this)},N}),c("Core/ShowGeometryInstanceAttribute",["./ComponentDatatype","./defaultValue","./defined","./defineProperties","./DeveloperError"],function(a,b,c,d){"use strict";var e=function(a){a=b(a,!0),this.value=e.toValue(a)};return d(e.prototype,{componentDatatype:{get:function(){return a.UNSIGNED_BYTE}},componentsPerAttribute:{get:function(){return 1}},normalize:{get:function(){return!0}}}),e.toValue=function(a,b){return c(b)?(b[0]=a,b):new Uint8Array([a])},e}),c("Core/Simon1994PlanetaryPositions",["./Cartesian3","./defined","./DeveloperError","./JulianDate","./Math","./Matrix3","./TimeConstants","./TimeStandard"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){var b=6.239996+.0172019696544*a;return.001657*Math.sin(b+.01671*Math.sin(b))}function j(a,b){b=d.addSeconds(a,u,b);var c=d.totalDays(b)-v;return b=d.addSeconds(b,i(c),b)}function k(d,g,h,i,j,k,n,o){if(0>h&&(h=-h,j+=e.PI),0>h||h>e.PI)throw new c("The inclination is out of range. Inclination must be greater than or equal to zero and less than or equal to Pi radians.");var q=d*(1-g),r=i-j,s=j,t=m(k-i,g),u=l(g,0);if("Hyperbolic"===u&&Math.abs(e.NegativePiToPi(t))>=Math.acos(-1/g))throw new c("The true anomaly of the hyperbolic orbit lies outside of the bounds of the hyperbola.");p(r,h,s,D);var v=q*(1+g),w=Math.cos(t),x=Math.sin(t),y=1+g*w;if(y<=e.Epsilon10)throw new c("elements cannot be converted to cartesian");var z=v/y;return b(o)?(o.x=z*w,o.y=z*x,o.z=0):o=new a(z*w,z*x,0),f.multiplyByVector(D,o,o)}function l(a,b){if(0>a)throw new c("eccentricity cannot be negative.");return b>=a?"Circular":1-b>a?"Elliptical":1+b>=a?"Parabolic":"Hyperbolic"}function m(a,b){if(0>b||b>=1)throw new c("eccentricity out of range.");var d=n(a,b);return o(d,b)}function n(a,b){if(0>b||b>=1)throw new c("eccentricity out of range.");var d=Math.floor(a/e.TWO_PI);a-=d*e.TWO_PI;var f,g=a+b*Math.sin(a)/(1-Math.sin(a+b)+Math.sin(a)),h=Number.MAX_VALUE;for(f=0;E>f&&Math.abs(h-g)>F;++f){h=g;var i=h-b*Math.sin(h)-a,j=1-b*Math.cos(h);g=h-i/j}if(f>=E)throw new c("Kepler equation did not converge");return h=g+d*e.TWO_PI}function o(a,b){if(0>b||b>=1)throw new c("eccentricity out of range.");var d=Math.floor(a/e.TWO_PI);a-=d*e.TWO_PI;var f=Math.cos(a)-b,g=Math.sin(a)*Math.sqrt(1-b*b),h=Math.atan2(g,f);return h=e.zeroToTwoPi(h),0>a&&(h-=e.TWO_PI),h+=d*e.TWO_PI}function p(a,d,g,h){if(0>d||d>e.PI)throw new c("inclination out of range");var i=Math.cos(a),j=Math.sin(a),k=Math.cos(d),l=Math.sin(d),m=Math.cos(g),n=Math.sin(g);return b(h)?(h[0]=m*i-n*j*k,h[1]=n*i+m*j*k,h[2]=j*l,h[3]=-m*j-n*i*k,h[4]=-n*j+m*i*k,h[5]=i*l,h[6]=n*l,h[7]=-m*l,h[8]=k):h=new f(m*i-n*j*k,-m*j-n*i*k,n*l,n*i+m*j*k,-n*j+m*i*k,-m*l,j*l,i*l,k),h}function q(a,b){j(a,Da)
;var c=Da.dayNumber-w.dayNumber+(Da.secondsOfDay-w.secondsOfDay)/g.SECONDS_PER_DAY,d=c/(10*g.DAYS_PER_JULIAN_CENTURY),e=.3595362*d,f=G+R*Math.cos(J*e)+Z*Math.sin(J*e)+S*Math.cos(K*e)+$*Math.sin(K*e)+T*Math.cos(L*e)+_*Math.sin(L*e)+U*Math.cos(M*e)+aa*Math.sin(M*e)+V*Math.cos(N*e)+ba*Math.sin(N*e)+W*Math.cos(O*e)+ca*Math.sin(O*e)+X*Math.cos(P*e)+da*Math.sin(P*e)+Y*Math.cos(Q*e)+ea*Math.sin(Q*e),h=H+I*d+na*Math.cos(fa*e)+va*Math.sin(fa*e)+oa*Math.cos(ga*e)+wa*Math.sin(ga*e)+pa*Math.cos(ha*e)+xa*Math.sin(ha*e)+qa*Math.cos(ia*e)+ya*Math.sin(ia*e)+ra*Math.cos(ja*e)+za*Math.sin(ja*e)+sa*Math.cos(ka*e)+Aa*Math.sin(ka*e)+ta*Math.cos(la*e)+Ba*Math.sin(la*e)+ua*Math.cos(ma*e)+Ca*Math.sin(ma*e),i=.0167086342-.0004203654*d,l=102.93734808*A+11612.3529*B*d,m=469.97289*B*d,n=174.87317577*A-8679.27034*B*d;return k(f,i,m,l,n,h,y,b)}function r(a,b){j(a,Da);var c=Da.dayNumber-w.dayNumber+(Da.secondsOfDay-w.secondsOfDay)/g.SECONDS_PER_DAY,d=c/g.DAYS_PER_JULIAN_CENTURY,e=d*d,f=e*d,h=f*d,i=383397.7725+.004*d,l=.055545526-1.6e-8*d,m=5.15668983*A,n=-8e-5*d+.02966*e-42e-6*f-1.3e-7*h,o=83.35324312*A,p=14643420.2669*d-38.2702*e-.045047*f+21301e-8*h,q=125.04455501*A,r=-6967919.3631*d+6.3602*e+.007625*f-3586e-8*h,s=218.31664563*A,t=1732559343.4847*d-6.391*e+.006588*f-3169e-8*h,u=297.85019547*A+B*(1602961601.209*d-6.3706*e+.006593*f-3169e-8*h),v=93.27209062*A+B*(1739527262.8478*d-12.7512*e-.001037*f+417e-8*h),y=134.96340251*A+B*(1717915923.2178*d+31.8792*e+.051635*f-2447e-7*h),C=357.52910918*A+B*(129596581.0481*d-.5532*e+136e-6*f-1149e-8*h),D=310.17137918*A-B*(6967051.436*d+6.2068*e+.007618*f-3219e-8*h),E=2*u,F=4*u,G=6*u,H=2*y,I=3*y,J=4*y,K=2*v;i+=3400.4*Math.cos(E)-635.6*Math.cos(E-y)-235.6*Math.cos(y)+218.1*Math.cos(E-C)+181*Math.cos(E+y),l+=.014216*Math.cos(E-y)+.008551*Math.cos(E-H)-.001383*Math.cos(y)+.001356*Math.cos(E+y)-.001147*Math.cos(F-I)-914e-6*Math.cos(F-H)+869e-6*Math.cos(E-C-y)-627e-6*Math.cos(E)-394e-6*Math.cos(F-J)+282e-6*Math.cos(E-C-H)-279e-6*Math.cos(u-y)-236e-6*Math.cos(H)+231e-6*Math.cos(F)+229e-6*Math.cos(G-J)-201e-6*Math.cos(H-K),n+=486.26*Math.cos(E-K)-40.13*Math.cos(E)+37.51*Math.cos(K)+25.73*Math.cos(H-K)+19.97*Math.cos(E-C-K),p+=-55609*Math.sin(E-y)-34711*Math.sin(E-H)-9792*Math.sin(y)+9385*Math.sin(F-I)+7505*Math.sin(F-H)+5318*Math.sin(E+y)+3484*Math.sin(F-J)-3417*Math.sin(E-C-y)-2530*Math.sin(G-J)-2376*Math.sin(E)-2075*Math.sin(E-I)-1883*Math.sin(H)-1736*Math.sin(G-5*y)+1626*Math.sin(C)-1370*Math.sin(G-I),r+=-5392*Math.sin(E-K)-540*Math.sin(C)-441*Math.sin(E)+423*Math.sin(K)-288*Math.sin(H-K),t+=-3332.9*Math.sin(E)+1197.4*Math.sin(E-y)-662.5*Math.sin(C)+396.3*Math.sin(y)-218*Math.sin(E-C);var L=2*D,M=3*D;n+=46.997*Math.cos(D)*d-.614*Math.cos(E-K+D)*d+.614*Math.cos(E-K-D)*d-.0297*Math.cos(L)*e-.0335*Math.cos(D)*e+.0012*Math.cos(E-K+L)*e-16e-5*Math.cos(D)*f+4e-5*Math.cos(M)*f+4e-5*Math.cos(L)*f;var N=2.116*Math.sin(D)*d-.111*Math.sin(E-K-D)*d-.0015*Math.sin(D)*e;p+=N,t+=N,r+=-520.77*Math.sin(D)*d+13.66*Math.sin(E-K+D)*d+1.12*Math.sin(E-D)*d-1.06*Math.sin(K-D)*d+.66*Math.sin(L)*e+.371*Math.sin(D)*e-.035*Math.sin(E-K+L)*e-.015*Math.sin(E-K+D)*e+.0014*Math.sin(D)*f-.0011*Math.sin(M)*f-9e-4*Math.sin(L)*f,i*=z;var O=m+n*B,P=o+p*B,Q=s+t*B,R=q+r*B;return k(i,l,O,P,R,Q,x,b)}function s(b,c){return c=r(b,c),a.multiplyByScalar(c,Fa,c)}var t={},u=32.184,v=2451545,w=new d(2451545,0,h.TAI),x=398600435e6,y=328900.56*1.012300034*x,z=1e3,A=e.RADIANS_PER_DEGREE,B=e.RADIANS_PER_ARCSECOND,C=14959787e4,D=new f,E=50,F=e.EPSILON8,G=1.0000010178*C,H=100.46645683*A,I=1295977422.83429*B,J=16002,K=21863,L=32004,M=10931,N=14529,O=16368,P=15318,Q=32794,R=64e-7*C,S=-152*1e-7*C,T=62e-7*C,U=-8e-7*C,V=32e-7*C,W=-41*1e-7*C,X=19e-7*C,Y=-11*1e-7*C,Z=-150*1e-7*C,$=-46*1e-7*C,_=68*1e-7*C,aa=54e-7*C,ba=14e-7*C,ca=24e-7*C,da=-28*1e-7*C,ea=22e-7*C,fa=10,ga=16002,ha=21863,ia=10931,ja=1473,ka=32004,la=4387,ma=73,na=-325*1e-7,oa=-322*1e-7,pa=-79*1e-7,qa=232*1e-7,ra=-52*1e-7,sa=97e-7,ta=55e-7,ua=-41*1e-7,va=-105*1e-7,wa=-137*1e-7,xa=258e-7,ya=35e-7,za=-116*1e-7,Aa=-88*1e-7,Ba=-112*1e-7,Ca=-80*1e-7,Da=new d(0,0,h.TAI),Ea=.012300034,Fa=-1*(Ea/(Ea+1)),Ga=new f(1.0000000000000002,5.619723173785822e-16,4.690511510146299e-19,-5.154129427414611e-16,.9174820620691819,-.39777715593191376,-2.23970096136568e-16,.39777715593191376,.9174820620691819),Ha=new a;return t.computeSunPositionInEarthInertialFrame=function(c,e){return b(c)||(c=d.now()),b(e)||(e=new a),Ha=q(c,Ha),e=a.negate(Ha,e),s(c,Ha),a.subtract(e,Ha,e),f.multiplyByVector(Ga,e,e),e},t.computeMoonPositionInEarthInertialFrame=function(a,c){return b(a)||(a=d.now()),c=r(a,c),f.multiplyByVector(Ga,c,c),c},t}),c("Core/SimplePolylineGeometry",["./BoundingSphere","./Cartesian3","./Color","./ComponentDatatype","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./Geometry","./GeometryAttribute","./GeometryAttributes","./IndexDatatype","./Math","./PolylinePipeline","./PrimitiveType"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";function p(a,b,d,e,f,g,h){var i,j=n.numberOfPoints(a,b,f),k=d.red,l=d.green,m=d.blue,o=d.alpha,p=e.red,q=e.green,r=e.blue,s=e.alpha;if(c.equals(d,e)){for(i=0;j>i;i++)g[h++]=c.floatToByte(k),g[h++]=c.floatToByte(l),g[h++]=c.floatToByte(m),g[h++]=c.floatToByte(o);return h}var t=(p-k)/j,u=(q-l)/j,v=(r-m)/j,w=(s-o)/j,x=h;for(i=0;j>i;i++)g[x++]=c.floatToByte(k+i*t),g[x++]=c.floatToByte(l+i*u),g[x++]=c.floatToByte(m+i*v),g[x++]=c.floatToByte(o+i*w);return x}var q=function(a){a=e(a,e.EMPTY_OBJECT);var b=a.positions,c=a.colors,d=e(a.colorsPerVertex,!1);this._positions=b,this._colors=c,this._perVertex=d,this._followSurface=e(a.followSurface,!0),this._granularity=e(a.granularity,m.RADIANS_PER_DEGREE),this._ellipsoid=e(a.ellipsoid,h.WGS84),this._workerName="createSimplePolylineGeometry"},r=new Array(2),s=new Array(2);return q.createGeometry=function(e){var g,h,m,q,t,u,v,w,x,y,z=e._positions,A=e._colors,B=e._perVertex,C=e._followSurface,D=e._granularity,E=e._ellipsoid,F=f(A)&&!B,G=z.length,H=0,I=0,J=0,K=0;if(C){var L=n.extractHeights(z,E);if(F){for(g=0;G-1>g;g++)t=z[g],u=z[g+1],I+=n.numberOfPoints(t,u,D),I++;for(h=new Float64Array(3*I),q=new Uint8Array(4*I),x=0,g=0;G-1>g;g++){r[0]=z[g],r[1]=z[g+1],s[0]=L[g],s[1]=L[g+1];var M=n.generateArc({positions:r,granularity:D,ellipsoid:E,height:s});if(f(A)){var N=M.length/3;for(y=A[g],J=0;N>J;J++)q[x++]=c.floatToByte(y.red),q[x++]=c.floatToByte(y.green),q[x++]=c.floatToByte(y.blue),q[x++]=c.floatToByte(y.alpha)}h.set(M,H),H+=M.length}}else if(h=new Float64Array(n.generateArc({positions:z,granularity:D,ellipsoid:E,height:L})),f(A)){for(q=new Uint8Array(4*(h.length/3)),g=0;G-1>g;g++)t=z[g],u=z[g+1],v=A[g],w=A[g+1],H=p(t,u,v,w,D,q,H);q[H++]=c.floatToByte(w.red),q[H++]=c.floatToByte(w.green),q[H++]=c.floatToByte(w.blue),q[H++]=c.floatToByte(w.alpha)}}else for(m=F?2*z.length-2:z.length,h=new Float64Array(3*m),q=f(A)?new Uint8Array(4*m):void 0,g=0;G>g;++g){var O=z[g];if(F&&g>0&&(b.pack(O,h,K),K+=3,y=A[g-1],q[J++]=c.floatToByte(y.red),q[J++]=c.floatToByte(y.green),q[J++]=c.floatToByte(y.blue),q[J++]=c.floatToByte(y.alpha)),F&&g===G-1)break;b.pack(O,h,K),K+=3,f(A)&&(y=A[g],q[J++]=c.floatToByte(y.red),q[J++]=c.floatToByte(y.green),q[J++]=c.floatToByte(y.blue),q[J++]=c.floatToByte(y.alpha))}var P=new k;P.position=new j({componentDatatype:d.DOUBLE,componentsPerAttribute:3,values:h}),f(A)&&(P.color=new j({componentDatatype:d.UNSIGNED_BYTE,componentsPerAttribute:4,values:q,normalize:!0})),m=h.length/3;var Q=2*(m-1),R=l.createTypedArray(m,Q);for(K=0,g=0;m-1>g;g++)R[K++]=g,R[K++]=g+1;return new i({attributes:P,indices:R,primitiveType:o.LINES,boundingSphere:a.fromPoints(z)})},q}),c("Core/SphereGeometry",["./Cartesian3","./defaultValue","./EllipsoidGeometry"],function(a,b,c){"use strict";var d=function(d){var e=b(d.radius,1),f=new a(e,e,e),g={radii:f,stackPartitions:d.stackPartitions,slicePartitions:d.slicePartitions,vertexFormat:d.vertexFormat};this._ellipsoidGeometry=new c(g),this._workerName="createSphereGeometry"};return d.createGeometry=function(a){return c.createGeometry(a._ellipsoidGeometry)},d}),c("Core/SphereOutlineGeometry",["./Cartesian3","./defaultValue","./EllipsoidOutlineGeometry"],function(a,b,c){"use strict";var d=function(d){var e=b(d.radius,1),f=new a(e,e,e),g={radii:f,stackPartitions:d.stackPartitions,slicePartitions:d.slicePartitions,subdivisions:d.subdivisions};this._ellipsoidGeometry=new c(g),this._workerName="createSphereOutlineGeometry"};return d.createGeometry=function(a){return c.createGeometry(a._ellipsoidGeometry)},d}),c("Core/Spherical",["./defaultValue","./defined","./DeveloperError"],function(a,b){"use strict";var c=function(b,c,d){this.clock=a(b,0),this.cone=a(c,0),this.magnitude=a(d,1)};return c.fromCartesian3=function(a,d){var e=a.x,f=a.y,g=a.z,h=e*e+f*f;return b(d)||(d=new c),d.clock=Math.atan2(f,e),d.cone=Math.atan2(Math.sqrt(h),g),d.magnitude=Math.sqrt(h+g*g),d},c.clone=function(a,d){return b(a)?b(d)?(d.clock=a.clock,d.cone=a.cone,d.magnitude=a.magnitude,d):new c(a.clock,a.cone,a.magnitude):void 0},c.normalize=function(a,d){return b(d)?(d.clock=a.clock,d.cone=a.cone,d.magnitude=1,d):new c(a.clock,a.cone,1)},c.equals=function(a,c){return a===c||b(a)&&b(c)&&a.clock===c.clock&&a.cone===c.cone&&a.magnitude===c.magnitude},c.equalsEpsilon=function(c,d,e){return e=a(e,0),c===d||b(c)&&b(d)&&Math.abs(c.clock-d.clock)<=e&&Math.abs(c.cone-d.cone)<=e&&Math.abs(c.magnitude-d.magnitude)<=e},c.prototype.equals=function(a){return c.equals(this,a)},c.prototype.clone=function(a){return c.clone(this,a)},c.prototype.equalsEpsilon=function(a,b){return c.equalsEpsilon(this,a,b)},c.prototype.toString=function(){return"("+this.clock+", "+this.cone+", "+this.magnitude+")"},c}),c("Core/TerrainData",["./defineProperties","./DeveloperError"],function(a,b){"use strict";var c=function(){b.throwInstantiationError()};return a(c.prototype,{waterMask:{get:b.throwInstantiationError}}),c.prototype.interpolateHeight=b.throwInstantiationError,c.prototype.isChildAvailable=b.throwInstantiationError,c.prototype.createMesh=b.throwInstantiationError,c.prototype.upsample=b.throwInstantiationError,c.prototype.wasCreatedByUpsampling=b.throwInstantiationError,c}),c("Core/TilingScheme",["./defineProperties","./DeveloperError"],function(a,b){"use strict";var c=function(){throw new b("This type should not be instantiated directly.  Instead, use WebMercatorTilingScheme or GeographicTilingScheme.")};return a(c.prototype,{ellipsoid:{get:b.throwInstantiationError},rectangle:{get:b.throwInstantiationError},projection:{get:b.throwInstantiationError}}),c.prototype.getNumberOfXTilesAtLevel=b.throwInstantiationError,c.prototype.getNumberOfYTilesAtLevel=b.throwInstantiationError,c.prototype.rectangleToNativeRectangle=b.throwInstantiationError,c.prototype.tileXYToNativeRectangle=b.throwInstantiationError,c.prototype.tileXYToRectangle=b.throwInstantiationError,c.prototype.positionToTileXY=b.throwInstantiationError,c}),c("Core/TimeIntervalCollection",["./binarySearch","./defaultValue","./defined","./defineProperties","./DeveloperError","./Event","./JulianDate","./TimeInterval"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){return g.compare(a.start,b.start)}var j=function(){this._intervals=[],this._changedEvent=new f};d(j.prototype,{changedEvent:{get:function(){return this._changedEvent}},start:{get:function(){var a=this._intervals;return 0===a.length?void 0:a[0].start}},isStartIncluded:{get:function(){var a=this._intervals;return 0===a.length?!1:a[0].isStartIncluded}},stop:{get:function(){var a=this._intervals,b=a.length;return 0===b?void 0:a[b-1].stop}},isStopIncluded:{get:function(){var a=this._intervals,b=a.length;return 0===b?!1:a[b-1].isStopIncluded}},length:{get:function(){return this._intervals.length}},isEmpty:{get:function(){return 0===this._intervals.length}}}),j.prototype.equals=function(a,b){if(this===a)return!0;if(!(a instanceof j))return!1;var c=this._intervals,d=a._intervals,e=c.length;if(e!==d.length)return!1;for(var f=0;e>f;f++)if(!h.equals(c[f],d[f],b))return!1;return!0},j.prototype.get=function(a){return this._intervals[a]},j.prototype.removeAll=function(){this._intervals.length>0&&(this._intervals.length=0,this._changedEvent.raiseEvent(this))},j.prototype.findIntervalContainingDate=function(a){var b=this.indexOf(a);return b>=0?this._intervals[b]:void 0},j.prototype.findDataForIntervalContainingDate=function(a){var b=this.indexOf(a);return b>=0?this._intervals[b].data:void 0},j.prototype.contains=function(a){return this.indexOf(a)>=0};var k=new h;return j.prototype.indexOf=function(b){var c=this._intervals;k.start=b,k.stop=b;var d=a(c,k,i);return d>=0?c[d].isStartIncluded?d:d>0&&c[d-1].stop.equals(b)&&c[d-1].isStopIncluded?d-1:~d:(d=~d,d>0&&d-1<c.length&&h.contains(c[d-1],b)?d-1:~d)},j.prototype.findInterval=function(a){a=b(a,b.EMPTY_OBJECT);for(var d=a.start,e=a.stop,f=a.isStartIncluded,g=a.isStopIncluded,h=this._intervals,i=0,j=h.length;j>i;i++){var k=h[i];if(!(c(d)&&!k.start.equals(d)||c(e)&&!k.stop.equals(e)||c(f)&&k.isStartIncluded!==f||c(g)&&k.isStopIncluded!==g))return h[i]}return void 0},j.prototype.addInterval=function(b,d){if(!b.isEmpty){var e,f,j=this._intervals;if(0===j.length||g.greaterThan(b.start,j[j.length-1].stop))return j.push(b),this._changedEvent.raiseEvent(this),void 0;for(f=a(j,b,i),0>f?f=~f:f>0&&b.isStartIncluded&&j[f-1].isStartIncluded&&j[f-1].start.equals(b.start)?--f:f<j.length&&!b.isStartIncluded&&j[f].isStartIncluded&&j[f].start.equals(b.start)&&++f,f>0&&(e=g.compare(j[f-1].stop,b.start),(e>0||0===e&&(j[f-1].isStopIncluded||b.isStartIncluded))&&((c(d)?d(j[f-1].data,b.data):j[f-1].data===b.data)?(b=g.greaterThan(b.stop,j[f-1].stop)?new h({start:j[f-1].start,stop:b.stop,isStartIncluded:j[f-1].isStartIncluded,isStopIncluded:b.isStopIncluded,data:b.data}):new h({start:j[f-1].start,stop:j[f-1].stop,isStartIncluded:j[f-1].isStartIncluded,isStopIncluded:j[f-1].isStopIncluded||b.stop.equals(j[f-1].stop)&&b.isStopIncluded,data:b.data}),j.splice(f-1,1),--f):(e=g.compare(j[f-1].stop,b.stop),e>0||0===e&&j[f-1].isStopIncluded&&!b.isStopIncluded?j.splice(f-1,1,new h({start:j[f-1].start,stop:b.start,isStartIncluded:j[f-1].isStartIncluded,isStopIncluded:!b.isStartIncluded,data:j[f-1].data}),new h({start:b.stop,stop:j[f-1].stop,isStartIncluded:!b.isStopIncluded,isStopIncluded:j[f-1].isStopIncluded,data:j[f-1].data})):j[f-1]=new h({start:j[f-1].start,stop:b.start,isStartIncluded:j[f-1].isStartIncluded,isStopIncluded:!b.isStartIncluded,data:j[f-1].data}))));f<j.length&&(e=g.compare(b.stop,j[f].start),e>0||0===e&&(b.isStopIncluded||j[f].isStartIncluded));)if(c(d)?d(j[f].data,b.data):j[f].data===b.data)b=new h({start:b.start,stop:g.greaterThan(j[f].stop,b.stop)?j[f].stop:b.stop,isStartIncluded:b.isStartIncluded,isStopIncluded:g.greaterThan(j[f].stop,b.stop)?j[f].isStopIncluded:b.isStopIncluded,data:b.data}),j.splice(f,1);else{if(j[f]=new h({start:b.stop,stop:j[f].stop,isStartIncluded:!b.isStopIncluded,isStopIncluded:j[f].isStopIncluded,data:j[f].data}),!j[f].isEmpty)break;j.splice(f,1)}j.splice(f,0,b),this._changedEvent.raiseEvent(this)}},j.prototype.removeInterval=function(b){if(b.isEmpty)return!1;var c=!1,d=this._intervals,e=a(d,b,i);0>e&&(e=~e);var f=b.start,j=b.stop,k=b.isStartIncluded,l=b.isStopIncluded;if(e>0){var m=d[e-1],n=m.stop;(g.greaterThan(n,f)||h.equals(n,f)&&m.isStopIncluded&&k)&&(c=!0,(g.greaterThan(n,j)||m.isStopIncluded&&!l&&h.equals(n,j))&&d.splice(e,0,new h({start:j,stop:n,isStartIncluded:!l,isStopIncluded:m.isStopIncluded,data:m.data})),d[e-1]=new h({start:m.start,stop:f,isStartIncluded:m.isStartIncluded,isStopIncluded:!k,data:m.data}))}var o=d[e];for(e<d.length&&!k&&o.isStartIncluded&&f.equals(o.start)&&(c=!0,d.splice(e,0,new h({start:o.start,stop:o.start,isStartIncluded:!0,isStopIncluded:!0,data:o.data})),++e,o=d[e]);e<d.length&&g.greaterThan(j,o.stop);)c=!0,d.splice(e,1);return e<d.length&&j.equals(o.stop)&&(c=!0,!l&&o.isStopIncluded?(e+1<d.length&&d[e+1].start.equals(j)&&o.data===d[e+1].data?(d.splice(e,1),o=new h({start:o.start,stop:o.stop,isStartIncluded:!0,isStopIncluded:o.isStopIncluded,data:o.data})):o=new h({start:j,stop:j,isStartIncluded:!0,isStopIncluded:!0,data:o.data}),d[e]=o):d.splice(e,1)),e<d.length&&(g.greaterThan(j,o.start)||j.equals(o.start)&&l&&o.isStartIncluded)&&(c=!0,d[e]=new h({start:j,stop:o.stop,isStartIncluded:!l,isStopIncluded:o.isStopIncluded,data:o.data})),c&&this._changedEvent.raiseEvent(this),c},j.prototype.intersect=function(a,b,d){for(var e=0,f=0,i=new j,k=this._intervals,l=a._intervals;e<k.length&&f<l.length;){var m=k[e],n=l[f];if(g.lessThan(m.stop,n.start))++e;else if(g.lessThan(n.stop,m.start))++f;else{if(c(d)||c(b)&&b(m.data,n.data)||!c(b)&&n.data===m.data){var o=h.intersect(m,n,new h,d);o.isEmpty||i.addInterval(o,b)}g.lessThan(m.stop,n.stop)||m.stop.equals(n.stop)&&!m.isStopIncluded&&n.isStopIncluded?++e:++f}}return i},j}),c("Core/loadXML",["./loadWithXhr"],function(a){"use strict";var b=function(b,c){return a({url:b,responseType:"document",headers:c,overrideMimeType:"text/xml"})};return b}),c("Core/VRTheWorldTerrainProvider",["../ThirdParty/when","./Credit","./defaultValue","./defined","./defineProperties","./DeveloperError","./Ellipsoid","./Event","./GeographicTilingScheme","./getImagePixels","./HeightmapTerrainData","./loadImage","./loadXML","./Math","./Rectangle","./TerrainProvider","./throttleRequestByServer","./TileProviderError"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";function s(a,b){this.rectangle=a,this.maxLevel=b}function t(a,b,c,d){for(var e=a._tilingScheme,f=a._rectangles,g=e.tileXYToRectangle(b,c,d),h=0,i=0;i<f.length&&15!==h;++i){var j=f[i];if(!(j.maxLevel<=d)){var k=j.rectangle,l=o.intersectWith(k,g,w);o.isEmpty(l)||(u(e,k,2*b,2*c,d+1)&&(h|=4),u(e,k,2*b+1,2*c,d+1)&&(h|=8),u(e,k,2*b,2*c+1,d+1)&&(h|=1),u(e,k,2*b+1,2*c+1,d+1)&&(h|=2))}}return h}function u(a,b,c,d,e){var f=a.tileXYToRectangle(c,d,e);return!o.isEmpty(o.intersectWith(f,b,w))}var v=function(e){function j(a){var b=a.getElementsByTagName("SRS")[0].textContent;if("EPSG:4326"!==b)return k("SRS "+b+" is not supported."),void 0;u._tilingScheme=new i({ellipsoid:v});var c=a.getElementsByTagName("TileFormat")[0];u._heightmapWidth=parseInt(c.getAttribute("width"),10),u._heightmapHeight=parseInt(c.getAttribute("height"),10),u._levelZeroMaximumGeometricError=p.getEstimatedLevelZeroGeometricErrorForAHeightmap(v,Math.min(u._heightmapWidth,u._heightmapHeight),u._tilingScheme.getNumberOfXTilesAtLevel(0));for(var d=a.getElementsByTagName("DataExtent"),e=0;e<d.length;++e){var f=d[e],g=n.toRadians(parseFloat(f.getAttribute("minx"))),h=n.toRadians(parseFloat(f.getAttribute("miny"))),j=n.toRadians(parseFloat(f.getAttribute("maxx"))),l=n.toRadians(parseFloat(f.getAttribute("maxy"))),m=parseInt(f.getAttribute("maxlevel"),10);u._rectangles.push(new s(new o(g,h,j,l),m))}u._ready=!0}function k(a){var b=c(a,"An error occurred while accessing "+u._url+".");t=r.handleError(t,u,u._errorEvent,b,void 0,void 0,void 0,l)}function l(){a(m(u._url),j,k)}if(e=c(e,c.EMPTY_OBJECT),!d(e.url))throw new f("options.url is required.");this._url=e.url,this._url.length>0&&"/"!==this._url[this._url.length-1]&&(this._url+="/"),this._errorEvent=new h,this._ready=!1,this._proxy=e.proxy,this._terrainDataStructure={heightScale:.001,heightOffset:-1e3,elementsPerHeight:3,stride:4,elementMultiplier:256,isBigEndian:!0};var q=e.credit;"string"==typeof q&&(q=new b(q)),this._credit=q,this._tilingScheme=void 0,this._rectangles=[];var t,u=this,v=c(e.ellipsoid,g.WGS84);l()};e(v.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){if(!this.ready)throw new f("requestTileGeometry must not be called before ready returns true.");return this._tilingScheme}},ready:{get:function(){return this._ready}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}}}),v.prototype.requestTileGeometry=function(b,e,g,h){if(!this.ready)throw new f("requestTileGeometry must not be called before ready returns true.");var i=this._tilingScheme.getNumberOfYTilesAtLevel(g),m=this._url+g+"/"+b+"/"+(i-e-1)+".tif?cesium=true",n=this._proxy;d(n)&&(m=n.getURL(m));var o;if(h=c(h,!0)){if(o=q(m,l),!d(o))return void 0}else o=l(m);var p=this;return a(o,function(a){return new k({buffer:j(a),width:p._heightmapWidth,height:p._heightmapHeight,childTileMask:t(p,b,e,g),structure:p._terrainDataStructure})})},v.prototype.getLevelMaximumGeometricError=function(a){if(!this.ready)throw new f("requestTileGeometry must not be called before ready returns true.");return this._levelZeroMaximumGeometricError/(1<<a)};var w=new o;return v.prototype.getTileDataAvailable=function(){return void 0},v}),c("Core/WallGeometryLibrary",["./Cartographic","./defined","./DeveloperError","./EllipsoidTangentPlane","./Math","./PolygonPipeline","./PolylinePipeline","./WindingOrder"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){return e.equalsEpsilon(a.latitude,b.latitude,e.EPSILON14)&&e.equalsEpsilon(a.longitude,b.longitude,e.EPSILON14)}function j(c,d,e,f){var g=b(f),h=b(e),j=[],k=[],n=[],o=d.length;if(2>o)return{positions:d};var p=d[0];j.push(p);var q=c.cartesianToCartographic(p,l);h&&(q.height=e[0]),k.push(q.height),g?n.push(f[0]):n.push(0);for(var r=1;o>r;++r){var s=d[r],t=c.cartesianToCartographic(s,m);h&&(t.height=e[r]),i(q,t)?q.height<t.height&&(k[k.length-1]=t.height):(j.push(s),k.push(t.height),g?n.push(f[r]):n.push(0)),a.clone(t,q)}return{positions:j,topHeights:k,bottomHeights:n}}var k={},l=new a,m=new a;return k.computePositions=function(a,b,c,e,i,k){var l=j(a,b,c,e);if(b=l.positions,c=l.topHeights,e=l.bottomHeights,b.length>=3){var m=d.fromPoints(b,a),n=m.projectPointsOntoPlane(b);f.computeWindingOrder2D(n)===h.CLOCKWISE&&(b.reverse(),c.reverse(),e.reverse())}var o,p,q,r,s,t=b.length;if(k){var u=0;for(o=0;t-1>o;o++)r=b[o],s=b[o+1],u+=g.numberOfPoints(r,s,i),u++;p=new Float64Array(3*u),q=new Float64Array(3*u);var v=0;for(o=0;t-1>o;o++){r=b[o],s=b[o+1];var w=c[o],x=c[o+1],y=g.generateArc({positions:[r,s],height:[w,x],granularity:i,ellipsoid:a});p.set(y,v),w=e[o],x=e[o+1],q.set(g.generateArc({positions:[r,s],height:[w,x],granularity:i,ellipsoid:a}),v),v+=y.length}}else p=new Float64Array(g.generateArc({positions:b,height:c,granularity:i,ellipsoid:a})),q=new Float64Array(g.generateArc({positions:b,height:e,granularity:i,ellipsoid:a}));return{bottomPositions:q,topPositions:p}},k}),c("Core/WallGeometry",["./BoundingSphere","./Cartesian3","./ComponentDatatype","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./Geometry","./GeometryAttribute","./GeometryAttributes","./IndexDatatype","./Math","./PrimitiveType","./VertexFormat","./WallGeometryLibrary"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";var p=new b,q=new b,r=new b,s=new b,t=new b,u=new b,v=new b,w=new b,x=function(a){a=d(a,d.EMPTY_OBJECT);var b=a.positions,c=a.maximumHeights,e=a.minimumHeights,f=d(a.vertexFormat,n.DEFAULT),h=d(a.granularity,l.RADIANS_PER_DEGREE),i=d(a.ellipsoid,g.WGS84);this._positions=b,this._minimumHeights=e,this._maximumHeights=c,this._vertexFormat=f,this._granularity=h,this._ellipsoid=i,this._workerName="createWallGeometry"};return x.fromConstantHeights=function(a){a=d(a,d.EMPTY_OBJECT);var b,c,f=a.positions,g=a.minimumHeight,h=a.maximumHeight,i=e(g),j=e(h);if(i||j){var k=f.length;b=i?new Array(k):void 0,c=j?new Array(k):void 0;for(var l=0;k>l;++l)i&&(b[l]=g),j&&(c[l]=h)}var m={positions:f,maximumHeights:c,minimumHeights:b,ellipsoid:a.ellipsoid,vertexFormat:a.vertexFormat};return new x(m)},x.createGeometry=function(d){var e=d._positions,f=d._minimumHeights,g=d._maximumHeights,n=d._vertexFormat,x=d._granularity,y=d._ellipsoid,z=o.computePositions(y,e,g,f,x,!0),A=z.bottomPositions,B=z.topPositions,C=B.length,D=2*C,E=n.position?new Float64Array(D):void 0,F=n.normal?new Float32Array(D):void 0,G=n.tangent?new Float32Array(D):void 0,H=n.binormal?new Float32Array(D):void 0,I=n.st?new Float32Array(2*(D/3)):void 0,J=0,K=0,L=0,M=0,N=0,O=w,P=v,Q=u,R=!0;C/=3;var S;for(S=0;C>S;++S){var T=3*S,U=b.fromArray(B,T,p),V=b.fromArray(A,T,q);if(n.position&&(E[J++]=V.x,E[J++]=V.y,E[J++]=V.z,E[J++]=U.x,E[J++]=U.y,E[J++]=U.z),n.normal||n.tangent||n.binormal){var W,X=new b,Y=y.scaleToGeodeticSurface(b.fromArray(B,T,q),q);if(C>S+1&&(W=y.scaleToGeodeticSurface(b.fromArray(B,T+3,r),r),X=b.fromArray(B,T+3,t)),R){var Z=b.subtract(X,U,s),$=b.subtract(Y,U,p);O=b.normalize(b.cross($,Z,O),O),R=!1}b.equalsEpsilon(W,Y,l.EPSILON6)?R=!0:(n.tangent&&(P=b.normalize(b.subtract(W,Y,P),P)),n.binormal&&(Q=b.normalize(b.cross(O,P,Q),Q))),n.normal&&(F[K++]=O.x,F[K++]=O.y,F[K++]=O.z,F[K++]=O.x,F[K++]=O.y,F[K++]=O.z),n.tangent&&(G[M++]=P.x,G[M++]=P.y,G[M++]=P.z,G[M++]=P.x,G[M++]=P.y,G[M++]=P.z),n.binormal&&(H[L++]=Q.x,H[L++]=Q.y,H[L++]=Q.z,H[L++]=Q.x,H[L++]=Q.y,H[L++]=Q.z)}if(n.st){var _=S/(C-1);I[N++]=_,I[N++]=0,I[N++]=_,I[N++]=1}}var aa=new j;n.position&&(aa.position=new i({componentDatatype:c.DOUBLE,componentsPerAttribute:3,values:E})),n.normal&&(aa.normal=new i({componentDatatype:c.FLOAT,componentsPerAttribute:3,values:F})),n.tangent&&(aa.tangent=new i({componentDatatype:c.FLOAT,componentsPerAttribute:3,values:G})),n.binormal&&(aa.binormal=new i({componentDatatype:c.FLOAT,componentsPerAttribute:3,values:H})),n.st&&(aa.st=new i({componentDatatype:c.FLOAT,componentsPerAttribute:2,values:I}));var ba=D/3;D-=6;var ca=k.createTypedArray(ba,D),da=0;for(S=0;ba-2>S;S+=2){var ea=S,fa=S+2,ga=b.fromArray(E,3*ea,p),ha=b.fromArray(E,3*fa,q);if(!b.equalsEpsilon(ga,ha,l.EPSILON6)){var ia=S+1,ja=S+3;ca[da++]=ia,ca[da++]=ea,ca[da++]=ja,ca[da++]=ja,ca[da++]=ea,ca[da++]=fa}}return new h({attributes:aa,indices:ca,primitiveType:m.TRIANGLES,boundingSphere:new a.fromVertices(E)})},x}),c("Core/WallOutlineGeometry",["./BoundingSphere","./Cartesian3","./ComponentDatatype","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./Geometry","./GeometryAttribute","./GeometryAttributes","./IndexDatatype","./Math","./PrimitiveType","./WallGeometryLibrary"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";var o=new b,p=new b,q=function(a){a=d(a,d.EMPTY_OBJECT);var b=a.positions,c=a.maximumHeights,e=a.minimumHeights,f=d(a.granularity,l.RADIANS_PER_DEGREE),h=d(a.ellipsoid,g.WGS84);this._positions=b,this._minimumHeights=e,this._maximumHeights=c,this._granularity=f,this._ellipsoid=h,this._workerName="createWallOutlineGeometry"};return q.fromConstantHeights=function(a){a=d(a,d.EMPTY_OBJECT);var b,c,f=a.positions,g=a.minimumHeight,h=a.maximumHeight,i=e(g),j=e(h);if(i||j){var k=f.length;b=i?new Array(k):void 0,c=j?new Array(k):void 0;for(var l=0;k>l;++l)i&&(b[l]=g),j&&(c[l]=h)}var m={positions:f,maximumHeights:c,minimumHeights:b,ellipsoid:a.ellipsoid};return new q(m)},q.createGeometry=function(d){var e=d._positions,f=d._minimumHeights,g=d._maximumHeights,q=d._granularity,r=d._ellipsoid,s=n.computePositions(r,e,g,f,q,!1),t=s.bottomPositions,u=s.topPositions,v=u.length,w=2*v,x=new Float64Array(w),y=0;v/=3;var z;for(z=0;v>z;++z){var A=3*z,B=b.fromArray(u,A,o),C=b.fromArray(t,A,p);x[y++]=C.x,x[y++]=C.y,x[y++]=C.z,x[y++]=B.x,x[y++]=B.y,x[y++]=B.z}var D=new j({position:new i({componentDatatype:c.DOUBLE,componentsPerAttribute:3,values:x})}),E=w/3;w=2*E-4+E;var F=k.createTypedArray(E,w),G=0;for(z=0;E-2>z;z+=2){var H=z,I=z+2,J=b.fromArray(x,3*H,o),K=b.fromArray(x,3*I,p);if(!b.equalsEpsilon(J,K,l.EPSILON6)){var L=z+1,M=z+3;F[G++]=L,F[G++]=H,F[G++]=L,F[G++]=M,F[G++]=H,F[G++]=I}}return F[G++]=E-2,F[G++]=E-1,new h({attributes:D,indices:F,primitiveType:m.LINES,boundingSphere:new a.fromVertices(x)})},q}),c("Core/WebMercatorProjection",["./Cartesian3","./Cartographic","./defaultValue","./defined","./defineProperties","./DeveloperError","./Ellipsoid","./Math"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(a){this._ellipsoid=c(a,g.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis};return e(i.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),i.mercatorAngleToGeodeticLatitude=function(a){return h.PI_OVER_TWO-2*Math.atan(Math.exp(-a))},i.geodeticLatitudeToMercatorAngle=function(a){a>i.MaximumLatitude?a=i.MaximumLatitude:a<-i.MaximumLatitude&&(a=-i.MaximumLatitude);var b=Math.sin(a);return.5*Math.log((1+b)/(1-b))},i.MaximumLatitude=i.mercatorAngleToGeodeticLatitude(Math.PI),i.prototype.project=function(b,c){var e=this._semimajorAxis,f=b.longitude*e,g=i.geodeticLatitudeToMercatorAngle(b.latitude)*e,h=b.height;return d(c)?(c.x=f,c.y=g,c.z=h,c):new a(f,g,h)},i.prototype.unproject=function(a,c){var e=this._oneOverSemimajorAxis,f=a.x*e,g=i.mercatorAngleToGeodeticLatitude(a.y*e),h=a.z;return d(c)?(c.longitude=f,c.latitude=g,c.height=h,c):new b(f,g,h)},i}),c("Core/WebMercatorTilingScheme",["./Cartesian2","./defaultValue","./defined","./defineProperties","./Ellipsoid","./Rectangle","./WebMercatorProjection"],function(a,b,c,d,e,f,g){"use strict";var h=function(d){if(d=b(d,{}),this._ellipsoid=b(d.ellipsoid,e.WGS84),this._numberOfLevelZeroTilesX=b(d.numberOfLevelZeroTilesX,1),this._numberOfLevelZeroTilesY=b(d.numberOfLevelZeroTilesY,1),this._projection=new g(this._ellipsoid),c(d.rectangleSouthwestInMeters)&&c(d.rectangleNortheastInMeters))this._rectangleSouthwestInMeters=d.rectangleSouthwestInMeters,this._rectangleNortheastInMeters=d.rectangleNortheastInMeters;else{var h=this._ellipsoid.maximumRadius*Math.PI;this._rectangleSouthwestInMeters=new a(-h,-h),this._rectangleNortheastInMeters=new a(h,h)}var i=this._projection.unproject(this._rectangleSouthwestInMeters),j=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new f(i.longitude,i.latitude,j.longitude,j.latitude)};return d(h.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),h.prototype.getNumberOfXTilesAtLevel=function(a){return this._numberOfLevelZeroTilesX<<a},h.prototype.getNumberOfYTilesAtLevel=function(a){return this._numberOfLevelZeroTilesY<<a},h.prototype.rectangleToNativeRectangle=function(a,b){var d=this._projection,e=d.project(f.southwest(a)),g=d.project(f.northeast(a));return c(b)?(b.west=e.x,b.south=e.y,b.east=g.x,b.north=g.y,b):new f(e.x,e.y,g.x,g.y)},h.prototype.tileXYToNativeRectangle=function(a,b,d,e){var g=this.getNumberOfXTilesAtLevel(d),h=this.getNumberOfYTilesAtLevel(d),i=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/g,j=this._rectangleSouthwestInMeters.x+a*i,k=this._rectangleSouthwestInMeters.x+(a+1)*i,l=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/h,m=this._rectangleNortheastInMeters.y-b*l,n=this._rectangleNortheastInMeters.y-(b+1)*l;return c(e)?(e.west=j,e.south=n,e.east=k,e.north=m,e):new f(j,n,k,m)},h.prototype.tileXYToRectangle=function(b,c,d,e){var f=this.tileXYToNativeRectangle(b,c,d,e),g=this._projection,h=g.unproject(new a(f.west,f.south)),i=g.unproject(new a(f.east,f.north));return f.west=h.longitude,f.south=h.latitude,f.east=i.longitude,f.north=i.latitude,f},h.prototype.positionToTileXY=function(b,d,e){var f=this._rectangle;if(b.latitude>f.north||b.latitude<f.south||b.longitude<f.west||b.longitude>f.east)return void 0;var g=this.getNumberOfXTilesAtLevel(d),h=this.getNumberOfYTilesAtLevel(d),i=this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x,j=i/g,k=this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y,l=k/h,m=this._projection,n=m.project(b),o=n.x-this._rectangleSouthwestInMeters.x,p=this._rectangleNortheastInMeters.y-n.y,q=0|o/j;q>=g&&(q=g-1);var r=0|p/l;return r>=h&&(r=h-1),c(e)?(e.x=q,e.y=r,e):new a(q,r)},h}),c("Core/cancelAnimationFrame",["./defined"],function(a){"use strict";var b=window.cancelAnimationFrame;!function(){if(!a(b))for(var c=["webkit","moz","ms","o"],d=0,e=c.length;e>d&&!a(b);)b=window[c[d]+"CancelAnimationFrame"],a(b)||(b=window[c[d]+"CancelRequestAnimationFrame"]),++d;a(b)||(b=clearTimeout)}();var c=function(a){b(a)};return c}),c("Core/combine",["./defaultValue","./defined"],function(a,b){"use strict";var c=function(d,e,f){f=a(f,!1);var g,h,i,j={},k=b(d),l=b(e)
;if(k)for(g in d)d.hasOwnProperty(g)&&(h=d[g],l&&f&&"object"==typeof h&&e.hasOwnProperty(g)?(i=e[g],j[g]="object"==typeof i?c(h,i,f):h):j[g]=h);if(l)for(g in e)e.hasOwnProperty(g)&&!j.hasOwnProperty(g)&&(i=e[g],j[g]=i);return j};return c}),c("Core/createGuid",[],function(){"use strict";var a=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=0|16*Math.random(),c="x"===a?b:8|3&b;return c.toString(16)})};return a}),c("Core/getFilenameFromUri",["../ThirdParty/Uri","./defined","./DeveloperError"],function(a){"use strict";var b=function(b){var c=new a(b);c.normalize();var d=c.path,e=d.lastIndexOf("/");return-1!==e&&(d=d.substr(e+1)),d};return b}),c("Core/objectToQuery",["./defined","./DeveloperError","./isArray"],function(a,b,c){"use strict";var d=function(a){var b="";for(var d in a)if(a.hasOwnProperty(d)){var e=a[d],f=encodeURIComponent(d)+"=";if(c(e))for(var g=0,h=e.length;h>g;++g)b+=f+encodeURIComponent(e[g])+"&";else b+=f+encodeURIComponent(e)+"&"}return b=b.slice(0,-1)};return d}),c("Core/queryToObject",["./defined","./DeveloperError","./isArray"],function(a,b,c){"use strict";var d=function(b){var d={};if(""===b)return d;for(var e=b.replace(/\+/g,"%20").split("&"),f=0,g=e.length;g>f;++f){var h=e[f].split("="),i=decodeURIComponent(h[0]),j=h[1];j=a(j)?decodeURIComponent(j):"";var k=d[i];"string"==typeof k?d[i]=[k,j]:c(k)?k.push(j):d[i]=j}return d};return d}),c("Core/jsonp",["../ThirdParty/Uri","../ThirdParty/when","./combine","./defaultValue","./defined","./DeveloperError","./objectToQuery","./queryToObject"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(f,j){j=d(j,d.EMPTY_OBJECT);var k;do{k="jsonp"+Math.random().toString().substring(2,8)}while(e(window[k]));var l=b.defer();window[k]=function(a){l.resolve(a);try{delete window[k]}catch(a){window[k]=void 0}};var m=new a(f),n=h(d(m.query,""));e(j.parameters)&&(n=c(j.parameters,n));var o=d(j.callbackParameterName,"callback");n[o]=k,m.query=g(n),f=m.toString();var p=j.proxy;return e(p)&&(f=p.getURL(f)),i.loadAndExecuteScript(f,k,l),l.promise};return i.loadAndExecuteScript=function(a,b,c){var d=document.createElement("script");d.async=!0,d.src=a;var e=document.getElementsByTagName("head")[0];d.onload=function(){d.onload=void 0,e.removeChild(d)},d.onerror=function(a){c.reject(a)},e.appendChild(d)},i.defaultLoadAndExecuteScript=i.loadAndExecuteScript,i}),c("Core/loadBlob",["./loadWithXhr"],function(a){"use strict";var b=function(b,c){return a({url:b,responseType:"blob",headers:c})};return b}),c("Core/loadImageViaBlob",["../ThirdParty/when","./loadBlob","./loadImage"],function(a,b,c){"use strict";var d=/^data:/,e=function(e){return d.test(e)?c(e):b(e).then(function(b){var d=window.URL.createObjectURL(b);return c(d,!1).then(function(a){return a.blob=b,window.URL.revokeObjectURL(d),a},function(b){return window.URL.revokeObjectURL(d),a.reject(b)})})},f=function(){try{var a=new XMLHttpRequest;return a.open("GET","#",!0),a.responseType="blob","blob"===a.responseType}catch(a){return!1}}();return f?e:c}),c("Core/mergeSort",["./defined","./DeveloperError"],function(){"use strict";function a(a,b,e,f,g,h){var i,j,k=g-f+1,l=h-g,m=c,n=d;for(i=0;k>i;++i)m[i]=a[f+i];for(j=0;l>j;++j)n[j]=a[g+j+1];i=0,j=0;for(var o=f;h>=o;++o){var p=m[i],q=n[j];k>i&&(j>=l||b(p,q,e)<=0)?(a[o]=p,++i):l>j&&(a[o]=q,++j)}}function b(c,d,e,f,g){if(!(f>=g)){var h=Math.floor(.5*(f+g));b(c,d,e,f,h),b(c,d,e,h+1,g),a(c,d,e,f,h,g)}}var c=[],d=[],e=function(a,e,f){var g=a.length,h=Math.ceil(.5*g);c.length=h,d.length=h,b(a,e,f,0,g-1),c.length=0,d.length=0};return e}),c("Core/requestAnimationFrame",["./defined","./getTimestamp"],function(a,b){"use strict";var c=window.requestAnimationFrame;!function(){if(!a(c))for(var d=["webkit","moz","ms","o"],e=0,f=d.length;f>e&&!a(c);)c=window[d[e]+"RequestAnimationFrame"],++e;if(!a(c)){var g=1e3/60,h=0;c=function(a){var c=b(),d=Math.max(g-(c-h),0);return h=c+d,setTimeout(function(){a(h)},d)}}}();var d=function(a){return c(a)};return d}),c("Core/sampleTerrain",["../ThirdParty/when","./defined","./DeveloperError"],function(a){"use strict";function b(b,e,f){var g,h=b.tilingScheme,i=[],j={};for(g=0;g<f.length;++g){var k=h.positionToTileXY(f[g],e),l=k.toString();if(!j.hasOwnProperty(l)){var m={x:k.x,y:k.y,level:e,tilingScheme:h,terrainProvider:b,positions:[]};j[l]=m,i.push(m)}j[l].positions.push(f[g])}var n=[];for(g=0;g<i.length;++g){var o=i[g],p=o.terrainProvider.requestTileGeometry(o.x,o.y,o.level,!1),q=a(p,c(o),d(o));n.push(q)}return a.all(n,function(){return f})}function c(a){var b=a.positions,c=a.tilingScheme.tileXYToRectangle(a.x,a.y,a.level);return function(a){for(var d=0;d<b.length;++d){var e=b[d];e.height=a.interpolateHeight(c,e.longitude,e.latitude)}}}function d(a){var b=a.positions;return function(){for(var a=0;a<b.length;++a){var c=b[a];c.height=void 0}}}var e=function(c,d,e){function f(){c.ready?a(b(c,d,e),function(a){g.resolve(a)}):setTimeout(f,10)}var g=a.defer();return f(),g.promise};return e}),c("Core/subdivideArray",["./defined","./DeveloperError"],function(){"use strict";var a=function(a,b){for(var c=[],d=a.length,e=0;d>e;){var f=Math.ceil((d-e)/b--);c.push(a.slice(e,e+f)),e+=f}return c};return a}),c("Core/wrapFunction",["./DeveloperError"],function(){"use strict";var a=function(a,b,c){return function(){c.apply(a,arguments),b.apply(a,arguments)}};return a}),c("DataSources/createPropertyDescriptor",["../Core/defaultValue","../Core/defined"],function(a,b){"use strict";function c(a,c,d,e){return{configurable:e,get:function(){return this[c]},set:function(e){var f=this[c],g=this[d];b(g)&&(g(),this[d]=void 0),f!==e&&(this[c]=e,this._definitionChanged.raiseEvent(this,a,e,f)),b(e)&&b(e.definitionChanged)&&(this[d]=e.definitionChanged.addEventListener(function(){this._definitionChanged.raiseEvent(this,a,e,e)},this))}}}function d(b,d){return c(b,"_"+b,"_"+b+"Subscription",a(d,!1))}return d}),c("DataSources/BillboardGraphics",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./createPropertyDescriptor"],function(a,b,c,d,e,f){"use strict";var g=function(){this._image=void 0,this._imageSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._alignedAxis=void 0,this._alignedAxisSubscription=void 0,this._horizontalOrigin=void 0,this._horizontalOriginSubscription=void 0,this._verticalOrigin=void 0,this._verticalOriginSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._eyeOffset=void 0,this._eyeOffsetSubscription=void 0,this._pixelOffset=void 0,this._pixelOffsetSubscription=void 0,this._show=void 0,this._showSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._pixelOffsetScaleByDistance=void 0,this._pixelOffsetScaleByDistanceSubscription=void 0,this._definitionChanged=new e};return c(g.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},image:f("image"),scale:f("scale"),rotation:f("rotation"),alignedAxis:f("alignedAxis"),horizontalOrigin:f("horizontalOrigin"),verticalOrigin:f("verticalOrigin"),color:f("color"),eyeOffset:f("eyeOffset"),pixelOffset:f("pixelOffset"),show:f("show"),width:f("width"),height:f("height"),scaleByDistance:f("scaleByDistance"),translucencyByDistance:f("translucencyByDistance"),pixelOffsetScaleByDistance:f("pixelOffsetScaleByDistance")}),g.prototype.clone=function(a){return b(a)||(a=new g),a.color=this._color,a.eyeOffset=this._eyeOffset,a.horizontalOrigin=this._horizontalOrigin,a.image=this._image,a.pixelOffset=this._pixelOffset,a.scale=this._scale,a.rotation=this._rotation,a.alignedAxis=this._alignedAxis,a.show=this._show,a.verticalOrigin=this._verticalOrigin,a.width=this._width,a.height=this._height,a.scaleByDistance=this._scaleByDistance,a.translucencyByDistance=this._translucencyByDistance,a.pixelOffsetScaleByDistance=this._pixelOffsetScaleByDistance,a},g.prototype.merge=function(b){this.color=a(this._color,b._color),this.eyeOffset=a(this._eyeOffset,b._eyeOffset),this.horizontalOrigin=a(this._horizontalOrigin,b._horizontalOrigin),this.image=a(this._image,b._image),this.pixelOffset=a(this._pixelOffset,b._pixelOffset),this.scale=a(this._scale,b._scale),this.rotation=a(this._rotation,b._rotation),this.alignedAxis=a(this._alignedAxis,b._alignedAxis),this.show=a(this._show,b._show),this.verticalOrigin=a(this._verticalOrigin,b._verticalOrigin),this.width=a(this._width,b._width),this.height=a(this._height,b._height),this.scaleByDistance=a(this._scaleByDistance,b._scaleByDistance),this.translucencyByDistance=a(this._translucencyByDistance,b._translucencyByDistance),this.pixelOffsetScaleByDistance=a(this._pixelOffsetScaleByDistance,b._pixelOffsetScaleByDistance)},g}),c("Renderer/BufferUsage",["../Core/freezeObject"],function(a){"use strict";var b={STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,validate:function(a){return a===b.STREAM_DRAW||a===b.STATIC_DRAW||a===b.DYNAMIC_DRAW}};return a(b)}),c("Renderer/DrawCommand",["../Core/defaultValue","../Core/PrimitiveType"],function(a,b){"use strict";var c=function(c){c=a(c,a.EMPTY_OBJECT),this.boundingVolume=c.boundingVolume,this.cull=a(c.cull,!0),this.modelMatrix=c.modelMatrix,this.primitiveType=a(c.primitiveType,b.TRIANGLES),this.vertexArray=c.vertexArray,this.count=c.count,this.offset=a(c.offset,0),this.shaderProgram=c.shaderProgram,this.uniformMap=c.uniformMap,this.renderState=c.renderState,this.framebuffer=c.framebuffer,this.pass=c.pass,this.executeInClosestFrustum=a(c.executeInClosestFrustum,!1),this.owner=c.owner,this.debugShowBoundingVolume=a(c.debugShowBoundingVolume,!1),this.debugOverlappingFrustums=0,this.oit=void 0};return c.prototype.execute=function(a,b,c,d){a.draw(this,b,c,d)},c}),c("Shaders/Builtin/Constants/degreesPerRadian",[],function(){"use strict";return"const float czm_degreesPerRadian = 57.29577951308232;\n"}),c("Shaders/Builtin/Constants/depthRange",[],function(){"use strict";return"const czm_depthRangeStruct czm_depthRange = czm_depthRangeStruct(0.0, 1.0);\n"}),c("Shaders/Builtin/Constants/epsilon1",[],function(){"use strict";return"const float czm_epsilon1 = 0.1;\n"}),c("Shaders/Builtin/Constants/epsilon2",[],function(){"use strict";return"const float czm_epsilon2 = 0.01;\n"}),c("Shaders/Builtin/Constants/epsilon3",[],function(){"use strict";return"const float czm_epsilon3 = 0.001;\n"}),c("Shaders/Builtin/Constants/epsilon4",[],function(){"use strict";return"const float czm_epsilon4 = 0.0001;\n"}),c("Shaders/Builtin/Constants/epsilon5",[],function(){"use strict";return"const float czm_epsilon5 = 0.00001;\n"}),c("Shaders/Builtin/Constants/epsilon6",[],function(){"use strict";return"const float czm_epsilon6 = 0.000001;\n"}),c("Shaders/Builtin/Constants/epsilon7",[],function(){"use strict";return"const float czm_epsilon7 = 0.0000001;\n"}),c("Shaders/Builtin/Constants/infinity",[],function(){"use strict";return"const float czm_infinity = 5906376272000.0;\n"}),c("Shaders/Builtin/Constants/oneOverPi",[],function(){"use strict";return"const float czm_oneOverPi = 0.3183098861837907;\n"}),c("Shaders/Builtin/Constants/oneOverTwoPi",[],function(){"use strict";return"const float czm_oneOverTwoPi = 0.15915494309189535;\n"}),c("Shaders/Builtin/Constants/pi",[],function(){"use strict";return"const float czm_pi = 3.141592653589793;\n"}),c("Shaders/Builtin/Constants/piOverFour",[],function(){"use strict";return"const float czm_piOverFour = 0.7853981633974483;\n"}),c("Shaders/Builtin/Constants/piOverSix",[],function(){"use strict";return"const float czm_piOverSix = 0.5235987755982988;\n"}),c("Shaders/Builtin/Constants/piOverThree",[],function(){"use strict";return"const float czm_piOverThree = 1.0471975511965976;\n"}),c("Shaders/Builtin/Constants/piOverTwo",[],function(){"use strict";return"const float czm_piOverTwo = 1.5707963267948966;\n"}),c("Shaders/Builtin/Constants/radiansPerDegree",[],function(){"use strict";return"const float czm_radiansPerDegree = 0.017453292519943295;\n"}),c("Shaders/Builtin/Constants/sceneMode2D",[],function(){"use strict";return"const float czm_sceneMode2D = 2.0;\n"}),c("Shaders/Builtin/Constants/sceneMode3D",[],function(){"use strict";return"const float czm_sceneMode3D = 3.0;\n"}),c("Shaders/Builtin/Constants/sceneModeColumbusView",[],function(){"use strict";return"const float czm_sceneModeColumbusView = 1.0;\n"}),c("Shaders/Builtin/Constants/sceneModeMorphing",[],function(){"use strict";return"const float czm_sceneModeMorphing = 0.0;\n"}),c("Shaders/Builtin/Constants/solarRadius",[],function(){"use strict";return"const float czm_solarRadius = 695500000.0;\n"}),c("Shaders/Builtin/Constants/threePiOver2",[],function(){"use strict";return"const float czm_threePiOver2 = 4.71238898038469;\n"}),c("Shaders/Builtin/Constants/twoPi",[],function(){"use strict";return"const float czm_twoPi = 6.283185307179586;\n"}),c("Shaders/Builtin/Constants/webMercatorMaxLatitude",[],function(){"use strict";return"const float czm_webMercatorMaxLatitude = 1.4844222297453324;\n"}),c("Shaders/Builtin/Structs/depthRangeStruct",[],function(){"use strict";return"struct czm_depthRangeStruct\n{\nfloat near;\nfloat far;\n};\n"}),c("Shaders/Builtin/Structs/ellipsoid",[],function(){"use strict";return"struct czm_ellipsoid\n{\nvec3 center;\nvec3 radii;\nvec3 inverseRadii;\nvec3 inverseRadiiSquared;\n};\n"}),c("Shaders/Builtin/Structs/material",[],function(){"use strict";return"struct czm_material\n{\nvec3 diffuse;\nfloat specular;\nfloat shininess;\nvec3 normal;\nvec3 emission;\nfloat alpha;\n};\n"}),c("Shaders/Builtin/Structs/materialInput",[],function(){"use strict";return"struct czm_materialInput\n{\nfloat s;\nvec2 st;\nvec3 str;\nvec3 normalEC;\nmat3 tangentToEyeMatrix;\nvec3 positionToEyeEC;\n};\n"}),c("Shaders/Builtin/Structs/ray",[],function(){"use strict";return"struct czm_ray\n{\nvec3 origin;\nvec3 direction;\n};\n"}),c("Shaders/Builtin/Structs/raySegment",[],function(){"use strict";return"struct czm_raySegment\n{\nfloat start;\nfloat stop;\n};\nconst czm_raySegment czm_emptyRaySegment = czm_raySegment(-czm_infinity, -czm_infinity);\nconst czm_raySegment czm_fullRaySegment = czm_raySegment(0.0, czm_infinity);\n"}),c("Shaders/Builtin/Functions/RGBToXYZ",[],function(){"use strict";return"vec3 czm_RGBToXYZ(vec3 rgb)\n{\nconst mat3 RGB2XYZ = mat3(0.4124, 0.2126, 0.0193,\n0.3576, 0.7152, 0.1192,\n0.1805, 0.0722, 0.9505);\nvec3 xyz = RGB2XYZ * rgb;\nvec3 Yxy;\nYxy.r = xyz.g;\nfloat temp = dot(vec3(1.0), xyz);\nYxy.gb = xyz.rg / temp;\nreturn Yxy;\n}\n"}),c("Shaders/Builtin/Functions/XYZToRGB",[],function(){"use strict";return"vec3 czm_XYZToRGB(vec3 Yxy)\n{\nconst mat3 XYZ2RGB = mat3( 3.2405, -0.9693,  0.0556,\n-1.5371,  1.8760, -0.2040,\n-0.4985,  0.0416,  1.0572);\nvec3 xyz;\nxyz.r = Yxy.r * Yxy.g / Yxy.b;\nxyz.g = Yxy.r;\nxyz.b = Yxy.r * (1.0 - Yxy.g - Yxy.b) / Yxy.b;\nreturn XYZ2RGB * xyz;\n}\n"}),c("Shaders/Builtin/Functions/alphaWeight",[],function(){"use strict";return"float czm_alphaWeight(float a)\n{\nfloat z;\nif (czm_sceneMode != czm_sceneMode2D)\n{\nfloat x = 2.0 * (gl_FragCoord.x - czm_viewport.x) / czm_viewport.z - 1.0;\nfloat y = 2.0 * (gl_FragCoord.y - czm_viewport.y) / czm_viewport.w - 1.0;\nfloat z = (gl_FragCoord.z - czm_viewportTransformation[3][2]) / czm_viewportTransformation[2][2];\nvec4 q = vec4(x, y, z, 1.0);\nq /= gl_FragCoord.w;\nz = (czm_inverseProjectionOIT * q).z;\n}\nelse\n{\nz = gl_FragCoord.z * (czm_currentFrustum.y - czm_currentFrustum.x) + czm_currentFrustum.x;\n}\nreturn pow(a + 0.01, 4.0) + max(1e-2, min(3.0 * 1e3, 100.0 / (1e-5 + pow(abs(z) / 10.0, 3.0) + pow(abs(z) / 200.0, 6.0))));\n}\n"}),c("Shaders/Builtin/Functions/antialias",[],function(){"use strict";return"vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist, float fuzzFactor)\n{\nfloat val1 = clamp(dist / fuzzFactor, 0.0, 1.0);\nfloat val2 = clamp((dist - 0.5) / fuzzFactor, 0.0, 1.0);\nval1 = val1 * (1.0 - val2);\nval1 = val1 * val1 * (3.0 - (2.0 * val1));\nval1 = pow(val1, 0.5);\nvec4 midColor = (color1 + color2) * 0.5;\nreturn mix(midColor, currentColor, val1);\n}\nvec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist)\n{\nreturn czm_antialias(color1, color2, currentColor, dist, 0.1);\n}\n"}),c("Shaders/Builtin/Functions/columbusViewMorph",[],function(){"use strict";return"vec4 czm_columbusViewMorph(vec4 position2D, vec4 position3D, float time)\n{\nvec3 p = mix(position2D.xyz, position3D.xyz, time);\nreturn vec4(p, 1.0);\n}\n"}),c("Shaders/Builtin/Functions/computePosition",[],function(){"use strict";return"vec4 czm_computePosition();\n"}),c("Shaders/Builtin/Functions/cosineAndSine",[],function(){"use strict";return"#ifndef DISABLE_CORDIC\nvec2 cordic(float angle)\n{\nvec2 vector = vec2(6.0725293500888267e-1, 0.0);\nfloat sense = (angle < 0.0) ? -1.0 : 1.0;\nmat2 rotation = mat2(1.0, sense, -sense, 1.0);\nvector = rotation * vector;\nangle -= sense * 7.8539816339744828e-1;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfloat factor = sense * 5.0e-1;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 4.6364760900080609e-1;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 2.5e-1;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 2.4497866312686414e-1;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 1.25e-1;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 1.2435499454676144e-1;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 6.25e-2;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 6.2418809995957350e-2;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 3.125e-2;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 3.1239833430268277e-2;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 1.5625e-2;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 1.5623728620476831e-2;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 7.8125e-3;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 7.8123410601011111e-3;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 3.90625e-3;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 3.9062301319669718e-3;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 1.953125e-3;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 1.9531225164788188e-3;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 9.765625e-4;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 9.7656218955931946e-4;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 4.8828125e-4;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 4.8828121119489829e-4;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 2.44140625e-4;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 2.4414062014936177e-4;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 1.220703125e-4;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 1.2207031189367021e-4;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 6.103515625e-5;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 6.1035156174208773e-5;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 3.0517578125e-5;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 3.0517578115526096e-5;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 1.52587890625e-5;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 1.5258789061315762e-5;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 7.62939453125e-6;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 7.6293945311019700e-6;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 3.814697265625e-6;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 3.8146972656064961e-6;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 1.9073486328125e-6;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 1.9073486328101870e-6;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 9.5367431640625e-7;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 9.5367431640596084e-7;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 4.76837158203125e-7;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 4.7683715820308884e-7;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 2.384185791015625e-7;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nangle -= sense * 2.3841857910155797e-7;\nsense = (angle < 0.0) ? -1.0 : 1.0;\nfactor = sense * 1.1920928955078125e-7;\nrotation[0][1] = factor;\nrotation[1][0] = -factor;\nvector = rotation * vector;\nreturn vector;\n}\nvec2 czm_cosineAndSine(float angle)\n{\nif (angle < -czm_piOverTwo || angle > czm_piOverTwo)\n{\nif (angle < 0.0)\n{\nreturn -cordic(angle + czm_pi);\n}\nelse\n{\nreturn -cordic(angle - czm_pi);\n}\n}\nelse\n{\nreturn cordic(angle);\n}\n}\n#endif\n"}),c("Shaders/Builtin/Functions/decompressTextureCoordinates",[],function(){"use strict";return"vec2 czm_decompressTextureCoordinates(float encoded)\n{\nfloat temp = encoded / 4096.0;\nfloat stx = floor(temp) / 4096.0;\nfloat sty = temp - floor(temp);\nreturn vec2(stx, sty);\n}\n"}),c("Shaders/Builtin/Functions/eastNorthUpToEyeCoordinates",[],function(){"use strict";return"mat3 czm_eastNorthUpToEyeCoordinates(vec3 positionMC, vec3 normalEC)\n{\nvec3 tangentMC = normalize(vec3(-positionMC.y, positionMC.x, 0.0));\nvec3 tangentEC = normalize(czm_normal3D * tangentMC);\nvec3 bitangentEC = normalize(cross(normalEC, tangentEC));\nreturn mat3(\ntangentEC.x,   tangentEC.y,   tangentEC.z,\nbitangentEC.x, bitangentEC.y, bitangentEC.z,\nnormalEC.x,    normalEC.y,    normalEC.z);\n}\n"}),c("Shaders/Builtin/Functions/ellipsoidContainsPoint",[],function(){"use strict";return"bool czm_ellipsoidContainsPoint(czm_ellipsoid ellipsoid, vec3 point)\n{\nvec3 scaled = ellipsoid.inverseRadii * (czm_inverseModelView * vec4(point, 1.0)).xyz;\nreturn (dot(scaled, scaled) <= 1.0);\n}\n"}),c("Shaders/Builtin/Functions/ellipsoidNew",[],function(){"use strict";return"czm_ellipsoid czm_ellipsoidNew(vec3 center, vec3 radii)\n{\nvec3 inverseRadii = vec3(1.0 / radii.x, 1.0 / radii.y, 1.0 / radii.z);\nvec3 inverseRadiiSquared = inverseRadii * inverseRadii;\nczm_ellipsoid temp = czm_ellipsoid(center, radii, inverseRadii, inverseRadiiSquared);\nreturn temp;\n}\n"}),c("Shaders/Builtin/Functions/ellipsoidWgs84TextureCoordinates",[],function(){"use strict";return"vec2 czm_ellipsoidWgs84TextureCoordinates(vec3 normal)\n{\nreturn vec2(atan(normal.y, normal.x) * czm_oneOverTwoPi + 0.5, asin(normal.z) * czm_oneOverPi + 0.5);\n}\n"}),c("Shaders/Builtin/Functions/equalsEpsilon",[],function(){"use strict";return"bool czm_equalsEpsilon(vec4 left, vec4 right, float epsilon) {\nreturn all(lessThanEqual(abs(left - right), vec4(epsilon)));\n}\nbool czm_equalsEpsilon(vec3 left, vec3 right, float epsilon) {\nreturn all(lessThanEqual(abs(left - right), vec3(epsilon)));\n}\nbool czm_equalsEpsilon(vec2 left, vec2 right, float epsilon) {\nreturn all(lessThanEqual(abs(left - right), vec2(epsilon)));\n}\nbool czm_equalsEpsilon(float left, float right, float epsilon) {\nreturn (abs(left - right) <= epsilon);\n}\n"}),c("Shaders/Builtin/Functions/eyeOffset",[],function(){"use strict";return"vec4 czm_eyeOffset(vec4 positionEC, vec3 eyeOffset)\n{\nvec4 p = positionEC;\nvec4 zEyeOffset = normalize(p) * eyeOffset.z;\np.xy += eyeOffset.xy + zEyeOffset.xy;\np.z += zEyeOffset.z;\nreturn p;\n}\n"}),c("Shaders/Builtin/Functions/eyeToWindowCoordinates",[],function(){"use strict";return"vec4 czm_eyeToWindowCoordinates(vec4 positionEC)\n{\nvec4 q = czm_projection * positionEC;\nq.xyz /= q.w;\nq.xyz = (czm_viewportTransformation * vec4(q.xyz, 1.0)).xyz;\nreturn q;\n}\n"}),c("Shaders/Builtin/Functions/geodeticSurfaceNormal",[],function(){"use strict";return"vec3 czm_geodeticSurfaceNormal(vec3 positionOnEllipsoid, vec3 ellipsoidCenter, vec3 oneOverEllipsoidRadiiSquared)\n{\nreturn normalize((positionOnEllipsoid - ellipsoidCenter) * oneOverEllipsoidRadiiSquared);\n}\n"}),c("Shaders/Builtin/Functions/getDefaultMaterial",[],function(){"use strict";return"czm_material czm_getDefaultMaterial(czm_materialInput materialInput)\n{\nczm_material material;\nmaterial.diffuse = vec3(0.0);\nmaterial.specular = 0.0;\nmaterial.shininess = 1.0;\nmaterial.normal = materialInput.normalEC;\nmaterial.emission = vec3(0.0);\nmaterial.alpha = 1.0;\nreturn material;\n}\n"}),c("Shaders/Builtin/Functions/getLambertDiffuse",[],function(){"use strict";return"float czm_getLambertDiffuse(vec3 lightDirectionEC, vec3 normalEC)\n{\nreturn max(dot(lightDirectionEC, normalEC), 0.0);\n}\n"}),c("Shaders/Builtin/Functions/getSpecular",[],function(){"use strict";return"float czm_getSpecular(vec3 lightDirectionEC, vec3 toEyeEC, vec3 normalEC, float shininess)\n{\nvec3 toReflectedLight = reflect(-lightDirectionEC, normalEC);\nfloat specular = max(dot(toReflectedLight, toEyeEC), 0.0);\nreturn pow(specular, shininess);\n}\n"}),c("Shaders/Builtin/Functions/getWaterNoise",[],function(){"use strict";return"vec4 czm_getWaterNoise(sampler2D normalMap, vec2 uv, float time, float angleInRadians)\n{\nfloat cosAngle = cos(angleInRadians);\nfloat sinAngle = sin(angleInRadians);\nvec2 s0 = vec2(1.0/17.0, 0.0);\nvec2 s1 = vec2(-1.0/29.0, 0.0);\nvec2 s2 = vec2(1.0/101.0, 1.0/59.0);\nvec2 s3 = vec2(-1.0/109.0, -1.0/57.0);\ns0 = vec2((cosAngle * s0.x) - (sinAngle * s0.y), (sinAngle * s0.x) + (cosAngle * s0.y));\ns1 = vec2((cosAngle * s1.x) - (sinAngle * s1.y), (sinAngle * s1.x) + (cosAngle * s1.y));\ns2 = vec2((cosAngle * s2.x) - (sinAngle * s2.y), (sinAngle * s2.x) + (cosAngle * s2.y));\ns3 = vec2((cosAngle * s3.x) - (sinAngle * s3.y), (sinAngle * s3.x) + (cosAngle * s3.y));\nvec2 uv0 = (uv/103.0) + (time * s0);\nvec2 uv1 = uv/107.0 + (time * s1) + vec2(0.23);\nvec2 uv2 = uv/vec2(897.0, 983.0) + (time * s2) + vec2(0.51);\nvec2 uv3 = uv/vec2(991.0, 877.0) + (time * s3) + vec2(0.71);\nuv0 = fract(uv0);\nuv1 = fract(uv1);\nuv2 = fract(uv2);\nuv3 = fract(uv3);\nvec4 noise = (texture2D(normalMap, uv0)) +\n(texture2D(normalMap, uv1)) +\n(texture2D(normalMap, uv2)) +\n(texture2D(normalMap, uv3));\nreturn ((noise / 4.0) - 0.5) * 2.0;\n}\n"}),c("Shaders/Builtin/Functions/getWgs84EllipsoidEC",[],function(){"use strict";return"czm_ellipsoid czm_getWgs84EllipsoidEC()\n{\nvec3 radii = vec3(6378137.0, 6378137.0, 6356752.314245);\nvec3 inverseRadii = vec3(1.0 / radii.x, 1.0 / radii.y, 1.0 / radii.z);\nvec3 inverseRadiiSquared = inverseRadii * inverseRadii;\nczm_ellipsoid temp = czm_ellipsoid(czm_view[3].xyz, radii, inverseRadii, inverseRadiiSquared);\nreturn temp;\n}\n"}),c("Shaders/Builtin/Functions/hue",[],function(){"use strict";return"vec3 czm_hue(vec3 rgb, float adjustment)\n{\nconst mat3 toYIQ = mat3(0.299,     0.587,     0.114,\n0.595716, -0.274453, -0.321263,\n0.211456, -0.522591,  0.311135);\nconst mat3 toRGB = mat3(1.0,  0.9563,  0.6210,\n1.0, -0.2721, -0.6474,\n1.0, -1.107,   1.7046);\nvec3 yiq = toYIQ * rgb;\nfloat hue = atan(yiq.z, yiq.y) + adjustment;\nfloat chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);\nvec3 color = vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));\nreturn toRGB * color;\n}\n"}),c("Shaders/Builtin/Functions/isEmpty",[],function(){"use strict";return"bool czm_isEmpty(czm_raySegment interval)\n{\nreturn (interval.stop < 0.0);\n}\n"}),c("Shaders/Builtin/Functions/isFull",[],function(){"use strict";return"bool czm_isFull(czm_raySegment interval)\n{\nreturn (interval.start == 0.0 && interval.stop == czm_infinity);\n}\n"}),c("Shaders/Builtin/Functions/latitudeToWebMercatorFraction",[],function(){"use strict";return"float czm_latitudeToWebMercatorFraction(float latitude, float southMercatorYLow, float southMercatorYHigh, float oneOverMercatorHeight)\n{\nfloat sinLatitude = sin(latitude);\nfloat mercatorY = 0.5 * log((1.0 + sinLatitude) / (1.0 - sinLatitude));\nfloat t1 = 0.0 - southMercatorYLow;\nfloat e = t1 - 0.0;\nfloat t2 = ((-southMercatorYLow - e) + (0.0 - (t1 - e))) + mercatorY - southMercatorYHigh;\nfloat highDifference = t1 + t2;\nfloat lowDifference = t2 - (highDifference - t1);\nreturn highDifference * oneOverMercatorHeight + lowDifference * oneOverMercatorHeight;\n}\n"}),c("Shaders/Builtin/Functions/luminance",[],function(){"use strict";return"float czm_luminance(vec3 rgb)\n{\nconst vec3 W = vec3(0.2125, 0.7154, 0.0721);\nreturn dot(rgb, W);\n}\n"}),c("Shaders/Builtin/Functions/modelToWindowCoordinates",[],function(){"use strict";return"vec4 czm_modelToWindowCoordinates(vec4 position)\n{\nvec4 q = czm_modelViewProjection * position;\nq.xyz /= q.w;\nq.xyz = (czm_viewportTransformation * vec4(q.xyz, 1.0)).xyz;\nreturn q;\n}\n"}),c("Shaders/Builtin/Functions/multiplyWithColorBalance",[],function(){"use strict";return"vec3 czm_multiplyWithColorBalance(vec3 left, vec3 right)\n{\nconst vec3 W = vec3(0.2125, 0.7154, 0.0721);\nvec3 target = left * right;\nfloat leftLuminance = dot(left, W);\nfloat rightLuminance = dot(right, W);\nfloat targetLuminance = dot(target, W);\nreturn ((leftLuminance + rightLuminance) / (2.0 * targetLuminance)) * target;\n}\n"}),c("Shaders/Builtin/Functions/octDecode",[],function(){"use strict";return"vec3 czm_octDecode(vec2 encoded)\n{\nencoded = encoded / 255.0 * 2.0 - 1.0;\nvec3 v = vec3(encoded.x, encoded.y, 1.0 - abs(encoded.x) - abs(encoded.y));\nif (v.z < 0.0)\n{\nv.xy = (1.0 - abs(v.yx)) * czm_signNotZero(v.xy);\n}\nreturn normalize(v);\n}\nvec3 czm_octDecode(float encoded)\n{\nfloat temp = encoded / 256.0;\nfloat x = floor(temp);\nfloat y = (temp - x) * 256.0;\nreturn czm_octDecode(vec2(x, y));\n}\nvoid czm_octDecode(vec2 encoded, out vec3 vector1, out vec3 vector2, out vec3 vector3)\n{\nfloat temp = encoded.x / 65536.0;\nfloat x = floor(temp);\nfloat encodedFloat1 = (temp - x) * 65536.0;\ntemp = encoded.y / 65536.0;\nfloat y = floor(temp);\nfloat encodedFloat2 = (temp - y) * 65536.0;\nvector1 = czm_octDecode(encodedFloat1);\nvector2 = czm_octDecode(encodedFloat2);\nvector3 = czm_octDecode(vec2(x, y));\n}\n"}),c("Shaders/Builtin/Functions/phong",[],function(){"use strict"
;return"float czm_private_getLambertDiffuseOfMaterial(vec3 lightDirectionEC, czm_material material)\n{\nreturn czm_getLambertDiffuse(lightDirectionEC, material.normal);\n}\nfloat czm_private_getSpecularOfMaterial(vec3 lightDirectionEC, vec3 toEyeEC, czm_material material)\n{\nreturn czm_getSpecular(lightDirectionEC, toEyeEC, material.normal, material.shininess);\n}\nvec4 czm_phong(vec3 toEye, czm_material material)\n{\nfloat diffuse = czm_private_getLambertDiffuseOfMaterial(vec3(0.0, 0.0, 1.0), material) + czm_private_getLambertDiffuseOfMaterial(vec3(0.0, 1.0, 0.0), material);\nfloat specular = czm_private_getSpecularOfMaterial(czm_sunDirectionEC, toEye, material) + czm_private_getSpecularOfMaterial(czm_moonDirectionEC, toEye, material);\nvec3 materialDiffuse = material.diffuse * 0.5;\nvec3 ambient = materialDiffuse;\nvec3 color = ambient + material.emission;\ncolor += materialDiffuse * diffuse;\ncolor += material.specular * specular;\nreturn vec4(color, material.alpha);\n}\nvec4 czm_private_phong(vec3 toEye, czm_material material)\n{\nfloat diffuse = czm_private_getLambertDiffuseOfMaterial(czm_sunDirectionEC, material);\nfloat specular = czm_private_getSpecularOfMaterial(czm_sunDirectionEC, toEye, material);\nvec3 ambient = vec3(0.0);\nvec3 color = ambient + material.emission;\ncolor += material.diffuse * diffuse;\ncolor += material.specular * specular;\nreturn vec4(color, material.alpha);\n}\n"}),c("Shaders/Builtin/Functions/pointAlongRay",[],function(){"use strict";return"vec3 czm_pointAlongRay(czm_ray ray, float time)\n{\nreturn ray.origin + (time * ray.direction);\n}\n"}),c("Shaders/Builtin/Functions/rayEllipsoidIntersectionInterval",[],function(){"use strict";return"czm_raySegment czm_rayEllipsoidIntersectionInterval(czm_ray ray, czm_ellipsoid ellipsoid)\n{\nvec3 q = ellipsoid.inverseRadii * (czm_inverseModelView * vec4(ray.origin, 1.0)).xyz;\nvec3 w = ellipsoid.inverseRadii * (czm_inverseModelView * vec4(ray.direction, 0.0)).xyz;\nq = q - ellipsoid.inverseRadii * (czm_inverseModelView * vec4(ellipsoid.center, 1.0)).xyz;\nfloat q2 = dot(q, q);\nfloat qw = dot(q, w);\nif (q2 > 1.0)\n{\nif (qw >= 0.0)\n{\nreturn czm_emptyRaySegment;\n}\nelse\n{\nfloat qw2 = qw * qw;\nfloat difference = q2 - 1.0;\nfloat w2 = dot(w, w);\nfloat product = w2 * difference;\nif (qw2 < product)\n{\nreturn czm_emptyRaySegment;\n}\nelse if (qw2 > product)\n{\nfloat discriminant = qw * qw - product;\nfloat temp = -qw + sqrt(discriminant);\nfloat root0 = temp / w2;\nfloat root1 = difference / temp;\nif (root0 < root1)\n{\nczm_raySegment i = czm_raySegment(root0, root1);\nreturn i;\n}\nelse\n{\nczm_raySegment i = czm_raySegment(root1, root0);\nreturn i;\n}\n}\nelse\n{\nfloat root = sqrt(difference / w2);\nczm_raySegment i = czm_raySegment(root, root);\nreturn i;\n}\n}\n}\nelse if (q2 < 1.0)\n{\nfloat difference = q2 - 1.0;\nfloat w2 = dot(w, w);\nfloat product = w2 * difference;\nfloat discriminant = qw * qw - product;\nfloat temp = -qw + sqrt(discriminant);\nczm_raySegment i = czm_raySegment(0.0, temp / w2);\nreturn i;\n}\nelse\n{\nif (qw < 0.0)\n{\nfloat w2 = dot(w, w);\nczm_raySegment i = czm_raySegment(0.0, -qw / w2);\nreturn i;\n}\nelse\n{\nreturn czm_emptyRaySegment;\n}\n}\n}\n"}),c("Shaders/Builtin/Functions/saturation",[],function(){"use strict";return"vec3 czm_saturation(vec3 rgb, float adjustment)\n{\nconst vec3 W = vec3(0.2125, 0.7154, 0.0721);\nvec3 intensity = vec3(dot(rgb, W));\nreturn mix(intensity, rgb, adjustment);\n}\n"}),c("Shaders/Builtin/Functions/signNotZero",[],function(){"use strict";return"float czm_signNotZero(float value)\n{\nreturn value >= 0.0 ? 1.0 : -1.0;\n}\nvec2 czm_signNotZero(vec2 value)\n{\nreturn vec2(czm_signNotZero(value.x), czm_signNotZero(value.y));\n}\nvec3 czm_signNotZero(vec3 value)\n{\nreturn vec3(czm_signNotZero(value.x), czm_signNotZero(value.y), czm_signNotZero(value.z));\n}\nvec4 czm_signNotZero(vec4 value)\n{\nreturn vec4(czm_signNotZero(value.x), czm_signNotZero(value.y), czm_signNotZero(value.z), czm_signNotZero(value.w));\n}\n"}),c("Shaders/Builtin/Functions/tangentToEyeSpaceMatrix",[],function(){"use strict";return"mat3 czm_tangentToEyeSpaceMatrix(vec3 normalEC, vec3 tangentEC, vec3 binormalEC)\n{\nvec3 normal = normalize(normalEC);\nvec3 tangent = normalize(tangentEC);\nvec3 binormal = normalize(binormalEC);\nreturn mat3(tangent.x,  tangent.y,  tangent.z,\nbinormal.x, binormal.y, binormal.z,\nnormal.x,   normal.y,   normal.z);\n}\n"}),c("Shaders/Builtin/Functions/translateRelativeToEye",[],function(){"use strict";return"vec4 czm_translateRelativeToEye(vec3 high, vec3 low)\n{\nvec3 highDifference = high - czm_encodedCameraPositionMCHigh;\nvec3 lowDifference = low - czm_encodedCameraPositionMCLow;\nreturn vec4(highDifference + lowDifference, 1.0);\n}\n"}),c("Shaders/Builtin/Functions/translucentPhong",[],function(){"use strict";return"vec4 czm_translucentPhong(vec3 toEye, czm_material material)\n{\nfloat diffuse = czm_getLambertDiffuse(vec3(0.0, 0.0, 1.0), material.normal);\ndiffuse += czm_getLambertDiffuse(vec3(0.0, 1.0, 0.0), material.normal);\ndiffuse = clamp(diffuse, 0.0, 1.0);\nfloat specular = czm_getSpecular(czm_sunDirectionEC, toEye, material.normal, material.shininess);\nspecular += czm_getSpecular(czm_moonDirectionEC, toEye, material.normal, material.shininess);\nvec3 materialDiffuse = material.diffuse * 0.5;\nvec3 ambient = materialDiffuse;\nvec3 color = ambient + material.emission;\ncolor += materialDiffuse * diffuse;\ncolor += material.specular * specular;\nreturn vec4(color, material.alpha);\n}\n"}),c("Shaders/Builtin/Functions/transpose",[],function(){"use strict";return"mat2 czm_transpose(mat2 matrix)\n{\nreturn mat2(\nmatrix[0][0], matrix[1][0],\nmatrix[0][1], matrix[1][1]);\n}\nmat3 czm_transpose(mat3 matrix)\n{\nreturn mat3(\nmatrix[0][0], matrix[1][0], matrix[2][0],\nmatrix[0][1], matrix[1][1], matrix[2][1],\nmatrix[0][2], matrix[1][2], matrix[2][2]);\n}\nmat4 czm_transpose(mat4 matrix)\n{\nreturn mat4(\nmatrix[0][0], matrix[1][0], matrix[2][0], matrix[3][0],\nmatrix[0][1], matrix[1][1], matrix[2][1], matrix[3][1],\nmatrix[0][2], matrix[1][2], matrix[2][2], matrix[3][2],\nmatrix[0][3], matrix[1][3], matrix[2][3], matrix[3][3]);\n}\n"}),c("Shaders/Builtin/Functions/windowToEyeCoordinates",[],function(){"use strict";return"vec4 czm_windowToEyeCoordinates(vec4 fragmentCoordinate)\n{\nfloat x = 2.0 * (fragmentCoordinate.x - czm_viewport.x) / czm_viewport.z - 1.0;\nfloat y = 2.0 * (fragmentCoordinate.y - czm_viewport.y) / czm_viewport.w - 1.0;\nfloat z = (fragmentCoordinate.z - czm_viewportTransformation[3][2]) / czm_viewportTransformation[2][2];\nvec4 q = vec4(x, y, z, 1.0);\nq /= fragmentCoordinate.w;\nq = czm_inverseProjection * q;\nreturn q;\n}\n"}),c("Shaders/Builtin/CzmBuiltins",["./Constants/degreesPerRadian","./Constants/depthRange","./Constants/epsilon1","./Constants/epsilon2","./Constants/epsilon3","./Constants/epsilon4","./Constants/epsilon5","./Constants/epsilon6","./Constants/epsilon7","./Constants/infinity","./Constants/oneOverPi","./Constants/oneOverTwoPi","./Constants/pi","./Constants/piOverFour","./Constants/piOverSix","./Constants/piOverThree","./Constants/piOverTwo","./Constants/radiansPerDegree","./Constants/sceneMode2D","./Constants/sceneMode3D","./Constants/sceneModeColumbusView","./Constants/sceneModeMorphing","./Constants/solarRadius","./Constants/threePiOver2","./Constants/twoPi","./Constants/webMercatorMaxLatitude","./Structs/depthRangeStruct","./Structs/ellipsoid","./Structs/material","./Structs/materialInput","./Structs/ray","./Structs/raySegment","./Functions/RGBToXYZ","./Functions/XYZToRGB","./Functions/alphaWeight","./Functions/antialias","./Functions/columbusViewMorph","./Functions/computePosition","./Functions/cosineAndSine","./Functions/decompressTextureCoordinates","./Functions/eastNorthUpToEyeCoordinates","./Functions/ellipsoidContainsPoint","./Functions/ellipsoidNew","./Functions/ellipsoidWgs84TextureCoordinates","./Functions/equalsEpsilon","./Functions/eyeOffset","./Functions/eyeToWindowCoordinates","./Functions/geodeticSurfaceNormal","./Functions/getDefaultMaterial","./Functions/getLambertDiffuse","./Functions/getSpecular","./Functions/getWaterNoise","./Functions/getWgs84EllipsoidEC","./Functions/hue","./Functions/isEmpty","./Functions/isFull","./Functions/latitudeToWebMercatorFraction","./Functions/luminance","./Functions/modelToWindowCoordinates","./Functions/multiplyWithColorBalance","./Functions/octDecode","./Functions/phong","./Functions/pointAlongRay","./Functions/rayEllipsoidIntersectionInterval","./Functions/saturation","./Functions/signNotZero","./Functions/tangentToEyeSpaceMatrix","./Functions/translateRelativeToEye","./Functions/translucentPhong","./Functions/transpose","./Functions/windowToEyeCoordinates"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa){"use strict";return{czm_degreesPerRadian:a,czm_depthRange:b,czm_epsilon1:c,czm_epsilon2:d,czm_epsilon3:e,czm_epsilon4:f,czm_epsilon5:g,czm_epsilon6:h,czm_epsilon7:i,czm_infinity:j,czm_oneOverPi:k,czm_oneOverTwoPi:l,czm_pi:m,czm_piOverFour:n,czm_piOverSix:o,czm_piOverThree:p,czm_piOverTwo:q,czm_radiansPerDegree:r,czm_sceneMode2D:s,czm_sceneMode3D:t,czm_sceneModeColumbusView:u,czm_sceneModeMorphing:v,czm_solarRadius:w,czm_threePiOver2:x,czm_twoPi:y,czm_webMercatorMaxLatitude:z,czm_depthRangeStruct:A,czm_ellipsoid:B,czm_material:C,czm_materialInput:D,czm_ray:E,czm_raySegment:F,czm_RGBToXYZ:G,czm_XYZToRGB:H,czm_alphaWeight:I,czm_antialias:J,czm_columbusViewMorph:K,czm_computePosition:L,czm_cosineAndSine:M,czm_decompressTextureCoordinates:N,czm_eastNorthUpToEyeCoordinates:O,czm_ellipsoidContainsPoint:P,czm_ellipsoidNew:Q,czm_ellipsoidWgs84TextureCoordinates:R,czm_equalsEpsilon:S,czm_eyeOffset:T,czm_eyeToWindowCoordinates:U,czm_geodeticSurfaceNormal:V,czm_getDefaultMaterial:W,czm_getLambertDiffuse:X,czm_getSpecular:Y,czm_getWaterNoise:Z,czm_getWgs84EllipsoidEC:$,czm_hue:_,czm_isEmpty:aa,czm_isFull:ba,czm_latitudeToWebMercatorFraction:ca,czm_luminance:da,czm_modelToWindowCoordinates:ea,czm_multiplyWithColorBalance:fa,czm_octDecode:ga,czm_phong:ha,czm_pointAlongRay:ia,czm_rayEllipsoidIntersectionInterval:ja,czm_saturation:ka,czm_signNotZero:la,czm_tangentToEyeSpaceMatrix:ma,czm_translateRelativeToEye:na,czm_translucentPhong:oa,czm_transpose:pa,czm_windowToEyeCoordinates:qa}}),c("Renderer/AutomaticUniforms",["../Core/Cartesian3","../Core/defineProperties","../Core/Matrix4"],function(a,b,c){"use strict";var d=new a,e=function(a){this._size=a.size,this._datatype=a.datatype,this.getValue=a.getValue};if(b(e.prototype,{size:{get:function(){return this._size}},datatype:{get:function(){return this._datatype}}}),"undefined"==typeof WebGLRenderingContext)return{};var f={};f[WebGLRenderingContext.FLOAT]="float",f[WebGLRenderingContext.FLOAT_VEC2]="vec2",f[WebGLRenderingContext.FLOAT_VEC3]="vec3",f[WebGLRenderingContext.FLOAT_VEC4]="vec4",f[WebGLRenderingContext.INT]="int",f[WebGLRenderingContext.INT_VEC2]="ivec2",f[WebGLRenderingContext.INT_VEC3]="ivec3",f[WebGLRenderingContext.INT_VEC4]="ivec4",f[WebGLRenderingContext.BOOL]="bool",f[WebGLRenderingContext.BOOL_VEC2]="bvec2",f[WebGLRenderingContext.BOOL_VEC3]="bvec3",f[WebGLRenderingContext.BOOL_VEC4]="bvec4",f[WebGLRenderingContext.FLOAT_MAT2]="mat2",f[WebGLRenderingContext.FLOAT_MAT3]="mat3",f[WebGLRenderingContext.FLOAT_MAT4]="mat4",f[WebGLRenderingContext.SAMPLER_2D]="sampler2D",f[WebGLRenderingContext.SAMPLER_CUBE]="samplerCube",e.prototype.getDeclaration=function(a){var b="uniform "+f[this._datatype]+" "+a,c=this._size;return b+=1===c?";":"["+c.toString()+"];"};var g={czm_viewport:new e({size:1,datatype:WebGLRenderingContext.FLOAT_VEC4,getValue:function(a){return a.viewportCartesian4}}),czm_viewportOrthographic:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.viewportOrthographic}}),czm_viewportTransformation:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.viewportTransformation}}),czm_model:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.model}}),czm_inverseModel:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.inverseModel}}),czm_view:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.view}}),czm_view3D:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.view3D}}),czm_viewRotation:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT3,getValue:function(a){return a.viewRotation}}),czm_viewRotation3D:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT3,getValue:function(a){return a.viewRotation3D}}),czm_inverseView:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.inverseView}}),czm_inverseView3D:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.inverseView3D}}),czm_inverseViewRotation:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT3,getValue:function(a){return a.inverseViewRotation}}),czm_inverseViewRotation3D:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT3,getValue:function(a){return a.inverseViewRotation3D}}),czm_projection:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.projection}}),czm_inverseProjection:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.inverseProjection}}),czm_inverseProjectionOIT:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.inverseProjectionOIT}}),czm_infiniteProjection:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.infiniteProjection}}),czm_modelView:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.modelView}}),czm_modelView3D:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.modelView3D}}),czm_modelViewRelativeToEye:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.modelViewRelativeToEye}}),czm_inverseModelView:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.inverseModelView}}),czm_inverseModelView3D:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.inverseModelView3D}}),czm_viewProjection:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.viewProjection}}),czm_inverseViewProjection:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.inverseViewProjection}}),czm_modelViewProjection:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.modelViewProjection}}),czm_inverseModelViewProjection:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.inverseModelViewProjection}}),czm_modelViewProjectionRelativeToEye:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.modelViewProjectionRelativeToEye}}),czm_modelViewInfiniteProjection:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT4,getValue:function(a){return a.modelViewInfiniteProjection}}),czm_normal:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT3,getValue:function(a){return a.normal}}),czm_normal3D:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT3,getValue:function(a){return a.normal3D}}),czm_inverseNormal:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT3,getValue:function(a){return a.inverseNormal}}),czm_inverseNormal3D:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT3,getValue:function(a){return a.inverseNormal3D}}),czm_eyeHeight2D:new e({size:1,datatype:WebGLRenderingContext.FLOAT_VEC2,getValue:function(a){return a.eyeHeight2D}}),czm_entireFrustum:new e({size:1,datatype:WebGLRenderingContext.FLOAT_VEC2,getValue:function(a){return a.entireFrustum}}),czm_currentFrustum:new e({size:1,datatype:WebGLRenderingContext.FLOAT_VEC2,getValue:function(a){return a.currentFrustum}}),czm_sunPositionWC:new e({size:1,datatype:WebGLRenderingContext.FLOAT_VEC3,getValue:function(a){return a.sunPositionWC}}),czm_sunPositionColumbusView:new e({size:1,datatype:WebGLRenderingContext.FLOAT_VEC3,getValue:function(a){return a.sunPositionColumbusView}}),czm_sunDirectionEC:new e({size:1,datatype:WebGLRenderingContext.FLOAT_VEC3,getValue:function(a){return a.sunDirectionEC}}),czm_sunDirectionWC:new e({size:1,datatype:WebGLRenderingContext.FLOAT_VEC3,getValue:function(a){return a.sunDirectionWC}}),czm_moonDirectionEC:new e({size:1,datatype:WebGLRenderingContext.FLOAT_VEC3,getValue:function(a){return a.moonDirectionEC}}),czm_encodedCameraPositionMCHigh:new e({size:1,datatype:WebGLRenderingContext.FLOAT_VEC3,getValue:function(a){return a.encodedCameraPositionMCHigh}}),czm_encodedCameraPositionMCLow:new e({size:1,datatype:WebGLRenderingContext.FLOAT_VEC3,getValue:function(a){return a.encodedCameraPositionMCLow}}),czm_viewerPositionWC:new e({size:1,datatype:WebGLRenderingContext.FLOAT_VEC3,getValue:function(a){return c.getTranslation(a.inverseView,d)}}),czm_frameNumber:new e({size:1,datatype:WebGLRenderingContext.FLOAT,getValue:function(a){return a.frameState.frameNumber}}),czm_morphTime:new e({size:1,datatype:WebGLRenderingContext.FLOAT,getValue:function(a){return a.frameState.morphTime}}),czm_sceneMode:new e({size:1,datatype:WebGLRenderingContext.FLOAT,getValue:function(a){return a.frameState.mode}}),czm_temeToPseudoFixed:new e({size:1,datatype:WebGLRenderingContext.FLOAT_MAT3,getValue:function(a){return a.temeToPseudoFixedMatrix}}),czm_resolutionScale:new e({size:1,datatype:WebGLRenderingContext.FLOAT,getValue:function(a){return a.resolutionScale}})};return g}),c("Renderer/ShaderSource",["../Core/defaultValue","../Core/defined","../Core/DeveloperError","../Shaders/Builtin/CzmBuiltins","./AutomaticUniforms"],function(a,b,c,d,e){"use strict";function f(a){return a.replace(/\/\*\*[\s\S]*?\*\//gm,function(a){for(var b=a.match(/\n/gm).length,c="",d=0;b>d;++d)c+="\n";return c})}function g(a,c,d){for(var e,g=0;g<d.length;++g)d[g].name===a&&(e=d[g]);return b(e)||(c=f(c),e={name:a,glslSource:c,dependsOn:[],requiredBy:[],evaluated:!1},d.push(e)),e}function h(a,c){if(!a.evaluated){a.evaluated=!0;var d=a.glslSource.match(/\bczm_[a-zA-Z0-9_]*/g);b(d)&&null!==d&&(d=d.filter(function(a,b){return d.indexOf(a)===b}),d.forEach(function(b){if(b!==a.name&&l._czmBuiltinsAndUniforms.hasOwnProperty(b)){var d=g(b,l._czmBuiltinsAndUniforms[b],c);a.dependsOn.push(d),d.requiredBy.push(a),h(d,c)}}))}}function i(a){for(var b=[],d=[];a.length>0;){var e=a.pop();d.push(e),0===e.requiredBy.length&&b.push(e)}for(;b.length>0;){var f=b.shift();a.push(f);for(var g=0;g<f.dependsOn.length;++g){var h=f.dependsOn[g],i=h.requiredBy.indexOf(f);h.requiredBy.splice(i,1),0===h.requiredBy.length&&b.push(h)}}for(var j=[],k=0;k<d.length;++k)0!==d[k].requiredBy.length&&j.push(d[k]);if(0!==j.length){var l="A circular dependency was found in the following built-in functions/structs/constants: \n";for(k=0;k<j.length;++k)l=l+j[k].name+"\n";throw new c(l)}}function j(a){var b=[],c=g("main",a,b);h(c,b),i(b);for(var d="",e=b.length-1;e>=0;--e)d=d+b[e].glslSource+"\n";return d.replace(c.glslSource,"")}function k(a,d){var e,g,h="",i=a.sources;if(b(i))for(e=0,g=i.length;g>e;++e)h+="\n#line 0\n"+i[e];h=f(h);var k;h=h.replace(/#version\s+(.*?)\n/gm,function(a,d){if(b(k)&&k!==d)throw new c("inconsistent versions found: "+k+" and "+d);return k=d,"\n"});var l=a.pickColorQualifier;b(l)&&(h=h.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,"void czm_old_main()"),h+="\n"+l+" vec4 czm_pickColor;\nvoid main()\n{\n    czm_old_main();\n    if (gl_FragColor.a == 0.0) {\n        discard;\n    }\n    gl_FragColor = czm_pickColor;\n}");var m="";b(k)&&(m="#version "+k),d&&(m+="#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n#else\n    precision mediump float;\n#endif\n\n");var n=a.defines;if(b(n))for(e=0,g=n.length;g>e;++e){var o=n[e];0!==o.length&&(m+="#define "+o+"\n")}return a.includeBuiltIns&&(m+=j(h)),m+="\n#line 0\n",m+=h}var l=function(c){c=a(c,a.EMPTY_OBJECT);var d=c.pickColorQualifier;this.defines=b(c.defines)?c.defines.slice(0):[],this.sources=b(c.sources)?c.sources.slice(0):[],this.pickColorQualifier=d,this.includeBuiltIns=a(c.includeBuiltIns,!0)};l.prototype.clone=function(){return new l({sources:this.sources,defines:this.defines,pickColorQuantifier:this.pickColorQualifier,includeBuiltIns:this.includeBuiltIns})},l.prototype.createCombinedVertexShader=function(){return k(this,!1)},l.prototype.createCombinedFragmentShader=function(){return k(this,!0)},l._czmBuiltinsAndUniforms={};for(var m in d)d.hasOwnProperty(m)&&(l._czmBuiltinsAndUniforms[m]=d[m]);for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];"function"==typeof o.getDeclaration&&(l._czmBuiltinsAndUniforms[n]=o.getDeclaration(n))}return l}),c("Renderer/VertexArrayFacade",["../Core/ComponentDatatype","../Core/defaultValue","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Core/Math","./BufferUsage"],function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(b.needsCommit&&b.vertexSizeInBytes>0){b.needsCommit=!1;var d=b.vertexBuffer,e=a._size*b.vertexSizeInBytes,f=c(d);if(!f||d.sizeInBytes<e)return f&&d.destroy(),b.vertexBuffer=a._context.createVertexBuffer(b.arrayBuffer,b.usage),b.vertexBuffer.vertexArrayDestroyable=!1,!0;b.vertexBuffer.copyFromArrayView(b.arrayBuffer)}return!1}function i(a,b,c){if(a.needsCommit&&a.vertexSizeInBytes>0){var d=a.vertexSizeInBytes*b,e=a.vertexSizeInBytes*c;a.vertexBuffer.copyFromArrayView(new Uint8Array(a.arrayBuffer,d,e),d)}}function j(a){var b=a.va;if(c(b)){for(var d=b.length,e=0;d>e;++e)b[e].va.destroy();a.va=void 0}}var k=function(b,d,e){function f(b,c){return a.getSizeInBytes(c.componentDatatype)-a.getSizeInBytes(b.componentDatatype)}var h=k._verifyAttributes(d);e=e||0;for(var i,j,l=[],m={},n=h.length,o=0;n>o;++o){var p=h[o];p.vertexBuffer?l.push(p):(j=p.usage,i=m[j],c(i)||(i=m[j]=[]),i.push(p))}this._buffersByUsage={},this._allBuffers=[];for(j in m)if(m.hasOwnProperty(j)){i=m[j],i.sort(f);var q,r=k._vertexSizeInBytes(i);switch(Number(j)){case g.STATIC_DRAW:q=g.STATIC_DRAW;break;case g.STREAM_DRAW:q=g.STREAM_DRAW;break;case g.DYNAMIC_DRAW:q=g.DYNAMIC_DRAW}var s={vertexSizeInBytes:r,vertexBuffer:void 0,usage:q,needsCommit:!1,arrayBuffer:void 0,arrayViews:k._createArrayViews(i,r)};this._buffersByUsage[j]=s,this._allBuffers.push(s)}this._size=0,this._precreated=l,this._context=b,this.writers=void 0,this.va=void 0,this.resize(e)};k._verifyAttributes=function(c){for(var d=[],f=0;f<c.length;++f){var h=c[f],i={index:b(h.index,f),enabled:b(h.enabled,!0),componentsPerAttribute:h.componentsPerAttribute,componentDatatype:h.componentDatatype||a.FLOAT,normalize:h.normalize||!1,vertexBuffer:h.vertexBuffer,usage:h.usage||g.STATIC_DRAW};if(d.push(i),1!==i.componentsPerAttribute&&2!==i.componentsPerAttribute&&3!==i.componentsPerAttribute&&4!==i.componentsPerAttribute)throw new e("attribute.componentsPerAttribute must be in the range [1, 4].");var j=i.componentDatatype;if(!a.validate(j))throw new e("Attribute must have a valid componentDatatype or not specify it.");if(!g.validate(i.usage))throw new e("Attribute must have a valid usage or not specify it.")}for(var k=new Array(d.length),l=0;l<d.length;++l){var m=d[l],n=m.index;if(k[n])throw new e("Index "+n+" is used by more than one attribute.");k[n]=!0}return d},k._vertexSizeInBytes=function(b){for(var c=0,d=b.length,e=0;d>e;++e){var f=b[e];c+=f.componentsPerAttribute*a.getSizeInBytes(f.componentDatatype)}var g=d>0?a.getSizeInBytes(b[0].componentDatatype):0,h=g>0?c%g:0,i=0===h?0:g-h;return c+=i},k._createArrayViews=function(b,c){for(var d=[],e=0,f=b.length,g=0;f>g;++g){var h=b[g],i=h.componentDatatype;d.push({index:h.index,enabled:h.enabled,componentsPerAttribute:h.componentsPerAttribute,componentDatatype:i,normalize:h.normalize,offsetInBytes:e,vertexSizeInComponentType:c/a.getSizeInBytes(i),view:void 0}),e+=h.componentsPerAttribute*a.getSizeInBytes(i)}return d},k.prototype.resize=function(a){this._size=a;var b=this._allBuffers;this.writers=[];for(var c=0,d=b.length;d>c;++c){var e=b[c];k._resize(e,this._size),k._appendWriters(this.writers,e)}j(this)},k._resize=function(b,d){if(b.vertexSizeInBytes>0){var e=new ArrayBuffer(d*b.vertexSizeInBytes);if(c(b.arrayBuffer))for(var f=new Uint8Array(e),g=new Uint8Array(b.arrayBuffer),h=g.length,i=0;h>i;++i)f[i]=g[i];for(var j=b.arrayViews,k=j.length,l=0;k>l;++l){var m=j[l];m.view=a.createArrayBufferView(m.componentDatatype,e,m.offsetInBytes)}b.arrayBuffer=e}};var l=[function(a,b,c){return function(d,e){b[d*c]=e,a.needsCommit=!0}},function(a,b,c){return function(d,e,f){var g=d*c;b[g]=e,b[g+1]=f,a.needsCommit=!0}},function(a,b,c){return function(d,e,f,g){var h=d*c;b[h]=e,b[h+1]=f,b[h+2]=g,a.needsCommit=!0}},function(a,b,c){return function(d,e,f,g,h){var i=d*c;b[i]=e,b[i+1]=f,b[i+2]=g,b[i+3]=h,a.needsCommit=!0}}];return k._appendWriters=function(a,b){for(var c=b.arrayViews,d=c.length,e=0;d>e;++e){var f=c[e];a[f.index]=l[f.componentsPerAttribute-1](b,f.view,f.vertexSizeInComponentType)}},k.prototype.commit=function(a){for(var b,d=!1,e=this._allBuffers,g=0,i=e.length;i>g;++g)b=e[g],d=h(this,b)||d;if(d||!c(this.va)){var l=this._buffersByUsage;j(this);for(var m=this.va=[],n=Math.ceil(this._size/f.SIXTY_FOUR_KILOBYTES),o=0;n>o;++o){var p=[];for(var q in l)l.hasOwnProperty(q)&&(b=l[q],k._appendAttributes(p,b,o*b.vertexSizeInBytes*f.SIXTY_FOUR_KILOBYTES));p=p.concat(this._precreated),m.push({va:this._context.createVertexArray(p,a),indicesCount:1.5*(o!==n-1?f.SIXTY_FOUR_KILOBYTES:this._size%f.SIXTY_FOUR_KILOBYTES)})}}},k._appendAttributes=function(a,b,c){for(var d=b.arrayViews,e=d.length,f=0;e>f;++f){var g=d[f];a.push({index:g.index,enabled:g.enabled,componentsPerAttribute:g.componentsPerAttribute,componentDatatype:g.componentDatatype,normalize:g.normalize,vertexBuffer:b.vertexBuffer,offsetInBytes:c+g.offsetInBytes,strideInBytes:b.vertexSizeInBytes})}},k.prototype.subCommit=function(a,b){for(var c=this._allBuffers,d=0,e=c.length;e>d;++d)i(c[d],a,b)},k.prototype.endSubCommits=function(){for(var a=this._allBuffers,b=0,c=a.length;c>b;++b)a[b].needsCommit=!1},k.prototype.isDestroyed=function(){return!1},k.prototype.destroy=function(){for(var a=this._allBuffers,b=0,c=a.length;c>b;++b){var e=a[b];e.vertexBuffer=e.vertexBuffer&&e.vertexBuffer.destroy()}return j(this),d(this)},k}),c("Shaders/BillboardCollectionFS",[],function(){"use strict";return"uniform sampler2D u_atlas;\nvarying vec2 v_textureCoordinates;\n#ifdef RENDER_FOR_PICK\nvarying vec4 v_pickColor;\n#else\nvarying vec4 v_color;\n#endif\nvoid main()\n{\n#ifdef RENDER_FOR_PICK\nvec4 vertexColor = vec4(1.0, 1.0, 1.0, 1.0);\n#else\nvec4 vertexColor = v_color;\n#endif\nvec4 color = texture2D(u_atlas, v_textureCoordinates) * vertexColor;\nif (color.a == 0.0)\n{\ndiscard;\n}\n#ifdef RENDER_FOR_PICK\ngl_FragColor = v_pickColor;\n#else\ngl_FragColor = color;\n#endif\n}\n"}),c("Shaders/BillboardCollectionVS",[],function(){"use strict"
;return"attribute vec4 positionHighAndScale;\nattribute vec4 positionLowAndRotation;\nattribute vec4 compressedAttribute0;\nattribute vec4 compressedAttribute1;\nattribute vec4 compressedAttribute2;\nattribute vec3 eyeOffset;\nattribute vec4 scaleByDistance;\nattribute vec4 pixelOffsetScaleByDistance;\nvarying vec2 v_textureCoordinates;\n#ifdef RENDER_FOR_PICK\nvarying vec4 v_pickColor;\n#else\nvarying vec4 v_color;\n#endif\nfloat getNearFarScalar(vec4 nearFarScalar, float cameraDistSq)\n{\nfloat valueAtMin = nearFarScalar.y;\nfloat valueAtMax = nearFarScalar.w;\nfloat nearDistanceSq = nearFarScalar.x * nearFarScalar.x;\nfloat farDistanceSq = nearFarScalar.z * nearFarScalar.z;\nfloat t = (cameraDistSq - nearDistanceSq) / (farDistanceSq - nearDistanceSq);\nt = pow(clamp(t, 0.0, 1.0), 0.2);\nreturn mix(valueAtMin, valueAtMax, t);\n}\nconst float UPPER_BOUND = 32768.0;\nconst float SHIFT_LEFT16 = 65536.0;\nconst float SHIFT_LEFT8 = 256.0;\nconst float SHIFT_LEFT7 = 128.0;\nconst float SHIFT_LEFT5 = 32.0;\nconst float SHIFT_LEFT3 = 8.0;\nconst float SHIFT_LEFT2 = 4.0;\nconst float SHIFT_LEFT1 = 2.0;\nconst float SHIFT_RIGHT8 = 1.0 / 256.0;\nconst float SHIFT_RIGHT7 = 1.0 / 128.0;\nconst float SHIFT_RIGHT5 = 1.0 / 32.0;\nconst float SHIFT_RIGHT3 = 1.0 / 8.0;\nconst float SHIFT_RIGHT2 = 1.0 / 4.0;\nconst float SHIFT_RIGHT1 = 1.0 / 2.0;\nvoid main()\n{\nvec3 positionHigh = positionHighAndScale.xyz;\nvec3 positionLow = positionLowAndRotation.xyz;\nfloat scale = positionHighAndScale.w;\n#if defined(ROTATION) || defined(ALIGNED_AXIS)\nfloat rotation = positionLowAndRotation.w;\n#endif\nfloat compressed = compressedAttribute0.x;\nvec2 pixelOffset;\npixelOffset.x = floor(compressed * SHIFT_RIGHT7);\ncompressed -= pixelOffset.x * SHIFT_LEFT7;\npixelOffset.x -= UPPER_BOUND;\nvec2 origin;\norigin.x = floor(compressed * SHIFT_RIGHT5);\ncompressed -= origin.x * SHIFT_LEFT5;\norigin.y = floor(compressed * SHIFT_RIGHT3);\ncompressed -= origin.y * SHIFT_LEFT3;\norigin -= vec2(1.0);\nfloat show = floor(compressed * SHIFT_RIGHT2);\ncompressed -= show * SHIFT_LEFT2;\nvec2 direction;\ndirection.x = floor(compressed * SHIFT_RIGHT1);\ndirection.y = compressed - direction.x * SHIFT_LEFT1;\nfloat temp = compressedAttribute0.y  * SHIFT_RIGHT8;\npixelOffset.y = -(floor(temp) - UPPER_BOUND);\nvec2 translate;\ntranslate.y = (temp - floor(temp)) * SHIFT_LEFT16;\ntemp = compressedAttribute0.z * SHIFT_RIGHT8;\ntranslate.x = floor(temp) - UPPER_BOUND;\ntranslate.y += (temp - floor(temp)) * SHIFT_LEFT8;\ntranslate.y -= UPPER_BOUND;\nvec2 textureCoordinates = czm_decompressTextureCoordinates(compressedAttribute0.w);\ntemp = compressedAttribute1.x * SHIFT_RIGHT8;\nvec2 imageSize = vec2(floor(temp), compressedAttribute2.w);\n#ifdef EYE_DISTANCE_TRANSLUCENCY\nvec4 translucencyByDistance;\ntranslucencyByDistance.x = compressedAttribute1.z;\ntranslucencyByDistance.z = compressedAttribute1.w;\ntranslucencyByDistance.y = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;\ntemp = compressedAttribute1.y * SHIFT_RIGHT8;\ntranslucencyByDistance.w = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;\n#endif\n#ifdef ALIGNED_AXIS\nvec3 alignedAxis = czm_octDecode(floor(compressedAttribute1.y * SHIFT_RIGHT8));\n#else\nvec3 alignedAxis = vec3(0.0);\n#endif\n#ifdef RENDER_FOR_PICK\ntemp = compressedAttribute2.y;\n#else\ntemp = compressedAttribute2.x;\n#endif\nvec4 color;\ntemp = temp * SHIFT_RIGHT8;\ncolor.b = (temp - floor(temp)) * SHIFT_LEFT8;\ntemp = floor(temp) * SHIFT_RIGHT8;\ncolor.g = (temp - floor(temp)) * SHIFT_LEFT8;\ncolor.r = floor(temp);\ntemp = compressedAttribute2.z * SHIFT_RIGHT8;\n#ifdef RENDER_FOR_PICK\ncolor.a = (temp - floor(temp)) * SHIFT_LEFT8;\nvec4 pickColor = color / 255.0;\n#else\ncolor.a = floor(temp);\ncolor /= 255.0;\n#endif\nvec4 p = czm_translateRelativeToEye(positionHigh, positionLow);\nvec4 positionEC = czm_modelViewRelativeToEye * p;\npositionEC = czm_eyeOffset(positionEC, eyeOffset);\npositionEC.xyz *= show;\n#if defined(EYE_DISTANCE_SCALING) || defined(EYE_DISTANCE_TRANSLUCENCY) || defined(EYE_DISTANCE_PIXEL_OFFSET)\nfloat lengthSq;\nif (czm_sceneMode == czm_sceneMode2D)\n{\nlengthSq = czm_eyeHeight2D.y;\n}\nelse\n{\nlengthSq = dot(positionEC.xyz, positionEC.xyz);\n}\n#endif\n#ifdef EYE_DISTANCE_SCALING\nscale *= getNearFarScalar(scaleByDistance, lengthSq);\nif (scale == 0.0)\n{\npositionEC.xyz = vec3(0.0);\n}\n#endif\nfloat translucency = 1.0;\n#ifdef EYE_DISTANCE_TRANSLUCENCY\ntranslucency = getNearFarScalar(translucencyByDistance, lengthSq);\nif (translucency == 0.0)\n{\npositionEC.xyz = vec3(0.0);\n}\n#endif\n#ifdef EYE_DISTANCE_PIXEL_OFFSET\nfloat pixelOffsetScale = getNearFarScalar(pixelOffsetScaleByDistance, lengthSq);\npixelOffset *= pixelOffsetScale;\n#endif\nvec4 positionWC = czm_eyeToWindowCoordinates(positionEC);\nvec2 halfSize = imageSize * scale * czm_resolutionScale;\nhalfSize *= ((direction * 2.0) - 1.0);\npositionWC.xy += (origin * abs(halfSize));\n#if defined(ROTATION) || defined(ALIGNED_AXIS)\nif (!all(equal(alignedAxis, vec3(0.0))) || rotation != 0.0)\n{\nfloat angle = rotation;\nif (!all(equal(alignedAxis, vec3(0.0))))\n{\nvec3 pos = positionEC.xyz + czm_encodedCameraPositionMCHigh + czm_encodedCameraPositionMCLow;\nvec3 normal = normalize(cross(alignedAxis, pos));\nvec4 tangent = vec4(normalize(cross(pos, normal)), 0.0);\ntangent = czm_modelViewProjection * tangent;\nangle += sign(-tangent.x) * acos(tangent.y / length(tangent.xy));\n}\nfloat cosTheta = cos(angle);\nfloat sinTheta = sin(angle);\nmat2 rotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);\nhalfSize = rotationMatrix * halfSize;\n}\n#endif\npositionWC.xy += halfSize;\npositionWC.xy += translate;\npositionWC.xy += (pixelOffset * czm_resolutionScale);\ngl_Position = czm_viewportOrthographic * vec4(positionWC.xy, -positionWC.z, 1.0);\nv_textureCoordinates = textureCoordinates;\n#ifdef RENDER_FOR_PICK\nv_pickColor = pickColor;\n#else\nv_color = color;\nv_color.a *= translucency;\n#endif\n}\n"}),c("Scene/HorizontalOrigin",["../Core/freezeObject"],function(a){"use strict";var b={CENTER:0,LEFT:1,RIGHT:-1};return a(b)}),c("Scene/SceneMode",["../Core/freezeObject"],function(a){"use strict";var b={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3};return b.getMorphTime=function(a){return a===b.SCENE3D?1:a===b.MORPHING?void 0:0},a(b)}),c("Scene/SceneTransforms",["../Core/BoundingRectangle","../Core/Cartesian2","../Core/Cartesian3","../Core/Cartesian4","../Core/Cartographic","../Core/defined","../Core/DeveloperError","../Core/Math","../Core/Matrix4","./SceneMode"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k={},l=new d(0,0,0,1),m=new d,n=new i;k.wgs84ToWindowCoordinates=function(a,b,c){var e=k.computeActualWgs84Position(a.frameState,b,l);if(!f(e))return void 0;var g=a.camera,h=i.multiply(g.frustum.projectionMatrix,g.viewMatrix,n);return i.multiplyByVector(h,d.fromElements(e.x,e.y,e.z,1,m),m),m.z<0&&a.mode!==j.SCENE2D?void 0:(c=k.clipToGLWindowCoordinates(a,m,c),c.y=a.canvas.clientHeight-c.y,c)},k.wgs84ToDrawingBufferCoordinates=function(a,b,c){var e=k.computeActualWgs84Position(a.frameState,b,l);if(!f(e))return void 0;var g=a.camera,h=i.multiply(g.frustum.projectionMatrix,g.viewMatrix,n);return i.multiplyByVector(h,d.fromElements(e.x,e.y,e.z,1,m),m),m.z<0&&a.mode!==j.SCENE2D?void 0:k.clipToDrawingBufferCoordinates(a,m,c)};var o=new c,p=new e;k.computeActualWgs84Position=function(a,b,d){var e=a.mode;if(e===j.SCENE3D)return c.clone(b,d);var g=a.mapProjection,i=g.ellipsoid.cartesianToCartographic(b,p);if(!f(i))return void 0;if(g.project(i,o),e===j.COLUMBUS_VIEW)return c.fromElements(o.z,o.x,o.y,d);if(e===j.SCENE2D)return c.fromElements(0,o.x,o.y,d);var k=a.morphTime;return c.fromElements(h.lerp(o.z,b.x,k),h.lerp(o.x,b.y,k),h.lerp(o.y,b.z,k),d)};var q=new c,r=new c,s=new a,t=new i;return k.clipToGLWindowCoordinates=function(a,d,e){var f=a.canvas;return c.divideByScalar(d,d.w,q),s.width=f.clientWidth,s.height=f.clientHeight,i.computeViewportTransformation(s,0,1,t),i.multiplyByPoint(t,q,r),b.fromCartesian3(r,e)},k.clipToDrawingBufferCoordinates=function(a,d,e){return c.divideByScalar(d,d.w,q),s.width=a.drawingBufferWidth,s.height=a.drawingBufferHeight,i.computeViewportTransformation(s,0,1,t),i.multiplyByPoint(t,q,r),b.fromCartesian3(r,e)},k.transformWindowToDrawingBuffer=function(a,c,d){var e=a.canvas,f=a.drawingBufferWidth/e.clientWidth,g=a.drawingBufferHeight/e.clientHeight;return b.fromElements(c.x*f,c.y*g,d)},k}),c("Scene/VerticalOrigin",["../Core/freezeObject"],function(a){"use strict";var b={CENTER:0,BOTTOM:1,TOP:-1};return a(b)}),c("Scene/Billboard",["../Core/BoundingRectangle","../Core/Cartesian2","../Core/Cartesian3","../Core/Cartesian4","../Core/Color","../Core/createGuid","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Matrix4","../Core/NearFarScalar","./HorizontalOrigin","./SceneMode","./SceneTransforms","./VerticalOrigin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";function q(a,b){var c=a._billboardCollection;h(c)&&(c._updateBillboard(a,b),a._dirty=!0)}var r=function(a,d){a=g(a,g.EMPTY_OBJECT),this._show=g(a.show,!0),this._position=c.clone(g(a.position,c.ZERO)),this._actualPosition=c.clone(this._position),this._pixelOffset=b.clone(g(a.pixelOffset,b.ZERO)),this._translate=new b(0,0),this._eyeOffset=c.clone(g(a.eyeOffset,c.ZERO)),this._verticalOrigin=g(a.verticalOrigin,p.CENTER),this._horizontalOrigin=g(a.horizontalOrigin,m.CENTER),this._scale=g(a.scale,1),this._color=e.clone(g(a.color,e.WHITE)),this._rotation=g(a.rotation,0),this._alignedAxis=c.clone(g(a.alignedAxis,c.ZERO)),this._width=a.width,this._height=a.height,this._scaleByDistance=a.scaleByDistance,this._translucencyByDistance=a.translucencyByDistance,this._pixelOffsetScaleByDistance=a.pixelOffsetScaleByDistance,this._id=a.id,this._collection=g(a.collection,d),this._pickId=void 0,this._pickPrimitive=g(a._pickPrimitive,this),this._billboardCollection=d,this._dirty=!1,this._index=-1,this._imageIndex=-1,this._imageIndexPromise=void 0,this._imageId=void 0,this._image=void 0,this._imageSubRegion=void 0,this._imageWidth=void 0,this._imageHeight=void 0;var i=a.image,j=a.imageId;h(i)&&(h(j)||(j="string"==typeof i?i:h(i.src)?i.src:f()),this._imageId=j,this._image=i),h(a.imageSubRegion)&&(this._imageId=j,this._imageSubRegion=a.imageSubRegion),h(this._billboardCollection._textureAtlas)&&this._loadImage()},s=r.SHOW_INDEX=0,t=r.POSITION_INDEX=1,u=r.PIXEL_OFFSET_INDEX=2,v=r.EYE_OFFSET_INDEX=3,w=r.HORIZONTAL_ORIGIN_INDEX=4,x=r.VERTICAL_ORIGIN_INDEX=5,y=r.SCALE_INDEX=6,z=r.IMAGE_INDEX_INDEX=7,A=r.COLOR_INDEX=8,B=r.ROTATION_INDEX=9,C=r.ALIGNED_AXIS_INDEX=10,D=r.SCALE_BY_DISTANCE_INDEX=11,E=r.TRANSLUCENCY_BY_DISTANCE_INDEX=12,F=r.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX=13;r.NUMBER_OF_PROPERTIES=14,i(r.prototype,{show:{get:function(){return this._show},set:function(a){this._show!==a&&(this._show=a,q(this,s))}},position:{get:function(){return this._position},set:function(a){var b=this._position;c.equals(b,a)||(c.clone(a,b),c.clone(a,this._actualPosition),q(this,t))}},pixelOffset:{get:function(){return this._pixelOffset},set:function(a){var c=this._pixelOffset;b.equals(c,a)||(b.clone(a,c),q(this,u))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(a){var b=this._scaleByDistance;l.equals(b,a)||(this._scaleByDistance=l.clone(a,b),q(this,D))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(a){var b=this._translucencyByDistance;l.equals(b,a)||(this._translucencyByDistance=l.clone(a,b),q(this,E))}},pixelOffsetScaleByDistance:{get:function(){return this._pixelOffsetScaleByDistance},set:function(a){var b=this._pixelOffsetScaleByDistance;l.equals(b,a)||(this._pixelOffsetScaleByDistance=l.clone(a,b),q(this,F))}},eyeOffset:{get:function(){return this._eyeOffset},set:function(a){var b=this._eyeOffset;c.equals(b,a)||(c.clone(a,b),q(this,v))}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(a){this._horizontalOrigin!==a&&(this._horizontalOrigin=a,q(this,w))}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(a){this._verticalOrigin!==a&&(this._verticalOrigin=a,q(this,x))}},scale:{get:function(){return this._scale},set:function(a){this._scale!==a&&(this._scale=a,q(this,y))}},color:{get:function(){return this._color},set:function(a){var b=this._color;e.equals(b,a)||(e.clone(a,b),q(this,A))}},rotation:{get:function(){return this._rotation},set:function(a){this._rotation!==a&&(this._rotation=a,q(this,B))}},alignedAxis:{get:function(){return this._alignedAxis},set:function(a){var b=this._alignedAxis;c.equals(b,a)||(c.clone(a,b),q(this,C))}},width:{get:function(){return g(this._width,this._imageWidth)},set:function(a){this._width!==a&&(this._width=a,q(this,z))}},height:{get:function(){return g(this._height,this._imageHeight)},set:function(a){this._height!==a&&(this._height=a,q(this,z))}},id:{get:function(){return this._id},set:function(a){this._id=a,h(this._pickId)&&(this._pickId.object.id=a)}},pickPrimitive:{get:function(){return this._pickPrimitive},set:function(a){this._pickPrimitive=a,h(this._pickId)&&(this._pickId.object.primitive=a)}},image:{get:function(){return this._imageId},set:function(a){h(a)?"string"==typeof a?this.setImage(a,a):h(a.src)?this.setImage(a.src,a):this.setImage(f(),a):(this._imageIndex=-1,this._imageSubRegion=void 0,this._imageId=void 0,this._image=void 0,this._imageIndexPromise=void 0,q(this,z))}},ready:{get:function(){return-1!==this._imageIndex}}}),r.prototype.getPickId=function(a){return h(this._pickId)||(this._pickId=a.createPickId({primitive:this._pickPrimitive,collection:this._collection,id:this._id})),this._pickId},r.prototype._loadImage=function(){var b,c=this._billboardCollection._textureAtlas,d=this._imageId,e=this._image,f=this._imageSubRegion;if(h(e)&&(b=c.addImage(d,e)),h(f)&&(b=c.addSubRegion(d,f)),this._imageIndexPromise=b,h(b)){var g=this;b.then(function(b){if(g._imageId===d&&g._image===e&&a.equals(g._imageSubRegion,f)){var h=c.textureCoordinates[b];g._imageWidth=c.texture.width*h.width,g._imageHeight=c.texture.height*h.height,g._imageIndex=b,g._ready=!0,g._image=void 0,g._imageIndexPromise=void 0,q(g,z)}}).otherwise(function(a){console.error("Error loading image for billboard: "+a),g._imageIndexPromise=void 0})}},r.prototype.setImage=function(a,b){this._imageId!==a&&(this._imageIndex=-1,this._imageSubRegion=void 0,this._imageId=a,this._image=b,h(this._billboardCollection._textureAtlas)&&this._loadImage())},r.prototype.setImageSubRegion=function(b,c){this._imageId===b&&a.equals(this._imageSubRegion,c)||(this._imageIndex=-1,this._imageId=b,this._imageSubRegion=c,h(this._billboardCollection._textureAtlas)&&this._loadImage())},r.prototype._setTranslate=function(a){var c=this._translate;b.equals(c,a)||(b.clone(a,c),q(this,u))},r.prototype._getActualPosition=function(){return this._actualPosition},r.prototype._setActualPosition=function(a){c.clone(a,this._actualPosition),q(this,t)};var G=new d;r._computeActualPosition=function(a,b,c){return b.mode===n.SCENE3D?a:(k.multiplyByPoint(c,a,G),o.computeActualWgs84Position(b,G))};var H=new k,I=new d,J=new c,K=new b,L=new b;r._computeScreenSpacePosition=function(a,e,f,g,h){var i=h.camera,j=i.viewMatrix,l=i.frustum.projectionMatrix,m=k.multiplyTransformation(j,a,H),n=k.multiplyByVector(m,d.fromElements(e.x,e.y,e.z,1,I),I),p=c.multiplyComponents(f,c.normalize(n,J),J);n.x+=f.x+p.x,n.y+=f.y+p.y,n.z+=p.z;var q=k.multiplyByVector(l,n,I),r=o.clipToGLWindowCoordinates(h,q,new b);g=b.clone(g,L),g.y=-g.y;var s=b.multiplyByScalar(g,h.context.uniformState.resolutionScale,K);return r.x+=s.x,r.y+=s.y,r};var M=new b(0,0);return r.prototype.computeScreenSpacePosition=function(a){var c=this._billboardCollection;b.clone(this._pixelOffset,M),b.add(M,this._translate,M);var d=c.modelMatrix,e=r._computeScreenSpacePosition(d,this._actualPosition,this._eyeOffset,M,a);return e.y=a.canvas.clientHeight-e.y,e},r.prototype.equals=function(d){return this===d||h(d)&&this._show===d._show&&this._scale===d._scale&&this._verticalOrigin===d._verticalOrigin&&this._horizontalOrigin===d._horizontalOrigin&&this._id===d._id&&this._imageId===d._imageId&&a.equals(this._imageSubRegion,d._imageSubRegion)&&c.equals(this._position,d._position)&&e.equals(this._color,d._color)&&b.equals(this._pixelOffset,d._pixelOffset)&&b.equals(this._translate,d._translate)&&c.equals(this._eyeOffset,d._eyeOffset)&&l.equals(this._scaleByDistance,d._scaleByDistance)&&l.equals(this._translucencyByDistance,d._translucencyByDistance)&&l.equals(this._pixelOffsetScaleByDistance,d._pixelOffsetScaleByDistance)},r.prototype._destroy=function(){this.image=void 0,this._pickId=this._pickId&&this._pickId.destroy(),this._billboardCollection=void 0},r}),c("Scene/BlendEquation",["../Core/freezeObject"],function(a){"use strict";var b={ADD:32774,SUBTRACT:32778,REVERSE_SUBTRACT:32779};return a(b)}),c("Scene/BlendFunction",["../Core/freezeObject"],function(a){"use strict";var b={ZERO:0,ONE:1,SOURCE_COLOR:768,ONE_MINUS_SOURCE_COLOR:769,DESTINATION_COLOR:774,ONE_MINUS_DESTINATION_COLOR:775,SOURCE_ALPHA:770,ONE_MINUS_SOURCE_ALPHA:771,DESTINATION_ALPHA:772,ONE_MINUS_DESTINATION_ALPHA:773,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,SOURCE_ALPHA_SATURATE:776};return a(b)}),c("Scene/BlendingState",["../Core/freezeObject","./BlendEquation","./BlendFunction"],function(a,b,c){"use strict";var d={DISABLED:a({enabled:!1}),ALPHA_BLEND:a({enabled:!0,equationRgb:b.ADD,equationAlpha:b.ADD,functionSourceRgb:c.SOURCE_ALPHA,functionSourceAlpha:c.SOURCE_ALPHA,functionDestinationRgb:c.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:c.ONE_MINUS_SOURCE_ALPHA}),PRE_MULTIPLIED_ALPHA_BLEND:a({enabled:!0,equationRgb:b.ADD,equationAlpha:b.ADD,functionSourceRgb:c.ONE,functionSourceAlpha:c.ONE,functionDestinationRgb:c.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:c.ONE_MINUS_SOURCE_ALPHA}),ADDITIVE_BLEND:a({enabled:!0,equationRgb:b.ADD,equationAlpha:b.ADD,functionSourceRgb:c.SOURCE_ALPHA,functionSourceAlpha:c.SOURCE_ALPHA,functionDestinationRgb:c.ONE,functionDestinationAlpha:c.ONE})};return a(d)}),c("Scene/Pass",["../Core/freezeObject"],function(a){"use strict";var b={OPAQUE:0,TRANSLUCENT:1,OVERLAY:2};return a(b)}),c("Scene/TextureAtlas",["../Core/BoundingRectangle","../Core/Cartesian2","../Core/createGuid","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/loadImage","../Core/PixelFormat","../Core/RuntimeError","../ThirdParty/when"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,c,e,f,g){this.bottomLeft=d(a,b.ZERO),this.topRight=d(c,b.ZERO),this.childNode1=e,this.childNode2=f,this.imageIndex=g}function n(a,c){var d=a.numberOfImages,f=2;if(d>0){var g=a._texture.width,h=a._texture.height,i=f*(g+c.width+a._borderWidthInPixels),j=f*(h+c.height+a._borderWidthInPixels),k=g/i,l=h/j,n=new m(new b(g+a._borderWidthInPixels,0),new b(i,h)),o=new m(new b,new b(i,h),a._root,n),p=new m(new b(0,h+a._borderWidthInPixels),new b(i,j)),q=new m(new b,new b(i,j),o,p);a._root=q;for(var r=0;r<a._textureCoordinates.length;r++){var s=a._textureCoordinates[r];e(s)&&(s.x*=k,s.y*=l,s.width*=k,s.height*=l)}var t=a._context.createTexture2D({width:i,height:j,pixelFormat:a._pixelFormat}),u=a._context.createFramebuffer({colorTextures:[a._texture]});u._bind(),t.copyFromFramebuffer(0,0,0,0,g,h),u._unBind(),u.destroy(),a._texture=t}else{var v=f*(c.width+a._borderWidthInPixels),w=f*(c.height+a._borderWidthInPixels);a._texture=a._texture&&a._texture.destroy(),a._texture=a._context.createTexture2D({width:v,height:w,pixelFormat:a._pixelFormat}),a._root=new m(new b,new b(v,w))}}function o(a,c,d){if(!e(c))return void 0;if(!e(c.childNode1)&&!e(c.childNode2)){if(e(c.imageIndex))return void 0;var f=c.topRight.x-c.bottomLeft.x,g=c.topRight.y-c.bottomLeft.y,h=f-d.width,i=g-d.height;if(0>h||0>i)return void 0;if(0===h&&0===i)return c;if(h>i){c.childNode1=new m(new b(c.bottomLeft.x,c.bottomLeft.y),new b(c.bottomLeft.x+d.width,c.topRight.y));var j=c.bottomLeft.x+d.width+a._borderWidthInPixels;j<c.topRight.x&&(c.childNode2=new m(new b(j,c.bottomLeft.y),new b(c.topRight.x,c.topRight.y)))}else{c.childNode1=new m(new b(c.bottomLeft.x,c.bottomLeft.y),new b(c.topRight.x,c.bottomLeft.y+d.height));var k=c.bottomLeft.y+d.height+a._borderWidthInPixels;k<c.topRight.y&&(c.childNode2=new m(new b(c.bottomLeft.x,k),new b(c.topRight.x,c.topRight.y)))}return o(a,c.childNode1,d)}return o(a,c.childNode1,d)||o(a,c.childNode2,d)}function p(b,d,f){var g=o(b,b._root,d);if(e(g)){g.imageIndex=f;var h=b._texture.width,i=b._texture.height,j=g.topRight.x-g.bottomLeft.x,k=g.topRight.y-g.bottomLeft.y,l=g.bottomLeft.x/h,m=g.bottomLeft.y/i,q=j/h,r=k/i;b._textureCoordinates[f]=new a(l,m,q,r),b._texture.copyFrom(d,g.bottomLeft.x,g.bottomLeft.y)}else n(b,d),p(b,d,f);b._guid=c()}var q=new b(16,16),r=function(a){a=d(a,d.EMPTY_OBJECT);var e=d(a.borderWidthInPixels,1),f=d(a.initialSize,q);this._context=a.context,this._pixelFormat=d(a.pixelFormat,j.RGBA),this._borderWidthInPixels=e,this._textureCoordinates=[],this._guid=c(),this._idHash={},this._texture=this._context.createTexture2D({width:f.x,height:f.y,pixelFormat:this._pixelFormat}),this._root=new m(new b,new b(f.x,f.y))};return f(r.prototype,{borderWidthInPixels:{get:function(){return this._borderWidthInPixels}},textureCoordinates:{get:function(){return this._textureCoordinates}},texture:{get:function(){return this._texture}},numberOfImages:{get:function(){return this._textureCoordinates.length}},guid:{get:function(){return this._guid}}}),r.prototype.addImage=function(a,b){var c=this._idHash[a];if(e(c))return c;"function"==typeof b?b=b(a):"string"==typeof b&&(b=i(b));var d=this;return c=l(b,function(a){if(d.isDestroyed())return-1;var b=d.numberOfImages;return p(d,a,b),b}),this._idHash[a]=c,c},r.prototype.addSubRegion=function(b,d){var f=this._idHash[b];if(!e(f))throw new k('image with id "'+b+'" not found in the atlas.');var g=this;return l(f,function(b){if(-1===b)return-1;var e=g._texture.width,f=g._texture.height,h=g.numberOfImages,i=g._textureCoordinates[b],j=i.x+d.x/e,k=i.y+d.y/f,l=d.width/e,m=d.height/f;return g._textureCoordinates.push(new a(j,k,l,m)),g._guid=c(),h})},r.prototype.isDestroyed=function(){return!1},r.prototype.destroy=function(){return this._texture=this._texture&&this._texture.destroy(),g(this)},r}),c("Scene/BillboardCollection",["../Core/AttributeCompression","../Core/BoundingSphere","../Core/Cartesian2","../Core/Cartesian3","../Core/Color","../Core/ComponentDatatype","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/EncodedCartesian3","../Core/IndexDatatype","../Core/Math","../Core/Matrix4","../Renderer/BufferUsage","../Renderer/DrawCommand","../Renderer/ShaderSource","../Renderer/VertexArrayFacade","../Shaders/BillboardCollectionFS","../Shaders/BillboardCollectionVS","./Billboard","./BlendingState","./HorizontalOrigin","./Pass","./SceneMode","./TextureAtlas"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){"use strict";function B(a){if(a._billboardsRemoved){a._billboardsRemoved=!1;for(var b=[],c=a._billboards,d=c.length,e=0,f=0;d>e;++e){var g=c[e];g&&(g._index=f++,b.push(g))}a._billboards=b}}function C(a){var b=16384,c=a.cache.billboardCollection_indexBuffer;if(h(c))return c;for(var d=6*b,e=new Uint16Array(d),f=0,g=0;d>f;f+=6,g+=4)e[f]=g,e[f+1]=g+1,e[f+2]=g+2,e[f+3]=g+0,e[f+4]=g+2,e[f+5]=g+3;return c=a.createIndexBuffer(e,p.STATIC_DRAW,m.UNSIGNED_SHORT),c.vertexArrayDestroyable=!1,a.cache.billboardCollection_indexBuffer=c,c}function D(a,b,c){return new s(a,[{index:ca.positionHighAndScale,componentsPerAttribute:4,componentDatatype:f.FLOAT,usage:c[Q]},{index:ca.positionLowAndRotation,componentsPerAttribute:4,componentDatatype:f.FLOAT,usage:c[Q]},{index:ca.compressedAttribute0,componentsPerAttribute:4,componentDatatype:f.FLOAT,usage:c[R]},{index:ca.compressedAttribute1,componentsPerAttribute:4,componentDatatype:f.FLOAT,usage:c[_]},{index:ca.compressedAttribute2,componentsPerAttribute:4,componentDatatype:f.FLOAT,usage:c[X]},{index:ca.eyeOffset,componentsPerAttribute:3,componentDatatype:f.FLOAT,usage:c[S]},{index:ca.scaleByDistance,componentsPerAttribute:4,componentDatatype:f.FLOAT,usage:c[$]},{index:ca.pixelOffsetScaleByDistance,componentsPerAttribute:4,componentDatatype:f.FLOAT,usage:c[aa]}],4*b)}function E(a,c,d,e,f){var g=4*f._index,h=f._getActualPosition();a._mode===z.SCENE3D&&(b.expand(a._baseVolume,h,a._baseVolume),a._boundingVolumeDirty=!0),l.fromCartesian(h,ea);var i=f.scale,j=f.rotation;0!==j&&(a._shaderRotation=!0),a._maxScale=Math.max(a._maxScale,i);var k=e[ca.positionHighAndScale],m=ea.high;k(g+0,m.x,m.y,m.z,i),k(g+1,m.x,m.y,m.z,i),k(g+2,m.x,m.y,m.z,i),k(g+3,m.x,m.y,m.z,i);var n=e[ca.positionLowAndRotation],o=ea.low;n(g+0,o.x,o.y,o.z,j),n(g+1,o.x,o.y,o.z,j),n(g+2,o.x,o.y,o.z,j),n(g+3,o.x,o.y,o.z,j)}function F(b,c,d,e,f){var g=4*f._index,h=f.pixelOffset,i=h.x,j=h.y,k=f._translate,l=k.x,m=k.y;b._maxPixelOffset=Math.max(b._maxPixelOffset,Math.abs(i+l),Math.abs(-j+m));var o=f.horizontalOrigin,p=f.verticalOrigin,q=f.show;0===f.color.alpha&&(q=!1),b._allHorizontalCenter=b._allHorizontalCenter&&o===x.CENTER;var r=0,s=0,t=0,u=0,v=f._imageIndex;if(-1!==v){var w=d[v];r=w.x,s=w.y,t=w.width,u=w.height}var y=r+t,z=s+u,A=Math.floor(n.clamp(i,-ga,ga)+ga)*ja;A+=(o+1)*ka,A+=(p+1)*la,A+=(q?1:0)*ma;var B=Math.floor(n.clamp(j,-ga,ga)+ga)*ia,C=Math.floor(n.clamp(l,-ga,ga)+ga)*ia,D=(n.clamp(m,-ga,ga)+ga)*na,E=Math.floor(D),F=Math.floor((D-E)*ia);B+=E,C+=F,fa.x=r,fa.y=s;var G=a.compressTextureCoordinates(fa);fa.x=y;var H=a.compressTextureCoordinates(fa);fa.y=z;var I=a.compressTextureCoordinates(fa);fa.x=r;var J=a.compressTextureCoordinates(fa),K=e[ca.compressedAttribute0];K(g+0,A+oa,B,C,G),K(g+1,A+pa,B,C,H),K(g+2,A+qa,B,C,I),K(g+3,A+ra,B,C,J)}function G(b,c,e,f,i){var j=4*i._index,k=i.alignedAxis;d.equals(k,d.ZERO)||(b._shaderAlignedAxis=!0);var l=0,m=1,o=1,p=1,q=i.translucencyByDistance;h(q)&&(l=q.near,m=q.nearValue,o=q.far,p=q.farValue,(1!==m||1!==p)&&(b._shaderTranslucencyByDistance=!0));var r=0,s=i._imageIndex;if(-1!==s){var t=e[s];r=t.width}var u=b._textureAtlas.texture.width,v=Math.ceil(.5*g(i.width,u*r));b._maxSize=Math.max(b._maxSize,v);var w=n.clamp(v,0,ha),x=0;Math.abs(d.magnitudeSquared(k)-1)<n.EPSILON6&&(x=a.octEncodeFloat(k)),m=n.clamp(m,0,1),m=1===m?255:0|255*m,w=w*ia+m,p=n.clamp(p,0,1),p=1===p?255:0|255*p,x=x*ia+p;var y=f[ca.compressedAttribute1];y(j+0,w,x,l,o),y(j+1,w,x,l,o),y(j+2,w,x,l,o),y(j+3,w,x,l,o)}function H(a,b,c,d,f){var h=4*f._index,i=f.color,j=f.getPickId(b).color,k=0,l=f._imageIndex;if(-1!==l){var m=c[l];k=m.height}var n=a._textureAtlas.texture.dimensions,o=Math.ceil(.5*g(f.height,n.y*k));a._maxSize=Math.max(a._maxSize,o);var p=e.floatToByte(i.red),q=e.floatToByte(i.green),r=e.floatToByte(i.blue),s=p*ha+q*ia+r;p=e.floatToByte(j.red),q=e.floatToByte(j.green),r=e.floatToByte(j.blue);var t=p*ha+q*ia+r,u=e.floatToByte(i.alpha)*ia+e.floatToByte(j.alpha),v=d[ca.compressedAttribute2];v(h+0,s,t,u,o),v(h+1,s,t,u,o),v(h+2,s,t,u,o),v(h+3,s,t,u,o)}function I(a,b,c,d,e){var f=4*e._index,g=e.eyeOffset;a._maxEyeOffset=Math.max(a._maxEyeOffset,Math.abs(g.x),Math.abs(g.y),Math.abs(g.z));var h=d[ca.eyeOffset];h(f+0,g.x,g.y,g.z),h(f+1,g.x,g.y,g.z),h(f+2,g.x,g.y,g.z),h(f+3,g.x,g.y,g.z)}function J(a,b,c,d,e){var f=4*e._index,g=d[ca.scaleByDistance],i=0,j=1,k=1,l=1,m=e.scaleByDistance;h(m)&&(i=m.near,j=m.nearValue,k=m.far,l=m.farValue,(1!==j||1!==l)&&(a._shaderScaleByDistance=!0)),g(f+0,i,j,k,l),g(f+1,i,j,k,l),g(f+2,i,j,k,l),g(f+3,i,j,k,l)}function K(a,b,c,d,e){var f=4*e._index,g=d[ca.pixelOffsetScaleByDistance],i=0,j=1,k=1,l=1,m=e.pixelOffsetScaleByDistance;h(m)&&(i=m.near,j=m.nearValue,k=m.far,l=m.farValue,(1!==j||1!==l)&&(a._shaderPixelOffsetScaleByDistance=!0)),g(f+0,i,j,k,l),g(f+1,i,j,k,l),g(f+2,i,j,k,l),g(f+3,i,j,k,l)}function L(a,b,c,d,e){E(a,b,c,d,e),F(a,b,c,d,e),G(a,b,c,d,e),H(a,b,c,d,e),I(a,b,c,d,e),J(a,b,c,d,e),K(a,b,c,d,e)}function M(a,c,d,e,f,g){var i;e.mode===z.SCENE3D?(i=a._baseVolume,a._boundingVolumeDirty=!0):i=a._baseVolume2D;for(var j=[],k=0;d>k;++k){var l=c[k],m=l.position,n=v._computeActualPosition(m,e,f);h(n)&&(l._setActualPosition(n),g?j.push(n):b.expand(i,n,i))}g&&b.fromPoints(j,i)}function N(a,b){var c=b.mode,d=a._billboards,e=a._billboardsToUpdate,f=a._modelMatrix;a._createVertexArray||a._mode!==c||c!==z.SCENE3D&&!o.equals(f,a.modelMatrix)?(a._mode=c,o.clone(a.modelMatrix,f),a._createVertexArray=!0,(c===z.SCENE3D||c===z.SCENE2D||c===z.COLUMBUS_VIEW)&&M(a,d,d.length,b,f,!0)):c===z.MORPHING?M(a,d,d.length,b,f,!0):(c===z.SCENE2D||c===z.COLUMBUS_VIEW)&&M(a,e,a._billboardsToUpdateIndex,b,f,!1)}function O(a,b,c,e){var f=c.camera,g=f.frustum,h=d.subtract(f.positionWC,e.center,ta),i=d.multiplyByScalar(f.directionWC,d.dot(h,f.directionWC),ua),j=Math.max(0,d.magnitude(i)-e.radius);sa.x=b.drawingBufferWidth,sa.y=b.drawingBufferHeight;var k=g.getPixelSize(sa,j),l=Math.max(k.x,k.y),m=2*l*a._maxScale*a._maxSize;a._allHorizontalCenter&&(m*=.5);var n=l*a._maxPixelOffset+a._maxEyeOffset;e.radius+=m+n}var P=v.SHOW_INDEX,Q=v.POSITION_INDEX,R=v.PIXEL_OFFSET_INDEX,S=v.EYE_OFFSET_INDEX,T=v.HORIZONTAL_ORIGIN_INDEX,U=v.VERTICAL_ORIGIN_INDEX,V=v.SCALE_INDEX,W=v.IMAGE_INDEX_INDEX,X=v.COLOR_INDEX,Y=v.ROTATION_INDEX,Z=v.ALIGNED_AXIS_INDEX,$=v.SCALE_BY_DISTANCE_INDEX,_=v.TRANSLUCENCY_BY_DISTANCE_INDEX,aa=v.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX,ba=v.NUMBER_OF_PROPERTIES,ca={positionHighAndScale:0,positionLowAndRotation:1,compressedAttribute0:2,compressedAttribute1:3,compressedAttribute2:4,eyeOffset:5,scaleByDistance:6,pixelOffsetScaleByDistance:7},da=function(a){a=g(a,g.EMPTY_OBJECT),this._textureAtlas=void 0,this._textureAtlasGUID=void 0,this._destroyTextureAtlas=!0,this._sp=void 0,this._rs=void 0,this._vaf=void 0,this._spPick=void 0,this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!1,this._shaderRotation=!1,this._compiledShaderRotation=!1,this._compiledShaderRotationPick=!1,this._shaderAlignedAxis=!1,this._compiledShaderAlignedAxis=!1,this._compiledShaderAlignedAxisPick=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._compiledShaderScaleByDistancePick=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistancePick=!1,this._shaderPixelOffsetScaleByDistance=!1,this._compiledShaderPixelOffsetScaleByDistance=!1,this._compiledShaderPixelOffsetScaleByDistancePick=!1,this._propertiesChanged=new Uint32Array(ba),this._maxSize=0,this._maxEyeOffset=0,this._maxScale=1,this._maxPixelOffset=0,this._allHorizontalCenter=!0,this._baseVolume=new b,this._baseVolumeWC=new b,this._baseVolume2D=new b,this._boundingVolume=new b,this._boundingVolumeDirty=!1,this._colorCommands=[],this._pickCommands=[],this.modelMatrix=o.clone(g(a.modelMatrix,o.IDENTITY)),this._modelMatrix=o.clone(o.IDENTITY),this.debugShowBoundingVolume=g(a.debugShowBoundingVolume,!1),this._mode=z.SCENE3D,this._buffersUsage=[p.STATIC_DRAW,p.STATIC_DRAW,p.STATIC_DRAW,p.STATIC_DRAW,p.STATIC_DRAW,p.STATIC_DRAW,p.STATIC_DRAW,p.STATIC_DRAW,p.STATIC_DRAW,p.STATIC_DRAW,p.STATIC_DRAW,p.STATIC_DRAW,p.STATIC_DRAW,p.STATIC_DRAW];var c=this;this._uniforms={u_atlas:function(){return c._textureAtlas.texture}}};i(da.prototype,{length:{get:function(){return B(this),this._billboards.length}},textureAtlas:{get:function(){return this._textureAtlas},set:function(a){this._textureAtlas!==a&&(this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._textureAtlas=a,this._createVertexArray=!0)}},destroyTextureAtlas:{get:function(){return this._destroyTextureAtlas},set:function(a){this._destroyTextureAtlas=a}}}),da.prototype.add=function(a){var b=new v(a,this);return b._index=this._billboards.length,this._billboards.push(b),this._createVertexArray=!0,b},da.prototype.remove=function(a){
return this.contains(a)?(this._billboards[a._index]=null,this._billboardsRemoved=!0,this._createVertexArray=!0,a._destroy(),!0):!1},da.prototype.removeAll=function(){this._destroyBillboards(),this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!0},da.prototype._updateBillboard=function(a,b){a._dirty||(this._billboardsToUpdate[this._billboardsToUpdateIndex++]=a),++this._propertiesChanged[b]},da.prototype.contains=function(a){return h(a)&&a._billboardCollection===this},da.prototype.get=function(a){return B(this),this._billboards[a]},da.prototype.computeNewBuffersUsage=function(){for(var a=this._buffersUsage,b=!1,c=this._propertiesChanged,d=0;ba>d;++d){var e=0===c[d]?p.STATIC_DRAW:p.STREAM_DRAW;b=b||a[d]!==e,a[d]=e}return b};var ea=new l,fa=new c,ga=32768,ha=65536,ia=256,ja=128,ka=32,la=8,ma=4,na=1/256,oa=0,pa=2,qa=3,ra=1,sa=new c,ta=new d,ua=new d;return da.prototype.update=function(a,c,d){var e=this._billboards,f=e.length,g=this._textureAtlas;if(!h(g)){g=this._textureAtlas=new A({context:a});for(var i=0;f>i;++i)e[i]._loadImage()}var j=g.textureCoordinates;if(0!==j.length){B(this),N(this,c),e=this._billboards,f=e.length;var k=this._billboardsToUpdate,l=this._billboardsToUpdateIndex,m=this._propertiesChanged,n=g.guid,p=this._createVertexArray||this._textureAtlasGUID!==n;this._textureAtlasGUID=n;var s,v=c.passes,x=v.pick;if(p||!x&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(var M=0;ba>M;++M)m[M]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),f>0){this._vaf=D(a,f,this._buffersUsage),s=this._vaf.writers;for(var da=0;f>da;++da){var ea=this._billboards[da];ea._dirty=!1,L(this,a,j,s,ea)}this._vaf.commit(C(a))}this._billboardsToUpdateIndex=0}else if(l>0){var fa=[];if((m[Q]||m[Y]||m[V])&&fa.push(E),(m[W]||m[R]||m[T]||m[U]||m[P])&&fa.push(F),(m[W]||m[Z]||m[_])&&fa.push(G),(m[W]||m[X])&&fa.push(H),m[S]&&fa.push(I),m[$]&&fa.push(J),m[aa]&&fa.push(K),s=this._vaf.writers,l/f>.1){for(var ga=0;l>ga;++ga){var ha=k[ga];ha._dirty=!1;for(var ia=0;ia<fa.length;++ia)fa[ia](this,a,j,s,ha)}this._vaf.commit(C(a))}else{for(var ja=0;l>ja;++ja){var ka=k[ja];ka._dirty=!1;for(var la=0;la<fa.length;++la)fa[la](this,a,j,s,ka);this._vaf.subCommit(4*ka._index,4)}this._vaf.endSubCommits()}this._billboardsToUpdateIndex=0}if(l>1.5*f&&(k.length=f),h(this._vaf)&&h(this._vaf.va)){this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,b.transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));var ma,na=o.IDENTITY;c.mode===z.SCENE3D?(na=this.modelMatrix,ma=b.clone(this._baseVolumeWC,this._boundingVolume)):ma=b.clone(this._baseVolume2D,this._boundingVolume),O(this,a,c,ma);var oa,pa,qa,ra,sa,ta;if(v.render){var ua=this._colorCommands;for(h(this._rs)||(this._rs=a.createRenderState({depthTest:{enabled:!0},blending:w.ALPHA_BLEND})),(!h(this._sp)||this._shaderRotation&&!this._compiledShaderRotation||this._shaderAlignedAxis&&!this._compiledShaderAlignedAxis||this._shaderScaleByDistance&&!this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance&&!this._compiledShaderTranslucencyByDistance||this._shaderPixelOffsetScaleByDistance&&!this._compiledShaderPixelOffsetScaleByDistance)&&(sa=new r({sources:[u]}),this._shaderRotation&&sa.defines.push("ROTATION"),this._shaderAlignedAxis&&sa.defines.push("ALIGNED_AXIS"),this._shaderScaleByDistance&&sa.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&sa.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderPixelOffsetScaleByDistance&&sa.defines.push("EYE_DISTANCE_PIXEL_OFFSET"),this._sp=a.replaceShaderProgram(this._sp,sa,t,ca),this._compiledShaderRotation=this._shaderRotation,this._compiledShaderAlignedAxis=this._shaderAlignedAxis,this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderPixelOffsetScaleByDistance=this._shaderPixelOffsetScaleByDistance),oa=this._vaf.va,pa=oa.length,ua.length=pa,ra=0;pa>ra;++ra)qa=ua[ra],h(qa)||(qa=ua[ra]=new q({pass:y.OPAQUE,owner:this})),qa.boundingVolume=ma,qa.modelMatrix=na,qa.count=oa[ra].indicesCount,qa.shaderProgram=this._sp,qa.uniformMap=this._uniforms,qa.vertexArray=oa[ra].va,qa.renderState=this._rs,qa.debugShowBoundingVolume=this.debugShowBoundingVolume,d.push(qa)}if(x){var va=this._pickCommands;for((!h(this._spPick)||this._shaderRotation&&!this._compiledShaderRotationPick||this._shaderAlignedAxis&&!this._compiledShaderAlignedAxisPick||this._shaderScaleByDistance&&!this._compiledShaderScaleByDistancePick||this._shaderTranslucencyByDistance&&!this._compiledShaderTranslucencyByDistancePick||this._shaderPixelOffsetScaleByDistance&&!this._compiledShaderPixelOffsetScaleByDistancePick)&&(sa=new r({defines:["RENDER_FOR_PICK"],sources:[u]}),this._shaderRotation&&sa.defines.push("ROTATION"),this._shaderAlignedAxis&&sa.defines.push("ALIGNED_AXIS"),this._shaderScaleByDistance&&sa.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&sa.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderPixelOffsetScaleByDistance&&sa.defines.push("EYE_DISTANCE_PIXEL_OFFSET"),ta=new r({defines:["RENDER_FOR_PICK"],sources:[t]}),this._spPick=a.replaceShaderProgram(this._spPick,sa,ta,ca),this._compiledShaderRotationPick=this._shaderRotation,this._compiledShaderAlignedAxisPick=this._shaderAlignedAxis,this._compiledShaderScaleByDistancePick=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistancePick=this._shaderTranslucencyByDistance,this._compiledShaderPixelOffsetScaleByDistancePick=this._shaderPixelOffsetScaleByDistance),oa=this._vaf.va,pa=oa.length,va.length=pa,ra=0;pa>ra;++ra)qa=va[ra],h(qa)||(qa=va[ra]=new q({pass:y.OPAQUE,owner:this})),qa.boundingVolume=ma,qa.modelMatrix=na,qa.count=oa[ra].indicesCount,qa.shaderProgram=this._spPick,qa.uniformMap=this._uniforms,qa.vertexArray=oa[ra].va,qa.renderState=this._rs,d.push(qa)}}}},da.prototype.isDestroyed=function(){return!1},da.prototype.destroy=function(){return this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),this._destroyBillboards(),j(this)},da.prototype._destroyBillboards=function(){for(var a=this._billboards,b=a.length,c=0;b>c;++c)a[c]&&a[c]._destroy()},da}),c("DataSources/Property",["../Core/defined","../Core/defineProperties","../Core/DeveloperError"],function(a,b,c){"use strict";var d=function(){c.throwInstantiationError()};return b(d.prototype,{isConstant:{get:c.throwInstantiationError},definitionChanged:{get:c.throwInstantiationError}}),d.prototype.getValue=c.throwInstantiationError,d.prototype.equals=c.throwInstantiationError,d.equals=function(b,c){return b===c||a(b)&&b.equals(c)},d.arrayEquals=function(b,c){if(b===c)return!0;if(!a(b)||!a(c)||b.length!==c.length)return!1;for(var e=b.length,f=0;e>f;f++)if(!d.equals(b[f],c[f]))return!1;return!0},d.isConstant=function(b){return!a(b)||b.isConstant},d.getValueOrUndefined=function(b,c,d){return a(b)?b.getValue(c,d):void 0},d.getValueOrDefault=function(b,c,d,e){var f;return a(b)&&(f=b.getValue(c,e)),a(f)||(f=d),f},d.getValueOrClonedDefault=function(b,c,d,e){var f;return a(b)&&(f=b.getValue(c,e)),a(f)||(f=d.clone(f)),f},d}),c("DataSources/BillboardVisualizer",["../Core/AssociativeArray","../Core/Cartesian2","../Core/Cartesian3","../Core/Color","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Core/NearFarScalar","../Scene/BillboardCollection","../Scene/HorizontalOrigin","../Scene/VerticalOrigin","./Property"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,b){if(e(a)){var c=a.billboard;e(c)&&(a.billboard=void 0,c.show=!1,c.image=void 0,b.push(c._index))}}var n=d.WHITE,o=c.ZERO,p=b.ZERO,q=1,r=0,s=c.ZERO,t=j.CENTER,u=k.CENTER,v=new c,w=new d,x=new c,y=new b,z=new h,A=new h,B=new h,C=function(a){this.entity=a,this.billboard=void 0},D=function(b,c){c.collectionChanged.addEventListener(D.prototype._onCollectionChanged,this),this._scene=b,this._unusedIndexes=[],this._billboardCollection=void 0,this._entityCollection=c,this._items=new a,this._onCollectionChanged(c,c.entities,[],[])};return D.prototype.update=function(a){for(var b=this._items.values,c=this._unusedIndexes,d=0,f=b.length;f>d;d++){var g,h=b[d],j=h.entity,k=j._billboard,C=h.billboard,D=j.isAvailable(a)&&l.getValueOrDefault(k._show,a,!0);if(D&&(v=l.getValueOrUndefined(j._position,a,v),g=l.getValueOrUndefined(k._image,a),D=e(v)&&e(g)),D){if(!e(C)){var E=this._billboardCollection;e(E)||(E=new i,this._billboardCollection=E,this._scene.primitives.add(E));var F=c.length;C=F>0?E.get(c.pop()):E.add(),C.id=j,C.image=void 0,h.billboard=C}C.show=D,C.image=g,C.position=v,C.color=l.getValueOrDefault(k._color,a,n,w),C.eyeOffset=l.getValueOrDefault(k._eyeOffset,a,o,x),C.pixelOffset=l.getValueOrDefault(k._pixelOffset,a,p,y),C.scale=l.getValueOrDefault(k._scale,a,q),C.rotation=l.getValueOrDefault(k._rotation,a,r),C.alignedAxis=l.getValueOrDefault(k._alignedAxis,a,s),C.horizontalOrigin=l.getValueOrDefault(k._horizontalOrigin,a,t),C.verticalOrigin=l.getValueOrDefault(k._verticalOrigin,a,u),C.width=l.getValueOrUndefined(k._width,a),C.height=l.getValueOrUndefined(k._height,a),C.scaleByDistance=l.getValueOrUndefined(k._scaleByDistance,a,z),C.translucencyByDistance=l.getValueOrUndefined(k._translucencyByDistance,a,A),C.pixelOffsetScaleByDistance=l.getValueOrUndefined(k._pixelOffsetScaleByDistance,a,B)}else m(h,c)}return!0},D.prototype.isDestroyed=function(){return!1},D.prototype.destroy=function(){return this._entityCollection.collectionChanged.removeEventListener(D.prototype._onCollectionChanged,this),e(this._billboardCollection)&&this._scene.primitives.remove(this._billboardCollection),f(this)},D.prototype._onCollectionChanged=function(a,b,c,d){var f,g,h=this._unusedIndexes,i=this._items;for(f=b.length-1;f>-1;f--)g=b[f],e(g._billboard)&&e(g._position)&&i.set(g.id,new C(g));for(f=d.length-1;f>-1;f--)g=d[f],e(g._billboard)&&e(g._position)?i.contains(g.id)||i.set(g.id,new C(g)):(m(i.get(g.id),h),i.remove(g.id));for(f=c.length-1;f>-1;f--)g=c[f],m(i.get(g.id),h),i.remove(g.id)},D}),c("DataSources/CallbackProperty",["../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event"],function(a,b,c,d){"use strict";var e=function(a,b){this._callback=void 0,this._isConstant=void 0,this._definitionChanged=new d,this.setCallback(a,b)};return b(e.prototype,{isConstant:{get:function(){return this._isConstant}},definitionChanged:{get:function(){return this._definitionChanged}}}),e.prototype.getValue=function(a,b){return this._callback(a,b)},e.prototype.setCallback=function(a,b){var c=this._callback!==a||this._isConstant!==b;this._callback=a,this._isConstant=b,c&&this._definitionChanged.raiseEvent(this)},e.prototype.equals=function(a){return this===a||a instanceof e&&this._callback===a._callback&&this._isConstant===a._isConstant},e}),c("DataSources/ConstantProperty",["../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/isArray"],function(a,b,c,d){"use strict";var e=function(a){this._value=void 0,this._simple=!0,this._definitionChanged=new c,this.setValue(a)};return a(e.prototype,{isConstant:{value:!0},definitionChanged:{get:function(){return this._definitionChanged}}}),e.prototype.getValue=function(a,b){return this._simple?this._value:this._value.clone(b)},e.prototype.setValue=function(a){var b=this._value,c=this._simple;(c&&b!==a||!c&&!b.equals(a))&&(c="object"!=typeof a||d(a),this._value=c?a:a.clone(),this._simple=c,this._definitionChanged.raiseEvent(this))},e.prototype.equals=function(a){return this===a||a instanceof e&&(this._simple&&this._value===a._value||!this._simple&&this._value.equals(a._value))},e}),c("DataSources/ColorMaterialProperty",["../Core/Color","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./ConstantProperty","./createPropertyDescriptor","./Property"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(a){this._definitionChanged=new e,this._color=void 0,this._colorSubscription=void 0,this.color=a};return i.fromColor=function(a){return new i(new f(a))},c(i.prototype,{isConstant:{get:function(){return h.isConstant(this._color)}},definitionChanged:{get:function(){return this._definitionChanged}},color:g("color")}),i.prototype.getType=function(){return"Color"},i.prototype.getValue=function(c,d){return b(d)||(d={}),d.color=h.getValueOrClonedDefault(this._color,c,a.WHITE,d.color),d},i.prototype.equals=function(a){return this===a||a instanceof i&&h.equals(this._color,a._color)},i.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},i}),c("DataSources/Entity",["../Core/createGuid","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./createPropertyDescriptor"],function(a,b,c,d,e,f,g){"use strict";var h=function(b){c(b)||(b=a()),this._availability=void 0,this._id=b,this._definitionChanged=new f,this._name=void 0,this._parent=void 0,this._propertyNames=["billboard","description","ellipse","ellipsoid","label","model","orientation","path","point","polygon","polyline","position","rectangle","viewFrom","wall"],this._billboard=void 0,this._billboardSubscription=void 0,this._description=void 0,this._descriptionSubscription=void 0,this._ellipse=void 0,this._ellipseSubscription=void 0,this._ellipsoid=void 0,this._ellipsoidSubscription=void 0,this._label=void 0,this._labelSubscription=void 0,this._model=void 0,this._modelSubscription=void 0,this._orientation=void 0,this._orientationSubscription=void 0,this._path=void 0,this._pathSubscription=void 0,this._point=void 0,this._pointSubscription=void 0,this._polygon=void 0,this._polygonSubscription=void 0,this._polyline=void 0,this._polylineSubscription=void 0,this._position=void 0,this._positionSubscription=void 0,this._rectangle=void 0,this._rectangleSubscription=void 0,this._viewFrom=void 0,this._viewFromSubscription=void 0,this._wall=void 0,this._wallSubscription=void 0};return d(h.prototype,{availability:g("availability"),id:{get:function(){return this._id}},definitionChanged:{get:function(){return this._definitionChanged}},name:{configurable:!1,get:function(){return this._name},set:function(a){var b=this._name;b!==a&&(this._name=a,this._definitionChanged.raiseEvent(this,"name",a,b))}},parent:g("parent"),propertyNames:{get:function(){return this._propertyNames}},billboard:g("billboard"),description:g("description"),ellipse:g("ellipse"),ellipsoid:g("ellipsoid"),label:g("label"),model:g("model"),orientation:g("orientation"),path:g("path"),point:g("point"),polygon:g("polygon"),polyline:g("polyline"),position:g("position"),rectangle:g("rectangle"),viewFrom:g("viewFrom"),wall:g("wall")}),h.prototype.isAvailable=function(a){var b=this._availability;return!c(b)||b.contains(a)},h.prototype.addProperty=function(a){var b=this._propertyNames;b.push(a),Object.defineProperty(this,a,g(a,!0))},h.prototype.removeProperty=function(a){this._propertyNames,this._propertyNames.push(a),delete this[a]},h.prototype.merge=function(a){this.name=b(this.name,a.name),this.availability=b(a.availability,this.availability);for(var d=this._propertyNames,e=a._propertyNames,f=e.length,g=0;f>g;g++){var h=e[g],i=this[h],j=a[h];c(i)||-1!==d.indexOf(h)||this.addProperty(h),c(j)&&(c(i)?c(i.merge)&&i.merge(j):this[h]=c(j.merge)&&c(j.clone)?j.clone():j)}},h}),c("DataSources/EntityCollection",["../Core/AssociativeArray","../Core/createGuid","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/Iso8601","../Core/JulianDate","../Core/RuntimeError","../Core/TimeInterval","./Entity"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a){if(0===a._suspendCount){var b=a._addedEntities,c=a._removedEntities,d=a._changedEntities;(0!==d.length||0!==b.length||0!==c.length)&&(a._collectionChanged.raiseEvent(a,b.values,c.values,d.values),b.removeAll(),c.removeAll(),d.removeAll())}}var m=function(){this._entities=new a,this._addedEntities=new a,this._removedEntities=new a,this._changedEntities=new a,this._suspendCount=0,this._collectionChanged=new f,this._id=b()};return m.prototype.suspendEvents=function(){this._suspendCount++},m.prototype.resumeEvents=function(){this._suspendCount--,l(this)},m.collectionChangedEventCallback=void 0,d(m.prototype,{collectionChanged:{get:function(){return this._collectionChanged}},id:{get:function(){return this._id}},entities:{get:function(){return this._entities.values}}}),m.prototype.computeAvailability=function(){for(var a=g.MAXIMUM_VALUE,b=g.MINIMUM_VALUE,d=this._entities.values,e=0,f=d.length;f>e;e++){var i=d[e],k=i.availability;if(c(k)){var l=k.start,m=k.stop;h.lessThan(l,a)&&!l.equals(g.MINIMUM_VALUE)&&(a=l),h.greaterThan(m,b)&&!m.equals(g.MAXIMUM_VALUE)&&(b=m)}}return g.MAXIMUM_VALUE.equals(a)&&(a=g.MINIMUM_VALUE),g.MINIMUM_VALUE.equals(b)&&(b=g.MAXIMUM_VALUE),new j({start:a,stop:b})},m.prototype.add=function(a){var b=a.id,c=this._entities;if(c.contains(b))throw new i("An entity with id "+b+" already exists in this collection.");c.set(b,a),this._removedEntities,this._removedEntities.remove(b)||this._addedEntities.set(b,a),a.definitionChanged.addEventListener(m.prototype._onEntityDefinitionChanged,this),l(this)},m.prototype.remove=function(a){return this.removeById(a.id)},m.prototype.removeById=function(a){var b=this._entities,c=b.get(a);return this._entities.remove(a)?(this._addedEntities.remove(a)||(this._removedEntities.set(a,c),this._changedEntities.remove(a)),this._entities.remove(a),c.definitionChanged.removeEventListener(m.prototype._onEntityDefinitionChanged,this),l(this),!0):!1},m.prototype.removeAll=function(){for(var a=this._entities,b=a.length,d=a.values,e=this._addedEntities,f=this._removedEntities,g=0;b>g;g++){var h=d[g],i=h.id,j=e.get(i);c(j)||(h.definitionChanged.removeEventListener(m.prototype._onEntityDefinitionChanged,this),f.set(i,h))}a.removeAll(),e.removeAll(),this._changedEntities.removeAll(),l(this)},m.prototype.getById=function(a){return this._entities.get(a)},m.prototype.getOrCreateEntity=function(a){var b=this._entities.get(a);return c(b)||(b=new k(a),this.add(b)),b},m.prototype._onEntityDefinitionChanged=function(a){var b=a.id;this._addedEntities.contains(b)||this._changedEntities.set(b,a),l(this)},m}),c("DataSources/CompositeEntityCollection",["../Core/createGuid","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Math","./Entity","./EntityCollection"],function(a,b,c,d,e,f,g){"use strict";function h(a){for(var b=a.propertyNames,c=b.length,d=0;c>d;d++)a[b[d]]=void 0}function i(a,b,c,d){n[0]=c,n[1]=d.id,b[JSON.stringify(n)]=d.definitionChanged.addEventListener(o.prototype._onDefinitionChanged,a)}function j(a,b,c,d){n[0]=c,n[1]=d.id;var e=JSON.stringify(n);b[e](),b[e]=void 0}function k(a){if(a._shouldRecomposite=!0,0===a._suspendCount){var c,d,e,k,l,m,n=a._collections,p=n.length,q=a._collectionsCopy,r=q.length,s=a._composite,t=new g,u=a._eventHash;for(c=0;r>c;c++)for(l=q[c],l.collectionChanged.removeEventListener(o.prototype._onCollectionChanged,a),e=l.entities,m=l.id,k=e.length-1;k>-1;k--)d=e[k],j(a,u,m,d);for(c=p-1;c>=0;c--)for(l=n[c],l.collectionChanged.addEventListener(o.prototype._onCollectionChanged,a),e=l.entities,m=l.id,k=e.length-1;k>-1;k--){d=e[k],i(a,u,m,d);var v=t.getById(d.id);b(v)||(v=s.getById(d.id),b(v)?h(v):v=new f(d.id),t.add(v)),v.merge(d)}a._collectionsCopy=n.slice(0),s.suspendEvents(),s.removeAll();var w=t.entities;for(c=0;c<w.length;c++)s.add(w[c]);s.resumeEvents()}}function l(a,b){var c=a.indexOf(b);return c}function m(a,b,c){var d=a._collections;if(b=e.clamp(b,0,d.length-1),c=e.clamp(c,0,d.length-1),b!==c){var f=d[b];d[b]=d[c],d[c]=f,k(a)}}var n=new Array(2),o=function(c){this._composite=new g,this._suspendCount=0,this._collections=b(c)?c.slice():[],this._collectionsCopy=[],this._id=a(),this._eventHash={},k(this),this._shouldRecomposite=!1};return c(o.prototype,{collectionChanged:{get:function(){return this._composite._collectionChanged}},id:{get:function(){return this._id}},entities:{get:function(){return this._composite.entities}}}),o.prototype.addCollection=function(a,c){var d=b(c);d?this._collections.splice(c,0,a):(c=this._collections.length,this._collections.push(a)),k(this)},o.prototype.removeCollection=function(a){var b=this._collections.indexOf(a);return-1!==b?(this._collections.splice(b,1),k(this),!0):!1},o.prototype.removeAllCollections=function(){this._collections.length=0,k(this)},o.prototype.containsCollection=function(a){return-1!==this._collections.indexOf(a)},o.prototype.indexOfCollection=function(a){return this._collections.indexOf(a)},o.prototype.getCollection=function(a){return this._collections[a]},o.prototype.getCollectionsLength=function(){return this._collections.length},o.prototype.raiseCollection=function(a){var b=l(this._collections,a);m(this,b,b+1)},o.prototype.lowerCollection=function(a){var b=l(this._collections,a);m(this,b,b-1)},o.prototype.raiseCollectionToTop=function(a){var b=l(this._collections,a);b!==this._collections.length-1&&(this._collections.splice(b,1),this._collections.push(a),k(this))},o.prototype.lowerCollectionToBottom=function(a){var b=l(this._collections,a);0!==b&&(this._collections.splice(b,1),this._collections.splice(0,0,a),k(this))},o.prototype.suspendEvents=function(){this._suspendCount++,this._composite.suspendEvents()},o.prototype.resumeEvents=function(){this._suspendCount--,this._shouldRecomposite&&0===this._suspendCount&&(k(this),this._shouldRecomposite=!1),this._composite.resumeEvents()},o.prototype.computeAvailability=function(){return this._composite.computeAvailability()},o.prototype.getById=function(a){return this._composite.getById(a)},o.prototype._onCollectionChanged=function(a,c,d){var e=this._collectionsCopy,g=e.length,k=this._composite;k.suspendEvents();var l,m,n,o,p=d.length,q=this._eventHash,r=a.id;for(l=0;p>l;l++){var s=d[l];j(this,q,r,s);var t=s.id;for(m=g-1;m>=0;m--)n=e[m].getById(t),b(n)&&(b(o)||(o=k.getById(t),h(o)),o.merge(n));b(o)||k.removeById(t),o=void 0}var u=c.length;for(l=0;u>l;l++){var v=c[l];i(this,q,r,v);var w=v.id;for(m=g-1;m>=0;m--)n=e[m].getById(w),b(n)&&(b(o)||(o=k.getById(w),b(o)?h(o):(o=new f(w),k.add(o))),o.merge(n));o=void 0}k.resumeEvents()},o.prototype._onDefinitionChanged=function(a,c){for(var d=this._collections,e=this._composite,f=d.length,g=a.id,h=e.getById(g),i=h[c],j=!b(i),k=!0,l=f-1;l>=0;l--){var m=d[l].getById(a.id);if(b(m)){var n=m[c];if(b(n)){if(k){if(k=!1,!b(n.merge)||!b(n.clone)){i=n;break}i=n.clone(i)}i.merge(n)}}}j&&-1===h.propertyNames.indexOf(c)&&h.addProperty(c),h[c]=i},o}),c("DataSources/CompositeProperty",["../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/EventHelper","../Core/TimeIntervalCollection","./Property"],function(a,b,c,d,e,f,g){"use strict";function h(b,c,d,e){var f=function(){d.raiseEvent(b)},g=[];c.removeAll();for(var h=e.length,i=0;h>i;i++){var j=e.get(i);a(j.data)&&-1===g.indexOf(j.data)&&c.add(j.data.definitionChanged,f)}}var i=function(){this._eventHelper=new e,this._definitionChanged=new d,this._intervals=new f,this._intervals.changedEvent.addEventListener(i.prototype._intervalsChanged,this)};return b(i.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}}),i.prototype.getValue=function(b,c){var d=this._intervals.findDataForIntervalContainingDate(b);return a(d)?d.getValue(b,c):void 0},i.prototype.equals=function(a){return this===a||a instanceof i&&this._intervals.equals(a._intervals,g.equals)},i.prototype._intervalsChanged=function(){h(this,this._eventHelper,this._definitionChanged,this._intervals),this._definitionChanged.raiseEvent(this)},i}),c("DataSources/CompositeMaterialProperty",["../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./CompositeProperty","./Property"],function(a,b,c,d,e,f){"use strict";var g=function(){this._definitionChanged=new d,this._composite=new e,this._composite.definitionChanged.addEventListener(g.prototype._raiseDefinitionChanged,this)};return b(g.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite._intervals}}}),g.prototype.getType=function(b){var c=this._composite._intervals.findDataForIntervalContainingDate(b);return a(c)?c.getType(b):void 0},g.prototype.getValue=function(b,c){var d=this._composite._intervals.findDataForIntervalContainingDate(b);return a(d)?d.getValue(b,c):void 0},g.prototype.equals=function(a){return this===a||a instanceof g&&this._composite.equals(a._composite,f.equals)},g.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},g}),c("DataSources/CompositePositionProperty",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/ReferenceFrame","./CompositeProperty","./Property"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(b){this._referenceFrame=a(b,f.FIXED),this._definitionChanged=new e,this._composite=new g,this._composite.definitionChanged.addEventListener(i.prototype._raiseDefinitionChanged,this)};return c(i.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite.intervals}},referenceFrame:{get:function(){return this._referenceFrame},set:function(a){this._referenceFrame=a}}}),i.prototype.getValue=function(a,b){return this.getValueInReferenceFrame(a,f.FIXED,b)},i.prototype.getValueInReferenceFrame=function(a,c,d){var e=this._composite._intervals.findDataForIntervalContainingDate(a);return b(e)?e.getValueInReferenceFrame(a,c,d):void 0},i.prototype.equals=function(a){return this===a||a instanceof i&&this._referenceFrame===a._referenceFrame&&this._composite.equals(a._composite,h.equals)},i.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},i}),c("DataSources/PositionProperty",["../Core/Cartesian3","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Matrix3","../Core/ReferenceFrame","../Core/Transforms"],function(a,b,c,d,e,f,g){"use strict";var h=function(){d.throwInstantiationError()};c(h.prototype,{isConstant:{get:d.throwInstantiationError},definitionChanged:{get:d.throwInstantiationError},referenceFrame:{get:d.throwInstantiationError}}),h.prototype.getValue=d.throwInstantiationError,h.prototype.getValueInReferenceFrame=d.throwInstantiationError,h.prototype.equals=d.throwInstantiationError;var i=new e;return h.convertToReferenceFrame=function(c,d,h,j,k){if(!b(d))return d;if(b(k)||(k=new a),h===j)return a.clone(d,k);var l=g.computeIcrfToFixedMatrix(c,i);return b(l)||(l=g.computeTemeToPseudoFixedMatrix(c,i)),h===f.INERTIAL?e.multiplyByVector(l,d,k):h===f.FIXED?e.multiplyByVector(e.transpose(l,i),d,k):void 0},h}),c("DataSources/ConstantPositionProperty",["../Core/Cartesian3","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/ReferenceFrame","./PositionProperty"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(c,d){this._definitionChanged=new f,this._value=a.clone(c),this._referenceFrame=b(d,g.FIXED)};return d(i.prototype,{isConstant:{get:function(){return!c(this._value)||this._referenceFrame===g.FIXED}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}}),i.prototype.getValue=function(a,b){return this.getValueInReferenceFrame(a,g.FIXED,b)},i.prototype.setValue=function(b,d){var e=!1;a.equals(this._value,b)||(e=!0,this._value=a.clone(b)),c(d)&&this._referenceFrame!==d&&(e=!0,this._referenceFrame=d),e&&this._definitionChanged.raiseEvent(this)},i.prototype.getValueInReferenceFrame=function(a,b,c){return h.convertToReferenceFrame(a,this._value,this._referenceFrame,b,c)},i.prototype.equals=function(b){return this===b||b instanceof i&&a.equals(this._value,b._value)&&this._referenceFrame===b._referenceFrame},i}),c("Scene/LabelStyle",["../Core/freezeObject"],function(a){"use strict";var b={FILL:0,OUTLINE:1,FILL_AND_OUTLINE:2};return a(b)}),c("DataSources/DataSource",["../Core/defineProperties","../Core/DeveloperError"],function(a,b){"use strict";var c=function(){b.throwInstantiationError()};return a(c.prototype,{name:{get:b.throwInstantiationError},clock:{get:b.throwInstantiationError},entities:{get:b.throwInstantiationError},isLoading:{get:b.throwInstantiationError},changedEvent:{get:b.throwInstantiationError},errorEvent:{get:b.throwInstantiationError},loadingEvent:{get:b.throwInstantiationError}}),c.prototype.update=b.throwInstantiationError,c.setLoading=function(a,b){a._isLoading!==b&&(b?a._entityCollection.suspendEvents():a._entityCollection.resumeEvents(),a._isLoading=b,a._loading.raiseEvent(a,b))},c}),c("DataSources/DataSourceClock",["../Core/Clock","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/JulianDate","./createPropertyDescriptor"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(){this._startTime=void 0,this._stopTime=void 0,this._currentTime=void 0,this._clockRange=void 0,this._clockStep=void 0,this._multiplier=void 0,this._definitionChanged=new f};return d(i.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},startTime:h("startTime"),stopTime:h("stopTime"),currentTime:h("currentTime"),clockRange:h("clockRange"),clockStep:h("clockStep"),multiplier:h("multiplier")}),i.prototype.clone=function(a){return c(a)||(a=new i),a.startTime=this.startTime,a.stopTime=this.stopTime,a.currentTime=this.currentTime,a.clockRange=this.clockRange,a.clockStep=this.clockStep,a.multiplier=this.multiplier,a},i.prototype.equals=function(a){return this===a||c(a)&&g.equals(this.startTime,a.startTime)&&g.equals(this.stopTime,a.stopTime)&&g.equals(this.currentTime,a.currentTime)&&this.clockRange===a.clockRange&&this.clockStep===a.clockStep&&this.multiplier===a.multiplier},i.prototype.merge=function(a){this.startTime=b(this.startTime,a.startTime),this.stopTime=b(this.stopTime,a.stopTime),this.currentTime=b(this.currentTime,a.currentTime),this.clockRange=b(this.clockRange,a.clockRange),this.clockStep=b(this.clockStep,a.clockStep),this.multiplier=b(this.multiplier,a.multiplier)},i.prototype.getValue=function(b){return c(b)||(b=new a),b.startTime=this.startTime,b.stopTime=this.stopTime,b.clockRange=this.clockRange,b.clockStep=this.clockStep,b.multiplier=this.multiplier,b.currentTime=this.currentTime,b},i}),c("DataSources/EllipseGraphics",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./createPropertyDescriptor"],function(a,b,c,d,e,f){"use strict";var g=function(){this._semiMajorAxis=void 0,this._semiMajorAxisSubscription=void 0,this._semiMinorAxis=void 0,this._semiMinorAxisSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._show=void 0,this._showSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._numberOfVerticalLines=void 0,this._numberOfVerticalLinesSubscription=void 0,this._definitionChanged=new e};return c(g.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},semiMajorAxis:f("semiMajorAxis"),semiMinorAxis:f("semiMinorAxis"),
rotation:f("rotation"),show:f("show"),material:f("material"),height:f("height"),extrudedHeight:f("extrudedHeight"),granularity:f("granularity"),stRotation:f("stRotation"),fill:f("fill"),outline:f("outline"),outlineColor:f("outlineColor"),outlineWidth:f("outlineWidth"),numberOfVerticalLines:f("numberOfVerticalLines")}),g.prototype.clone=function(a){return b(a)||(a=new g),a.rotation=this.rotation,a.semiMajorAxis=this.semiMajorAxis,a.semiMinorAxis=this.semiMinorAxis,a.show=this.show,a.material=this.material,a.height=this.height,a.extrudedHeight=this.extrudedHeight,a.granularity=this.granularity,a.stRotation=this.stRotation,a.fill=this.fill,a.outline=this.outline,a.outlineColor=this.outlineColor,a.outlineWidth=this.outlineWidth,a.numberOfVerticalLines=this.numberOfVerticalLines,a},g.prototype.merge=function(b){this.rotation=a(this.rotation,b.rotation),this.semiMajorAxis=a(this.semiMajorAxis,b.semiMajorAxis),this.semiMinorAxis=a(this.semiMinorAxis,b.semiMinorAxis),this.show=a(this.show,b.show),this.material=a(this.material,b.material),this.height=a(this.height,b.height),this.extrudedHeight=a(this.extrudedHeight,b.extrudedHeight),this.granularity=a(this.granularity,b.granularity),this.stRotation=a(this.stRotation,b.stRotation),this.fill=a(this.fill,b.fill),this.outline=a(this.outline,b.outline),this.outlineColor=a(this.outlineColor,b.outlineColor),this.outlineWidth=a(this.outlineWidth,b.outlineWidth),this.numberOfVerticalLines=a(this.numberOfVerticalLines,b.numberOfVerticalLines)},g}),c("DataSources/EllipsoidGraphics",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./createPropertyDescriptor"],function(a,b,c,d,e,f){"use strict";var g=function(){this._show=void 0,this._showSubscription=void 0,this._radii=void 0,this._radiiSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._stackPartitions=void 0,this._stackPartitionsSubscription=void 0,this._slicePartitions=void 0,this._slicePartitionsSubscription=void 0,this._subdivisions=void 0,this._subdivisionsSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._definitionChanged=new e};return c(g.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:f("show"),radii:f("radii"),material:f("material"),fill:f("fill"),outline:f("outline"),outlineColor:f("outlineColor"),outlineWidth:f("outlineWidth"),stackPartitions:f("stackPartitions"),slicePartitions:f("slicePartitions"),subdivisions:f("subdivisions")}),g.prototype.clone=function(a){return b(a)||(a=new g),a.show=this.show,a.radii=this.radii,a.material=this.material,a.fill=this.fill,a.outline=this.outline,a.outlineColor=this.outlineColor,a.outlineWidth=this.outlineWidth,a.stackPartitions=this.stackPartitions,a.slicePartitions=this.slicePartitions,a.subdivisions=this.subdivisions,a},g.prototype.merge=function(b){this.show=a(this.show,b.show),this.radii=a(this.radii,b.radii),this.material=a(this.material,b.material),this.fill=a(this.fill,b.fill),this.outline=a(this.outline,b.outline),this.outlineColor=a(this.outlineColor,b.outlineColor),this.outlineWidth=a(this.outlineWidth,b.outlineWidth),this.stackPartitions=a(this.stackPartitions,b.stackPartitions),this.slicePartitions=a(this.slicePartitions,b.slicePartitions),this.subdivisions=a(this.subdivisions,b.subdivisions)},g}),c("DataSources/GridMaterialProperty",["../Core/Cartesian2","../Core/Color","../Core/defined","../Core/defineProperties","../Core/Event","./createPropertyDescriptor","./Property"],function(a,b,c,d,e,f,g){"use strict";var h=b.WHITE,i=.1,j=new a(8,8),k=new a(0,0),l=new a(1,1),m=function(){this._definitionChanged=new e,this._color=void 0,this._colorSubscription=void 0,this._cellAlpha=void 0,this._cellAlphaSubscription=void 0,this._lineCount=void 0,this._lineCountSubscription=void 0,this._lineThickness=void 0,this._lineThicknessSubscription=void 0,this._lineOffset=void 0,this._lineOffsetSubscription=void 0,this.color=void 0,this.cellAlpha=void 0,this.lineCount=void 0,this.lineThickness=void 0,this.lineOffset=void 0};return d(m.prototype,{isConstant:{get:function(){return g.isConstant(this._color)&&g.isConstant(this._cellAlpha)&&g.isConstant(this._lineCount)&&g.isConstant(this._lineThickness)&&g.isConstant(this._lineOffset)}},definitionChanged:{get:function(){return this._definitionChanged}},color:f("color"),cellAlpha:f("cellAlpha"),lineCount:f("lineCount"),lineThickness:f("lineThickness"),lineOffset:f("lineOffset")}),m.prototype.getType=function(){return"Grid"},m.prototype.getValue=function(a,b){return c(b)||(b={}),b.color=g.getValueOrClonedDefault(this._color,a,h,b.color),b.cellAlpha=g.getValueOrDefault(this._cellAlpha,a,i),b.lineCount=g.getValueOrClonedDefault(this._lineCount,a,j,b.lineCount),b.lineThickness=g.getValueOrClonedDefault(this._lineThickness,a,l,b.lineThickness),b.lineOffset=g.getValueOrClonedDefault(this._lineOffset,a,k,b.lineOffset),b},m.prototype.equals=function(a){return this===a||a instanceof m&&g.equals(this._color,a._color)&&g.equals(this._cellAlpha,a._cellAlpha)&&g.equals(this._lineCount,a._lineCount)&&g.equals(this._lineThickness,a._lineThickness)&&g.equals(this._lineOffset,a._lineOffset)},m.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},m}),c("DataSources/ImageMaterialProperty",["../Core/Cartesian2","../Core/defined","../Core/defineProperties","../Core/Event","./createPropertyDescriptor","./Property"],function(a,b,c,d,e,f){"use strict";var g=new a(1,1),h=function(){this._definitionChanged=new d,this._image=void 0,this._imageSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0};return c(h.prototype,{isConstant:{get:function(){return f.isConstant(this._image)&&f.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},image:e("image"),repeat:e("repeat")}),h.prototype.getType=function(){return"Image"},h.prototype.getValue=function(a,c){return b(c)||(c={}),c.image=f.getValueOrUndefined(this._image,a),c.repeat=f.getValueOrClonedDefault(this._repeat,a,g,c.repeat),c},h.prototype.equals=function(a){return this===a||a instanceof h&&f.equals(this._image,a._image)&&f.equals(this._repeat,a._repeat)},h.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},h}),c("DataSources/LabelGraphics",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./createPropertyDescriptor"],function(a,b,c,d,e,f){"use strict";var g=function(){this._text=void 0,this._textSubscription=void 0,this._font=void 0,this._fontSubscription=void 0,this._style=void 0,this._styleSubscription=void 0,this._fillColor=void 0,this._fillColorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._horizontalOrigin=void 0,this._horizontalOriginSubscription=void 0,this._verticalOrigin=void 0,this._verticalOriginSubscription=void 0,this._eyeOffset=void 0,this._eyeOffsetSubscription=void 0,this._pixelOffset=void 0,this._pixelOffsetSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._show=void 0,this._showSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._pixelOffsetScaleByDistance=void 0,this._pixelOffsetScaleByDistanceSubscription=void 0,this._definitionChanged=new e};return c(g.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},text:f("text"),font:f("font"),style:f("style"),fillColor:f("fillColor"),outlineColor:f("outlineColor"),outlineWidth:f("outlineWidth"),horizontalOrigin:f("horizontalOrigin"),verticalOrigin:f("verticalOrigin"),eyeOffset:f("eyeOffset"),pixelOffset:f("pixelOffset"),scale:f("scale"),show:f("show"),translucencyByDistance:f("translucencyByDistance"),pixelOffsetScaleByDistance:f("pixelOffsetScaleByDistance")}),g.prototype.clone=function(a){return b(a)||(a=new g),a.text=this.text,a.font=this.font,a.show=this.show,a.style=this.style,a.fillColor=this.fillColor,a.outlineColor=this.outlineColor,a.outlineWidth=this.outlineWidth,a.scale=this.scale,a.horizontalOrigin=this.horizontalOrigin,a.verticalOrigin=this.verticalOrigin,a.eyeOffset=this.eyeOffset,a.pixelOffset=this.pixelOffset,a.translucencyByDistance=this._translucencyByDistance,a.pixelOffsetScaleByDistance=this._pixelOffsetScaleByDistance,a},g.prototype.merge=function(b){this.text=a(this.text,b.text),this.font=a(this.font,b.font),this.show=a(this.show,b.show),this.style=a(this.style,b.style),this.fillColor=a(this.fillColor,b.fillColor),this.outlineColor=a(this.outlineColor,b.outlineColor),this.outlineWidth=a(this.outlineWidth,b.outlineWidth),this.scale=a(this.scale,b.scale),this.horizontalOrigin=a(this.horizontalOrigin,b.horizontalOrigin),this.verticalOrigin=a(this.verticalOrigin,b.verticalOrigin),this.eyeOffset=a(this.eyeOffset,b.eyeOffset),this.pixelOffset=a(this.pixelOffset,b.pixelOffset),this.translucencyByDistance=a(this._translucencyByDistance,b._translucencyByDistance),this.pixelOffsetScaleByDistance=a(this._pixelOffsetScaleByDistance,b._pixelOffsetScaleByDistance)},g}),c("DataSources/ModelGraphics",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./createPropertyDescriptor"],function(a,b,c,d,e,f){"use strict";var g=function(){this._show=void 0,this._showSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._minimumPixelSize=void 0,this._minimumPixelSizeSubscription=void 0,this._uri=void 0,this._uriSubscription=void 0,this._definitionChanged=new e};return c(g.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:f("show"),scale:f("scale"),minimumPixelSize:f("minimumPixelSize"),uri:f("uri")}),g.prototype.clone=function(a){return b(a)||(a=new g),a.show=this.show,a.scale=this.scale,a.minimumPixelSize=this.minimumPixelSize,a.uri=this.uri,a},g.prototype.merge=function(b){this.show=a(this.show,b.show),this.scale=a(this.scale,b.scale),this.minimumPixelSize=a(this.minimumPixelSize,b.minimumPixelSize),this.uri=a(this.uri,b.uri)},g}),c("DataSources/PathGraphics",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./createPropertyDescriptor"],function(a,b,c,d,e,f){"use strict";var g=function(){this._material=void 0,this._materialSubscription=void 0,this._show=void 0,this._showSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._resolution=void 0,this._resolutionSubscription=void 0,this._leadTime=void 0,this._leadTimeSubscription=void 0,this._trailTime=void 0,this._trailTimeSubscription=void 0,this._definitionChanged=new e};return c(g.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},material:f("material"),show:f("show"),width:f("width"),resolution:f("resolution"),leadTime:f("leadTime"),trailTime:f("trailTime")}),g.prototype.clone=function(a){return b(a)||(a=new g),a.material=this.material,a.width=this.width,a.resolution=this.resolution,a.show=this.show,a.leadTime=this.leadTime,a.trailTime=this.trailTime,a},g.prototype.merge=function(b){this.material=a(this.material,b.material),this.width=a(this.width,b.width),this.resolution=a(this.resolution,b.resolution),this.show=a(this.show,b.show),this.leadTime=a(this.leadTime,b.leadTime),this.trailTime=a(this.trailTime,b.trailTime)},g}),c("DataSources/PointGraphics",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./createPropertyDescriptor"],function(a,b,c,d,e,f){"use strict";var g=function(){this._color=void 0,this._colorSubscription=void 0,this._pixelSize=void 0,this._pixelSizeSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._show=void 0,this._showSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._definitionChanged=new e};return c(g.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},color:f("color"),pixelSize:f("pixelSize"),outlineColor:f("outlineColor"),outlineWidth:f("outlineWidth"),show:f("show"),scaleByDistance:f("scaleByDistance")}),g.prototype.clone=function(a){return b(a)||(a=new g),a.color=this.color,a.pixelSize=this.pixelSize,a.outlineColor=this.outlineColor,a.outlineWidth=this.outlineWidth,a.show=this.show,a.scaleByDistance=this.scaleByDistance,a},g.prototype.merge=function(b){this.color=a(this.color,b.color),this.pixelSize=a(this.pixelSize,b.pixelSize),this.outlineColor=a(this.outlineColor,b.outlineColor),this.outlineWidth=a(this.outlineWidth,b.outlineWidth),this.show=a(this.show,b.show),this.scaleByDistance=a(this.scaleByDistance,b.scaleByDistance)},g}),c("DataSources/PolygonGraphics",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./createPropertyDescriptor"],function(a,b,c,d,e,f){"use strict";var g=function(){this._show=void 0,this._showSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._perPositionHeight=void 0,this._perPositionHeightSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._definitionChanged=new e};return c(g.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:f("show"),material:f("material"),positions:f("positions"),height:f("height"),extrudedHeight:f("extrudedHeight"),granularity:f("granularity"),stRotation:f("stRotation"),fill:f("fill"),outline:f("outline"),outlineColor:f("outlineColor"),outlineWidth:f("outlineWidth"),perPositionHeight:f("perPositionHeight")}),g.prototype.clone=function(a){return b(a)||(a=new g),a.show=this.show,a.material=this.material,a.positions=this.positions,a.height=this.height,a.extrudedHeight=this.extrudedHeight,a.granularity=this.granularity,a.stRotation=this.stRotation,a.fill=this.fill,a.outline=this.outline,a.outlineColor=this.outlineColor,a.outlineWidth=this.outlineWidth,a.perPositionHeight=this.perPositionHeight,a},g.prototype.merge=function(b){this.show=a(this.show,b.show),this.material=a(this.material,b.material),this.positions=a(this.positions,b.positions),this.height=a(this.height,b.height),this.extrudedHeight=a(this.extrudedHeight,b.extrudedHeight),this.granularity=a(this.granularity,b.granularity),this.stRotation=a(this.stRotation,b.stRotation),this.fill=a(this.fill,b.fill),this.outline=a(this.outline,b.outline),this.outlineColor=a(this.outlineColor,b.outlineColor),this.outlineWidth=a(this.outlineWidth,b.outlineWidth),this.perPositionHeight=a(this.perPositionHeight,b.perPositionHeight)},g}),c("DataSources/PolylineGlowMaterialProperty",["../Core/Color","../Core/defined","../Core/defineProperties","../Core/Event","./createPropertyDescriptor","./Property"],function(a,b,c,d,e,f){"use strict";var g=a.WHITE,h=.25,i=function(){this._definitionChanged=new d,this._color=void 0,this._colorSubscription=void 0,this._glowPower=void 0,this._glowPowerSubscription=void 0};return c(i.prototype,{isConstant:{get:function(){return f.isConstant(this._color)&&f.isConstant(this._glow)}},definitionChanged:{get:function(){return this._definitionChanged}},color:e("color"),glowPower:e("glowPower")}),i.prototype.getType=function(){return"PolylineGlow"},i.prototype.getValue=function(a,c){return b(c)||(c={}),c.color=f.getValueOrClonedDefault(this._color,a,g,c.color),c.glowPower=f.getValueOrDefault(this._glowPower,a,h,c.glowPower),c},i.prototype.equals=function(a){return this===a||a instanceof i&&f.equals(this._color,a._color)&&f.equals(this._glowPower,a._glowPower)},i.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},i}),c("DataSources/PolylineGraphics",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./createPropertyDescriptor"],function(a,b,c,d,e,f){"use strict";var g=function(){this._show=void 0,this._showSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._followSurface=void 0,this._followSurfaceSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._widthSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._definitionChanged=new e};return c(g.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:f("show"),material:f("material"),positions:f("positions"),width:f("width"),followSurface:f("followSurface"),granularity:f("granularity")}),g.prototype.clone=function(a){return b(a)||(a=new g),a.show=this.show,a.material=this.material,a.positions=this.positions,a.width=this.width,a.followSurface=this.followSurface,a.granularity=this.granularity,a},g.prototype.merge=function(b){this.show=a(this.show,b.show),this.material=a(this.material,b.material),this.positions=a(this.positions,b.positions),this.width=a(this.width,b.width),this.followSurface=a(this.followSurface,b.followSurface),this.granularity=a(this.granularity,b.granularity)},g}),c("DataSources/PolylineOutlineMaterialProperty",["../Core/Color","../Core/defined","../Core/defineProperties","../Core/Event","./createPropertyDescriptor","./Property"],function(a,b,c,d,e,f){"use strict";var g=a.WHITE,h=a.BLACK,i=0,j=function(){this._definitionChanged=new d,this._color=void 0,this._colorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0};return c(j.prototype,{isConstant:{get:function(){return f.isConstant(this._color)&&f.isConstant(this._outlineColor)&&f.isConstant(this._outlineWidth)}},definitionChanged:{get:function(){return this._definitionChanged}},color:e("color"),outlineColor:e("outlineColor"),outlineWidth:e("outlineWidth")}),j.prototype.getType=function(){return"PolylineOutline"},j.prototype.getValue=function(a,c){return b(c)||(c={}),c.color=f.getValueOrClonedDefault(this._color,a,g,c.color),c.outlineColor=f.getValueOrClonedDefault(this._outlineColor,a,h,c.outlineColor),c.outlineWidth=f.getValueOrDefault(this._outlineWidth,a,i),c},j.prototype.equals=function(a){return this===a||a instanceof j&&f.equals(this._color,a._color)&&f.equals(this._outlineColor,a._outlineColor)&&f.equals(this._outlineWidth,a._outlineWidth)},j.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},j}),c("DataSources/PositionPropertyArray",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/EventHelper","../Core/ReferenceFrame","./Property"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(b,c){this._value=void 0,this._definitionChanged=new e,this._eventHelper=new f,this._referenceFrame=a(c,g.FIXED),this.setValue(b)};return c(i.prototype,{isConstant:{get:function(){var a=this._value;if(!b(a))return!0;for(var c=a.length,d=0;c>d;d++)if(!h.isConstant(a[d]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}}),i.prototype.getValue=function(a,b){return this.getValueInReferenceFrame(a,g.FIXED,b)},i.prototype.getValueInReferenceFrame=function(a,c,d){var e=this._value;if(!b(e))return void 0;var f=e.length;b(d)||(d=new Array(f));for(var g=0,h=0;f>g;){var i=e[g],j=i.getValueInReferenceFrame(a,c,d[g]);b(j)&&(d[h]=j,h++),g++}return d.length=h,d},i.prototype.setValue=function(a){var c=this._eventHelper;if(c.removeAll(),b(a)){this._value=a.slice();for(var d=a.length,e=0;d>e;e++){var f=a[e];b(f)&&c.add(f.definitionChanged,i.prototype._raiseDefinitionChanged,this)}}else this._value=void 0;this._definitionChanged.raiseEvent(this)},i.prototype.equals=function(a){return this===a||a instanceof i&&this._referenceFrame===a._referenceFrame&&h.arrayEquals(this._value,a._value)},i.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},i}),c("DataSources/RectangleGraphics",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./createPropertyDescriptor"],function(a,b,c,d,e,f){"use strict";var g=function(){this._show=void 0,this._showSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._coordinates=void 0,this._coordinatesSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._closeTop=void 0,this._closeTopSubscription=void 0,this._closeBottom=void 0,this._closeBottomSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._definitionChanged=new e};return c(g.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:f("show"),coordinates:f("coordinates"),material:f("material"),height:f("height"),extrudedHeight:f("extrudedHeight"),granularity:f("granularity"),stRotation:f("stRotation"),rotation:f("rotation"),fill:f("fill"),outline:f("outline"),outlineColor:f("outlineColor"),outlineWidth:f("outlineWidth"),closeTop:f("closeTop"),closeBottom:f("closeBottom")}),g.prototype.clone=function(a){return b(a)||(a=new g),a.show=this.show,a.coordinates=this.coordinates,a.material=this.material,a.height=this.height,a.extrudedHeight=this.extrudedHeight,a.granularity=this.granularity,a.stRotation=this.stRotation,a.rotation=this.rotation,a.fill=this.fill,a.outline=this.outline,a.outlineColor=this.outlineColor,a.outlineWidth=this.outlineWidth,a.closeTop=this.closeTop,a.closeBottom=this.closeBottom,a},g.prototype.merge=function(b){this.show=a(this.show,b.show),this.coordinates=a(this.coordinates,b.coordinates),this.material=a(this.material,b.material),this.height=a(this.height,b.height),this.extrudedHeight=a(this.extrudedHeight,b.extrudedHeight),this.granularity=a(this.granularity,b.granularity),this.stRotation=a(this.stRotation,b.stRotation),this.rotation=a(this.rotation,b.rotation),this.fill=a(this.fill,b.fill),this.outline=a(this.outline,b.outline),this.outlineColor=a(this.outlineColor,b.outlineColor),this.outlineWidth=a(this.outlineWidth,b.outlineWidth),this.closeTop=a(this.closeTop,b.closeTop),this.closeBottom=a(this.closeBottom,b.closeBottom)},g}),c("DataSources/ReferenceProperty",["../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/RuntimeError","./Property"],function(a,b,c,d,e,f){"use strict";function g(b){var c=!0;if(b._resolveEntity){var d=b._targetCollection.getById(b._targetId);if(a(d)?(d.definitionChanged.addEventListener(i.prototype._onTargetEntityDefinitionChanged,b),b._targetEntity=d,b._resolveEntity=!1):(d=b._targetEntity,c=!1),!a(d))throw new e('target entity "'+b._targetId+'" could not be resolved.')}return c}function h(b){var c=b._targetProperty;if(b._resolveProperty){var d=g(b),f=b._targetPropertyNames;c=b._targetEntity;for(var h=f.length,i=0;h>i&&a(c);i++)c=c[f[i]];if(a(c))b._targetProperty=c,b._resolveProperty=!d;else if(!a(b._targetProperty))throw new e('targetProperty "'+b._targetId+"."+f.join(".")+'" could not be resolved.')}return c}var i=function(a,b,c){this._targetCollection=a,this._targetId=b,this._targetPropertyNames=c,this._targetProperty=void 0,this._targetEntity=void 0,this._definitionChanged=new d,this._resolveEntity=!0,this._resolveProperty=!0,a.collectionChanged.addEventListener(i.prototype._onCollectionChanged,this)};return b(i.prototype,{isConstant:{get:function(){return f.isConstant(h(this))}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return h(this).referenceFrame}},targetId:{get:function(){return this._targetId}},targetCollection:{get:function(){return this._targetCollection}},targetPropertyNames:{get:function(){return this._targetPropertyNames}},resolvedProperty:{get:function(){return h(this)}}}),i.fromString=function(a,b){for(var c,d=[],e=!0,f=!1,g="",h=0;h<b.length;++h){var j=b.charAt(h);f?(g+=j,f=!1):"\\"===j?f=!0:e&&"#"===j?(c=g,e=!1,g=""):e||"."!==j?g+=j:(d.push(g),g="")}return d.push(g),new i(a,c,d)},i.prototype.getValue=function(a,b){return h(this).getValue(a,b)},i.prototype.getValueInReferenceFrame=function(a,b,c){return h(this).getValueInReferenceFrame(a,b,c)},i.prototype.getType=function(a){return h(this).getType(a)},i.prototype.equals=function(a){if(this===a)return!0;var b=this._targetPropertyNames,c=a._targetPropertyNames;if(this._targetCollection!==a._targetCollection||this._targetId!==a._targetId||b.length!==c.length)return!1;for(var d=this._targetPropertyNames.length,e=0;d>e;e++)if(b[e]!==c[e])return!1;return!0},i.prototype._onTargetEntityDefinitionChanged=function(a,b){this._targetPropertyNames[0]===b&&(this._resolveProperty=!0,this._definitionChanged.raiseEvent(this))},i.prototype._onCollectionChanged=function(b,c,d){var e=this._targetEntity;a(e)&&(-1!==d.indexOf(e)?(e.definitionChanged.removeEventListener(i.prototype._onTargetEntityDefinitionChanged,this),this._resolveEntity=!0,this._resolveProperty=!0):this._resolveEntity&&(h(this),this._resolveEntity||this._definitionChanged.raiseEvent(this)))},i}),c("DataSources/SampledProperty",["../Core/binarySearch","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/ExtrapolationType","../Core/JulianDate","../Core/LinearApproximation"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a,b,c){var d,e=a.length,f=c.length,g=e+f;if(a.length=g,e!==b){var h=e-1;for(d=g-1;d>=b;d--)a[d]=a[h--]}for(d=0;f>d;d++)a[b++]=c[d]}function k(a,b){return a instanceof h?a:"string"==typeof a?h.fromIso8601(a):h.addSeconds(b,a,new h)}var l={packedLength:1,pack:function(a,c,d){d=b(d,0),c[d]=a},unpack:function(a,c){return c=b(c,0),a[c]}},m=[],n=[],o=function(b,d,e,f,g){for(var i,l,o,p,q,r,s=0;s<f.length;){q=k(f[s],b),o=a(d,q,h.compare);var t=0,u=0;if(0>o){for(o=~o,p=o*g,l=void 0,r=d[o];s<f.length&&(q=k(f[s],b),!(c(l)&&h.compare(l,q)>=0||c(r)&&h.compare(q,r)>=0));){for(m[t++]=q,s+=1,i=0;g>i;i++)n[u++]=f[s],s+=1;l=q}t>0&&(n.length=u,j(e,p,n),m.length=t,j(d,o,m))}else{for(i=0;g>i;i++)s++,e[o*g+i]=f[s];s++}}},p=function(a,d){var e=a;e===Number&&(e=l);var h,j=e.packedLength,k=b(e.packedInterpolationLength,j),m=0;if(c(d)){var n=d.length;h=new Array(n);for(var o=0;n>o;o++){var p=d[o];p===Number&&(p=l);var q=p.packedLength;j+=q,k+=b(p.packedInterpolationLength,q),h[o]=p}m=n}this._type=a,this._innerType=e,this._interpolationDegree=1,this._interpolationAlgorithm=i,this._numberOfPoints=0,this._times=[],this._values=[],this._xTable=[],this._yTable=[],this._packedLength=j,this._packedInterpolationLength=k,this._updateTableLength=!0,this._interpolationResult=new Array(k),this._definitionChanged=new f,this._derivativeTypes=d,this._innerDerivativeTypes=h,this._inputOrder=m,this._forwardExtrapolationType=g.NONE,this._forwardExtrapolationDuration=0,this._backwardExtrapolationType=g.NONE,this._backwardExtrapolationDuration=0};return d(p.prototype,{isConstant:{get:function(){return 0===this._values.length}},definitionChanged:{get:function(){return this._definitionChanged}},type:{get:function(){return this._type}},derivativeTypes:{get:function(){return this._derivativeTypes}},interpolationDegree:{get:function(){return this._interpolationDegree}},interpolationAlgorithm:{get:function(){return this._interpolationAlgorithm}},forwardExtrapolationType:{get:function(){return this._forwardExtrapolationType},set:function(a){this._forwardExtrapolationType!==a&&(this._forwardExtrapolationType=a,this._definitionChanged.raiseEvent(this))}},forwardExtrapolationDuration:{get:function(){return this._forwardExtrapolationDuration},set:function(a){this._forwardExtrapolationDuration!==a&&(this._forwardExtrapolationDuration=a,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationType:{get:function(){return this._backwardExtrapolationType},set:function(a){this._backwardExtrapolationType!==a&&(this._backwardExtrapolationType=a,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationDuration:{get:function(){return this._backwardExtrapolationDuration},set:function(a){this._backwardExtrapolationDuration!==a&&(this._backwardExtrapolationDuration=a,this._definitionChanged.raiseEvent(this))}}}),p.prototype.getValue=function(b,d){var e,f=this._innerType,i=this._times,j=this._values,k=a(i,b,h.compare);if(0>k){if(k=~k,0===k){var l=i[k];if(e=this._backwardExtrapolationDuration,this._backwardExtrapolationType===g.NONE||0!==e&&h.secondsDifference(l,b)>e)return void 0;if(this._backwardExtrapolationType===g.HOLD)return f.unpack(this._values,0,d)}if(k>=i.length){k=i.length-1;var m=i[k];if(e=this._forwardExtrapolationDuration,this._forwardExtrapolationType===g.NONE||0!==e&&h.secondsDifference(b,m)>e)return void 0;if(this._forwardExtrapolationType===g.HOLD)return k=i.length-1,f.unpack(this._values,k*f.packedLength,d)}var n=this._xTable,o=this._yTable,p=this._interpolationAlgorithm,q=this._packedInterpolationLength,r=this._inputOrder;if(this._updateTableLength){this._updateTableLength=!1;var s=Math.min(p.getRequiredDataPoints(this._interpolationDegree,r),i.length);s!==this._numberOfPoints&&(this._numberOfPoints=s,n.length=s,o.length=s*q)}var t=this._numberOfPoints-1;if(1>t)return void 0;var u=0,v=i.length-1,w=v-u+1;if(t+1>w);else{var x=k-(0|t/2)-1;u>x&&(x=u);var y=x+t;y>v&&(y=v,x=y-t,u>x&&(x=u)),u=x,v=y}for(var z=v-u+1,A=0;z>A;++A)n[A]=h.secondsDifference(i[u+A],i[v]);if(c(f.convertPackedArrayForInterpolation))f.convertPackedArrayForInterpolation(j,u,v,o);else for(var B=0,C=this._packedLength,D=u*C,E=(v+1)*C;E>D;)o[B]=j[D],D++,B++;var F,G=h.secondsDifference(b,i[v]);if(0!==r&&c(p.interpolate)){var H=Math.floor(q/(r+1));F=p.interpolate(G,n,o,H,r,r,this._interpolationResult)}else F=p.interpolateOrderZero(G,n,o,q,this._interpolationResult);return c(f.unpackInterpolationResult)?f.unpackInterpolationResult(F,j,u,v,d):f.unpack(F,0,d)}return f.unpack(this._values,k*this._packedLength,d)},p.prototype.setInterpolationOptions=function(a){var b=!1,c=a.interpolationAlgorithm,d=a.interpolationDegree;this._interpolationAlgorithm!==c&&(this._interpolationAlgorithm=c,b=!0),this._interpolationDegree!==d&&(this._interpolationDegree=d,b=!0),b&&(this._updateTableLength=!0,this._definitionChanged.raiseEvent(this))},p.prototype.addSample=function(a,b,d){var e=this._innerDerivativeTypes,f=c(e),g=this._innerType,h=[];if(h.push(a),g.pack(b,h,h.length),f)for(var i=e.length,j=0;i>j;j++)e[j].pack(d[j],h,h.length);o(void 0,this._times,this._values,h,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},p.prototype.addSamples=function(a,b,d){for(var e=this._innerDerivativeTypes,f=c(e),g=this._innerType,h=a.length,i=[],j=0;h>j;j++)if(i.push(a[j]),g.pack(b[j],i,i.length),f)for(var k=d[j],l=e.length,m=0;l>m;m++)e[m].pack(k[m],i,i.length);o(void 0,this._times,this._values,i,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},p.prototype.addSamplesPackedArray=function(a,b){o(b,this._times,this._values,a,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},p.prototype.equals=function(a){if(this===a)return!0
;if(!c(a))return!1;if(this._type!==a._type||this._interpolationDegree!==a._interpolationDegree||this._interpolationAlgorithm!==a._interpolationAlgorithm)return!1;var b=this._derivativeTypes,d=c(b),e=a._derivativeTypes,f=c(e);if(d!==f)return!1;var g,i;if(d){if(i=b.length,i!==e.length)return!1;for(g=0;i>g;g++)if(b[g]!==e[g])return!1}var j=this._times,k=a._times;if(i=j.length,i!==k.length)return!1;for(g=0;i>g;g++)if(!h.equals(j[g],k[g]))return!1;var l=this._values,m=a._values;for(g=0;i>g;g++)if(l[g]!==m[g])return!1;return!0},p._mergeNewSamples=o,p}),c("DataSources/SampledPositionProperty",["../Core/Cartesian3","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/ReferenceFrame","./PositionProperty","./Property","./SampledProperty"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=function(c,d){d=b(d,0);var e;if(d>0){e=new Array(d);for(var h=0;d>h;h++)e[h]=a}this._numberOfDerivatives=d,this._property=new j(a,e),this._definitionChanged=new f,this._referenceFrame=b(c,g.FIXED),this._property._definitionChanged.addEventListener(function(){this._definitionChanged.raiseEvent(this)},this)};return d(k.prototype,{isConstant:{get:function(){return this._property.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}},interpolationDegree:{get:function(){return this._property.interpolationDegree}},interpolationAlgorithm:{get:function(){return this._property.interpolationAlgorithm}},numberOfDerivatives:{get:function(){return this._numberOfDerivatives}},forwardExtrapolationType:{get:function(){return this._property.forwardExtrapolationType},set:function(a){this._property.forwardExtrapolationType=a}},forwardExtrapolationDuration:{get:function(){return this._property.forwardExtrapolationDuration},set:function(a){this._property.forwardExtrapolationDuration=a}},backwardExtrapolationType:{get:function(){return this._property.backwardExtrapolationType},set:function(a){this._property.backwardExtrapolationType=a}},backwardExtrapolationDuration:{get:function(){return this._property.backwardExtrapolationDuration},set:function(a){this._property.backwardExtrapolationDuration=a}}}),k.prototype.getValue=function(a,b){return this.getValueInReferenceFrame(a,g.FIXED,b)},k.prototype.getValueInReferenceFrame=function(a,b,d){return d=this._property.getValue(a,d),c(d)?h.convertToReferenceFrame(a,d,this._referenceFrame,b,d):void 0},k.prototype.setInterpolationOptions=function(a){this._property.setInterpolationOptions(a)},k.prototype.addSample=function(a,b,c){this._numberOfDerivatives,this._property.addSample(a,b,c)},k.prototype.addSamples=function(a,b,c){this._property.addSamples(a,b,c)},k.prototype.addSamplesPackedArray=function(a,b){this._property.addSamplesPackedArray(a,b)},k.prototype.equals=function(a){return this===a||i.equals(this._property,a._property)&&this._referenceFrame===a._referenceFrame},k}),c("DataSources/StripeOrientation",["../Core/freezeObject"],function(a){"use strict";var b={HORIZONTAL:0,VERTICAL:1};return a(b)}),c("DataSources/StripeMaterialProperty",["../Core/Color","../Core/defined","../Core/defineProperties","../Core/Event","./createPropertyDescriptor","./Property","./StripeOrientation"],function(a,b,c,d,e,f,g){"use strict";var h=g.HORIZONTAL,i=a.WHITE,j=a.BLACK,k=0,l=1,m=function(){this._definitionChanged=new d,this._orientation=void 0,this._orientationSubscription=void 0,this._evenColor=void 0,this._evenColorSubscription=void 0,this._oddColor=void 0,this._oddColorSubscription=void 0,this._offset=void 0,this._offsetSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0};return c(m.prototype,{isConstant:{get:function(){return f.isConstant(this._orientation)&&f.isConstant(this._evenColor)&&f.isConstant(this._oddColor)&&f.isConstant(this._offset)&&f.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},orientation:e("orientation"),evenColor:e("evenColor"),oddColor:e("oddColor"),offset:e("offset"),repeat:e("repeat")}),m.prototype.getType=function(){return"Stripe"},m.prototype.getValue=function(a,c){return b(c)||(c={}),c.horizontal=f.getValueOrDefault(this._orientation,a,h)===g.HORIZONTAL,c.evenColor=f.getValueOrClonedDefault(this._evenColor,a,i,c.evenColor),c.oddColor=f.getValueOrClonedDefault(this._oddColor,a,j,c.oddColor),c.offset=f.getValueOrDefault(this._offset,a,k),c.repeat=f.getValueOrDefault(this._repeat,a,l),c},m.prototype.equals=function(a){return this===a||a instanceof m&&f.equals(this._orientation,a._orientation)&&f.equals(this._evenColor,a._evenColor)&&f.equals(this._oddColor,a._oddColor)&&f.equals(this._offset,a._offset)&&f.equals(this._repeat,a._repeat)},m.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},m}),c("DataSources/TimeIntervalCollectionPositionProperty",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/ReferenceFrame","../Core/TimeIntervalCollection","./PositionProperty","./Property"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(b){this._definitionChanged=new e,this._intervals=new g,this._intervals.changedEvent.addEventListener(j.prototype._intervalsChanged,this),this._referenceFrame=a(b,f.FIXED)};return c(j.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}},referenceFrame:{get:function(){return this._referenceFrame}}}),j.prototype.getValue=function(a,b){return this.getValueInReferenceFrame(a,f.FIXED,b)},j.prototype.getValueInReferenceFrame=function(a,c,d){var e=this._intervals.findDataForIntervalContainingDate(a);return b(e)?h.convertToReferenceFrame(a,e,this._referenceFrame,c,d):void 0},j.prototype.equals=function(a){return this===a||a instanceof j&&this._intervals.equals(a._intervals,i.equals)&&this._referenceFrame===a._referenceFrame},j.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)},j}),c("DataSources/TimeIntervalCollectionProperty",["../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/isArray","../Core/TimeIntervalCollection","./Property"],function(a,b,c,d,e,f,g){"use strict";var h=function(){this._definitionChanged=new d,this._intervals=new f,this._intervals.changedEvent.addEventListener(h.prototype._intervalsChanged,this)};return b(h.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}}),h.prototype.getValue=function(b,c){var d=this._intervals.findDataForIntervalContainingDate(b);return a(d)&&"object"==typeof d&&!e(d)?d.clone(c):d},h.prototype.equals=function(a){return this===a||a instanceof h&&this._intervals.equals(a._intervals,g.equals)},h.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)},h}),c("DataSources/WallGraphics",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./createPropertyDescriptor"],function(a,b,c,d,e,f){"use strict";var g=function(){this._show=void 0,this._showSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._minimumHeights=void 0,this._minimumHeightsSubscription=void 0,this._maximumHeights=void 0,this._maximumHeightsSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._definitionChanged=new e};return c(g.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:f("show"),material:f("material"),positions:f("positions"),minimumHeights:f("minimumHeights"),maximumHeights:f("maximumHeights"),granularity:f("granularity"),fill:f("fill"),outline:f("outline"),outlineColor:f("outlineColor"),outlineWidth:f("outlineWidth")}),g.prototype.clone=function(a){return b(a)||(a=new g),a.show=this.show,a.material=this.material,a.positions=this.positions,a.minimumHeights=this.minimumHeights,a.maximumHeights=this.maximumHeights,a.granularity=this.granularity,a.fill=this.fill,a.outline=this.outline,a.outlineColor=this.outlineColor,a.outlineWidth=this.outlineWidth,a},g.prototype.merge=function(b){this.show=a(this.show,b.show),this.material=a(this.material,b.material),this.positions=a(this.positions,b.positions),this.minimumHeights=a(this.minimumHeights,b.minimumHeights),this.maximumHeights=a(this.maximumHeights,b.maximumHeights),this.granularity=a(this.granularity,b.granularity),this.fill=a(this.fill,b.fill),this.outline=a(this.outline,b.outline),this.outlineColor=a(this.outlineColor,b.outlineColor),this.outlineWidth=a(this.outlineWidth,b.outlineWidth)},g}),c("DataSources/CzmlDataSource",["../Core/Cartesian2","../Core/Cartesian3","../Core/Cartographic","../Core/ClockRange","../Core/ClockStep","../Core/Color","../Core/createGuid","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Ellipsoid","../Core/Event","../Core/ExtrapolationType","../Core/getFilenameFromUri","../Core/HermitePolynomialApproximation","../Core/isArray","../Core/Iso8601","../Core/JulianDate","../Core/LagrangePolynomialApproximation","../Core/LinearApproximation","../Core/loadJson","../Core/Math","../Core/Quaternion","../Core/Rectangle","../Core/ReferenceFrame","../Core/RuntimeError","../Core/Spherical","../Core/TimeInterval","../Core/TimeIntervalCollection","../Scene/HorizontalOrigin","../Scene/LabelStyle","../Scene/VerticalOrigin","../ThirdParty/Uri","../ThirdParty/when","./BillboardGraphics","./ColorMaterialProperty","./CompositeMaterialProperty","./CompositePositionProperty","./CompositeProperty","./ConstantPositionProperty","./ConstantProperty","./DataSource","./DataSourceClock","./EllipseGraphics","./EllipsoidGraphics","./EntityCollection","./GridMaterialProperty","./ImageMaterialProperty","./LabelGraphics","./ModelGraphics","./PathGraphics","./PointGraphics","./PolygonGraphics","./PolylineGlowMaterialProperty","./PolylineGraphics","./PolylineOutlineMaterialProperty","./PositionPropertyArray","./RectangleGraphics","./ReferenceProperty","./SampledPositionProperty","./SampledProperty","./StripeMaterialProperty","./StripeOrientation","./TimeIntervalCollectionPositionProperty","./TimeIntervalCollectionProperty","./WallGraphics"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma){"use strict";function na(a,b){return"#"===b[0]&&(b=Xa+b),fa.fromString(a,b)}function oa(a){var b=a.rgbaf;if(i(b))return b;var c=a.rgba;if(!i(c))return void 0;if(c.length===f.length)return[f.byteToFloat(c[0]),f.byteToFloat(c[1]),f.byteToFloat(c[2]),f.byteToFloat(c[3])];var d=c.length;b=new Array(d);for(var e=0;d>e;e+=5)b[e]=c[e],b[e+1]=f.byteToFloat(c[e+1]),b[e+2]=f.byteToFloat(c[e+2]),b[e+3]=f.byteToFloat(c[e+3]),b[e+4]=f.byteToFloat(c[e+4]);return b}function pa(a,b){var c=h(a.uri,a);if(i(b)){var d=new H(document.location.href);b=new H(b),c=new H(c).resolve(b.resolve(d)).toString()}return c}function qa(a){var b=a.wsenDegrees;if(i(b)){for(var c=b.length,d=0;c>d;d++)b[d]=w.toRadians(b[d]);return b}return a.wsen}function ra(a){if(i(a.cartesian))return a.cartesian;if(i(a.cartesianVelocity))return a.cartesianVelocity;if(i(a.unitCartesian))return a.unitCartesian;var c,d,e,f=a.unitSpherical;if(i(f)){if(d=f.length,2===d)Za.clock=f[0],Za.cone=f[1],b.fromSpherical(Za,Ya),e=[Ya.x,Ya.y,Ya.z];else{var g=0;for(e=new Array(4*(d/3)),c=0;d>c;c+=4)e[c]=f[g++],Za.clock=f[g++],Za.cone=f[g++],b.fromSpherical(Za,Ya),e[c+1]=Ya.x,e[c+2]=Ya.y,e[c+3]=Ya.z}return e}var h=a.cartographicRadians;if(i(h)){if(3===h.length)$a.longitude=h[0],$a.latitude=h[1],$a.height=h[2],l.WGS84.cartographicToCartesian($a,Ya),e=[Ya.x,Ya.y,Ya.z];else for(d=h.length,e=new Array(d),c=0;d>c;c+=4)$a.longitude=h[c+1],$a.latitude=h[c+2],$a.height=h[c+3],l.WGS84.cartographicToCartesian($a,Ya),e[c]=h[c],e[c+1]=Ya.x,e[c+2]=Ya.y,e[c+3]=Ya.z;return e}var j=a.cartographicDegrees;if(!i(j))throw new A(JSON.stringify(a)+" is not a valid CZML interval.");if(3===j.length)$a.longitude=w.toRadians(j[0]),$a.latitude=w.toRadians(j[1]),$a.height=j[2],l.WGS84.cartographicToCartesian($a,Ya),e=[Ya.x,Ya.y,Ya.z];else for(d=j.length,e=new Array(d),c=0;d>c;c+=4)$a.longitude=w.toRadians(j[c+1]),$a.latitude=w.toRadians(j[c+2]),$a.height=j[c+3],l.WGS84.cartographicToCartesian($a,Ya),e[c]=j[c],e[c+1]=Ya.x,e[c+2]=Ya.y,e[c+3]=Ya.z;return e}function sa(c,d,e){switch(c){case Boolean:return h(d["boolean"],d);case a:return d.cartesian2;case b:return ra(d);case f:return oa(d);case ja:return ja[h(d.stripeOrientation,d)];case E:return E[h(d.horizontalOrigin,d)];case Image:return pa(d,e);case s:return s.fromIso8601(h(d.date,d));case F:return F[h(d.labelStyle,d)];case Number:return h(d.number,d);case String:return h(d.string,d);case Array:return d.array;case x:return d.unitQuaternion;case y:return qa(d);case H:return pa(d,e);case G:return G[h(d.verticalOrigin,d)];default:throw new k(c)}}function ta(a,b){var c=a.interpolationAlgorithm;(i(c)||i(a.interpolationDegree))&&b.setInterpolationOptions({interpolationAlgorithm:ab[c],interpolationDegree:a.interpolationDegree});var d=a.forwardExtrapolationType;i(d)&&(b.forwardExtrapolationType=n[d]);var e=a.forwardExtrapolationDuration;i(e)&&(b.forwardExtrapolationDuration=e);var f=a.backwardExtrapolationType;i(f)&&(b.backwardExtrapolationType=n[f]);var g=a.backwardExtrapolationDuration;i(g)&&(b.backwardExtrapolationDuration=g)}function ua(a,b,c,d,e,f,g){var j,k=d.interval;i(k)?(bb.iso8601=k,j=C.fromIso8601(bb),i(e)&&(j=C.intersect(j,e,_a))):i(e)&&(j=e);var l,m,n,o,p=i(d.reference),q=i(j)&&!j.equals(r.MAXIMUM_INTERVAL);if(p||(n=sa(a,d,f),l=h(a.packedLength,1),o=h(n.length,1),m=!i(d.array)&&"string"!=typeof n&&o>l),!m&&!q)return b[c]=p?na(g,d.reference):i(a.unpack)?new P(a.unpack(n,0)):new P(n),void 0;var t,u=b[c],v=d.epoch;if(i(v)&&(t=s.fromIso8601(v)),m&&!q)return u instanceof ha||(u=new ha(a),b[c]=u),u.addSamplesPackedArray(n,t),ta(d,u),void 0;var w;if(!m&&q)return j=j.clone(),j.data=p?na(g,d.reference):i(a.unpack)?a.unpack(n,0):n,i(u)||(u=p?new N:new la,b[c]=u),!p&&u instanceof la?u.intervals.addInterval(j):u instanceof N?(j.data=p?j.data:new P(j.data),u.intervals.addInterval(j)):(w=r.MAXIMUM_INTERVAL.clone(),w.data=u,u=new N,b[c]=u,u.intervals.addInterval(w),j.data=p?j.data:new P(j.data),u.intervals.addInterval(j)),void 0;i(u)||(u=new N,b[c]=u),u instanceof N||(w=r.MAXIMUM_INTERVAL.clone(),w.data=u,u=new N,b[c]=u,u.intervals.addInterval(w));var x=u.intervals;w=x.findInterval(j),i(w)&&w.data instanceof ha||(w=j.clone(),w.data=new ha(a),x.addInterval(w)),w.data.addSamplesPackedArray(n,t),ta(d,w.data)}function va(a,b,c,d,e,f,g){if(i(d))if(q(d))for(var h=0,j=d.length;j>h;h++)ua(a,b,c,d[h],e,f,g);else ua(a,b,c,d,e,f,g)}function wa(a,c,d,e,f,g){var j,k=d.interval;i(k)?(bb.iso8601=k,j=C.fromIso8601(bb),i(e)&&(j=C.intersect(j,e,_a))):i(e)&&(j=e);var l,m,n,o=!1,p=i(d.cartesianVelocity)?1:0,q=b.packedLength*(p+1),t=i(d.reference),u=i(j)&&!j.equals(r.MAXIMUM_INTERVAL);if(t||(l=h(z[d.referenceFrame],void 0),m=ra(d),n=h(m.length,1),o=n>q),!o&&!u)return a[c]=t?na(g,d.reference):new O(b.unpack(m),l),void 0;var v,w=a[c],x=d.epoch;if(i(x)&&(v=s.fromIso8601(x)),o&&!u)return(!(w instanceof ga)||i(l)&&w.referenceFrame!==l)&&(w=new ga(l,p),a[c]=w),w.addSamplesPackedArray(m,v),ta(d,w),void 0;var y;if(!o&&u)return j=j.clone(),j.data=t?na(g,d.reference):b.unpack(m),i(w)||(w=t?new M(l):new ka(l),a[c]=w),!t&&w instanceof ka&&i(l)&&w.referenceFrame===l?w.intervals.addInterval(j):w instanceof M?(j.data=t?j.data:new O(j.data,l),w.intervals.addInterval(j)):(y=r.MAXIMUM_INTERVAL.clone(),y.data=w,w=new M(w.referenceFrame),a[c]=w,w.intervals.addInterval(y),j.data=t?j.data:new O(j.data,l),w.intervals.addInterval(j)),void 0;i(w)?w instanceof M||(y=r.MAXIMUM_INTERVAL.clone(),y.data=w,w=new M(w.referenceFrame),a[c]=w,w.intervals.addInterval(y)):(w=new M(l),a[c]=w);var A=w.intervals;y=A.findInterval(j),i(y)&&y.data instanceof ga&&(!i(l)||y.data.referenceFrame===l)||(y=j.clone(),y.data=new ga(l,p),A.addInterval(y)),y.data.addSamplesPackedArray(m,v),ta(d,y.data)}function xa(a,b,c,d,e,f){if(i(c))if(q(c))for(var g=0,h=c.length;h>g;g++)wa(a,b,c[g],d,e,f);else wa(a,b,c,d,e,f)}function ya(b,c,d,e,g,h){var j,k=d.interval;i(k)?(bb.iso8601=k,j=C.fromIso8601(bb),i(e)&&(j=C.intersect(j,e,_a))):i(e)&&(j=e);var l,m,n=b[c];if(i(j)){n instanceof L||(n=new L,b[c]=n);var o=n.intervals;m=o.findInterval({start:j.start,stop:j.stop}),i(m)?l=m.data:(m=j.clone(),o.addInterval(m))}else l=n;var p;i(d.solidColor)?(l instanceof K||(l=new K),p=d.solidColor,va(f,l,"color",p.color,void 0,void 0,h)):i(d.grid)?(l instanceof V||(l=new V),p=d.grid,va(f,l,"color",p.color,void 0,g,h),va(Number,l,"cellAlpha",p.cellAlpha,void 0,g,h),va(a,l,"lineThickness",p.lineThickness,void 0,g,h),va(a,l,"lineOffset",p.lineOffset,void 0,g,h),va(a,l,"lineCount",p.lineCount,void 0,g,h)):i(d.image)?(l instanceof W||(l=new W),p=d.image,va(Image,l,"image",p.image,void 0,g,h),va(a,l,"repeat",p.repeat,void 0,g,h)):i(d.stripe)?(l instanceof ia||(l=new ia),p=d.stripe,va(ja,l,"orientation",p.orientation,void 0,g,h),va(f,l,"evenColor",p.evenColor,void 0,g,h),va(f,l,"oddColor",p.oddColor,void 0,g,h),va(Number,l,"offset",p.offset,void 0,g,h),va(Number,l,"repeat",p.repeat,void 0,g,h)):i(d.polylineOutline)?(l instanceof ca||(l=new ca),p=d.polylineOutline,va(f,l,"color",p.color,void 0,g,h),va(f,l,"outlineColor",p.outlineColor,void 0,g,h),va(Number,l,"outlineWidth",p.outlineWidth,void 0,g,h)):i(d.polylineGlow)&&(l instanceof aa||(l=new aa),p=d.polylineGlow,va(f,l,"color",p.color,void 0,g,h),va(Number,l,"glowPower",p.glowPower,void 0,g,h)),i(m)?m.data=l:b[c]=l}function za(a,b,c,d,e,f){if(i(c))if(q(c))for(var g=0,h=c.length;h>g;g++)ya(a,b,c[g],d,e,f);else ya(a,b,c,d,e,f)}function Aa(a,b){a.name=h(b.name,a.name)}function Ba(a,b,c,d){var e=b.description;i(e)&&va(String,a,"description",e,void 0,d,c)}function Ca(a,b,c,d){var e=b.position;i(e)&&xa(a,"position",e,void 0,d,c)}function Da(a,c,d,e){var f=c.viewFrom;i(f)&&va(b,a,"viewFrom",f,void 0,e,d)}function Ea(a,b,c,d){var e=b.orientation;i(e)&&va(x,a,"orientation",e,void 0,d,c)}function Fa(a,c,d){var e,f,g=c.references;if(i(g)){var h=[];for(e=0,f=g.length;f>e;e++)h.push(na(d,g[e]));var j=c.interval;i(j)?(j=C.fromIso8601(j),a.positions instanceof M||(a.positions=new M,j.data=new da(h),a.positions.intervals.addInterval(j))):a.positions=new da(h)}else{var k=[],m=c.cartesian;if(i(m)){for(e=0,f=m.length;f>e;e+=3)k.push(new b(m[e],m[e+1],m[e+2]));c.array=k}else if(m=c.cartographicRadians,i(m)){for(e=0,f=m.length;f>e;e+=3)$a.longitude=m[e],$a.latitude=m[e+1],$a.height=m[e+2],k.push(l.WGS84.cartographicToCartesian($a));c.array=k}else if(m=c.cartographicDegrees,i(m)){for(e=0,f=m.length;f>e;e+=3)k.push(b.fromDegrees(m[e],m[e+1],m[e+2]));c.array=k}i(c.array)&&va(Array,a,"positions",c,void 0,void 0,d)}}function Ga(a,b,c){if(i(b))if(q(b))for(var d=b.length,e=0;d>e;e++)Fa(a,b[e],c);else Fa(a,b,c)}function Ha(a,b){var c,d=b.availability;if(i(d)){var e;if(q(d))for(var f=d.length,g=0;f>g;g++)i(e)||(e=new D),bb.iso8601=d[g],c=C.fromIso8601(bb),e.addInterval(c);else bb.iso8601=d,c=C.fromIso8601(bb),e=new D,e.addInterval(c);a.availability=e}}function Ia(c,d,e,g){var h=d.billboard;if(i(h)){var j,k=h.interval;i(k)&&(bb.iso8601=k,j=C.fromIso8601(bb));var l=c.billboard;i(l)||(c.billboard=l=new J),va(f,l,"color",h.color,j,g,e),va(b,l,"eyeOffset",h.eyeOffset,j,g,e),va(E,l,"horizontalOrigin",h.horizontalOrigin,j,g,e),va(Image,l,"image",h.image,j,g,e),va(a,l,"pixelOffset",h.pixelOffset,j,g,e),va(Number,l,"scale",h.scale,j,g,e),va(Number,l,"rotation",h.rotation,j,g,e),va(b,l,"alignedAxis",h.alignedAxis,j,g,e),va(Boolean,l,"show",h.show,j,g,e),va(G,l,"verticalOrigin",h.verticalOrigin,j,g,e)}}function Ja(a,b){var c=a.version;if(i(c)&&"string"==typeof c){var d=c.split(".");if(2===d.length){if("1"!==d[0])throw new A("Cesium only supports CZML version 1.");b._version=c}}if(!i(b._version))throw new A("CZML version information invalid.  It is expected to be a property on the document object in the <Major>.<Minor> version format.");var e=b._documentPacket;i(a.name)&&(e.name=a.name);var f=a.clock;if(i(f)){var g=e.clock;i(g)?(g.interval=h(f.interval,g.interval),g.currentTime=h(f.currentTime,g.currentTime),g.range=h(f.range,g.range),g.step=h(f.step,g.step),g.multiplier=h(f.multiplier,g.multiplier)):e.clock={interval:f.interval,currentTime:f.currentTime,range:f.range,step:f.step,multiplier:f.multiplier}}}function Ka(a,b,c,d){var e=b.ellipse;if(i(e)){var g,h=e.interval;i(h)&&(bb.iso8601=h,g=C.fromIso8601(bb));var j=a.ellipse;i(j)||(a.ellipse=j=new S),va(Boolean,j,"show",e.show,g,d,c),va(Number,j,"rotation",e.rotation,g,d,c),va(Number,j,"semiMajorAxis",e.semiMajorAxis,g,d,c),va(Number,j,"semiMinorAxis",e.semiMinorAxis,g,d,c),va(Number,j,"height",e.height,g,d,c),va(Number,j,"extrudedHeight",e.extrudedHeight,g,d,c),va(Number,j,"granularity",e.granularity,g,d,c),va(Number,j,"stRotation",e.stRotation,g,d,c),za(j,"material",e.material,g,d,c),va(Boolean,j,"fill",e.fill,g,d,c),va(Boolean,j,"outline",e.outline,g,d,c),va(f,j,"outlineColor",e.outlineColor,g,d,c),va(Number,j,"outlineWidth",e.outlineWidth,g,d,c),va(Number,j,"numberOfVerticalLines",e.numberOfVerticalLines,g,d,c)}}function La(a,c,d,e){var g=c.ellipsoid;if(i(g)){var h,j=g.interval;i(j)&&(bb.iso8601=j,h=C.fromIso8601(bb));var k=a.ellipsoid;i(k)||(a.ellipsoid=k=new T),va(Boolean,k,"show",g.show,h,e,d),va(b,k,"radii",g.radii,h,e,d),za(k,"material",g.material,h,e,d),va(Boolean,k,"fill",g.fill,h,e,d),va(Boolean,k,"outline",g.outline,h,e,d),va(f,k,"outlineColor",g.outlineColor,h,e,d),va(Number,k,"outlineWidth",g.outlineWidth,h,e,d)}}function Ma(c,d,e,g){var h=d.label;if(i(h)){var j,k=h.interval;i(k)&&(bb.iso8601=k,j=C.fromIso8601(bb));var l=c.label;i(l)||(c.label=l=new X),va(f,l,"fillColor",h.fillColor,j,g,e),va(f,l,"outlineColor",h.outlineColor,j,g,e),va(Number,l,"outlineWidth",h.outlineWidth,j,g,e),va(b,l,"eyeOffset",h.eyeOffset,j,g,e),va(E,l,"horizontalOrigin",h.horizontalOrigin,j,g,e),va(String,l,"text",h.text,j,g,e),va(a,l,"pixelOffset",h.pixelOffset,j,g,e),va(Number,l,"scale",h.scale,j,g,e),va(Boolean,l,"show",h.show,j,g,e),va(G,l,"verticalOrigin",h.verticalOrigin,j,g,e),va(String,l,"font",h.font,j,g,e),va(F,l,"style",h.style,j,g,e)}}function Na(a,b,c,d){var e=b.model;if(i(e)){var f,g=e.interval;i(g)&&(bb.iso8601=g,f=C.fromIso8601(bb));var h=a.model;i(h)||(a.model=h=new Y),va(Boolean,h,"show",e.show,f,d,c),va(Number,h,"scale",e.scale,f,d,c),va(Number,h,"minimumPixelSize",e.minimumPixelSize,f,d,c),va(H,h,"uri",e.gltf,f,d,c)}}function Oa(a,b,c,d){var e=b.path;if(i(e)){var f,g=e.interval;i(g)&&(bb.iso8601=g,f=C.fromIso8601(bb));var h=a.path;i(h)||(a.path=h=new Z),va(Boolean,h,"show",e.show,f,d,c),va(Number,h,"width",e.width,f,d,c),va(Number,h,"resolution",e.resolution,f,d,c),va(Number,h,"leadTime",e.leadTime,f,d,c),va(Number,h,"trailTime",e.trailTime,f,d,c),za(h,"material",e.material,f,d,c)}}function Pa(a,b,c,d){var e=b.point;if(i(e)){var g,h=e.interval;i(h)&&(bb.iso8601=h,g=C.fromIso8601(bb));var j=a.point;i(j)||(a.point=j=new $),va(f,j,"color",e.color,g,d,c),va(Number,j,"pixelSize",e.pixelSize,g,d,c),va(f,j,"outlineColor",e.outlineColor,g,d,c),va(Number,j,"outlineWidth",e.outlineWidth,g,d,c),va(Boolean,j,"show",e.show,g,d,c)}}function Qa(a,b,c,d){var e=b.polygon;if(i(e)){var g,h=e.interval;i(h)&&(bb.iso8601=h,g=C.fromIso8601(bb));var j=a.polygon;i(j)||(a.polygon=j=new _),va(Boolean,j,"show",e.show,g,d,c),za(j,"material",e.material,g,d,c),va(Number,j,"height",e.height,g,d,c),va(Number,j,"extrudedHeight",e.extrudedHeight,g,d,c),va(Number,j,"granularity",e.granularity,g,d,c),va(Number,j,"stRotation",e.stRotation,g,d,c),va(Boolean,j,"fill",e.fill,g,d,c),va(Boolean,j,"outline",e.outline,g,d,c),va(f,j,"outlineColor",e.outlineColor,g,d,c),va(Number,j,"outlineWidth",e.outlineWidth,g,d,c),va(Boolean,j,"perPositionHeight",e.perPositionHeight,g,d,c),Ga(j,e.positions,c)}}function Ra(a,b,c,d){var e=b.rectangle;if(i(e)){var g,h=e.interval;i(h)&&(bb.iso8601=h,g=C.fromIso8601(bb));var j=a.rectangle;i(j)||(a.rectangle=j=new ea),va(Boolean,j,"show",e.show,g,d,c),va(y,j,"coordinates",e.coordinates,g,d,c),za(j,"material",e.material,g,d,c),va(Number,j,"height",e.height,g,d,c),va(Number,j,"extrudedHeight",e.extrudedHeight,g,d,c),va(Number,j,"granularity",e.granularity,g,d,c),va(Number,j,"rotation",e.rotation,g,d,c),va(Number,j,"stRotation",e.stRotation,g,d,c),va(Boolean,j,"fill",e.fill,g,d,c),va(Boolean,j,"outline",e.outline,g,d,c),va(f,j,"outlineColor",e.outlineColor,g,d,c),va(Number,j,"outlineWidth",e.outlineWidth,g,d,c),va(Boolean,j,"closeBottom",e.closeBottom,g,d,c),va(Boolean,j,"closeTop",e.closeTop,g,d,c)}}function Sa(a,b,c,d){var e=b.wall;if(i(e)){var g,h=e.interval;i(h)&&(bb.iso8601=h,g=C.fromIso8601(bb));var j=a.wall;i(j)||(a.wall=j=new ma),va(Boolean,j,"show",e.show,g,d,c),za(j,"material",e.material,g,d,c),va(Array,j,"minimumHeights",e.minimumHeights,g,d,c),va(Array,j,"maximumHeights",e.maximumHeights,g,d,c),va(Number,j,"granularity",e.granularity,g,d,c),va(Boolean,j,"fill",e.fill,g,d,c),va(Boolean,j,"outline",e.outline,g,d,c),va(f,j,"outlineColor",e.outlineColor,g,d,c),va(Number,j,"outlineWidth",e.outlineWidth,g,d,c),Ga(j,e.positions,c)}}function Ta(a,b,c,d){var e=b.polyline;if(i(e)){var f,g=e.interval;i(g)&&(bb.iso8601=g,f=C.fromIso8601(bb));var h=a.polyline;i(h)||(a.polyline=h=new ba),va(Boolean,h,"show",e.show,f,d,c),va(Number,h,"width",e.width,f,d,c),za(h,"material",e.material,f,d,c),va(Boolean,h,"followSurface",e.followSurface,f,d,c),va(Number,h,"granularity",e.granularity,f,d,c),Ga(h,e.positions,c)}}function Ua(a,b,c,d,e){var f=a.id;if(i(f)||(f=g()),Xa=f,!i(e._version)&&"document"!==f)throw new A("The first CZML packet is required to be the document object.");if(a["delete"]===!0)b.removeById(f);else if("document"===f)Ja(a,e);else{var h=b.getOrCreateEntity(f),j=a.parent;i(j)&&(h.parent=b.getOrCreateEntity(j));for(var k=c.length-1;k>-1;k--)c[k](h,a,b,d)}Xa=void 0}function Va(a){var b,c=a._documentPacket.clock;if(!i(c)){if(!i(a._clock)){var f=a._entityCollection.computeAvailability();if(!f.start.equals(r.MINIMUM_VALUE)){var g=f.start,j=f.stop,k=s.secondsDifference(j,g),l=Math.round(k/120);return b=new R,b.startTime=s.clone(g),b.stopTime=s.clone(j),b.clockRange=d.LOOP_STOP,b.multiplier=l,b.currentTime=s.clone(g),b.clockStep=e.SYSTEM_CLOCK_MULTIPLIER,a._clock=b,!0}}return!1}if(i(a._clock)?b=a._clock.clone():(b=new R,b.startTime=r.MINIMUM_VALUE.clone(),b.stopTime=r.MAXIMUM_VALUE.clone(),b.currentTime=r.MINIMUM_VALUE.clone(),b.clockRange=d.LOOP_STOP,b.clockStep=e.SYSTEM_CLOCK_MULTIPLIER,b.multiplier=1),i(c.interval)){bb.iso8601=c.interval;var m=C.fromIso8601(bb);b.startTime=m.start,b.stopTime=m.stop}return i(c.currentTime)&&(b.currentTime=s.fromIso8601(c.currentTime)),i(c.range)&&(b.clockRange=h(d[c.range],d.LOOP_STOP)),i(c.step)&&(b.clockStep=h(e[c.step],e.SYSTEM_CLOCK_MULTIPLIER)),i(c.multiplier)&&(b.multiplier=c.multiplier),b.equals(a._clock)?!1:(a._clock=b.clone(a._clock),!0)}function Wa(a,b,c,d){Q.setLoading(a,!0);var e=a._entityCollection;d&&(a._version=void 0,a._documentPacket=new cb,e.removeAll()),db._processCzml(b,e,c,void 0,a);var f=Va(a),g=a._documentPacket;i(g.name)&&a._name!==g.name?(a._name=g.name,f=!0):!i(a._name)&&i(c)&&(a._name=o(c),f=!0),Q.setLoading(a,!1),f&&a._changed.raiseEvent(a)}var Xa,Ya=new b,Za=new B,$a=new c,_a=new C,ab={HERMITE:p,LAGRANGE:t,LINEAR:u},bb={iso8601:void 0},cb=function(){this.name=void 0,this.clock=void 0},db=function(a){this._name=a,this._changed=new m,this._error=new m,this._isLoading=!1,this._loading=new m,this._clock=void 0,this._documentPacket=new cb,this._version=void 0,this._entityCollection=new U};return j(db.prototype,{name:{get:function(){return this._name}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}}}),db.updaters=[Ia,Ka,La,Ma,Na,Aa,Ba,Oa,Pa,Qa,Ta,Ra,Ca,Da,Sa,Ea,Ha],db.prototype.process=function(a,b){Wa(this,a,b,!1)},db.prototype.load=function(a,b){Wa(this,a,b,!0)},db.prototype.processUrl=function(a){Q.setLoading(this,!0);var b=this;return I(v(a),function(c){Wa(b,c,a,!1)}).otherwise(function(a){return Q.setLoading(b,!1),b._error.raiseEvent(b,a),I.reject(a)})},db.prototype.loadUrl=function(a){Q.setLoading(this,!0);var b=this;return I(v(a),function(c){Wa(b,c,a,!0)}).otherwise(function(a){return Q.setLoading(b,!1),b._error.raiseEvent(b,a),I.reject(a)})},db.processPacketData=va,db.processPositionPacketData=xa,db.processMaterialPacketData=za,db._processCzml=function(a,b,c,d,e){if(d=i(d)?d:db.updaters,q(a))for(var f=0,g=a.length;g>f;f++)Ua(a[f],b,d,c,e);else Ua(a,b,d,c,e)},db}),c("DataSources/DataSourceCollection",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Event"],function(a,b,c,d,e,f){"use strict";var g=function(){this._dataSources=[],this._dataSourceAdded=new f,this._dataSourceRemoved=new f};return c(g.prototype,{length:{get:function(){return this._dataSources.length}},dataSourceAdded:{get:function(){return this._dataSourceAdded}},dataSourceRemoved:{get:function(){return this._dataSourceRemoved}}}),g.prototype.add=function(a){this._dataSources.push(a),this._dataSourceAdded.raiseEvent(this,a)},g.prototype.remove=function(b,c){c=a(c,!1);var d=this._dataSources.indexOf(b);return-1!==d?(this._dataSources.splice(d,1),this._dataSourceRemoved.raiseEvent(this,b),c&&"function"==typeof b.destroy&&b.destroy(),!0):!1},g.prototype.removeAll=function(b){b=a(b,!1);for(var c=this._dataSources,d=0,e=c.length;e>d;++d){var f=c[d];this._dataSourceRemoved.raiseEvent(this,f),b&&"function"==typeof f.destroy&&f.destroy()}c.length=0},g.prototype.contains=function(a){return-1!==this.indexOf(a)},g.prototype.indexOf=function(a){return this._dataSources.indexOf(a)},g.prototype.get=function(a){return this._dataSources[a]},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){return this.removeAll(!0),d(this)},g}),c("Shaders/Appearances/AllMaterialAppearanceFS",[],function(){"use strict";return"varying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec3 v_tangentEC;\nvarying vec3 v_binormalEC;\nvarying vec2 v_st;\nvoid main()\n{\nvec3 positionToEyeEC = -v_positionEC;\nmat3 tangentToEyeMatrix = czm_tangentToEyeSpaceMatrix(v_normalEC, v_tangentEC, v_binormalEC);\nvec3 normalEC;\n#ifdef FACE_FORWARD\nnormalEC = normalize(faceforward(v_normalEC, vec3(0.0, 0.0, 1.0), -v_normalEC));\n#else\nnormalEC = normalize(v_normalEC);\n#endif\nczm_materialInput materialInput;\nmaterialInput.normalEC = normalEC;\nmaterialInput.tangentToEyeMatrix = tangentToEyeMatrix;\nmaterialInput.positionToEyeEC = positionToEyeEC;\nmaterialInput.st = v_st;\nczm_material material = czm_getMaterial(materialInput);\n#ifdef FLAT\ngl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\ngl_FragColor = czm_phong(normalize(positionToEyeEC), material);\n#endif\n}\n"}),c("Shaders/Appearances/AllMaterialAppearanceVS",[],function(){"use strict"
;return"attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 normal;\nattribute vec3 tangent;\nattribute vec3 binormal;\nattribute vec2 st;\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec3 v_tangentEC;\nvarying vec3 v_binormalEC;\nvarying vec2 v_st;\nvoid main()\n{\nvec4 p = czm_computePosition();\nv_positionEC = (czm_modelViewRelativeToEye * p).xyz;\nv_normalEC = czm_normal * normal;\nv_tangentEC = czm_normal * tangent;\nv_binormalEC = czm_normal * binormal;\nv_st = st;\ngl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"}),c("Shaders/Appearances/BasicMaterialAppearanceFS",[],function(){"use strict";return"varying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvoid main()\n{\nvec3 positionToEyeEC = -v_positionEC;\nvec3 normalEC;\n#ifdef FACE_FORWARD\nnormalEC = normalize(faceforward(v_normalEC, vec3(0.0, 0.0, 1.0), -v_normalEC));\n#else\nnormalEC = normalize(v_normalEC);\n#endif\nczm_materialInput materialInput;\nmaterialInput.normalEC = normalEC;\nmaterialInput.positionToEyeEC = positionToEyeEC;\nczm_material material = czm_getMaterial(materialInput);\n#ifdef FLAT\ngl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\ngl_FragColor = czm_phong(normalize(positionToEyeEC), material);\n#endif\n}\n"}),c("Shaders/Appearances/BasicMaterialAppearanceVS",[],function(){"use strict";return"attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 normal;\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvoid main()\n{\nvec4 p = czm_computePosition();\nv_positionEC = (czm_modelViewRelativeToEye * p).xyz;\nv_normalEC = czm_normal * normal;\ngl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"}),c("Shaders/Appearances/TexturedMaterialAppearanceFS",[],function(){"use strict";return"varying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec2 v_st;\nvoid main()\n{\nvec3 positionToEyeEC = -v_positionEC;\nvec3 normalEC;\n#ifdef FACE_FORWARD\nnormalEC = normalize(faceforward(v_normalEC, vec3(0.0, 0.0, 1.0), -v_normalEC));\n#else\nnormalEC = normalize(v_normalEC);\n#endif\nczm_materialInput materialInput;\nmaterialInput.normalEC = normalEC;\nmaterialInput.positionToEyeEC = positionToEyeEC;\nmaterialInput.st = v_st;\nczm_material material = czm_getMaterial(materialInput);\n#ifdef FLAT\ngl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\ngl_FragColor = czm_phong(normalize(positionToEyeEC), material);\n#endif\n}\n"}),c("Shaders/Appearances/TexturedMaterialAppearanceVS",[],function(){"use strict";return"attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 normal;\nattribute vec2 st;\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec2 v_st;\nvoid main()\n{\nvec4 p = czm_computePosition();\nv_positionEC = (czm_modelViewRelativeToEye * p).xyz;\nv_normalEC = czm_normal * normal;\nv_st = st;\ngl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"}),c("Scene/CullFace",["../Core/freezeObject"],function(a){"use strict";var b={FRONT:1028,BACK:1029,FRONT_AND_BACK:1032};return a(b)}),c("Scene/Appearance",["../Core/clone","../Core/combine","../Core/defaultValue","../Core/defined","../Core/defineProperties","./BlendingState","./CullFace"],function(a,b,c,d,e,f,g){"use strict";var h=function(a){a=c(a,c.EMPTY_OBJECT),this.material=a.material,this.translucent=c(a.translucent,!0),this._vertexShaderSource=a.vertexShaderSource,this._fragmentShaderSource=a.fragmentShaderSource,this._renderState=a.renderState,this._closed=c(a.closed,!1)};return e(h.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}}}),h.prototype.getFragmentShaderSource=function(){var a=[];return this.flat&&a.push("#define FLAT"),this.faceForward&&a.push("#define FACE_FORWARD"),d(this.material)&&a.push(this.material.shaderSource),a.push(this.fragmentShaderSource),a.join("\n")},h.prototype.isTranslucent=function(){return d(this.material)&&this.material.isTranslucent()||!d(this.material)&&this.translucent},h.prototype.getRenderState=function(){var b=this.isTranslucent(),c=a(this.renderState,!1);return b?(c.depthMask=!1,c.blending=f.ALPHA_BLEND):c.depthMask=!0,c},h.getDefaultRenderState=function(a,c,e){var h={depthTest:{enabled:!0}};return a&&(h.depthMask=!1,h.blending=f.ALPHA_BLEND),c&&(h.cull={enabled:!0,face:g.BACK}),d(e)&&(h=b(e,h,!0)),h},h}),c("Renderer/PixelDatatype",["../Core/freezeObject"],function(a){"use strict";var b={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126,UNSIGNED_INT_24_8_WEBGL:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,validate:function(a){return a===b.UNSIGNED_BYTE||a===b.UNSIGNED_SHORT||a===b.UNSIGNED_INT||a===b.FLOAT||a===b.UNSIGNED_INT_24_8_WEBGL||a===b.UNSIGNED_SHORT_4_4_4_4||a===b.UNSIGNED_SHORT_5_5_5_1||a===b.UNSIGNED_SHORT_5_6_5}};return a(b)}),c("Renderer/CubeMapFace",["../Core/defaultValue","../Core/defineProperties","../Core/DeveloperError","./PixelDatatype"],function(a,b){"use strict";var c=function(a,b,c,d,e,f,g,h,i){this._gl=a,this._texture=b,this._textureTarget=c,this._targetFace=d,this._pixelFormat=e,this._pixelDatatype=f,this._size=g,this._preMultiplyAlpha=h,this._flipY=i};return b(c.prototype,{pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},_target:{get:function(){return this._targetFace}}}),c.prototype.copyFrom=function(b,c,d){c=a(c,0),d=a(d,0);var e=this._gl,f=this._textureTarget;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._preMultiplyAlpha),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,this._flipY),e.activeTexture(e.TEXTURE0),e.bindTexture(f,this._texture),b.arrayBufferView?e.texSubImage2D(this._targetFace,0,c,d,b.width,b.height,this._pixelFormat,this._pixelDatatype,b.arrayBufferView):e.texSubImage2D(this._targetFace,0,c,d,this._pixelFormat,this._pixelDatatype,b),e.bindTexture(f,null)},c.prototype.copyFromFramebuffer=function(b,c,d,e,f,g){b=a(b,0),c=a(c,0),d=a(d,0),e=a(e,0),f=a(f,this._size),g=a(g,this._size);var h=this._gl,i=this._textureTarget;h.activeTexture(h.TEXTURE0),h.bindTexture(i,this._texture),h.copyTexSubImage2D(this._targetFace,0,b,c,d,e,f,g),h.bindTexture(i,null)},c}),c("Renderer/MipmapHint",["../Core/freezeObject"],function(a){"use strict";var b={DONT_CARE:4352,FASTEST:4353,NICEST:4354,validate:function(a){return a===b.DONT_CARE||a===b.FASTEST||a===b.NICEST}};return a(b)}),c("Renderer/TextureMagnificationFilter",["../Core/freezeObject"],function(a){"use strict";var b={NEAREST:9728,LINEAR:9729,validate:function(a){return a===b.NEAREST||a===b.LINEAR}};return a(b)}),c("Renderer/TextureMinificationFilter",["../Core/freezeObject"],function(a){"use strict";var b={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,validate:function(a){return a===b.NEAREST||a===b.LINEAR||a===b.NEAREST_MIPMAP_NEAREST||a===b.LINEAR_MIPMAP_NEAREST||a===b.NEAREST_MIPMAP_LINEAR||a===b.LINEAR_MIPMAP_LINEAR}};return a(b)}),c("Renderer/TextureWrap",["../Core/freezeObject"],function(a){"use strict";var b={CLAMP_TO_EDGE:33071,REPEAT:10497,MIRRORED_REPEAT:33648,validate:function(a){return a===b.CLAMP_TO_EDGE||a===b.REPEAT||a===b.MIRRORED_REPEAT}};return a(b)}),c("Renderer/CubeMap",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Math","./CubeMapFace","./MipmapHint","./PixelDatatype","./TextureMagnificationFilter","./TextureMinificationFilter","./TextureWrap"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=function(a,b,c,d,e,f,h,i,j){this._gl=a,this._textureFilterAnisotropic=b,this._textureTarget=c,this._texture=d,this._pixelFormat=e,this._pixelDatatype=f,this._size=h,this._preMultiplyAlpha=i,this._flipY=j,this._sampler=void 0,this._positiveX=new g(a,d,c,a.TEXTURE_CUBE_MAP_POSITIVE_X,e,f,h,i,j),this._negativeX=new g(a,d,c,a.TEXTURE_CUBE_MAP_NEGATIVE_X,e,f,h,i,j),this._positiveY=new g(a,d,c,a.TEXTURE_CUBE_MAP_POSITIVE_Y,e,f,h,i,j),this._negativeY=new g(a,d,c,a.TEXTURE_CUBE_MAP_NEGATIVE_Y,e,f,h,i,j),this._positiveZ=new g(a,d,c,a.TEXTURE_CUBE_MAP_POSITIVE_Z,e,f,h,i,j),this._negativeZ=new g(a,d,c,a.TEXTURE_CUBE_MAP_NEGATIVE_Z,e,f,h,i,j),this.sampler=void 0};return c(m.prototype,{positiveX:{get:function(){return this._positiveX}},negativeX:{get:function(){return this._negativeX}},positiveY:{get:function(){return this._positiveY}},negativeY:{get:function(){return this._negativeY}},positiveZ:{get:function(){return this._positiveZ}},negativeZ:{get:function(){return this._negativeZ}},sampler:{get:function(){return this._sampler},set:function(a){var c=!0;if(!b(a)){c=!1;var d=k.LINEAR,f=j.LINEAR;this._pixelDatatype===i.FLOAT&&(d=k.NEAREST,f=j.NEAREST),a={wrapS:l.CLAMP_TO_EDGE,wrapT:l.CLAMP_TO_EDGE,minificationFilter:d,magnificationFilter:f,maximumAnisotropy:1}}if(this._pixelDatatype===i.FLOAT){if(a.minificationFilter!==k.NEAREST&&a.minificationFilter!==k.NEAREST_MIPMAP_NEAREST)throw new e("Only NEAREST and NEAREST_MIPMAP_NEAREST minification filters are supported for floating point textures.");if(a.magnificationFilter!==j.NEAREST)throw new e("Only the NEAREST magnification filter is supported for floating point textures.")}var g=this._gl,h=this._textureTarget;g.activeTexture(g.TEXTURE0),g.bindTexture(h,this._texture),g.texParameteri(h,g.TEXTURE_MIN_FILTER,a.minificationFilter),g.texParameteri(h,g.TEXTURE_MAG_FILTER,a.magnificationFilter),g.texParameteri(h,g.TEXTURE_WRAP_S,a.wrapS),g.texParameteri(h,g.TEXTURE_WRAP_T,a.wrapT),b(this._textureFilterAnisotropic)&&g.texParameteri(h,this._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.maximumAnisotropy),g.bindTexture(h,null),this._sampler=c?{wrapS:a.wrapS,wrapT:a.wrapT,minificationFilter:a.minificationFilter,magnificationFilter:a.magnificationFilter,maximumAnisotropy:a.maximumAnisotropy}:void 0}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},width:{get:function(){return this._size}},height:{get:function(){return this._size}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},_target:{get:function(){return this._textureTarget}}}),m.prototype.generateMipmap=function(b){b=a(b,h.DONT_CARE);var c=this._gl,d=this._textureTarget;c.hint(c.GENERATE_MIPMAP_HINT,b),c.activeTexture(c.TEXTURE0),c.bindTexture(d,this._texture),c.generateMipmap(d),c.bindTexture(d,null)},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return this._gl.deleteTexture(this._texture),this._positiveX=d(this._positiveX),this._negativeX=d(this._negativeX),this._positiveY=d(this._positiveY),this._negativeY=d(this._negativeY),this._positiveZ=d(this._positiveZ),this._negativeZ=d(this._negativeZ),d(this)},m}),c("Renderer/Texture",["../Core/Cartesian2","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Math","../Core/PixelFormat","./MipmapHint","./PixelDatatype","./TextureMagnificationFilter","./TextureMinificationFilter","./TextureWrap"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=function(d,e){e=b(e,b.EMPTY_OBJECT);var g=e.source,i=c(g)?g.width:e.width,k=c(g)?g.height:e.height,l=b(e.pixelFormat,h.RGBA),m=b(e.pixelDatatype,j.UNSIGNED_BYTE);if(m===j.FLOAT&&!d.floatingPointTexture)throw new f("When options.pixelDatatype is FLOAT, this WebGL implementation must support the OES_texture_float extension.  Check context.floatingPointTexture.");if(h.isDepthFormat(l)&&!d.depthTexture)throw new f("When options.pixelFormat is DEPTH_COMPONENT or DEPTH_STENCIL, this WebGL implementation must support WEBGL_depth_texture.  Check context.depthTexture.");var n=e.preMultiplyAlpha||l===h.RGB||l===h.LUMINANCE,o=b(e.flipY,!0),p=d._gl,q=p.TEXTURE_2D,r=p.createTexture();p.activeTexture(p.TEXTURE0),p.bindTexture(q,r),c(g)?(p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,o),c(g.arrayBufferView)?p.texImage2D(q,0,l,i,k,0,l,m,g.arrayBufferView):c(g.framebuffer)?(g.framebuffer!==d.defaultFramebuffer&&g.framebuffer._bind(),p.copyTexImage2D(q,0,l,g.xOffset,g.yOffset,i,k,0),g.framebuffer!==d.defaultFramebuffer&&g.framebuffer._unBind()):p.texImage2D(q,0,l,l,m,g)):p.texImage2D(q,0,l,i,k,0,l,m,null),p.bindTexture(q,null),this._context=d,this._textureFilterAnisotropic=d._textureFilterAnisotropic,this._textureTarget=q,this._texture=r,this._pixelFormat=l,this._pixelDatatype=m,this._width=i,this._height=k,this._dimensions=new a(i,k),this._preMultiplyAlpha=n,this._flipY=o,this._sampler=void 0,this.sampler=void 0};return d(n.prototype,{sampler:{get:function(){return this._sampler},set:function(a){var b=!0;if(!c(a)){b=!1;var d=l.LINEAR,e=k.LINEAR;this._pixelDatatype===j.FLOAT&&(d=l.NEAREST,e=k.NEAREST),a={wrapS:m.CLAMP_TO_EDGE,wrapT:m.CLAMP_TO_EDGE,minificationFilter:d,magnificationFilter:e,maximumAnisotropy:1}}if(this._pixelDatatype===j.FLOAT){if(a.minificationFilter!==l.NEAREST&&a.minificationFilter!==l.NEAREST_MIPMAP_NEAREST)throw new f("Only NEAREST and NEAREST_MIPMAP_NEAREST minification filters are supported for floating point textures.");if(a.magnificationFilter!==k.NEAREST)throw new f("Only the NEAREST magnification filter is supported for floating point textures.")}var g=this._context._gl,h=this._textureTarget;g.activeTexture(g.TEXTURE0),g.bindTexture(h,this._texture),g.texParameteri(h,g.TEXTURE_MIN_FILTER,a.minificationFilter),g.texParameteri(h,g.TEXTURE_MAG_FILTER,a.magnificationFilter),g.texParameteri(h,g.TEXTURE_WRAP_S,a.wrapS),g.texParameteri(h,g.TEXTURE_WRAP_T,a.wrapT),c(this._textureFilterAnisotropic)&&g.texParameteri(h,this._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.maximumAnisotropy),g.bindTexture(h,null),this._sampler=b?{wrapS:a.wrapS,wrapT:a.wrapT,minificationFilter:a.minificationFilter,magnificationFilter:a.magnificationFilter,maximumAnisotropy:a.maximumAnisotropy}:void 0}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},dimensions:{get:function(){return this._dimensions}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},_target:{get:function(){return this._textureTarget}}}),n.prototype.copyFrom=function(a,c,d){c=b(c,0),d=b(d,0);var e=this._context._gl,f=this._textureTarget;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._preMultiplyAlpha),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,this._flipY),e.activeTexture(e.TEXTURE0),e.bindTexture(f,this._texture),a.arrayBufferView?e.texSubImage2D(f,0,c,d,a.width,a.height,this._pixelFormat,this._pixelDatatype,a.arrayBufferView):e.texSubImage2D(f,0,c,d,this._pixelFormat,this._pixelDatatype,a),e.bindTexture(f,null)},n.prototype.copyFromFramebuffer=function(a,c,d,e,f,g){a=b(a,0),c=b(c,0),d=b(d,0),e=b(e,0),f=b(f,this._width),g=b(g,this._height);var h=this._context._gl,i=this._textureTarget;h.activeTexture(h.TEXTURE0),h.bindTexture(i,this._texture),h.copyTexSubImage2D(i,0,a,c,d,e,f,g),h.bindTexture(i,null)},n.prototype.generateMipmap=function(a){a=b(a,i.DONT_CARE);var c=this._context._gl,d=this._textureTarget;c.hint(c.GENERATE_MIPMAP_HINT,a),c.activeTexture(c.TEXTURE0),c.bindTexture(d,this._texture),c.generateMipmap(d),c.bindTexture(d,null)},n.prototype.isDestroyed=function(){return!1},n.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),e(this)},n}),c("Shaders/Materials/BumpMapMaterial",[],function(){"use strict";return"uniform sampler2D image;\nuniform float strength;\nuniform vec2 repeat;\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\nczm_material material = czm_getDefaultMaterial(materialInput);\nvec2 st = materialInput.st;\nvec2 centerPixel = fract(repeat * st);\nfloat centerBump = texture2D(image, centerPixel).channel;\nfloat imageWidth = float(imageDimensions.x);\nvec2 rightPixel = fract(repeat * (st + vec2(1.0 / imageWidth, 0.0)));\nfloat rightBump = texture2D(image, rightPixel).channel;\nfloat imageHeight = float(imageDimensions.y);\nvec2 leftPixel = fract(repeat * (st + vec2(0.0, 1.0 / imageHeight)));\nfloat topBump = texture2D(image, leftPixel).channel;\nvec3 normalTangentSpace = normalize(vec3(centerBump - rightBump, centerBump - topBump, clamp(1.0 - strength, 0.1, 1.0)));\nvec3 normalEC = materialInput.tangentToEyeMatrix * normalTangentSpace;\nmaterial.normal = normalEC;\nmaterial.diffuse = vec3(0.01);\nreturn material;\n}\n"}),c("Shaders/Materials/CheckerboardMaterial",[],function(){"use strict";return"uniform vec4 lightColor;\nuniform vec4 darkColor;\nuniform vec2 repeat;\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\nczm_material material = czm_getDefaultMaterial(materialInput);\nvec2 st = materialInput.st;\nfloat b = mod(floor(repeat.s * st.s) + floor(repeat.t * st.t), 2.0);\nfloat scaledWidth = fract(repeat.s * st.s);\nscaledWidth = abs(scaledWidth - floor(scaledWidth + 0.5));\nfloat scaledHeight = fract(repeat.t * st.t);\nscaledHeight = abs(scaledHeight - floor(scaledHeight + 0.5));\nfloat value = min(scaledWidth, scaledHeight);\nvec4 currentColor = mix(lightColor, darkColor, b);\nvec4 color = czm_antialias(lightColor, darkColor, currentColor, value, 0.03);\nmaterial.diffuse = color.rgb;\nmaterial.alpha = color.a;\nreturn material;\n}\n"}),c("Shaders/Materials/DotMaterial",[],function(){"use strict";return"uniform vec4 lightColor;\nuniform vec4 darkColor;\nuniform vec2 repeat;\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\nczm_material material = czm_getDefaultMaterial(materialInput);\nfloat b = smoothstep(0.3, 0.32, length(fract(repeat * materialInput.st) - 0.5));\nvec4 color = mix(lightColor, darkColor, b);\nmaterial.diffuse = color.rgb;\nmaterial.alpha = color.a;\nreturn material;\n}\n"}),c("Shaders/Materials/FadeMaterial",[],function(){"use strict";return"uniform vec4 fadeInColor;\nuniform vec4 fadeOutColor;\nuniform float maximumDistance;\nuniform bool repeat;\nuniform vec2 fadeDirection;\nuniform vec2 time;\nfloat getTime(float t, float coord)\n{\nfloat scalar = 1.0 / maximumDistance;\nfloat q  = distance(t, coord) * scalar;\nif (repeat)\n{\nfloat r = distance(t, coord + 1.0) * scalar;\nfloat s = distance(t, coord - 1.0) * scalar;\nq = min(min(r, s), q);\n}\nreturn clamp(q, 0.0, 1.0);\n}\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\nczm_material material = czm_getDefaultMaterial(materialInput);\nvec2 st = materialInput.st;\nfloat s = getTime(time.x, st.s) * fadeDirection.s;\nfloat t = getTime(time.y, st.t) * fadeDirection.t;\nfloat u = length(vec2(s, t));\nvec4 color = mix(fadeInColor, fadeOutColor, u);\nmaterial.emission = color.rgb;\nmaterial.alpha = color.a;\nreturn material;\n}\n"}),c("Shaders/Materials/GridMaterial",[],function(){"use strict";return"#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\nuniform vec4 color;\nuniform float cellAlpha;\nuniform vec2 lineCount;\nuniform vec2 lineThickness;\nuniform vec2 lineOffset;\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\nczm_material material = czm_getDefaultMaterial(materialInput);\nvec2 st = materialInput.st;\nfloat scaledWidth = fract(lineCount.s * st.s - lineOffset.s);\nscaledWidth = abs(scaledWidth - floor(scaledWidth + 0.5));\nfloat scaledHeight = fract(lineCount.t * st.t - lineOffset.t);\nscaledHeight = abs(scaledHeight - floor(scaledHeight + 0.5));\nfloat value;\n#ifdef GL_OES_standard_derivatives\nconst float fuzz = 1.2;\nvec2 thickness = (lineThickness * czm_resolutionScale) - 1.0;\nvec2 dx = abs(dFdx(st));\nvec2 dy = abs(dFdy(st));\nvec2 dF = vec2(max(dx.s, dy.s), max(dx.t, dy.t)) * lineCount;\nvalue = min(\nsmoothstep(dF.s * thickness.s, dF.s * (fuzz + thickness.s), scaledWidth),\nsmoothstep(dF.t * thickness.t, dF.t * (fuzz + thickness.t), scaledHeight));\n#else\nconst float fuzz = 0.05;\nvec2 range = 0.5 - (lineThickness * 0.05);\nvalue = min(\n1.0 - smoothstep(range.s, range.s + fuzz, scaledWidth),\n1.0 - smoothstep(range.t, range.t + fuzz, scaledHeight));\n#endif\nfloat dRim = 1.0 - abs(dot(materialInput.normalEC, normalize(materialInput.positionToEyeEC)));\nfloat sRim = smoothstep(0.8, 1.0, dRim);\nvalue *= (1.0 - sRim);\nvec3 halfColor = color.rgb * 0.5;\nmaterial.diffuse = halfColor;\nmaterial.emission = halfColor;\nmaterial.alpha = color.a * (1.0 - ((1.0 - cellAlpha) * value));\nreturn material;\n}\n"}),c("Shaders/Materials/NormalMapMaterial",[],function(){"use strict";return"uniform sampler2D image;\nuniform float strength;\nuniform vec2 repeat;\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\nczm_material material = czm_getDefaultMaterial(materialInput);\nvec4 textureValue = texture2D(image, fract(repeat * materialInput.st));\nvec3 normalTangentSpace = textureValue.channels;\nnormalTangentSpace.xy = normalTangentSpace.xy * 2.0 - 1.0;\nnormalTangentSpace.z = clamp(1.0 - strength, 0.1, 1.0);\nnormalTangentSpace = normalize(normalTangentSpace);\nvec3 normalEC = materialInput.tangentToEyeMatrix * normalTangentSpace;\nmaterial.normal = normalEC;\nreturn material;\n}\n"}),c("Shaders/Materials/PolylineArrowMaterial",[],function(){"use strict";return"#extension GL_OES_standard_derivatives : enable\nuniform vec4 color;\nvarying float v_width;\nfloat getPointOnLine(vec2 p0, vec2 p1, float x)\n{\nfloat slope = (p0.y - p1.y) / (p0.x - p1.x);\nreturn slope * (x - p0.x) + p0.y;\n}\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\nczm_material material = czm_getDefaultMaterial(materialInput);\nvec2 st = materialInput.st;\nfloat base = 1.0 - abs(fwidth(st.s)) * 10.0;\nvec2 center = vec2(1.0, 0.5);\nfloat ptOnUpperLine = getPointOnLine(vec2(base, 1.0), center, st.s);\nfloat ptOnLowerLine = getPointOnLine(vec2(base, 0.0), center, st.s);\nfloat halfWidth = 0.15;\nfloat s = step(0.5 - halfWidth, st.t);\ns *= 1.0 - step(0.5 + halfWidth, st.t);\ns *= 1.0 - step(base, st.s);\nfloat t = step(base, materialInput.st.s);\nt *= 1.0 - step(ptOnUpperLine, st.t);\nt *= step(ptOnLowerLine, st.t);\nfloat dist;\nif (st.s < base)\n{\nfloat d1 = abs(st.t - (0.5 - halfWidth));\nfloat d2 = abs(st.t - (0.5 + halfWidth));\ndist = min(d1, d2);\n}\nelse\n{\nfloat d1 = czm_infinity;\nif (st.t < 0.5 - halfWidth && st.t > 0.5 + halfWidth)\n{\nd1 = abs(st.s - base);\n}\nfloat d2 = abs(st.t - ptOnUpperLine);\nfloat d3 = abs(st.t - ptOnLowerLine);\ndist = min(min(d1, d2), d3);\n}\nvec4 outsideColor = vec4(0.0);\nvec4 currentColor = mix(outsideColor, color, clamp(s + t, 0.0, 1.0));\nvec4 outColor = czm_antialias(outsideColor, color, currentColor, dist);\nmaterial.diffuse = outColor.rgb;\nmaterial.alpha = outColor.a;\nreturn material;\n}\n"}),c("Shaders/Materials/PolylineGlowMaterial",[],function(){"use strict";return"uniform vec4 color;\nuniform float glowPower;\nvarying float v_width;\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\nczm_material material = czm_getDefaultMaterial(materialInput);\nvec2 st = materialInput.st;\nfloat glow = glowPower / abs(st.t - 0.5) - (glowPower / 0.5);\nmaterial.emission = max(vec3(glow - 1.0 + color.rgb), color.rgb);\nmaterial.alpha = clamp(0.0, 1.0, glow) * color.a;\nreturn material;\n}\n"}),c("Shaders/Materials/PolylineOutlineMaterial",[],function(){"use strict";return"uniform vec4 color;\nuniform vec4 outlineColor;\nuniform float outlineWidth;\nvarying float v_width;\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\nczm_material material = czm_getDefaultMaterial(materialInput);\nvec2 st = materialInput.st;\nfloat halfInteriorWidth =  0.5 * (v_width - outlineWidth) / v_width;\nfloat b = step(0.5 - halfInteriorWidth, st.t);\nb *= 1.0 - step(0.5 + halfInteriorWidth, st.t);\nfloat d1 = abs(st.t - (0.5 - halfInteriorWidth));\nfloat d2 = abs(st.t - (0.5 + halfInteriorWidth));\nfloat dist = min(d1, d2);\nvec4 currentColor = mix(outlineColor, color, b);\nvec4 outColor = czm_antialias(outlineColor, color, currentColor, dist);\nmaterial.diffuse = outColor.rgb;\nmaterial.alpha = outColor.a;\nreturn material;\n}\n"}),c("Shaders/Materials/RimLightingMaterial",[],function(){"use strict";return"uniform vec4 color;\nuniform vec4 rimColor;\nuniform float width;\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\nczm_material material = czm_getDefaultMaterial(materialInput);\nfloat d = 1.0 - dot(materialInput.normalEC, normalize(materialInput.positionToEyeEC));\nfloat s = smoothstep(1.0 - width, 1.0, d);\nmaterial.diffuse = color.rgb;\nmaterial.emission = rimColor.rgb * s;\nmaterial.alpha = mix(color.a, rimColor.a, s);\nreturn material;\n}\n"}),c("Shaders/Materials/StripeMaterial",[],function(){"use strict";return"uniform vec4 evenColor;\nuniform vec4 oddColor;\nuniform float offset;\nuniform float repeat;\nuniform bool horizontal;\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\nczm_material material = czm_getDefaultMaterial(materialInput);\nfloat coord = mix(materialInput.st.s, materialInput.st.t, float(horizontal));\nfloat value = fract((coord - offset) * (repeat * 0.5));\nfloat dist = min(value, min(abs(value - 0.5), 1.0 - value));\nvec4 currentColor = mix(evenColor, oddColor, step(0.5, value));\nvec4 color = czm_antialias(evenColor, oddColor, currentColor, dist);\nmaterial.diffuse = color.rgb;\nmaterial.alpha = color.a;\nreturn material;\n}\n"}),c("Shaders/Materials/Water",[],function(){"use strict";return"uniform sampler2D specularMap;\nuniform sampler2D normalMap;\nuniform vec4 baseWaterColor;\nuniform vec4 blendColor;\nuniform float frequency;\nuniform float animationSpeed;\nuniform float amplitude;\nuniform float specularIntensity;\nuniform float fadeFactor;\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\nczm_material material = czm_getDefaultMaterial(materialInput);\nfloat time = czm_frameNumber * animationSpeed;\nfloat fade = max(1.0, (length(materialInput.positionToEyeEC) / 10000000000.0) * frequency * fadeFactor);\nfloat specularMapValue = texture2D(specularMap, materialInput.st).r;\nvec4 noise = czm_getWaterNoise(normalMap, materialInput.st * frequency, time, 0.0);\nvec3 normalTangentSpace = noise.xyz * vec3(1.0, 1.0, (1.0 / amplitude));\nnormalTangentSpace.xy /= fade;\nnormalTangentSpace = mix(vec3(0.0, 0.0, 50.0), normalTangentSpace, specularMapValue);\nnormalTangentSpace = normalize(normalTangentSpace);\nfloat tsPerturbationRatio = clamp(dot(normalTangentSpace, vec3(0.0, 0.0, 1.0)), 0.0, 1.0);\nmaterial.alpha = specularMapValue;\nmaterial.diffuse = mix(blendColor.rgb, baseWaterColor.rgb, specularMapValue);\nmaterial.diffuse += (0.1 * tsPerturbationRatio);\nmaterial.normal = normalize(materialInput.tangentToEyeMatrix * normalTangentSpace);\nmaterial.specular = specularIntensity;\nmaterial.shininess = 10.0;\nreturn material;\n}\n"}),c("Scene/Material",["../Core/Cartesian2","../Core/clone","../Core/Color","../Core/combine","../Core/createGuid","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/isArray","../Core/loadImage","../Core/Matrix2","../Core/Matrix3","../Core/Matrix4","../Renderer/CubeMap","../Renderer/Texture","../Shaders/Materials/BumpMapMaterial","../Shaders/Materials/CheckerboardMaterial","../Shaders/Materials/DotMaterial","../Shaders/Materials/FadeMaterial","../Shaders/Materials/GridMaterial","../Shaders/Materials/NormalMapMaterial","../Shaders/Materials/PolylineArrowMaterial","../Shaders/Materials/PolylineGlowMaterial","../Shaders/Materials/PolylineOutlineMaterial","../Shaders/Materials/RimLightingMaterial","../Shaders/Materials/StripeMaterial","../Shaders/Materials/Water","../ThirdParty/when"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){"use strict";function E(a,c){a=f(a,f.EMPTY_OBJECT),c._strict=f(a.strict,!1),c._count=f(a.count,0),c._template=b(f(a.fabric,f.EMPTY_OBJECT)),c._template.uniforms=b(f(c._template.uniforms,f.EMPTY_OBJECT)),c._template.materials=b(f(c._template.materials,f.EMPTY_OBJECT)),c.type=g(c._template.type)?c._template.type:e(),c.shaderSource="",c.materials={},c.uniforms={},c._uniforms={},c._translucentFunctions=[];var h,i=S._materialCache.getMaterial(c.type);if(g(i)){var j=b(i.fabric,!0);c._template=d(c._template,j,!0),h=i.translucent}I(c),g(i)||S._materialCache.addMaterial(c.type,c),J(c),M(c),P(c);var k=0===c._translucentFunctions.length?!0:void 0;if(h=f(h,k),h=f(a.translucent,h),g(h))if("function"==typeof h){var l=function(){return h(c)};c._translucentFunctions.push(l)}else c._translucentFunctions.push(h)}function F(a,b,c,d){if(g(a))for(var e in a)if(a.hasOwnProperty(e)){var f=-1!==b.indexOf(e);(d&&!f||!d&&f)&&c(e,b)}}function G(a,b){for(var c="fabric: property name '"+a+"' is not valid. It should be ",d=0;d<b.length;d++){var e="'"+b[d]+"'";c+=d===b.length-1?"or "+e+".":e+", "}throw new j(c)}function H(a){var b="fabric: uniforms and materials cannot share the same property '"+a+"'";throw new j(b)}function I(a){var b=a._template,c=b.uniforms,d=b.materials,e=b.components;if(g(e)&&g(b.source))throw new j("fabric: cannot have source and components in the same template.");F(b,T,G,!0),F(e,U,G,!0);var f=[];for(var h in d)d.hasOwnProperty(h)&&f.push(h);F(c,f,H,!1)}function J(a){var b=a._template.components,c=a._template.source;if(g(c))a.shaderSource+=c+"\n";else{if(a.shaderSource+="czm_material czm_getMaterial(czm_materialInput materialInput)\n{\n",a.shaderSource+="czm_material material = czm_getDefaultMaterial(materialInput);\n",g(b))for(var d in b)b.hasOwnProperty(d)&&(a.shaderSource+="material."+d+" = "+b[d]+";\n");a.shaderSource+="return material;\n}\n"}}function K(a){return function(b,c){var d,e,f=b.uniforms,h=f[a],i=b._textures[a];if(h instanceof q&&h!==i)return S._textureCache.releaseTexture(b._texturePaths[a]),b._texturePaths[a]=void 0,b._textures[a]=h,d=a+"Dimensions",f.hasOwnProperty(d)&&(e=f[d],e.x=h._width,e.y=h._height),void 0;if(g(i)||(b._texturePaths[a]=void 0,i=b._textures[a]=c.defaultTexture,d=a+"Dimensions",f.hasOwnProperty(d)&&(e=f[d],e.x=i._width,e.y=i._height)),h!==S.DefaultImageId&&h!==b._texturePaths[a]){var j=S._textureCache.getTexture(h);g(j)?(S._textureCache.releaseTexture(b._texturePaths[a]),b._textures[a]=j):D(l(h),function(c){b._loadedImages.push({id:a,image:c})}),b._texturePaths[a]=h}}}function L(a){return function(b,c){var d=b.uniforms[a];if(d instanceof p)return S._textureCache.releaseTexture(b._texturePaths[a]),b._texturePaths[a]=void 0,b._textures[a]=d,void 0;if(g(b._textures[a])||(b._texturePaths[a]=void 0,b._textures[a]=c.defaultCubeMap),d!==S.DefaultCubeMapId){var e=d.positiveX+d.negativeX+d.positiveY+d.negativeY+d.positiveZ+d.negativeZ;if(e!==b._texturePaths[a]){var f=S._textureCache.getTexture(e);if(g(f))S._textureCache.releaseTexture(b._texturePaths[a]),b._textures[a]=f;else{var h=[l(d.positiveX),l(d.negativeX),l(d.positiveY),l(d.negativeY),l(d.positiveZ),l(d.negativeZ)];D.all(h).then(function(c){b._loadedCubeMaps.push({id:a,images:c})})}b._texturePaths[a]=e}}}}function M(a){var b=a._template.uniforms;for(var c in b)b.hasOwnProperty(c)&&N(a,c)}function N(a,b){var c=a._strict,d=a._template.uniforms,e=d[b],f=O(e);if(!g(f))throw new j("fabric: uniform '"+b+"' has invalid type.");if("channels"===f){if(0===Q(a,b,e,!1)&&c)throw new j("strict: shader source does not use channels '"+b+"'.")}else{if("sampler2D"===f){var h=b+"Dimensions";R(a,h)>0&&(d[h]={type:"ivec3",x:1,y:1},N(a,h))}var i=new RegExp("uniform\\s+"+f+"\\s+"+b+"\\s*;");if(!i.test(a.shaderSource)){var k="uniform "+f+" "+b+";";a.shaderSource=k+a.shaderSource}var l=b+"_"+a._count++;if(1===Q(a,b,l)&&c)throw new j("strict: shader source does not use uniform '"+b+"'.");if(a.uniforms[b]=e,"sampler2D"===f)a._uniforms[l]=function(){return a._textures[b]},
a._updateFunctions.push(K(b));else if("samplerCube"===f)a._uniforms[l]=function(){return a._textures[b]},a._updateFunctions.push(L(b));else if(-1!==f.indexOf("mat")){var m=new V[f];a._uniforms[l]=function(){return V[f].fromColumnMajorArray(a.uniforms[b],m)}}else a._uniforms[l]=function(){return a.uniforms[b]}}}function O(a){var b=a.type;if(!g(b)){var c=typeof a;if("number"===c)b="float";else if("boolean"===c)b="bool";else if("string"===c)b=/^([rgba]){1,4}$/i.test(a)?"channels":a===S.DefaultCubeMapId?"samplerCube":"sampler2D";else if("object"===c)if(k(a))(4===a.length||9===a.length||16===a.length)&&(b="mat"+Math.sqrt(a.length));else{var d=0;for(var e in a)a.hasOwnProperty(e)&&(d+=1);d>=2&&4>=d?b="vec"+d:6===d&&(b="samplerCube")}}return b}function P(a){var b=a._strict,c=a._template.materials;for(var e in c)if(c.hasOwnProperty(e)){var f=new S({strict:b,fabric:c[e],count:a._count});a._count=f._count,a._uniforms=d(a._uniforms,f._uniforms,!0),a.materials[e]=f,a._translucentFunctions=a._translucentFunctions.concat(f._translucentFunctions);var g="czm_getMaterial",h=g+"_"+a._count++;Q(f,g,h),a.shaderSource=f.shaderSource+a.shaderSource;var i=h+"(materialInput)";if(0===Q(a,e,i)&&b)throw new j("strict: shader source does not use material '"+e+"'.")}}function Q(a,b,c,d){d=f(d,!0);var e=0,g="([\\w])?",h="([\\w"+(d?".":"")+"])?",i=new RegExp(h+b+g,"g");return a.shaderSource=a.shaderSource.replace(i,function(a,b,d){return b||d?a:(e+=1,c)}),e}function R(a,b,c){return Q(a,b,b,c)}var S=function(a){this.type=void 0,this.shaderSource=void 0,this.materials=void 0,this.uniforms=void 0,this._uniforms=void 0,this.translucent=void 0,this._strict=void 0,this._template=void 0,this._count=void 0,this._texturePaths={},this._loadedImages=[],this._loadedCubeMaps=[],this._textures={},this._updateFunctions=[],E(a,this),h(this,{type:{value:this.type,writable:!1}}),g(S._uniformList[this.type])||(S._uniformList[this.type]=Object.keys(this._uniforms))};S._uniformList={},S.fromType=function(a,b){var c=new S({fabric:{type:a}});if(g(b))for(var d in b)b.hasOwnProperty(d)&&(c.uniforms[d]=b[d]);return c},S.prototype.isTranslucent=function(){if(g(this.translucent))return"function"==typeof this.translucent?this.translucent():this.translucent;for(var a=!0,b=this._translucentFunctions,c=b.length,d=0;c>d;++d){var e=b[d];if(a="function"==typeof e?a&&e():a&&e,!a)break}return a},S.prototype.update=function(a){var b,c,d=this._loadedImages,e=d.length;for(b=0;e>b;++b){var f=d[b];c=f.id;var h=f.image,i=S._textureCache.getTexture(this._texturePaths[c]);g(i)||(i=a.createTexture2D({source:h}),S._textureCache.addTexture(this._texturePaths[c],i)),this._textures[c]=i;var j=c+"Dimensions";if(this.uniforms.hasOwnProperty(j)){var k=this.uniforms[j];k.x=i._width,k.y=i._height}}d.length=0;var l=this._loadedCubeMaps;for(e=l.length,b=0;e>b;++b){var m=l[b];c=m.id;var n=m.images,o=S._textureCache.getTexture(this._texturePaths[c]);g(o)||(o=a.createCubeMap({source:{positiveX:n[0],negativeX:n[1],positiveY:n[2],negativeY:n[3],positiveZ:n[4],negativeZ:n[5]}}),S._textureCache.addTexture(this._texturePaths[c],o)),this._textures[c]=o}l.length=0;var p=this._updateFunctions;for(e=p.length,b=0;e>b;++b)p[b](this,a);var q=this.materials;for(var r in q)q.hasOwnProperty(r)&&q[r].update(a)},S.prototype.isDestroyed=function(){return!1},S.prototype.destroy=function(){var a=this.materials,b=this.uniforms;for(var c in b)if(b.hasOwnProperty(c)){var d=this._texturePaths[c];S._textureCache.releaseTexture(d)}for(var e in a)a.hasOwnProperty(e)&&a[e].destroy();return i(this)};var T=["type","materials","uniforms","components","source"],U=["diffuse","specular","shininess","normal","emission","alpha"],V={mat2:m,mat3:n,mat4:o};return S._textureCache={_textures:{},addTexture:function(a,b){this._textures[a]={texture:b,count:1}},getTexture:function(a){var b=this._textures[a];return g(b)?(b.count++,b.texture):void 0},releaseTexture:function(a){var b=this._textures[a];g(b)&&0===--b.count&&(b.texture=b.texture&&b.texture.destroy(),this._textures[a]=void 0)}},S._materialCache={_materials:{},addMaterial:function(a,b){this._materials[a]=b},getMaterial:function(a){return this._materials[a]}},S.DefaultImageId="czm_defaultImage",S.DefaultCubeMapId="czm_defaultCubeMap",S.ColorType="Color",S._materialCache.addMaterial(S.ColorType,{fabric:{type:S.ColorType,uniforms:{color:new c(1,0,0,.5)},components:{diffuse:"color.rgb",alpha:"color.a"}},translucent:function(a){return a.uniforms.color.alpha<1}}),S.ImageType="Image",S._materialCache.addMaterial(S.ImageType,{fabric:{type:S.ImageType,uniforms:{image:S.DefaultImageId,repeat:new a(1,1)},components:{diffuse:"texture2D(image, fract(repeat * materialInput.st)).rgb",alpha:"texture2D(image, fract(repeat * materialInput.st)).a"}},translucent:!0}),S.DiffuseMapType="DiffuseMap",S._materialCache.addMaterial(S.DiffuseMapType,{fabric:{type:S.DiffuseMapType,uniforms:{image:S.DefaultImageId,channels:"rgb",repeat:new a(1,1)},components:{diffuse:"texture2D(image, fract(repeat * materialInput.st)).channels"}},translucent:!1}),S.AlphaMapType="AlphaMap",S._materialCache.addMaterial(S.AlphaMapType,{fabric:{type:S.AlphaMapType,uniforms:{image:S.DefaultImageId,channel:"a",repeat:new a(1,1)},components:{alpha:"texture2D(image, fract(repeat * materialInput.st)).channel"}},translucent:!0}),S.SpecularMapType="SpecularMap",S._materialCache.addMaterial(S.SpecularMapType,{fabric:{type:S.SpecularMapType,uniforms:{image:S.DefaultImageId,channel:"r",repeat:new a(1,1)},components:{specular:"texture2D(image, fract(repeat * materialInput.st)).channel"}},translucent:!1}),S.EmissionMapType="EmissionMap",S._materialCache.addMaterial(S.EmissionMapType,{fabric:{type:S.EmissionMapType,uniforms:{image:S.DefaultImageId,channels:"rgb",repeat:new a(1,1)},components:{emission:"texture2D(image, fract(repeat * materialInput.st)).channels"}},translucent:!1}),S.BumpMapType="BumpMap",S._materialCache.addMaterial(S.BumpMapType,{fabric:{type:S.BumpMapType,uniforms:{image:S.DefaultImageId,channel:"r",strength:.8,repeat:new a(1,1)},source:r},translucent:!1}),S.NormalMapType="NormalMap",S._materialCache.addMaterial(S.NormalMapType,{fabric:{type:S.NormalMapType,uniforms:{image:S.DefaultImageId,channels:"rgb",strength:.8,repeat:new a(1,1)},source:w},translucent:!1}),S.GridType="Grid",S._materialCache.addMaterial(S.GridType,{fabric:{type:S.GridType,uniforms:{color:new c(0,1,0,1),cellAlpha:.1,lineCount:new a(8,8),lineThickness:new a(1,1),lineOffset:new a(0,0)},source:v},translucent:function(a){var b=a.uniforms;return b.color.alpha<1||b.cellAlpha<1}}),S.StripeType="Stripe",S._materialCache.addMaterial(S.StripeType,{fabric:{type:S.StripeType,uniforms:{horizontal:!0,evenColor:new c(1,1,1,.5),oddColor:new c(0,0,1,.5),offset:0,repeat:5},source:B},translucent:function(a){var b=a.uniforms;return b.evenColor.alpha<1||b.oddColor.alpha<0}}),S.CheckerboardType="Checkerboard",S._materialCache.addMaterial(S.CheckerboardType,{fabric:{type:S.CheckerboardType,uniforms:{lightColor:new c(1,1,1,.5),darkColor:new c(0,0,0,.5),repeat:new a(5,5)},source:s},translucent:function(a){var b=a.uniforms;return b.lightColor.alpha<1||b.darkColor.alpha<0}}),S.DotType="Dot",S._materialCache.addMaterial(S.DotType,{fabric:{type:S.DotType,uniforms:{lightColor:new c(1,1,0,.75),darkColor:new c(0,1,1,.75),repeat:new a(5,5)},source:t},translucent:function(a){var b=a.uniforms;return b.lightColor.alpha<1||b.darkColor.alpha<0}}),S.WaterType="Water",S._materialCache.addMaterial(S.WaterType,{fabric:{type:S.WaterType,uniforms:{baseWaterColor:new c(.2,.3,.6,1),blendColor:new c(0,1,.699,1),specularMap:S.DefaultImageId,normalMap:S.DefaultImageId,frequency:10,animationSpeed:.01,amplitude:1,specularIntensity:.5,fadeFactor:1},source:C},translucent:function(a){var b=a.uniforms;return b.baseWaterColor.alpha<1||b.blendColor.alpha<0}}),S.RimLightingType="RimLighting",S._materialCache.addMaterial(S.RimLightingType,{fabric:{type:S.RimLightingType,uniforms:{color:new c(1,0,0,.7),rimColor:new c(1,1,1,.4),width:.3},source:A},translucent:function(a){var b=a.uniforms;return b.color.alpha<1||b.rimColor.alpha<0}}),S.FadeType="Fade",S._materialCache.addMaterial(S.FadeType,{fabric:{type:S.FadeType,uniforms:{fadeInColor:new c(1,0,0,1),fadeOutColor:new c(0,0,0,0),maximumDistance:.5,repeat:!0,fadeDirection:{x:!0,y:!0},time:new a(.5,.5)},source:u},translucent:function(a){var b=a.uniforms;return b.fadeInColor.alpha<1||b.fadeOutColor.alpha<0}}),S.PolylineArrowType="PolylineArrow",S._materialCache.addMaterial(S.PolylineArrowType,{fabric:{type:S.PolylineArrowType,uniforms:{color:new c(1,1,1,1)},source:x},translucent:!0}),S.PolylineGlowType="PolylineGlow",S._materialCache.addMaterial(S.PolylineGlowType,{fabric:{type:S.PolylineGlowType,uniforms:{color:new c(0,.5,1,1),glowPower:.25},source:y},translucent:!0}),S.PolylineOutlineType="PolylineOutline",S._materialCache.addMaterial(S.PolylineOutlineType,{fabric:{type:S.PolylineOutlineType,uniforms:{color:new c(1,1,1,1),outlineColor:new c(1,0,0,1),outlineWidth:1},source:z},translucent:function(a){var b=a.uniforms;return b.color.alpha<1||b.outlineColor.alpha<1}}),S}),c("Scene/MaterialAppearance",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/freezeObject","../Core/VertexFormat","../Shaders/Appearances/AllMaterialAppearanceFS","../Shaders/Appearances/AllMaterialAppearanceVS","../Shaders/Appearances/BasicMaterialAppearanceFS","../Shaders/Appearances/BasicMaterialAppearanceVS","../Shaders/Appearances/TexturedMaterialAppearanceFS","../Shaders/Appearances/TexturedMaterialAppearanceVS","./Appearance","./Material"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=function(c){c=a(c,a.EMPTY_OBJECT);var d=a(c.translucent,!0),e=a(c.closed,!1),f=a(c.materialSupport,n.MaterialSupport.TEXTURED);this.material=b(c.material)?c.material:m.fromType(m.ColorType),this.translucent=d,this._vertexShaderSource=a(c.vertexShaderSource,f.vertexShaderSource),this._fragmentShaderSource=a(c.fragmentShaderSource,f.fragmentShaderSource),this._renderState=l.getDefaultRenderState(d,e,c.renderState),this._closed=e,this._materialSupport=f,this._vertexFormat=f.vertexFormat,this._flat=a(c.flat,!1),this._faceForward=a(c.faceForward,!e)};return c(n.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},materialSupport:{get:function(){return this._materialSupport}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}}),n.prototype.getFragmentShaderSource=l.prototype.getFragmentShaderSource,n.prototype.isTranslucent=l.prototype.isTranslucent,n.prototype.getRenderState=l.prototype.getRenderState,n.MaterialSupport={BASIC:d({vertexFormat:e.POSITION_AND_NORMAL,vertexShaderSource:i,fragmentShaderSource:h}),TEXTURED:d({vertexFormat:e.POSITION_NORMAL_AND_ST,vertexShaderSource:k,fragmentShaderSource:j}),ALL:d({vertexFormat:e.ALL,vertexShaderSource:g,fragmentShaderSource:f})},n}),c("Shaders/Appearances/PerInstanceColorAppearanceFS",[],function(){"use strict";return"varying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec4 v_color;\nvoid main()\n{\nvec3 positionToEyeEC = -v_positionEC;\nvec3 normalEC;\n#ifdef FACE_FORWARD\nnormalEC = normalize(faceforward(v_normalEC, vec3(0.0, 0.0, 1.0), -v_normalEC));\n#else\nnormalEC = normalize(v_normalEC);\n#endif\nczm_materialInput materialInput;\nmaterialInput.normalEC = normalEC;\nmaterialInput.positionToEyeEC = positionToEyeEC;\nczm_material material = czm_getDefaultMaterial(materialInput);\nmaterial.diffuse = v_color.rgb;\nmaterial.alpha = v_color.a;\ngl_FragColor = czm_phong(normalize(positionToEyeEC), material);\n}\n"}),c("Shaders/Appearances/PerInstanceColorAppearanceVS",[],function(){"use strict";return"attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 normal;\nattribute vec4 color;\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec4 v_color;\nvoid main()\n{\nvec4 p = czm_computePosition();\nv_positionEC = (czm_modelViewRelativeToEye * p).xyz;\nv_normalEC = czm_normal * normal;\nv_color = color;\ngl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"}),c("Shaders/Appearances/PerInstanceFlatColorAppearanceFS",[],function(){"use strict";return"varying vec4 v_color;\nvoid main()\n{\ngl_FragColor = v_color;\n}\n"}),c("Shaders/Appearances/PerInstanceFlatColorAppearanceVS",[],function(){"use strict";return"attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec4 color;\nvarying vec4 v_color;\nvoid main()\n{\nvec4 p = czm_computePosition();\nv_color = color;\ngl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"}),c("Scene/PerInstanceColorAppearance",["../Core/defaultValue","../Core/defineProperties","../Core/VertexFormat","../Shaders/Appearances/PerInstanceColorAppearanceFS","../Shaders/Appearances/PerInstanceColorAppearanceVS","../Shaders/Appearances/PerInstanceFlatColorAppearanceFS","../Shaders/Appearances/PerInstanceFlatColorAppearanceVS","./Appearance"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(b){b=a(b,a.EMPTY_OBJECT);var c=a(b.translucent,!0),j=a(b.closed,!1),k=a(b.flat,!1),l=k?g:e,m=k?f:d,n=k?i.FLAT_VERTEX_FORMAT:i.VERTEX_FORMAT;this.material=void 0,this.translucent=c,this._vertexShaderSource=a(b.vertexShaderSource,l),this._fragmentShaderSource=a(b.fragmentShaderSource,m),this._renderState=h.getDefaultRenderState(c,j,b.renderState),this._closed=j,this._vertexFormat=n,this._flat=k,this._faceForward=a(b.faceForward,!j)};return b(i.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}}),i.VERTEX_FORMAT=c.POSITION_AND_NORMAL,i.FLAT_VERTEX_FORMAT=c.POSITION_ONLY,i.prototype.getFragmentShaderSource=h.prototype.getFragmentShaderSource,i.prototype.isTranslucent=h.prototype.isTranslucent,i.prototype.getRenderState=h.prototype.getRenderState,i}),c("Scene/PrimitivePipeline",["../Core/BoundingSphere","../Core/Color","../Core/ComponentDatatype","../Core/defaultValue","../Core/defined","../Core/DeveloperError","../Core/Ellipsoid","../Core/FeatureDetection","../Core/GeographicProjection","../Core/Geometry","../Core/GeometryAttribute","../Core/GeometryPipeline","../Core/IndexDatatype","../Core/Matrix4","../Core/WebMercatorProjection"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";function p(a,b,c){var d,e=!c,f=a.length;if(!e&&f>1){var g=a[0].modelMatrix;for(d=1;f>d;++d)if(!n.equals(g,a[d].modelMatrix)){e=!0;break}}if(e)for(d=0;f>d;++d)l.transformToWorldCoordinates(a[d]);else n.multiplyTransformation(b,a[0].modelMatrix,b)}function q(a,d){var e=a.attributes,f=e.position,g=4*(f.values.length/f.componentsPerAttribute);e.pickColor=new k({componentDatatype:c.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0,values:new Uint8Array(g)});for(var h=b.floatToByte(d.red),i=b.floatToByte(d.green),j=b.floatToByte(d.blue),l=b.floatToByte(d.alpha),m=e.pickColor.values,n=0;g>n;n+=4)m[n]=h,m[n+1]=i,m[n+2]=j,m[n+3]=l}function r(a,b){for(var c=a.length,d=0;c>d;++d){var f=a[d],g=b[d];e(f.geometry)?q(f.geometry,g):(q(f.westHemisphereGeometry,g),q(f.eastHemisphereGeometry,g))}}function s(a){var b,c=a.length,d=[],f=a[0].attributes;for(b in f)if(f.hasOwnProperty(b)){for(var g=f[b],h=!0,i=1;c>i;++i){var j=a[i].attributes[b];if(!e(j)||g.componentDatatype!==j.componentDatatype||g.componentsPerAttribute!==j.componentsPerAttribute||g.normalize!==j.normalize){h=!1;break}}h&&d.push(b)}return d}function t(a,b,d){for(var e=j.computeNumberOfVertices(b),f=d.length,g=0;f>g;++g){for(var h=d[g],i=a[h],l=i.componentDatatype,m=i.value,n=m.length,o=c.createTypedArray(l,e*n),p=0;e>p;++p)o.set(m,p*n);b.attributes[h]=new k({componentDatatype:l,componentsPerAttribute:n,normalize:i.normalize,values:o})}}function u(a,b){for(var c=a.length,d=0;c>d;++d){var f=a[d],g=f.attributes;e(f.geometry)?t(g,f.geometry,b):(t(g,f.westHemisphereGeometry,b),t(g,f.eastHemisphereGeometry,b))}}function v(b){var d,f,g=b.instances,h=b.pickIds,i=b.projection,j=b.elementIndexUintSupported,k=b.scene3DOnly,m=b.allowPicking,n=b.vertexCacheOptimize,o=b.compressVertices,q=b.modelMatrix,t=g.length;if(g[0].geometry.primitiveType,p(g,q,k),!k)for(d=0;t>d;++d)l.splitLongitude(g[d]);m&&r(g,h);var v=s(g);if(u(g,v),n)for(d=0;t>d;++d){var w=g[d];e(w.geometry)?(l.reorderForPostVertexCache(w.geometry),l.reorderForPreVertexCache(w.geometry)):(l.reorderForPostVertexCache(w.westHemisphereGeometry),l.reorderForPreVertexCache(w.westHemisphereGeometry),l.reorderForPostVertexCache(w.eastHemisphereGeometry),l.reorderForPreVertexCache(w.eastHemisphereGeometry))}var x=l.combineInstances(g);for(t=x.length,d=0;t>d;++d){f=x[d];var y,z=f.attributes;if(k)for(y in z)z.hasOwnProperty(y)&&z[y].componentDatatype===c.DOUBLE&&l.encodeAttribute(f,y,y+"3DHigh",y+"3DLow");else for(y in z)if(z.hasOwnProperty(y)&&z[y].componentDatatype===c.DOUBLE){var A=y+"3D",B=y+"2D";l.projectTo2D(f,y,A,B,i),e(f.boundingSphere)&&"position"===y&&(f.boundingSphereCV=a.fromVertices(f.attributes.position2D.values)),l.encodeAttribute(f,A,A+"High",A+"Low"),l.encodeAttribute(f,B,B+"High",B+"Low")}o&&l.compressVertices(f)}if(!j){var C=[];for(t=x.length,d=0;t>d;++d)f=x[d],C=C.concat(l.fitToUnsignedShortIndices(f));x=C}return x}function w(a,b,d){for(var e=[],f=a.attributes,g=d.length,h=0;g>h;++h){var i=d[h],j=f[i],k=j.componentDatatype;k===c.DOUBLE&&(k=c.FLOAT);var l=c.createTypedArray(k,j.values);e.push({index:b[i],componentDatatype:k,componentsPerAttribute:j.componentsPerAttribute,normalize:j.normalize,values:l}),delete f[i]}return e}function x(a,b,c,f,g,h,i,k,l){for(var m=j.computeNumberOfVertices(b),n=f.length,o=0;n>o;++o)for(var p=f[o],q=g[p],r=m;r>0;){for(var s,t=d(l[p],0),u=h[t],v=u.length,w=0;v>w&&(s=u[w],s.index!==q);++w);e(i[a])||(i[a]={}),e(i[a][p])||(i[a][p]={dirty:!1,value:c[p].value,indices:[]});var x,y=s.values.length/s.componentsPerAttribute,z=d(k[p],0);y>z+r?(x=r,i[a][p].indices.push({attribute:s,offset:z,count:x}),k[p]=z+r):(x=y-z,i[a][p].indices.push({attribute:s,offset:z,count:x}),k[p]=0,l[p]=t+1),r-=x}}function y(a,b,c,d){var f,g,h,i=[],j=a.length,k={},l={};for(f=0;j>f;++f)g=a[f],h=g.attributes,e(g.geometry)&&x(f,g.geometry,h,d,c,b,i,k,l);for(f=0;j>f;++f)g=a[f],h=g.attributes,e(g.westHemisphereGeometry)&&x(f,g.westHemisphereGeometry,h,d,c,b,i,k,l);for(f=0;j>f;++f)g=a[f],h=g.attributes,e(g.eastHemisphereGeometry)&&x(f,g.eastHemisphereGeometry,h,d,c,b,i,k,l);return i}function z(a,b){var c=a.attributes;for(var d in c)if(c.hasOwnProperty(d)){var f=c[d];e(f)&&e(f.values)&&b.push(f.values.buffer)}e(a.indices)&&b.push(a.indices.buffer)}function A(a,b){for(var c=a.length,d=0;c>d;++d)z(a[d],b)}function B(a,b){for(var c=a.length,d=0;c>d;++d)for(var e=a[d],f=e.length,g=0;f>g;++g)b.push(e[g].values.buffer)}function C(b){for(var c=1,d=b.length,f=0;d>f;f++){var g=b[f],h=g.attributes;c+=6+2*a.packedLength+(e(g.indices)?g.indices.length:0);for(var i in h)if(h.hasOwnProperty(i)&&e(h[i])){var j=h[i];c+=5+j.values.length}}return c}function D(a,b){for(var c=a.length,d=new Uint32Array(a.length),e=0;c>e;++e)d[e]=a[e].toRgba();return b.push(d.buffer),d}function E(a){for(var c=a.length,d=new Array(c),e=0;c>e;e++)d[e]=b.fromRgba(a[e]);return d}function F(a){for(var b=a.length,c=1+17*b,d=0;b>d;d++){var f=a[d].attributes;for(var g in f)if(f.hasOwnProperty(g)&&e(f[g])){var h=f[g];c+=5+h.value.length}}return c}function G(a,b){var c=new Float64Array(F(a)),d={},f=[],g=a.length,h=0;c[h++]=g;for(var i=0;g>i;i++){var j=a[i];n.pack(j.modelMatrix,c,h),h+=n.packedLength;var k=j.attributes,l=[];for(var m in k)k.hasOwnProperty(m)&&e(k[m])&&(l.push(m),e(d[m])||(d[m]=f.length,f.push(m)));c[h++]=l.length;for(var o=0;o<l.length;o++){var p=l[o],q=k[p];c[h++]=d[p],c[h++]=q.componentDatatype,c[h++]=q.componentsPerAttribute,c[h++]=q.normalize,c[h++]=q.value.length,c.set(q.value,h),h+=q.value.length}}return b.push(c.buffer),{stringTable:f,packedData:c}}function H(a){for(var b=a.packedData,d=a.stringTable,e=new Array(b[0]),f=0,g=1;g<b.length;){var h=n.unpack(b,g);g+=n.packedLength;for(var i={},j=b[g++],k=0;j>k;k++){for(var l=d[b[g++]],m=b[g++],o=b[g++],p=0!==b[g++],q=b[g++],r=c.createTypedArray(m,q),s=0;q>s;s++)r[s]=b[g++];i[l]={componentDatatype:m,componentsPerAttribute:o,normalize:p,value:r}}e[f++]={attributes:i,modelMatrix:h}}return e}function I(a){for(var b=a.length,c=1+b,d=0;b>d;d++){var f=a[d];for(var g in f)if(f.hasOwnProperty(g)&&e(f[g])){var h=f[g];c+=3+3*h.indices.length+h.value.length}}return c}function J(a,b){var c=new Float64Array(I(a)),d=[],f=[],g={},h=a.length,i=0;c[i++]=h;for(var j=0;h>j;j++){var k=a[j],l=[];for(var m in k)k.hasOwnProperty(m)&&e(k[m])&&(l.push(m),e(g[m])||(g[m]=d.length,d.push(m)));c[i++]=l.length;for(var n=0;n<l.length;n++){var o=l[n],p=k[o];c[i++]=g[o];var q=p.indices,r=q.length;c[i++]=r;for(var s=0;r>s;s++){var t=q[s];c[i++]=t.count,c[i++]=t.offset;var u=f.indexOf(t.attribute);-1===u&&(u=f.length,f.push(t.attribute)),c[i++]=u}c[i++]=p.value.length,c.set(p.value,i),i+=p.value.length}}return b.push(c.buffer),{stringTable:d,packedData:c,attributeTable:f}}function K(a){for(var b=a.stringTable,d=a.attributeTable,e=a.packedData,f=new Array(e[0]),g=0,h=1,i=e.length;i>h;){for(var j={},k=e[h++],l=0;k>l;l++){for(var m=b[e[h++]],n=new Array(e[h++]),o=0;o<n.length;o++){var p={};p.count=e[h++],p.offset=e[h++],p.attribute=d[e[h++]],n[o]=p}for(var q=e[h++],r=c.createTypedArray(n[0].attribute.componentDatatype,q),s=0;q>s;s++)r[s]=e[h++];j[m]={dirty:!1,indices:n,value:r}}f[g++]=j}return f}if(!h.supportsTypedArrays())return{};var L={};return L.combineGeometry=function(a){for(var b=v(a),c=l.createAttributeLocations(b[0]),d=a.instances,e=s(d),f=[],g=b.length,h=0;g>h;++h){var i=b[h];f.push(w(i,c,e))}var j=y(d,f,c,e);return{geometries:b,modelMatrix:a.modelMatrix,attributeLocations:c,vaAttributes:f,vaAttributeLocations:j}},L.packCreateGeometryResults=function(b,c){var d=new Float64Array(C(b)),f=[],g={},h=b.length,i=0;d[i++]=h;for(var j=0;h>j;j++){var k=b[j];d[i++]=k.primitiveType,d[i++]=k.geometryType;var l=e(k.boundingSphere)?1:0;d[i++]=l,l&&a.pack(k.boundingSphere,d,i),i+=a.packedLength;var m=e(k.boundingSphereCV)?1:0;d[i++]=m,m&&a.pack(k.boundingSphereCV,d,i),i+=a.packedLength;var n=k.attributes,o=[];for(var p in n)n.hasOwnProperty(p)&&e(n[p])&&(o.push(p),e(g[p])||(g[p]=f.length,f.push(p)));d[i++]=o.length;for(var q=0;q<o.length;q++){var r=o[q],s=n[r];d[i++]=g[r],d[i++]=s.componentDatatype,d[i++]=s.componentsPerAttribute,d[i++]=s.normalize?1:0,d[i++]=s.values.length,d.set(s.values,i),i+=s.values.length}var t=e(k.indices)?k.indices.length:0;d[i++]=t,t>0&&(d.set(k.indices,i),i+=t)}return c.push(d.buffer),{stringTable:f,packedData:d}},L.unpackCreateGeometryResults=function(b){for(var d,e=b.stringTable,f=b.packedData,g=new Array(f[0]),h=0,i=1;i<f.length;){var l,n,o=f[i++],p=f[i++],q=1===f[i++];q&&(l=a.unpack(f,i)),i+=a.packedLength;var r=1===f[i++];r&&(n=a.unpack(f,i)),i+=a.packedLength;var s,t,u,v={},w=f[i++];for(d=0;w>d;d++){var x=e[f[i++]],y=f[i++];u=f[i++];var z=0!==f[i++];s=f[i++],t=c.createTypedArray(y,s);for(var A=0;s>A;A++)t[A]=f[i++];v[x]=new k({componentDatatype:y,componentsPerAttribute:u,normalize:z,values:t})}var B;if(s=f[i++],s>0){var C=t.length/u;for(B=m.createTypedArray(C,s),d=0;s>d;d++)B[d]=f[i++]}g[h++]=new j({primitiveType:o,geometryType:p,boundingSphere:l,indices:B,attributes:v})}return g},L.packCombineGeometryParameters=function(a,b){for(var c=a.createGeometryResults,d=c.length,e=0;d>e;e++)b.push(c[e].packedData.buffer);var f;return a.allowPicking&&(f=D(a.pickIds,b)),{createGeometryResults:a.createGeometryResults,packedInstances:G(a.instances,b),packedPickIds:f,ellipsoid:a.ellipsoid,isGeographic:a.projection instanceof i,elementIndexUintSupported:a.elementIndexUintSupported,scene3DOnly:a.scene3DOnly,allowPicking:a.allowPicking,vertexCacheOptimize:a.vertexCacheOptimize,compressVertices:a.compressVertices,modelMatrix:a.modelMatrix}},L.unpackCombineGeometryParameters=function(a){for(var b=H(a.packedInstances),c=a.allowPicking?E(a.packedPickIds):void 0,d=a.createGeometryResults,e=d.length,f=0,h=0;e>h;h++)for(var j=L.unpackCreateGeometryResults(d[h]),k=j.length,l=0;k>l;l++)b[f++].geometry=j[l];var m=g.clone(a.ellipsoid),p=a.isGeographic?new i(m):new o(m);return{instances:b,pickIds:c,ellipsoid:m,projection:p,elementIndexUintSupported:a.elementIndexUintSupported,scene3DOnly:a.scene3DOnly,allowPicking:a.allowPicking,vertexCacheOptimize:a.vertexCacheOptimize,compressVertices:a.compressVertices,modelMatrix:n.clone(a.modelMatrix)}},L.packCombineGeometryResults=function(a,b){return A(a.geometries,b),B(a.vaAttributes,b),{geometries:a.geometries,attributeLocations:a.attributeLocations,vaAttributes:a.vaAttributes,packedVaAttributeLocations:J(a.vaAttributeLocations,b),modelMatrix:a.modelMatrix}},L.unpackCombineGeometryResults=function(a){return{geometries:a.geometries,attributeLocations:a.attributeLocations,vaAttributes:a.vaAttributes,perInstanceAttributeLocations:K(a.packedVaAttributeLocations,a.vaAttributes),modelMatrix:a.modelMatrix}},L}),c("Scene/PrimitiveState",["../Core/freezeObject"],function(a){"use strict";var b={READY:0,CREATING:1,CREATED:2,COMBINING:3,COMBINED:4,COMPLETE:5,FAILED:6};return a(b)}),c("Scene/Primitive",["../Core/BoundingSphere","../Core/clone","../Core/combine","../Core/ComponentDatatype","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/FeatureDetection","../Core/Geometry","../Core/GeometryAttribute","../Core/GeometryAttributes","../Core/GeometryInstance","../Core/GeometryInstanceAttribute","../Core/isArray","../Core/Matrix4","../Core/subdivideArray","../Core/TaskProcessor","../Renderer/BufferUsage","../Renderer/DrawCommand","../Renderer/ShaderSource","../ThirdParty/when","./CullFace","./Pass","./PrimitivePipeline","./PrimitiveState","./SceneMode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){"use strict";function C(a){return new l({componentDatatype:a.componentDatatype,componentsPerAttribute:a.componentsPerAttribute,normalize:a.normalize,values:new a.values.constructor(a.values)})}function D(b){var c=b.attributes,d=new m;for(var e in c)c.hasOwnProperty(e)&&f(c[e])&&(d[e]=C(c[e]));var g;if(f(b.indices)){var h=b.indices;g=new h.constructor(h)}return new k({attributes:d,indices:g,primitiveType:b.primitiveType,boundingSphere:a.clone(b.boundingSphere)})}function E(a){return new o({componentDatatype:a.componentDatatype,componentsPerAttribute:a.componentsPerAttribute,normalize:a.normalize,value:new a.value.constructor(a.value)})}function F(a,b){var c=a.attributes,d={};for(var e in c)c.hasOwnProperty(e)&&(d[e]=E(c[e]));return new n({geometry:b,modelMatrix:q.clone(a.modelMatrix),attributes:d})}function G(a,b,c){for(var d,e="",f="",g="";null!==(d=R.exec(b));){var h=d[1],i="vec4 czm_compute"+h[0].toUpperCase()+h.substr(1)+"()";"vec4 czm_computePosition()"!==i&&(e+=i+";\n"),c?g+=i+"\n"+"{\n"+"    return czm_translateRelativeToEye("+h+"3DHigh, "+h+"3DLow);\n"+"}\n\n":(f+="attribute vec3 "+h+"2DHigh;\n"+"attribute vec3 "+h+"2DLow;\n",g+=i+"\n"+"{\n"+"    vec4 p;\n"+"    if (czm_morphTime == 1.0)\n"+"    {\n"+"        p = czm_translateRelativeToEye("+h+"3DHigh, "+h+"3DLow);\n"+"    }\n"+"    else if (czm_morphTime == 0.0)\n"+"    {\n"+"        p = czm_translateRelativeToEye("+h+"2DHigh.zxy, "+h+"2DLow.zxy);\n"+"    }\n"+"    else\n"+"    {\n"+"        p = czm_columbusViewMorph(\n"+"                czm_translateRelativeToEye("+h+"2DHigh.zxy, "+h+"2DLow.zxy),\n"+"                czm_translateRelativeToEye("+h+"3DHigh, "+h+"3DLow),\n"+"                czm_morphTime);\n"+"    }\n"+"    return p;\n"+"}\n\n")}return[e,f,b,g].join("\n")}function H(a){var b=a.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,"void czm_old_main()"),c="attribute vec4 pickColor; \nvarying vec4 czm_pickColor; \nvoid main() \n{ \n    czm_old_main(); \n    czm_pickColor = pickColor; \n}";return b+"\n"+c}function I(a,b){if(!f(a._attributeLocations.show))return b;var c=b.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,"void czm_non_show_main()"),d="attribute float show;\nvoid main() \n{ \n    czm_non_show_main(); \n    gl_Position *= show; \n}";return c+"\n"+d}function J(a,b){if(!a.compressVertices)return b;var c=-1!==b.search(/attribute\s+vec3\s+normal;/g),d=-1!==b.search(/attribute\s+vec2\s+st;/g);if(!c&&!d)return b;var e=-1!==b.search(/attribute\s+vec3\s+tangent;/g),f=-1!==b.search(/attribute\s+vec3\s+binormal;/g),g=d&&c?2:1;g+=e||f?1:0;var h=g>1?"vec"+g:"float",i="compressedAttributes",j="attribute "+h+" "+i+";",k="",l="";if(d){k+="vec2 st;\n";var m=g>1?i+".x":i;l+="    st = czm_decompressTextureCoordinates("+m+");\n"}c&&e&&f?(k+="vec3 normal;\nvec3 tangent;\nvec3 binormal;\n",l+="    czm_octDecode("+i+"."+(d?"yz":"xy")+", normal, tangent, binormal);\n"):(c&&(k+="vec3 normal;\n",l+="    normal = czm_octDecode("+i+(g>1?"."+(d?"y":"x"):"")+");\n"),e&&(k+="vec3 tangent;\n",l+="    tangent = czm_octDecode("+i+"."+(d&&c?"z":"y")+");\n"),f&&(k+="vec3 binormal;\n",l+="    binormal = czm_octDecode("+i+"."+(d&&c?"z":"y")+");\n"));var n=b;n=n.replace(/attribute\s+vec3\s+normal;/g,""),n=n.replace(/attribute\s+vec2\s+st;/g,""),n=n.replace(/attribute\s+vec3\s+tangent;/g,""),n=n.replace(/attribute\s+vec3\s+binormal;/g,""),n=n.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,"void czm_non_compressed_main()");var o="void main() \n{ \n"+l+"    czm_non_compressed_main(); \n"+"}";return[j,k,n,o].join("\n")}function K(a){a.vertexAttributes}function L(a,b,c){for(var d=[],g=c.length,h=0;g>h;++h){var i={primitive:e(c[h].pickPrimitive,b)};f(c[h].id)&&(i.id=c[h].id);var j=a.createPickId(i);b._pickIds.push(j),d.push(j.color)}return d}function M(a,b){return function(){return a[b]}}function N(a,b){return function(){return b[a].value}}function O(a,b,c){return function(d){var e=b[a];e.value=d,e.dirty||(c.push(e),e.dirty=!0)}}var P=function(a){a=e(a,e.EMPTY_OBJECT),this.geometryInstances=a.geometryInstances,this.appearance=a.appearance,this._appearance=void 0,this._material=void 0,this.modelMatrix=q.clone(e(a.modelMatrix,q.IDENTITY)),this._modelMatrix=new q,this.show=e(a.show,!0),this._vertexCacheOptimize=e(a.vertexCacheOptimize,!1),this._interleave=e(a.interleave,!1),this._releaseGeometryInstances=e(a.releaseGeometryInstances,!0),this._allowPicking=e(a.allowPicking,!0),this._asynchronous=e(a.asynchronous,!0),this._compressVertices=e(a.compressVertices,!0),this.cull=e(a.cull,!0),this.debugShowBoundingVolume=e(a.debugShowBoundingVolume,!1),this._translucent=void 0,this._state=A.READY,this._geometries=[],this._vaAttributes=void 0,this._error=void 0,this._numberOfInstances=0,this._validModelMatrix=!1,this._boundingSpheres=[],this._boundingSphereWC=[],this._boundingSphereCV=[],this._boundingSphere2D=[],this._boundingSphereMorph=[],this._perInstanceAttributeLocations=void 0,this._instanceIds=[],this._lastPerInstanceAttributeIndex=0,this._dirtyAttributes=[],this._va=[],this._attributeLocations=void 0,this._primitiveType=void 0,this._frontFaceRS=void 0,this._backFaceRS=void 0,this._sp=void 0,this._pickRS=void 0,this._pickSP=void 0,this._pickIds=[],this._colorCommands=[],this._pickCommands=[],this._createGeometryResults=void 0};g(P.prototype,{vertexCacheOptimize:{get:function(){return this._vertexCacheOptimize}},interleave:{get:function(){return this._interleave}},releaseGeometryInstances:{get:function(){return this._releaseGeometryInstances}},allowPicking:{get:function(){return this._allowPicking}},asynchronous:{get:function(){return this._asynchronous}},compressVertices:{get:function(){return this._compressVertices}},ready:{get:function(){return this._state===A.COMPLETE}}})
;var Q,R=/attribute\s+vec(?:3|4)\s+(.*)3DHigh;/g,S=Math.max(j.hardwareConcurrency-1,1),T=new s("combineGeometry",Number.POSITIVE_INFINITY);return P.prototype.update=function(e,g,h){if(!(!f(this.geometryInstances)&&0===this._va.length||f(this.geometryInstances)&&p(this.geometryInstances)&&0===this.geometryInstances.length||!f(this.appearance)||g.mode!==B.SCENE3D&&g.scene3DOnly||!g.passes.render&&!g.passes.pick)){var j,k,l,m,n,o,C,E,N,O,P,R,U,V=g.mapProjection,W=this.allowPicking,X=this._instanceIds,Y=g.scene3DOnly,Z=this;if(this._state!==A.COMPLETE&&this._state!==A.COMBINED)if(this.asynchronous){if(this._state===A.FAILED)throw this._error;if(this._state===A.READY){P=p(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],this._numberOfInstances=o=P.length;var $=[],_=[];for(C=0;o>C;++C)l=P[C].geometry,X.push(P[C].id),_.push({moduleName:l._workerName,geometry:l});if(!f(Q))for(Q=new Array(S),C=0;S>C;C++)Q[C]=new s("createGeometry",Number.POSITIVE_INFINITY);for(_=r(_,S),C=0;C<_.length;C++)$.push(Q[C].scheduleTask({subTasks:_[C]}));this._state=A.CREATING,w.all($,function(a){Z._createGeometryResults=a,Z._state=A.CREATED},function(a){Z._error=a,Z._state=A.FAILED})}else if(this._state===A.CREATED){var aa=[];P=p(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],O=T.scheduleTask(z.packCombineGeometryParameters({createGeometryResults:this._createGeometryResults,instances:P,pickIds:W?L(e,this,P):void 0,ellipsoid:V.ellipsoid,projection:V,elementIndexUintSupported:e.elementIndexUint,scene3DOnly:Y,allowPicking:W,vertexCacheOptimize:this.vertexCacheOptimize,compressVertices:this.compressVertices,modelMatrix:this.modelMatrix},aa),aa),this._createGeometryResults=void 0,this._state=A.COMBINING,w(O,function(a){var b=z.unpackCombineGeometryResults(a);Z._geometries=b.geometries,Z._attributeLocations=b.attributeLocations,Z._vaAttributes=b.vaAttributes,Z._perInstanceAttributeLocations=b.perInstanceAttributeLocations,Z._state=A.COMBINED,Z.modelMatrix=q.clone(b.modelMatrix,Z.modelMatrix),Z._validModelMatrix=!q.equals(Z.modelMatrix,q.IDENTITY)},function(a){Z._error=a,Z._state=A.FAILED})}}else{for(P=p(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],this._numberOfInstances=o=P.length,U=new Array(o),R=new Array(P.length),C=0;o>C;C++){var ba=P[C];l=ba.geometry,X.push(ba.id);var ca;ca=f(l.attributes)&&f(l.primitiveType)?D(l):l.constructor.createGeometry(l),U[C]=ca,R[C]=F(ba,ca)}var da=z.combineGeometry({instances:R,pickIds:W?L(e,this,P):void 0,ellipsoid:V.ellipsoid,projection:V,elementIndexUintSupported:e.elementIndexUint,scene3DOnly:Y,allowPicking:W,vertexCacheOptimize:this.vertexCacheOptimize,compressVertices:this.compressVertices,modelMatrix:this.modelMatrix});this._geometries=da.geometries,this._attributeLocations=da.attributeLocations,this._vaAttributes=da.vaAttributes,this._perInstanceAttributeLocations=da.vaAttributeLocations,this._state=A.COMBINED,this.modelMatrix=q.clone(da.modelMatrix,this.modelMatrix),this._validModelMatrix=!q.equals(this.modelMatrix,q.IDENTITY)}var ea=this._attributeLocations;if(this._state===A.COMBINED){U=this._geometries;var fa=this._vaAttributes,ga=[];for(o=U.length,C=0;o>C;++C){l=U[C],m=fa[C];var ha=m.length;for(E=0;ha>E;++E)n=m[E],n.vertexBuffer=e.createVertexBuffer(n.values,t.DYNAMIC_DRAW),delete n.values;if(ga.push(e.createVertexArrayFromGeometry({geometry:l,attributeLocations:ea,bufferUsage:t.STATIC_DRAW,interleave:this._interleave,vertexArrayAttributes:m})),this._boundingSpheres.push(a.clone(l.boundingSphere)),this._boundingSphereWC.push(new a),!Y){var ia=l.boundingSphereCV.center,ja=ia.x,ka=ia.y,la=ia.z;ia.x=la,ia.y=ja,ia.z=ka,this._boundingSphereCV.push(a.clone(l.boundingSphereCV)),this._boundingSphere2D.push(new a),this._boundingSphereMorph.push(new a)}}this._va=ga,this._primitiveType=U[0].primitiveType,this.releaseGeometryInstances&&(this.geometryInstances=void 0),this._geometries=void 0,this._state=A.COMPLETE}if(this.show&&this._state===A.COMPLETE){var ma=this.appearance,na=ma.material,oa=!1,pa=!1;this._appearance!==ma?(this._appearance=ma,this._material=na,oa=!0,pa=!0):this._material!==na&&(this._material=na,pa=!0);var qa=this._appearance.isTranslucent();this._translucent!==qa&&(this._translucent=qa,oa=!0),f(this._material)&&this._material.update(e);var ra=ma.closed&&qa;if(oa){var sa,ta=ma.getRenderState();ra?(sa=b(ta,!1),sa.cull={enabled:!0,face:x.BACK},this._frontFaceRS=e.createRenderState(sa),sa.cull.face=x.FRONT,this._backFaceRS=e.createRenderState(sa)):(this._frontFaceRS=e.createRenderState(ta),this._backFaceRS=this._frontFaceRS),W?ra?(sa=b(ta,!1),sa.cull={enabled:!1},this._pickRS=e.createRenderState(sa)):this._pickRS=this._frontFaceRS:(sa=b(ta,!1),sa.colorMask={red:!1,green:!1,blue:!1,alpha:!1},ra?(sa.cull={enabled:!1},this._pickRS=e.createRenderState(sa)):this._pickRS=e.createRenderState(sa))}if(pa){var ua=G(this,ma.vertexShaderSource,Y);ua=I(this,ua),ua=J(this,ua);var va=ma.getFragmentShaderSource();if(this._sp=e.replaceShaderProgram(this._sp,ua,va,ea),K(this._sp,ea),W){var wa=new v({sources:[va],pickColorQualifier:"varying"});this._pickSP=e.replaceShaderProgram(this._pickSP,H(ua),wa,ea)}else this._pickSP=e.createShaderProgram(ua,va,ea);K(this._pickSP,ea)}var xa=this._colorCommands,ya=this._pickCommands;if(oa||pa){var za=f(na)?na._uniforms:void 0,Aa={},Ba=ma.uniforms;if(f(Ba))for(var Ca in Ba)if(Ba.hasOwnProperty(Ca)){if(f(za)&&f(za[Ca]))throw new i("Appearance and material have a uniform with the same name: "+Ca);Aa[Ca]=M(Ba,Ca)}var Da=c(Aa,za),Ea=qa?y.TRANSLUCENT:y.OPAQUE;xa.length=this._va.length*(ra?2:1),ya.length=this._va.length,o=xa.length;var Fa=0,Ga=0;for(C=0;o>C;++C)ra&&(j=xa[C],f(j)||(j=xa[C]=new u({owner:this,primitiveType:this._primitiveType})),j.vertexArray=this._va[Ga],j.renderState=this._backFaceRS,j.shaderProgram=this._sp,j.uniformMap=Da,j.pass=Ea,++C),j=xa[C],f(j)||(j=xa[C]=new u({owner:this,primitiveType:this._primitiveType})),j.vertexArray=this._va[Ga],j.renderState=this._frontFaceRS,j.shaderProgram=this._sp,j.uniformMap=Da,j.pass=Ea,k=ya[Fa],f(k)||(k=ya[Fa]=new u({owner:this,primitiveType:this._primitiveType})),k.vertexArray=this._va[Ga],k.renderState=this._pickRS,k.shaderProgram=this._pickSP,k.uniformMap=Da,k.pass=Ea,++Fa,++Ga}if(this._dirtyAttributes.length>0){for(m=this._dirtyAttributes,o=m.length,C=0;o>C;++C){n=m[C];var Ha=n.value,Ia=n.indices,Ja=Ia.length;for(E=0;Ja>E;++E){N=Ia[E];for(var Ka=N.offset,La=N.count,Ma=N.attribute,Na=Ma.componentDatatype,Oa=Ma.componentsPerAttribute,Pa=d.createTypedArray(Na,La*Oa),Qa=0;La>Qa;++Qa)Pa.set(Ha,Qa*Oa);var Ra=Ka*Oa*d.getSizeInBytes(Na);Ma.vertexBuffer.copyFromArrayView(Pa,Ra)}n.dirty=!1}m.length=0}var Sa;if(Sa=this._numberOfInstances>1&&!this._validModelMatrix||g.mode!==B.SCENE3D?q.IDENTITY:this.modelMatrix,!q.equals(Sa,this._modelMatrix))for(q.clone(Sa,this._modelMatrix),o=this._boundingSpheres.length,C=0;o>C;++C){var Ta=this._boundingSpheres[C];f(Ta)&&(this._boundingSphereWC[C]=a.transform(Ta,Sa,this._boundingSphereWC[C]),Y||(this._boundingSphere2D[C]=a.clone(this._boundingSphereCV[C],this._boundingSphere2D[C]),this._boundingSphere2D[C].center.x=0,this._boundingSphereMorph[C]=a.union(this._boundingSphereWC[C],this._boundingSphereCV[C])))}var Ua;g.mode===B.SCENE3D?Ua=this._boundingSphereWC:g.mode===B.COLUMBUS_VIEW?Ua=this._boundingSphereCV:g.mode===B.SCENE2D&&f(this._boundingSphere2D)?Ua=this._boundingSphere2D:f(this._boundingSphereMorph)&&(Ua=this._boundingSphereMorph);var Va=g.passes;if(Va.render)for(o=xa.length,C=0;o>C;++C){var Wa=ra?Math.floor(C/2):C;xa[C].modelMatrix=Sa,xa[C].boundingVolume=Ua[Wa],xa[C].cull=this.cull,xa[C].debugShowBoundingVolume=this.debugShowBoundingVolume,h.push(xa[C])}if(Va.pick)for(o=ya.length,C=0;o>C;++C)ya[C].modelMatrix=Sa,ya[C].boundingVolume=Ua[C],ya[C].cull=this.cull,h.push(ya[C])}}},P.prototype.getGeometryInstanceAttributes=function(a){for(var b=-1,c=this._lastPerInstanceAttributeIndex,d=this._instanceIds,e=d.length,f=0;e>f;++f){var h=(c+f)%e;if(a===d[h]){b=h;break}}if(-1===b)return void 0;var i=this._perInstanceAttributeLocations[b],j={},k={},l=!1;for(var m in i)i.hasOwnProperty(m)&&(l=!0,k[m]={get:N(m,i),set:O(m,i,this._dirtyAttributes)});return l&&g(j,k),this._lastPerInstanceAttributeIndex=b,j},P.prototype.isDestroyed=function(){return!1},P.prototype.destroy=function(){var a,b;this._sp=this._sp&&this._sp.destroy(),this._pickSP=this._pickSP&&this._pickSP.destroy();var c=this._va;for(a=c.length,b=0;a>b;++b)c[b].destroy();this._va=void 0;var d=this._pickIds;for(a=d.length,b=0;a>b;++b)d[b].destroy();return this._pickIds=void 0,h(this)},P}),c("DataSources/MaterialProperty",["../Core/Color","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Scene/Material"],function(a,b,c,d,e){"use strict";var f=function(){d.throwInstantiationError()};return c(f.prototype,{isConstant:{get:d.throwInstantiationError},definitionChanged:{get:d.throwInstantiationError}}),f.prototype.getType=d.throwInstantiationError,f.prototype.getValue=d.throwInstantiationError,f.prototype.equals=d.throwInstantiationError,f.getValue=function(c,d,f){var g;return b(d)&&(g=d.getType(c),b(g))?(b(f)&&f.type===g||(f=e.fromType(g)),d.getValue(c,f.uniforms),f):(b(f)&&f.type===e.ColorType||(f=e.fromType(e.ColorType)),a.clone(a.WHITE,f.uniforms.color),f)},f}),c("DataSources/EllipseGeometryUpdater",["../Core/Color","../Core/ColorGeometryInstanceAttribute","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/EllipseGeometry","../Core/EllipseOutlineGeometry","../Core/Event","../Core/GeometryInstance","../Core/Iso8601","../Core/ShowGeometryInstanceAttribute","../Scene/MaterialAppearance","../Scene/PerInstanceColorAppearance","../Scene/Primitive","./ColorMaterialProperty","./ConstantProperty","./MaterialProperty","./Property"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";var u=q.fromColor(a.WHITE),v=new r(!0),w=new r(!0),x=new r(!1),y=new r(a.BLACK),z=function(a){this.id=a,this.vertexFormat=void 0,this.center=void 0,this.semiMajorAxis=void 0,this.semiMinorAxis=void 0,this.rotation=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.numberOfVerticalLines=void 0},A=function(a,b){this._entity=a,this._scene=b,this._entitySubscription=a.definitionChanged.addEventListener(A.prototype._onEntityPropertyChanged,this),this._fillEnabled=!1,this._isClosed=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new j,this._showProperty=void 0,this._materialProperty=void 0,this._hasConstantOutline=!0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._options=new z(a),this._onEntityPropertyChanged(a,"ellipse",a.ellipse,void 0)};e(A,{perInstanceColorAppearanceType:{value:o},materialAppearanceType:{value:n}}),e(A.prototype,{entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!d(this._entity.availability)&&t.isConstant(this._showProperty)&&t.isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!d(this._entity.availability)&&t.isConstant(this._showProperty)&&t.isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},isDynamic:{get:function(){return this._dynamic}},isClosed:{get:function(){return this._isClosed}},geometryChanged:{get:function(){return this._geometryChanged}}}),A.prototype.isOutlineVisible=function(a){var b=this._entity;return this._outlineEnabled&&b.isAvailable(a)&&this._showProperty.getValue(a)&&this._showOutlineProperty.getValue(a)},A.prototype.isFilled=function(a){var b=this._entity;return this._fillEnabled&&b.isAvailable(a)&&this._showProperty.getValue(a)&&this._fillProperty.getValue(a)},A.prototype.createFillGeometryInstance=function(c){var e,f,g=this._entity,i=g.isAvailable(c),j=new m(i&&this._showProperty.getValue(c)&&this._fillProperty.getValue(c));if(this._materialProperty instanceof q){var l=a.WHITE;d(this._materialProperty.color)&&(this._materialProperty.color.isConstant||i)&&(l=this._materialProperty.color.getValue(c)),f=b.fromColor(l),e={show:j,color:f}}else e={show:j};return new k({id:g,geometry:new h(this._options),attributes:e})},A.prototype.createOutlineGeometryInstance=function(c){var d=this._entity,e=d.isAvailable(c),f=t.getValueOrDefault(this._outlineColorProperty,c,a.BLACK);return new k({id:d,geometry:new i(this._options),attributes:{show:new m(e&&this._showProperty.getValue(c)&&this._showOutlineProperty.getValue(c)),color:b.fromColor(f)}})},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){this._entitySubscription(),f(this)},A.prototype._onEntityPropertyChanged=function(a,b){if("availability"===b||"position"===b||"ellipse"===b){var e=this._entity.ellipse;if(!d(e))return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var f=e.fill,g=d(f)&&f.isConstant?f.getValue(l.MINIMUM_VALUE):!0,h=e.outline,i=d(h);if(i&&h.isConstant&&(i=h.getValue(l.MINIMUM_VALUE)),!g&&!i)return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var j=this._entity.position,k=e.semiMajorAxis,m=e.semiMinorAxis,p=e.show;if(d(p)&&p.isConstant&&!p.getValue(l.MINIMUM_VALUE)||!d(j)||!d(k)||!d(m))return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var r=c(e.material,u),s=r instanceof q;this._materialProperty=r,this._fillProperty=c(f,w),this._showProperty=c(p,v),this._showOutlineProperty=c(e.outline,x),this._outlineColorProperty=i?c(e.outlineColor,y):void 0;var z=e.rotation,A=e.height,B=e.extrudedHeight,C=e.granularity,D=e.stRotation,E=e.outlineWidth,F=e.numberOfVerticalLines;if(this._isClosed=d(B),this._fillEnabled=g,this._outlineEnabled=i,j.isConstant&&k.isConstant&&m.isConstant&&t.isConstant(z)&&t.isConstant(A)&&t.isConstant(B)&&t.isConstant(C)&&t.isConstant(D)&&t.isConstant(E)&&t.isConstant(F)){var G=this._options;G.vertexFormat=s?o.VERTEX_FORMAT:n.MaterialSupport.TEXTURED.vertexFormat,G.center=j.getValue(l.MINIMUM_VALUE,G.center),G.semiMajorAxis=k.getValue(l.MINIMUM_VALUE,G.semiMajorAxis),G.semiMinorAxis=m.getValue(l.MINIMUM_VALUE,G.semiMinorAxis),G.rotation=d(z)?z.getValue(l.MINIMUM_VALUE):void 0,G.height=d(A)?A.getValue(l.MINIMUM_VALUE):void 0,G.extrudedHeight=d(B)?B.getValue(l.MINIMUM_VALUE):void 0,G.granularity=d(C)?C.getValue(l.MINIMUM_VALUE):void 0,G.stRotation=d(D)?D.getValue(l.MINIMUM_VALUE):void 0,G.numberOfVerticalLines=d(F)?F.getValue(l.MINIMUM_VALUE):void 0,this._outlineWidth=d(E)?E.getValue(l.MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}else this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this))}},A.prototype.createDynamicUpdater=function(a){return new B(a,this)};var B=function(a,b){this._primitives=a,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=b,this._options=new z(b._entity)};return B.prototype.update=function(c){var e=this._geometryUpdater;d(this._primitive)&&this._primitives.remove(this._primitive),d(this._outlinePrimitive)&&this._primitives.remove(this._outlinePrimitive);var f=e._entity,g=f.ellipse,j=g.show;if(f.isAvailable(c)&&(!d(j)||j.getValue(c))){var l=this._options,m=f.position,q=g.semiMajorAxis,r=g.semiMinorAxis,t=g.rotation,u=g.height,v=g.extrudedHeight,w=g.granularity,x=g.stRotation,y=g.numberOfVerticalLines;if(l.center=m.getValue(c,l.center),l.semiMajorAxis=q.getValue(c,l.semiMajorAxis),l.semiMinorAxis=r.getValue(c,l.semiMinorAxis),l.rotation=d(t)?t.getValue(c,l):void 0,l.height=d(u)?u.getValue(c,l):void 0,l.extrudedHeight=d(v)?v.getValue(c,l):void 0,l.granularity=d(w)?w.getValue(c):void 0,l.stRotation=d(x)?x.getValue(c):void 0,!d(g.fill)||g.fill.getValue(c)){this._material=s.getValue(c,e.fillMaterialProperty,this._material);var z=this._material,A=new n({material:z,translucent:z.isTranslucent(),closed:d(l.extrudedHeight)});l.vertexFormat=A.vertexFormat,this._primitive=new p({geometryInstances:new k({id:f,geometry:new h(l)}),appearance:A,asynchronous:!1}),this._primitives.add(this._primitive)}if(d(g.outline)&&g.outline.getValue(c)){l.vertexFormat=o.VERTEX_FORMAT,l.numberOfVerticalLines=d(y)?y.getValue(c):void 0;var B=d(g.outlineColor)?g.outlineColor.getValue(c):a.BLACK,C=d(g.outlineWidth)?g.outlineWidth.getValue(c):1,D=1!==B.alpha;this._outlinePrimitive=new p({geometryInstances:new k({id:f,geometry:new i(l),attributes:{color:b.fromColor(B)}}),appearance:new o({flat:!0,translucent:D,renderState:{lineWidth:e._scene.clampLineWidth(C)}}),asynchronous:!1}),this._primitives.add(this._outlinePrimitive)}}},B.prototype.isDestroyed=function(){return!1},B.prototype.destroy=function(){d(this._primitive)&&this._primitives.remove(this._primitive),d(this._outlinePrimitive)&&this._primitives.remove(this._outlinePrimitive),f(this)},A}),c("DataSources/EllipsoidGeometryUpdater",["../Core/Cartesian3","../Core/Color","../Core/ColorGeometryInstanceAttribute","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/EllipsoidGeometry","../Core/EllipsoidOutlineGeometry","../Core/Event","../Core/GeometryInstance","../Core/Iso8601","../Core/Matrix3","../Core/Matrix4","../Core/ShowGeometryInstanceAttribute","../Scene/MaterialAppearance","../Scene/PerInstanceColorAppearance","../Scene/Primitive","../Scene/SceneMode","./ColorMaterialProperty","./ConstantProperty","./MaterialProperty","./Property"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){"use strict";var y,z,A,B,C=u.fromColor(b.WHITE),D=new v(!0),E=new v(!0),F=new v(!1),G=new v(b.BLACK),H=new a(1,1,1),I=function(a){this.id=a,this.vertexFormat=void 0,this.radii=void 0,this.stackPartitions=void 0,this.slicePartitions=void 0,this.subdivisions=void 0},J=function(a,b){this._scene=b,this._entity=a,this._entitySubscription=a.definitionChanged.addEventListener(J.prototype._onEntityPropertyChanged,this),this._fillEnabled=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new k,this._showProperty=void 0,this._materialProperty=void 0,this._hasConstantOutline=!0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._options=new I(a),this._onEntityPropertyChanged(a,"ellipsoid",a.ellipsoid,void 0)};f(J,{perInstanceColorAppearanceType:{value:r},materialAppearanceType:{value:q}}),f(J.prototype,{entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!e(this._entity.availability)&&x.isConstant(this._showProperty)&&x.isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!e(this._entity.availability)&&x.isConstant(this._showProperty)&&x.isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},isDynamic:{get:function(){return this._dynamic}},isClosed:{value:!0},geometryChanged:{get:function(){return this._geometryChanged}}}),J.prototype.isOutlineVisible=function(a){var b=this._entity;return this._outlineEnabled&&b.isAvailable(a)&&this._showProperty.getValue(a)&&this._showOutlineProperty.getValue(a)},J.prototype.isFilled=function(a){var b=this._entity;return this._fillEnabled&&b.isAvailable(a)&&this._showProperty.getValue(a)&&this._fillProperty.getValue(a)},J.prototype.createFillGeometryInstance=function(a){var d,f,g=this._entity,h=g.isAvailable(a),j=new p(h&&this._showProperty.getValue(a)&&this._fillProperty.getValue(a));if(this._materialProperty instanceof u){var k=b.WHITE;e(this._materialProperty.color)&&(this._materialProperty.color.isConstant||h)&&(k=this._materialProperty.color.getValue(a)),f=c.fromColor(k),d={show:j,color:f}}else d={show:j};return y=g.position.getValue(m.MINIMUM_VALUE,y),z=g.orientation.getValue(m.MINIMUM_VALUE,z),B=n.fromQuaternion(z,B),new l({id:g,geometry:new i(this._options),modelMatrix:o.fromRotationTranslation(B,y),attributes:d})},J.prototype.createOutlineGeometryInstance=function(a){var d=this._entity,e=d.isAvailable(a);y=d.position.getValue(m.MINIMUM_VALUE,y),z=d.orientation.getValue(m.MINIMUM_VALUE,z),B=n.fromQuaternion(z,B);var f=x.getValueOrDefault(this._outlineColorProperty,a,b.BLACK);return new l({id:d,geometry:new j(this._options),modelMatrix:o.fromRotationTranslation(B,y),attributes:{show:new p(e&&this._showProperty.getValue(a)&&this._showOutlineProperty.getValue(a)),color:c.fromColor(f)}})},J.prototype.isDestroyed=function(){return!1},J.prototype.destroy=function(){this._entitySubscription(),g(this)},J.prototype._onEntityPropertyChanged=function(a,b){if("availability"===b||"position"===b||"orientation"===b||"ellipsoid"===b){var c=this._entity.ellipsoid;if(!e(c))return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var f=c.fill,g=e(f)&&f.isConstant?f.getValue(m.MINIMUM_VALUE):!0,h=c.outline,i=e(h);if(i&&h.isConstant&&(i=h.getValue(m.MINIMUM_VALUE)),!g&&!i)return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var j=this._entity.position,k=this._entity.orientation,l=c.radii,n=c.show;if(e(n)&&n.isConstant&&!n.getValue(m.MINIMUM_VALUE)||!e(j)||!e(k)||!e(l))return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var o=d(c.material,C),p=o instanceof u;this._materialProperty=o,this._fillProperty=d(f,E),this._showProperty=d(n,D),this._showOutlineProperty=d(c.outline,F),this._outlineColorProperty=i?d(c.outlineColor,G):void 0,this._fillEnabled=g,this._outlineEnabled=i;var s=c.stackPartitions,t=c.slicePartitions,v=c.outlineWidth,w=c.subdivisions;if(j.isConstant&&k.isConstant&&l.isConstant&&x.isConstant(s)&&x.isConstant(t)&&x.isConstant(v)&&x.isConstant(w)){var y=this._options;y.vertexFormat=p?r.VERTEX_FORMAT:q.MaterialSupport.TEXTURED.vertexFormat,y.radii=l.getValue(m.MINIMUM_VALUE,y.radii),y.stackPartitions=e(s)?s.getValue(m.MINIMUM_VALUE):void 0,y.slicePartitions=e(t)?t.getValue(m.MINIMUM_VALUE):void 0,y.subdivisions=e(w)?w.getValue(m.MINIMUM_VALUE):void 0,this._outlineWidth=e(v)?v.getValue(m.MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}else this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this))}},J.prototype.createDynamicUpdater=function(a){return new K(a,this)};var K=function(a,b){this._entity=b._entity,this._scene=b._scene,this._primitives=a,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=b,this._options=new I(b._entity),this._modelMatrix=new o,this._material=void 0,this._attributes=void 0,this._outlineAttributes=void 0,this._lastSceneMode=void 0,this._lastOutlineWidth=void 0};return K.prototype.update=function(a){var f=this._entity,g=f.ellipsoid,h=g.show;if(!f.isAvailable(a)||e(h)&&!h.getValue(a))return e(this._primitive)&&(this._primitive.show=!1),e(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1),void 0;var k,m=!e(g.fill)||g.fill.getValue(a),u=e(g.outline)&&g.outline.getValue(a),v=e(g.outlineColor)?g.outlineColor.getValue(a):b.BLACK,x=w.getValue(a,d(g.material,C),this._material);this._material=x;var D=g.stackPartitions,E=g.slicePartitions,F=g.subdivisions,G=g.outlineWidth,I=e(D)?D.getValue(a):void 0,J=e(E)?E.getValue(a):void 0,K=e(F)?F.getValue(a):void 0,L=e(G)?G.getValue(a):1,M=this._options,N=this._scene.mode,O=N===t.SCENE3D,P=this._modelMatrix,Q=f.position,R=f.orientation,S=g.radii;y=Q.getValue(a,y),z=R.getValue(a,z),B=n.fromQuaternion(z,B),A=S.getValue(a,A),P=o.fromRotationTranslation(B,y,P);var T=!O||this._lastSceneMode!==N||!e(this._primitive)||M.stackPartitions!==I||M.slicePartitions!==J||M.subdivisions!==K||this._lastOutlineWidth!==L;if(T){this._removePrimitives(),this._lastSceneMode=N,this._lastOutlineWidth=L,M.stackPartitions=I,M.slicePartitions=J,M.subdivisions=K,M.radii=O?H:A,this._material=x,x=this._material,k=new q({material:x,translucent:x.isTranslucent(),closed:!0}),M.vertexFormat=k.vertexFormat,this._primitive=new s({geometryInstances:new l({id:f,geometry:new i(M),modelMatrix:O?void 0:P,attributes:{show:new p(m)}}),appearance:k,asynchronous:!1}),this._primitives.add(this._primitive),M.vertexFormat=r.VERTEX_FORMAT;var U=1!==v.alpha;this._outlinePrimitive=new s({geometryInstances:new l({id:f,geometry:new j(M),modelMatrix:O?void 0:P,attributes:{show:new p(u),color:c.fromColor(v)}}),appearance:new r({flat:!0,translucent:U,renderState:{lineWidth:this._geometryUpdater._scene.clampLineWidth(L)}}),asynchronous:!1}),this._primitives.add(this._outlinePrimitive)}else if(this._primitive.ready){var V=this._primitive;k=V.appearance,k.material=x;var W=this._attributes;e(W)||(W=V.getGeometryInstanceAttributes(f),this._attributes=W),W.show=p.toValue(m,W.show);var X=this._outlinePrimitive,Y=this._outlineAttributes;e(Y)||(Y=X.getGeometryInstanceAttributes(f),this._outlineAttributes=Y),Y.show=p.toValue(u,Y.show),Y.color=c.toValue(v,Y.color)}O&&(A.x=Math.max(A.x,.001),A.y=Math.max(A.y,.001),A.z=Math.max(A.z,.001),P=o.multiplyByScale(P,A,P),this._primitive.modelMatrix=P,this._outlinePrimitive.modelMatrix=P)},K.prototype.isDestroyed=function(){return!1},K.prototype._removePrimitives=function(){e(this._primitive)&&this._primitives.remove(this._primitive),e(this._outlinePrimitive)&&this._primitives.remove(this._outlinePrimitive)},K.prototype.destroy=function(){this._removePrimitives(),g(this)},J}),c("DataSources/StaticGeometryColorBatch",["../Core/AssociativeArray","../Core/Color","../Core/ColorGeometryInstanceAttribute","../Core/defined","../Core/ShowGeometryInstanceAttribute","../Scene/Primitive"],function(a,b,c,d,e,f){"use strict";var g=new b,h=function(b,c,d,e){this.translucent=c,this.appearanceType=d,this.closed=e,this.primitives=b,this.createPrimitive=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new a,this.updaters=new a,this.updatersWithAttributes=new a,this.attributes=new a,this.itemsToRemove=[]};h.prototype.add=function(a,b){var c=a.entity.id;this.createPrimitive=!0,this.geometry.set(c,b),this.updaters.set(c,a),a.hasConstantFill&&a.fillMaterialProperty.isConstant||this.updatersWithAttributes.set(c,a)},h.prototype.remove=function(a){var b=a.entity.id;this.createPrimitive=this.geometry.remove(b)||this.createPrimitive,this.updaters.remove(b),this.updatersWithAttributes.remove(b)},h.prototype.update=function(a){var h=!0,i=!0,j=0,k=this.primitive,l=this.primitives;if(this.createPrimitive){this.attributes.removeAll(),d(k)&&(k.ready?this.oldPrimitive=k:l.remove(k),h=!1);var m=this.geometry.values;m.length>0&&(k=new f({asynchronous:!0,geometryInstances:m,appearance:new this.appearanceType({translucent:this.translucent,closed:this.closed})}),k.show=h,l.add(k),i=!1),this.primitive=k,this.createPrimitive=!1}else if(d(k)&&k.ready){d(this.oldPrimitive)&&(l.remove(this.oldPrimitive),this.oldPrimitive=void 0,k.show=!0);for(var n=this.updatersWithAttributes.values,o=n.length,p=0;o>p;p++){var q=n[p],r=this.geometry.get(q.entity.id),s=this.attributes.get(r.id.id);if(d(s)||(s=k.getGeometryInstanceAttributes(r.id),this.attributes.set(r.id.id,s)),!q.fillMaterialProperty.isConstant){var t=q.fillMaterialProperty.color;t.getValue(a,g),b.equals(s._lastColor,g)||(s._lastColor=b.clone(g,s._lastColor),s.color=c.toValue(g,s.color),(this.translucent&&255===s.color[3]||!this.translucent&&255!==s.color[3])&&(this.itemsToRemove[j++]=q))}q.hasConstantFill||(h=q.isFilled(a),h!==s._lastShow&&(s._lastShow=h,s.show=e.toValue(h,s.show)))}}else d(k)&&!k.ready&&(i=!1);return this.itemsToRemove.length=j,i},h.prototype.removeAllPrimitives=function(){var a=this.primitive;d(a)&&(this.primitives.remove(a),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll())};var i=function(a,b,c){this._solidBatch=new h(a,!1,b,c),this._translucentBatch=new h(a,!0,b,c)};return i.prototype.add=function(a,b){var c=b.createFillGeometryInstance(a);255===c.attributes.color.value[3]?this._solidBatch.add(b,c):this._translucentBatch.add(b,c)},i.prototype.remove=function(a){this._solidBatch.remove(a)||this._translucentBatch.remove(a)},i.prototype.update=function(a){var b,c,d=this._solidBatch.update(a);d=this._translucentBatch.update(a)&&d;var e=this._solidBatch.itemsToRemove,f=e.length;if(f>0)for(b=0;f>b;b++)c=e[b],this._solidBatch.remove(c),this._translucentBatch.add(c,c.createFillGeometryInstance(a));e=this._translucentBatch.itemsToRemove;var g=e.length;if(g>0)for(b=0;g>b;b++)c=e[b],this._translucentBatch.remove(c),this._solidBatch.add(c,c.createFillGeometryInstance(a));return(f>0||g>0)&&(d=this._solidBatch.update(a)&&d,d=this._translucentBatch.update(a)&&d),d},i.prototype.removeAllPrimitives=function(){this._solidBatch.removeAllPrimitives(),this._translucentBatch.removeAllPrimitives()},i}),c("DataSources/StaticGeometryPerMaterialBatch",["../Core/AssociativeArray","../Core/defined","../Core/ShowGeometryInstanceAttribute","../Scene/Primitive","./MaterialProperty"],function(a,b,c,d,e){"use strict";var f=function(b,c,d,e){this.primitives=b,this.appearanceType=c,this.materialProperty=d,this.closed=e,this.updaters=new a,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new a,this.material=void 0,this.updatersWithAttributes=new a,this.attributes=new a,this.invalidated=!1,this.removeMaterialSubscription=d.definitionChanged.addEventListener(f.prototype.onMaterialChanged,this)};f.prototype.onMaterialChanged=function(){this.invalidated=!0},f.prototype.isMaterial=function(a){var c=this.materialProperty,d=a.fillMaterialProperty;return d===c?!0:b(c)?c.equals(d):!1},f.prototype.add=function(a,b){var c=b.entity.id;this.updaters.set(c,b),this.geometry.set(c,b.createFillGeometryInstance(a)),b.hasConstantFill&&b.fillMaterialProperty.isConstant||this.updatersWithAttributes.set(c,b),this.createPrimitive=!0},f.prototype.remove=function(a){var b=a.entity.id;return this.createPrimitive=this.updaters.remove(b),this.geometry.remove(b),this.updatersWithAttributes.remove(b),this.createPrimitive},f.prototype.update=function(a){var f=!0,g=!0,h=this.primitive,i=this.primitives,j=this.geometry.values;if(this.createPrimitive)b(h)&&(h.ready?this.oldPrimitive=h:i.remove(h),f=!1),j.length>0&&(this.material=e.getValue(a,this.materialProperty,this.material),h=new d({asynchronous:!0,geometryInstances:j,appearance:new this.appearanceType({material:this.material,translucent:this.material.isTranslucent(),closed:this.closed})}),h.show=f,i.add(h),g=!1),this.primitive=h,this.createPrimitive=!1;else if(b(h)&&h.ready){b(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0,h.show=!0),this.material=e.getValue(a,this.materialProperty,this.material),this.primitive.appearance.material=this.material;for(var k=this.updatersWithAttributes.values,l=k.length,m=0;l>m;m++){var n=k[m],o=this.geometry.get(n.entity.id),p=this.attributes.get(o.id.id);b(p)||(p=h.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,p)),n.hasConstantFill||(f=n.isFilled(a),f!==p._lastShow&&(p._lastShow=f,p.show=c.toValue(f,p.show)))}}else b(h)&&!h.ready&&(g=!1);return g},f.prototype.destroy=function(){var a=this.primitive,c=this.primitives;b(a)&&c.remove(a),this.removeMaterialSubscription()};var g=function(a,b,c){this._items=[],this._primitives=a,this._appearanceType=b,this._closed=c};return g.prototype.add=function(a,b){
for(var c=this._items,d=c.length,e=0;d>e;e++){var g=c[e];if(g.isMaterial(b))return g.add(a,b),void 0}var h=new f(this._primitives,this._appearanceType,b.fillMaterialProperty,this._closed);h.add(a,b),c.push(h)},g.prototype.remove=function(a){for(var b=this._items,c=b.length,d=c-1;d>=0;d--){var e=b[d];if(e.remove(a)){0===e.updaters.length&&(b.splice(d,1),e.destroy());break}}},g.prototype.update=function(a){var b,c=this._items,d=c.length;for(b=d-1;b>=0;b--){var e=c[b];if(e.invalidated){c.splice(b,1);for(var f=e.updaters.values,g=f.length,h=0;g>h;h++)this.add(a,f[h]);e.destroy()}}var i=!0;for(b=0;d>b;b++)i=c[b].update(a)&&i;return i},g.prototype.removeAllPrimitives=function(){for(var a=this._items,b=a.length,c=0;b>c;c++)a[c].destroy();this._items.length=0},g}),c("DataSources/StaticOutlineGeometryBatch",["../Core/AssociativeArray","../Core/Color","../Core/ColorGeometryInstanceAttribute","../Core/defined","../Core/ShowGeometryInstanceAttribute","../Scene/PerInstanceColorAppearance","../Scene/Primitive"],function(a,b,c,d,e,f,g){"use strict";var h=function(b,c,d){this.translucent=c,this.primitives=b,this.createPrimitive=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new a,this.updaters=new a,this.updatersWithAttributes=new a,this.attributes=new a,this.itemsToRemove=[],this.width=d};h.prototype.add=function(a,b){var c=a.entity.id;this.createPrimitive=!0,this.geometry.set(c,b),this.updaters.set(c,a),a.hasConstantOutline&&a.outlineColorProperty.isConstant||this.updatersWithAttributes.set(c,a)},h.prototype.remove=function(a){var b=a.entity.id;this.createPrimitive=this.geometry.remove(b)||this.createPrimitive,this.updaters.remove(b),this.updatersWithAttributes.remove(b)};var i=new b;h.prototype.update=function(a){var h=!0,j=!0,k=0,l=this.primitive,m=this.primitives;if(this.createPrimitive){this.attributes.removeAll(),d(l)&&(l.ready?this.oldPrimitive=l:m.remove(l),h=!1);var n=this.geometry.values;n.length>0&&(l=new g({asynchronous:!0,geometryInstances:n,appearance:new f({flat:!0,translucent:this.translucent,renderState:{lineWidth:this.width}})}),m.add(l),j=!1,l.show=h),this.primitive=l,this.createPrimitive=!1}else if(d(l)&&l.ready){d(this.oldPrimitive)&&(m.remove(this.oldPrimitive),this.oldPrimitive=void 0,l.show=!0);for(var o=this.updatersWithAttributes.values,p=o.length,q=0;p>q;q++){var r=o[q],s=this.geometry.get(r.entity.id),t=this.attributes.get(s.id.id);if(d(t)||(t=l.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,t)),!r.outlineColorProperty.isConstant){var u=r.outlineColorProperty;u.getValue(a,i),b.equals(t._lastColor,i)||(t._lastColor=b.clone(i,t._lastColor),t.color=c.toValue(i,t.color),(this.translucent&&255===t.color[3]||!this.translucent&&255!==t.color[3])&&(this.itemsToRemove[k++]=r))}r.hasConstantOutline||(h=r.isOutlineVisible(a),h!==t._lastShow&&(t._lastShow=h,t.show=e.toValue(h,t.show)))}}else d(l)&&!l.ready&&(j=!1);return this.itemsToRemove.length=k,j},h.prototype.removeAllPrimitives=function(){var a=this.primitive;d(a)&&(this.primitives.remove(a),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll())};var j=function(b,c){this._primitives=b,this._scene=c,this._solidBatches=new a,this._translucentBatches=new a};return j.prototype.add=function(a,b){var c,e,f=b.createOutlineGeometryInstance(a),g=this._scene.clampLineWidth(b.outlineWidth);255===f.attributes.color.value[3]?(c=this._solidBatches,e=c.get(g),d(e)||(e=new h(this._primitives,!1,g),c.set(g,e)),e.add(b,f)):(c=this._translucentBatches,e=c.get(g),d(e)||(e=new h(this._primitives,!0,g),c.set(g,e)),e.add(b,f))},j.prototype.remove=function(a){var b,c=this._solidBatches.values,d=c.length;for(b=0;d>b;b++)if(c[b].remove(a))return;var e=this._translucentBatches.values,f=e.length;for(b=0;f>b;b++)if(e.remove(a))return},j.prototype.update=function(a){var b,c,d,e,f,g=this._solidBatches.values,h=g.length,i=this._translucentBatches.values,j=i.length,k=!0,l=!1;do{for(l=!1,c=0;h>c;c++){e=g[c],k=e.update(a),f=e.itemsToRemove;var m=f.length;if(m>0)for(l=!0,b=0;m>b;b++)d=f[b],e.remove(d),this.add(a,d)}for(c=0;j>c;c++){e=i[c],k=e.update(a),f=e.itemsToRemove;var n=f.length;if(n>0)for(l=!0,b=0;n>b;b++)d=f[b],e.remove(d),this.add(a,d)}}while(l);return k},j.prototype.removeAllPrimitives=function(){var a,b=this._solidBatches.values,c=b.length;for(a=0;c>a;a++)b[a].removeAllPrimitives();var d=this._translucentBatches.values,e=d.length;for(a=0;e>a;a++)d[a].removeAllPrimitives()},j}),c("DataSources/GeometryVisualizer",["../Core/AssociativeArray","../Core/defined","../Core/destroyObject","../Core/DeveloperError","./ColorMaterialProperty","./StaticGeometryColorBatch","./StaticGeometryPerMaterialBatch","./StaticOutlineGeometryBatch"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){a._outlineBatch.remove(b),a._closedColorBatch.remove(b),a._closedMaterialBatch.remove(b),a._openColorBatch.remove(b),a._openMaterialBatch.remove(b),a._dynamicBatch.remove(b)}function j(a,b,c){return c.isDynamic?(a._dynamicBatch.add(b,c),void 0):(c.outlineEnabled&&a._outlineBatch.add(b,c),c.fillEnabled&&(c.isClosed?c.fillMaterialProperty instanceof e?a._closedColorBatch.add(b,c):a._closedMaterialBatch.add(b,c):c.fillMaterialProperty instanceof e?a._openColorBatch.add(b,c):a._openMaterialBatch.add(b,c)),void 0)}var k=[],l=function(b){this._primitives=b,this._dynamicUpdaters=new a};l.prototype.add=function(a,b){this._dynamicUpdaters.set(b.entity.id,b.createDynamicUpdater(this._primitives))},l.prototype.remove=function(a){var c=a.entity.id,d=this._dynamicUpdaters.get(c);b(d)&&(this._dynamicUpdaters.remove(c),d.destroy())},l.prototype.update=function(a){for(var b=this._dynamicUpdaters.values,c=0,d=b.length;d>c;c++)b[c].update(a);return!0},l.prototype.removeAllPrimitives=function(){for(var a=this._dynamicUpdaters.values,b=0,c=a.length;c>b;b++)a[b].destroy();this._dynamicUpdaters.removeAll()};var m=function(b,c,d){this._type=b;var e=c.primitives;this._scene=c,this._primitives=e,this._entityCollection=void 0,this._addedObjects=new a,this._removedObjects=new a,this._changedObjects=new a,this._outlineBatch=new h(e,c),this._closedColorBatch=new f(e,b.perInstanceColorAppearanceType,!0),this._closedMaterialBatch=new g(e,b.materialAppearanceType,!0),this._openColorBatch=new f(e,b.perInstanceColorAppearanceType,!1),this._openMaterialBatch=new g(e,b.materialAppearanceType,!1),this._dynamicBatch=new l(e),this._subscriptions=new a,this._updaters=new a,this._entityCollection=d,d.collectionChanged.addEventListener(m.prototype._onCollectionChanged,this),this._onCollectionChanged(d,d.entities,k)};return m.prototype.update=function(a){var b,c,d,e,f=this._addedObjects,g=f.values,h=this._removedObjects,k=h.values,l=this._changedObjects,n=l.values;for(b=k.length-1;b>-1;b--)c=k[b],d=c.id,e=this._updaters.get(d),i(this,e),e.destroy(),this._updaters.remove(d),this._subscriptions.get(d)(),this._subscriptions.remove(d);for(b=g.length-1;b>-1;b--)c=g[b],d=c.id,e=new this._type(c,this._scene),this._updaters.set(d,e),j(this,a,e),this._subscriptions.set(d,e.geometryChanged.addEventListener(m._onGeometryChanged,this));for(b=n.length-1;b>-1;b--)c=n[b],d=c.id,e=this._updaters.get(d),i(this,e),j(this,a,e);f.removeAll(),h.removeAll(),l.removeAll();var o=this._closedColorBatch.update(a);return o=this._closedMaterialBatch.update(a)&&o,o=this._openColorBatch.update(a)&&o,o=this._openMaterialBatch.update(a)&&o,o=this._dynamicBatch.update(a)&&o,o=this._outlineBatch.update(a)&&o},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(m.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll(),this._outlineBatch.removeAllPrimitives(),this._closedColorBatch.removeAllPrimitives(),this._closedMaterialBatch.removeAllPrimitives(),this._openColorBatch.removeAllPrimitives(),this._openMaterialBatch.removeAllPrimitives(),this._dynamicBatch.removeAllPrimitives();for(var a=this._subscriptions.values,b=a.length,d=0;b>d;d++)a[d]();return this._subscriptions.removeAll(),c(this)},m._onGeometryChanged=function(a){var c=this._removedObjects,d=this._changedObjects,e=a.entity,f=e.id;b(c.get(f))||b(d.get(f))||d.set(f,e)},m.prototype._onCollectionChanged=function(a,b,c){var d,e,f,g=this._addedObjects,h=this._removedObjects,i=this._changedObjects;for(d=c.length-1;d>-1;d--)f=c[d],e=f.id,g.remove(e)||(h.set(e,f),i.remove(e));for(d=b.length-1;d>-1;d--)f=b[d],e=f.id,h.remove(e)?i.set(e,f):g.set(e,f)},m}),c("Scene/Label",["../Core/Cartesian2","../Core/Cartesian3","../Core/Color","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/NearFarScalar","./Billboard","./HorizontalOrigin","./LabelStyle","./VerticalOrigin"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a){a._rebindAllGlyphs||a._repositionAllGlyphs||a._labelCollection._labelsToUpdate.push(a),a._rebindAllGlyphs=!0}function n(a){a._rebindAllGlyphs||a._repositionAllGlyphs||a._labelCollection._labelsToUpdate.push(a),a._repositionAllGlyphs=!0}var o=function(e,f){e=d(e,d.EMPTY_OBJECT),this._text=d(e.text,""),this._show=d(e.show,!0),this._font=d(e.font,"30px sans-serif"),this._fillColor=c.clone(d(e.fillColor,c.WHITE)),this._outlineColor=c.clone(d(e.outlineColor,c.BLACK)),this._outlineWidth=d(e.outlineWidth,1),this._style=d(e.style,k.FILL),this._verticalOrigin=d(e.verticalOrigin,l.BOTTOM),this._horizontalOrigin=d(e.horizontalOrigin,j.LEFT),this._pixelOffset=a.clone(d(e.pixelOffset,a.ZERO)),this._eyeOffset=b.clone(d(e.eyeOffset,b.ZERO)),this._position=b.clone(d(e.position,b.ZERO)),this._scale=d(e.scale,1),this._id=e.id,this._translucencyByDistance=e.translucencyByDistance,this._pixelOffsetScaleByDistance=e.pixelOffsetScaleByDistance,this._labelCollection=f,this._glyphs=[],this._rebindAllGlyphs=!0,this._repositionAllGlyphs=!0};return f(o.prototype,{show:{get:function(){return this._show},set:function(a){if(this._show!==a){this._show=a;for(var b=this._glyphs,c=0,d=b.length;d>c;c++){var f=b[c];e(f.billboard)&&(f.billboard.show=a)}}}},position:{get:function(){return this._position},set:function(a){var c=this._position;if(!b.equals(c,a)){b.clone(a,c);for(var d=this._glyphs,f=0,g=d.length;g>f;f++){var h=d[f];e(h.billboard)&&(h.billboard.position=a)}}}},text:{get:function(){return this._text},set:function(a){this._text!==a&&(this._text=a,m(this))}},font:{get:function(){return this._font},set:function(a){this._font!==a&&(this._font=a,m(this))}},fillColor:{get:function(){return this._fillColor},set:function(a){var b=this._fillColor;c.equals(b,a)||(c.clone(a,b),m(this))}},outlineColor:{get:function(){return this._outlineColor},set:function(a){var b=this._outlineColor;c.equals(b,a)||(c.clone(a,b),m(this))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(a){this._outlineWidth!==a&&(this._outlineWidth=a,m(this))}},style:{get:function(){return this._style},set:function(a){this._style!==a&&(this._style=a,m(this))}},pixelOffset:{get:function(){return this._pixelOffset},set:function(b){var c=this._pixelOffset;if(!a.equals(c,b)){a.clone(b,c);for(var d=this._glyphs,f=0,g=d.length;g>f;f++){var h=d[f];e(h.billboard)&&(h.billboard.pixelOffset=b)}}}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(a){var b=this._translucencyByDistance;if(!h.equals(b,a)){this._translucencyByDistance=h.clone(a,b);for(var c=this._glyphs,d=0,f=c.length;f>d;d++){var g=c[d];e(g.billboard)&&(g.billboard.translucencyByDistance=a)}}}},pixelOffsetScaleByDistance:{get:function(){return this._pixelOffsetScaleByDistance},set:function(a){var b=this._pixelOffsetScaleByDistance;if(!h.equals(b,a)){this._pixelOffsetScaleByDistance=h.clone(a,b);for(var c=this._glyphs,d=0,f=c.length;f>d;d++){var g=c[d];e(g.billboard)&&(g.billboard.pixelOffsetScaleByDistance=a)}}}},eyeOffset:{get:function(){return this._eyeOffset},set:function(a){var c=this._eyeOffset;if(!b.equals(c,a)){b.clone(a,c);for(var d=this._glyphs,f=0,g=d.length;g>f;f++){var h=d[f];e(h.billboard)&&(h.billboard.eyeOffset=a)}}}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(a){this._horizontalOrigin!==a&&(this._horizontalOrigin=a,n(this))}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(a){if(this._verticalOrigin!==a){this._verticalOrigin=a;for(var b=this._glyphs,c=0,d=b.length;d>c;c++){var f=b[c];e(f.billboard)&&(f.billboard.verticalOrigin=a)}n(this)}}},scale:{get:function(){return this._scale},set:function(a){if(this._scale!==a){this._scale=a;for(var b=this._glyphs,c=0,d=b.length;d>c;c++){var f=b[c];e(f.billboard)&&(f.billboard.scale=a)}n(this)}}},id:{get:function(){return this._id},set:function(a){if(this._id!==a){this._id=a;for(var b=this._glyphs,c=0,d=b.length;d>c;c++){var f=b[c];e(f.billboard)&&(f.billboard.id=a)}}}}}),o.prototype.computeScreenSpacePosition=function(a){var b=this._labelCollection,c=b.modelMatrix,d=i._computeActualPosition(this._position,a.frameState,c),e=i._computeScreenSpacePosition(c,d,this._eyeOffset,this._pixelOffset,a);return e.y=a.canvas.clientHeight-e.y,e},o.prototype.equals=function(d){return this===d||e(d)&&this._show===d._show&&this._scale===d._scale&&this._style===d._style&&this._verticalOrigin===d._verticalOrigin&&this._horizontalOrigin===d._horizontalOrigin&&this._text===d._text&&this._font===d._font&&b.equals(this._position,d._position)&&c.equals(this._fillColor,d._fillColor)&&c.equals(this._outlineColor,d._outlineColor)&&a.equals(this._pixelOffset,d._pixelOffset)&&b.equals(this._eyeOffset,d._eyeOffset)&&h.equals(this._translucencyByDistance,d._translucencyByDistance)&&h.equals(this._pixelOffsetScaleByDistance,d._pixelOffsetScaleByDistance)&&this._id===d._id},o.prototype.isDestroyed=function(){return!1},o}),c("Scene/LabelCollection",["../Core/Cartesian2","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Matrix4","../Core/writeTextToCanvas","./BillboardCollection","./HorizontalOrigin","./Label","./LabelStyle","./TextureAtlas","./VerticalOrigin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(){this.textureInfo=void 0,this.dimensions=void 0,this.billboard=void 0}function p(a,b,c){this.labelCollection=a,this.index=b,this.dimensions=c}function q(a,b,c,d,e,f,g){return w.font=b,w.fillColor=c,w.strokeColor=d,w.strokeWidth=e,w.textBaseline=g===n.BOTTOM?"bottom":g===n.TOP?"top":"middle",w.fill=f===l.FILL||f===l.FILL_AND_OUTLINE,w.stroke=f===l.OUTLINE||f===l.FILL_AND_OUTLINE,h(a,w)}function r(a,b){b.textureInfo=void 0,b.dimensions=void 0;var d=b.billboard;c(d)&&(d.show=!1,d.image=void 0,a._spareBillboards.push(d),b.billboard=void 0)}function s(a,b,c,d){a.addImage(b,c).then(function(a){d.index=a})}function t(a,b){var d,e,f,g=b._text,h=g.length,i=b._glyphs,k=i.length;if(k>h)for(e=h;k>e;++e)r(a,i[e]);i.length=h;var l=a._glyphTextureCache;for(f=0;h>f;++f){var m=g.charAt(f),n=b._font,t=b._fillColor,u=b._outlineColor,v=b._outlineWidth,w=b._style,x=b._verticalOrigin,y=JSON.stringify([m,n,t.toRgba(),u.toRgba(),v,+w,+x]),z=l[y];if(!c(z)){var A=q(m,n,t,u,v,w,x);z=new p(a,-1,A.dimensions),l[y]=z,A.width>0&&A.height>0&&s(a._textureAtlas,y,A,z)}if(d=i[f],c(d)?-1===z.index?r(a,d):c(d.textureInfo)&&(d.textureInfo=void 0):(d=new o,i[f]=d),d.textureInfo=z,d.dimensions=z.dimensions,-1!==z.index){var B=d.billboard;c(B)||(B=a._spareBillboards.length>0?a._spareBillboards.pop():a._billboardCollection.add({collection:a}),d.billboard=B),B.show=b._show,B.position=b._position,B.eyeOffset=b._eyeOffset,B.pixelOffset=b._pixelOffset,B.horizontalOrigin=j.LEFT,B.verticalOrigin=b._verticalOrigin,B.scale=b._scale,B.pickPrimitive=b,B.id=b._id,B.image=y,B.translucencyByDistance=b._translucencyByDistance,B.pixelOffsetScaleByDistance=b._pixelOffsetScaleByDistance}}b._repositionAllGlyphs=!0}function u(a,b){var d,e,f=a._glyphs,g=0,h=0,i=0,k=f.length;for(i=0;k>i;++i)d=f[i],e=d.dimensions,g+=e.width,h=Math.max(h,e.height);var l=a._scale,m=a._horizontalOrigin,o=0;m===j.CENTER?o-=g/2*l:m===j.RIGHT&&(o-=g*l),x.x=o*b,x.y=0;var p=a._verticalOrigin;for(i=0;k>i;++i)d=f[i],e=d.dimensions,p===n.BOTTOM||e.height===h?x.y=-e.descent*l:p===n.TOP?x.y=-(h-e.height)*l-e.descent*l:p===n.CENTER&&(x.y=-(h-e.height)/2*l-e.descent*l),x.y*=b,c(d.billboard)&&d.billboard._setTranslate(x),x.x+=e.width*l*b}function v(a,b){for(var c=b._glyphs,d=0,f=c.length;f>d;++d)r(a,c[d]);b._labelCollection=void 0,e(b)}var w={},x=new a,y=function(a){a=b(a,b.EMPTY_OBJECT),this._textureAtlas=void 0,this._billboardCollection=new i,this._billboardCollection.destroyTextureAtlas=!1,this._spareBillboards=[],this._glyphTextureCache={},this._labels=[],this._labelsToUpdate=[],this._totalGlyphCount=0,this._resolutionScale=void 0,this.modelMatrix=g.clone(b(a.modelMatrix,g.IDENTITY)),this.debugShowBoundingVolume=b(a.debugShowBoundingVolume,!1)};return d(y.prototype,{length:{get:function(){return this._labels.length}}}),y.prototype.add=function(a){var b=new k(a,this);return this._labels.push(b),this._labelsToUpdate.push(b),b},y.prototype.remove=function(a){if(c(a)&&a._labelCollection===this){var b=this._labels.indexOf(a);if(-1!==b)return this._labels.splice(b,1),v(this,a),!0}return!1},y.prototype.removeAll=function(){for(var a=this._labels,b=0,c=a.length;c>b;++b)v(this,a[b]);a.length=0},y.prototype.contains=function(a){return c(a)&&a._labelCollection===this},y.prototype.get=function(a){return this._labels[a]},y.prototype.update=function(a,b,d){var e=this._billboardCollection;e.modelMatrix=this.modelMatrix,e.debugShowBoundingVolume=this.debugShowBoundingVolume,c(this._textureAtlas)||(this._textureAtlas=new m({context:a}),e.textureAtlas=this._textureAtlas);var f=a.uniformState,g=f.resolutionScale,h=this._resolutionScale!==g;this._resolutionScale=g;var i;i=h?this._labels:this._labelsToUpdate;for(var j=0,k=i.length;k>j;++j){var l=i[j];if(!l.isDestroyed()){var n=l._glyphs.length;l._rebindAllGlyphs&&(t(this,l),l._rebindAllGlyphs=!1),(h||l._repositionAllGlyphs)&&(u(l,g),l._repositionAllGlyphs=!1);var o=l._glyphs.length-n;this._totalGlyphCount+=o}}this._labelsToUpdate.length=0,e.update(a,b,d)},y.prototype.isDestroyed=function(){return!1},y.prototype.destroy=function(){return this.removeAll(),this._billboardCollection=this._billboardCollection.destroy(),this._textureAtlas=this._textureAtlas&&this._textureAtlas.destroy(),e(this)},y}),c("DataSources/LabelVisualizer",["../Core/AssociativeArray","../Core/Cartesian2","../Core/Cartesian3","../Core/Color","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Core/NearFarScalar","../Scene/HorizontalOrigin","../Scene/LabelCollection","../Scene/LabelStyle","../Scene/VerticalOrigin","./Property"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";function n(a,b){if(e(a)){var c=a.label;e(c)&&(b.push(a.index),c.show=!1,a.label=void 0,a.index=-1)}}var o=1,p="30px sans-serif",q=k.FILL,r=d.WHITE,s=d.BLACK,t=1,u=b.ZERO,v=c.ZERO,w=i.CENTER,x=l.CENTER,y=new c,z=new d,A=new d,B=new c,C=new b,D=new h,E=new h,F=function(a){this.entity=a,this.label=void 0,this.index=void 0},G=function(b,c){c.collectionChanged.addEventListener(G.prototype._onCollectionChanged,this),this._scene=b,this._unusedIndexes=[],this._labelCollection=void 0,this._entityCollection=c,this._items=new a,this._onCollectionChanged(c,c.entities,[],[])};return G.prototype.update=function(a){for(var b=this._items.values,c=this._unusedIndexes,d=0,f=b.length;f>d;d++){var g,h=b[d],i=h.entity,k=i._label,l=h.label,F=i.isAvailable(a)&&m.getValueOrDefault(k._show,a,!0);if(F&&(y=m.getValueOrUndefined(i._position,a,y),g=m.getValueOrUndefined(k._text,a),F=e(y)&&e(g)),F){if(!e(l)){var G=this._labelCollection;e(G)||(G=new j,this._labelCollection=G,this._scene.primitives.add(G));var H=c.length;if(H>0){var I=c.pop();h.index=I,l=G.get(I)}else l=G.add(),h.index=G.length-1;l.id=i,h.label=l}l.show=!0,l.position=y,l.text=g,l.scale=m.getValueOrDefault(k._scale,a,o),l.font=m.getValueOrDefault(k._font,a,p),l.style=m.getValueOrDefault(k._style,a,q),l.fillColor=m.getValueOrDefault(k._fillColor,a,r,z),l.outlineColor=m.getValueOrDefault(k._outlineColor,a,s,A),l.outlineWidth=m.getValueOrDefault(k._outlineWidth,a,t),l.pixelOffset=m.getValueOrDefault(k._pixelOffset,a,u,C),l.eyeOffset=m.getValueOrDefault(k._eyeOffset,a,v,B),l.horizontalOrigin=m.getValueOrDefault(k._horizontalOrigin,a,w),l.verticalOrigin=m.getValueOrDefault(k._verticalOrigin,a,x),l.translucencyByDistance=m.getValueOrUndefined(k._translucencyByDistance,a,D),l.pixelOffsetScaleByDistance=m.getValueOrUndefined(k._pixelOffsetScaleByDistance,a,E)}else n(h,c)}return!0},G.prototype.isDestroyed=function(){return!1},G.prototype.destroy=function(){return this._entityCollection.collectionChanged.removeEventListener(G.prototype._onCollectionChanged,this),e(this._labelCollection)&&this._scene.primitives.remove(this._labelCollection),f(this)},G.prototype._onCollectionChanged=function(a,b,c,d){var f,g,h=this._unusedIndexes,i=this._items;for(f=b.length-1;f>-1;f--)g=b[f],e(g._label)&&e(g._position)&&i.set(g.id,new F(g));for(f=d.length-1;f>-1;f--)g=d[f],e(g._label)&&e(g._position)?i.contains(g.id)||i.set(g.id,new F(g)):(n(i.get(g.id),h),i.remove(g.id));for(f=c.length-1;f>-1;f--)g=c[f],n(i.get(g.id),h),i.remove(g.id)},G}),c("ThirdParty/gltfDefaults",["../Core/defaultValue","../Core/defined"],function(a,b){"use strict";function c(c){b(c.accessors)||(c.accessors={});var d=c.accessors;for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];f.byteStride=a(f.byteStride,0)}}function d(c){b(c.animations)||(c.animations={});var d=c.animations;for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];b(f.channels)||(f.channels=[]),b(f.parameters)||(f.parameters={}),b(f.samplers)||(f.samplers={});var g=d.samplers;for(var h in g)if(g.hasOwnProperty(h)){var i=g[h];i.interpolation=a(i.interpolation,"LINEAR")}}}function e(c){b(c.asset)||(c.asset={}),c.asset.premultipliedAlpha=a(c.asset.premultipliedAlpha,!1)}function f(c){b(c.buffers)||(c.buffers={});var d=c.buffers;for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];f.type=a(f.type,"arraybuffer")}}function g(a){b(a.bufferViews)||(a.bufferViews={})}function h(a){b(a.cameras)||(a.cameras={})}function i(a){b(a.images)||(a.images={})}function j(c){b(c.lights)||(c.lights={});var d=c.lights;for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];if("ambient"===f.type){b(f.ambient)||(f.ambient={});var g=f.ambient;b(g.color)||(g.color=[1,1,1])}else if("directional"===f.type){b(f.directional)||(f.directional={});var h=f.directional;b(h.color)||(h.color=[1,1,1])}else if("point"===f.type){b(f.point)||(f.point={});var i=f.point;b(i.color)||(i.color=[1,1,1]),i.constantAttenuation=a(i.constantAttenuation,1),i.linearAttenuation=a(i.linearAttenuation,0),i.quadraticAttenuation=a(i.quadraticAttenuation,0)}else if("spot"===f.type){b(f.spot)||(f.spot={});var j=f.spot;b(j.color)||(j.color=[1,1,1]),j.constantAttenuation=a(j.constantAttenuation,1),j.fallOffAngle=a(j.fallOffAngle,3.14159265),j.fallOffExponent=a(j.fallOffExponent,0),j.linearAttenuation=a(j.linearAttenuation,0),j.quadraticAttenuation=a(j.quadraticAttenuation,0)}}}function k(a){b(a.materials)||(a.materials={});var c=a.materials;for(var d in c)if(c.hasOwnProperty(d)){var e=c[d].instanceTechnique;b(e.values)||(e.values={})}}function l(c){b(c.meshes)||(c.meshes={});var d=c.meshes;for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];b(f.primitives)||(f.primitives=[]);for(var g=f.primitives.length,h=g.length,i=0;h>i;++i){var j=g[i];b(j.attributes)||(j.attributes={}),j.primitive=a(j.primitive,WebGLRenderingContext.TRIANGLES)}}}function m(a){b(a.nodes)||(a.nodes={});var c=a.nodes;for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];b(e.children)||(e.children=[]),b(e.matrix)||(b(e.translation)&&b(e.rotation)&&b(e.scale)?(b(e.translation)||(e.translation=[0,0,0]),b(e.rotation)||(e.rotation=[1,0,0,0]),b(e.scale)||(e.scale=[1,1,1])):e.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}function n(a){b(a.programs)||(a.programs={});var c=a.programs;for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];b(e.attributes)||(e.attributes=[])}}function o(c){b(c.samplers)||(c.samplers={});var d=c.samplers;for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];f.magFilter=a(f.magFilter,WebGLRenderingContext.LINEAR),f.minFilter=a(f.minFilter,WebGLRenderingContext.NEAREST_MIPMAP_LINEAR),f.wrapS=a(f.wrapS,WebGLRenderingContext.REPEAT),f.wrapT=a(f.wrapT,WebGLRenderingContext.REPEAT)}}function p(a){b(a.scenes)||(a.scenes={});var c=a.scenes;for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];b(e.node)||(e.node=[])}}function q(a){b(a.shaders)||(a.shaders={})}function r(a){b(a.skins)||(a.skins={});var c=a.skins;for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];b(e.bindShapeMatrix)&&(e.bindShapeMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}function s(a){b(a.enable)||(a.enable=[]),b(a.disable)||(a.disable=[])}function t(a){b(a.techniques)||(a.techniques={});var c=a.techniques;for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];b(e.parameters)||(e.parameters={});var f=e.passes;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g],i=h.instanceProgram;b(i.attributes)||(i.attributes={}),b(i.uniforms)||(i.uniforms={}),b(h.states)||(h.states={}),s(h.states)}}}function u(c){b(c.textures)||(c.textures={});var d=c.textures;for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];f.format=a(f.format,WebGLRenderingContext.RGBA),f.internalFormat=a(f.internalFormat,f.format),f.target=a(f.target,WebGLRenderingContext.TEXTURE_2D),f.type=a(f.type,WebGLRenderingContext.UNSIGNED_BYTE)}}var v=function(s){return b(s)?(b(s.allExtensions)||(s.allExtensions=[]),c(s),d(s),e(s),f(s),g(s),h(s),i(s),j(s),k(s),l(s),m(s),n(s),o(s),p(s),q(s),r(s),t(s),s.profile=a(s.profile,"WebGL 1.0.2"),s.version=a(s.version,"1.0"),u(s),s):void 0};return v}),c("Scene/getModelAccessor",["../Core/ComponentDatatype"],function(a){"use strict";var b={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},c=function(c){var d=c.componentType,e=b[c.type];return{componentsPerAttribute:e,createArrayBufferView:function(b,c,f){return a.createArrayBufferView(d,b,c,e*f)}}};return c}),c("Scene/ModelAnimationCache",["../Core/Cartesian3","../Core/defined","../Core/LinearSpline","../Core/Quaternion","../Core/QuaternionSpline","./getModelAccessor"],function(a,b,c,d,e,f){"use strict";function g(a,b){var c=a.gltf,d=c.buffers,e=c.bufferViews,g=e[b.bufferView],h=d[g.buffer],i=g.byteOffset+b.byteOffset,j=b.count*f(b).componentsPerAttribute;return a.basePath+h.path+":"+i+":"+j}function h(a,b,c){return a.basePath+":"+b+":"+c}var i=function(){},j={},k=new a;i.getAnimationParameterValues=function(c,e){var h=g(c,e),i=j[h];if(!b(i)){var l,m=c._loadResources.buffers,n=c.gltf,o=n.bufferViews,p=o[e.bufferView],q=e.componentType,r=e.type,s=e.count,t=f(e).createArrayBufferView(m[p.buffer],p.byteOffset+e.byteOffset,s);if(q===WebGLRenderingContext.FLOAT&&"SCALAR"===r)i=t;else if(q===WebGLRenderingContext.FLOAT&&"VEC3"===r)for(i=new Array(s),l=0;s>l;++l)i[l]=a.fromArray(t,3*l);else if(q===WebGLRenderingContext.FLOAT&&"VEC4"===r)for(i=new Array(s),l=0;s>l;++l){var u=4*l;i[l]=d.fromAxisAngle(a.fromArray(t,u,k),t[u+3])}""!==c.basePath&&(j[h]=i)}return i};var l={},m=function(a){this._value=a};return m.prototype.evaluate=function(){return this._value},i.getAnimationSpline=function(a,d,f,g,i,j){var k=h(a,d,g),n=l[k];if(!b(n)){var o=j[i.input],p=a.gltf.accessors[f.parameters[i.output]],q=j[i.output];if(1===o.length&&1===q.length)n=new m(q[0]);else{var r=p.componentType,s=p.type;"LINEAR"===i.interpolation&&(r===WebGLRenderingContext.FLOAT&&"VEC3"===s?n=new c({times:o,points:q}):r===WebGLRenderingContext.FLOAT&&"VEC4"===s&&(n=new e({times:o,points:q})))}""!==a.basePath&&(l[k]=n)}return n},i}),c("Scene/ModelAnimationLoop",["../Core/freezeObject"],function(a){"use strict";var b={NONE:0,REPEAT:1,MIRRORED_REPEAT:2};return a(b)}),c("Scene/ModelAnimationState",["../Core/freezeObject"],function(a){"use strict";return a({STOPPED:0,ANIMATING:1})}),c("Scene/ModelAnimation",["../Core/defaultValue","../Core/defineProperties","../Core/Event","../Core/JulianDate","./ModelAnimationLoop","./ModelAnimationState"],function(a,b,c,d,e,f){"use strict";var g=function(b,g,h){this._name=b.name,this._startTime=d.clone(b.startTime),this._delay=a(b.delay,0),this._stopTime=b.stopTime,this.removeOnStop=a(b.removeOnStop,!1),this._speedup=a(b.speedup,1),this._reverse=a(b.reverse,!1),this._loop=a(b.loop,e.NONE),this.start=new c,this.update=new c,this.stop=new c,this._state=f.STOPPED,this._runtimeAnimation=h,this._computedStartTime=void 0,this._duration=void 0;var i=this;this._raiseStartEvent=function(){i.start.raiseEvent(g,i)},this._updateEventTime=0,this._raiseUpdateEvent=function(){i.update.raiseEvent(g,i,i._updateEventTime)},this._raiseStopEvent=function(){i.stop.raiseEvent(g,i)}};return b(g.prototype,{name:{get:function(){return this._name}},startTime:{get:function(){return this._startTime}},delay:{get:function(){return this._delay}},stopTime:{get:function(){return this._stopTime}},speedup:{get:function(){return this._speedup}},reverse:{get:function(){return this._reverse}},loop:{get:function(){return this._loop}}}),g}),c("Scene/ModelAnimationCollection",["../Core/clone","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/JulianDate","../Core/Math","./ModelAnimation","./ModelAnimationLoop","./ModelAnimationState"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a,b){for(var c=a.channelEvaluators,d=c.length,e=0;d>e;++e)c[e](b)}function m(a,b,c){return function(){a.animationRemoved.raiseEvent(b,c)}}var n=function(a){this.animationAdded=new f,this.animationRemoved=new f,this._model=a,this._scheduledAnimations=[],this._previousTime=void 0};d(n.prototype,{length:{get:function(){return this._scheduledAnimations.length}}}),n.prototype.add=function(a){a=b(a,b.EMPTY_OBJECT);var c=this._model,d=c._runtime.animations,e=d[a.name],f=new i(a,c,e);return this._scheduledAnimations.push(f),this.animationAdded.raiseEvent(c,f),f},n.prototype.addAll=function(c){c=b(c,b.EMPTY_OBJECT),c=a(c);var d=[],e=this._model.gltf.animations;for(var f in e)e.hasOwnProperty(f)&&(c.name=f,d.push(this.add(c)));return d},n.prototype.remove=function(a){if(c(a)){var b=this._scheduledAnimations,d=b.indexOf(a);if(-1!==d)return b.splice(d,1),this.animationRemoved.raiseEvent(this._model,a),!0}return!1},n.prototype.removeAll=function(){var a=this._model,b=this._scheduledAnimations,c=b.length;this._scheduledAnimations=[];for(var d=0;c>d;++d)this.animationRemoved.raiseEvent(a,b[d])},n.prototype.contains=function(a){return c(a)?-1!==this._scheduledAnimations.indexOf(a):!1},n.prototype.get=function(a){return this._scheduledAnimations[a]};var o=[];return n.prototype.update=function(a){if(g.equals(a.time,this._previousTime))return!1;this._previousTime=g.clone(a.time,this._previousTime);for(var d=!1,e=a.time,f=this._model,i=this._scheduledAnimations,n=i.length,p=0;n>p;++p){var q=i[p],r=q._runtimeAnimation;c(q._computedStartTime)||(q._computedStartTime=g.addSeconds(b(q.startTime,e),q.delay,new g)),c(q._duration)||(q._duration=r.stopTime*(1/q.speedup));var s=q._computedStartTime,t=q._duration,u=q.stopTime,v=0!==t?g.secondsDifference(e,s)/t:0,w=v>=0,x=w&&(1>=v||q.loop===j.REPEAT||q.loop===j.MIRRORED_REPEAT)&&(!c(u)||g.lessThanOrEquals(e,u));if(x){if(q._state===k.STOPPED&&(q._state=k.ANIMATING,q.start.numberOfListeners>0&&a.afterRender.push(q._raiseStartEvent)),q.loop===j.REPEAT)v-=Math.floor(v);else if(q.loop===j.MIRRORED_REPEAT){var y=Math.floor(v),z=v-y;v=1===y%2?1-z:z}q.reverse&&(v=1-v);var A=v*t*q.speedup;A=h.clamp(A,r.startTime,r.stopTime),l(r,A),q.update.numberOfListeners>0&&(q._updateEventTime=A,a.afterRender.push(q._raiseUpdateEvent)),d=!0}else w&&q._state===k.ANIMATING&&(q._state=k.STOPPED,q.stop.numberOfListeners>0&&a.afterRender.push(q._raiseStopEvent),q.removeOnStop&&o.push(q))}n=o.length;for(var B=0;n>B;++B){var C=o[B];i.splice(i.indexOf(C),1),a.afterRender.push(m(this,f,C))}return o.length=0,d},n}),c("Scene/ModelMaterial",["../Core/defined","../Core/defineProperties","../Core/DeveloperError"],function(a,b){"use strict"
;var c=function(a,b,c){this._name=b.name,this._id=c,this._uniformMap=a._rendererResources.uniformMaps[c]};return b(c.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}}}),c.prototype.setValue=function(a,b){var c=this._uniformMap.values[a];c.value=c.clone(b,c.value)},c.prototype.getValue=function(b){var c=this._uniformMap.values[b];return a(c)?c.value:void 0},c}),c("Scene/ModelMesh",["../Core/defineProperties"],function(a){"use strict";var b=function(a,b,c){for(var d=[],e=a.primitives,f=e.length,g=0;f>g;++g){var h=e[g];d[g]=b[h.material]}this._name=a.name,this._materials=d,this._id=c};return a(b.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},materials:{get:function(){return this._materials}}}),b}),c("Scene/ModelNode",["../Core/defaultValue","../Core/defineProperties","../Core/Matrix4"],function(a,b,c){"use strict";var d=function(a,b,d,e,f){this._model=a,this._runtimeNode=d,this._name=b.name,this._id=e,this.useMatrix=!1,this._matrix=c.clone(f)};return b(d.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},matrix:{get:function(){return this._matrix},set:function(a){this._matrix=c.clone(a,this._matrix),this.useMatrix=!0;var b=this._model;b._cesiumAnimationsDirty=!0,this._runtimeNode.dirtyNumber=b._maxDirtyNumber}}}),d.prototype.setMatrix=function(a){c.clone(a,this._matrix)},d}),c("Scene/Model",["../Core/BoundingSphere","../Core/Cartesian2","../Core/Cartesian3","../Core/Cartesian4","../Core/combine","../Core/clone","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Event","../Core/IndexDatatype","../Core/loadArrayBuffer","../Core/loadImage","../Core/loadText","../Core/Math","../Core/Matrix2","../Core/Matrix3","../Core/Matrix4","../Core/PrimitiveType","../Core/Quaternion","../Core/Queue","../Core/RuntimeError","../Renderer/BufferUsage","../Renderer/DrawCommand","../Renderer/ShaderSource","../Renderer/TextureMinificationFilter","../Renderer/TextureWrap","../ThirdParty/gltfDefaults","../ThirdParty/Uri","./getModelAccessor","./ModelAnimationCache","./ModelAnimationCollection","./ModelMaterial","./ModelMesh","./ModelNode","./Pass","./SceneMode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M){"use strict";function N(){this.buffersToCreate=new w,this.buffers={},this.pendingBufferLoads=0,this.programsToCreate=new w,this.shaders={},this.pendingShaderLoads=0,this.texturesToCreate=new w,this.pendingTextureLoads=0,this.createSamplers=!0,this.createSkins=!0,this.createRuntimeAnimations=!0,this.createVertexArrays=!0,this.createRenderStates=!0,this.createUniformMaps=!0,this.createRuntimeNodes=!0,this.skinnedNodesNames=[]}function O(a,b,c){return a._runtime[b][c]}function P(b){for(var d=b.nodes,e=b.meshes,f=b.accessors,i=b.scenes[b.scene].nodes,j=i.length,k=[],l=new c(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),m=new c(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),n=0;j>n;++n){var o=d[i[n]];for(o._transformToRoot=Z(o),k.push(o);k.length>0;){o=k.pop();var p=o._transformToRoot,q=g(o.meshes,h(o.instanceSkin)?o.instanceSkin.meshes:void 0);if(h(q))for(var r=q.length,s=0;r>s;++s)for(var u=e[q[s]].primitives,v=u.length,w=0;v>w;++w){var x=u[w].attributes.POSITION;if(h(x)){var y=f[x],z=c.fromArray(y.min,0,Ta),A=c.fromArray(y.max,0,Ua);h(l)&&h(m)&&(t.multiplyByPoint(p,z,z),t.multiplyByPoint(p,A,A),c.minimumByComponent(l,z,l),c.maximumByComponent(m,A,m))}}for(var B=o.children,C=B.length,D=0;C>D;++D){var E=d[B[D]];E._transformToRoot=Z(E),t.multiplyTransformation(p,E._transformToRoot,E._transformToRoot),k.push(E)}delete o._transformToRoot}}var F=a.fromCornerPoints(l,m);return a.transformWithoutScale(F,Qa,F)}function Q(a,b,c){return function(){a._loadError=new x("Failed to load external "+b+": "+c),a._state=Ra.FAILED}}function R(a,b){return function(c){var d=a._loadResources;d.buffers[b]=c,--d.pendingBufferLoads}}function S(a){var b=a.gltf.buffers;for(var c in b)if(b.hasOwnProperty(c)){++a._loadResources.pendingBufferLoads;var d=b[c],e=new E(d.uri),f=e.resolve(a._baseUri).toString();n(f).then(R(a,c)).otherwise(Q(a,"buffer",f))}}function T(a){var b=a.gltf.bufferViews;for(var c in b)b.hasOwnProperty(c)&&a._loadResources.buffersToCreate.enqueue(c)}function U(a,b){return function(c){var d=a._loadResources;d.shaders[b]=c,--d.pendingShaderLoads}}function V(a){var b=a.gltf.shaders;for(var c in b)if(b.hasOwnProperty(c)){++a._loadResources.pendingShaderLoads;var d=b[c],e=new E(d.uri),f=e.resolve(a._baseUri).toString();p(f).then(U(a,c)).otherwise(Q(a,"shader",f))}}function W(a){var b=a.gltf.programs;for(var c in b)b.hasOwnProperty(c)&&a._loadResources.programsToCreate.enqueue(c)}function X(a,b){return function(c){var d=a._loadResources;--d.pendingTextureLoads,d.texturesToCreate.enqueue({name:b,image:c})}}function Y(a){var b=a.gltf.images,c=a.gltf.textures;for(var d in c)if(c.hasOwnProperty(d)){++a._loadResources.pendingTextureLoads;var e=c[d],f=new E(b[e.source].uri),g=f.resolve(a._baseUri).toString();o(g).then(X(a,d)).otherwise(Q(a,"image",g))}}function Z(a){if(h(a.matrix))return t.fromArray(a.matrix);var b=c.fromArray(a.rotation,0,Va);return t.fromTranslationQuaternionRotationScale(c.fromArray(a.translation,0,Wa),v.fromAxisAngle(b,a.rotation[3],Xa),c.fromArray(a.scale,0,Ya))}function $(a){var b={},c={},d=[],e=a._loadResources.skinnedNodesNames,f=a.gltf.nodes;for(var g in f)if(f.hasOwnProperty(g)){var i=f[g],j={matrix:void 0,translation:void 0,rotation:void 0,scale:void 0,transformToRoot:new t,computedMatrix:new t,dirtyNumber:0,commands:[],inverseBindMatrices:void 0,bindShapeMatrix:void 0,joints:[],computedJointMatrices:[],jointName:i.jointName,children:[],parents:[],publicNode:void 0};j.publicNode=new K(a,i,j,g,Z(i)),b[g]=j,c[i.name]=j,h(i.instanceSkin)&&(e.push(g),d.push(j))}a._runtime.nodes=b,a._runtime.nodesByName=c,a._runtime.skinnedNodes=d}function _(a){var b={},c={},d=a.gltf.materials,e=a._rendererResources.uniformMaps;for(var f in d)if(d.hasOwnProperty(f)){e[f]={uniformMap:void 0,values:void 0,jointMatrixUniformName:void 0};var g=d[f],h=new I(a,g,f);b[g.name]=h,c[f]=h}a._runtime.materialsByName=b,a._runtime.materialsById=c}function aa(a){var b={},c=a._runtime.materialsById,d=a.gltf.meshes;for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];b[f.name]=new J(f,c,e)}a._runtime.meshesByName=b}function ba(a){S(a),T(a),V(a),W(a),Y(a),_(a),aa(a),$(a)}function ca(a,b){var c=a._loadResources;if(0===c.pendingBufferLoads){for(var d,e,f=a.gltf.bufferViews,g=c.buffers,i=a._rendererResources.buffers;c.buffersToCreate.length>0;){var j=c.buffersToCreate.dequeue();if(e=f[j],e.target===WebGLRenderingContext.ARRAY_BUFFER){d=new Uint8Array(g[e.buffer],e.byteOffset,e.byteLength);var k=b.createVertexBuffer(d,y.STATIC_DRAW);k.vertexArrayDestroyable=!1,i[j]=k}}var l=a.gltf.accessors;for(var m in l)if(l.hasOwnProperty(m)){var n=l[m];if(e=f[n.bufferView],e.target===WebGLRenderingContext.ELEMENT_ARRAY_BUFFER&&!h(i[n.bufferView])){d=new Uint8Array(g[e.buffer],e.byteOffset,e.byteLength);var o=b.createIndexBuffer(d,y.STATIC_DRAW,n.componentType);o.vertexArrayDestroyable=!1,i[n.bufferView]=o}}}}function da(a){for(var b={},c=a.length,d=0;c>d;++d)b[a[d]]=d;return b}function ea(a,b,c){var d=b.gltf.programs,e=b._loadResources.shaders,f=d[a],g=da(f.attributes),h=e[f.vertexShader],i=e[f.fragmentShader];if(b._rendererResources.programs[a]=c.createShaderProgram(h,i,g),b.allowPicking){var j=new A({sources:[i],pickColorQualifier:"uniform"});b._rendererResources.pickPrograms[a]=c.createShaderProgram(h,j,g)}}function fa(a,b){var c,d=a._loadResources;if(0===d.pendingShaderLoads)if(a.asynchronous)d.programsToCreate.length>0&&(c=d.programsToCreate.dequeue(),ea(c,a,b));else for(;d.programsToCreate.length>0;)c=d.programsToCreate.dequeue(),ea(c,a,b)}function ga(a,b){var c=a._loadResources;if(c.createSamplers){c.createSamplers=!1;var d=a._rendererResources.samplers,e=a.gltf.samplers;for(var f in e)if(e.hasOwnProperty(f)){var g=e[f];d[f]=b.createSampler({wrapS:g.wrapS,wrapT:g.wrapT,minificationFilter:g.minFilter,magnificationFilter:g.magFilter})}}}function ha(a,b,c){var d=b.gltf.textures,e=d[a.name],f=b._rendererResources.samplers,g=f[e.sampler],h=g.minificationFilter===B.NEAREST_MIPMAP_NEAREST||g.minificationFilter===B.NEAREST_MIPMAP_LINEAR||g.minificationFilter===B.LINEAR_MIPMAP_NEAREST||g.minificationFilter===B.LINEAR_MIPMAP_LINEAR,i=h||g.wrapS===C.REPEAT||g.wrapS===C.MIRRORED_REPEAT||g.wrapT===C.REPEAT||g.wrapT===C.MIRRORED_REPEAT,j=a.image,k=!q.isPowerOfTwo(j.width)||!q.isPowerOfTwo(j.height);if(i&&k){var l=document.createElement("canvas");l.width=q.nextPowerOfTwo(j.width),l.height=q.nextPowerOfTwo(j.height);var m=l.getContext("2d");m.drawImage(j,0,0,j.width,j.height,0,0,l.width,l.height),j=l}var n;e.target===WebGLRenderingContext.TEXTURE_2D&&(n=c.createTexture2D({source:j,pixelFormat:e.internalFormat,pixelDatatype:e.type,flipY:!1})),h&&n.generateMipmap(),n.sampler=g,b._rendererResources.textures[a.name]=n}function ia(a,b){var c,d=a._loadResources;if(a.asynchronous)d.texturesToCreate.length>0&&(c=d.texturesToCreate.dequeue(),ha(c,a,b));else for(;d.texturesToCreate.length>0;)c=d.texturesToCreate.dequeue(),ha(c,a,b)}function ja(a,b){var c=a.gltf;c.programs;var d=c.techniques,e=c.materials,f={},g=d[e[b.material].instanceTechnique.technique],h=g.parameters,i=g.passes[g.pass],j=i.instanceProgram,k=j.attributes,l=a._rendererResources.programs[j.program].vertexAttributes;for(var m in l)if(l.hasOwnProperty(m)){var n=h[k[m]];f[n.semantic]=l[m].index}return f}function ka(a,b){for(var c=a.length,d=0;c>d;++d)for(var e=[a[d]];e.length>0;){var f=e.pop();if(f.jointName===b)return f;for(var g=f.children,h=g.length,i=0;h>i;++i)e.push(g[i])}return void 0}function la(a,b){for(var c=a.gltf,d=c.skins,e=c.nodes,f=a._runtime.nodes,g=a._loadResources.skinnedNodesNames,h=g.length,i=0;h>i;++i){var j=g[i],k=f[j],l=e[j].instanceSkin,m=b[l.skin];k.inverseBindMatrices=m.inverseBindMatrices,k.bindShapeMatrix=m.bindShapeMatrix;for(var n=[],o=l.skeletons,p=o.length,q=0;p>q;++q)n.push(f[o[q]]);for(var r=d[l.skin].jointNames,s=r.length,t=0;s>t;++t){var u=r[t];k.joints.push(ka(n,u))}}}function ma(a){var b=a._loadResources;if(b.finishedBuffersCreation()&&b.createSkins){b.createSkins=!1;var c=a.gltf,d=b.buffers,e=c.accessors,f=c.bufferViews,g=c.skins,h={};for(var i in g)if(g.hasOwnProperty(i)){var j=g[i],k=e[j.inverseBindMatrices],l=f[k.bufferView],m=k.componentType,n=k.type,o=k.count,p=F(k).createArrayBufferView(d[l.buffer],l.byteOffset+k.byteOffset,o),q=new Array(o);if(m===WebGLRenderingContext.FLOAT&&"MAT4"===n)for(var r=0;o>r;++r)q[r]=t.fromArray(p,16*r);var s;t.equals(j.bindShapeMatrix,t.IDENTITY)||(s=t.clone(j.bindShapeMatrix)),h[i]={inverseBindMatrices:q,bindShapeMatrix:s}}la(a,h)}}function na(a,b,c,d){return function(e){b[c]=d.evaluate(e,b[c]),b.dirtyNumber=a._maxDirtyNumber}}function oa(a){var b=a._loadResources;if(b.finishedPendingLoads()&&b.createRuntimeAnimations){b.createRuntimeAnimations=!1,a._runtime.animations={};var c,d=a._runtime.nodes,e=a.gltf.animations,f=a.gltf.accessors;for(var g in e)if(e.hasOwnProperty(g)){var h=e[g],i=h.channels,j=h.parameters,k=h.samplers,l={};for(c in j)j.hasOwnProperty(c)&&(l[c]=G.getAnimationParameterValues(a,f[j[c]]));for(var m=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=i.length,p=new Array(o),q=0;o>q;++q){var r=i[q],s=r.target,t=k[r.sampler],u=l[t.input];m=Math.min(m,u[0]),n=Math.max(n,u[u.length-1]);var v=G.getAnimationSpline(a,g,h,r.sampler,t,l);p[q]=na(a,d[s.id],s.path,v)}a._runtime.animations[g]={startTime:m,stopTime:n,channelEvaluators:p}}}}function pa(a,b){var c=a._loadResources;if(c.finishedBuffersCreation()&&c.finishedProgramCreation()&&c.createVertexArrays){c.createVertexArrays=!1;var d=a._rendererResources.buffers,e=a._rendererResources.vertexArrays,f=a.gltf,g=f.accessors,i=f.meshes;for(var j in i)if(i.hasOwnProperty(j))for(var k=i[j].primitives,l=k.length,m=0;l>m;++m){var n=k[m],o=ja(a,n),p=[],q=n.attributes;for(var r in q)if(q.hasOwnProperty(r)){var s=o[r];if(h(s)){var t=g[q[r]];p.push({index:s,vertexBuffer:d[t.bufferView],componentsPerAttribute:F(t).componentsPerAttribute,componentDatatype:t.componentType,normalize:!1,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride})}}var u=g[n.indices],v=d[u.bufferView];e[j+".primitive."+m]=b.createVertexArray(p,v)}}}function qa(a){var b={};b[WebGLRenderingContext.BLEND]=!1,b[WebGLRenderingContext.CULL_FACE]=!1,b[WebGLRenderingContext.DEPTH_TEST]=!1,b[WebGLRenderingContext.POLYGON_OFFSET_FILL]=!1,b[WebGLRenderingContext.SCISSOR_TEST]=!1;var c,d=a.enable,e=d.length;for(c=0;e>c;++c)b[d[c]]=!0;return b}function ra(a,b){var c=a._loadResources;if(c.createRenderStates){c.createRenderStates=!1;var d=a._rendererResources.renderStates,e=a.gltf.techniques;for(var f in e)if(e.hasOwnProperty(f)){var i=e[f],j=i.passes[i.pass],k=j.states,l=qa(k),m=g(k.functions,g.EMPTY_OBJECT),n=g(m.blendColor,[0,0,0,0]),o=g(m.blendEquationSeparate,[WebGLRenderingContext.FUNC_ADD,WebGLRenderingContext.FUNC_ADD]),p=g(m.blendFuncSeparate,[WebGLRenderingContext.ONE,WebGLRenderingContext.ONE,WebGLRenderingContext.ZERO,WebGLRenderingContext.ZERO]),q=g(m.colorMask,[!0,!0,!0,!0]),r=g(m.depthRange,[0,1]),s=g(m.polygonOffset,[0,0]),t=g(m.scissor,[0,0,0,0]);d[f]=b.createRenderState({frontFace:h(m.frontFace)?m.frontFace[0]:WebGLRenderingContext.CCW,cull:{enabled:l[WebGLRenderingContext.CULL_FACE],face:h(m.cullFace)?m.cullFace[0]:WebGLRenderingContext.BACK},lineWidth:h(m.lineWidth)?m.lineWidth[0]:1,polygonOffset:{enabled:l[WebGLRenderingContext.POLYGON_OFFSET_FILL],factor:s[0],units:s[1]},scissorTest:{enabled:l[WebGLRenderingContext.SCISSOR_TEST],rectangle:{x:t[0],y:t[1],width:t[2],height:t[3]}},depthRange:{near:r[0],far:r[1]},depthTest:{enabled:l[WebGLRenderingContext.DEPTH_TEST],func:h(m.depthFunc)?m.depthFunc[0]:WebGLRenderingContext.LESS},colorMask:{red:q[0],green:q[1],blue:q[2],alpha:q[3]},depthMask:h(m.depthMask)?m.depthMask[0]:!0,blending:{enabled:l[WebGLRenderingContext.BLEND],color:{red:n[0],green:n[1],blue:n[2],alpha:n[3]},equationRgb:o[0],equationAlpha:o[1],functionSourceRgb:p[0],functionSourceAlpha:p[1],functionDestinationRgb:p[2],functionDestinationAlpha:p[3]}})}}}function sa(a){var b={value:a,clone:function(a){return a},func:function(){return b.value}};return b}function ta(a){var c={value:b.fromArray(a),clone:b.clone,func:function(){return c.value}};return c}function ua(a){var b={value:c.fromArray(a),clone:c.clone,func:function(){return b.value}};return b}function va(a){var b={value:d.fromArray(a),clone:d.clone,func:function(){return b.value}};return b}function wa(a){var b={value:r.fromColumnMajorArray(a),clone:r.clone,func:function(){return b.value}};return b}function xa(a){var b={value:s.fromColumnMajorArray(a),clone:s.clone,func:function(){return b.value}};return b}function ya(a){var b={value:t.fromColumnMajorArray(a),clone:t.clone,func:function(){return b.value}};return b}function za(a,b){var c={value:b._rendererResources.textures[a],clone:function(a){return a},func:function(){return c.value}};return c}function Aa(a,b){var c=b._runtime.nodes[a];return function(){return c.computedMatrix}}function Ba(a,b){var c=a._loadResources;if(c.finishedTextureCreation()&&c.finishedProgramCreation()&&c.createUniformMaps){c.createUniformMaps=!1;var d=a.gltf,e=d.materials,f=d.techniques;d.programs;var g=a._rendererResources.uniformMaps;for(var i in e)if(e.hasOwnProperty(i)){var j,k=e[i],l=k.instanceTechnique,m=l.values,n=f[l.technique],o=n.parameters,p=n.passes[n.pass],q=p.instanceProgram,r=q.uniforms,s={},t={};for(var u in r)if(r.hasOwnProperty(u)){var v=r[u],w=o[v];if(h(m[v])){var x=$a[w.type](m[v],a);s[u]=x.func,t[v]=x}else if(h(w.semantic))"JOINTMATRIX"!==w.semantic?s[u]=Za[w.semantic](b.uniformState):j=u;else if(h(w.source))s[u]=Aa(w.source,a);else if(h(w.value)){var y=$a[w.type](w.value,a);s[u]=y.func,t[v]=y}}var z=g[i];z.uniformMap=s,z.values=t,z.jointMatrixUniformName=j}}}function Ca(a){return function(){return a}}function Da(a){return function(){return a.computedJointMatrices}}function Ea(b,d,f,i){for(var j=b._renderCommands,k=b._pickCommands,l=b._pickIds,n=b.allowPicking,o=b._runtime.meshesByName,p=b.debugShowBoundingVolume,q=b._rendererResources,r=q.vertexArrays,s=q.programs,u=q.pickPrograms,v=q.renderStates,w=q.uniformMaps,x=b.gltf,y=x.accessors,A=x.meshes,B=x.techniques,C=x.materials,D=h(d.meshes)?d.meshes:d.instanceSkin.meshes,E=D.length,F=0;E>F;++F)for(var G=D[F],H=A[G],I=H.primitives,J=I.length,K=0;J>K;++K){var M,N=I[K],O=y[N.indices],P=C[N.material].instanceTechnique,Q=B[P.technique],R=Q.passes[Q.pass],S=R.instanceProgram,T=N.attributes.POSITION;if(h(T)){var U=y[T];M=a.fromCornerPoints(c.fromArray(U.min),c.fromArray(U.max))}var V=r[G+".primitive."+K],W=O.count,X=O.byteOffset/m.getSizeInBytes(O.componentType),Y=w[N.material],Z=Y.uniformMap;if(h(Y.jointMatrixUniformName)){var $={};$[Y.jointMatrixUniformName]=Da(f),Z=e(Z,$)}var _=v[P.technique],aa=_.blending.enabled,ba={primitive:g(b.pickPrimitive,b),id:b.id,node:f.publicNode,mesh:o[H.name]},ca=new z({boundingVolume:new a,modelMatrix:new t,primitiveType:N.primitive,vertexArray:V,count:W,offset:X,shaderProgram:s[S.program],uniformMap:Z,renderState:_,owner:ba,debugShowBoundingVolume:p,pass:aa?L.TRANSLUCENT:L.OPAQUE});j.push(ca);var da;if(n){var ea=i.createPickId(ba);l.push(ea);var fa=e(Z,{czm_pickColor:Ca(ea.color)});da=new z({boundingVolume:new a,modelMatrix:new t,primitiveType:N.primitive,vertexArray:V,count:W,offset:X,shaderProgram:u[S.program],uniformMap:fa,renderState:_,owner:ba,pass:aa?L.TRANSLUCENT:L.OPAQUE}),k.push(da)}f.commands.push({command:ca,pickCommand:da,boundingSphere:M})}}function Fa(a,b){var d=a._loadResources;if(d.finishedPendingLoads()&&d.finishedResourceCreation()&&d.createRuntimeNodes){d.createRuntimeNodes=!1;for(var e=[],f=a._runtime.nodes,g=a.gltf,i=g.nodes,j=g.scenes[g.scene],k=j.nodes,l=k.length,m=[],n=new c,o=0;l>o;++o)for(m.push({parentRuntimeNode:void 0,gltfNode:i[k[o]],id:k[o]});m.length>0;){var p=m.pop(),q=p.parentRuntimeNode,r=p.gltfNode,s=f[p.id];0===s.parents.length&&(h(r.matrix)?s.matrix=t.fromColumnMajorArray(r.matrix):(n=c.fromArray(r.rotation,0,n),s.translation=c.fromArray(r.translation),s.rotation=v.fromAxisAngle(n,r.rotation[3]),s.scale=c.fromArray(r.scale))),h(q)?(q.children.push(s),s.parents.push(q)):e.push(s),(h(r.meshes)||h(r.instanceSkin))&&Ea(a,r,s,b);for(var u=r.children,w=u.length,x=0;w>x;++x)m.push({parentRuntimeNode:s,gltfNode:i[u[x]],id:u[x]})}a._runtime.rootNodes=e,a._runtime.nodes=f}}function Ga(a,b){ca(a,b),fa(a,b),ga(a,b),ia(a,b),ma(a),oa(a),pa(a,b),ra(a,b),Ba(a,b),Fa(a,b)}function Ha(a,b){var c=a.publicNode,d=c.matrix;c.useMatrix&&h(d)?t.clone(d,b):h(a.matrix)?t.clone(a.matrix,b):(t.fromTranslationQuaternionRotationScale(a.translation,a.rotation,a.scale,b),c.setMatrix(b))}function Ia(b,c,d){for(var e=b._maxDirtyNumber,f=b.allowPicking,g=b._runtime.rootNodes,h=g.length,i=_a,j=b._computedModelMatrix,k=0;h>k;++k){var l=g[k];for(Ha(l,l.transformToRoot),i.push(l);i.length>0;){l=i.pop();var m=l.transformToRoot,n=l.commands;if(l.dirtyNumber===e||c||d){var o=n.length;if(o>0)for(var p=0;o>p;++p){var q=n[p],r=q.command;if(t.multiplyTransformation(j,m,r.modelMatrix),a.transform(q.boundingSphere,r.modelMatrix,r.boundingVolume),f){var s=q.pickCommand;t.clone(r.modelMatrix,s.modelMatrix),a.clone(r.boundingVolume,s.boundingVolume)}}else l.computedMatrix=t.multiplyTransformation(j,m,l.computedMatrix)}for(var u=l.children,v=u.length,w=0;v>w;++w){var x=u[w];x.dirtyNumber=Math.max(x.dirtyNumber,l.dirtyNumber),(x.dirtyNumber===e||d)&&(Ha(x,x.transformToRoot),t.multiplyTransformation(m,x.transformToRoot,x.transformToRoot)),i.push(x)}}}++b._maxDirtyNumber}function Ja(a){for(var b=a._runtime.skinnedNodes,c=b.length,d=0;c>d;++d){var e=b[d];ab=t.inverseTransformation(e.transformToRoot,ab);for(var f=e.computedJointMatrices,g=e.joints,i=e.bindShapeMatrix,j=e.inverseBindMatrices,k=j.length,l=0;k>l;++l)h(f[l])||(f[l]=new t),f[l]=t.multiplyTransformation(ab,g[l].transformToRoot,f[l]),f[l]=t.multiplyTransformation(f[l],j[l],f[l]),h(i)&&(f[l]=t.multiplyTransformation(f[l],i,f[l]))}}function Ka(a){var b=a.id;if(a._id!==b){a._id=b;for(var c=a._pickIds,d=c.length,e=0;d>e;++e)c[e].object.id=b}}function La(a){if(a._debugWireframe!==a.debugWireframe){a._debugWireframe=a.debugWireframe;for(var b=a.debugWireframe?u.LINES:u.TRIANGLES,c=a._renderCommands,d=c.length,e=0;d>e;++e)c[e].primitiveType=b}}function Ma(a,b,d,e){var f=e.camera,g=f.frustum,h=c.subtract(f.positionWC,a,cb),i=c.multiplyByScalar(f.directionWC,c.dot(h,f.directionWC),db),j=Math.max(g.near,c.magnitude(i)-b);bb.x=d.drawingBufferWidth,bb.y=d.drawingBufferHeight;var k=g.getPixelSize(bb,j),l=Math.max(k.x,k.y);return l}function Na(a,b,c){var d=a.scale;if(0!==a.minimumPixelSize){var e=Math.max(b.drawingBufferWidth,b.drawingBufferHeight),f=a.modelMatrix;eb.x=f[12],eb.y=f[13],eb.z=f[14];var g=a.boundingSphere.radius,h=Ma(eb,g,b,c),i=1/h,j=Math.min(i*2*g,e);j<a.minimumPixelSize&&(d=a.minimumPixelSize*h/(2*a._initialRadius))}return d}function Oa(a){for(var b in a)a.hasOwnProperty(b)&&a[b].destroy()}function Pa(a){for(var b in a)a.hasOwnProperty(b)&&a[b].destroy()}var Qa=t.fromRotationTranslation(s.fromRotationX(q.PI_OVER_TWO)),Ra={NEEDS_LOAD:0,LOADING:1,LOADED:2,FAILED:3};N.prototype.finishedPendingLoads=function(){return 0===this.pendingBufferLoads&&0===this.pendingShaderLoads&&0===this.pendingTextureLoads},N.prototype.finishedResourceCreation=function(){return 0===this.buffersToCreate.length&&0===this.programsToCreate.length&&0===this.texturesToCreate.length},N.prototype.finishedBuffersCreation=function(){return 0===this.pendingBufferLoads&&0===this.buffersToCreate.length},N.prototype.finishedProgramCreation=function(){return 0===this.pendingShaderLoads&&0===this.programsToCreate.length},N.prototype.finishedTextureCreation=function(){return 0===this.pendingTextureLoads&&0===this.texturesToCreate.length};var Sa=function(a){a=g(a,g.EMPTY_OBJECT),this._gltf=D(a.gltf),this._basePath=g(a.basePath,"");var b=new E(document.location.href),c=new E(this._basePath);this._baseUri=c.resolve(b),this.show=g(a.show,!0),this.modelMatrix=t.clone(g(a.modelMatrix,t.IDENTITY)),this._modelMatrix=t.clone(this.modelMatrix),this.scale=g(a.scale,1),this._scale=this.scale,this.minimumPixelSize=g(a.minimumPixelSize,0),this._minimumPixelSize=this.minimumPixelSize,this.id=a.id,this._id=a.id,this.pickPrimitive=a.pickPrimitive,this._allowPicking=g(a.allowPicking,!0),this.readyToRender=new l,this._ready=!1,this.activeAnimations=new H(this),this._asynchronous=g(a.asynchronous,!0),this.debugShowBoundingVolume=g(a.debugShowBoundingVolume,!1),this._debugShowBoudingVolume=this.debugShowBoundingVolume,this.debugWireframe=g(a.debugWireframe,!1),this._debugWireframe=!1,this._computedModelMatrix=new t,this._initialRadius=void 0,this._boundingSphere=void 0,this._state=Ra.NEEDS_LOAD,this._loadError=void 0,this._loadResources=void 0,this._cesiumAnimationsDirty=!1,this._maxDirtyNumber=0,this._runtime={animations:void 0,rootNodes:void 0,nodes:void 0,nodesByName:void 0,skinnedNodes:void 0,meshesByName:void 0,materialsByName:void 0,materialsById:void 0},this._rendererResources={buffers:{},vertexArrays:{},programs:{},pickPrograms:{},textures:{},samplers:{},renderStates:{},uniformMaps:{}},this._renderCommands=[],this._pickCommands=[],this._pickIds=[]};i(Sa.prototype,{gltf:{get:function(){return this._gltf}},basePath:{get:function(){return this._basePath}},boundingSphere:{get:function(){return this._boundingSphere.radius=this.scale*t.getMaximumScale(this.modelMatrix)*this._initialRadius,this._boundingSphere}},ready:{get:function(){return this._ready}},asynchronous:{get:function(){return this._asynchronous}},allowPicking:{get:function(){return this._allowPicking}}}),Sa.fromGltf=function(a){var b=a.url,c="",d=b.lastIndexOf("/");-1!==d&&(c=b.substring(0,d+1)),a=f(a),a.basePath=c;var e=new Sa(a);return p(b,a.headers).then(function(a){e._gltf=D(JSON.parse(a))}).otherwise(Q(e,"gltf",b)),e},Sa.prototype.getNode=function(a){var b=O(this,"nodesByName",a);return h(b)?b.publicNode:void 0},Sa.prototype.getMesh=function(a){return O(this,"meshesByName",a)},Sa.prototype.getMaterial=function(a){return O(this,"materialsByName",a)};var Ta=new c,Ua=new c,Va=new c,Wa=new c,Xa=new v,Ya=new c,Za={MODEL:function(a){return function(){return a.model}},VIEW:function(a){return function(){return a.view}},PROJECTION:function(a){return function(){return a.projection}},MODELVIEW:function(a){return function(){return a.modelView}},MODELVIEWPROJECTION:function(a){return function(){return a.modelViewProjection}},MODELINVERSE:function(a){return function(){return a.inverseModel}},VIEWINVERSE:function(a){return function(){return a.inverseView}},PROJECTIONINVERSE:function(a){return function(){return a.inverseProjection}},MODELVIEWINVERSE:function(a){return function(){return a.inverseModelView}},MODELVIEWPROJECTIONINVERSE:function(a){return function(){return a.inverseModelViewProjection}},MODELINVERSETRANSPOSE:function(a){return function(){return a.inverseTranposeModel}},MODELVIEWINVERSETRANSPOSE:function(a){return function(){return a.normal}},VIEWPORT:function(a){return function(){return a.viewportCartesian4}}},$a={};"undefined"!=typeof WebGLRenderingContext&&($a[WebGLRenderingContext.FLOAT]=sa,$a[WebGLRenderingContext.FLOAT_VEC2]=ta,$a[WebGLRenderingContext.FLOAT_VEC3]=ua,$a[WebGLRenderingContext.FLOAT_VEC4]=va,$a[WebGLRenderingContext.INT]=sa,$a[WebGLRenderingContext.INT_VEC2]=ta,$a[WebGLRenderingContext.INT_VEC3]=ua,$a[WebGLRenderingContext.INT_VEC4]=va,$a[WebGLRenderingContext.BOOL]=sa,$a[WebGLRenderingContext.BOOL_VEC2]=ta,$a[WebGLRenderingContext.BOOL_VEC3]=ua,$a[WebGLRenderingContext.BOOL_VEC4]=va,$a[WebGLRenderingContext.FLOAT_MAT2]=wa,$a[WebGLRenderingContext.FLOAT_MAT3]=xa,$a[WebGLRenderingContext.FLOAT_MAT4]=ya,$a[WebGLRenderingContext.SAMPLER_2D]=za);var _a=[],ab=new t,bb=new b,cb=new c,db=new c,eb=new c;return Sa.prototype.update=function(a,b,c){if(b.mode===M.SCENE3D){this._state===Ra.NEEDS_LOAD&&h(this.gltf)&&(this._state=Ra.LOADING,this._boundingSphere=P(this.gltf),this._initialRadius=this._boundingSphere.radius,this._loadResources=new N,ba(this));var d=!1;if(this._state===Ra.FAILED)throw this._loadError;if(this._state===Ra.LOADING){Ga(this,a);var e=this._loadResources;e.finishedPendingLoads()&&e.finishedResourceCreation()&&(this._state=Ra.LOADED,this._loadResources=void 0,d=!0)}var f=this.show&&0!==this.scale;if(f&&this._state===Ra.LOADED||d){var g=this.activeAnimations.update(b)||this._cesiumAnimationsDirty;this._cesiumAnimationsDirty=!1;var i=!t.equals(this._modelMatrix,this.modelMatrix)||this._scale!==this.scale||this._minimumPixelSize!==this.minimumPixelSize||0!==this.minimumPixelSize;if(i||d){t.clone(this.modelMatrix,this._modelMatrix),this._scale=this.scale,this._minimumPixelSize=this.minimumPixelSize;var j=Na(this,a,b),k=this._computedModelMatrix;t.multiplyByUniformScale(this.modelMatrix,j,k),t.multiplyTransformation(k,Qa,k)}(g||i||d)&&(Ia(this,i,d),(g||d)&&Ja(this)),Ka(this,a),La(this)}if(d){var l=this;return b.afterRender.push(function(){l._ready=!0,l.readyToRender.raiseEvent(l)}),void 0}if(f){var m,n,o,p=b.passes;if(p.render){for(o=this._renderCommands,n=o.length,m=0;n>m;++m)c.push(o[m]);if(this.debugShowBoundingVolume!==this._debugShowBoundingVolume)for(this._debugShowBoundingVolume=this.debugShowBoundingVolume,m=0;m<o.length;m++)o[m].debugShowBoundingVolume=this.debugShowBoundingVolume}if(p.pick)for(o=this._pickCommands,n=o.length,m=0;n>m;++m)c.push(o[m])}}},Sa.prototype.isDestroyed=function(){return!1},Sa.prototype.destroy=function(){var a=this._rendererResources;Oa(a.buffers),Oa(a.vertexArrays),Pa(a.programs),Pa(a.pickPrograms),Oa(a.textures),a=void 0,this._rendererResources=void 0;for(var b=this._pickIds,c=b.length,d=0;c>d;++d)b[d].destroy();return j(this)},Sa}),c("DataSources/ModelVisualizer",["../Core/AssociativeArray","../Core/Cartesian3","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Core/Matrix3","../Core/Matrix4","../Core/Quaternion","../Core/Transforms","../Scene/Model","../Scene/ModelAnimationLoop","./Property"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,b,d,e){var f=d[b.id];if(c(f)){var g=f.modelPrimitive;g.readyToRender.removeEventListener(n,a),e.remove(g),g.isDestroyed()||g.destroy(),delete d[b.id]}}function n(a){a.activeAnimations.addAll({loop:k.REPEAT})}var o=1,p=0,q=new f,r=new b,s=new h,t=function(b,c){c.collectionChanged.addEventListener(t.prototype._onCollectionChanged,this),this._scene=b,this._primitives=b.primitives,this._entityCollection=c,this._modelHash={},this._entitiesToVisualize=new a,this._onCollectionChanged(c,c.entities,[],[])};return t.prototype.update=function(a){this._scene.context;for(var d=this._entitiesToVisualize.values,e=this._modelHash,k=this._primitives,m=this._scene,t=0,u=d.length;u>t;t++){var v,w=d[t],x=w._model,y=e[w.id],z=w.isAvailable(a)&&l.getValueOrDefault(x._show,a,!0);if(z&&(r=l.getValueOrUndefined(w._position,a,r),v=l.getValueOrUndefined(x._uri,a),z=c(r)&&c(v)),z){var A=c(y)?y.modelPrimitive:void 0;c(A)&&v===y.uri||(c(A)&&(k.remove(A),A.isDestroyed()||A.destroy(),delete e[w.id]),A=j.fromGltf({url:v}),A.readyToRender.addEventListener(n,this),A.id=w,k.add(A),y={modelPrimitive:A,uri:v,position:void 0,orientation:void 0},e[w.id]=y),A.show=!0,A.scale=l.getValueOrDefault(x._scale,a,o),A.minimumPixelSize=l.getValueOrDefault(x._minimumPixelSize,a,p),s=l.getValueOrUndefined(w._orientation,a,s),b.equals(r,y.position)&&h.equals(s,y.orientation)||(c(s)?g.fromRotationTranslation(f.fromQuaternion(s,q),r,A.modelMatrix):i.eastNorthUpToFixedFrame(r,m.globe.ellipsoid,A.modelMatrix),y.position=b.clone(r,y.position),y.orientation=h.clone(s,y.orientation))}else c(y)&&(y.modelPrimitive.show=!1)}return!0},t.prototype.isDestroyed=function(){return!1},t.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(t.prototype._onCollectionChanged,this);for(var a=this._entitiesToVisualize.values,b=this._modelHash,c=this._primitives,e=a.length-1;e>-1;e--)m(this,a[e],b,c);return d(this)},t.prototype._onCollectionChanged=function(a,b,d,e){var f,g,h=this._entitiesToVisualize,i=this._modelHash,j=this._primitives;for(f=b.length-1;f>-1;f--)g=b[f],c(g._model)&&c(g._position)&&h.set(g.id,g);for(f=e.length-1;f>-1;f--)g=e[f],c(g._model)&&c(g._position)?h.set(g.id,g):(m(this,g,i,j),h.remove(g.id));for(f=d.length-1;f>-1;f--)g=d[f],m(this,g,i,j),h.remove(g.id)},t}),c("Shaders/PolylineCommon",[],function(){"use strict"
;return"void clipLineSegmentToNearPlane(\nvec3 p0,\nvec3 p1,\nout vec4 positionWC,\nout bool clipped,\nout bool culledByNearPlane)\n{\nculledByNearPlane = false;\nclipped = false;\nvec3 p1ToP0 = p1 - p0;\nfloat magnitude = length(p1ToP0);\nvec3 direction = normalize(p1ToP0);\nfloat endPoint0Distance =  -(czm_currentFrustum.x + p0.z);\nfloat denominator = -direction.z;\nif (endPoint0Distance < 0.0 && abs(denominator) < czm_epsilon7)\n{\nculledByNearPlane = true;\n}\nelse if (endPoint0Distance < 0.0 && abs(denominator) > czm_epsilon7)\n{\nfloat t = (czm_currentFrustum.x + p0.z) / denominator;\nif (t < 0.0 || t > magnitude)\n{\nculledByNearPlane = true;\n}\nelse\n{\np0 = p0 + t * direction;\nclipped = true;\n}\n}\npositionWC = czm_eyeToWindowCoordinates(vec4(p0, 1.0));\n}\nvec4 getPolylineWindowCoordinates(vec4 position, vec4 previous, vec4 next, float expandDirection, float width, bool usePrevious) {\nvec4 endPointWC, p0, p1;\nbool culledByNearPlane, clipped;\nvec4 positionEC = czm_modelViewRelativeToEye * position;\nvec4 prevEC = czm_modelViewRelativeToEye * previous;\nvec4 nextEC = czm_modelViewRelativeToEye * next;\nclipLineSegmentToNearPlane(prevEC.xyz, positionEC.xyz, p0, clipped, culledByNearPlane);\nclipLineSegmentToNearPlane(nextEC.xyz, positionEC.xyz, p1, clipped, culledByNearPlane);\nclipLineSegmentToNearPlane(positionEC.xyz, usePrevious ? prevEC.xyz : nextEC.xyz, endPointWC, clipped, culledByNearPlane);\nif (culledByNearPlane)\n{\nreturn vec4(0.0, 0.0, 0.0, 1.0);\n}\nvec2 prevWC = normalize(p0.xy - endPointWC.xy);\nvec2 nextWC = normalize(p1.xy - endPointWC.xy);\nfloat expandWidth = width * 0.5;\nvec2 direction;\nif (czm_equalsEpsilon(normalize(previous.xyz - position.xyz), vec3(0.0), czm_epsilon1) || czm_equalsEpsilon(prevWC, -nextWC, czm_epsilon1))\n{\ndirection = vec2(-nextWC.y, nextWC.x);\n}\nelse if (czm_equalsEpsilon(normalize(next.xyz - position.xyz), vec3(0.0), czm_epsilon1) || clipped)\n{\ndirection = vec2(prevWC.y, -prevWC.x);\n}\nelse\n{\nvec2 normal = vec2(-nextWC.y, nextWC.x);\ndirection = normalize((nextWC + prevWC) * 0.5);\nif (dot(direction, normal) < 0.0)\n{\ndirection = -direction;\n}\nfloat sinAngle = abs(direction.x * nextWC.y - direction.y * nextWC.x);\nexpandWidth = clamp(expandWidth / sinAngle, 0.0, width * 2.0);\n}\nvec2 offset = direction * expandDirection * expandWidth * czm_resolutionScale;\nreturn vec4(endPointWC.xy + offset, -endPointWC.z, 1.0);\n}\n"}),c("Shaders/PolylineFS",[],function(){"use strict";return"varying vec2 v_st;\nvoid main()\n{\nczm_materialInput materialInput;\nmaterialInput.s = v_st.s;\nmaterialInput.st = v_st;\nmaterialInput.str = vec3(v_st, 0.0);\nczm_material material = czm_getMaterial(materialInput);\ngl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n}\n"}),c("Shaders/PolylineVS",[],function(){"use strict";return"attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 position2DHigh;\nattribute vec3 position2DLow;\nattribute vec3 prevPosition3DHigh;\nattribute vec3 prevPosition3DLow;\nattribute vec3 prevPosition2DHigh;\nattribute vec3 prevPosition2DLow;\nattribute vec3 nextPosition3DHigh;\nattribute vec3 nextPosition3DLow;\nattribute vec3 nextPosition2DHigh;\nattribute vec3 nextPosition2DLow;\nattribute vec4 texCoordExpandWidthAndShow;\nattribute vec4 pickColor;\nvarying vec2  v_st;\nvarying float v_width;\nvarying vec4  czm_pickColor;\nvoid main()\n{\nfloat texCoord = texCoordExpandWidthAndShow.x;\nfloat expandDir = texCoordExpandWidthAndShow.y;\nfloat width = abs(texCoordExpandWidthAndShow.z) + 0.5;\nbool usePrev = texCoordExpandWidthAndShow.z < 0.0;\nfloat show = texCoordExpandWidthAndShow.w;\nvec4 p, prev, next;\nif (czm_morphTime == 1.0)\n{\np = czm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz);\nprev = czm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz);\nnext = czm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz);\n}\nelse if (czm_morphTime == 0.0)\n{\np = czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy);\nprev = czm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy);\nnext = czm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy);\n}\nelse\n{\np = czm_columbusViewMorph(\nczm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy),\nczm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz),\nczm_morphTime);\nprev = czm_columbusViewMorph(\nczm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy),\nczm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz),\nczm_morphTime);\nnext = czm_columbusViewMorph(\nczm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy),\nczm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz),\nczm_morphTime);\n}\nvec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev);\ngl_Position = czm_viewportOrthographic * positionWC * show;\nv_st = vec2(texCoord, clamp(expandDir, 0.0, 1.0));\nv_width = width;\nczm_pickColor = pickColor;\n}\n"}),c("Scene/Polyline",["../Core/BoundingSphere","../Core/Cartesian3","../Core/Color","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Matrix4","../Core/PolylinePipeline","./Material"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,b){++a._propertiesChanged[b];var c=a._polylineCollection;e(c)&&(c._updatePolyline(a,b),a._dirty=!0)}var l=function(f,g){f=d(f,d.EMPTY_OBJECT),this._show=d(f.show,!0),this._width=d(f.width,1),this._loop=d(f.loop,!1),this._material=f.material,e(this._material)||(this._material=j.fromType(j.ColorType,{color:new c(1,1,1,1)}));var k=f.positions;e(k)||(k=[]),this._positions=k,this._actualPositions=i.removeDuplicates(k),e(this._actualPositions)||(this._actualPositions=k),this._loop&&this._actualPositions.length>2&&(this._actualPositions===this._positions&&(this._actualPositions=k.slice()),this._actualPositions.push(b.clone(this._actualPositions[0]))),this._length=this._actualPositions.length,this._id=f.id;var l;e(g)&&(l=h.clone(g.modelMatrix)),this._modelMatrix=l,this._segments=i.wrapLongitude(this._actualPositions,l),this._actualLength=void 0,this._propertiesChanged=new Uint32Array(r),this._polylineCollection=g,this._dirty=!1,this._pickId=void 0,this._boundingVolume=a.fromPoints(this._actualPositions),this._boundingVolumeWC=a.transform(this._boundingVolume,this._modelMatrix),this._boundingVolume2D=new a},m=l.SHOW_INDEX=0,n=l.WIDTH_INDEX=1,o=l.POSITION_INDEX=2,p=l.MATERIAL_INDEX=3,q=l.POSITION_SIZE_INDEX=4,r=l.NUMBER_OF_PROPERTIES=5;return f(l.prototype,{show:{get:function(){return this._show},set:function(a){a!==this._show&&(this._show=a,k(this,m))}},positions:{get:function(){return this._positions},set:function(c){var d=i.removeDuplicates(c);e(d)||(d=c),this._loop&&d.length>2&&(d===c&&(d=c.slice()),d.push(b.clone(d[0]))),(this._actualPositions.length!==d.length||this._actualPositions.length!==this._length)&&k(this,q),this._positions=c,this._actualPositions=d,this._length=d.length,this._boundingVolume=a.fromPoints(this._actualPositions,this._boundingVolume),this._boundingVolumeWC=a.transform(this._boundingVolume,this._modelMatrix,this._boundingVolumeWC),k(this,o),this.update()}},material:{get:function(){return this._material},set:function(a){this._material!==a&&(this._material=a,k(this,p))}},width:{get:function(){return this._width},set:function(a){var b=this._width;a!==b&&(this._width=a,k(this,n))}},loop:{get:function(){return this._loop},set:function(a){if(a!==this._loop){var c=this._actualPositions;a?c.length>2&&!b.equals(c[0],c[c.length-1])&&(c.length===this._positions.length&&(this._actualPositions=c=this._positions.slice()),c.push(b.clone(c[0]))):c.length>2&&b.equals(c[0],c[c.length-1])&&(c.length-1===this._positions.length?this._actualPositions=this._positions:c.pop()),this._loop=a,k(this,q)}}},id:{get:function(){return this._id},set:function(a){this._id=a,e(this._pickId)&&(this._pickId.object.id=a)}}}),l.prototype.update=function(){var b=h.IDENTITY;e(this._polylineCollection)&&(b=this._polylineCollection.modelMatrix);var c=this._segments.positions.length,d=this._segments.lengths,f=this._propertiesChanged[o]>0||this._propertiesChanged[q]>0;if((!h.equals(b,this._modelMatrix)||f)&&(this._segments=i.wrapLongitude(this._actualPositions,b),this._boundingVolumeWC=a.transform(this._boundingVolume,b,this._boundingVolumeWC)),this._modelMatrix=b,this._segments.positions.length!==c)k(this,q);else for(var g=d.length,j=0;g>j;++j)if(d[j]!==this._segments.lengths[j]){k(this,q);break}},l.prototype.getPickId=function(a){return e(this._pickId)||(this._pickId=a.createPickId({primitive:this,collection:this._polylineCollection,id:this._id})),this._pickId},l.prototype._clean=function(){this._dirty=!1;for(var a=this._propertiesChanged,b=0;r-1>b;++b)a[b]=0},l.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._material=this._material&&this._material.destroy(),this._polylineCollection=void 0},l}),c("Scene/PolylineCollection",["../Core/BoundingSphere","../Core/Cartesian3","../Core/Cartesian4","../Core/Color","../Core/ComponentDatatype","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/EncodedCartesian3","../Core/IndexDatatype","../Core/Intersect","../Core/Math","../Core/Matrix4","../Renderer/BufferUsage","../Renderer/DrawCommand","../Renderer/ShaderSource","../Shaders/PolylineCommon","../Shaders/PolylineFS","../Shaders/PolylineVS","./BlendingState","./Material","./Pass","./Polyline","./SceneMode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){"use strict";function A(b,c,d,e,f,h,i){for(var j=e.length,k=0,l=!0,m=b._vertexArrays,n=b.debugShowBoundingVolume,o=m.length,p=0;o>p;++p)for(var r=m[p],s=r.buckets,t=s.length,u=0;t>u;++u){for(var v,w,y,A=s[u],B=A.offset,C=i?A.bucket.shaderProgram:A.bucket.pickShaderProgram,E=A.bucket.polylines,F=E.length,G=0,H=0;F>H;++H){var I=E[H],J=D(I._material);if(J!==v){if(g(v)&&G>0){var K=w.isTranslucent();k>=j?(y=new q({owner:b}),e.push(y)):y=e[k],++k,y.boundingVolume=a.clone(U,y.boundingVolume),y.modelMatrix=h,y.shaderProgram=C,y.vertexArray=r.va,y.renderState=K?b._translucentRS:b._opaqueRS,y.pass=K?x.TRANSLUCENT:x.OPAQUE,y.debugShowBoundingVolume=i?n:!1,y.uniformMap=w._uniforms,y.count=G,y.offset=B,B+=G,G=0,l=!0,f.push(y)}w=I._material,w.update(c),v=J}for(var L=I._locatorBuckets,M=L.length,N=0;M>N;++N){var O=L[N];O.locator===A&&(G+=O.count)}var P;d.mode===z.SCENE3D?P=I._boundingVolumeWC:d.mode===z.COLUMBUS_VIEW?P=I._boundingVolume2D:d.mode===z.SCENE2D?g(I._boundingVolume2D)&&(P=a.clone(I._boundingVolume2D,V),P.center.x=0):g(I._boundingVolumeWC)&&g(I._boundingVolume2D)&&(P=a.union(I._boundingVolumeWC,I._boundingVolume2D,V)),l?(l=!1,a.clone(P,U)):a.union(P,U,U)}g(v)&&G>0&&(k>=j?(y=new q({owner:b}),e.push(y)):y=e[k],++k,y.boundingVolume=a.clone(U,y.boundingVolume),y.modelMatrix=h,y.shaderProgram=C,y.vertexArray=r.va,y.renderState=w.isTranslucent()?b._translucentRS:b._opaqueRS,y.pass=w.isTranslucent()?x.TRANSLUCENT:x.OPAQUE,y.debugShowBoundingVolume=i?n:!1,y.uniformMap=w._uniforms,y.count=G,y.offset=B,l=!0,f.push(y)),v=void 0}e.length=k}function B(a){for(var b=a._buffersUsage,c=!1,d=a._propertiesChanged,e=0;R-2>e;++e){var f=b[e];d[e]?f.bufferUsage!==p.STREAM_DRAW?(c=!0,f.bufferUsage=p.STREAM_DRAW,f.frameCount=100):f.frameCount=100:f.bufferUsage!==p.STATIC_DRAW&&(0===f.frameCount?(c=!0,f.bufferUsage=p.STATIC_DRAW):f.frameCount--)}return c}function C(a,b,c){a._createVertexArray=!1,H(a),I(a),E(a);var d,f,h=[[]],i=h[0],j=[0],k=0,m=[[]],o=0,q=a._polylineBuckets;for(d in q)q.hasOwnProperty(d)&&(f=q[d],f.updateShader(b),o+=f.lengthOfPositions);if(o>0){var r,s=a._mode,t=new Float32Array(3*6*o),u=new Uint8Array(4*o),v=new Float32Array(4*o),w=0,x=0,y=0;for(d in q)if(q.hasOwnProperty(d)){f=q[d],f.write(t,u,v,w,x,y,b,c),s===z.MORPHING&&(g(r)||(r=new Float32Array(3*6*o)),f.writeForMorph(r,w));var A=f.lengthOfPositions;w+=3*6*A,x+=4*A,y+=4*A,k=f.updateIndices(h,j,m,k)}var B=a._buffersUsage[O].bufferUsage,C=a._buffersUsage[M].bufferUsage,D=a._buffersUsage[N].bufferUsage,F=C===p.STREAM_DRAW||D===p.STREAM_DRAW?p.STREAM_DRAW:p.STATIC_DRAW;a._positionBuffer=b.createVertexBuffer(t,B);var G;g(r)&&(G=b.createVertexBuffer(r,B)),a._pickColorBuffer=b.createVertexBuffer(u,p.STATIC_DRAW),a._texCoordExpandWidthAndShowBuffer=b.createVertexBuffer(v,F);for(var J=4*Uint8Array.BYTES_PER_ELEMENT,K=3*Float32Array.BYTES_PER_ELEMENT,L=4*Float32Array.BYTES_PER_ELEMENT,P=0,Q=h.length,R=0;Q>R;++R)if(i=h[R],i.length>0){var T=new Uint16Array(i),U=b.createIndexBuffer(T,p.STATIC_DRAW,l.UNSIGNED_SHORT);P+=j[R];var V,X,Y,Z,$=6*(R*K*n.SIXTY_FOUR_KILOBYTES-P*K),_=K+$,aa=K+_,ba=K+aa,ca=K+ba,da=K+ca,ea=R*J*n.SIXTY_FOUR_KILOBYTES-P*J,fa=R*L*n.SIXTY_FOUR_KILOBYTES-P*L,ga=[{index:S.position3DHigh,componentsPerAttribute:3,componentDatatype:e.FLOAT,offsetInBytes:$,strideInBytes:6*K},{index:S.position3DLow,componentsPerAttribute:3,componentDatatype:e.FLOAT,offsetInBytes:_,strideInBytes:6*K},{index:S.position2DHigh,componentsPerAttribute:3,componentDatatype:e.FLOAT,offsetInBytes:$,strideInBytes:6*K},{index:S.position2DLow,componentsPerAttribute:3,componentDatatype:e.FLOAT,offsetInBytes:_,strideInBytes:6*K},{index:S.prevPosition3DHigh,componentsPerAttribute:3,componentDatatype:e.FLOAT,offsetInBytes:aa,strideInBytes:6*K},{index:S.prevPosition3DLow,componentsPerAttribute:3,componentDatatype:e.FLOAT,offsetInBytes:ba,strideInBytes:6*K},{index:S.prevPosition2DHigh,componentsPerAttribute:3,componentDatatype:e.FLOAT,offsetInBytes:aa,strideInBytes:6*K},{index:S.prevPosition2DLow,componentsPerAttribute:3,componentDatatype:e.FLOAT,offsetInBytes:ba,strideInBytes:6*K},{index:S.nextPosition3DHigh,componentsPerAttribute:3,componentDatatype:e.FLOAT,offsetInBytes:ca,strideInBytes:6*K},{index:S.nextPosition3DLow,componentsPerAttribute:3,componentDatatype:e.FLOAT,offsetInBytes:da,strideInBytes:6*K},{index:S.nextPosition2DHigh,componentsPerAttribute:3,componentDatatype:e.FLOAT,offsetInBytes:ca,strideInBytes:6*K},{index:S.nextPosition2DLow,componentsPerAttribute:3,componentDatatype:e.FLOAT,offsetInBytes:da,strideInBytes:6*K},{index:S.texCoordExpandWidthAndShow,componentsPerAttribute:4,componentDatatype:e.FLOAT,vertexBuffer:a._texCoordExpandWidthAndShowBuffer,offsetInBytes:fa},{index:S.pickColor,componentsPerAttribute:4,componentDatatype:e.UNSIGNED_BYTE,vertexBuffer:a._pickColorBuffer,offsetInBytes:ea,normalize:!0}];s===z.SCENE3D?(V=a._positionBuffer,X="vertexBuffer",Y=W,Z="value"):s===z.SCENE2D||s===z.COLUMBUS_VIEW?(V=W,X="value",Y=a._positionBuffer,Z="vertexBuffer"):(V=G,X="vertexBuffer",Y=a._positionBuffer,Z="vertexBuffer"),ga[0][X]=V,ga[1][X]=V,ga[2][Z]=Y,ga[3][Z]=Y,ga[4][X]=V,ga[5][X]=V,ga[6][Z]=Y,ga[7][Z]=Y,ga[8][X]=V,ga[9][X]=V,ga[10][Z]=Y,ga[11][Z]=Y;var ha=b.createVertexArray(ga,U);a._vertexArrays.push({va:ha,buckets:m[R]})}}}function D(a){var b=w._uniformList[a.type],c=b.length;X.length=2*c;for(var d=0,e=0;c>e;++e){var f=b[e];X[d]=f,X[d+1]=a._uniforms[f](),d+=2}return a.type+":"+JSON.stringify(X)}function E(a){for(var b=a._mode,c=a._modelMatrix,d=a._polylineBuckets={},e=a._polylines,f=e.length,h=0;f>h;++h){var i=e[h];if(i._actualPositions.length>1){i.update();var j=i.material,k=d[j.type];g(k)||(k=d[j.type]=new Y(j,b,c)),k.addPolyline(i)}}}function F(a,b){var c=b.mode;a._mode===c&&o.equals(a._modelMatrix,a.modelMatrix)||(a._mode=c,a._modelMatrix=o.clone(a.modelMatrix),a._createVertexArray=!0)}function G(a){if(a._polylinesRemoved){a._polylinesRemoved=!1;for(var b=[],c=a._polylines.length,d=0,e=0;c>d;++d){var f=a._polylines[d];g(f)&&(f._index=e++,b.push(f))}a._polylines=b}}function H(a){for(var b=a._polylines,c=b.length,d=0;c>d;++d)if(g(b[d])){var e=b[d]._bucket;g(e)&&(e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy())}}function I(a){for(var b=a._vertexArrays.length,c=0;b>c;++c)a._vertexArrays[c].va.destroy();a._vertexArrays.length=0}function J(a){for(var b=a._polylines,c=b.length,d=0;c>d;++d)g(b[d])&&b[d]._destroy()}function K(a,b,c){this.count=a,this.offset=b,this.bucket=c}function L(a){return b.dot(b.UNIT_X,a._boundingVolume.center)<0||a._boundingVolume.intersect(c.UNIT_Y)===m.INTERSECTING}var M=y.SHOW_INDEX,N=y.WIDTH_INDEX,O=y.POSITION_INDEX,P=y.MATERIAL_INDEX,Q=y.POSITION_SIZE_INDEX,R=y.NUMBER_OF_PROPERTIES,S={texCoordExpandWidthAndShow:0,position3DHigh:1,position3DLow:2,position2DHigh:3,position2DLow:4,prevPosition3DHigh:5,prevPosition3DLow:6,prevPosition2DHigh:7,prevPosition2DLow:8,nextPosition3DHigh:9,nextPosition3DLow:10,nextPosition2DHigh:11,nextPosition2DLow:12,pickColor:13},T=function(a){a=f(a,f.EMPTY_OBJECT),this.modelMatrix=o.clone(f(a.modelMatrix,o.IDENTITY)),this._modelMatrix=o.clone(o.IDENTITY),this.debugShowBoundingVolume=f(a.debugShowBoundingVolume,!1),this._opaqueRS=void 0,this._translucentRS=void 0,this._colorCommands=[],this._pickCommands=[],this._polylinesUpdated=!1,this._polylinesRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(R),this._polylines=[],this._polylineBuckets={},this._buffersUsage=[{bufferUsage:p.STATIC_DRAW,frameCount:0},{bufferUsage:p.STATIC_DRAW,frameCount:0},{bufferUsage:p.STATIC_DRAW,frameCount:0}],this._mode=void 0,this._polylinesToUpdate=[],this._vertexArrays=[],this._positionBuffer=void 0,this._pickColorBuffer=void 0,this._texCoordExpandWidthAndShowBuffer=void 0};h(T.prototype,{length:{get:function(){return G(this),this._polylines.length}}}),T.prototype.add=function(a){var b=new y(a,this);return b._index=this._polylines.length,this._polylines.push(b),this._createVertexArray=!0,b},T.prototype.remove=function(a){if(this.contains(a)){if(this._polylines[a._index]=void 0,this._polylinesRemoved=!0,this._createVertexArray=!0,g(a._bucket)){var b=a._bucket;b.shaderProgram=b.shaderProgram&&b.shaderProgram.destroy(),b.pickShaderProgram=b.pickShaderProgram&&b.pickShaderProgram.destroy()}return a._destroy(),!0}return!1},T.prototype.removeAll=function(){H(this),J(this),this._polylineBuckets={},this._polylinesRemoved=!1,this._polylines.length=0,this._polylinesToUpdate.length=0,this._createVertexArray=!0},T.prototype.contains=function(a){return g(a)&&a._polylineCollection===this},T.prototype.get=function(a){return G(this),this._polylines[a]},T.prototype.update=function(a,b,c){if(G(this),0!==this._polylines.length){F(this,b);var d,e=b.mapProjection,f=this._propertiesChanged;if(this._createVertexArray||B(this))C(this,a,e);else if(this._polylinesUpdated){var h=this._polylinesToUpdate;if(this._mode!==z.SCENE3D)for(var i=h.length,j=0;i>j;++j)d=h[j],d.update();if(f[Q]||f[P])C(this,a,e);else for(var k=h.length,l=this._polylineBuckets,m=0;k>m;++m){d=h[m],f=d._propertiesChanged;var n=d._bucket,p=0;for(var q in l)if(l.hasOwnProperty(q)){if(l[q]===n){(f[O]||f[M]||f[N])&&n.writeUpdate(p,d,this._positionBuffer,this._texCoordExpandWidthAndShowBuffer,e);break}p+=l[q].lengthOfPositions}d._clean()}h.length=0,this._polylinesUpdated=!1}f=this._propertiesChanged;for(var r=0;R>r;++r)f[r]=0;var s=o.IDENTITY;b.mode===z.SCENE3D&&(s=this.modelMatrix);var t=b.passes,u=0!==b.morphTime;if(g(this._opaqueRS)&&this._opaqueRS.depthTest.enabled===u||(this._opaqueRS=a.createRenderState({depthMask:u,depthTest:{enabled:u}})),g(this._translucentRS)&&this._translucentRS.depthTest.enabled===u||(this._translucentRS=a.createRenderState({blending:v.ALPHA_BLEND,depthMask:!u,depthTest:{enabled:u}})),t.render){var w=this._colorCommands;A(this,a,b,w,c,s,!0)}if(t.pick){var x=this._pickCommands;A(this,a,b,x,c,s,!1)}}};var U=new a,V=new a;T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){return I(this),H(this),J(this),i(this)};var W=[0,0,0],X=[];T.prototype._updatePolyline=function(a,b){this._polylinesUpdated=!0,this._polylinesToUpdate.push(a),++this._propertiesChanged[b]};var Y=function(a,b,c){this.polylines=[],this.lengthOfPositions=0,this.material=a,this.shaderProgram=void 0,this.pickShaderProgram=void 0,this.mode=b,this.modelMatrix=c};Y.prototype.addPolyline=function(a){var b=this.polylines;b.push(a),a._actualLength=this.getPolylinePositionsLength(a),this.lengthOfPositions+=a._actualLength,a._bucket=this},Y.prototype.updateShader=function(a){if(!g(this.shaderProgram)){var b=new r({sources:[s,u]}),c=new r({sources:[this.material.shaderSource,t]}),d=new r({sources:c.sources,pickColorQualifier:"varying"});this.shaderProgram=a.createShaderProgram(b,c,S),this.pickShaderProgram=a.createShaderProgram(b,d,S)}},Y.prototype.getPolylinePositionsLength=function(a){var b;if(this.mode===z.SCENE3D||!L(a))return b=a._actualPositions.length,4*b-4;var c=0,d=a._segments.lengths;b=d.length;for(var e=0;b>e;++e)c+=4*d[e]-4;return c};var Z=new b,$=new b,_=new b,aa=new b;Y.prototype.write=function(a,c,e,f,g,h,i,j){for(var l=this.mode,m=this.polylines,n=m.length,o=0;n>o;++o)for(var p,q=m[o],r=q.width,s=q.show&&r>0,t=this.getSegments(q,j),u=t.positions,v=t.lengths,w=u.length,x=q.getPickId(i).color,y=0,A=0,B=0;w>B;++B){0===B?q._loop?p=u[w-2]:(p=aa,b.subtract(u[0],u[1],p),b.add(u[0],p,p)):p=u[B-1],$.x=p.x,$.y=p.y,$.z=l!==z.SCENE2D?p.z:0,p=u[B],Z.x=p.x,Z.y=p.y,Z.z=l!==z.SCENE2D?p.z:0,B===w-1?q._loop?p=u[1]:(p=aa,b.subtract(u[w-1],u[w-2],p),b.add(u[w-1],p,p)):p=u[B+1],_.x=p.x,_.y=p.y,_.z=l!==z.SCENE2D?p.z:0;var C=v[y];B===A+C&&(A+=C,++y);for(var D=0===B-A,E=B===A+v[y]-1,F=D?2:0,G=E?2:4,H=F;G>H;++H){k.writeElements(Z,a,f),k.writeElements($,a,f+6),k.writeElements(_,a,f+12),c[g]=d.floatToByte(x.red),c[g+1]=d.floatToByte(x.green),c[g+2]=d.floatToByte(x.blue),c[g+3]=d.floatToByte(x.alpha);var I=0>H-2?-1:1;e[h]=B/(w-1),e[h+1]=2*(H%2)-1,e[h+2]=I*r,e[h+3]=s,f+=18,g+=4,h+=4}}};var ba=new b,ca=new b,da=new b,ea=new b;Y.prototype.writeForMorph=function(a,c){for(var d=this.modelMatrix,e=this.polylines,f=e.length,g=0;f>g;++g)for(var h=e[g],i=h._segments.positions,j=h._segments.lengths,l=i.length,m=0,n=0,p=0;l>p;++p){var q;0===p?h._loop?q=i[l-2]:(q=ea,b.subtract(i[0],i[1],q),b.add(i[0],q,q)):q=i[p-1],q=o.multiplyByPoint(d,q,ca);var r,s=o.multiplyByPoint(d,i[p],ba);p===l-1?h._loop?r=i[1]:(r=ea,b.subtract(i[l-1],i[l-2],r),b.add(i[l-1],r,r)):r=i[p+1],r=o.multiplyByPoint(d,r,da);var t=j[m];p===n+t&&(n+=t,++m);for(var u=0===p-n,v=p===n+j[m]-1,w=u?2:0,x=v?2:4,y=w;x>y;++y)k.writeElements(s,a,c),k.writeElements(q,a,c+6),k.writeElements(r,a,c+12),c+=18}};var fa=new Array(1);Y.prototype.updateIndices=function(a,b,c,d){var e=c.length-1,f=new K(0,d,this);c[e].push(f);var g=0,h=a[a.length-1],i=0;h.length>0&&(i=h[h.length-1]+1);for(var j=this.polylines,k=j.length,l=0;k>l;++l){var m=j[l];m._locatorBuckets=[];var o;if(this.mode===z.SCENE3D){o=fa;var p=m._actualPositions.length;if(!(p>0))continue;o[0]=p}else o=m._segments.lengths;var q=o.length;if(q>0){for(var r=0,s=0;q>s;++s)for(var t=o[s]-1,u=0;t>u;++u)i+4>=n.SIXTY_FOUR_KILOBYTES-1&&(m._locatorBuckets.push({locator:f,count:r}),r=0,b.push(4),h=[],a.push(h),i=0,f.count=g,g=0,d=0,f=new K(0,0,this),c[++e]=[f]),h.push(i,i+2,i+1),h.push(i+1,i+2,i+3),r+=6,g+=6,d+=6,i+=4;m._locatorBuckets.push({locator:f,count:r}),i+4>=n.SIXTY_FOUR_KILOBYTES-1&&(b.push(0),h=[],a.push(h),i=0,f.count=g,d=0,g=0,f=new K(0,0,this),c[++e]=[f])}m._clean()}return f.count=g,d},Y.prototype.getPolylineStartIndex=function(a){for(var b=this.polylines,c=0,d=b.length,e=0;d>e;++e){var f=b[e];if(f===a)break;c+=f._actualLength}return c};var ga={positions:void 0,lengths:void 0},ha=new Array(1),ia=new b;Y.prototype.getSegments=function(c,d){var e=c._actualPositions;if(this.mode===z.SCENE3D)return ha[0]=e.length,ga.positions=e,ga.lengths=ha,ga;L(c)&&(e=c._segments.positions);for(var f,g=d.ellipsoid,h=[],i=this.modelMatrix,j=e.length,k=ia,l=0;j>l;++l)f=e[l],k=o.multiplyByPoint(i,f,k),h.push(d.project(g.cartesianToCartographic(k)));if(h.length>0){c._boundingVolume2D=a.fromPoints(h,c._boundingVolume2D);var m=c._boundingVolume2D.center;c._boundingVolume2D.center=new b(m.z,m.x,m.y)}return ga.positions=h,ga.lengths=c._segments.lengths,ga};var ja,ka;return Y.prototype.writeUpdate=function(a,c,d,e,f){var h=this.mode,i=c._actualLength;if(i){a+=this.getPolylineStartIndex(c);var j=ja,l=ka,m=3*6*i;!g(j)||j.length<m?(j=ja=new Float32Array(m),l=ka=new Float32Array(4*i)):j.length>m&&(j=new Float32Array(j.buffer,0,m),l=new Float32Array(l.buffer,0,4*i));var n,o=0,p=0,q=this.getSegments(c,f),r=q.positions,s=q.lengths,t=0,u=0,v=c.width,w=c.show&&v>0;i=r.length;for(var x=0;i>x;++x){0===x?c._loop?n=r[i-2]:(n=aa,b.subtract(r[0],r[1],n),b.add(r[0],n,n)):n=r[x-1],$.x=n.x,$.y=n.y,$.z=h!==z.SCENE2D?n.z:0,n=r[x],Z.x=n.x,Z.y=n.y,Z.z=h!==z.SCENE2D?n.z:0,x===i-1?c._loop?n=r[1]:(n=aa,b.subtract(r[i-1],r[i-2],n),b.add(r[i-1],n,n)):n=r[x+1],_.x=n.x,_.y=n.y,_.z=h!==z.SCENE2D?n.z:0;var y=s[t];x===u+y&&(u+=y,++t);for(var A=0===x-u,B=x===u+s[t]-1,C=A?2:0,D=B?2:4,E=C;D>E;++E){k.writeElements(Z,j,o),k.writeElements($,j,o+6),k.writeElements(_,j,o+12);var F=0>E-2?-1:1;l[p]=x/(i-1),l[p+1]=2*(E%2)-1,l[p+2]=F*v,l[p+3]=w,o+=18,p+=4}}d.copyFromArrayView(j,18*Float32Array.BYTES_PER_ELEMENT*a),e.copyFromArrayView(l,4*Float32Array.BYTES_PER_ELEMENT*a)}},T}),c("DataSources/PathVisualizer",["../Core/AssociativeArray","../Core/Cartesian3","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Core/JulianDate","../Core/Matrix3","../Core/Matrix4","../Core/ReferenceFrame","../Core/TimeInterval","../Core/Transforms","../Scene/PolylineCollection","../Scene/SceneMode","./CompositePositionProperty","./ConstantPositionProperty","./MaterialProperty","./Property","./ReferenceProperty","./SampledPositionProperty","./TimeIntervalCollectionPositionProperty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";function u(a,b,d,e,g,h,i,j){var k,l=a._property._times,m=i;k=a.getValueInReferenceFrame(b,g,j[m]),c(k)&&(j[m++]=k);for(var n,o,p,q=!c(e)||f.lessThanOrEquals(e,b)||f.greaterThanOrEquals(e,d),r=0,s=l.length,t=l[r],u=d,v=!1;s>r;){if(!q&&f.greaterThanOrEquals(t,e)&&(k=a.getValueInReferenceFrame(e,g,j[m]),c(k)&&(j[m++]=k),q=!0),f.greaterThan(t,b)&&f.lessThan(t,u)&&!t.equals(e)&&(k=a.getValueInReferenceFrame(t,g,j[m]),c(k)&&(j[m++]=k)),s-1>r){if(h>0&&!v){var w=l[r+1],x=f.secondsDifference(w,t);v=x>h,v&&(n=Math.ceil(x/h),o=0,p=x/Math.max(n,2),n=Math.max(n-1,1))}if(v&&n>o){t=f.addSeconds(t,p,new f),o++;continue}}v=!1,r++,t=l[r]}return k=a.getValueInReferenceFrame(d,g,j[m]),c(k)&&(j[m++]=k),m}function v(a,b,d,e,g,h,i,j){for(var k,l=0,m=i,n=b,o=Math.max(h,60),p=!c(e)||f.lessThanOrEquals(e,b)||f.greaterThanOrEquals(e,d);f.lessThan(n,d);)!p&&f.greaterThanOrEquals(n,e)&&(p=!0,k=a.getValueInReferenceFrame(e,g,j[m]),c(k)&&(j[m]=k,m++)),k=a.getValueInReferenceFrame(n,g,j[m]),c(k)&&(j[m]=k,m++),l++,n=f.addSeconds(b,o*l,new f);return k=a.getValueInReferenceFrame(d,g,j[m]),c(k)&&(j[m]=k,m++),m}function w(a,b,d,e,g,h,i,k){E.start=b,E.stop=d;for(var l=i,m=a.intervals,n=0;n<m.length;n++){var o=m.get(n);if(!j.intersect(o,E,C).isEmpty){var p=o.start;o.isStartIncluded||(p=o.isStopIncluded?o.stop:f.addSeconds(o.start,f.secondsDifference(o.stop,o.start)/2,new f));var q=a.getValueInReferenceFrame(p,g,k[l]);c(q)&&(k[l]=q,l++)}}return l}function x(a,b,d,e,f,g,h,i){var j=a.getValueInReferenceFrame(b,f,i[h]);return c(j)&&(i[h++]=j),h}function y(a,b,c,d,e,g,h,i){D.start=b,D.stop=c;for(var k=h,l=a.intervals,m=0;m<l.length;m++){var p=l.get(m);if(!j.intersect(p,D,C).isEmpty){var q=p.start,z=p.stop,A=b;f.greaterThan(q,A)&&(A=q);var B=c;f.lessThan(z,B)&&(B=z);var E=p.data;E instanceof r&&(E=E.resolvedProperty),k=E instanceof s?u(E,A,B,d,e,g,k,i):E instanceof n?y(E,A,B,d,e,g,k,i):E instanceof t?w(E,A,B,d,e,g,k,i):E instanceof o?x(E,A,B,d,e,g,k,i):v(E,A,B,d,e,g,k,i)}}return k}function z(a,b,d,e,f,g,h){c(h)||(h=[]),a instanceof r&&(a=a.resolvedProperty);var i=0;return i=a instanceof s?u(a,b,d,e,f,g,0,h):a instanceof n?y(a,b,d,e,f,g,0,h):a instanceof t?w(a,b,d,e,f,g,0,h):a instanceof o?x(a,b,d,e,f,g,0,h):v(a,b,d,e,f,g,0,h),h.length=i,h}var A=60,B=1,C=new j,D=new j,E=new j,F=function(a){this.entity=a,this.polyline=void 0,this.index=void 0,this.updater=void 0},G=new g,H=function(a,b){this._unusedIndexes=[],this._polylineCollection=new l,this._scene=a,this._referenceFrame=b,a.primitives.add(this._polylineCollection)};H.prototype.update=function(a){if(this._referenceFrame===i.INERTIAL){var d=k.computeIcrfToFixedMatrix(a,G);c(d)||(d=k.computeTemeToPseudoFixedMatrix(a,G)),h.fromRotationTranslation(d,b.ZERO,this._polylineCollection.modelMatrix)}},H.prototype.updateObject=function(a,b){var d,e,g=b.entity,h=g._path,i=g._position,j=h._show,k=b.polyline,l=!c(j)||j.getValue(a);if(l){var m=q.getValueOrUndefined(h._leadTime,a),n=q.getValueOrUndefined(h._trailTime,a),o=g._availability,r=c(o),s=c(m),t=c(n);if(l=r||s&&t){if(t&&(d=f.addSeconds(a,-n,new f)),s&&(e=f.addSeconds(a,m,new f)),r){var u=o.start,v=o.stop;(!t||f.greaterThan(u,d))&&(d=u),(!s||f.lessThan(v,e))&&(e=v)}l=f.lessThan(d,e)}}if(!l)return c(k)&&(this._unusedIndexes.push(b.index),b.polyline=void 0,k.show=!1,b.index=void 0),void 0;if(!c(k)){var w=this._unusedIndexes,x=w.length;if(x>0){var y=w.pop();k=this._polylineCollection.get(y),b.index=y}else b.index=this._polylineCollection.length,k=this._polylineCollection.add();k.id=g,b.polyline=k}var C=q.getValueOrDefault(h._resolution,a,A);k.show=!0,k.positions=z(i,d,e,a,this._referenceFrame,C,k.positions),k.material=p.getValue(a,h._material,k.material),k.width=q.getValueOrDefault(h._width,a,B)},H.prototype.removeObject=function(a){var b=a.polyline;c(b)&&(this._unusedIndexes.push(a.index),a.polyline=void 0,b.show=!1,a.index=void 0)},H.prototype.destroy=function(){return this._scene.primitives.remove(this._polylineCollection),d(this)};var I=function(b,c){c.collectionChanged.addEventListener(I.prototype._onCollectionChanged,this),this._scene=b,this._updaters={},this._entityCollection=c,this._items=new a,this._onCollectionChanged(c,c.entities,[],[])};return I.prototype.update=function(a){var b=this._updaters;for(var d in b)b.hasOwnProperty(d)&&b[d].update(a);for(var e=this._items.values,f=0,g=e.length;g>f;f++){var h=e[f],j=h.entity,k=j._position,l=j._pathUpdater,n=i.FIXED;this._scene.mode===m.SCENE3D&&(n=k.referenceFrame);var o=this._updaters[n];l===o&&c(o)?o.updateObject(a,h):(c(l)&&l.removeObject(h),c(o)||(o=new H(this._scene,n),o.update(a),this._updaters[n]=o),h.updater=o,c(o)&&o.updateObject(a,h))}return!0},I.prototype.isDestroyed=function(){return!1},I.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(I.prototype._onCollectionChanged,this);var a=this._updaters;for(var b in a)a.hasOwnProperty(b)&&a[b].destroy();return d(this)},I.prototype._onCollectionChanged=function(a,b,d,e){var f,g,h,i=this._items;for(f=b.length-1;f>-1;f--)g=b[f],c(g._path)&&c(g._position)&&i.set(g.id,new F(g));for(f=e.length-1;f>-1;f--)g=e[f],c(g._path)&&c(g._position)?i.contains(g.id)||i.set(g.id,new F(g)):(h=i.get(g.id),c(h)&&(h.updater.removeObject(h),i.remove(g.id)));for(f=d.length-1;f>-1;f--)g=d[f],h=i.get(g.id),c(h)&&(h.updater.removeObject(h),i.remove(g.id))},I._subSample=z,I}),c("DataSources/PointVisualizer",["../Core/AssociativeArray","../Core/Cartesian3","../Core/Color","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Core/NearFarScalar","../Scene/BillboardCollection","./Property"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a,b){if(d(a)){var c=a.billboard;d(c)&&(a.billboard=void 0,c.show=!1,c.image=void 0,b.push(c._index))}}function k(a,b,c,d,e){return function(){var f=document.createElement("canvas"),g=e+2*d;f.height=f.width=g;var h=f.getContext("2d");return h.clearRect(0,0,g,g),0!==d&&(h.beginPath(),h.arc(g/2,g/2,g/2,0,2*Math.PI,!0),h.closePath(),h.fillStyle=c,h.fill(),1>a&&(h.save(),h.globalCompositeOperation="destination-out",h.beginPath(),h.arc(g/2,g/2,e/2,0,2*Math.PI,!0),h.closePath(),h.fillStyle="black",h.fill(),h.restore())),h.beginPath(),h.arc(g/2,g/2,e/2,0,2*Math.PI,!0),h.closePath(),h.fillStyle=b,h.fill(),f}}var l=c.WHITE,m=c.BLACK,n=0,o=1,p=new c,q=new b,r=new c,s=new g,t=function(a){this.entity=a,this.billboard=void 0,this.color=void 0,this.outlineColor=void 0,
this.pixelSize=void 0,this.outlineWidth=void 0},u=function(b,c){c.collectionChanged.addEventListener(u.prototype._onCollectionChanged,this),this._scene=b,this._unusedIndexes=[],this._entityCollection=c,this._billboardCollection=void 0,this._items=new a,this._onCollectionChanged(c,c.entities,[],[])};return u.prototype.update=function(a){for(var b=this._items.values,e=this._unusedIndexes,f=0,g=b.length;g>f;f++){var t=b[f],u=t.entity,v=u._point,w=t.billboard,x=u.isAvailable(a)&&i.getValueOrDefault(v._show,a,!0);if(x&&(q=i.getValueOrUndefined(u._position,a,q),x=d(q)),x){var y=!1,z=!1;if(!d(w)){y=!0;var A=this._billboardCollection;d(A)||(A=new h,this._billboardCollection=A,this._scene.primitives.add(A));var B=e.length;w=B>0?A.get(e.pop()):A.add(),w.id=u,w.image=void 0,t.billboard=w,z=!0}w.show=!0,w.position=q,w.scaleByDistance=i.getValueOrUndefined(v._scaleByDistance,a,s);var C=v._color,D=v._outlineColor,E=y||!i.isConstant(C)?i.getValueOrDefault(C,a,l,p):t.color,F=y||!i.isConstant(D)?i.getValueOrDefault(D,a,m,r):t.outlineColor,G=Math.round(i.getValueOrDefault(v._outlineWidth,a,n)),H=Math.max(1,Math.round(i.getValueOrDefault(v._pixelSize,a,o)));if(G>0?(w.scale=1,z=z||G!==t.outlineWidth||H!==t.pixelSize||!c.equals(E,t.color)||!c.equals(F,t.outlineColor)):(w.scale=H/50,H=50,z=z||G!==t.outlineWidth||!c.equals(E,t.color)||!c.equals(F,t.outlineColor)),z){t.color=c.clone(E,t.color),t.outlineColor=c.clone(F,t.outlineColor),t.pixelSize=H,t.outlineWidth=G;var I=E.alpha,J=E.toCssColorString(),K=F.toCssColorString(),L=JSON.stringify([J,H,K,G]);w.setImage(L,k(I,J,K,G,H))}}else j(t,e)}return!0},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._entityCollection.collectionChanged.removeEventListener(u.prototype._onCollectionChanged,this),d(this._billboardCollection)&&this._scene.primitives.remove(this._billboardCollection),e(this)},u.prototype._onCollectionChanged=function(a,b,c,e){var f,g,h=this._unusedIndexes,i=this._items;for(f=b.length-1;f>-1;f--)g=b[f],d(g._point)&&d(g._position)&&i.set(g.id,new t(g));for(f=e.length-1;f>-1;f--)g=e[f],d(g._point)&&d(g._position)?i.contains(g.id)||i.set(g.id,new t(g)):(j(i.get(g.id),h),i.remove(g.id));for(f=c.length-1;f>-1;f--)g=c[f],j(i.get(g.id),h),i.remove(g.id)},u}),c("DataSources/PolygonGeometryUpdater",["../Core/Color","../Core/ColorGeometryInstanceAttribute","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Event","../Core/GeometryInstance","../Core/Iso8601","../Core/PolygonGeometry","../Core/PolygonOutlineGeometry","../Core/ShowGeometryInstanceAttribute","../Scene/MaterialAppearance","../Scene/PerInstanceColorAppearance","../Scene/Primitive","./ColorMaterialProperty","./ConstantProperty","./MaterialProperty","./Property"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";var u=q.fromColor(a.WHITE),v=new r(!0),w=new r(!0),x=new r(!1),y=new r(a.BLACK),z=function(a){this.id=a,this.vertexFormat=void 0,this.polygonHierarchy={positions:void 0},this.perPositionHeight=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0},A=function(a,b){this._entity=a,this._scene=b,this._entitySubscription=a.definitionChanged.addEventListener(A.prototype._onEntityPropertyChanged,this),this._fillEnabled=!1,this._isClosed=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new h,this._showProperty=void 0,this._materialProperty=void 0,this._hasConstantOutline=!0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._options=new z(a),this._onEntityPropertyChanged(a,"polygon",a.polygon,void 0)};e(A,{perInstanceColorAppearanceType:{value:o},materialAppearanceType:{value:n}}),e(A.prototype,{entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!d(this._entity.availability)&&t.isConstant(this._showProperty)&&t.isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!d(this._entity.availability)&&t.isConstant(this._showProperty)&&t.isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},isDynamic:{get:function(){return this._dynamic}},isClosed:{get:function(){return this._isClosed}},geometryChanged:{get:function(){return this._geometryChanged}}}),A.prototype.isOutlineVisible=function(a){var b=this._entity;return this._outlineEnabled&&b.isAvailable(a)&&this._showProperty.getValue(a)&&this._showOutlineProperty.getValue(a)},A.prototype.isFilled=function(a){var b=this._entity;return this._fillEnabled&&b.isAvailable(a)&&this._showProperty.getValue(a)&&this._fillProperty.getValue(a)},A.prototype.createFillGeometryInstance=function(c){var e,f,g=this._entity,h=g.isAvailable(c),j=new m(h&&this._showProperty.getValue(c)&&this._fillProperty.getValue(c));if(this._materialProperty instanceof q){var l=a.WHITE;d(this._materialProperty.color)&&(this._materialProperty.color.isConstant||h)&&(l=this._materialProperty.color.getValue(c)),f=b.fromColor(l),e={show:j,color:f}}else e={show:j};return new i({id:g,geometry:new k(this._options),attributes:e})},A.prototype.createOutlineGeometryInstance=function(c){var d=this._entity,e=d.isAvailable(c),f=t.getValueOrDefault(this._outlineColorProperty,c,a.BLACK);return new i({id:d,geometry:new l(this._options),attributes:{show:new m(e&&this._showProperty.getValue(c)&&this._showOutlineProperty.getValue(c)),color:b.fromColor(f)}})},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){this._entitySubscription(),f(this)},A.prototype._onEntityPropertyChanged=function(a,b){if("availability"===b||"polygon"===b){var e=this._entity.polygon;if(!d(e))return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var f=e.fill,g=d(f)&&f.isConstant?f.getValue(j.MINIMUM_VALUE):!0,h=e.outline,i=d(h);if(i&&h.isConstant&&(i=h.getValue(j.MINIMUM_VALUE)),!g&&!i)return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var k=e.positions,l=e.show;if(d(l)&&l.isConstant&&!l.getValue(j.MINIMUM_VALUE)||!d(k))return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var m=c(e.material,u),p=m instanceof q;this._materialProperty=m,this._fillProperty=c(f,w),this._showProperty=c(l,v),this._showOutlineProperty=c(e.outline,x),this._outlineColorProperty=i?c(e.outlineColor,y):void 0;var r=e.height,s=e.extrudedHeight,z=e.granularity,A=e.stRotation,B=e.outlineWidth,C=e.perPositionHeight;if(this._isClosed=d(s),this._fillEnabled=g,this._outlineEnabled=i,k.isConstant&&t.isConstant(r)&&t.isConstant(s)&&t.isConstant(z)&&t.isConstant(A)&&t.isConstant(B)&&t.isConstant(C)){var D=this._options;D.vertexFormat=p?o.VERTEX_FORMAT:n.MaterialSupport.TEXTURED.vertexFormat,D.polygonHierarchy.positions=k.getValue(j.MINIMUM_VALUE,D.polygonHierarchy.positions),D.height=d(r)?r.getValue(j.MINIMUM_VALUE):void 0,D.extrudedHeight=d(s)?s.getValue(j.MINIMUM_VALUE):void 0,D.granularity=d(z)?z.getValue(j.MINIMUM_VALUE):void 0,D.stRotation=d(A)?A.getValue(j.MINIMUM_VALUE):void 0,D.perPositionHeight=d(C)?C.getValue(j.MINIMUM_VALUE):void 0,this._outlineWidth=d(B)?B.getValue(j.MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}else this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this))}},A.prototype.createDynamicUpdater=function(a){return new B(a,this)};var B=function(a,b){this._primitives=a,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=b,this._options=new z(b._entity)};return B.prototype.update=function(c){var e=this._geometryUpdater;d(this._primitive)&&this._primitives.remove(this._primitive),d(this._outlinePrimitive)&&this._primitives.remove(this._outlinePrimitive);var f=e._entity,g=f.polygon,h=g.show;if(f.isAvailable(c)&&(!d(h)||h.getValue(c))){var j=this._options,m=g.positions,q=g.perPositionHeight,r=g.height,t=g.extrudedHeight,u=g.granularity,v=g.stRotation;if(j.polygonHierarchy.positions=m.getValue(c,j.polygonHierarchy.positions),j.height=d(r)?r.getValue(c,j):void 0,j.extrudedHeight=d(t)?t.getValue(c,j):void 0,j.granularity=d(u)?u.getValue(c):void 0,j.stRotation=d(v)?v.getValue(c):void 0,!d(g.fill)||g.fill.getValue(c)){j.perPositionHeight=d(q)?q.getValue(c):void 0,this._material=s.getValue(c,e.fillMaterialProperty,this._material);var w=this._material,x=new n({material:w,translucent:w.isTranslucent(),closed:d(j.extrudedHeight)});j.vertexFormat=x.vertexFormat,this._primitive=new p({geometryInstances:new i({id:f,geometry:new k(j)}),appearance:x,asynchronous:!1}),this._primitives.add(this._primitive)}if(d(g.outline)&&g.outline.getValue(c)){j.vertexFormat=o.VERTEX_FORMAT;var y=d(g.outlineColor)?g.outlineColor.getValue(c):a.BLACK,z=d(g.outlineWidth)?g.outlineWidth.getValue(c):1,A=1!==y.alpha;this._outlinePrimitive=new p({geometryInstances:new i({id:f,geometry:new l(j),attributes:{color:b.fromColor(y)}}),appearance:new o({flat:!0,translucent:A,renderState:{lineWidth:e._scene.clampLineWidth(z)}}),asynchronous:!1}),this._primitives.add(this._outlinePrimitive)}}},B.prototype.isDestroyed=function(){return!1},B.prototype.destroy=function(){d(this._primitive)&&this._primitives.remove(this._primitive),d(this._outlinePrimitive)&&this._primitives.remove(this._outlinePrimitive),f(this)},A}),c("Shaders/Appearances/PolylineColorAppearanceVS",[],function(){"use strict";return"attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 prevPosition3DHigh;\nattribute vec3 prevPosition3DLow;\nattribute vec3 nextPosition3DHigh;\nattribute vec3 nextPosition3DLow;\nattribute vec2 expandAndWidth;\nattribute vec4 color;\nvarying vec4 v_color;\nvoid main()\n{\nfloat expandDir = expandAndWidth.x;\nfloat width = abs(expandAndWidth.y) + 0.5;\nbool usePrev = expandAndWidth.y < 0.0;\nvec4 p = czm_computePosition();\nvec4 prev = czm_computePrevPosition();\nvec4 next = czm_computeNextPosition();\nv_color = color;\nvec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev);\ngl_Position = czm_viewportOrthographic * positionWC;\n}\n"}),c("Scene/PolylineColorAppearance",["../Core/defaultValue","../Core/defineProperties","../Core/VertexFormat","../Shaders/Appearances/PerInstanceFlatColorAppearanceFS","../Shaders/Appearances/PolylineColorAppearanceVS","../Shaders/PolylineCommon","./Appearance"],function(a,b,c,d,e,f,g){"use strict";var h=f+"\n"+e,i=d,j=function(b){b=a(b,a.EMPTY_OBJECT);var c=a(b.translucent,!0),d=!1,e=j.VERTEX_FORMAT;this.material=void 0,this.translucent=c,this._vertexShaderSource=a(b.vertexShaderSource,h),this._fragmentShaderSource=a(b.fragmentShaderSource,i),this._renderState=g.getDefaultRenderState(c,d,b.renderState),this._closed=d,this._vertexFormat=e};return b(j.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}}}),j.VERTEX_FORMAT=c.POSITION_ONLY,j.prototype.getFragmentShaderSource=g.prototype.getFragmentShaderSource,j.prototype.isTranslucent=g.prototype.isTranslucent,j.prototype.getRenderState=g.prototype.getRenderState,j}),c("Shaders/Appearances/PolylineMaterialAppearanceVS",[],function(){"use strict";return"attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 prevPosition3DHigh;\nattribute vec3 prevPosition3DLow;\nattribute vec3 nextPosition3DHigh;\nattribute vec3 nextPosition3DLow;\nattribute vec2 expandAndWidth;\nattribute vec2 st;\nvarying float v_width;\nvarying vec2 v_st;\nvoid main()\n{\nfloat expandDir = expandAndWidth.x;\nfloat width = abs(expandAndWidth.y) + 0.5;\nbool usePrev = expandAndWidth.y < 0.0;\nvec4 p = czm_computePosition();\nvec4 prev = czm_computePrevPosition();\nvec4 next = czm_computeNextPosition();\nv_width = width;\nv_st = st;\nvec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev);\ngl_Position = czm_viewportOrthographic * positionWC;\n}\n"}),c("Scene/PolylineMaterialAppearance",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/VertexFormat","../Shaders/Appearances/PolylineMaterialAppearanceVS","../Shaders/PolylineCommon","../Shaders/PolylineFS","./Appearance","./Material"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=f+"\n"+e,k=g,l=function(c){c=a(c,a.EMPTY_OBJECT);var d=a(c.translucent,!0),e=!1,f=l.VERTEX_FORMAT;this.material=b(c.material)?c.material:i.fromType(i.ColorType),this.translucent=d,this._vertexShaderSource=a(c.vertexShaderSource,j),this._fragmentShaderSource=a(c.fragmentShaderSource,k),this._renderState=h.getDefaultRenderState(d,e,c.renderState),this._closed=e,this._vertexFormat=f};return c(l.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}}}),l.VERTEX_FORMAT=d.POSITION_AND_ST,l.prototype.getFragmentShaderSource=h.prototype.getFragmentShaderSource,l.prototype.isTranslucent=h.prototype.isTranslucent,l.prototype.getRenderState=h.prototype.getRenderState,l}),c("DataSources/PolylineGeometryUpdater",["../Core/Color","../Core/ColorGeometryInstanceAttribute","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Ellipsoid","../Core/Event","../Core/GeometryInstance","../Core/Iso8601","../Core/PolylineGeometry","../Core/PolylinePipeline","../Core/ShowGeometryInstanceAttribute","../Scene/PolylineCollection","../Scene/PolylineColorAppearance","../Scene/PolylineMaterialAppearance","./ColorMaterialProperty","./ConstantProperty","./MaterialProperty","./Property"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){"use strict";var v={},w=r.fromColor(a.WHITE),x=new s(!0),y=function(a){this.id=a,this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.followSurface=void 0,this.granularity=void 0},z=function(a,b){this._entity=a,this._scene=b,this._entitySubscription=a.definitionChanged.addEventListener(z.prototype._onEntityPropertyChanged,this),this._fillEnabled=!1,this._dynamic=!1,this._geometryChanged=new i,this._showProperty=void 0,this._materialProperty=void 0,this._options=new y(a),this._onEntityPropertyChanged(a,"polyline",a.polyline,void 0)};e(z,{perInstanceColorAppearanceType:{value:p},materialAppearanceType:{value:q}}),e(z.prototype,{entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!d(this._entity.availability)&&u.isConstant(this._showProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{value:!1},hasConstantOutline:{value:!0},outlineColorProperty:{value:void 0},isDynamic:{get:function(){return this._dynamic}},isClosed:{value:!1},geometryChanged:{get:function(){return this._geometryChanged}}}),z.prototype.isOutlineVisible=function(){return!1},z.prototype.isFilled=function(a){var b=this._entity;return this._fillEnabled&&b.isAvailable(a)&&this._showProperty.getValue(a)},z.prototype.createFillGeometryInstance=function(c){var e,f,g=this._entity,h=g.isAvailable(c),i=new n(h&&this._showProperty.getValue(c));if(this._materialProperty instanceof r){var k=a.WHITE;d(this._materialProperty.color)&&(this._materialProperty.color.isConstant||h)&&(k=this._materialProperty.color.getValue(c)),e=b.fromColor(k),f={show:i,color:e}}else f={show:i};return new j({id:g,geometry:new l(this._options),attributes:f})},z.prototype.createOutlineGeometryInstance=function(){},z.prototype.isDestroyed=function(){return!1},z.prototype.destroy=function(){this._entitySubscription(),f(this)},z.prototype._onEntityPropertyChanged=function(a,b){if("availability"===b||"polyline"===b){var e=this._entity.polyline;if(!d(e))return this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var f=e.positions,g=e.show;if(d(g)&&g.isConstant&&!g.getValue(k.MINIMUM_VALUE)||!d(f))return this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var h=c(e.material,w),i=h instanceof r;this._materialProperty=h,this._showProperty=c(g,x),this._fillEnabled=!0;var j=e.width,l=e.followSurface,m=e.granularity;if(f.isConstant&&u.isConstant(j)&&u.isConstant(l)&&u.isConstant(m)){var n=this._options,o=f.getValue(k.MINIMUM_VALUE,n.positions);if(!d(o)||o.length<2)return this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;n.vertexFormat=i?p.VERTEX_FORMAT:q.VERTEX_FORMAT,n.positions=o,n.width=d(j)?j.getValue(k.MINIMUM_VALUE):void 0,n.followSurface=d(l)?l.getValue(k.MINIMUM_VALUE):void 0,n.granularity=d(m)?m.getValue(k.MINIMUM_VALUE):void 0,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}else this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this))}},z.prototype.createDynamicUpdater=function(a){return new A(a,this)};var A=function(a,b){var c=b._scene.id,e=v[c];d(e)||(e=new o,v[c]=e,a.add(e));var f=e.add();f.id=b._entity,this._line=f,this._primitives=a,this._geometryUpdater=b,this._positions=[]};return A.prototype.update=function(a){var b=this._geometryUpdater,c=b._entity,d=c.polyline,e=this._line,f=c.isAvailable(a)&&u.getValueOrDefault(d._show,a,!0);if(!f)return e.show=!1,void 0;var g=d.positions,i=g.getValue(a,this._positions),j=u.getValueOrDefault(d._followSurface,a,!0);if(j){var k=u.getValueOrUndefined(d._granularity,a);i=m.generateCartesianArc({positions:i,granularity:k,height:m.extractHeights(i,h.WGS84)})}e.show=!0,e.positions=i,e.material=t.getValue(a,b.fillMaterialProperty,e.material),e.width=u.getValueOrDefault(d._width,a,1)},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){var a=this._geometryUpdater,b=a._scene.id,c=v[b];c.remove(this._line),0===c.length&&(this._primitives.remove(c),c.isDestroyed()||c.destroy(),delete v[b]),f(this)},z}),c("DataSources/RectangleGeometryUpdater",["../Core/Color","../Core/ColorGeometryInstanceAttribute","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Event","../Core/GeometryInstance","../Core/Iso8601","../Core/RectangleGeometry","../Core/RectangleOutlineGeometry","../Core/ShowGeometryInstanceAttribute","../Scene/MaterialAppearance","../Scene/PerInstanceColorAppearance","../Scene/Primitive","./ColorMaterialProperty","./ConstantProperty","./MaterialProperty","./Property"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";var u=q.fromColor(a.WHITE),v=new r(!0),w=new r(!0),x=new r(!1),y=new r(a.BLACK),z=function(a){this.id=a,this.vertexFormat=void 0,this.rectangle=void 0,this.closeBottom=void 0,this.closeTop=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.rotation=void 0},A=function(a,b){this._entity=a,this._scene=b,this._entitySubscription=a.definitionChanged.addEventListener(A.prototype._onEntityPropertyChanged,this),this._fillEnabled=!1,this._isClosed=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new h,this._showProperty=void 0,this._materialProperty=void 0,this._hasConstantOutline=!0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._options=new z(a),this._onEntityPropertyChanged(a,"rectangle",a.rectangle,void 0)};e(A,{perInstanceColorAppearanceType:{value:o},materialAppearanceType:{value:n}}),e(A.prototype,{entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!d(this._entity.availability)&&t.isConstant(this._showProperty)&&t.isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!d(this._entity.availability)&&t.isConstant(this._showProperty)&&t.isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},isDynamic:{get:function(){return this._dynamic}},isClosed:{get:function(){return this._isClosed}},geometryChanged:{get:function(){return this._geometryChanged}}}),A.prototype.isOutlineVisible=function(a){var b=this._entity;return this._outlineEnabled&&b.isAvailable(a)&&this._showProperty.getValue(a)&&this._showOutlineProperty.getValue(a)},A.prototype.isFilled=function(a){var b=this._entity;return this._fillEnabled&&b.isAvailable(a)&&this._showProperty.getValue(a)&&this._fillProperty.getValue(a)},A.prototype.createFillGeometryInstance=function(c){var e,f,g=this._entity,h=g.isAvailable(c),j=new m(h&&this._showProperty.getValue(c)&&this._fillProperty.getValue(c));if(this._materialProperty instanceof q){var l=a.WHITE;d(this._materialProperty.color)&&(this._materialProperty.color.isConstant||h)&&(l=this._materialProperty.color.getValue(c)),f=b.fromColor(l),e={show:j,color:f}}else e={show:j};return new i({id:g,geometry:new k(this._options),attributes:e})},A.prototype.createOutlineGeometryInstance=function(c){var d=this._entity,e=d.isAvailable(c),f=t.getValueOrDefault(this._outlineColorProperty,c,a.BLACK);return new i({id:d,geometry:new l(this._options),attributes:{show:new m(e&&this._showProperty.getValue(c)&&this._showOutlineProperty.getValue(c)),color:b.fromColor(f)}})},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){this._entitySubscription(),f(this)},A.prototype._onEntityPropertyChanged=function(a,b){if("availability"===b||"rectangle"===b){var e=this._entity.rectangle;if(!d(e))return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var f=e.fill,g=d(f)&&f.isConstant?f.getValue(j.MINIMUM_VALUE):!0,h=e.outline,i=d(h);if(i&&h.isConstant&&(i=h.getValue(j.MINIMUM_VALUE)),!g&&!i)return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var k=e.coordinates,l=e.show;if(d(l)&&l.isConstant&&!l.getValue(j.MINIMUM_VALUE)||!d(k))return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var m=c(e.material,u),p=m instanceof q;this._materialProperty=m,this._fillProperty=c(f,w),this._showProperty=c(l,v),this._showOutlineProperty=c(e.outline,x),this._outlineColorProperty=i?c(e.outlineColor,y):void 0;var r=e.height,s=e.extrudedHeight,z=e.granularity,A=e.stRotation,B=e.rotation,C=e.outlineWidth,D=e.closeBottom,E=e.closeTop;if(this._fillEnabled=g,this._outlineEnabled=i,k.isConstant&&t.isConstant(r)&&t.isConstant(s)&&t.isConstant(z)&&t.isConstant(A)&&t.isConstant(B)&&t.isConstant(C)&&t.isConstant(D)&&t.isConstant(E)){var F=this._options;F.vertexFormat=p?o.VERTEX_FORMAT:n.MaterialSupport.TEXTURED.vertexFormat,F.rectangle=k.getValue(j.MINIMUM_VALUE,F.rectangle),F.height=d(r)?r.getValue(j.MINIMUM_VALUE):void 0,F.extrudedHeight=d(s)?s.getValue(j.MINIMUM_VALUE):void 0,F.granularity=d(z)?z.getValue(j.MINIMUM_VALUE):void 0,F.stRotation=d(A)?A.getValue(j.MINIMUM_VALUE):void 0,F.rotation=d(B)?B.getValue(j.MINIMUM_VALUE):void 0,F.closeBottom=d(D)?D.getValue(j.MINIMUM_VALUE):void 0,F.closeTop=d(E)?E.getValue(j.MINIMUM_VALUE):void 0,this._isClosed=d(s)&&d(F.closeTop)&&d(F.closeBottom)&&F.closeTop&&F.closeBottom,this._outlineWidth=d(C)?C.getValue(j.MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}else this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this))}},A.prototype.createDynamicUpdater=function(a){return new B(a,this)};var B=function(a,b){this._primitives=a,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=b,this._options=new z(b._entity)};return B.prototype.update=function(c){var e=this._geometryUpdater;d(this._primitive)&&this._primitives.remove(this._primitive),d(this._outlinePrimitive)&&this._primitives.remove(this._outlinePrimitive);var f=e._entity,g=f.rectangle,h=g.show;if(f.isAvailable(c)&&(!d(h)||h.getValue(c))){var j=this._options,m=g.coordinates,q=g.closeBottom,r=g.closeTop,t=g.height,u=g.extrudedHeight,v=g.granularity,w=g.stRotation,x=g.rotation;if(j.rectangle=m.getValue(c,j.rectangle),j.height=d(t)?t.getValue(c,j):void 0,j.extrudedHeight=d(u)?u.getValue(c,j):void 0,j.granularity=d(v)?v.getValue(c):void 0,j.stRotation=d(w)?w.getValue(c):void 0,j.rotation=d(x)?x.getValue(c):void 0,!d(g.fill)||g.fill.getValue(c)){j.closeBottom=d(q)?q.getValue(c):void 0,j.closeTop=d(r)?r.getValue(c):void 0,this._material=s.getValue(c,e.fillMaterialProperty,this._material);var y=this._material,z=new n({material:y,translucent:y.isTranslucent(),closed:j.closeTop&&j.closeBottom});j.vertexFormat=z.vertexFormat,this._primitive=new p({geometryInstances:new i({id:f,geometry:new k(j)}),appearance:z,asynchronous:!1}),this._primitives.add(this._primitive)}if(d(g.outline)&&g.outline.getValue(c)){j.vertexFormat=o.VERTEX_FORMAT;var A=d(g.outlineColor)?g.outlineColor.getValue(c):a.BLACK,B=d(g.outlineWidth)?g.outlineWidth.getValue(c):1,C=1!==A.alpha;this._outlinePrimitive=new p({geometryInstances:new i({id:f,geometry:new l(j),attributes:{color:b.fromColor(A)}}),appearance:new o({flat:!0,translucent:C,renderState:{lineWidth:e._scene.clampLineWidth(B)}}),asynchronous:!1}),this._primitives.add(this._outlinePrimitive)}}},B.prototype.isDestroyed=function(){return!1},B.prototype.destroy=function(){d(this._primitive)&&this._primitives.remove(this._primitive),d(this._outlinePrimitive)&&this._primitives.remove(this._outlinePrimitive),f(this)},A}),c("DataSources/WallGeometryUpdater",["../Core/Color","../Core/ColorGeometryInstanceAttribute","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Event","../Core/GeometryInstance","../Core/Iso8601","../Core/ShowGeometryInstanceAttribute","../Core/WallGeometry","../Core/WallOutlineGeometry","../Scene/MaterialAppearance","../Scene/PerInstanceColorAppearance","../Scene/Primitive","./ColorMaterialProperty","./ConstantProperty","./MaterialProperty","./Property"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";var u=q.fromColor(a.WHITE),v=new r(!0),w=new r(!0),x=new r(!1),y=new r(a.BLACK),z=function(a){this.id=a,this.vertexFormat=void 0,this.positions=void 0,this.minimumHeights=void 0,this.maximumHeights=void 0,this.granularity=void 0},A=function(a,b){this._entity=a,this._scene=b,this._entitySubscription=a.definitionChanged.addEventListener(A.prototype._onEntityPropertyChanged,this),this._fillEnabled=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new h,this._showProperty=void 0,this._materialProperty=void 0,this._hasConstantOutline=!0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._options=new z(a),this._onEntityPropertyChanged(a,"wall",a.wall,void 0)};e(A,{perInstanceColorAppearanceType:{value:o},materialAppearanceType:{value:n}}),e(A.prototype,{entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!d(this._entity.availability)&&t.isConstant(this._showProperty)&&t.isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!d(this._entity.availability)&&t.isConstant(this._showProperty)&&t.isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},isDynamic:{get:function(){return this._dynamic}},isClosed:{get:function(){return!1}},geometryChanged:{get:function(){return this._geometryChanged}}}),A.prototype.isOutlineVisible=function(a){var b=this._entity;return this._outlineEnabled&&b.isAvailable(a)&&this._showProperty.getValue(a)&&this._showOutlineProperty.getValue(a)},A.prototype.isFilled=function(a){var b=this._entity;return this._fillEnabled&&b.isAvailable(a)&&this._showProperty.getValue(a)&&this._fillProperty.getValue(a)},A.prototype.createFillGeometryInstance=function(c){var e,f,g=this._entity,h=g.isAvailable(c),j=new k(h&&this._showProperty.getValue(c)&&this._fillProperty.getValue(c));if(this._materialProperty instanceof q){var m=a.WHITE;d(this._materialProperty.color)&&(this._materialProperty.color.isConstant||h)&&(m=this._materialProperty.color.getValue(c)),f=b.fromColor(m),e={show:j,color:f}}else e={show:j};return new i({id:g,geometry:new l(this._options),attributes:e})},A.prototype.createOutlineGeometryInstance=function(c){var d=this._entity,e=d.isAvailable(c),f=t.getValueOrDefault(this._outlineColorProperty,c,a.BLACK);return new i({id:d,geometry:new m(this._options),attributes:{show:new k(e&&this._showProperty.getValue(c)&&this._showOutlineProperty.getValue(c)),color:b.fromColor(f)}})},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){this._entitySubscription(),f(this)},A.prototype._onEntityPropertyChanged=function(a,b){if("availability"===b||"wall"===b){var e=this._entity.wall;if(!d(e))return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var f=e.fill,g=d(f)&&f.isConstant?f.getValue(j.MINIMUM_VALUE):!0,h=e.outline,i=d(h);if(i&&h.isConstant&&(i=h.getValue(j.MINIMUM_VALUE)),!g&&!i)return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var k=e.positions,l=e.show;if(d(l)&&l.isConstant&&!l.getValue(j.MINIMUM_VALUE)||!d(k))return(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)),void 0;var m=c(e.material,u),p=m instanceof q;this._materialProperty=m,this._fillProperty=c(f,w),this._showProperty=c(l,v),this._showOutlineProperty=c(e.outline,x),this._outlineColorProperty=i?c(e.outlineColor,y):void 0;var r=e.minimumHeights,s=e.maximumHeights,z=e.outlineWidth,A=e.granularity;if(this._fillEnabled=g,this._outlineEnabled=i,k.isConstant&&t.isConstant(r)&&t.isConstant(s)&&t.isConstant(z)&&t.isConstant(A)){var B=this._options;B.vertexFormat=p?o.VERTEX_FORMAT:n.MaterialSupport.TEXTURED.vertexFormat,B.positions=k.getValue(j.MINIMUM_VALUE,B.positions),B.minimumHeights=d(r)?r.getValue(j.MINIMUM_VALUE,B.minimumHeights):void 0,B.maximumHeights=d(s)?s.getValue(j.MINIMUM_VALUE,B.maximumHeights):void 0,B.granularity=d(A)?A.getValue(j.MINIMUM_VALUE):void 0,this._outlineWidth=d(z)?z.getValue(j.MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}else this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this))}},A.prototype.createDynamicUpdater=function(a){return new B(a,this)};var B=function(a,b){this._primitives=a,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=b,this._options=new z(b._entity)};return B.prototype.update=function(c){var e=this._geometryUpdater;d(this._primitive)&&this._primitives.remove(this._primitive),d(this._outlinePrimitive)&&this._primitives.remove(this._outlinePrimitive);var f=e._entity,g=f.wall,h=g.show
;if(f.isAvailable(c)&&(!d(h)||h.getValue(c))){var j=this._options,k=g.positions,q=g.minimumHeights,r=g.maximumHeights,t=g.granularity;if(j.positions=k.getValue(c,j.positions),j.minimumHeights=d(q)?q.getValue(c,j.minimumHeights):void 0,j.maximumHeights=d(r)?r.getValue(c,j.maximumHeights):void 0,j.granularity=d(t)?t.getValue(c):void 0,!d(g.fill)||g.fill.getValue(c)){this._material=s.getValue(c,e.fillMaterialProperty,this._material);var u=this._material,v=new n({material:u,translucent:u.isTranslucent(),closed:!1});j.vertexFormat=v.vertexFormat,this._primitive=new p({geometryInstances:new i({id:f,geometry:new l(j)}),appearance:v,asynchronous:!1}),this._primitives.add(this._primitive)}if(d(g.outline)&&g.outline.getValue(c)){j.vertexFormat=o.VERTEX_FORMAT;var w=d(g.outlineColor)?g.outlineColor.getValue(c):a.BLACK,x=d(g.outlineWidth)?g.outlineWidth.getValue(c):1,y=1!==w.alpha;this._outlinePrimitive=new p({geometryInstances:new i({id:f,geometry:new m(j),attributes:{color:b.fromColor(w)}}),appearance:new o({flat:!0,translucent:y,renderState:{lineWidth:e._scene.clampLineWidth(x)}}),asynchronous:!1}),this._primitives.add(this._outlinePrimitive)}}},B.prototype.isDestroyed=function(){return!1},B.prototype.destroy=function(){d(this._primitive)&&this._primitives.remove(this._primitive),d(this._outlinePrimitive)&&this._primitives.remove(this._outlinePrimitive),f(this)},A}),c("DataSources/DataSourceDisplay",["../Core/defaultValue","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Core/EventHelper","./BillboardVisualizer","./EllipseGeometryUpdater","./EllipsoidGeometryUpdater","./GeometryVisualizer","./LabelVisualizer","./ModelVisualizer","./PathVisualizer","./PointVisualizer","./PolygonGeometryUpdater","./PolylineGeometryUpdater","./RectangleGeometryUpdater","./WallGeometryUpdater"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";var r=function(b){var c=b.scene,d=b.dataSourceCollection;this._eventHelper=new e,this._eventHelper.add(d.dataSourceAdded,this._onDataSourceAdded,this),this._eventHelper.add(d.dataSourceRemoved,this._onDataSourceRemoved,this),this._dataSourceCollection=d,this._scene=c,this._visualizersCallback=a(b.visualizersCallback,r.defaultVisualizersCallback);for(var f=0,g=d.length;g>f;f++)this._onDataSourceAdded(d,d.get(f))};return r.defaultVisualizersCallback=function(a,b){var c=b.entities;return[new f(a,c),new i(g,a,c),new i(h,a,c),new i(n,a,c),new i(o,a,c),new i(p,a,c),new i(q,a,c),new j(a,c),new k(a,c),new m(a,c),new l(a,c)]},r.prototype.getScene=function(){return this._scene},r.prototype.getDataSources=function(){return this._dataSourceCollection},r.prototype.isDestroyed=function(){return!1},r.prototype.destroy=function(){this._eventHelper.removeAll();for(var a=this._dataSourceCollection,b=0,d=a.length;d>b;++b)this._onDataSourceRemoved(this._dataSourceCollection,a.get(b));return c(this)},r.prototype.update=function(a){var c,d,e,f,g=!0,h=this._dataSourceCollection,i=h.length;for(c=0;i>c;c++){var j=h.get(c);for(b(j.update)&&(g=j.update(a)&&g),e=j._visualizers,f=e.length,d=0;f>d;d++)g=e[d].update(a)&&g}return g},r.prototype._onDataSourceAdded=function(a,b){var c=this._visualizersCallback(this._scene,b);b._visualizers=c},r.prototype._onDataSourceRemoved=function(a,b){for(var c=b._visualizers,d=c.length,e=0;d>e;e++)c[e].destroy(),b._visualizers=void 0},r}),c("DataSources/DynamicGeometryUpdater",["../Core/DeveloperError"],function(a){"use strict";var b=function(){a.throwInstantiationError()};return b.prototype.update=a.throwInstantiationError,b.prototype.isDestroyed=a.throwInstantiationError,b.prototype.destroy=a.throwInstantiationError,b}),c("DataSources/EntityView",["../Core/Cartesian3","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Ellipsoid","../Core/JulianDate","../Core/Math","../Core/Matrix3","../Core/Transforms","../Scene/SceneMode"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(b,d,e,f,l,x){var y=f.getValue(l,b._lastCartesian);if(c(y)){var z,A,B,C=!1;v=g.addSeconds(l,.001,v);var D=f.getValue(v,p);if(c(D)){var E,F=j.computeFixedToIcrfMatrix(l,m),G=j.computeFixedToIcrfMatrix(v,n);c(F)&&c(G)?E=i.transpose(F,o):(E=j.computeTemeToPseudoFixedMatrix(l,o),F=i.transpose(E,m),G=j.computeTemeToPseudoFixedMatrix(v,n),i.transpose(G,G));var H=i.multiplyByVector(F,y,t),I=i.multiplyByVector(G,D,u);a.subtract(H,I,s);var J=1e3*a.magnitude(s),K=3986004418e5,L=-K/(J*J-2*K/a.magnitude(H));0>L||L>w*x.maximumRadius?(z=q,a.normalize(y,z),a.negate(z,z),B=a.clone(a.UNIT_Z,r),A=a.cross(B,z,p),a.magnitude(A)>h.EPSILON7&&(a.normalize(z,z),a.normalize(A,A),B=a.cross(z,A,r),a.normalize(B,B),C=!0)):a.equalsEpsilon(y,D,h.EPSILON7)||(B=q,a.normalize(H,B),a.normalize(I,I),A=a.cross(B,I,r),a.equalsEpsilon(A,a.ZERO,h.EPSILON7)||(z=a.cross(A,B,p),i.multiplyByVector(E,z,z),i.multiplyByVector(E,A,A),i.multiplyByVector(E,B,B),a.normalize(z,z),a.normalize(A,A),a.normalize(B,B),C=!0))}if(C){var M=d.transform;M[0]=z.x,M[1]=z.y,M[2]=z.z,M[3]=0,M[4]=A.x,M[5]=A.y,M[6]=A.z,M[7]=0,M[8]=B.x,M[9]=B.y,M[10]=B.z,M[11]=0,M[12]=y.x,M[13]=y.y,M[14]=y.z,M[15]=0}else j.eastNorthUpToFixedFrame(y,x,d.transform)}e&&(b.scene.mode===k.SCENE2D?d.lookAt(b._offset2D,a.ZERO,b._up2D):d.lookAt(b._offset3D,a.ZERO,b._up3D))}var m=new i,n=new i,o=new i,p=new a,q=new a,r=new a,s=new a,t=new a,u=new a,v=new g,w=1.25,x=new a,y=function(c,d,e){this.entity=c,this.scene=d,this.ellipsoid=b(e,f.WGS84),this._lastEntity=void 0,this._mode=void 0,this._lastCartesian=new a,this._offset3D=new a,this._up3D=new a,this._offset2D=new a,this._up2D=new a};return d(y,{defaultOffset3D:{get:function(){return this._defaultOffset3D},set:function(b){this._defaultOffset3D=a.clone(b,new a),this._defaultUp3D=a.cross(this._defaultOffset3D,a.cross(a.UNIT_Z,this._defaultOffset3D,x),new a),a.normalize(this._defaultUp3D,this._defaultUp3D),this._defaultOffset2D=new a(0,0,a.magnitude(this._defaultOffset3D)),this._defaultUp2D=a.clone(a.UNIT_Y)}}}),y.defaultOffset3D=new a(-14e3,3500,3500),y.prototype.update=function(b){var d=this.scene,e=this.entity,f=this.ellipsoid,g=e.position,h=e!==this._lastEntity,i=d.mode!==this._mode&&d.mode!==k.MORPHING,j=this._offset3D,m=this._up3D,n=this._offset2D,o=this._up2D,p=d.camera;if(h){var q=e.viewFrom;if(c(q)&&c(q.getValue(b,j))){a.cross(a.UNIT_Z,j,m),a.cross(j,m,m),a.normalize(m,m);var r=a.magnitude(j);a.fromElements(0,0,r,n),a.clone(this._defaultUp2D,o)}else a.clone(y._defaultOffset2D,n),a.clone(y._defaultUp2D,o),a.clone(y._defaultOffset3D,j),a.clone(y._defaultUp3D,m)}else if(!i&&d.mode!==k.MORPHING)if(this._mode===k.SCENE2D){var s=Math.max(p.frustum.right-p.frustum.left,p.frustum.top-p.frustum.bottom);a.fromElements(0,0,s,n),a.clone(p.up,o)}else(this._mode===k.SCENE3D||this._mode===k.COLUMBUS_VIEW)&&(a.clone(p.position,j),a.clone(p.up,m));var t=h||i;this._lastEntity=e,this._mode=d.mode!==k.MORPHING?d.mode:this._mode,d.mode!==k.MORPHING&&l(this,d.camera,t,g,b,f)},y}),!function(){function a(a,b){function c(b){var c,d=a.arcs[0>b?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],0>b?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[0>a?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[0>c?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[0>a?~a:a]||h.push([a])}),h}function b(b,c,d){function e(a){var b=0>a?~a:a;(k[b]||(k[b]=[])).push({i:a,g:j})}function f(a){a.forEach(e)}function g(a){a.forEach(f)}function h(a){"GeometryCollection"===a.type?a.geometries.forEach(h):a.type in l&&(j=a,l[a.type](a.arcs))}var i=[];if(arguments.length>1){var j,k=[],l={LineString:f,MultiLineString:g,Polygon:g,MultiPolygon:function(a){a.forEach(g)}};h(c),k.forEach(arguments.length<3?function(a){i.push(a[0].i)}:function(a){d(a[0].g,a[a.length-1].g)&&i.push(a[0].i)})}else for(var m=0,n=b.arcs.length;n>m;++m)i.push(m);return{type:"MultiLineString",arcs:a(b,i)}}function d(b,c){function d(a){a.forEach(function(b){b.forEach(function(b){(f[b=0>b?~b:b]||(f[b]=[])).push(a)})}),h.push(a)}function e(a){return l(g(b,{type:"Polygon",arcs:[a]}).coordinates[0])>0}var f={},h=[],i=[];return c.forEach(function(a){"Polygon"===a.type?d(a.arcs):"MultiPolygon"===a.type&&a.arcs.forEach(d)}),h.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,i.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){f[0>a?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),h.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:i.map(function(c){var d=[];if(c.forEach(function(a){a.forEach(function(a){a.forEach(function(a){f[0>a?~a:a].length<2&&d.push(a)})})}),d=a(b,d),(n=d.length)>1)for(var g,h=e(c[0][0]),i=0;n>i;++i)if(h===e(d[i])){g=d[0],d[0]=d[i],d[i]=g;break}return d})}}function e(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return f(a,b)})}:f(a,b)}function f(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:g(a,b)};return null==b.id&&delete c.id,c}function g(a,b){function c(a,b){b.length&&b.pop();for(var c,d=k[0>a?~a:a],e=0,f=d.length;f>e;++e)b.push(c=d[e].slice()),j(c,e);0>a&&h(b,f)}function d(a){return a=a.slice(),j(a,0),a}function e(a){for(var b=[],d=0,e=a.length;e>d;++d)c(a[d],b);return b.length<2&&b.push(b[0].slice()),b}function f(a){for(var b=e(a);b.length<4;)b.push(b[0].slice());return b}function g(a){return a.map(f)}function i(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(i)}:b in l?{type:b,coordinates:l[b](a)}:null}var j=q(a.transform),k=a.arcs,l={Point:function(a){return d(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(d)},LineString:function(a){return e(a.arcs)},MultiLineString:function(a){return a.arcs.map(e)},Polygon:function(a){return g(a.arcs)},MultiPolygon:function(a){return a.arcs.map(g)}};return i(b)}function h(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function i(a,b){for(var c=0,d=a.length;d>c;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function j(a){function b(a,b){a.forEach(function(a){0>a&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in g&&g[a.type](a.arcs,b)}var e={},f=a.map(function(){return[]}),g={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var h in e)for(var j=e[h],k=j.length,l=0;k>l;++l)for(var m=l+1;k>m;++m){var n,o=j[l],p=j[m];(n=f[o])[h=i(n,p)]!==p&&n.splice(h,0,p),(n=f[p])[h=i(n,o)]!==o&&n.splice(h,0,o)}return f}function k(a,b){function c(a){f.remove(a),a[1][2]=b(a),f.push(a)}var d=q(a.transform),e=r(a.transform),f=p();return b||(b=m),a.arcs.forEach(function(a){for(var g,h,i=[],j=0,k=0,l=a.length;l>k;++k)h=a[k],d(a[k]=[h[0],h[1],1/0],k);for(var k=1,l=a.length-1;l>k;++k)g=a.slice(k-1,k+2),g[1][2]=b(g),i.push(g),f.push(g);for(var k=0,l=i.length;l>k;++k)g=i[k],g.previous=i[k-1],g.next=i[k+1];for(;g=f.pop();){var m=g.previous,n=g.next;g[1][2]<j?g[1][2]=j:j=g[1][2],m&&(m.next=n,m[2]=g[2],c(m)),n&&(n.previous=m,n[0]=g[0],c(n))}a.forEach(e)}),a}function l(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return.5*f}function m(a){var b=a[0],c=a[1],d=a[2];return Math.abs((b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1]))}function o(a,b){return a[1][2]-b[1][2]}function p(){function a(a,b){for(;b>0;){var c=(b+1>>1)-1,e=d[c];if(o(a,e)>=0)break;d[e._=b]=e,d[a._=b=c]=a}}function b(a,b){for(;;){var c=b+1<<1,f=c-1,g=b,h=d[g];if(e>f&&o(d[f],h)<0&&(h=d[g=f]),e>c&&o(d[c],h)<0&&(h=d[g=c]),g===b)break;d[h._=b]=h,d[a._=b=g]=a}}var c={},d=[],e=0;return c.push=function(b){return a(d[b._=e]=b,e++),e},c.pop=function(){if(!(0>=e)){var a,c=d[0];return--e>0&&(a=d[e],b(d[a._=0]=a,0)),c}},c.remove=function(c){var f,g=c._;if(d[g]===c)return g!==--e&&(f=d[e],(o(f,c)<0?a:b)(d[f._=g]=f,g)),g},c}function q(a){if(!a)return s;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0),a[0]=(b+=a[0])*d+f,a[1]=(c+=a[1])*e+g}}function r(a){if(!a)return s;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0);var i=0|(a[0]-f)/d,j=0|(a[1]-g)/e;a[0]=i-b,a[1]=j-c,b=i,c=j}}function s(){}var t={version:"1.6.18",mesh:function(a){return g(a,b.apply(this,arguments))},meshArcs:b,merge:function(a){return g(a,d.apply(this,arguments))},mergeArcs:d,feature:e,neighbors:j,presimplify:k};"function"==typeof c&&c.amd?c("ThirdParty/topojson",t):"object"==typeof module&&module.exports?module.exports=t:this.topojson=t}(),c("DataSources/GeoJsonDataSource",["../Core/Cartesian3","../Core/Color","../Core/createGuid","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/deprecationWarning","../Core/DeveloperError","../Core/Event","../Core/getFilenameFromUri","../Core/loadJson","../Core/PinBuilder","../Core/RuntimeError","../Scene/VerticalOrigin","../ThirdParty/topojson","../ThirdParty/when","./BillboardGraphics","./ColorMaterialProperty","./ConstantPositionProperty","./ConstantProperty","./DataSource","./EntityCollection","./CallbackProperty","./PolygonGraphics","./PolylineGraphics"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){"use strict";function z(b){return a.fromDegrees(b[0],b[1],b[2])}function A(a,b){var c='<table class="cesium-infoBox-defaultTable"><tbody>';for(var d in a)if(a.hasOwnProperty(d)){if(d===b||-1!==da.indexOf(d))continue;var f=a[d];e(f)&&(c+="object"==typeof f?"<tr><th>"+d+"</th><td>"+A(f)+"</td></tr>":"<tr><th>"+d+"</th><td>"+f+"</td></tr>")}return c+="</tbody></table>"}function B(a,b){var c;return function(){return e(c)||(c=A(a,b)),c}}function C(a,b){var d=a.id;if(e(d)&&"Feature"===a.type){for(var f=2,g=d;e(b.getById(g));)g=d+"_"+f,f++;d=g}else d=c();var h=b.getOrCreateEntity(d),i=a.properties;if(e(i)){h.addProperty("properties"),h.properties=i;var j,k=i.title;if(e(k))h.name=k,j="title";else{var l=Number.MAX_VALUE;for(var m in i)if(i.hasOwnProperty(m)&&i[m]){var n=m.toLowerCase();if(l>1&&"title"===n){l=1,j=m;break}l>2&&"name"===n?(l=2,j=m):l>3&&/title/i.test(m)?(l=3,j=m):l>4&&/name/i.test(m)&&(l=4,j=m)}e(j)&&(h.name=i[j])}var o=i.description;h.description=e(o)?new t(o):new w(B(i,j),!0)}return h}function D(a,b){for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=b(a[d]);return c}function E(a,b,c,d,f){if(!e(b.geometry))throw new m("feature.geometry is required.");if(null===b.geometry)C(b,a._entityCollection);else{var g=b.geometry.type,h=fa[g];if(!e(h))throw new m("Unknown geometry type: "+g);h(a,b,b.geometry,d,f)}}function F(a,b,c,d,e){for(var f=b.features,g=0,h=f.length;h>g;g++)E(a,f[g],void 0,d,e)}function G(a,b,c,d,f){for(var g=c.geometries,h=0,i=g.length;i>h;h++){var j=g[h],k=j.type,l=fa[k];if(!e(l))throw new m("Unknown geometry type: "+k);l(a,b,j,d,f)}}function H(a,c,f,g,h){var i=h.markerSymbol,j=h.markerColor,k=h.markerSize,l=c.properties;if(e(l)){var m=l["marker-color"];e(m)&&(j=b.fromCssColorString(m)),k=d(ca[l["marker-size"]],k),i=d(l["marker-symbol"],i)}var o;o=e(i)?1===i.length?a._pinBuilder.fromText(i.toUpperCase(),j,k):a._pinBuilder.fromMakiIconId(i,j,k):a._pinBuilder.fromColor(j,k),a._promises.push(p(o,function(b){var d=new q;d.verticalOrigin=new t(n.BOTTOM),d.image=new t(b.toDataURL());var e=C(c,a._entityCollection);e.billboard=d,e.position=new s(f(g))}))}function I(a,b,c,d,e){H(a,b,d,c.coordinates,e)}function J(a,b,c,d,e){for(var f=c.coordinates,g=0;g<f.length;g++)H(a,b,d,f[g],e)}function K(a,c,d,f,g){var h=g.strokeMaterialProperty,i=g.strokeWidthProperty,j=c.properties;if(e(j)){var k=j["stroke-width"];e(k)&&(i=new t(k));var l,m=j.stroke;e(m)&&(l=b.fromCssColorString(m));var n=j["stroke-opacity"];e(n)&&1!==n&&(e(l)||(l=h.color.clone()),l.alpha=n),e(l)&&(h=r.fromColor(l))}var o=new y;o.material=h,o.width=i,o.positions=new t(D(f,d));var p=C(c,a._entityCollection);p.polyline=o}function L(a,b,c,d,e){K(a,b,d,c.coordinates,e)}function M(a,b,c,d,e){for(var f=c.coordinates,g=0;g<f.length;g++)K(a,b,d,f[g],e)}function N(a,c,d,f,g){var h=g.strokeMaterialProperty.color,i=g.fillMaterialProperty,j=g.strokeWidthProperty,k=c.properties;if(e(k)){var l=k["stroke-width"];e(l)&&(j=new t(l));var m,n=k.stroke;e(n)&&(m=b.fromCssColorString(n));var o=k["stroke-opacity"];e(o)&&1!==o&&(e(m)||(m=g.strokeMaterialProperty.color.clone()),m.alpha=o),e(m)&&(h=new t(m));var p,q=k.fill;e(q)&&(p=b.fromCssColorString(q),p.alpha=i.color.alpha),o=k["fill-opacity"],e(o)&&o!==i.color.alpha&&(e(p)||(p=i.color.clone()),p.alpha=o),e(p)&&(i=r.fromColor(p))}var s=new x;s.outline=new t(!0),s.outlineColor=h,s.outlineWidth=j,s.material=i,s.positions=new t(D(f,d)),f.length>0&&f[0].length>2&&(s.perPositionHeight=new t(!0));var u=C(c,a._entityCollection);u.polygon=s}function O(a,b,c,d,e){N(a,b,d,c.coordinates[0],e)}function P(a,b,c,d,e){for(var f=c.coordinates,g=0;g<f.length;g++)N(a,b,d,f[g][0],e)}function Q(a,b,c,d,e){for(var f in c.objects)if(c.objects.hasOwnProperty(f)){var g=o.feature(c,c.objects[f]),h=ea[g.type];h(a,g,g,d,e)}}function R(a,b,c,f){f=d(f,d.EMPTY_OBJECT),f={markerSize:d(f.markerSize,W),markerSymbol:d(f.markerSymbol,S),markerColor:d(f.markerColor,X),strokeWidthProperty:new t(d(f.strokeWidth,Z)),strokeMaterialProperty:r.fromColor(d(f.stroke,Y)),fillMaterialProperty:r.fromColor(d(f.fill,$))};var g;e(c)&&(g=j(c)),e(g)&&a._name!==g&&(a._name=g,a._changed.raiseEvent(a));var i=ea[b.type];if(!e(i))throw new h("Unsupported GeoJSON object type: "+b.type);var k=z,l=b.crs;if(e(l)){if(null===l)throw new m("crs is null.");if(!e(l.properties))throw new m("crs.properties is undefined.");var n=l.properties;if("name"===l.type){if(k=T[n.name],!e(k))throw new m("Unknown crs name: "+n.name)}else if("link"===l.type){var o=U[n.href];if(e(o)||(o=V[n.type]),!e(o))throw new m("Unable to resolve crs link: "+JSON.stringify(n));k=o(n)}else{if("EPSG"!==l.type)throw new m("Unknown crs type: "+l.type);if(k=T["EPSG:"+n.code],!e(k))throw new m("Unknown crs EPSG code: "+n.code)}}return u.setLoading(a,!0),p(k,function(c){return a._entityCollection.removeAll(),i(a,b,b,c,f),p.all(a._promises,function(){a._promises.length=0,u.setLoading(a,!1)})}).otherwise(function(b){return u.setLoading(a,!1),a._error.raiseEvent(a,b),p.reject(b)})}var S,T={"urn:ogc:def:crs:OGC:1.3:CRS84":z,"EPSG:4326":z},U={},V={},W=48,X=b.ROYALBLUE,Y=b.YELLOW,Z=2,$=b.fromBytes(255,255,0,100),_=new t(Z),aa=r.fromColor(Y),ba=r.fromColor($),ca={small:24,medium:48,large:64},da=["title","description","marker-size","marker-symbol","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"],ea={Feature:E,FeatureCollection:F,GeometryCollection:G,LineString:L,MultiLineString:M,MultiPoint:J,MultiPolygon:P,Point:I,Polygon:O,Topology:Q},fa={GeometryCollection:G,LineString:L,MultiLineString:M,MultiPoint:J,MultiPolygon:P,Point:I,Polygon:O,Topology:Q},ga=function(a){this._name=a,this._changed=new i,this._error=new i,this._isLoading=!1,this._loading=new i,this._entityCollection=new v,this._promises=[],this._pinBuilder=new l};return ga.fromUrl=function(a,b){var c=new ga;return c.loadUrl(a,b),c},f(ga,{markerSize:{get:function(){return W},set:function(a){W=a}},markerSymbol:{get:function(){return S},set:function(a){S=a}},markerColor:{get:function(){return X},set:function(a){X=a}},stroke:{get:function(){return Y},set:function(a){Y=a,aa.color.setValue(a)}},strokeWidth:{get:function(){return Z},set:function(a){Z=a,_.setValue(a)}},fill:{get:function(){return $},set:function(a){$=a,ba=r.fromColor($)}},crsNames:{get:function(){return T}},crsLinkHrefs:{get:function(){return U}},crsLinkTypes:{get:function(){return V}}}),f(ga.prototype,{name:{get:function(){return this._name}},clock:{value:void 0,writable:!1},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}}}),ga.prototype.loadUrl=function(a,b){u.setLoading(this,!0);var c=this;return p(k(a),function(d){return R(c,d,a,b)}).otherwise(function(a){return u.setLoading(c,!1),c._error.raiseEvent(c,a),p.reject(a)})},ga.prototype.load=function(a,b){var c=b;return"string"==typeof b?(c=b,g("GeoJsonDataSource.load","GeoJsonDataSource.load now takes an options object instead of a string as its second parameter.  Support for passing a string parameter will be removed in Cesium 1.6")):e(b)&&(c=b.sourceUri),R(this,a,c,b)},ga}),c("DataSources/GeometryUpdater",["../Core/defineProperties","../Core/DeveloperError"],function(a,b){"use strict";var c=function(){b.throwInstantiationError()};return a(c,{perInstanceColorAppearanceType:{get:b.throwInstantiationError},materialAppearanceType:{get:b.throwInstantiationError}}),a(c.prototype,{entity:{get:b.throwInstantiationError},fillEnabled:{get:b.throwInstantiationError},hasConstantFill:{get:b.throwInstantiationError},fillMaterialProperty:{get:b.throwInstantiationError},outlineEnabled:{get:b.throwInstantiationError},hasConstantOutline:{get:b.throwInstantiationError},outlineColorProperty:{get:b.throwInstantiationError},outlineWidth:{get:b.throwInstantiationError},isDynamic:{get:b.throwInstantiationError},isClosed:{get:b.throwInstantiationError},geometryChanged:{get:b.throwInstantiationError}}),c.prototype.isOutlineVisible=b.throwInstantiationError,c.prototype.isFilled=b.throwInstantiationError,c.prototype.createFillGeometryInstance=b.throwInstantiationError,c.prototype.createOutlineGeometryInstance=b.throwInstantiationError,c.prototype.isDestroyed=b.throwInstantiationError,c.prototype.destroy=b.throwInstantiationError,c.prototype.createDynamicUpdater=b.throwInstantiationError,c}),c("DataSources/PropertyArray",["../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/EventHelper","./Property"],function(a,b,c,d,e,f){"use strict";var g=function(a){this._value=void 0,this._definitionChanged=new d,this._eventHelper=new e,this.setValue(a)};return b(g.prototype,{isConstant:{get:function(){var b=this._value;if(!a(b))return!0;for(var c=b.length,d=0;c>d;d++)if(!f.isConstant(b[d]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}}),g.prototype.getValue=function(b,c){var d=this._value;if(!a(d))return void 0;var e=d.length;a(c)||(c=new Array(e));for(var f=0,g=0;e>f;){var h=this._value[f],i=h.getValue(b,c[f]);a(i)&&(c[g]=i,g++),f++}return c.length=g,c},g.prototype.setValue=function(b){var c=this._eventHelper;if(c.removeAll(),a(b)){this._value=b.slice();for(var d=b.length,e=0;d>e;e++){var f=b[e];a(f)&&c.add(f.definitionChanged,g.prototype._raiseDefinitionChanged,this)}}else this._value=void 0;this._definitionChanged.raiseEvent(this)},g.prototype.equals=function(a){return this===a||a instanceof g&&f.arrayEquals(this._value,a._value)},g.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},g}),c("DataSources/Visualizer",["../Core/DeveloperError"],function(a){"use strict";var b=function(){a.throwInstantiationError()};return b.prototype.update=a.throwInstantiationError,b.prototype.isDestroyed=a.throwInstantiationError,b.prototype.destroy=a.throwInstantiationError,b}),c("Renderer/Buffer",["../Core/defaultValue","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError"],function(a,b,c){"use strict";var d=function(a,b,c,d,e){this._gl=a,this._bufferTarget=b,this._sizeInBytes=c,this._usage=d,this._buffer=e,this.vertexArrayDestroyable=!0};return b(d.prototype,{sizeInBytes:{get:function(){return this._sizeInBytes}},usage:{get:function(){return this._usage}}}),d.prototype._getBuffer=function(){return this._buffer},d.prototype.copyFromArrayView=function(b,c){c=a(c,0);var d=this._gl,e=this._bufferTarget;d.bindBuffer(e,this._buffer),d.bufferSubData(e,c,b),d.bindBuffer(e,null)},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){return this._gl.deleteBuffer(this._buffer),c(this)},d}),c("Renderer/ClearCommand",["../Core/Color","../Core/defaultValue","../Core/freezeObject"],function(a,b,c){"use strict";var d=function(a){a=b(a,b.EMPTY_OBJECT),this.color=a.color,this.depth=a.depth,this.stencil=a.stencil,this.renderState=a.renderState,this.framebuffer=a.framebuffer,this.owner=a.owner};return d.ALL=c(new d({color:new a(0,0,0,0),depth:1,stencil:0})),d.prototype.execute=function(a,b){a.clear(this,b)},d}),c("Shaders/ViewportQuadVS",[],function(){"use strict";return"attribute vec4 position;\nattribute vec2 textureCoordinates;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\ngl_Position = position;\nv_textureCoordinates = textureCoordinates;\n}\n"}),c("Renderer/Framebuffer",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/PixelFormat"],function(a,b,c,d){"use strict";function e(a,b,c){var d=a._gl;d.framebufferTexture2D(d.FRAMEBUFFER,b,c._target,c._texture,0)}function f(a,b,c){var d=a._gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,b,d.RENDERBUFFER,c._getRenderbuffer())}var g=function(c,d,g){g=a(g,a.EMPTY_OBJECT),this._gl=c,this._framebuffer=c.createFramebuffer(),this._colorTextures=[],this._colorRenderbuffers=[],this._activeColorAttachments=[],this._depthTexture=void 0,this._depthRenderbuffer=void 0,this._stencilRenderbuffer=void 0,this._depthStencilTexture=void 0,this._depthStencilRenderbuffer=void 0,this.destroyAttachments=a(g.destroyAttachments,!0),b(g.depthTexture)||b(g.depthRenderbuffer),b(g.depthStencilTexture)||b(g.depthStencilRenderbuffer),this._bind();var h,i,j,k,l;if(b(g.colorTextures)){var m=g.colorTextures;for(k=this._colorTextures.length=this._activeColorAttachments.length=m.length,j=0;k>j;++j)h=m[j],l=this._gl.COLOR_ATTACHMENT0+j,e(this,l,h),this._activeColorAttachments[j]=l,this._colorTextures[j]=h}if(b(g.colorRenderbuffers)){var n=g.colorRenderbuffers;for(k=this._colorRenderbuffers.length=this._activeColorAttachments.length=n.length,j=0;k>j;++j)i=n[j],l=this._gl.COLOR_ATTACHMENT0+j,f(this,l,i),this._activeColorAttachments[j]=l,this._colorRenderbuffers[j]=i}b(g.depthTexture)&&(h=g.depthTexture,e(this,this._gl.DEPTH_ATTACHMENT,h),this._depthTexture=h),b(g.depthRenderbuffer)&&(i=g.depthRenderbuffer,f(this,this._gl.DEPTH_ATTACHMENT,i),this._depthRenderbuffer=i),b(g.stencilRenderbuffer)&&(i=g.stencilRenderbuffer,f(this,this._gl.STENCIL_ATTACHMENT,i),this._stencilRenderbuffer=i),b(g.depthStencilTexture)&&(h=g.depthStencilTexture,e(this,this._gl.DEPTH_STENCIL_ATTACHMENT,h),this._depthStencilTexture=h),b(g.depthStencilRenderbuffer)&&(i=g.depthStencilRenderbuffer,f(this,this._gl.DEPTH_STENCIL_ATTACHMENT,i),this._depthStencilRenderbuffer=i),this._unBind()};return c(g.prototype,{status:{get:function(){this._bind();var a=this._gl.checkFramebufferStatus(this._gl.FRAMEBUFFER);return this._unBind(),a}},numberOfColorAttachments:{get:function(){return this._activeColorAttachments.length}},depthTexture:{get:function(){return this._depthTexture}},depthRenderbuffer:{get:function(){return this._depthRenderbuffer}},stencilRenderbuffer:{get:function(){return this._stencilRenderbuffer}},depthStencilTexture:{get:function(){return this._depthStencilTexture}},depthStencilRenderbuffer:{get:function(){return this._depthStencilRenderbuffer}},hasDepthAttachment:{get:function(){return!!(this.depthTexture||this.depthRenderbuffer||this.depthStencilTexture||this.depthStencilRenderbuffer)}}}),g.prototype._bind=function(){var a=this._gl;a.bindFramebuffer(a.FRAMEBUFFER,this._framebuffer)},g.prototype._unBind=function(){var a=this._gl;a.bindFramebuffer(a.FRAMEBUFFER,null)},g.prototype._getActiveColorAttachments=function(){return this._activeColorAttachments},g.prototype.getColorTexture=function(a){return this._colorTextures[a]},g.prototype.getColorRenderbuffer=function(a){return this._colorRenderbuffers[a]},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){if(this.destroyAttachments){for(var a=0,c=this._colorTextures,e=c.length;e>a;++a){var f=c[a];b(f)&&f.destroy()}var g=this._colorRenderbuffers;for(e=g.length,a=0;e>a;++a){var h=g[a];b(h)&&h.destroy()}this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy(),this._stencilRenderbuffer=this._stencilRenderbuffer&&this._stencilRenderbuffer.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy()}return this._gl.deleteFramebuffer(this._framebuffer),d(this)},g}),c("Renderer/PassState",[],function(){"use strict";var a=function(a){this.context=a,this.framebuffer=void 0,this.blendingEnabled=void 0,this.scissorTest=void 0};return a}),c("Renderer/RenderbufferFormat",["../Core/freezeObject"],function(a){"use strict";var b={RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,validate:function(a){return a===b.RGBA4||a===b.RGB5_A1||a===b.RGB565||a===b.DEPTH_COMPONENT16||a===b.STENCIL_INDEX8||a===b.DEPTH_STENCIL}};return a(b)}),c("Renderer/PickFramebuffer",["../Core/BoundingRectangle","../Core/Color","../Core/defaultValue","../Core/defined","../Core/destroyObject","./PassState","./RenderbufferFormat"],function(a,b,c,d,e,f,g){"use strict";var h=function(b){var c=new f(b);c.blendingEnabled=!1,c.scissorTest={enabled:!0,rectangle:new a},this._context=b,this._fb=void 0,this._passState=c,this._width=0,this._height=0};h.prototype.begin=function(b){var c=this._context,e=c.drawingBufferWidth,f=c.drawingBufferHeight;return a.clone(b,this._passState.scissorTest.rectangle),d(this._fb)&&this._width===e&&this._height===f||(this._width=e,this._height=f,this._fb=this._fb&&this._fb.destroy(),this._fb=c.createFramebuffer({colorTextures:[c.createTexture2D({width:e,height:f})],depthRenderbuffer:c.createRenderbuffer({format:g.DEPTH_COMPONENT16})}),this._passState.framebuffer=this._fb),this._passState};var i=new b;return h.prototype.end=function(a){for(var e=c(a.width,1),f=c(a.height,1),g=this._context,h=g.readPixels({x:a.x,y:a.y,width:e,height:f,framebuffer:this._fb}),j=Math.max(e,f),k=j*j,l=Math.floor(.5*e),m=Math.floor(.5*f),n=0,o=0,p=0,q=-1,r=0;k>r;++r){if(n>=-l&&l>=n&&o>=-m&&m>=o){var s=4*((m-o)*e+n+l);i.red=b.byteToFloat(h[s]),i.green=b.byteToFloat(h[s+1]),i.blue=b.byteToFloat(h[s+2]),i.alpha=b.byteToFloat(h[s+3]);var t=g.getObjectByPickColor(i);if(d(t))return t}if(n===o||0>n&&-n===o||n>0&&n===1-o){var u=p;p=-q,q=u}n+=p,o+=q}return void 0},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return this._fb=this._fb&&this._fb.destroy(),e(this)},h}),c("Renderer/Renderbuffer",["../Core/defineProperties","../Core/destroyObject"],function(a,b){"use strict";function c(a,b,c,d){this._gl=a,this._format=b,this._width=c,this._height=d,this._renderbuffer=this._gl.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,this._renderbuffer),a.renderbufferStorage(a.RENDERBUFFER,b,c,d),a.bindRenderbuffer(a.RENDERBUFFER,null)}return a(c.prototype,{format:{get:function(){return this._format}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}}),c.prototype._getRenderbuffer=function(){return this._renderbuffer},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this._gl.deleteRenderbuffer(this._renderbuffer),b(this)},c}),
c("Renderer/RenderState",["../Core/BoundingRectangle","../Core/Color","../Core/defaultValue","../Core/defined","../Core/DeveloperError","../Core/RuntimeError","../Core/WindingOrder"],function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){c?a.enable(b):a.disable(b)}function i(a,b){a.frontFace(b.frontFace)}function j(a,b){var c=b.cull,d=c.enabled;h(a,a.CULL_FACE,d),d&&a.cullFace(c.face)}function k(a,b){a.lineWidth(b.lineWidth)}function l(a,b){var c=b.polygonOffset,d=c.enabled;h(a,a.POLYGON_OFFSET_FILL,d),d&&a.polygonOffset(c.factor,c.units)}function m(a,b,c){var e=b.scissorTest,f=d(c.scissorTest)?c.scissorTest.enabled:e.enabled;if(h(a,a.SCISSOR_TEST,f),f){var g=d(c.scissorTest)?c.scissorTest.rectangle:e.rectangle;a.scissor(g.x,g.y,g.width,g.height)}}function n(a,b){var c=b.depthRange;a.depthRange(c.near,c.far)}function o(a,b){var c=b.depthTest,d=c.enabled;h(a,a.DEPTH_TEST,d),d&&a.depthFunc(c.func)}function p(a,b){var c=b.colorMask;a.colorMask(c.red,c.green,c.blue,c.alpha)}function q(a,b){a.depthMask(b.depthMask)}function r(a,b){a.stencilMask(b.stencilMask)}function s(a,b,c){var e=b.blending,f=d(c.blendingEnabled)?c.blendingEnabled:e.enabled;h(a,a.BLEND,f),f&&(x(a,e.color),a.blendEquationSeparate(e.equationRgb,e.equationAlpha),a.blendFuncSeparate(e.functionSourceRgb,e.functionDestinationRgb,e.functionSourceAlpha,e.functionDestinationAlpha))}function t(a,b){var c=b.stencilTest,d=c.enabled;if(h(a,a.STENCIL_TEST,d),d){var e=c.frontFunction,f=c.backFunction,g=c.reference,i=c.mask;a.stencilFunc(c.frontFunction,c.reference,c.mask),a.stencilFuncSeparate(a.BACK,f,g,i),a.stencilFuncSeparate(a.FRONT,e,g,i);var j=c.frontOperation,k=j.fail,l=j.zFail,m=j.zPass;a.stencilOpSeparate(a.FRONT,k,l,m);var n=c.backOperation,o=n.fail,p=n.zFail,q=n.zPass;a.stencilOpSeparate(a.BACK,o,p,q)}}function u(a,b,c){var e=b.viewport;d(e)||(e=z,e.width=c.context.drawingBufferWidth,e.height=c.context.drawingBufferHeight),c.context.uniformState.viewport=e,a.viewport(e.x,e.y,e.width,e.height)}function v(a,b){var c=[];return a.frontFace!==b.frontFace&&c.push(i),(a.cull.enabled!==b.cull.enabled||a.cull.face!==b.cull.face)&&c.push(j),a.lineWidth!==b.lineWidth&&c.push(k),(a.polygonOffset.enabled!==b.polygonOffset.enabled||a.polygonOffset.factor!==b.polygonOffset.factor||a.polygonOffset.units!==b.polygonOffset.units)&&c.push(l),c.push(m),(a.depthRange.near!==b.depthRange.near||a.depthRange.far!==b.depthRange.far)&&c.push(n),(a.depthTest.enabled!==b.depthTest.enabled||a.depthTest.func!==b.depthTest.func)&&c.push(o),(a.colorMask.red!==b.colorMask.red||a.colorMask.green!==b.colorMask.green||a.colorMask.blue!==b.colorMask.blue||a.colorMask.alpha!==b.colorMask.alpha)&&c.push(p),a.depthMask!==b.depthMask&&c.push(q),c.push(s),a.stencilMask!==b.stencilMask&&c.push(r),(a.stencilTest.enabled!==b.stencilTest.enabled||a.stencilTest.frontFunction!==b.stencilTest.frontFunction||a.stencilTest.backFunction!==b.stencilTest.backFunction||a.stencilTest.reference!==b.stencilTest.reference||a.stencilTest.mask!==b.stencilTest.mask||a.stencilTest.frontOperation.fail!==b.stencilTest.frontOperation.fail||a.stencilTest.frontOperation.zFail!==b.stencilTest.frontOperation.zFail||a.stencilTest.backOperation.fail!==b.stencilTest.backOperation.fail||a.stencilTest.backOperation.zFail!==b.stencilTest.backOperation.zFail||a.stencilTest.backOperation.zPass!==b.stencilTest.backOperation.zPass)&&c.push(t),(a.sampleCoverage.enabled!==b.sampleCoverage.enabled||a.sampleCoverage.value!==b.sampleCoverage.value||a.sampleCoverage.invert!==b.sampleCoverage.invert)&&c.push(y),c.push(u),c}var w=function(e,h){var i=c(h,{}),j=c(i.cull,{}),k=c(i.polygonOffset,{}),l=c(i.scissorTest,{}),m=c(l.rectangle,{}),n=c(i.depthRange,{}),o=c(i.depthTest,{}),p=c(i.colorMask,{}),q=c(i.blending,{}),r=c(q.color,{}),s=c(i.stencilTest,{}),t=c(s.frontOperation,{}),u=c(s.backOperation,{}),v=c(i.sampleCoverage,{}),w=i.viewport;if(this.frontFace=c(i.frontFace,g.COUNTER_CLOCKWISE),this.cull={enabled:c(j.enabled,!1),face:c(j.face,WebGLRenderingContext.BACK)},this.lineWidth=c(i.lineWidth,1),this.polygonOffset={enabled:c(k.enabled,!1),factor:c(k.factor,0),units:c(k.units,0)},this.scissorTest={enabled:c(l.enabled,!1),rectangle:a.clone(m)},this.depthRange={near:c(n.near,0),far:c(n.far,1)},this.depthTest={enabled:c(o.enabled,!1),func:c(o.func,WebGLRenderingContext.LESS)},this.colorMask={red:c(p.red,!0),green:c(p.green,!0),blue:c(p.blue,!0),alpha:c(p.alpha,!0)},this.depthMask=c(i.depthMask,!0),this.stencilMask=c(i.stencilMask,-1),this.blending={enabled:c(q.enabled,!1),color:new b(c(r.red,0),c(r.green,0),c(r.blue,0),c(r.alpha,0)),equationRgb:c(q.equationRgb,WebGLRenderingContext.FUNC_ADD),equationAlpha:c(q.equationAlpha,WebGLRenderingContext.FUNC_ADD),functionSourceRgb:c(q.functionSourceRgb,WebGLRenderingContext.ONE),functionSourceAlpha:c(q.functionSourceAlpha,WebGLRenderingContext.ONE),functionDestinationRgb:c(q.functionDestinationRgb,WebGLRenderingContext.ZERO),functionDestinationAlpha:c(q.functionDestinationAlpha,WebGLRenderingContext.ZERO)},this.stencilTest={enabled:c(s.enabled,!1),frontFunction:c(s.frontFunction,WebGLRenderingContext.ALWAYS),backFunction:c(s.backFunction,WebGLRenderingContext.ALWAYS),reference:c(s.reference,0),mask:c(s.mask,-1),frontOperation:{fail:c(t.fail,WebGLRenderingContext.KEEP),zFail:c(t.zFail,WebGLRenderingContext.KEEP),zPass:c(t.zPass,WebGLRenderingContext.KEEP)},backOperation:{fail:c(u.fail,WebGLRenderingContext.KEEP),zFail:c(u.zFail,WebGLRenderingContext.KEEP),zPass:c(u.zPass,WebGLRenderingContext.KEEP)}},this.sampleCoverage={enabled:c(v.enabled,!1),value:c(v.value,1),invert:c(v.invert,!1)},this.viewport=d(w)?new a(w.x,w.y,d(w.width)?w.width:e.drawingBufferWidth,d(w.height)?w.height:e.drawingBufferHeight):void 0,this.lineWidth<e.minimumAliasedLineWidth||this.lineWidth>e.maximumAliasedLineWidth)throw new f("renderState.lineWidth is out of range.  Check minimumAliasedLineWidth and maximumAliasedLineWidth.");if(d(this.viewport)){if(this.viewport.width>e.maximumViewportWidth)throw new f("renderState.viewport.width must be less than or equal to the maximum viewport width ("+this.maximumViewportWidth.toString()+").  Check maximumViewportWidth.");if(this.viewport.height>e.maximumViewportHeight)throw new f("renderState.viewport.height must be less than or equal to the maximum viewport height ("+this.maximumViewportHeight.toString()+").  Check maximumViewportHeight.")}this.id=0,this._applyFunctions=[]},x=function(a,b){a.blendColor(b.red,b.green,b.blue,b.alpha)},y=function(a,b){var c=b.sampleCoverage,d=c.enabled;h(a,a.SAMPLE_COVERAGE,d),d&&a.sampleCoverage(c.value,c.invert)},z=new a;return w.apply=function(a,b,c){i(a,b),j(a,b),k(a,b),l(a,b),m(a,b,c),n(a,b),o(a,b),p(a,b),q(a,b),r(a,b),s(a,b,c),t(a,b),y(a,b),u(a,b,c)},w.partialApply=function(a,b,c,e){var f=c._applyFunctions[b.id];d(f)||(f=v(b,c),c._applyFunctions[b.id]=f);for(var g=f.length,h=0;g>h;++h)f[h](a,c,e)},w.clone=function(c){return{frontFace:c.frontFace,cull:{enabled:c.cull.enabled,face:c.cull.face},lineWidth:c.lineWidth,polygonOffset:{enabled:c.polygonOffset.enabled,factor:c.polygonOffset.factor,units:c.polygonOffset.units},scissorTest:{enabled:c.scissorTest.enabled,rectangle:a.clone(c.scissorTest.rectangle)},depthRange:{near:c.depthRange.near,far:c.depthRange.far},depthTest:{enabled:c.depthTest.enabled,func:c.depthTest.func},colorMask:{red:c.colorMask.red,green:c.colorMask.green,blue:c.colorMask.blue,alpha:c.colorMask.alpha},depthMask:c.depthMask,stencilMask:c.stencilMask,blending:{enabled:c.blending.enabled,color:b.clone(c.blending.color),equationRgb:c.blending.equationRgb,equationAlpha:c.blending.equationAlpha,functionSourceRgb:c.blending.functionSourceRgb,functionSourceAlpha:c.blending.functionSourceAlpha,functionDestinationRgb:c.blending.functionDestinationRgb,functionDestinationAlpha:c.blending.functionDestinationAlpha},stencilTest:{enabled:c.stencilTest.enabled,frontFunction:c.stencilTest.frontFunction,backFunction:c.stencilTest.backFunction,reference:c.stencilTest.reference,mask:c.stencilTest.mask,frontOperation:{fail:c.stencilTest.frontOperation.fail,zFail:c.stencilTest.frontOperation.zFail,zPass:c.stencilTest.frontOperation.zPass},backOperation:{fail:c.stencilTest.backOperation.fail,zFail:c.stencilTest.backOperation.zFail,zPass:c.stencilTest.backOperation.zPass}},sampleCoverage:{enabled:c.sampleCoverage.enabled,value:c.sampleCoverage.value,invert:c.sampleCoverage.invert},viewport:d(c.viewport)?a.clone(c.viewport):void 0}},w}),c("Renderer/ShaderProgram",["../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/FeatureDetection","../Core/Matrix2","../Core/Matrix3","../Core/Matrix4","../Core/RuntimeError","./AutomaticUniforms"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(b){var c=b._gl,e=b._location;switch(b._activeUniform.type){case c.FLOAT:return function(){c.uniform1f(e,b.value)};case c.FLOAT_VEC2:return function(){var a=b.value;c.uniform2f(e,a.x,a.y)};case c.FLOAT_VEC3:return function(){var f=b.value;if(a(f.red))c.uniform3f(e,f.red,f.green,f.blue);else{if(!a(f.x))throw new d('Invalid vec3 value for uniform "'+b._activeUniform.name+'".');c.uniform3f(e,f.x,f.y,f.z)}};case c.FLOAT_VEC4:return function(){var f=b.value;if(a(f.red))c.uniform4f(e,f.red,f.green,f.blue,f.alpha);else{if(!a(f.x))throw new d('Invalid vec4 value for uniform "'+b._activeUniform.name+'".');c.uniform4f(e,f.x,f.y,f.z,f.w)}};case c.SAMPLER_2D:case c.SAMPLER_CUBE:return function(){c.activeTexture(c.TEXTURE0+b.textureUnitIndex),c.bindTexture(b.value._target,b.value._texture)};case c.INT:case c.BOOL:return function(){c.uniform1i(e,b.value)};case c.INT_VEC2:case c.BOOL_VEC2:return function(){var a=b.value;c.uniform2i(e,a.x,a.y)};case c.INT_VEC3:case c.BOOL_VEC3:return function(){var a=b.value;c.uniform3i(e,a.x,a.y,a.z)};case c.INT_VEC4:case c.BOOL_VEC4:return function(){var a=b.value;c.uniform4i(e,a.x,a.y,a.z,a.w)};case c.FLOAT_MAT2:return function(){c.uniformMatrix2fv(e,!1,f.toArray(b.value,s))};case c.FLOAT_MAT3:return function(){c.uniformMatrix3fv(e,!1,g.toArray(b.value,t))};case c.FLOAT_MAT4:return function(){c.uniformMatrix4fv(e,!1,h.toArray(b.value,u))};default:throw new i("Unrecognized uniform type: "+b._activeUniform.type+' for uniform "'+b._activeUniform.name+'".')}}function l(b){var c=b._gl,e=b._locations;switch(b._activeUniform.type){case c.FLOAT:return function(){for(var a=b.value,d=a.length,f=0;d>f;++f)c.uniform1f(e[f],a[f])};case c.FLOAT_VEC2:return function(){for(var a=b.value,d=a.length,f=0;d>f;++f){var g=a[f];c.uniform2f(e[f],g.x,g.y)}};case c.FLOAT_VEC3:return function(){for(var f=b.value,g=f.length,h=0;g>h;++h){var i=f[h];if(a(i.red))c.uniform3f(e[h],i.red,i.green,i.blue);else{if(!a(i.x))throw new d("Invalid vec3 value.");c.uniform3f(e[h],i.x,i.y,i.z)}}};case c.FLOAT_VEC4:return function(){for(var f=b.value,g=f.length,h=0;g>h;++h){var i=f[h];if(a(i.red))c.uniform4f(e[h],i.red,i.green,i.blue,i.alpha);else{if(!a(i.x))throw new d("Invalid vec4 value.");c.uniform4f(e[h],i.x,i.y,i.z,i.w)}}};case c.SAMPLER_2D:case c.SAMPLER_CUBE:return function(){for(var a=b.value,d=a.length,e=0;d>e;++e){var f=a[e],g=b.textureUnitIndex+e;c.activeTexture(c.TEXTURE0+g),c.bindTexture(f._target,f._texture)}};case c.INT:case c.BOOL:return function(){for(var a=b.value,d=a.length,f=0;d>f;++f)c.uniform1i(e[f],a[f])};case c.INT_VEC2:case c.BOOL_VEC2:return function(){for(var a=b.value,d=a.length,f=0;d>f;++f){var g=a[f];c.uniform2i(e[f],g.x,g.y)}};case c.INT_VEC3:case c.BOOL_VEC3:return function(){for(var a=b.value,d=a.length,f=0;d>f;++f){var g=a[f];c.uniform3i(e[f],g.x,g.y,g.z)}};case c.INT_VEC4:case c.BOOL_VEC4:return function(){for(var a=b.value,d=a.length,f=0;d>f;++f){var g=a[f];c.uniform4i(e[f],g.x,g.y,g.z,g.w)}};case c.FLOAT_MAT2:return function(){for(var a=b.value,d=a.length,g=0;d>g;++g)c.uniformMatrix2fv(e[g],!1,f.toArray(a[g],s))};case c.FLOAT_MAT3:return function(){for(var a=b.value,d=a.length,f=0;d>f;++f)c.uniformMatrix3fv(e[f],!1,g.toArray(a[f],t))};case c.FLOAT_MAT4:return function(){for(var a=b.value,d=a.length,f=0;d>f;++f)c.uniformMatrix4fv(e[f],!1,h.toArray(a[f],u))};default:throw new i("Unrecognized uniform type: "+b._activeUniform.type)}}function m(a,b,c){a.useProgram(b);for(var d=0,e=c.length,f=0;e>f;++f)d=c[f]._setSampler(d);return a.useProgram(null),d}function n(b,c){var d=c._vertexShaderText,e=c._fragmentShaderText,f=b.createShader(b.VERTEX_SHADER);b.shaderSource(f,d),b.compileShader(f);var g=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(g,e),b.compileShader(g);var h=b.createProgram();b.attachShader(h,f),b.attachShader(h,g),b.deleteShader(f),b.deleteShader(g);var j=c._attributeLocations;if(a(j))for(var k in j)j.hasOwnProperty(k)&&b.bindAttribLocation(h,j[k],k);b.linkProgram(h);var l;if(!b.getProgramParameter(h,b.LINK_STATUS)){var m=c._debugShaders;if(!b.getShaderParameter(g,b.COMPILE_STATUS)){if(l=b.getShaderInfoLog(g),console.error(z+"Fragment shader compile log: "+l),a(m)){var n=m.getTranslatedShaderSource(g);""!==n?console.error(z+"Translated fragment shader source:\n"+n):console.error(z+"Fragment shader translation failed.")}throw b.deleteProgram(h),new i("Fragment shader failed to compile.  Compile log: "+l)}if(!b.getShaderParameter(f,b.COMPILE_STATUS)){if(l=b.getShaderInfoLog(f),console.error(z+"Vertex shader compile log: "+l),a(m)){var o=m.getTranslatedShaderSource(f);""!==o?console.error(z+"Translated vertex shader source:\n"+o):console.error(z+"Vertex shader translation failed.")}throw b.deleteProgram(h),new i("Vertex shader failed to compile.  Compile log: "+l)}throw l=b.getProgramInfoLog(h),console.error(z+"Shader program link log: "+l),a(m)&&(console.error(z+"Translated vertex shader source:\n"+m.getTranslatedShaderSource(f)),console.error(z+"Translated fragment shader source:\n"+m.getTranslatedShaderSource(g))),b.deleteProgram(h),new i("Program failed to link.  Link log: "+l)}var p=c._logShaderCompilation;return p&&(l=b.getShaderInfoLog(f),a(l)&&l.length>0&&console.log(z+"Vertex shader compile log: "+l)),p&&(l=b.getShaderInfoLog(g),a(l)&&l.length>0&&console.log(z+"Fragment shader compile log: "+l)),p&&(l=b.getProgramInfoLog(h),a(l)&&l.length>0&&console.log(z+"Shader program link log: "+l)),h}function o(a,b,c){for(var d={},e=0;c>e;++e){var f=a.getActiveAttrib(b,e),g=a.getAttribLocation(b,f.name);d[f.name]={name:f.name,type:f.type,index:g}}return d}function p(b,c){for(var d={},e=[],f=[],g=b.getProgramParameter(c,b.ACTIVE_UNIFORMS),h=0;g>h;++h){var i=b.getActiveUniform(c,h),j="[0]",k=-1!==i.name.indexOf(j,i.name.length-j.length)?i.name.slice(0,i.name.length-3):i.name;if(0!==k.indexOf("gl_"))if(i.name.indexOf("[")<0){var l=b.getUniformLocation(c,k);if(null!==l){var m=b.getUniform(c,l),n=new v(b,i,k,l,m);d[k]=n,e.push(n),n._setSampler&&f.push(n)}}else{var o,p,q,r,s=k.indexOf("[");if(s>=0){if(o=d[k.slice(0,s)],!a(o))continue;p=o._locations,p.length<=1&&(q=o.value,r=b.getUniformLocation(c,k),null!==r&&(p.push(r),q.push(b.getUniform(c,r))))}else{p=[],q=[];for(var t=0;t<i.size;++t)r=b.getUniformLocation(c,k+"["+t+"]"),null!==r&&(p.push(r),q.push(b.getUniform(c,r)));o=new w(b,i,k,p,q),d[k]=o,e.push(o),o._setSampler&&f.push(o)}}}return{uniformsByName:d,uniforms:e,samplerUniforms:f}}function q(a){var b=[],c={};for(var d in a)if(a.hasOwnProperty(d)){var e=j[d];e?b.push({uniform:a[d],automaticUniform:e}):c[d]=a[d]}return{automaticUniforms:b,manualUniforms:c}}function r(b){if(!a(b._program)){var c=b._gl,d=n(c,b,b._debugShaders),e=c.getProgramParameter(d,c.ACTIVE_ATTRIBUTES),f=p(c,d),g=q(f.uniformsByName);b._program=d,b._numberOfVertexAttributes=e,b._vertexAttributes=o(c,d,e),b._uniformsByName=f.uniformsByName,b._uniforms=f.uniforms,b._automaticUniforms=g.automaticUniforms,b._manualUniforms=g.manualUniforms,b.maximumTextureUnitIndex=m(c,d,f.samplerUniforms)}}var s,t,u;e.supportsTypedArrays()&&(s=new Float32Array(4),t=new Float32Array(9),u=new Float32Array(16));var v=function(a,b,c,d,e){this.value=e,this._gl=a,this._activeUniform=b,this._uniformName=c,this._location=d,this.textureUnitIndex=void 0,this._set=k(this),(b.type===a.SAMPLER_2D||b.type===a.SAMPLER_CUBE)&&(this._setSampler=function(b){return this.textureUnitIndex=b,a.uniform1i(d,b),b+1})};b(v.prototype,{name:{get:function(){return this._uniformName}},datatype:{get:function(){return this._activeUniform.type}}});var w=function(a,b,c,d,e){this._gl=a,this._activeUniform=b,this._uniformName=c,this.value=e,this._locations=d,this.textureUnitIndex=void 0,this._set=l(this),(b.type===a.SAMPLER_2D||b.type===a.SAMPLER_CUBE)&&(this._setSampler=function(b){this.textureUnitIndex=b;for(var c=d.length,e=0;c>e;++e){var f=b+e;a.uniform1i(d[e],f)}return b+c})};b(w.prototype,{name:{get:function(){return this._uniformName}},datatype:{get:function(){return this._activeUniform.type}}});var x=0,y=function(a){this._gl=a.gl,this._logShaderCompilation=a.logShaderCompilation,this._debugShaders=a.debugShaders,this._attributeLocations=a.attributeLocations,this._program=void 0,this._numberOfVertexAttributes=void 0,this._vertexAttributes=void 0,this._uniformsByName=void 0,this._uniforms=void 0,this._automaticUniforms=void 0,this._manualUniforms=void 0,this._cachedShader=void 0,this.maximumTextureUnitIndex=void 0,this._vertexShaderSource=a.vertexShaderSource,this._vertexShaderText=a.vertexShaderText,this._fragmentShaderSource=a.fragmentShaderSource,this._fragmentShaderText=a.fragmentShaderText,this.id=x++};b(y.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},vertexAttributes:{get:function(){return r(this),this._vertexAttributes}},numberOfVertexAttributes:{get:function(){return r(this),this._numberOfVertexAttributes}},allUniforms:{get:function(){return r(this),this._uniformsByName}},manualUniforms:{get:function(){return r(this),this._manualUniforms}}});var z="[Cesium WebGL] ";return y.prototype._bind=function(){r(this),this._gl.useProgram(this._program)},y.prototype._setUniforms=function(a,b,c){var e,f,g=this._uniforms,h=this._manualUniforms,i=this._automaticUniforms;if(a)for(var j in h)h.hasOwnProperty(j)&&(h[j].value=a[j]());for(e=i.length,f=0;e>f;++f)i[f].uniform.value=i[f].automaticUniform.getValue(b);for(e=g.length,f=0;e>f;++f)g[f]._set();if(c){var k=this._gl,l=this._program;if(k.validateProgram(l),!k.getProgramParameter(l,k.VALIDATE_STATUS))throw new d("Program validation failed.  Link log: "+k.getProgramInfoLog(l))}},y.prototype.isDestroyed=function(){return!1},y.prototype.destroy=function(){return this._cachedShader.cache.releaseShaderProgram(this),void 0},y.prototype.finalDestroy=function(){return this._gl.deleteProgram(this._program),c(this)},y}),c("Renderer/ShaderCache",["../Core/defined","../Core/destroyObject","./ShaderProgram","./ShaderSource"],function(a,b,c,d){"use strict";var e=function(a){this._context=a,this._shaders={},this._shadersToRelease={}};return e.prototype.replaceShaderProgram=function(b,c,d,e){return a(b)&&b.destroy(),this.getShaderProgram(c,d,e)},e.prototype.getShaderProgram=function(a,b,e){"string"==typeof a&&(a=new d({sources:[a]})),"string"==typeof b&&(b=new d({sources:[b]}));var f,g=a.createCombinedVertexShader(),h=b.createCombinedFragmentShader(),i=g+h+JSON.stringify(e);if(this._shaders[i])f=this._shaders[i],delete this._shadersToRelease[i];else{var j=this._context,k=new c({gl:j._gl,logShaderCompilation:j.logShaderCompilation,debugShaders:j.debugShaders,vertexShaderSource:a,vertexShaderText:g,fragmentShaderSource:b,fragmentShaderText:h,attributeLocations:e});f={cache:this,shaderProgram:k,keyword:i,count:0},k._cachedShader=f,this._shaders[i]=f}return++f.count,f.shaderProgram},e.prototype.destroyReleasedShaderPrograms=function(){var a=this._shadersToRelease;for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];delete this._shaders[c.keyword],c.shaderProgram.finalDestroy()}this._shadersToRelease={}},e.prototype.releaseShaderProgram=function(a){if(a){var b=a._cachedShader;b&&0===--b.count&&(this._shadersToRelease[b.keyword]=b)}},e.prototype.isDestroyed=function(){return!1},e.prototype.destroy=function(){var a=this._shaders;for(var c in a)a.hasOwnProperty(c)&&a[c].shaderProgram.finalDestroy();return b(this)},e}),c("Renderer/UniformState",["../Core/BoundingRectangle","../Core/Cartesian2","../Core/Cartesian3","../Core/Cartesian4","../Core/Cartographic","../Core/defined","../Core/defineProperties","../Core/EncodedCartesian3","../Core/Math","../Core/Matrix3","../Core/Matrix4","../Core/Simon1994PlanetaryPositions","../Core/Transforms","../Scene/SceneMode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(a,b){k.clone(b,a._view),k.getRotation(b,a._viewRotation),a._view3DDirty=!0,a._inverseView3DDirty=!0,a._modelViewDirty=!0,a._modelView3DDirty=!0,a._modelViewRelativeToEyeDirty=!0,a._inverseModelViewDirty=!0,a._inverseModelView3DDirty=!0,a._viewProjectionDirty=!0,a._modelViewProjectionDirty=!0,a._modelViewProjectionRelativeToEyeDirty=!0,a._modelViewInfiniteProjectionDirty=!0,a._normalDirty=!0,a._inverseNormalDirty=!0,a._normal3DDirty=!0,a._inverseNormal3DDirty=!0}function p(a,b){k.clone(b,a._inverseView),k.getRotation(b,a._inverseViewRotation)}function q(a,b){k.clone(b,a._projection),a._inverseProjectionDirty=!0,a._inverseProjectionOITDirty=!0,a._viewProjectionDirty=!0,a._modelViewProjectionDirty=!0,a._modelViewProjectionRelativeToEyeDirty=!0}function r(a,b){k.clone(b,a._infiniteProjection),a._modelViewInfiniteProjectionDirty=!0}function s(a,b){c.clone(b.positionWC,a._cameraPosition),c.clone(b.directionWC,a._cameraDirection),c.clone(b.rightWC,a._cameraRight),c.clone(b.upWC,a._cameraUp),a._encodedCameraPositionMCDirty=!0}function t(a,b){f(m.computeIcrfToFixedMatrix(b.time,P))||(P=m.computeTemeToPseudoFixedMatrix(b.time,P));var d=l.computeSunPositionInEarthInertialFrame(b.time,a._sunPositionWC);j.multiplyByVector(P,d,d),c.normalize(d,a._sunDirectionWC),d=j.multiplyByVector(a.viewRotation3D,d,a._sunDirectionEC),c.normalize(d,d),d=l.computeMoonPositionInEarthInertialFrame(b.time,a._moonDirectionEC),j.multiplyByVector(P,d,d),j.multiplyByVector(a.viewRotation3D,d,d),c.normalize(d,d);var e=b.mapProjection,g=e.ellipsoid,h=g.cartesianToCartographic(a._sunPositionWC,Q);e.project(h,a._sunPositionColumbusView)}function u(a){if(a._viewportDirty){var b=a._viewport;k.computeOrthographicOffCenter(b.x,b.x+b.width,b.y,b.y+b.height,0,1,a._viewportOrthographicMatrix),k.computeViewportTransformation(b,0,1,a._viewportTransformation),a._viewportDirty=!1}}function v(a){a._inverseProjectionDirty&&(a._inverseProjectionDirty=!1,k.inverse(a._projection,a._inverseProjection))}function w(a){a._inverseProjectionOITDirty&&(a._inverseProjectionOITDirty=!1,a._mode!==n.SCENE2D&&a._mode!==n.MORPHING?k.inverse(a._projection,a._inverseProjectionOIT):k.clone(k.IDENTITY,a._inverseProjectionOIT))}function x(a){a._modelViewDirty&&(a._modelViewDirty=!1,k.multiplyTransformation(a._view,a._model,a._modelView))}function y(a){a._modelView3DDirty&&(a._modelView3DDirty=!1,k.multiplyTransformation(a.view3D,a._model,a._modelView3D))}function z(a){a._inverseModelViewDirty&&(a._inverseModelViewDirty=!1,k.inverse(a.modelView,a._inverseModelView))}function A(a){a._inverseModelView3DDirty&&(a._inverseModelView3DDirty=!1,k.inverse(a.modelView3D,a._inverseModelView3D))}function B(a){a._viewProjectionDirty&&(a._viewProjectionDirty=!1,k.multiply(a._projection,a._view,a._viewProjection))}function C(a){a._inverseViewProjectionDirty&&(a._inverseViewProjectionDirty=!1,k.inverse(a.viewProjection,a._inverseViewProjection))}function D(a){a._modelViewProjectionDirty&&(a._modelViewProjectionDirty=!1,k.multiply(a._projection,a.modelView,a._modelViewProjection))}function E(a){if(a._modelViewRelativeToEyeDirty){a._modelViewRelativeToEyeDirty=!1;var b=a.modelView,c=a._modelViewRelativeToEye;c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[4]=b[4],c[5]=b[5],c[6]=b[6],c[7]=b[7],c[8]=b[8],c[9]=b[9],c[10]=b[10],c[11]=b[11],c[12]=0,c[13]=0,c[14]=0,c[15]=b[15]}}function F(a){a._inverseModelViewProjectionDirty&&(a._inverseModelViewProjectionDirty=!1,k.inverse(a.modelViewProjection,a._inverseModelViewProjection))}function G(a){a._modelViewProjectionRelativeToEyeDirty&&(a._modelViewProjectionRelativeToEyeDirty=!1,k.multiply(a._projection,a.modelViewRelativeToEye,a._modelViewProjectionRelativeToEye))}function H(a){a._modelViewInfiniteProjectionDirty&&(a._modelViewInfiniteProjectionDirty=!1,k.multiply(a._infiniteProjection,a.modelView,a._modelViewInfiniteProjection))}function I(a){if(a._normalDirty){a._normalDirty=!1;var b=a._normal;k.getRotation(a.inverseModelView,b),j.transpose(b,b)}}function J(a){if(a._normal3DDirty){a._normal3DDirty=!1;var b=a._normal3D;k.getRotation(a.inverseModelView3D,b),j.transpose(b,b)}}function K(a){a._inverseNormalDirty&&(a._inverseNormalDirty=!1,k.getRotation(a.inverseModelView,a._inverseNormal))}function L(a){a._inverseNormal3DDirty&&(a._inverseNormal3DDirty=!1,k.getRotation(a.inverseModelView3D,a._inverseNormal3D))}function M(a){a._encodedCameraPositionMCDirty&&(a._encodedCameraPositionMCDirty=!1,k.multiplyByPoint(a.inverseModel,a._cameraPosition,R),h.fromCartesian(R,a._encodedCameraPositionMC))}function N(a,b,d,e,g,h,j,l){var o=S;o.x=a.y,o.y=a.z,o.z=a.x;var p=T;p.x=d.y,p.y=d.z,p.z=d.x;var q=U;q.x=e.y,q.y=e.z,q.z=e.x;var r=V;r.x=b.y,r.y=b.z,r.z=b.x,h===n.SCENE2D&&(o.z=.5*g);var s=j.unproject(o,W);s.longitude=i.clamp(s.longitude,-Math.PI,Math.PI),s.latitude=i.clamp(s.latitude,-i.PI_OVER_TWO,i.PI_OVER_TWO);var t=j.ellipsoid,u=t.cartographicToCartesian(s,X),v=m.eastNorthUpToFixedFrame(u,t,Y);return k.multiplyByPointAsVector(v,p,p),k.multiplyByPointAsVector(v,q,q),k.multiplyByPointAsVector(v,r,r),f(l)||(l=new k),l[0]=p.x,l[1]=q.x,l[2]=-r.x,l[3]=0,l[4]=p.y,l[5]=q.y,l[6]=-r.y,l[7]=0,l[8]=p.z,l[9]=q.z,l[10]=-r.z,l[11]=0,l[12]=-c.dot(p,u),l[13]=-c.dot(q,u),l[14]=c.dot(r,u),l[15]=1,l}var O=function(){this._viewport=new a,this._viewportCartesian4=new d,this._viewportDirty=!1,this._viewportOrthographicMatrix=k.clone(k.IDENTITY),this._viewportTransformation=k.clone(k.IDENTITY),this._model=k.clone(k.IDENTITY),this._view=k.clone(k.IDENTITY),this._inverseView=k.clone(k.IDENTITY),this._projection=k.clone(k.IDENTITY),this._infiniteProjection=k.clone(k.IDENTITY),this._entireFrustum=new b,this._currentFrustum=new b,this._frameState=void 0,this._temeToPseudoFixed=j.clone(k.IDENTITY),this._view3DDirty=!0,this._view3D=new k,this._inverseView3DDirty=!0,this._inverseView3D=new k,this._inverseModelDirty=!0,this._inverseModel=new k,this._inverseTransposeModelDirty=!0,this._inverseTransposeModel=new j,this._viewRotation=new j,this._inverseViewRotation=new j,this._viewRotation3D=new j,this._inverseViewRotation3D=new j,this._inverseProjectionDirty=!0,this._inverseProjection=new k,this._inverseProjectionOITDirty=!0,this._inverseProjectionOIT=new k,this._modelViewDirty=!0,this._modelView=new k,this._modelView3DDirty=!0,this._modelView3D=new k,this._modelViewRelativeToEyeDirty=!0,this._modelViewRelativeToEye=new k,this._inverseModelViewDirty=!0,this._inverseModelView=new k,this._inverseModelView3DDirty=!0,this._inverseModelView3D=new k,this._viewProjectionDirty=!0,this._viewProjection=new k,this._inverseViewProjectionDirty=!0,this._inverseViewProjection=new k,this._modelViewProjectionDirty=!0,this._modelViewProjection=new k,this._inverseModelViewProjectionDirty=!0,this._inverseModelViewProjection=new k,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewProjectionRelativeToEye=new k,this._modelViewInfiniteProjectionDirty=!0,this._modelViewInfiniteProjection=new k,this._normalDirty=!0,this._normal=new j,this._normal3DDirty=!0,this._normal3D=new j,this._inverseNormalDirty=!0,this._inverseNormal=new j,this._inverseNormal3DDirty=!0,this._inverseNormal3D=new j,this._encodedCameraPositionMCDirty=!0,this._encodedCameraPositionMC=new h,this._cameraPosition=new c,this._sunPositionWC=new c,this._sunPositionColumbusView=new c,this._sunDirectionWC=new c,this._sunDirectionEC=new c,this._moonDirectionEC=new c,this._mode=void 0,this._mapProjection=void 0,this._cameraDirection=new c,this._cameraRight=new c,this._cameraUp=new c,this._frustum2DWidth=0,this._eyeHeight2D=new b,this._resolutionScale=1};g(O.prototype,{frameState:{get:function(){return this._frameState}},viewport:{get:function(){return this._viewport},set:function(b){if(!a.equals(b,this._viewport)){a.clone(b,this._viewport);var c=this._viewport,d=this._viewportCartesian4;d.x=c.x,d.y=c.y,d.z=c.width,d.w=c.height,this._viewportDirty=!0}}},viewportCartesian4:{get:function(){return this._viewportCartesian4}},viewportOrthographic:{get:function(){return u(this),this._viewportOrthographicMatrix}},viewportTransformation:{get:function(){return u(this),this._viewportTransformation}},model:{get:function(){return this._model},set:function(a){k.clone(a,this._model),this._modelView3DDirty=!0,this._inverseModelView3DDirty=!0,this._inverseModelDirty=!0,this._inverseTransposeModelDirty=!0,this._modelViewDirty=!0,this._inverseModelViewDirty=!0,this._viewProjectionDirty=!0,this._inverseViewProjectionDirty=!0,this._modelViewRelativeToEyeDirty=!0,this._inverseModelViewDirty=!0,this._modelViewProjectionDirty=!0,this._inverseModelViewProjectionDirty=!0,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewInfiniteProjectionDirty=!0,this._normalDirty=!0,this._inverseNormalDirty=!0,this._normal3DDirty=!0,this._inverseNormal3DDirty=!0,this._encodedCameraPositionMCDirty=!0}},inverseModel:{get:function(){return this._inverseModelDirty&&(this._inverseModelDirty=!1,k.inverse(this._model,this._inverseModel)),this._inverseModel}},inverseTranposeModel:{get:function(){var a=this._inverseTransposeModel;return this._inverseTransposeModelDirty&&(this._inverseTransposeModelDirty=!1,k.getRotation(this.inverseModel,a),j.transpose(a,a)),a}},view:{get:function(){return this._view}},view3D:{get:function(){return this._view3DDirty&&(this._mode===n.SCENE3D?k.clone(this._view,this._view3D):N(this._cameraPosition,this._cameraDirection,this._cameraRight,this._cameraUp,this._frustum2DWidth,this._mode,this._mapProjection,this._view3D),k.getRotation(this._view3D,this._viewRotation3D),this._view3DDirty=!1),this._view3D}},viewRotation:{get:function(){return this._viewRotation}},viewRotation3D:{get:function(){return this.view3D,this._viewRotation3D}},inverseView:{get:function(){return this._inverseView}},inverseView3D:{get:function(){return this._inverseView3DDirty&&(k.inverseTransformation(this.view3D,this._inverseView3D),k.getRotation(this._inverseView3D,this._inverseViewRotation3D),this._inverseView3DDirty=!1),this._inverseView3D}},inverseViewRotation:{get:function(){return this._inverseViewRotation}},inverseViewRotation3D:{get:function(){return this.inverseView3D,this._inverseViewRotation3D}},projection:{get:function(){return this._projection}},inverseProjection:{get:function(){return v(this),this._inverseProjection}},inverseProjectionOIT:{get:function(){return w(this),this._inverseProjectionOIT}},infiniteProjection:{get:function(){return this._infiniteProjection}},modelView:{get:function(){return x(this),this._modelView}},modelView3D:{get:function(){return y(this),this._modelView3D}},modelViewRelativeToEye:{get:function(){return E(this),this._modelViewRelativeToEye}},inverseModelView:{get:function(){return z(this),this._inverseModelView}},inverseModelView3D:{get:function(){return A(this),this._inverseModelView3D}},viewProjection:{get:function(){return B(this),this._viewProjection}},inverseViewProjection:{get:function(){return C(this),this._inverseViewProjection}},modelViewProjection:{get:function(){return D(this),this._modelViewProjection}},inverseModelViewProjection:{get:function(){return F(this),this._inverseModelViewProjection}},modelViewProjectionRelativeToEye:{get:function(){return G(this),this._modelViewProjectionRelativeToEye}},modelViewInfiniteProjection:{get:function(){return H(this),this._modelViewInfiniteProjection}},normal:{get:function(){return I(this),this._normal}},normal3D:{get:function(){return J(this),this._normal3D}},inverseNormal:{get:function(){return K(this),this._inverseNormal}},
inverseNormal3D:{get:function(){return L(this),this._inverseNormal3D}},entireFrustum:{get:function(){return this._entireFrustum}},currentFrustum:{get:function(){return this._currentFrustum}},eyeHeight2D:{get:function(){return this._eyeHeight2D}},sunPositionWC:{get:function(){return this._sunPositionWC}},sunPositionColumbusView:{get:function(){return this._sunPositionColumbusView}},sunDirectionWC:{get:function(){return this._sunDirectionWC}},sunDirectionEC:{get:function(){return this._sunDirectionEC}},moonDirectionEC:{get:function(){return this._moonDirectionEC}},encodedCameraPositionMCHigh:{get:function(){return M(this),this._encodedCameraPositionMC.high}},encodedCameraPositionMCLow:{get:function(){return M(this),this._encodedCameraPositionMC.low}},temeToPseudoFixedMatrix:{get:function(){return this._temeToPseudoFixed}},resolutionScale:{get:function(){return this._resolutionScale}}});var P=new j,Q=new e;O.prototype.updateFrustum=function(a){q(this,a.projectionMatrix),f(a.infiniteProjectionMatrix)&&r(this,a.infiniteProjectionMatrix),this._currentFrustum.x=a.near,this._currentFrustum.y=a.far},O.prototype.update=function(a,b){this._mode=b.mode,this._mapProjection=b.mapProjection;var c=a._canvas;this._resolutionScale=c.width/c.clientWidth;var d=b.camera;o(this,d.viewMatrix),p(this,d.inverseViewMatrix),s(this,d),b.mode===n.SCENE2D?(this._frustum2DWidth=d.frustum.right-d.frustum.left,this._eyeHeight2D.x=.5*this._frustum2DWidth,this._eyeHeight2D.y=this._eyeHeight2D.x*this._eyeHeight2D.x):(this._frustum2DWidth=0,this._eyeHeight2D.x=0,this._eyeHeight2D.y=0),t(this,b),this._entireFrustum.x=d.frustum.near,this._entireFrustum.y=d.frustum.far,this.updateFrustum(d.frustum),this._frameState=b,this._temeToPseudoFixed=m.computeTemeToPseudoFixedMatrix(b.time,this._temeToPseudoFixed)};var R=new c,S=new c,T=new c,U=new c,V=new c,W=new e,X=new c,Y=new k;return O}),c("Renderer/VertexArray",["../Core/ComponentDatatype","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError"],function(a,b,c,d,e,f){"use strict";function g(d,e,f){var g=c(e.vertexBuffer),h=c(e.value),i=e.value?e.value.length:e.componentsPerAttribute,j={index:b(e.index,f),enabled:b(e.enabled,!0),vertexBuffer:e.vertexBuffer,value:h?e.value.slice(0):void 0,componentsPerAttribute:i,componentDatatype:b(e.componentDatatype,a.FLOAT),normalize:b(e.normalize,!1),offsetInBytes:b(e.offsetInBytes,0),strideInBytes:b(e.strideInBytes,0)};if(g)j.vertexAttrib=function(a){a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer._getBuffer()),a.vertexAttribPointer(this.index,this.componentsPerAttribute,this.componentDatatype,this.normalize,this.strideInBytes,this.offsetInBytes),a.enableVertexAttribArray(this.index)},j.disableVertexAttribArray=function(a){a.disableVertexAttribArray(this.index)};else{switch(j.componentsPerAttribute){case 1:j.vertexAttrib=function(a){a.vertexAttrib1fv(this.index,this.value)};break;case 2:j.vertexAttrib=function(a){a.vertexAttrib2fv(this.index,this.value)};break;case 3:j.vertexAttrib=function(a){a.vertexAttrib3fv(this.index,this.value)};break;case 4:j.vertexAttrib=function(a){a.vertexAttrib4fv(this.index,this.value)}}j.disableVertexAttribArray=function(){}}d.push(j)}function h(a,b,d){for(var e=0;e<b.length;++e){var f=b[e];f.enabled&&f.vertexAttrib(a)}c(d)&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d._getBuffer())}var i=function(b,d,e,i){var j,k=[],l=1;for(j=0;j<e.length;++j)g(k,e[j],j);for(j=0;j<k.length;++j){var m=k[j];if(c(m.vertexBuffer)){var n=m.strideInBytes||m.componentsPerAttribute*a.getSizeInBytes(m.componentDatatype);l=m.vertexBuffer.sizeInBytes/n;break}}for(var o={},p=0;p<k.length;++p){var q=k[p].index;if(o[q])throw new f("Index "+q+" is used by more than one attribute.");o[q]=!0}var r;c(d)&&(r=d.createVertexArrayOES(),d.bindVertexArrayOES(r),h(b,k,i),d.bindVertexArrayOES(null)),this._numberOfVertices=l,this._gl=b,this._vaoExtension=d,this._vao=r,this._attributes=k,this._indexBuffer=i};return d(i.prototype,{numberOfAttributes:{get:function(){return this._attributes.length}},numberOfVertices:{get:function(){return this._numberOfVertices}},indexBuffer:{get:function(){return this._indexBuffer}}}),i.prototype.getAttribute=function(a){return this._attributes[a]},i.prototype._bind=function(){c(this._vao)?this._vaoExtension.bindVertexArrayOES(this._vao):h(this._gl,this._attributes,this._indexBuffer)},i.prototype._unBind=function(){if(c(this._vao))this._vaoExtension.bindVertexArrayOES(null);else{for(var a=this._attributes,b=this._gl,d=0;d<a.length;++d){var e=a[d];e.enabled&&e.disableVertexAttribArray(b)}this._indexBuffer&&b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null)}},i.prototype.isDestroyed=function(){return!1},i.prototype.destroy=function(){for(var a=this._attributes,b=0;b<a.length;++b){var d=a[b].vertexBuffer;c(d)&&!d.isDestroyed()&&d.vertexArrayDestroyable&&d.destroy()}var f=this._indexBuffer;return c(f)&&!f.isDestroyed()&&f.vertexArrayDestroyable&&f.destroy(),c(this._vao)&&this._vaoExtension.deleteVertexArrayOES(this._vao),e(this)},i}),c("Renderer/Context",["../Core/clone","../Core/Color","../Core/ComponentDatatype","../Core/createGuid","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Geometry","../Core/GeometryAttribute","../Core/IndexDatatype","../Core/Math","../Core/Matrix4","../Core/PixelFormat","../Core/PrimitiveType","../Core/RuntimeError","../Shaders/ViewportQuadVS","./Buffer","./BufferUsage","./ClearCommand","./CubeMap","./DrawCommand","./Framebuffer","./PassState","./PickFramebuffer","./PixelDatatype","./Renderbuffer","./RenderbufferFormat","./RenderState","./ShaderCache","./Texture","./TextureMagnificationFilter","./TextureMinificationFilter","./TextureWrap","./UniformState","./VertexArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K){"use strict";function L(a,b){var c="WebGL Error:  ";switch(b){case a.INVALID_ENUM:c+="INVALID_ENUM";break;case a.INVALID_VALUE:c+="INVALID_VALUE";break;case a.INVALID_OPERATION:c+="INVALID_OPERATION";break;case a.OUT_OF_MEMORY:c+="OUT_OF_MEMORY";break;case a.CONTEXT_LOST_WEBGL:c+="CONTEXT_LOST_WEBGL lost";break;default:c+="Unknown ("+b+")"}return c}function M(a,b,c,d){for(var e=L(a,d)+": "+b.name+"(",f=0;f<c.length;++f)0!==f&&(e+=", "),e+=c[f];return e+=");"}function N(a,b,c){var d=a.getError();if(d!==a.NO_ERROR)throw new q(M(a,b,c,d))}function O(a,b,c){return{get:function(){var d=a[b];return c(a,"get: "+b,d),a[b]},set:function(d){a[b]=d,c(a,"set: "+b,d)}}}function P(a,b){function c(c){return function(){var d=c.apply(a,arguments);return b(a,c,arguments),d}}if(!b)return a;var d={};for(var e in a){var f=a[e];"function"==typeof f?d[e]=c(f):Object.defineProperty(d,e,O(a,e,b))}return d}function Q(a,b){for(var c=b.length,d=0;c>d;++d){var e=a.getExtension(b[d]);if(e)return e}return void 0}function R(a,b,c,d){var e;"number"==typeof c?e=c:"object"==typeof c&&"number"==typeof c.byteLength&&(e=c.byteLength);var f=a.createBuffer();return a.bindBuffer(b,f),a.bufferData(b,c,d),a.bindBuffer(b,null),new s(a,b,e,d,f)}function S(a){if(a.validateFramebuffer){var b=a._gl,c=b.checkFramebufferStatus(b.FRAMEBUFFER);if(c!==b.FRAMEBUFFER_COMPLETE){var d;switch(c){case b.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:d="Framebuffer is not complete.  Incomplete attachment: at least one attachment point with a renderbuffer or texture attached has its attached object no longer in existence or has an attached image with a width or height of zero, or the color attachment point has a non-color-renderable image attached, or the depth attachment point has a non-depth-renderable image attached, or the stencil attachment point has a non-stencil-renderable image attached.  Color-renderable formats include GL_RGBA4, GL_RGB5_A1, and GL_RGB565. GL_DEPTH_COMPONENT16 is the only depth-renderable format. GL_STENCIL_INDEX8 is the only stencil-renderable format.";break;case b.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:d="Framebuffer is not complete.  Incomplete dimensions: not all attached images have the same width and height.";break;case b.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:d="Framebuffer is not complete.  Missing attachment: no images are attached to the framebuffer.";break;case b.FRAMEBUFFER_UNSUPPORTED:d="Framebuffer is not complete.  Unsupported: the combination of internal formats of the attached images violates an implementation-dependent set of restrictions."}throw new i(d)}}}function T(a,b,c){var d=a._currentRenderState;d!==b&&(a._currentRenderState=b,D.partialApply(a._gl,d,b,c))}function U(a,b){if(b!==a._currentFramebuffer){a._currentFramebuffer=b;var c=da;if(f(b))b._bind(),S(a,b),c=b._getActiveColorAttachments();else{var d=a._gl;d.bindFramebuffer(d.FRAMEBUFFER,null)}a.drawBuffers&&a._drawBuffers.drawBuffersWEBGL(c)}}function V(a,b,c,d,f,g){var h=e(e(f,c.renderState),a._defaultRenderState);U(a,b);var i=e(g,c.shaderProgram);i._bind(),a._maxFrameTextureUnitIndex=Math.max(a._maxFrameTextureUnitIndex,i.maximumTextureUnitIndex),T(a,h,d)}function W(a,b,c){var d=b.primitiveType,g=b.vertexArray,h=b.offset,i=b.count;a._us.model=e(b.modelMatrix,n.IDENTITY);var j=e(c,b.shaderProgram);j._setUniforms(b.uniformMap,a._us,a.validateShaderProgram);var k=g.indexBuffer;f(k)?(h*=k.bytesPerIndex,i=e(i,k.numberOfIndices),g._bind(),a._gl.drawElements(d,i,k.indexDatatype,h),g._unBind()):(i=e(i,g.numberOfVertices),g._bind(),a._gl.drawArrays(d,h,i),g._unBind())}function X(a){return a.values.length/a.componentsPerAttribute}function Y(a){return c.getSizeInBytes(a.componentDatatype)*a.componentsPerAttribute}function Z(a){var b,d,e,g=[];for(d in a)a.hasOwnProperty(d)&&f(a[d])&&f(a[d].values)&&(g.push(d),a[d].componentDatatype===c.DOUBLE&&(a[d].componentDatatype=c.FLOAT,a[d].values=c.createTypedArray(c.FLOAT,a[d].values)));var h,i=g.length;if(i>0)for(h=X(a[g[0]]),b=1;i>b;++b){var j=X(a[g[b]]);if(j!==h)throw new q("Each attribute list must have the same number of vertices.  Attribute "+g[b]+" has a different number of vertices "+"("+j.toString()+")"+" than attribute "+g[0]+" ("+h.toString()+").")}g.sort(function(b,d){return c.getSizeInBytes(a[d].componentDatatype)-c.getSizeInBytes(a[b].componentDatatype)});var k=0,l={};for(b=0;i>b;++b)d=g[b],e=a[d],l[d]=k,k+=Y(e);if(k>0){var m=c.getSizeInBytes(a[g[0]].componentDatatype),n=k%m;0!==n&&(k+=m-n);var o=h*k,p=new ArrayBuffer(o),r={};for(b=0;i>b;++b){d=g[b];var s=c.getSizeInBytes(a[d].componentDatatype);r[d]={pointer:c.createTypedArray(a[d].componentDatatype,p),index:l[d]/s,strideInComponentType:k/s}}for(b=0;h>b;++b)for(var t=0;i>t;++t){d=g[t],e=a[d];for(var u=e.values,v=r[d],w=v.pointer,x=e.componentsPerAttribute,y=0;x>y;++y)w[v.index+y]=u[b*x+y];v.index+=v.strideInComponentType}return{buffer:p,offsetsInBytes:l,vertexSizeInBytes:k}}return void 0}function $(a,b,c){this._pickObjects=a,this.key=b,this.color=c}var _=function(c,g){if("undefined"==typeof WebGLRenderingContext)throw new q("The browser does not support WebGL.  Visit http://get.webgl.org.");this._canvas=c,g=a(g,!0),g=e(g,{}),g.allowTextureFilterAnisotropic=e(g.allowTextureFilterAnisotropic,!0);var h=e(g.webgl,{});if(h.alpha=e(h.alpha,!1),h.stencil=e(h.stencil,!1),h.failIfMajorPerformanceCaveat=e(h.failIfMajorPerformanceCaveat,!0),this._originalGLContext=c.getContext("webgl",h)||c.getContext("experimental-webgl",h)||void 0,!f(this._originalGLContext))throw new q("The browser supports WebGL, but initialization failed.");this._id=d(),this.validateFramebuffer=!1,this.validateShaderProgram=!1,this.logShaderCompilation=!1,this._throwOnWebGLError=!1,this._shaderCache=new E(this);var i=this._gl=this._originalGLContext;this._version=i.getParameter(i.VERSION),this._shadingLanguageVersion=i.getParameter(i.SHADING_LANGUAGE_VERSION),this._vendor=i.getParameter(i.VENDOR),this._renderer=i.getParameter(i.RENDERER),this._redBits=i.getParameter(i.RED_BITS),this._greenBits=i.getParameter(i.GREEN_BITS),this._blueBits=i.getParameter(i.BLUE_BITS),this._alphaBits=i.getParameter(i.ALPHA_BITS),this._depthBits=i.getParameter(i.DEPTH_BITS),this._stencilBits=i.getParameter(i.STENCIL_BITS),this._maximumCombinedTextureImageUnits=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this._maximumCubeMapSize=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),this._maximumFragmentUniformVectors=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),this._maximumTextureImageUnits=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),this._maximumRenderbufferSize=i.getParameter(i.MAX_RENDERBUFFER_SIZE),this._maximumTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),this._maximumVaryingVectors=i.getParameter(i.MAX_VARYING_VECTORS),this._maximumVertexAttributes=i.getParameter(i.MAX_VERTEX_ATTRIBS),this._maximumVertexTextureImageUnits=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this._maximumVertexUniformVectors=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),this._aliasedLineWidthRange=i.getParameter(i.ALIASED_LINE_WIDTH_RANGE),this._aliasedPointSizeRange=i.getParameter(i.ALIASED_POINT_SIZE_RANGE),this._maximumViewportDimensions=i.getParameter(i.MAX_VIEWPORT_DIMS),this._antialias=i.getContextAttributes().antialias,this._standardDerivatives=Q(i,["OES_standard_derivatives"]),this._elementIndexUint=Q(i,["OES_element_index_uint"]),this._depthTexture=Q(i,["WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),this._textureFloat=Q(i,["OES_texture_float"]);var j=g.allowTextureFilterAnisotropic?Q(i,["EXT_texture_filter_anisotropic","WEBKIT_EXT_texture_filter_anisotropic"]):void 0;this._textureFilterAnisotropic=j,this._maximumTextureFilterAnisotropy=f(j)?i.getParameter(j.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1,this._vertexArrayObject=Q(i,["OES_vertex_array_object"]),this._fragDepth=Q(i,["EXT_frag_depth"]),this._drawBuffers=Q(i,["WEBGL_draw_buffers"]),this._maximumDrawBuffers=f(this._drawBuffers)?i.getParameter(this._drawBuffers.MAX_DRAW_BUFFERS_WEBGL):1,this._maximumColorAttachments=f(this._drawBuffers)?i.getParameter(this._drawBuffers.MAX_COLOR_ATTACHMENTS_WEBGL):1,this._debugShaders=Q(i,["WEBGL_debug_shaders"]);var k=i.getParameter(i.COLOR_CLEAR_VALUE);this._clearColor=new b(k[0],k[1],k[2],k[3]),this._clearDepth=i.getParameter(i.DEPTH_CLEAR_VALUE),this._clearStencil=i.getParameter(i.STENCIL_CLEAR_VALUE);var l=new J,m=new y(this),n=this.createRenderState();this._defaultPassState=m,this._defaultRenderState=n,this._defaultTexture=void 0,this._defaultCubeMap=void 0,this._us=l,this._currentRenderState=n,this._currentFramebuffer=void 0,this._maxFrameTextureUnitIndex=0,this._pickObjects={},this._nextPickColor=new Uint32Array(1),this.options=g,this.cache={},D.apply(i,n,m)},aa={};g(_.prototype,{id:{get:function(){return this._id}},canvas:{get:function(){return this._canvas}},shaderCache:{get:function(){return this._shaderCache}},uniformState:{get:function(){return this._us}},version:{get:function(){return this._version}},shadingLanguageVersion:{get:function(){return this._shadingLanguageVersion}},vendor:{get:function(){return this._vendor}},renderer:{get:function(){return this._renderer}},redBits:{get:function(){return this._redBits}},greenBits:{get:function(){return this._greenBits}},blueBits:{get:function(){return this._blueBits}},alphaBits:{get:function(){return this._alphaBits}},depthBits:{get:function(){return this._depthBits}},stencilBits:{get:function(){return this._stencilBits}},maximumCombinedTextureImageUnits:{get:function(){return this._maximumCombinedTextureImageUnits}},maximumCubeMapSize:{get:function(){return this._maximumCubeMapSize}},maximumFragmentUniformVectors:{get:function(){return this._maximumFragmentUniformVectors}},maximumTextureImageUnits:{get:function(){return this._maximumTextureImageUnits}},maximumRenderbufferSize:{get:function(){return this._maximumRenderbufferSize}},maximumTextureSize:{get:function(){return this._maximumTextureSize}},maximumVaryingVectors:{get:function(){return this._maximumVaryingVectors}},maximumVertexAttributes:{get:function(){return this._maximumVertexAttributes}},maximumVertexTextureImageUnits:{get:function(){return this._maximumVertexTextureImageUnits}},maximumVertexUniformVectors:{get:function(){return this._maximumVertexUniformVectors}},minimumAliasedLineWidth:{get:function(){return this._aliasedLineWidthRange[0]}},maximumAliasedLineWidth:{get:function(){return this._aliasedLineWidthRange[1]}},minimumAliasedPointSize:{get:function(){return this._aliasedPointSizeRange[0]}},maximumAliasedPointSize:{get:function(){return this._aliasedPointSizeRange[1]}},maximumViewportWidth:{get:function(){return this._maximumViewportDimensions[0]}},maximumViewportHeight:{get:function(){return this._maximumViewportDimensions[1]}},antialias:{get:function(){return this._antialias}},standardDerivatives:{get:function(){return!!this._standardDerivatives}},elementIndexUint:{get:function(){return!!this._elementIndexUint}},depthTexture:{get:function(){return!!this._depthTexture}},floatingPointTexture:{get:function(){return!!this._textureFloat}},textureFilterAnisotropic:{get:function(){return!!this._textureFilterAnisotropic}},maximumTextureFilterAnisotropy:{get:function(){return this._maximumTextureFilterAnisotropy}},vertexArrayObject:{get:function(){return!!this._vertexArrayObject}},fragmentDepth:{get:function(){return!!this._fragDepth}},drawBuffers:{get:function(){return!!this._drawBuffers}},maximumDrawBuffers:{get:function(){return this._maximumDrawBuffers}},maximumColorAttachments:{get:function(){return this._maximumColorAttachments}},debugShaders:{get:function(){return this._debugShaders}},throwOnWebGLError:{get:function(){return this._throwOnWebGLError},set:function(a){this._throwOnWebGLError=a,this._gl=P(this._originalGLContext,a?N:null)}},defaultTexture:{get:function(){return void 0===this._defaultTexture&&(this._defaultTexture=this.createTexture2D({source:{width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])}})),this._defaultTexture}},defaultCubeMap:{get:function(){if(void 0===this._defaultCubeMap){var a={width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])};this._defaultCubeMap=this.createCubeMap({source:{positiveX:a,negativeX:a,positiveY:a,negativeY:a,positiveZ:a,negativeZ:a}})}return this._defaultCubeMap}},drawingBufferHeight:{get:function(){return this._gl.drawingBufferHeight}},drawingBufferWidth:{get:function(){return this._gl.drawingBufferWidth}},defaultFramebuffer:{get:function(){return aa}}}),_.prototype.replaceShaderProgram=function(a,b,c,d){return this._shaderCache.replaceShaderProgram(a,b,c,d)},_.prototype.createShaderProgram=function(a,b,c){return this._shaderCache.getShaderProgram(a,b,c)},_.prototype.createVertexBuffer=function(a,b){return R(this._gl,this._gl.ARRAY_BUFFER,a,b)},_.prototype.createIndexBuffer=function(a,b,c){if(c===l.UNSIGNED_INT&&!this.elementIndexUint)throw new i("IndexDatatype.UNSIGNED_INT requires OES_element_index_uint, which is not supported on this system.  Check context.elementIndexUint.");var d=l.getSizeInBytes(c),e=this._gl,f=R(e,e.ELEMENT_ARRAY_BUFFER,a,b),h=f.sizeInBytes/d;return g(f,{indexDatatype:{get:function(){return c}},bytesPerIndex:{get:function(){return d}},numberOfIndices:{get:function(){return h}}}),f},_.prototype.createVertexArray=function(a,b){return new K(this._gl,this._vertexArrayObject,a,b)},_.prototype.createTexture2D=function(a){return new F(this,a)},_.prototype.createTexture2DFromFramebuffer=function(a,b,c,d,g,h){var i=this._gl;a=e(a,o.RGB),b=e(b,0),c=e(c,0),d=e(d,i.drawingBufferWidth),g=e(g,i.drawingBufferHeight);var j=new F(this,{width:d,height:g,pixelFormat:a,source:{framebuffer:f(h)?h:this.defaultFramebuffer,xOffset:b,yOffset:c,width:d,height:g}});return j},_.prototype.createCubeMap=function(a){function b(a,b){b.arrayBufferView?p.texImage2D(a,0,k,j,j,0,k,l,b.arrayBufferView):p.texImage2D(a,0,k,k,l,b)}a=e(a,e.EMPTY_OBJECT);var c,d,g=a.source;if(f(g)){var h=[g.positiveX,g.negativeX,g.positiveY,g.negativeY,g.positiveZ,g.negativeZ];c=h[0].width,d=h[0].height}else c=a.width,d=a.height;var j=c,k=e(a.pixelFormat,o.RGBA),l=e(a.pixelDatatype,A.UNSIGNED_BYTE);if(l===A.FLOAT&&!this.floatingPointTexture)throw new i("When options.pixelDatatype is FLOAT, this WebGL implementation must support the OES_texture_float extension.");var m=a.preMultiplyAlpha||k===o.RGB||k===o.LUMINANCE,n=e(a.flipY,!0),p=this._gl,q=p.TEXTURE_CUBE_MAP,r=p.createTexture();return p.activeTexture(p.TEXTURE0),p.bindTexture(q,r),f(g)?(p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,m),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,n),b(p.TEXTURE_CUBE_MAP_POSITIVE_X,g.positiveX),b(p.TEXTURE_CUBE_MAP_NEGATIVE_X,g.negativeX),b(p.TEXTURE_CUBE_MAP_POSITIVE_Y,g.positiveY),b(p.TEXTURE_CUBE_MAP_NEGATIVE_Y,g.negativeY),b(p.TEXTURE_CUBE_MAP_POSITIVE_Z,g.positiveZ),b(p.TEXTURE_CUBE_MAP_NEGATIVE_Z,g.negativeZ)):(p.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X,0,k,j,j,0,k,l,null),p.texImage2D(p.TEXTURE_CUBE_MAP_NEGATIVE_X,0,k,j,j,0,k,l,null),p.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_Y,0,k,j,j,0,k,l,null),p.texImage2D(p.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,k,j,j,0,k,l,null),p.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_Z,0,k,j,j,0,k,l,null),p.texImage2D(p.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,k,j,j,0,k,l,null)),p.bindTexture(q,null),new v(p,this._textureFilterAnisotropic,q,r,k,l,j,m,n)},_.prototype.createFramebuffer=function(a){return new x(this._gl,this._maximumColorAttachments,a)},_.prototype.createRenderbuffer=function(a){var b=this._gl;a=e(a,e.EMPTY_OBJECT);var c=e(a.format,C.RGBA4),d=f(a.width)?a.width:b.drawingBufferWidth,g=f(a.height)?a.height:b.drawingBufferHeight;return new B(b,c,d,g)};var ba=0,ca={};_.prototype.createRenderState=function(a){var b=JSON.stringify(a),c=ca[b];if(f(c))return c;var d=new D(this,a),e=JSON.stringify(d);return c=ca[e],f(c)||(d.id=ba++,c=d,ca[e]=c),ca[b]=c,c},_.prototype.createSampler=function(a){var b={wrapS:e(a.wrapS,I.CLAMP_TO_EDGE),wrapT:e(a.wrapT,I.CLAMP_TO_EDGE),minificationFilter:e(a.minificationFilter,H.LINEAR),magnificationFilter:e(a.magnificationFilter,G.LINEAR),maximumAnisotropy:f(a.maximumAnisotropy)?a.maximumAnisotropy:1};return b};var da;"undefined"!=typeof WebGLRenderingContext&&(da=[WebGLRenderingContext.BACK]);var ea=new u;_.prototype.clear=function(a,c){a=e(a,ea),c=e(c,this._defaultPassState);var d=this._gl,g=0,h=a.color,i=a.depth,j=a.stencil;f(h)&&(b.equals(this._clearColor,h)||(b.clone(h,this._clearColor),d.clearColor(h.red,h.green,h.blue,h.alpha)),g|=d.COLOR_BUFFER_BIT),f(i)&&(i!==this._clearDepth&&(this._clearDepth=i,d.clearDepth(i)),g|=d.DEPTH_BUFFER_BIT),f(j)&&(j!==this._clearStencil&&(this._clearStencil=j,d.clearStencil(j)),g|=d.STENCIL_BUFFER_BIT);var k=e(a.renderState,this._defaultRenderState);T(this,k,c);var l=e(a.framebuffer,c.framebuffer);U(this,l),d.clear(g)},_.prototype.draw=function(a,b,c,d){b=e(b,this._defaultPassState);var f=e(a.framebuffer,b.framebuffer);V(this,f,a,b,c,d),W(this,a,d)},_.prototype.endFrame=function(){var a=this._gl;a.useProgram(null),this._currentFramebuffer=void 0,a.bindFramebuffer(a.FRAMEBUFFER,null),this.drawBuffers&&this._drawBuffers.drawBuffersWEBGL(da);var b=this._maxFrameTextureUnitIndex;this._maxFrameTextureUnitIndex=0;for(var c=0;b>c;++c)a.activeTexture(a.TEXTURE0+c),a.bindTexture(a.TEXTURE_2D,null),a.bindTexture(a.TEXTURE_CUBE_MAP,null)},_.prototype.readPixels=function(a){var b=this._gl;a=a||{};var c=Math.max(a.x||0,0),d=Math.max(a.y||0,0),e=a.width||b.drawingBufferWidth,f=a.height||b.drawingBufferHeight,g=a.framebuffer,h=new Uint8Array(4*e*f);return U(this,g),b.readPixels(c,d,e,f,b.RGBA,b.UNSIGNED_BYTE,h),h},_.prototype.createVertexArrayFromGeometry=function(a){a=e(a,e.EMPTY_OBJECT);var b,d,g,h=e(a.geometry,e.EMPTY_OBJECT),i=e(a.bufferUsage,t.DYNAMIC_DRAW),k=e(a.attributeLocations,e.EMPTY_OBJECT),n=e(a.interleave,!1),o=a.vertexArrayAttributes,p=f(o)?o:[],q=h.attributes;if(n){var r=Z(q);if(f(r)){g=this.createVertexBuffer(r.buffer,i);var s=r.offsetsInBytes,u=r.vertexSizeInBytes;for(b in q)q.hasOwnProperty(b)&&f(q[b])&&(d=q[b],f(d.values)?p.push({index:k[b],vertexBuffer:g,componentDatatype:d.componentDatatype,componentsPerAttribute:d.componentsPerAttribute,normalize:d.normalize,offsetInBytes:s[b],strideInBytes:u}):p.push({index:k[b],value:d.value,componentDatatype:d.componentDatatype,normalize:d.normalize}))}}else for(b in q)if(q.hasOwnProperty(b)&&f(q[b])){d=q[b];var v=d.componentDatatype;v===c.DOUBLE&&(v=c.FLOAT),g=void 0,f(d.values)&&(g=this.createVertexBuffer(c.createTypedArray(v,d.values),i)),p.push({index:k[b],vertexBuffer:g,value:d.value,componentDatatype:v,componentsPerAttribute:d.componentsPerAttribute,normalize:d.normalize})}var w,x=h.indices;return f(x)&&(w=j.computeNumberOfVertices(h)>m.SIXTY_FOUR_KILOBYTES&&this.elementIndexUint?this.createIndexBuffer(new Uint32Array(x),i,l.UNSIGNED_INT):this.createIndexBuffer(new Uint16Array(x),i,l.UNSIGNED_SHORT)),this.createVertexArray(p,w)};var fa={position:0,textureCoordinates:1};return _.prototype.createViewportQuadCommand=function(a,b){var d=this.cache.viewportQuad_vertexArray;if(!f(d)){var g=new j({attributes:{position:new k({componentDatatype:c.FLOAT,componentsPerAttribute:2,values:[-1,-1,1,-1,1,1,-1,1]}),textureCoordinates:new k({componentDatatype:c.FLOAT,componentsPerAttribute:2,values:[0,0,1,0,1,1,0,1]})},indices:new Uint16Array([0,1,2,0,2,3]),primitiveType:p.TRIANGLES});d=this.createVertexArrayFromGeometry({geometry:g,attributeLocations:{position:0,textureCoordinates:1},bufferUsage:t.STATIC_DRAW,interleave:!0}),this.cache.viewportQuad_vertexArray=d}return b=e(b,e.EMPTY_OBJECT),new w({vertexArray:d,primitiveType:p.TRIANGLES,renderState:b.renderState,shaderProgram:this.createShaderProgram(r,a,fa),uniformMap:b.uniformMap,owner:b.owner,framebuffer:b.framebuffer})},_.prototype.createPickFramebuffer=function(){return new z(this)},_.prototype.getObjectByPickColor=function(a){return this._pickObjects[a.toRgba()]},g($.prototype,{object:{get:function(){return this._pickObjects[this.key]},set:function(a){this._pickObjects[this.key]=a}}}),$.prototype.destroy=function(){return delete this._pickObjects[this.key],void 0},_.prototype.createPickId=function(a){++this._nextPickColor[0];var c=this._nextPickColor[0];if(0===c)throw new q("Out of unique Pick IDs.");return this._pickObjects[c]=a,new $(this._pickObjects,c,b.fromRgba(c))},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){var a=this.cache;for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];f(c.destroy)&&c.destroy()}return this._shaderCache=this._shaderCache.destroy(),this._defaultTexture=this._defaultTexture&&this._defaultTexture.destroy(),this._defaultCubeMap=this._defaultCubeMap&&this._defaultCubeMap.destroy(),h(this)},_}),c("Renderer/loadCubeMap",["../Core/defined","../Core/DeveloperError","../Core/loadImage","../ThirdParty/when"],function(a,b,c,d){"use strict";var e=function(a,b,e){var f=[c(b.positiveX,e),c(b.negativeX,e),c(b.positiveY,e),c(b.negativeY,e),c(b.positiveZ,e),c(b.negativeZ,e)];return d.all(f,function(b){return a.createCubeMap({source:{positiveX:b[0],negativeX:b[1],positiveY:b[2],negativeY:b[3],positiveZ:b[4],negativeZ:b[5]}})})};return e}),c("Scene/DiscardMissingTileImagePolicy",["../Core/defaultValue","../Core/defined","../Core/DeveloperError","../Core/getImagePixels","../Core/loadImageViaBlob","../ThirdParty/when"],function(a,b,c,d,e,f){"use strict";var g=function(g){function h(a){b(a.blob)&&(j._missingImageByteLength=a.blob.size);var c=d(a);if(g.disableCheckIfAllPixelsAreTransparent){for(var e=!0,f=a.width,h=g.pixelsToCheck,i=0,k=h.length;e&&k>i;++i){var l=h[i],m=4*l.x+l.y*f,n=c[m+3];n>0&&(e=!1)}e&&(c=void 0)}j._missingImagePixels=c,j._isReady=!0}function i(){j._missingImagePixels=void 0,j._isReady=!0}if(g=a(g,a.EMPTY_OBJECT),!b(g.missingImageUrl))throw new c("options.missingImageUrl is required.");if(!b(g.pixelsToCheck))throw new c("options.pixelsToCheck is required.");this._pixelsToCheck=g.pixelsToCheck,this._missingImagePixels=void 0,this._missingImageByteLength=void 0,this._isReady=!1;var j=this;f(e(g.missingImageUrl),h,i)};return g.prototype.isReady=function(){return this._isReady},g.prototype.shouldDiscardImage=function(a){if(!this._isReady)throw new c("shouldDiscardImage must not be called before the discard policy is ready.");var e=this._pixelsToCheck,f=this._missingImagePixels;if(!b(f))return!1;if(b(a.blob)&&a.blob.size!==this._missingImageByteLength)return!1;for(var g=d(a),h=a.width,i=0,j=e.length;j>i;++i)for(var k=e[i],l=4*k.x+k.y*h,m=0;4>m;++m){var n=l+m;if(g[n]!==f[n])return!1}return!0},g}),c("Scene/ImageryProvider",["../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/loadImage","../Core/loadImageViaBlob","../Core/throttleRequestByServer"],function(a,b,c,d,e,f){"use strict";var g=function(){this.defaultAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,c.throwInstantiationError()};return b(g.prototype,{ready:{get:c.throwInstantiationError},rectangle:{get:c.throwInstantiationError},tileWidth:{get:c.throwInstantiationError},tileHeight:{get:c.throwInstantiationError},maximumLevel:{get:c.throwInstantiationError},minimumLevel:{get:c.throwInstantiationError},tilingScheme:{get:c.throwInstantiationError},tileDiscardPolicy:{get:c.throwInstantiationError},errorEvent:{get:c.throwInstantiationError},credit:{get:c.throwInstantiationError},proxy:{get:c.throwInstantiationError},hasAlphaChannel:{get:c.throwInstantiationError}}),g.prototype.getTileCredits=c.throwInstantiationError,g.prototype.requestImage=c.throwInstantiationError,g.prototype.pickFeatures=c.throwInstantiationError,g.loadImage=function(b,c){return a(b.tileDiscardPolicy)?f(c,e):f(c,d)},g}),c("Scene/ArcGisMapServerImageryProvider",["../Core/Cartesian2","../Core/Credit","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/GeographicProjection","../Core/GeographicTilingScheme","../Core/jsonp","../Core/Rectangle","../Core/TileProviderError","../Core/WebMercatorProjection","../Core/WebMercatorTilingScheme","../ThirdParty/when","./DiscardMissingTileImagePolicy","./ImageryProvider"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";function r(a,b,c,e){var f;if(a._useTiles)f=a._url+"/tile/"+e+"/"+c+"/"+b;else{var g=a._tilingScheme.tileXYToNativeRectangle(b,c,e),h=g.west+"%2C"+g.south+"%2C"+g.east+"%2C"+g.north;f=a._url+"/export?",f+="bbox="+h,f+="&bboxSR=4326&size=256%2C256&imageSR=4326&format=png&transparent=true&f=image"}var i=a._proxy;return d(i)&&(f=i.getURL(f)),f}var s=function(e){function f(c){var e=c.tileInfo;if(u._useTiles&&d(e)){if(u._tileWidth=e.rows,u._tileHeight=e.cols,102100===e.spatialReference.wkid||102113===e.spatialReference.wkid)u._tilingScheme=new n;else{if(4326!==c.tileInfo.spatialReference.wkid){var f="Tile spatial reference WKID "+c.tileInfo.spatialReference.wkid+" is not supported.";return t=l.handleError(t,u,u._errorEvent,f,void 0,void 0,void 0,s),void 0}u._tilingScheme=new i}if(u._maximumLevel=c.tileInfo.lods.length-1,d(c.fullExtent)){var g=u._tilingScheme.projection;if(d(c.fullExtent.spatialReference)&&d(c.fullExtent.spatialReference.wkid))if(102100===c.fullExtent.spatialReference.wkid||102113===c.fullExtent.spatialReference.wkid)g=new m;else{if(4326!==c.fullExtent.spatialReference.wkid){var j="fullExtent.spatialReference WKID "+c.fullExtent.spatialReference.wkid+" is not supported.";return t=l.handleError(t,u,u._errorEvent,j,void 0,void 0,void 0,s),void 0}g=new h}var o=g.unproject(new a(c.fullExtent.xmin,c.fullExtent.ymin)),q=g.unproject(new a(c.fullExtent.xmax,c.fullExtent.ymax));u._rectangle=new k(o.longitude,o.latitude,q.longitude,q.latitude)}else u._rectangle=u._tilingScheme.rectangle;d(u._tileDiscardPolicy)||(u._tileDiscardPolicy=new p({missingImageUrl:r(u,0,0,u._maximumLevel),pixelsToCheck:[new a(0,0),new a(200,20),new a(20,200),new a(80,110),new a(160,130)],disableCheckIfAllPixelsAreTransparent:!0})),u._useTiles=!0}else u._tileWidth=256,u._tileHeight=256,u._tilingScheme=new i,u._rectangle=u._tilingScheme.rectangle,u._useTiles=!1;d(c.copyrightText)&&c.copyrightText.length>0&&(u._credit=new b(c.copyrightText)),u._ready=!0,l.handleSuccess(t)}function q(){
var a="An error occurred while accessing "+u._url+".";t=l.handleError(t,u,u._errorEvent,a,void 0,void 0,void 0,s)}function s(){var a=j(u._url,{parameters:{f:"json"},proxy:u._proxy});o(a,f,q)}e=c(e,{}),this._url=e.url,this._tileDiscardPolicy=e.tileDiscardPolicy,this._proxy=e.proxy,this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._tilingScheme=void 0,this._credit=void 0,this._useTiles=c(e.usePreCachedTilesIfAvailable,!0),this._rectangle=void 0,this._errorEvent=new g,this._ready=!1;var t,u=this;s()};return e(s.prototype,{url:{get:function(){return this._url}},proxy:{get:function(){return this._proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!0}}}),s.prototype.getTileCredits=function(){return void 0},s.prototype.requestImage=function(a,b,c){var d=r(this,a,b,c);return q.loadImage(this,d)},s.prototype.pickFeatures=function(){return void 0},s}),c("Scene/BingMapsStyle",["../Core/freezeObject"],function(a){"use strict";var b={AERIAL:"Aerial",AERIAL_WITH_LABELS:"AerialWithLabels",ROAD:"Road",ORDNANCE_SURVEY:"OrdnanceSurvey",COLLINS_BART:"CollinsBart"};return a(b)}),c("Scene/BingMapsImageryProvider",["../Core/BingMapsApi","../Core/Cartesian2","../Core/Credit","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/jsonp","../Core/Math","../Core/Rectangle","../Core/TileProviderError","../Core/WebMercatorTilingScheme","../ThirdParty/when","./BingMapsStyle","./DiscardMissingTileImagePolicy","./ImageryProvider"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";function r(a,b,c,d){var f=a._imageUrlTemplate,g=t.tileXYToQuadKey(b,c,d);f=f.replace("{quadkey}",g);var h=a._imageUrlSubdomains,i=(b+c+d)%h.length;f=f.replace("{subdomain}",h[i]);var j=a._proxy;return e(j)&&(f=j.getURL(f)),f}function s(a,b,c){++b;for(var d=[],e=0,f=a.length;f>e;++e){for(var g=a[e],h=g.coverageAreas,i=!1,j=0,l=g.coverageAreas.length;!i&&l>j;++j){var m=h[j];if(b>=m.zoomMin&&b<=m.zoomMax){var n=k.intersectWith(c,m.bbox,v);k.isEmpty(n)||(i=!0)}}i&&d.push(g.credit)}return d}var t=function f(g){function q(a){var d=a.resourceSets[0].resources[0];w._tileWidth=d.imageWidth,w._tileHeight=d.imageHeight,w._maximumLevel=d.zoomMax-1,w._imageUrlSubdomains=d.imageUrlSubdomains,w._imageUrlTemplate=d.imageUrl.replace("{culture}",w._culture);var f=w._tileProtocol;if(!e(f)){var g=document.location.protocol;f=/^http/.test(g)?g:"http:"}w._imageUrlTemplate=w._imageUrlTemplate.replace(/^http:/,f),e(w._tileDiscardPolicy)||(w._tileDiscardPolicy=new p({missingImageUrl:r(w,0,0,w._maximumLevel),pixelsToCheck:[new b(0,0),new b(120,140),new b(130,160),new b(200,50),new b(200,200)],disableCheckIfAllPixelsAreTransparent:!0}));var h=w._attributionList=d.imageryProviders;h||(h=w._attributionList=[]);for(var i=0,m=h.length;m>i;++i){var n=h[i];n.credit=new c(n.attribution);for(var o=n.coverageAreas,q=0,s=n.coverageAreas.length;s>q;++q){var t=o[q],v=t.bbox;t.bbox=new k(j.toRadians(v[1]),j.toRadians(v[0]),j.toRadians(v[3]),j.toRadians(v[2]))}}w._ready=!0,l.handleSuccess(u)}function s(){var a="An error occurred while accessing "+v+".";u=l.handleError(u,w,w._errorEvent,a,void 0,void 0,void 0,t)}function t(){var a=i(v,{callbackParameterName:"jsonp",proxy:w._proxy});n(a,q,s)}g=d(g,{}),this._key=a.getKey(g.key),this._url=g.url,this._tileProtocol=g.tileProtocol,this._mapStyle=d(g.mapStyle,o.AERIAL),this._culture=d(g.culture,""),this._tileDiscardPolicy=g.tileDiscardPolicy,this._proxy=g.proxy,this._credit=new c("Bing Imagery",f._logoData,"http://www.bing.com"),this.defaultGamma=1,(this._mapStyle===o.AERIAL||this._mapStyle===o.AERIAL_WITH_LABELS)&&(this.defaultGamma=1.3),this._tilingScheme=new m({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2}),this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._imageUrlTemplate=void 0,this._imageUrlSubdomains=void 0,this._errorEvent=new h,this._ready=!1;var u,v=this._url+"/REST/v1/Imagery/Metadata/"+this._mapStyle+"?incl=ImageryProviders&key="+this._key,w=this;t()};f(t.prototype,{url:{get:function(){return this._url}},proxy:{get:function(){return this._proxy}},key:{get:function(){return this._key}},mapStyle:{get:function(){return this._mapStyle}},culture:{get:function(){return this._culture}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!1}}});var u=new k;t.prototype.getTileCredits=function(a,b,c){if(!this._ready)throw new g("getTileCredits must not be called before the imagery provider is ready.");var d=this._tilingScheme.tileXYToRectangle(a,b,c,u);return s(this._attributionList,c,d)},t.prototype.requestImage=function(a,b,c){var d=r(this,a,b,c);return q.loadImage(this,d)},t.prototype.pickFeatures=function(){return void 0},t._logoData="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAAaCAYAAAAEy1RnAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3gIDEgcPTMnXOQAAClZJREFUWMPdWGtsFNcV/u689uH1+sXaONhlWQzBENtxiUFBpBSLd60IpXHSNig4URtSYQUkRJNSi0igViVVVBJBaBsiAgKRQJSG8AgEHCCWU4iBCprY2MSgXfOI16y9D3s9Mzsztz9yB12WNU2i9Ecy0tHOzN4793zn3POdcy7BnRfJ8I7iB3SRDPeEExswLz8Y0DZIAYDIRGAgLQAm+7Xle31J3L3Anp1MZPY+BUBjorN332vgYhpgV1FRUd6TTz45ubq6OtDV1SXpuu5g//Oept9wNwlMyAi8IXDjyF245TsDTdivDMATCATGNDU1/WbhwoWPTZs2bWx1dXWhx+Oxrl+/PqTrus5t9W8KWEzjinTAYhro/xuBStwiIgBnJBLxKIoy1u/3V/r9/krDMMz3339/Z3t7e38ikUgCMDLEt8W+Q0cAI3McYTDDmZxh7DESG5Ni43jg9Gsa+X+OsxWxPSJTSj3JZFK5ZRVJErOzs8e6XC4fgGwALhbzDgAKU1hK28KEA6PMmTMn56233qpevnz5PQDcbJ7EzVUAuMrLy3MBeABkcWOEDELSyFe4y7iMoHkriZZlKYZh8ASHZDKpJJPJHAC5APIA5APIAeBlCjo5TwlpXnbOmTPHP3fu3KZVq1atZKBcDJQ9x7V48WJfc3Pzhp6enj+tXLnyR8w4MjdG4gyVDk7KICMClzKlLUrpbQMNw5AkScppbGz8cWdn57WjR4/2caw+DEBlYjO8wX1foZQWuN3uKZIklQD4G+fhlG0Yl8uVm5WVVW6app6dne0D0G8vnxbjJntHubCUOK/badZICyWanrJuAaeUknTQpmlKkUhEWbx48U8LCwtHhUKha+fPn+85fPhwV0tLyzUACSZx9jvMFhIByNFoVDEMw/qKB5HPvJfkUqBr9+7deklJyZ/j8bi5ffv2OAslieMLsG+m2DybT2QuzEQOsF5SUqJfvXo1yc2l6Xn6rgSRSCSEc+fOhVeuXLmwoqJixvTp0wcWLFgQ7unpudHR0dF97ty5z/fu3XseQJh5adjeerquy5ZlCalUivh8Pt8HH3ywzOPxyD09PZ81NjZ+2NnZaQEQx40b54vFYqaqquEVK1b4a2tr/WvWrDn18ssv144fP36SqqoD69ev371nz57rDLwAwHHkyJGfjRs3rtowDOv06dOnu7q6rs6bN2/s7Nmz9zIjDKenWoFZKg/AlMLCwl82Nzf/m3LX22+/fXb06NF/ALC8u7u7m6ZdkUhksL29/UpLS0vzunXrVgAoBzAaQBGAiY2NjUui0ei1RCLRFwwG/9PX19cVi8WCqqoOdHd3HysrK6sDMCccDl8IBoOtiqIsOnbs2D+i0eiV3t7ez8Ph8GeRSKRT07TB/v7+i1OnTp0HYBqABzs7O/+paVo0Fot1RyKRi/F4/Gp/f39XIpHoZnoUMn6wU+ZtRDaymwmxZFk2AWjvvvvuJ/F4PMn/n5+fn1VeXu6fOXNmbU1NzUOM4Bz8QqIoyg6HwxuLxfq3bdu2a+vWrW/09/dfKy0tffDVV199BEC20+n0ud3uQgBup9Pp83g8JYqieE+ePPnxxo0bt33xxRen8/Ly7n3hhRcWASh47bXX5pWVldWFw+GuXbt27XjzzTd3BoPBDq/XG1AUZRRHmAKPVfqaoKkgCCkA+oYNG84Eg0FHTU1N5ezZs8eWlJQ4CSF8/LvZYhJPQoQQpFKpwcrKyo1su9HBwUF99erVv588eXINgOOmacIwDEopdaZSKUIpxYkTJz6sr68/BMBav379RcMwZk2aNOl+AP+qq6t7xDTNVEVFxR+j0WgSAJk4ceKlTz/9tNzpdHpZvIvpjVW6pykhhBJCbkvwgiAQQogEQL558ybdtGlTsLm5OWJZdxZmlmWll5OUEEJN0zSGhob6GcOrALSzZ8/2apqWcLlc2axGACNRkRAimqaph0Kh68xIwwB0y7IMSZKcABz5+fkl8Xj8y2g0apOb5na7rYGBgS/JV54Q0qpAAoBKaS0jBWClg1ZVFeFw2AlgVF1dXeDpp5+eWVFRUVpcXOzgvQwAbrcbDJhdudlGpKZpGtx6JCcnRxIEQbQsS2PjbjM+AMvlchnMSBaXkr7ymCCIhmEYfMoVRVESBEHI0CaTTNubssUsQRBuubCtra33pZdeCk6YMCGwZs2aipqaGn9paWmuJEl3JP0bN258eeTIkRMABrm0YomiaImiKGVlZeWxLecAgBkzZvgdDkfWjRs3ggA0bpfpoiiahBCqKEqKAy2yULMA6MlkMp6Xl3cP1x2SWCwmFhQU+CmlFhfHNFOevpX4LcvSJUkyAeDQoUOh119//fpTTz01Zf78+UWBQCBHUZQ7yE/TNGPfvn0n33vvvSP79+//BECMeZsCMGRZNgRBgNPpHHXx4sVVDQ0Nf1+wYMGYJ554YikAevDgwUMA4oIgQJZlSggZdDqdBiGEZGdn6ww0tQlJURTT4/EMHz9+/MCjjz7622AwuHbZsmVbiouLvWvXrm1wOp3ZqVRqaKQTIInf1gAMl8ulU0q1CxcuBGOxmL5u3bryQCDgycrKEjORXGtra8eOHTsOHz169OyVK1cuA+hlRYrGlNRkWR7UNO2mYRiaz+cb3dLS8gYhhOi6Hj116tSOVatWHQNALcsaME0zLghClBDSZ9+zQsZ2SoJS2udwOKLPPffcvsrKyrJAIPDQ/v37txiGofX19V3r7e29UlBQMHqEVpjwnrYA6PF4PK6q6s2qqqqpZWVlitvtljOB7enpiWzbtu3wgQMHTre1tV0E0MeKkkGuIhMAqHv37u30er3Px+NxlyiKygMPPOAnhFiXLl0Kbd68uYPNsXbu3Lk6mUwaqqr2btmyZUdtbe3hd955pwvAEFNcO3jw4K/b2tqiqqpGIpGI4/HHH/9rQ0PDCa/XOyoSidDLly8PNTU1PcZ4QuNK1ju6NYHFRAGASXPnzv1Fa2vrxzTDpapqateuXR/Nnz+/SVGUhwFMBzCBFSLZLF75DsrJGpXRAH4EIABgPIBxAEoBFAPwARjFif1sNzZ25+VlOhaxufcCqAFQC+BhAPVLliz5XSqVUkOhUAuAKWnFyR3dlsw+fg+A+8eMGfPzTZs2bY9GozEb8JkzZ9qXLl36l+Li4l8B+AmAyQDGsGrOzfXNPGPawG2l85jksmcPm+vihH+2W1iF3bvZPN+sWbPuGx4eDrW3t+85fvz41o6OjmZN04Y0TYvV19cvYIbN5QqUjG2mwj5YAqDK4XDMe+aZZ55vbW09+sorr2yuqqpqYFatAuBn3uB7XzJCY297XeaUd2RoGzOJmHb6IjFj5D777LP3DQwMfDw8PBxSVbUvkUj0hEKhj1588cXH2O7zMSPdplumoxveMx5Zlj3jx4/39vb26gMDA4MsvgYZo+p8Pr7LqQX5Ds/U7d0jFxUVZS1atKg4Nzc317Isp67rZldXV6y5ufkmI78hFtcmrx8ZweMit6XsUs4+6kmlgbW+peLf9gyMZNCR374G0y/FxEzX8b/8+bkXEBxKFwAAAABJRU5ErkJggg==",t.tileXYToQuadKey=function(a,b,c){for(var d="",e=c;e>=0;--e){var f=1<<e,g=0;0!==(a&f)&&(g|=1),0!==(b&f)&&(g|=2),d+=g}return d},t.quadKeyToTileXY=function(a){for(var b=0,c=0,d=a.length-1,e=d;e>=0;--e){var f=1<<e,g=+a[d-e];0!==(1&g)&&(b|=f),0!==(2&g)&&(c|=f)}return{x:b,y:c,level:d}};var v=new k;return t}),c("Scene/CullingVolume",["../Core/defaultValue","../Core/defined","../Core/DeveloperError","../Core/Intersect"],function(a,b,c,d){"use strict";var e=function(b){this.planes=a(b,[])};return e.prototype.computeVisibility=function(a){for(var b=this.planes,c=!1,e=0,f=b.length;f>e;++e){var g=a.intersect(b[e]);if(g===d.OUTSIDE)return d.OUTSIDE;g===d.INTERSECTING&&(c=!0)}return c?d.INTERSECTING:d.INSIDE},e}),c("Scene/PerspectiveOffCenterFrustum",["../Core/Cartesian2","../Core/Cartesian3","../Core/Cartesian4","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Matrix4","./CullingVolume"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){var b=a.top,c=a.bottom,d=a.right,e=a.left,f=a.near,g=a.far;(b!==a._top||c!==a._bottom||e!==a._left||d!==a._right||f!==a._near||g!==a._far)&&(a._left=e,a._right=d,a._top=b,a._bottom=c,a._near=f,a._far=g,a._perspectiveMatrix=h.computePerspectiveOffCenter(e,d,c,b,f,g,a._perspectiveMatrix),a._infinitePerspective=h.computeInfinitePerspectiveOffCenter(e,d,c,b,f,a._infinitePerspective))}var k=function(){this.left=void 0,this._left=void 0,this.right=void 0,this._right=void 0,this.top=void 0,this._top=void 0,this.bottom=void 0,this._bottom=void 0,this.near=1,this._near=this.near,this.far=5e8,this._far=this.far,this._cullingVolume=new i,this._perspectiveMatrix=new h,this._infinitePerspective=new h};f(k.prototype,{projectionMatrix:{get:function(){return j(this),this._perspectiveMatrix}},infiniteProjectionMatrix:{get:function(){return j(this),this._infinitePerspective}}});var l=new b,m=new b,n=new b,o=new b;return k.prototype.computeCullingVolume=function(a,d,f){var g=this._cullingVolume.planes,h=this.top,i=this.bottom,j=this.right,k=this.left,p=this.near,q=this.far,r=b.cross(d,f,l),s=m;b.multiplyByScalar(d,p,s),b.add(a,s,s);var t=n;b.multiplyByScalar(d,q,t),b.add(a,t,t);var u=o;b.multiplyByScalar(r,k,u),b.add(s,u,u),b.subtract(u,a,u),b.normalize(u,u),b.cross(u,f,u);var v=g[0];return e(v)||(v=g[0]=new c),v.x=u.x,v.y=u.y,v.z=u.z,v.w=-b.dot(u,a),b.multiplyByScalar(r,j,u),b.add(s,u,u),b.subtract(u,a,u),b.normalize(u,u),b.cross(f,u,u),v=g[1],e(v)||(v=g[1]=new c),v.x=u.x,v.y=u.y,v.z=u.z,v.w=-b.dot(u,a),b.multiplyByScalar(f,i,u),b.add(s,u,u),b.subtract(u,a,u),b.normalize(u,u),b.cross(r,u,u),v=g[2],e(v)||(v=g[2]=new c),v.x=u.x,v.y=u.y,v.z=u.z,v.w=-b.dot(u,a),b.multiplyByScalar(f,h,u),b.add(s,u,u),b.subtract(u,a,u),b.normalize(u,u),b.cross(u,r,u),v=g[3],e(v)||(v=g[3]=new c),v.x=u.x,v.y=u.y,v.z=u.z,v.w=-b.dot(u,a),v=g[4],e(v)||(v=g[4]=new c),v.x=d.x,v.y=d.y,v.z=d.z,v.w=-b.dot(d,s),b.negate(d,u),v=g[5],e(v)||(v=g[5]=new c),v.x=u.x,v.y=u.y,v.z=u.z,v.w=-b.dot(u,t),this._cullingVolume},k.prototype.getPixelSize=function(b,c,f){j(this);var g=b.x,h=b.y;c=d(c,this.near);var i=1/this.near,k=this.top*i,l=2*c*k/h;k=this.right*i;var m=2*c*k/g;return e(f)?(f.x=m,f.y=l,f):new a(m,l)},k.prototype.clone=function(a){return e(a)||(a=new k),a.right=this.right,a.left=this.left,a.top=this.top,a.bottom=this.bottom,a.near=this.near,a.far=this.far,a._left=void 0,a._right=void 0,a._top=void 0,a._bottom=void 0,a._near=void 0,a._far=void 0,a},k.prototype.equals=function(a){return e(a)&&this.right===a.right&&this.left===a.left&&this.top===a.top&&this.bottom===a.bottom&&this.near===a.near&&this.far===a.far},k}),c("Scene/PerspectiveFrustum",["../Core/defined","../Core/defineProperties","../Core/DeveloperError","./PerspectiveOffCenterFrustum"],function(a,b,c,d){"use strict";function e(a){var b=a._offCenterFrustum;(a.fov!==a._fov||a.aspectRatio!==a._aspectRatio||a.near!==a._near||a.far!==a._far)&&(a._aspectRatio=a.aspectRatio,a._fov=a.fov,a._fovy=a.aspectRatio<=1?a.fov:2*Math.atan(Math.tan(.5*a.fov)/a.aspectRatio),a._near=a.near,a._far=a.far,b.top=a.near*Math.tan(.5*a._fovy),b.bottom=-b.top,b.right=a.aspectRatio*b.top,b.left=-b.right,b.near=a.near,b.far=a.far)}var f=function(){this._offCenterFrustum=new d,this.fov=void 0,this._fov=void 0,this._fovy=void 0,this.aspectRatio=void 0,this._aspectRatio=void 0,this.near=1,this._near=this.near,this.far=5e8,this._far=this.far};return b(f.prototype,{projectionMatrix:{get:function(){return e(this),this._offCenterFrustum.projectionMatrix}},infiniteProjectionMatrix:{get:function(){return e(this),this._offCenterFrustum.infiniteProjectionMatrix}},fovy:{get:function(){return e(this),this._fovy}}}),f.prototype.computeCullingVolume=function(a,b,c){return e(this),this._offCenterFrustum.computeCullingVolume(a,b,c)},f.prototype.getPixelSize=function(a,b,c){return e(this),this._offCenterFrustum.getPixelSize(a,b,c)},f.prototype.clone=function(b){return a(b)||(b=new f),b.aspectRatio=this.aspectRatio,b.fov=this.fov,b.near=this.near,b.far=this.far,b._aspectRatio=void 0,b._fov=void 0,b._near=void 0,b._far=void 0,this._offCenterFrustum.clone(b._offCenterFrustum),b},f.prototype.equals=function(b){return a(b)?(e(this),e(b),this.fov===b.fov&&this.aspectRatio===b.aspectRatio&&this.near===b.near&&this.far===b.far&&this._offCenterFrustum.equals(b._offCenterFrustum)):!1},f}),c("Scene/CameraFlightPath",["../Core/Cartesian2","../Core/Cartesian3","../Core/Cartographic","../Core/clone","../Core/defaultValue","../Core/defined","../Core/DeveloperError","../Core/EasingFunction","../Core/HermiteSpline","../Core/LinearSpline","../Core/Math","../Core/Matrix3","../Core/Matrix4","../Core/Quaternion","../Core/QuaternionSpline","./PerspectiveFrustum","./PerspectiveOffCenterFrustum","./SceneMode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";function s(a,c,d){return b.cross(a,c,F),b.cross(F,a,G),E[0]=F.x,E[1]=G.x,E[2]=-a.x,E[3]=F.y,E[4]=G.y,E[5]=-a.y,E[6]=F.z,E[7]=G.z,E[8]=-a.z,n.fromRotationMatrix(E,d)}function t(a,b,c){var d,e,f;if(a instanceof p){var g=Math.tan(.5*a.fovy);return d=a.near,e=a.near*g,f=a.aspectRatio*e,Math.max(b*d/f,c*d/e)}return a instanceof q?(d=a.near,e=a.top,f=a.right,Math.max(b*d/f,c*d/e)):Math.max(b,c)}function u(a,c,d,e,f,g,h){var j,m,o,p=c.maximumRadius,q=a.frustum,r=t(q,p,p),s=b.dot(b.normalize(d,H),b.normalize(g,I));if(b.magnitude(d)>r)m=p+.6*(r-p),o=.35;else{var u=b.subtract(d,g,H);m=b.magnitude(b.add(b.multiplyByScalar(u,.5,I),g,I));var v=b.magnitude(b.multiplyByScalar(e,b.dot(u,e),I)),w=b.magnitude(b.multiplyByScalar(f,b.dot(u,f),I));m+=t(q,v,w),o=k.clamp(s+1,.25,.5)}var x,y,z,A=b.multiplyByScalar(b.normalize(g,I),m,I),B=b.multiplyByScalar(b.normalize(d,H),m,H),C=new b;if(b.magnitude(g)>r&&s>.75)C=b.add(b.multiplyByScalar(b.subtract(d,g,C),.5,C),g,C),j=[d,C,g];else if(b.magnitude(d)>r&&s>0)C=b.add(b.multiplyByScalar(b.subtract(d,A,C),.5,C),A,C),j=[d,C,g];else{j=[d],y=k.acosClamped(b.dot(b.normalize(B,J),b.normalize(A,K))),x=b.cross(A,B,J),b.equalsEpsilon(x,b.ZERO,k.EPSILON6)&&(x=b.UNIT_Z);for(var D=o*y,E=y-D,F=E;F>0;F-=D)z=l.fromQuaternion(n.fromAxisAngle(x,F),L),j.push(l.multiplyByVector(z,A,new b));j.push(g)}for(var G=new Array(j.length),M=h/(j.length-1),N=0;N<j.length;++N)G[N]=N*M;return i.createNaturalCubic({points:j,times:G})}function v(a,c,d,e,g){var h=a.points,i=new Array(h.length);i[0]=s(c,d);for(var j,k=h.length-1,l=1;k>l;++l)j=h[l],b.normalize(b.negate(j,M),M),b.normalize(b.cross(M,b.UNIT_Z,N),N),b.cross(N,M,O),i[l]=s(M,O,P);return j=h[k],f(e)&&f(g)?i[k]=s(e,g):(b.normalize(b.negate(j,M),M),b.normalize(b.cross(M,b.UNIT_Z,N),N),b.cross(N,M,O),i[k]=s(M,O,P)),new o({points:i,times:a.times})}function w(a,c,d,e,f){var g=a.camera,h=a.mapProjection.ellipsoid,i=g.cameraToWorldCoordinatesPoint(g.position,Q),j=g.cameraToWorldCoordinatesVector(g.direction,R),k=g.cameraToWorldCoordinatesVector(g.up,S),n=b.cross(j,k,T),o=u(g,h,i,k,n,c,d),p=v(o,j,k,e,f),q=function(a){var c=a.time,d=p.evaluate(c);l.fromQuaternion(d,D),m.clone(g.transform,U),m.clone(m.IDENTITY,g.transform),g.position=o.evaluate(c,g.position),g.right=l.getRow(D,0,g.right),g.up=l.getRow(D,1,g.up),g.direction=b.negate(l.getRow(D,2,g.direction),g.direction),g.setTransform(U)};return q}function x(c,d,e,f,g){if(k.equalsEpsilon(a.magnitude(e),a.magnitude(f),1e4))return new j({points:[e,f],times:[0,g]});var h,l,m=d.maximumRadius,n=c.frustum,o=t(n,Math.PI*m,k.PI_OVER_TWO*m),p=.5;if(e.z>o)l=.6*o;else{var q=b.subtract(e,f,V);l=t(n,Math.abs(q.y),Math.abs(q.x))}var r=b.clone(f);r.z=l;var s=b.clone(e);s.z=l;var u=new b;if(f.z>o)u=b.add(b.multiplyByScalar(b.subtract(e,f,u),.5,u),f,u),h=[e,u,f];else if(e.z>o)u=b.add(b.multiplyByScalar(b.subtract(e,r,u),.5,u),r,u),h=[e,u,f];else{h=[e];var v=b.subtract(s,r,V),w=b.magnitude(v);b.normalize(v,v);for(var x=p*w,y=w-x,z=y;z>0;z-=x){var A=new b;h.push(b.add(b.multiplyByScalar(v,z,A),r,A))}h.push(f)}for(var B=new Array(h.length),C=g/(h.length-1),D=0;D<h.length;++D)B[D]=D*C;return i.createNaturalCubic({points:h,times:B})}function y(a,b,c,d){var e=b.points,g=new Array(e.length);g[0]=s(a.direction,a.up);for(var h=e.length-1,i=1;h>i;++i)g[i]=Z;return g[h]=f(c)&&f(d)?s(c,d):Z,new o({points:g,times:b.times})}function z(a,c,d,e,f){var g=a.camera,h=a.mapProjection.ellipsoid,i=x(g,h,b.clone(g.position),c,d),j=y(g,i,e,f),k=function(a){var c=a.time,d=j.evaluate(c);l.fromQuaternion(d,D),m.clone(g.transform,U),m.clone(m.IDENTITY,g.transform),g.position=i.evaluate(c,g.position),g.right=l.getRow(D,0,g.right),g.up=l.getRow(D,1,g.up),g.direction=b.negate(l.getRow(D,2,g.direction),g.direction),g.setTransform(U)};return k}function A(a,c,d,e,f){var g=a.camera,h=a.mapProjection.ellipsoid,i=b.clone(g.position);i.z=g.frustum.right-g.frustum.left;var j=x(g,h,i,c,d),k=y(g,j,b.negate(b.UNIT_Z,new b),f),m=g.position.z,n=function(a){var c=a.time,d=k.evaluate(c);l.fromQuaternion(d,D),g.position=j.evaluate(c);var e=g.position.z;g.position.z=m,g.right=l.getRow(D,0,g.right),g.up=l.getRow(D,1,g.up),g.direction=b.negate(l.getRow(D,2,g.direction),g.direction);var f=g.frustum,h=f.top/f.right,i=.5*(e-(f.right-f.left));f.right+=i,f.left-=i,f.top=h*f.right,f.bottom=-f.top};return n}var B={},C=new b,D=new l,E=new l,F=new b,G=new b,H=new b,I=new b,J=new b,K=new b,L=new l,M=new b,N=new b,O=new b,P=new n,Q=new b,R=new b,S=new b,T=new b,U=new m,V=new b,W=b.negate(b.UNIT_Z,new b),X=new b;X=b.normalize(b.cross(W,b.UNIT_Y,X),X);var Y=b.cross(X,W,new b),Z=s(W,Y),$=new b,_=new b,aa=new b,ba=new c,ca=new b;return B.createTween=function(c,d){d=e(d,e.EMPTY_OBJECT);var g=d.destination,i=d.direction,j=d.up;if(c.mode===r.MORPHING)return{startObject:{},stopObject:{},duration:0};var l=e(d.convert,!0);if(l&&c.mode!==r.SCENE3D){var m=c.mapProjection,n=m.ellipsoid;n.cartesianToCartographic(g,ba),g=m.project(ba,ca)}var o=e(d.duration,3),p=c.screenSpaceCameraController;p.enableInputs=!1;var q=function(a){var b=function(){"function"==typeof a&&a(),p.enableInputs=!0};return b},s=q(d.complete),t=q(d.cancel),u=c.camera,v=d.endTransform;f(v)&&u.setTransform(v);var x=u.frustum;if(c.mode===r.SCENE2D){if(a.equalsEpsilon(u.position,g,k.EPSILON6)&&k.equalsEpsilon(Math.max(x.right-x.left,x.top-x.bottom),g.z,k.EPSILON6))return{startObject:{},stopObject:{},duration:0,complete:s,cancel:t}}else if(b.equalsEpsilon(g,u.position,k.EPSILON6))return{startObject:{},stopObject:{},duration:0,complete:s,cancel:t};if(0>=o){var y=function(){var a=g;if(c.mode===r.SCENE3D?(f(d.direction)||f(d.up)?($=d.direction,_=b.normalize(b.cross($,d.up,_),_)):($=b.normalize(b.negate(a,$),$),_=b.normalize(b.cross($,b.UNIT_Z,_),_)),aa=e(d.up,b.cross(_,$,aa))):(f(d.direction)||f(d.up)?($=d.direction,_=b.normalize(b.cross($,d.up,_),_)):($=b.negate(b.UNIT_Z,$),_=b.normalize(b.cross($,b.UNIT_Y,_),_)),aa=e(d.up,b.cross(_,$,aa))),b.clone(a,u.position),b.clone($,u.direction),b.clone(aa,u.up),b.clone(_,u.right),c.mode===r.SCENE2D){var h=u.position.z,i=x.top/x.right,j=.5*(h-(x.right-x.left));x.right+=j,x.left-=j,x.top=i*x.right,x.bottom=-x.top}"function"==typeof s&&s()};return{startObject:{},stopObject:{},duration:0,complete:y,cancel:t}}var B;return B=c.mode===r.SCENE3D?w(c,g,o,i,j):c.mode===r.SCENE2D?A(c,g,o,i,j):z(c,g,o,i,j),{duration:o,easingFunction:h.SINUSOIDAL_IN_OUT,startObject:{time:0},stopObject:{time:o},update:B,complete:s,cancel:t}},B.createTweenRectangle=function(a,b){b=e(b,e.EMPTY_OBJECT);var c=b.destination,f=d(b);return a.camera.getRectangleCameraCoordinates(c,C),f.destination=C,f.convert=!1,this.createTween(a,f)},B}),c("Scene/Camera",["../Core/Cartesian2","../Core/Cartesian3","../Core/Cartesian4","../Core/Cartographic","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/EasingFunction","../Core/Ellipsoid","../Core/IntersectionTests","../Core/Math","../Core/Matrix3","../Core/Matrix4","../Core/Quaternion","../Core/Ray","../Core/Rectangle","../Core/Transforms","./CameraFlightPath","./PerspectiveFrustum","./SceneMode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){"use strict";function v(a){var c=a._right,d=a._up,e=a._direction,f=a._position,g=a._viewMatrix;g[0]=c.x,g[1]=d.x,g[2]=-e.x,g[3]=0,g[4]=c.y,g[5]=d.y,g[6]=-e.y,g[7]=0,g[8]=c.z,g[9]=d.z,g[10]=-e.z,g[11]=0,g[12]=-b.dot(c,f),g[13]=-b.dot(d,f),g[14]=b.dot(e,f),g[15]=1,n.multiply(g,a._actualInvTransform,a._viewMatrix),n.inverseTransformation(a._viewMatrix,a._invViewMatrix)}function w(a){var d=a._projection,e=d.ellipsoid,f=n.getColumn(a._transform,3,aa),g=e.cartesianToCartographic(f,Z),h=d.project(g,$),i=ba;i.x=h.z,i.y=h.x,i.z=h.y,i.w=1;var j=c.add(n.getColumn(a._transform,0,_),f,_);e.cartesianToCartographic(j,g),d.project(g,h);var k=ca;k.x=h.z,k.y=h.x,k.z=h.y,k.w=0,b.subtract(k,i,k);var l=c.add(n.getColumn(a._transform,1,_),f,_);e.cartesianToCartographic(l,g),d.project(g,h);var m=da;m.x=h.z,m.y=h.x,m.z=h.y,m.w=0,b.subtract(m,i,m);var o=ea;b.cross(k,m,o),b.normalize(o,o),b.cross(m,o,k),b.normalize(k,k),b.cross(o,k,m),b.normalize(m,m),n.setColumn(a._actualTransform,0,k,a._actualTransform),n.setColumn(a._actualTransform,1,m,a._actualTransform),n.setColumn(a._actualTransform,2,o,a._actualTransform),n.setColumn(a._actualTransform,3,i,a._actualTransform)}function x(a){var d=a._projection,e=d.ellipsoid,f=n.getColumn(a._transform,3,aa),g=e.cartesianToCartographic(f,Z),h=d.project(g,$),i=ba;i.x=h.z,i.y=h.x,i.z=h.y,i.w=1;var j=c.clone(c.UNIT_X,ea),k=c.add(n.getColumn(a._transform,0,_),f,_);e.cartesianToCartographic(k,g),d.project(g,h);var m=ca;m.x=h.z,m.y=h.x,m.z=h.y,m.w=0,b.subtract(m,i,m),m.x=0;var o=da;if(b.magnitudeSquared(m)>l.EPSILON10)b.cross(j,m,o);else{var p=c.add(n.getColumn(a._transform,1,_),f,_);e.cartesianToCartographic(p,g),d.project(g,h),o.x=h.z,o.y=h.x,o.z=h.y,o.w=0,b.subtract(o,i,o),o.x=0,b.magnitudeSquared(o)<l.EPSILON10&&(c.clone(c.UNIT_Y,m),c.clone(c.UNIT_Z,o))}b.cross(o,j,m),b.normalize(m,m),b.cross(j,m,o),b.normalize(o,o),n.setColumn(a._actualTransform,0,m,a._actualTransform),n.setColumn(a._actualTransform,1,o,a._actualTransform),n.setColumn(a._actualTransform,2,j,a._actualTransform),n.setColumn(a._actualTransform,3,i,a._actualTransform)}function y(a){var c=a._position,d=!b.equals(c,a.position);d&&(c=b.clone(a.position,a._position));var e=a._direction,f=!b.equals(e,a.direction);f&&(e=b.clone(a.direction,a._direction));var g=a._up,h=!b.equals(g,a.up);h&&(g=b.clone(a.up,a._up));var i=a._right,j=!b.equals(i,a.right);j&&(i=b.clone(a.right,a._right));var k=!n.equals(a._transform,a.transform)||a._modeChanged;k&&(n.clone(a.transform,a._transform),n.inverseTransformation(a._transform,a._invTransform),a._mode===u.COLUMBUS_VIEW||a._mode===u.SCENE2D?n.equals(n.IDENTITY,a._transform)?n.clone(Y.TRANSFORM_2D,a._actualTransform):a._mode===u.COLUMBUS_VIEW?w(a):x(a):n.clone(a._transform,a._actualTransform),n.inverseTransformation(a._actualTransform,a._actualInvTransform),a._modeChanged=!1);var m=a._actualTransform;if(d||k){a._positionWC=n.multiplyByPoint(m,c,a._positionWC);var o=a._mode;if(o===u.SCENE3D||o===u.MORPHING)a._positionCartographic=a._projection.ellipsoid.cartesianToCartographic(a._positionWC,a._positionCartographic);else{var p=fa;p.x=a._positionWC.y,p.y=a._positionWC.z,p.z=a._positionWC.x,o===u.SCENE2D&&(p.z=.5*(a.frustum.right-a.frustum.left)),a._projection.unproject(p,a._positionCartographic)}}if(f||h||j){var q=b.dot(e,b.cross(g,i,fa));if(Math.abs(1-q)>l.EPSILON2){e=b.normalize(e,a._direction),b.clone(e,a.direction);var r=1/b.magnitudeSquared(g),s=b.dot(g,e)*r,t=b.multiplyByScalar(e,s,fa);g=b.normalize(b.subtract(g,t,a._up),a._up),b.clone(g,a.up),i=b.cross(e,g,a._right),b.clone(i,a.right)}}(f||k)&&(a._directionWC=n.multiplyByPointAsVector(m,e,a._directionWC)),(h||k)&&(a._upWC=n.multiplyByPointAsVector(m,g,a._upWC)),(j||k)&&(a._rightWC=n.multiplyByPointAsVector(m,i,a._rightWC)),(d||f||h||j||k)&&v(a)}function z(a){return Math.atan2(a.right.y,a.right.x)}function A(a){var b=a._projection.ellipsoid,c=r.eastNorthUpToFixedFrame(a.position,b,ga),d=n.getRotation(c,ha);m.transpose(d,d);var e=m.multiplyByVector(d,a.right,ia);return Math.atan2(e.y,e.x)}function B(a,c){var d=z(a);c=d-c,a.look(b.UNIT_Z,c)}function C(a,c){var d=b.normalize(a.position,ja),e=A(a);c=e-c,a.look(d,c)}function D(a){return l.PI_OVER_TWO-l.acosClamped(-a.direction.z)}function E(a){var c=b.normalize(a.position,ka);return b.negate(c,c),l.PI_OVER_TWO-l.acosClamped(b.dot(a.direction,c))}function F(a,b){var c=a._maxCoord.x*a.maximumTranslateFactor;b.x>c&&(b.x=c),b.x<-c&&(b.x=-c);var d=a._maxCoord.y*a.maximumTranslateFactor;b.y>d&&(b.y=d),b.y<-d&&(b.y=-d)}function G(a,c){var d=a.position,e=b.normalize(d,ta);if(f(a.constrainedAxis)){var g=b.equalsEpsilon(e,a.constrainedAxis,l.EPSILON2),h=b.equalsEpsilon(e,b.negate(a.constrainedAxis,wa),l.EPSILON2);if(g||h)(g&&0>c||h&&c>0)&&a.rotate(a.right,c);else{var i=b.normalize(a.constrainedAxis,ua),j=b.dot(e,i),k=l.acosClamped(j);c>0&&c>k&&(c=k-l.EPSILON4),j=b.dot(e,b.negate(i,wa)),k=l.acosClamped(j),0>c&&-c>k&&(c=-k+l.EPSILON4);var m=b.cross(i,e,va);a.rotate(m,c)}}else a.rotate(a.right,c)}function H(a,b){f(a.constrainedAxis)?a.rotate(a.constrainedAxis,b):a.rotate(a.up,b)}function I(a,b){var c=a.frustum;b=.5*b;var d=c.right-b,e=c.left+b,f=a._maxCoord.x*a.maximumZoomFactor;d>f&&(d=f,e=-f),e>=d&&(d=1,e=-1);var g=c.top/c.right;c.right=d,c.left=e,c.top=c.right*g,c.bottom=-c.top}function J(a,b){a.move(a.direction,b)}function K(c,d){var e=.5*-d.height,f=-e,g=c.frustum;if(f>e){var h=g.top/g.right;g.right=f,g.left=e,g.top=g.right*h,g.bottom=-g.top}a.clone(c._projection.project(d),c.position),b.negate(b.UNIT_Z,c.direction),b.clone(b.UNIT_Y,c.up),b.clone(b.UNIT_X,c.right)}function L(a,c){var d=a._projection;a.position=d.project(c),b.negate(b.UNIT_Z,a.direction),b.clone(b.UNIT_Y,a.up),b.clone(b.UNIT_X,a.right)}function M(a,c){var d=a._projection.ellipsoid;d.cartographicToCartesian(c,a.position),b.negate(a.position,a.direction),b.normalize(a.direction,a.direction),b.cross(a.direction,b.UNIT_Z,a.right),b.cross(a.right,a.direction,a.up),b.cross(a.direction,a.up,a.right)}function N(a,c,d,e,g){f(e)||(e=new b);var h=a;g&&(h=Da);var i=c.north,j=c.south,k=c.east,m=c.west;m>k&&(k+=l.TWO_PI);var n=xa;n.longitude=k,n.latitude=i;var o=d.cartographicToCartesian(n,ya);n.latitude=j;var p=d.cartographicToCartesian(n,Ba);n.longitude=m;var q=d.cartographicToCartesian(n,za);n.latitude=i;var r=d.cartographicToCartesian(n,Aa),s=b.subtract(o,q,Ca);b.multiplyByScalar(s,.5,s),b.add(q,s,s);var t=b.magnitude(s);t<l.EPSILON6&&(n.longitude=.5*(k+m),n.latitude=.5*(i+j),d.cartographicToCartesian(n,s)),b.subtract(r,s,r),b.subtract(p,s,p),b.subtract(o,s,o),b.subtract(q,s,q);var u=b.negate(s,h.direction);b.normalize(u,u);var v=b.cross(u,b.UNIT_Z,h.right);b.normalize(v,v);var w=b.cross(v,u,h.up),x=Math.max(Math.abs(b.dot(w,r)),Math.abs(b.dot(w,p)),Math.abs(b.dot(w,o)),Math.abs(b.dot(w,q))),y=Math.max(Math.abs(b.dot(v,r)),Math.abs(b.dot(v,p)),Math.abs(b.dot(v,o)),Math.abs(b.dot(v,q))),z=Math.tan(.5*a.frustum.fovy),A=a.frustum.aspectRatio*z,B=Math.max(y/A,x/z),C=t+B;return b.normalize(s,s),b.multiplyByScalar(s,C,e)}function O(a,c,d,e,g){var h=c.north,i=c.south,j=c.east,k=c.west,l=a._actualTransform,m=a._actualInvTransform,o=Ea;o.longitude=j,o.latitude=h;var p=d.project(o,Fa);n.multiplyByPoint(l,p,p),n.multiplyByPoint(m,p,p),o.longitude=k,o.latitude=i;var q=d.project(o,Ga);n.multiplyByPoint(l,q,q),n.multiplyByPoint(m,q,q);var r=Math.tan(.5*a.frustum.fovy),s=a.frustum.aspectRatio*r;if(f(e)||(e=new b),e.x=.5*(p.x-q.x)+q.x,e.y=.5*(p.y-q.y)+q.y,e.z=.5*Math.max((p.x-q.x)/s,(p.y-q.y)/r),!g){var t=b.clone(b.UNIT_Z,a.direction);b.negate(t,t),b.clone(b.UNIT_X,a.right),b.clone(b.UNIT_Y,a.up)}return e}function P(a,c,d,e,g){var h=c.north,i=c.south,j=c.east,k=c.west,l=Ha;l.longitude=j,l.latitude=h;var m=d.project(l,Ia);l.longitude=k,l.latitude=i;var n,o,p=d.project(l,Ja),q=.5*Math.abs(m.x-p.x),r=.5*Math.abs(m.y-p.y),s=a.frustum.right/a.frustum.top,t=r*s;if(q>t?(n=q,o=n/s):(o=r,n=t),r=Math.max(2*n,2*o),f(e)||(e=new b),e.x=.5*(m.x-p.x)+p.x,e.y=.5*(m.y-p.y)+p.y,g)l=d.unproject(e,l),l.height=r,e=d.project(l,e);else{var u=a.frustum;u.right=n,u.left=-n,u.top=o,u.bottom=-o;var v=b.clone(b.UNIT_Z,a.direction);b.negate(v,v),b.clone(b.UNIT_X,a.right),b.clone(b.UNIT_Y,a.up)}return e}function Q(a,b,c,d){c=e(c,j.WGS84);var f=a.getPickRay(b,Ka),g=k.rayEllipsoid(f,c);if(!g)return void 0;var h=g.start>0?g.start:g.stop;return p.getPoint(f,h,d)}function R(a,b,c,d){var e=a.getPickRay(b,La),f=e.origin;f.z=0;var g=c.unproject(f);return g.latitude<-l.PI_OVER_TWO||g.latitude>l.PI_OVER_TWO||g.longitude<-Math.PI||g.longitude>Math.PI?void 0:c.ellipsoid.cartographicToCartesian(g,d)}function S(a,c,d,e){var f=a.getPickRay(c,Ma),g=-f.origin.x/f.direction.x;p.getPoint(f,g,e);var h=d.unproject(new b(e.y,e.z,0));return h.latitude<-l.PI_OVER_TWO||h.latitude>l.PI_OVER_TWO||h.longitude<-Math.PI||h.longitude>Math.PI?void 0:d.ellipsoid.cartographicToCartesian(h,e)}function T(a,c,d){var e=a._scene.canvas,f=e.clientWidth,g=e.clientHeight,h=Math.tan(.5*a.frustum.fovy),i=a.frustum.aspectRatio*h,j=a.frustum.near,k=2/f*c.x-1,l=2/g*(g-c.y)-1,m=a.positionWC;b.clone(m,d.origin);var n=b.multiplyByScalar(a.directionWC,j,Na);b.add(m,n,n);var o=b.multiplyByScalar(a.rightWC,k*j*i,Oa),p=b.multiplyByScalar(a.upWC,l*j*h,Pa),q=b.add(n,o,d.direction);return b.add(q,p,q),b.subtract(q,m,q),b.normalize(q,q),d}function U(a,c,d){var e=a._scene.canvas,f=e.clientWidth,g=e.clientHeight,h=2/f*c.x-1;h*=.5*(a.frustum.right-a.frustum.left);var i=2/g*(g-c.y)-1;i*=.5*(a.frustum.top-a.frustum.bottom);var j=d.origin;return b.clone(a.position,j),b.multiplyByScalar(a.right,h,Qa),b.add(Qa,j,j),b.multiplyByScalar(a.up,i,Qa),b.add(Qa,j,j),
b.clone(a.directionWC,d.direction),d}function V(a,c){var d=a.position,e=d.x<-a._maxCoord.x||d.x>a._maxCoord.x,f=d.y<-a._maxCoord.y||d.y>a._maxCoord.y,g=e||f,h=a.frustum,j=h.top,k=h.bottom,m=h.right,n=h.left,o=a._max2Dfrustum,p=m>a._max2Dfrustum.right;if(g||p){var q=b.clone(d);q.x>a._maxCoord.x?q.x=a._maxCoord.x:q.x<-a._maxCoord.x&&(q.x=-a._maxCoord.x),q.y>a._maxCoord.y?q.y=a._maxCoord.y:q.y<-a._maxCoord.y&&(q.y=-a._maxCoord.y);var r=function(c){g&&(a.position=b.lerp(d,q,c.time,a.position)),p&&(a.frustum.top=l.lerp(j,o.top,c.time),a.frustum.bottom=l.lerp(k,o.bottom,c.time),a.frustum.right=l.lerp(m,o.right,c.time),a.frustum.left=l.lerp(n,o.left,c.time))};return{easingFunction:i.EXPONENTIAL_OUT,startObject:{time:0},stopObject:{time:1},duration:c,update:r}}return void 0}function W(a,c,d,e,f,g){var h=b.clone(c);d.y>e?h.y-=d.y-e:d.y<-e&&(h.y+=-e-d.y),d.z>f?h.z-=d.z-f:d.z<-f&&(h.z+=-f-d.z);var j=function(d){var e=b.lerp(c,h,d.time,new b);a.worldToCameraCoordinatesPoint(e,a.position)};return{easingFunction:i.EXPONENTIAL_OUT,startObject:{time:0},stopObject:{time:1},duration:g,update:j}}function X(a,c){var d=a.position,e=a.direction,f=a.worldToCameraCoordinatesVector(b.UNIT_X,Ra),g=-b.dot(f,d)/b.dot(f,e),h=b.add(d,b.multiplyByScalar(e,g,Sa),Sa);a.cameraToWorldCoordinatesPoint(h,h),d=a.cameraToWorldCoordinatesPoint(a.position,Ta);var i=Math.tan(.5*a.frustum.fovy),j=a.frustum.aspectRatio*i,k=b.magnitude(b.subtract(d,h,Ua)),l=j*k,m=i*k,n=a._maxCoord.x,o=a._maxCoord.y,p=Math.max(l-n,n),q=Math.max(m-o,o);if(d.z<-p||d.z>p||d.y<-q||d.y>q){var r=h.y<-p||h.y>p,s=h.z<-q||h.z>q;if(r||s)return W(a,d,h,p,q,c)}return void 0}var Y=function(a){this._scene=a,this.transform=n.clone(n.IDENTITY),this._transform=n.clone(n.IDENTITY),this._invTransform=n.clone(n.IDENTITY),this._actualTransform=n.clone(n.IDENTITY),this._actualInvTransform=n.clone(n.IDENTITY),this.position=new b,this._position=new b,this._positionWC=new b,this._positionCartographic=new d,this.direction=new b,this._direction=new b,this._directionWC=new b,this.up=new b,this._up=new b,this._upWC=new b,this.right=new b,this._right=new b,this._rightWC=new b,this.frustum=new t,this.frustum.aspectRatio=a.drawingBufferWidth/a.drawingBufferHeight,this.frustum.fov=l.toRadians(60),this.defaultMoveAmount=1e5,this.defaultLookAmount=Math.PI/60,this.defaultRotateAmount=Math.PI/3600,this.defaultZoomAmount=1e5,this.constrainedAxis=void 0,this.maximumTranslateFactor=1.5,this.maximumZoomFactor=2.5,this._viewMatrix=new n,this._invViewMatrix=new n,v(this),this._mode=u.SCENE3D,this._modeChanged=!0;var c=a.mapProjection;this._projection=c,this._maxCoord=c.project(new d(Math.PI,l.PI_OVER_TWO)),this._max2Dfrustum=void 0,this.viewRectangle(Y.DEFAULT_VIEW_RECTANGLE);var e=b.magnitude(this.position);e+=e*Y.DEFAULT_VIEW_FACTOR,b.normalize(this.position,this.position),b.multiplyByScalar(this.position,e,this.position)};Y.TRANSFORM_2D=new n(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),Y.TRANSFORM_2D_INVERSE=n.inverseTransformation(Y.TRANSFORM_2D,new n),Y.DEFAULT_VIEW_RECTANGLE=q.fromDegrees(-95,-20,-70,90),Y.DEFAULT_VIEW_FACTOR=.5;var Z=new d,$=new b,_=new b,aa=new c,ba=new c,ca=new c,da=new c,ea=new c,fa=new b,ga=new n,ha=new m,ia=new b,ja=new b,ka=new b;g(Y.prototype,{inverseTransform:{get:function(){return y(this),this._invTransform}},viewMatrix:{get:function(){return y(this),this._viewMatrix}},inverseViewMatrix:{get:function(){return y(this),this._invViewMatrix}},positionCartographic:{get:function(){return y(this),this._positionCartographic}},positionWC:{get:function(){return y(this),this._positionWC}},directionWC:{get:function(){return y(this),this._directionWC}},upWC:{get:function(){return y(this),this._upWC}},rightWC:{get:function(){return y(this),this._rightWC}},heading:{get:function(){return this._mode===u.SCENE2D||this._mode===u.COLUMBUS_VIEW?z(this):this._mode===u.SCENE3D?A(this):void 0},set:function(a){this._mode===u.SCENE2D||this._mode===u.COLUMBUS_VIEW?B(this,a):this._mode===u.SCENE3D&&C(this,a)}},tilt:{get:function(){return this._mode===u.COLUMBUS_VIEW?D(this):this._mode===u.SCENE3D?E(this):void 0},set:function(a){(this._mode===u.COLUMBUS_VIEW||this._mode===u.SCENE3D)&&(a=l.clamp(a,-l.PI_OVER_TWO,l.PI_OVER_TWO),a-=this.tilt,this.look(this.right,a))}}}),Y.prototype.update=function(a){var b=!1;if(a!==this._mode&&(this._mode=a,this._modeChanged=a!==u.MORPHING,b=this._mode===u.SCENE2D),b){var c=this._max2Dfrustum=this.frustum.clone(),d=2,e=c.top/c.right;c.right=this._maxCoord.x*d,c.left=-c.right,c.top=e*c.right,c.bottom=-c.top}};var la=new b,ma=new b,na=new b;Y.prototype.setTransform=function(a){var c=b.clone(this.positionWC,la),d=b.clone(this.upWC,ma),e=b.clone(this.directionWC,na);n.clone(a,this.transform),y(this);var f=this._actualInvTransform;n.multiplyByPoint(f,c,this.position),n.multiplyByPointAsVector(f,e,this.direction),n.multiplyByPointAsVector(f,d,this.up),b.cross(this.direction,this.up,this.right)},Y.prototype.worldToCameraCoordinates=function(a,b){return f(b)||(b=new c),y(this),n.multiplyByVector(this._actualInvTransform,a,b)},Y.prototype.worldToCameraCoordinatesPoint=function(a,c){return f(c)||(c=new b),y(this),n.multiplyByPoint(this._actualInvTransform,a,c)},Y.prototype.worldToCameraCoordinatesVector=function(a,c){return f(c)||(c=new b),y(this),n.multiplyByPointAsVector(this._actualInvTransform,a,c)},Y.prototype.cameraToWorldCoordinates=function(a,b){return f(b)||(b=new c),y(this),n.multiplyByVector(this._actualTransform,a,b)},Y.prototype.cameraToWorldCoordinatesPoint=function(a,c){return f(c)||(c=new b),y(this),n.multiplyByPoint(this._actualTransform,a,c)},Y.prototype.cameraToWorldCoordinatesVector=function(a,c){return f(c)||(c=new b),y(this),n.multiplyByPointAsVector(this._actualTransform,a,c)};var oa=new b;Y.prototype.move=function(a,c){var d=this.position;b.multiplyByScalar(a,c,oa),b.add(d,oa,d),this._mode===u.SCENE2D&&F(this,d)},Y.prototype.moveForward=function(a){a=e(a,this.defaultMoveAmount),this.move(this.direction,a)},Y.prototype.moveBackward=function(a){a=e(a,this.defaultMoveAmount),this.move(this.direction,-a)},Y.prototype.moveUp=function(a){a=e(a,this.defaultMoveAmount),this.move(this.up,a)},Y.prototype.moveDown=function(a){a=e(a,this.defaultMoveAmount),this.move(this.up,-a)},Y.prototype.moveRight=function(a){a=e(a,this.defaultMoveAmount),this.move(this.right,a)},Y.prototype.moveLeft=function(a){a=e(a,this.defaultMoveAmount),this.move(this.right,-a)},Y.prototype.lookLeft=function(a){a=e(a,this.defaultLookAmount),this.look(this.up,-a)},Y.prototype.lookRight=function(a){a=e(a,this.defaultLookAmount),this.look(this.up,a)},Y.prototype.lookUp=function(a){a=e(a,this.defaultLookAmount),this.look(this.right,-a)},Y.prototype.lookDown=function(a){a=e(a,this.defaultLookAmount),this.look(this.right,a)};var pa=new o,qa=new m;Y.prototype.look=function(a,b){var c=e(b,this.defaultLookAmount),d=o.fromAxisAngle(a,-c,pa),f=m.fromQuaternion(d,qa),g=this.direction,h=this.up,i=this.right;m.multiplyByVector(f,g,g),m.multiplyByVector(f,h,h),m.multiplyByVector(f,i,i)},Y.prototype.twistLeft=function(a){a=e(a,this.defaultLookAmount),this.look(this.direction,a)},Y.prototype.twistRight=function(a){a=e(a,this.defaultLookAmount),this.look(this.direction,-a)};var ra=new o,sa=new m;Y.prototype.rotate=function(a,c){var d=e(c,this.defaultRotateAmount),f=o.fromAxisAngle(a,-d,ra),g=m.fromQuaternion(f,sa);m.multiplyByVector(g,this.position,this.position),m.multiplyByVector(g,this.direction,this.direction),m.multiplyByVector(g,this.up,this.up),b.cross(this.direction,this.up,this.right),b.cross(this.right,this.direction,this.up)},Y.prototype.rotateDown=function(a){a=e(a,this.defaultRotateAmount),G(this,a)},Y.prototype.rotateUp=function(a){a=e(a,this.defaultRotateAmount),G(this,-a)};var ta=new b,ua=new b,va=new b,wa=new b;Y.prototype.rotateRight=function(a){a=e(a,this.defaultRotateAmount),H(this,-a)},Y.prototype.rotateLeft=function(a){a=e(a,this.defaultRotateAmount),H(this,a)},Y.prototype.zoomIn=function(a){a=e(a,this.defaultZoomAmount),this._mode===u.SCENE2D?I(this,a):J(this,a)},Y.prototype.zoomOut=function(a){a=e(a,this.defaultZoomAmount),this._mode===u.SCENE2D?I(this,-a):J(this,-a)},Y.prototype.getMagnitude=function(){return this._mode===u.SCENE3D?b.magnitude(this.position):this._mode===u.COLUMBUS_VIEW?Math.abs(this.position.z):this._mode===u.SCENE2D?Math.max(this.frustum.right-this.frustum.left,this.frustum.top-this.frustum.bottom):void 0},Y.prototype.setPositionCartographic=function(a){this._mode===u.SCENE2D?K(this,a):this._mode===u.COLUMBUS_VIEW?L(this,a):this._mode===u.SCENE3D&&M(this,a)},Y.prototype.lookAt=function(c,d,e){if(this._mode===u.SCENE2D){a.clone(d,this.position),b.negate(b.UNIT_Z,this.direction),b.clone(e,this.up),this.up.z=0,b.magnitudeSquared(this.up)<l.EPSILON10&&b.clone(b.UNIT_Y,this.up),b.cross(this.direction,this.up,this.right);var f=this.frustum,g=f.top/f.right;return f.right=c.z,f.left=-f.right,f.top=g*f.right,f.bottom=-f.top,void 0}this.position=b.clone(c,this.position),this.direction=b.normalize(b.subtract(d,c,this.direction),this.direction),this.right=b.normalize(b.cross(this.direction,e,this.right),this.right),this.up=b.cross(this.right,this.direction,this.up)};var xa=new d,ya=new b,za=new b,Aa=new b,Ba=new b,Ca=new b,Da={direction:new b,right:new b,up:new b},Ea=new d,Fa=new b,Ga=new b,Ha=new d,Ia=new b,Ja=new b;Y.prototype.getRectangleCameraCoordinates=function(a,b){return this._mode===u.SCENE3D?N(this,a,this._projection.ellipsoid,b,!0):this._mode===u.COLUMBUS_VIEW?O(this,a,this._projection,b,!0):this._mode===u.SCENE2D?P(this,a,this._projection,b,!0):void 0},Y.prototype.viewRectangle=function(a,b){b=e(b,j.WGS84),this._mode===u.SCENE3D?N(this,a,b,this.position):this._mode===u.COLUMBUS_VIEW?O(this,a,this._projection,this.position):this._mode===u.SCENE2D&&P(this,a,this._projection,this.position)};var Ka=new p,La=new p,Ma=new p;Y.prototype.pickEllipsoid=function(a,c,d){if(f(d)||(d=new b),c=e(c,j.WGS84),this._mode===u.SCENE3D)d=Q(this,a,c,d);else if(this._mode===u.SCENE2D)d=R(this,a,this._projection,d);else{if(this._mode!==u.COLUMBUS_VIEW)return void 0;d=S(this,a,this._projection,d)}return d};var Na=new b,Oa=new b,Pa=new b,Qa=new b;Y.prototype.getPickRay=function(a,b){f(b)||(b=new p);var c=this.frustum;return f(c.aspectRatio)&&f(c.fov)&&f(c.near)?T(this,a,b):U(this,a,b)};var Ra=new b,Sa=new b,Ta=new b,Ua=new b;return Y.prototype.createCorrectPositionTween=function(a){return this._mode===u.SCENE2D?V(this,a):this._mode===u.COLUMBUS_VIEW?X(this,a):void 0},Y.prototype.flyTo=function(a){var b=this._scene;b.tweens.add(s.createTween(b,a))},Y.prototype.flyToRectangle=function(a){var b=this._scene;b.tweens.add(s.createTweenRectangle(b,a))},Y.prototype.clone=function(){var a=new Y(this._scene);return a.position=b.clone(this.position),a.direction=b.clone(this.direction),a.up=b.clone(this.up),a.right=b.clone(this.right),a.transform=n.clone(this.transform),a.frustum=this.frustum.clone(),a},Y}),c("Scene/CameraEventType",["../Core/freezeObject"],function(a){"use strict";var b={LEFT_DRAG:0,RIGHT_DRAG:1,MIDDLE_DRAG:2,WHEEL:3,PINCH:4};return a(b)}),c("Scene/CameraEventAggregator",["../Core/Cartesian2","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/KeyboardEventModifier","../Core/Math","../Core/ScreenSpaceEventHandler","../Core/ScreenSpaceEventType","./CameraEventType"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,c){var d=a;return b(c)&&(d+="+"+c),d}function l(b,c){a.clone(b.distance.startPosition,c.distance.startPosition),a.clone(b.distance.endPosition,c.distance.endPosition),a.clone(b.angleAndHeight.startPosition,c.angleAndHeight.startPosition),a.clone(b.angleAndHeight.endPosition,c.angleAndHeight.endPosition)}function m(c,d,e){var f=k(j.PINCH,d),g=c._update,h=c._isDown,m=c._eventStartPosition,n=c._pressTime,o=c._releaseTime;g[f]=!0,h[f]=!1,m[f]=new a;var p=c._movement[f];b(p)||(p=c._movement[f]={}),p.distance={startPosition:new a,endPosition:new a},p.angleAndHeight={startPosition:new a,endPosition:new a},p.prevAngle=0,c._eventHandler.setInputAction(function(b){c._buttonsDown++,h[f]=!0,n[f]=new Date,a.clone(b.position,m[f])},i.PINCH_START,d),c._eventHandler.setInputAction(function(){c._buttonsDown=Math.max(c._buttonsDown-1,0),h[f]=!1,o[f]=new Date},i.PINCH_END,d),c._eventHandler.setInputAction(function(b){if(h[f]){g[f]?(l(b,p),g[f]=!1,p.prevAngle=p.angleAndHeight.startPosition.x):(a.clone(b.distance.endPosition,p.distance.endPosition),a.clone(b.angleAndHeight.endPosition,p.angleAndHeight.endPosition));for(var c=p.angleAndHeight.endPosition.x,d=p.prevAngle,i=2*Math.PI;c>=d+Math.PI;)c-=i;for(;c<d-Math.PI;)c+=i;p.angleAndHeight.endPosition.x=-c*e.clientWidth/12,p.angleAndHeight.startPosition.x=-d*e.clientWidth/12}},i.PINCH_MOVE,d)}function n(c,d){var e=k(j.WHEEL,d),f=c._update;f[e]=!0;var h=c._movement[e];b(h)||(h=c._movement[e]={}),h.startPosition=new a,h.endPosition=new a,c._eventHandler.setInputAction(function(b){var c=15*g.toRadians(b);f[e]?(a.clone(a.ZERO,h.startPosition),h.endPosition.x=0,h.endPosition.y=c,f[e]=!1):h.endPosition.y=h.endPosition.y+c},i.WHEEL,d)}function o(c,d,e){var f=k(e,d),g=c._isDown,h=c._eventStartPosition,l=c._pressTime,m=c._releaseTime;g[f]=!1,h[f]=new a;var n=c._lastMovement[f];b(n)||(n=c._lastMovement[f]={startPosition:new a,endPosition:new a,valid:!1});var o,p;e===j.LEFT_DRAG?(o=i.LEFT_DOWN,p=i.LEFT_UP):e===j.RIGHT_DRAG?(o=i.RIGHT_DOWN,p=i.RIGHT_UP):e===j.MIDDLE_DRAG&&(o=i.MIDDLE_DOWN,p=i.MIDDLE_UP),c._eventHandler.setInputAction(function(b){c._buttonsDown++,n.valid=!1,g[f]=!0,l[f]=new Date,a.clone(b.position,h[f])},o,d),c._eventHandler.setInputAction(function(){c._buttonsDown=Math.max(c._buttonsDown-1,0),g[f]=!1,m[f]=new Date},p,d)}function p(b,c){a.clone(b.startPosition,c.startPosition),a.clone(b.endPosition,c.endPosition)}function q(c,d){var e=c._update,f=c._movement,g=c._lastMovement,h=c._isDown;for(var l in j)if(j.hasOwnProperty(l)){var m=j[l];if(b(m)){var n=k(m,d);e[n]=!0,b(c._lastMovement[n])||(c._lastMovement[n]={startPosition:new a,endPosition:new a,valid:!1}),b(c._movement[n])||(c._movement[n]={startPosition:new a,endPosition:new a})}}c._eventHandler.setInputAction(function(i){for(var l in j)if(j.hasOwnProperty(l)){var m=j[l];if(b(m)){var n=k(m,d);h[n]&&(e[n]?(p(f[n],g[n]),g[n].valid=!0,p(i,f[n]),e[n]=!1):a.clone(i.endPosition,f[n].endPosition))}}a.clone(i.endPosition,c._currentMousePosition)},i.MOUSE_MOVE,d)}var r=function(c){this._eventHandler=new h(c),this._update={},this._movement={},this._lastMovement={},this._isDown={},this._eventStartPosition={},this._pressTime={},this._releaseTime={},this._buttonsDown=0,this._currentMousePosition=new a,n(this,void 0),m(this,void 0,c),o(this,void 0,j.LEFT_DRAG),o(this,void 0,j.RIGHT_DRAG),o(this,void 0,j.MIDDLE_DRAG),q(this,void 0);for(var d in f)if(f.hasOwnProperty(d)){var e=f[d];b(e)&&(n(this,e),m(this,e,c),o(this,e,j.LEFT_DRAG),o(this,e,j.RIGHT_DRAG),o(this,e,j.MIDDLE_DRAG),q(this,e))}};return c(r.prototype,{currentMousePosition:{get:function(){return this._currentMousePosition}},anyButtonDown:{get:function(){var a=!(this._update[k(j.WHEEL)]&&this._update[k(j.WHEEL,f.SHIFT)]&&this._update[k(j.WHEEL,f.CTRL)]&&this._update[k(j.WHEEL,f.ALT)]);return this._buttonsDown>0||a}}}),r.prototype.isMoving=function(a,b){var c=k(a,b);return!this._update[c]},r.prototype.getMovement=function(a,b){var c=k(a,b),d=this._movement[c];return d},r.prototype.getLastMovement=function(a,b){var c=k(a,b),d=this._lastMovement[c];return d.valid?d:void 0},r.prototype.isButtonDown=function(a,b){var c=k(a,b);return this._isDown[c]},r.prototype.getStartMousePosition=function(a,b){if(a===j.WHEEL)return this._currentMousePosition;var c=k(a,b);return this._eventStartPosition[c]},r.prototype.getButtonPressTime=function(a,b){var c=k(a,b);return this._pressTime[c]},r.prototype.getButtonReleaseTime=function(a,b){var c=k(a,b);return this._releaseTime[c]},r.prototype.reset=function(){for(var a in this._update)this._update.hasOwnProperty(a)&&(this._update[a]=!0)},r.prototype.isDestroyed=function(){return!1},r.prototype.destroy=function(){return this._eventHandler=this._eventHandler&&this._eventHandler.destroy(),d(this)},r}),c("Scene/CreditDisplay",["../Core/Credit","../Core/defaultValue","../Core/defined","../Core/destroyObject","../Core/DeveloperError"],function(a,b,c,d){"use strict";function e(a,b,d){if(!c(a.element)){var e=a.text,f=a.link,g=document.createElement("span");if(a.hasLink()){var h=document.createElement("a");h.textContent=e,h.href=f,h.target="_blank",g.appendChild(h)}else g.textContent=e;g.className="cesium-credit-text",a.element=g}if(b.hasChildNodes()){var i=document.createElement("span");i.textContent=d,i.className="cesium-credit-delimiter",b.appendChild(i)}b.appendChild(a.element)}function f(a,b){if(!c(a.element)){var d=a.text,e=a.link,f=document.createElement("span"),g=document.createElement("img");if(g.src=a.imageUrl,g.style["vertical-align"]="bottom",c(d)&&(g.alt=d,g.title=d),a.hasLink()){var h=document.createElement("a");h.appendChild(g),h.href=e,h.target="_blank",f.appendChild(h)}else f.appendChild(g);f.className="cesium-credit-image",a.element=f}b.appendChild(a.element)}function g(b,c){for(var d=b.length,e=0;d>e;e++){var f=b[e];if(a.equals(f,c))return!0}return!1}function h(a){var b=a.element;if(c(b)){var d=b.parentNode;if(!a.hasImage()){var e=b.previousSibling;null===e&&(e=b.nextSibling),null!==e&&d.removeChild(e)}d.removeChild(b)}}function i(a,b){var c,d,f,g=a._displayedCredits.textCredits;for(c=0;c<b.length;c++)f=b[c],d=g.indexOf(f),-1===d?e(f,a._textContainer,a._delimiter):g.splice(d,1);for(c=0;c<g.length;c++)f=g[c],h(f)}function j(a,b){var c,d,e,g=a._displayedCredits.imageCredits;for(c=0;c<b.length;c++)e=b[c],d=g.indexOf(e),-1===d?f(e,a._imageContainer):g.splice(d,1);for(c=0;c<g.length;c++)e=g[c],h(e)}var k=function(a,c){var d=document.createElement("span");d.className="cesium-credit-imageContainer";var e=document.createElement("span");e.className="cesium-credit-textContainer",a.appendChild(d),a.appendChild(e),this._delimiter=b(c,"  "),this._container=a,this._textContainer=e,this._imageContainer=d,this._defaultImageCredits=[],this._defaultTextCredits=[],this._displayedCredits={imageCredits:[],textCredits:[]},this._currentFrameCredits={imageCredits:[],textCredits:[]}};return k.prototype.addCredit=function(a){if(a.hasImage()){var b=this._currentFrameCredits.imageCredits;g(b,a)||g(this._defaultImageCredits,a)||b.push(a)}else{var c=this._currentFrameCredits.textCredits;g(c,a)||g(this._defaultTextCredits,a)||c.push(a)}},k.prototype.addDefaultCredit=function(a){if(a.hasImage()){var b=this._defaultImageCredits;g(b,a)||b.push(a)}else{var c=this._defaultTextCredits;g(c,a)||c.push(a)}},k.prototype.removeDefaultCredit=function(a){var b;a.hasImage()?(b=this._defaultImageCredits.indexOf(a),-1!==b&&this._defaultImageCredits.splice(b,1)):(b=this._defaultTextCredits.indexOf(a),-1!==b&&this._defaultTextCredits.splice(b,1))},k.prototype.beginFrame=function(){this._currentFrameCredits.imageCredits.length=0,this._currentFrameCredits.textCredits.length=0},k.prototype.endFrame=function(){var a=this._defaultTextCredits.concat(this._currentFrameCredits.textCredits),b=this._defaultImageCredits.concat(this._currentFrameCredits.imageCredits);i(this,a),j(this,b),this._displayedCredits.textCredits=a,this._displayedCredits.imageCredits=b},k.prototype.destroy=function(){return this._container.removeChild(this._textContainer),this._container.removeChild(this._imageContainer),d(this)},k.prototype.isDestroyed=function(){return!1},k}),c("Scene/DebugAppearance",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","./Appearance"],function(a,b,c,d,e){"use strict";var f=function(b){b=a(b,a.EMPTY_OBJECT);var c,f=b.attributeName,g=a(b.glslDatatype,"vec3"),h="v_"+f;if("normal"===f||"binormal"===f|"tangent"===f)c="vec4 getColor() { return vec4(("+h+" + vec3(1.0)) * 0.5, 1.0); }\n";else switch("st"===f&&(g="vec2"),g){case"float":c="vec4 getColor() { return vec4(vec3("+h+"), 1.0); }\n";break;case"vec2":c="vec4 getColor() { return vec4("+h+", 0.0, 1.0); }\n";break;case"vec3":c="vec4 getColor() { return vec4("+h+", 1.0); }\n";break;case"vec4":c="vec4 getColor() { return "+h+"; }\n";break;default:throw new d("options.glslDatatype must be float, vec2, vec3, or vec4.")}var i="attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute "+g+" "+f+";\n"+"varying "+g+" "+h+";\n"+"void main()\n"+"{\n"+"vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);\n"+h+" = "+f+";\n"+"gl_Position = czm_modelViewProjectionRelativeToEye * p;\n"+"}",j="varying "+g+" "+h+";\n"+c+"\n"+"void main()\n"+"{\n"+"gl_FragColor = getColor();\n"+"}";this.material=void 0,this.translucent=a(b.translucent,!1),this._vertexShaderSource=a(b.vertexShaderSource,i),this._fragmentShaderSource=a(b.fragmentShaderSource,j),this._renderState=e.getDefaultRenderState(!1,!1,b.renderState),this._closed=a(b.closed,!1),this._attributeName=f,this._glslDatatype=g};return c(f.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},attributeName:{get:function(){return this._attributeName}},glslDatatype:{get:function(){return this._glslDatatype}}}),f.prototype.getFragmentShaderSource=e.prototype.getFragmentShaderSource,f.prototype.isTranslucent=e.prototype.isTranslucent,f.prototype.getRenderState=e.prototype.getRenderState,f}),c("Scene/DebugModelMatrixPrimitive",["../Core/Cartesian3","../Core/Color","../Core/defaultValue","../Core/defined","../Core/destroyObject","../Core/GeometryInstance","../Core/Matrix4","../Core/PolylineGeometry","./PolylineColorAppearance","./Primitive"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=function(a){a=c(a,c.EMPTY_OBJECT),this.length=c(a.length,1e7),this._length=void 0,this.width=c(a.width,2),this._width=void 0,this.show=c(a.show,!0),this.modelMatrix=g.clone(c(a.modelMatrix,g.IDENTITY)),this._modelMatrix=new g,this.id=a.id,this._id=void 0,this._primitive=void 0};return k.prototype.update=function(c,e,k){if(this.show){if(!d(this._primitive)||!g.equals(this._modelMatrix,this.modelMatrix)||this._length!==this.length||this._width!==this.width||this._id!==this.id){this._modelMatrix=g.clone(this.modelMatrix,this._modelMatrix),this._length=this.length,this._width=this.width,this._id=this.id,d(this._primitive)&&this._primitive.destroy(),0===this.modelMatrix[12]&&0===this.modelMatrix[13]&&0===this.modelMatrix[14]&&(this.modelMatrix[14]=.01);var l=new f({geometry:new h({positions:[a.ZERO,a.UNIT_X],width:this.width,vertexFormat:i.VERTEX_FORMAT,colors:[b.RED,b.RED],followSurface:!1}),modelMatrix:g.multiplyByUniformScale(this.modelMatrix,this.length,new g),id:this.id,pickPrimitive:this}),m=new f({geometry:new h({positions:[a.ZERO,a.UNIT_Y],width:this.width,vertexFormat:i.VERTEX_FORMAT,colors:[b.GREEN,b.GREEN],followSurface:!1}),modelMatrix:g.multiplyByUniformScale(this.modelMatrix,this.length,new g),id:this.id,pickPrimitive:this}),n=new f({geometry:new h({positions:[a.ZERO,a.UNIT_Z],width:this.width,vertexFormat:i.VERTEX_FORMAT,colors:[b.BLUE,b.BLUE],followSurface:!1}),modelMatrix:g.multiplyByUniformScale(this.modelMatrix,this.length,new g),id:this.id,pickPrimitive:this});this._primitive=new j({geometryInstances:[l,m,n],appearance:new i,asynchronous:!1})}this._primitive.update(c,e,k)}},k.prototype.isDestroyed=function(){return!1},k.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),e(this)},k}),c("Scene/DepthFunction",["../Core/freezeObject"],function(a){"use strict";var b={NEVER:512,LESS:513,EQUAL:514,LESS_OR_EQUAL:515,GREATER:516,NOT_EQUAL:517,GREATER_OR_EQUAL:518,ALWAYS:519};return a(b)}),c("Shaders/EllipsoidFS",[],function(){"use strict";return"#ifdef WRITE_DEPTH\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\n#endif\nuniform vec3 u_radii;\nuniform vec3 u_oneOverEllipsoidRadiiSquared;\nvarying vec3 v_positionEC;\nvec4 computeEllipsoidColor(czm_ray ray, float intersection, float side)\n{\nvec3 positionEC = czm_pointAlongRay(ray, intersection);\nvec3 positionMC = (czm_inverseModelView * vec4(positionEC, 1.0)).xyz;\nvec3 geodeticNormal = normalize(czm_geodeticSurfaceNormal(positionMC, vec3(0.0), u_oneOverEllipsoidRadiiSquared));\nvec3 sphericalNormal = normalize(positionMC / u_radii);\nvec3 normalMC = geodeticNormal * side;\nvec3 normalEC = normalize(czm_normal * normalMC);\nvec2 st = czm_ellipsoidWgs84TextureCoordinates(sphericalNormal);\nvec3 positionToEyeEC = -positionEC;\nczm_materialInput materialInput;\nmaterialInput.s = st.s;\nmaterialInput.st = st;\nmaterialInput.str = (positionMC + u_radii) / u_radii;\nmaterialInput.normalEC = normalEC;\nmaterialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(positionMC, normalEC);\nmaterialInput.positionToEyeEC = positionToEyeEC;\nczm_material material = czm_getMaterial(materialInput);\n#ifdef ONLY_SUN_LIGHTING\nreturn czm_private_phong(normalize(positionToEyeEC), material);\n#else\nreturn czm_phong(normalize(positionToEyeEC), material);\n#endif\n}\nvoid main()\n{\nfloat maxRadius = max(u_radii.x, max(u_radii.y, u_radii.z)) * 1.5;\nvec3 direction = normalize(v_positionEC);\nvec3 ellipsoidCenter = czm_modelView[3].xyz;\nfloat t1 = -1.0;\nfloat t2 = -1.0;\nfloat b = -2.0 * dot(direction, ellipsoidCenter);\nfloat c = dot(ellipsoidCenter, ellipsoidCenter) - maxRadius * maxRadius;\nfloat discriminant = b * b - 4.0 * c;\nif (discriminant >= 0.0) {\nt1 = (-b - sqrt(discriminant)) * 0.5;\nt2 = (-b + sqrt(discriminant)) * 0.5;\n}\nif (t1 < 0.0 && t2 < 0.0) {\ndiscard;\n}\nfloat t = min(t1, t2);\nif (t < 0.0) {\nt = 0.0;\n}\nczm_ellipsoid ellipsoid = czm_ellipsoidNew(ellipsoidCenter, u_radii);\nczm_ray ray = czm_ray(t * direction, direction);\nczm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid);\nif (czm_isEmpty(intersection))\n{\ndiscard;\n}\nvec4 outsideFaceColor = (intersection.start != 0.0) ? computeEllipsoidColor(ray, intersection.start, 1.0) : vec4(0.0);\nvec4 insideFaceColor = (outsideFaceColor.a < 1.0) ? computeEllipsoidColor(ray, intersection.stop, -1.0) : vec4(0.0);\ngl_FragColor = mix(insideFaceColor, outsideFaceColor, outsideFaceColor.a);\ngl_FragColor.a = 1.0 - (1.0 - insideFaceColor.a) * (1.0 - outsideFaceColor.a);\n#ifdef WRITE_DEPTH\n#ifdef GL_EXT_frag_depth\nt = (intersection.start != 0.0) ? intersection.start : intersection.stop;\nvec3 positionEC = czm_pointAlongRay(ray, t);\nvec4 positionCC = czm_projection * vec4(positionEC, 1.0);\nfloat z = positionCC.z / positionCC.w;\nfloat n = czm_depthRange.near;\nfloat f = czm_depthRange.far;\ngl_FragDepthEXT = (z * (f - n) + f + n) * 0.5;\n#endif\n#endif\n}\n"}),c("Shaders/EllipsoidVS",[],function(){"use strict";return"attribute vec3 position;\nuniform vec3 u_radii;\nvarying vec3 v_positionEC;\nvoid main()\n{\nvec4 p = vec4(u_radii * position, 1.0);\nv_positionEC = (czm_modelView * p).xyz;\ngl_Position = czm_modelViewProjection * p;\ngl_Position.z = clamp(gl_Position.z, czm_depthRange.near, czm_depthRange.far);\n}\n"}),c("Scene/EllipsoidPrimitive",["../Core/BoundingSphere","../Core/BoxGeometry","../Core/Cartesian3","../Core/combine","../Core/defaultValue","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Core/Matrix4","../Core/VertexFormat","../Renderer/BufferUsage","../Renderer/DrawCommand","../Renderer/ShaderSource","../Shaders/EllipsoidFS","../Shaders/EllipsoidVS","./BlendingState","./CullFace","./Material","./Pass","./SceneMode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";function u(a){var d=a.cache.ellipsoidPrimitive_vertexArray;if(f(d))return d;var e=b.createGeometry(b.fromDimensions({dimensions:new c(2,2,2),vertexFormat:j.POSITION_ONLY}));return d=a.createVertexArrayFromGeometry({geometry:e,attributeLocations:v,bufferUsage:k.STATIC_DRAW,interleave:!0}),a.cache.ellipsoidPrimitive_vertexArray=d,d}var v={position:0},w=function(b){b=e(b,e.EMPTY_OBJECT),this.center=c.clone(e(b.center,c.ZERO)),this._center=new c,this.radii=c.clone(b.radii),this._radii=new c,this._oneOverEllipsoidRadiiSquared=new c,this._boundingSphere=new a,this.modelMatrix=i.clone(e(b.modelMatrix,i.IDENTITY)),this._modelMatrix=new i,this._computedModelMatrix=new i,this.show=e(b.show,!0),this.material=e(b.material,r.fromType(r.ColorType)),this._material=void 0,this._translucent=void 0,this.id=b.id,this._id=void 0,this.debugShowBoundingVolume=e(b.debugShowBoundingVolume,!1),this.onlySunLighting=e(b.onlySunLighting,!1),this._onlySunLighting=!1,this._sp=void 0,this._rs=void 0,this._va=void 0,this._pickSP=void 0,this._pickId=void 0,this._colorCommand=new l({owner:e(b._owner,this)}),this._pickCommand=new l({owner:e(b._owner,this)});var d=this;this._uniforms={u_radii:function(){return d.radii},u_oneOverEllipsoidRadiiSquared:function(){return d._oneOverEllipsoidRadiiSquared}},this._pickUniforms={czm_pickColor:function(){return d._pickId.color}}};return w.prototype.update=function(b,e,g){if(this.show&&e.mode===t.SCENE3D&&f(this.center)&&f(this.radii)){var h=this.material.isTranslucent(),j=this._translucent!==h;(!f(this._rs)||j)&&(this._translucent=h,this._rs=b.createRenderState({cull:{enabled:!0,face:q.FRONT},depthTest:{enabled:!0},depthMask:!h&&b.fragmentDepth,blending:h?p.ALPHA_BLEND:void 0})),f(this._va)||(this._va=u(b));var k=!1,l=this.radii;if(!c.equals(this._radii,l)){c.clone(l,this._radii);var r=this._oneOverEllipsoidRadiiSquared;r.x=1/(l.x*l.x),r.y=1/(l.y*l.y),r.z=1/(l.z*l.z),k=!0}i.equals(this.modelMatrix,this._modelMatrix)&&c.equals(this.center,this._center)||(i.clone(this.modelMatrix,this._modelMatrix),c.clone(this.center,this._center),i.multiplyByTranslation(this.modelMatrix,this.center,this._computedModelMatrix),k=!0),k&&(c.clone(c.ZERO,this._boundingSphere.center),this._boundingSphere.radius=c.maximumComponent(l),a.transform(this._boundingSphere,this._computedModelMatrix,this._boundingSphere));var w=this._material!==this.material;this._material=this.material,this._material.update(b);var x=this.onlySunLighting!==this._onlySunLighting;this._onlySunLighting=this.onlySunLighting;var y,z=this._colorCommand;(w||x||j)&&(y=new m({sources:[this.material.shaderSource,n]}),this.onlySunLighting&&y.defines.push("ONLY_SUN_LIGHTING"),!h&&b.fragmentDepth&&y.defines.push("WRITE_DEPTH"),this._sp=b.replaceShaderProgram(this._sp,o,y,v),z.vertexArray=this._va,z.renderState=this._rs,z.shaderProgram=this._sp,z.uniformMap=d(this._uniforms,this.material._uniforms),z.executeInClosestFrustum=h);var A=e.passes;if(A.render&&(z.boundingVolume=this._boundingSphere,z.debugShowBoundingVolume=this.debugShowBoundingVolume,z.modelMatrix=this._computedModelMatrix,z.pass=h?s.TRANSLUCENT:s.OPAQUE,g.push(z)),A.pick){var B=this._pickCommand;f(this._pickId)&&this._id===this.id||(this._id=this.id,this._pickId=this._pickId&&this._pickId.destroy(),this._pickId=b.createPickId({primitive:this,id:this.id})),(w||x||!f(this._pickSP))&&(y=new m({sources:[this.material.shaderSource,n],pickColorQualifier:"uniform"}),this.onlySunLighting&&y.defines.push("ONLY_SUN_LIGHTING"),!h&&b.fragmentDepth&&y.defines.push("WRITE_DEPTH"),this._pickSP=b.replaceShaderProgram(this._pickSP,o,y,v),B.vertexArray=this._va,B.renderState=this._rs,B.shaderProgram=this._pickSP,B.uniformMap=d(d(this._uniforms,this._pickUniforms),this.material._uniforms),B.executeInClosestFrustum=h),B.boundingVolume=this._boundingSphere,B.modelMatrix=this._computedModelMatrix,B.pass=h?s.TRANSLUCENT:s.OPAQUE,g.push(B)}}},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._pickSP=this._pickSP&&this._pickSP.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),g(this)},w}),c("Shaders/Appearances/EllipsoidSurfaceAppearanceFS",[],function(){"use strict"
;return"varying vec3 v_positionMC;\nvarying vec3 v_positionEC;\nvarying vec2 v_st;\nvoid main()\n{\nczm_materialInput materialInput;\nvec3 normalEC = czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0));\n#ifdef FACE_FORWARD\nnormalEC = normalize(faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC));\n#else\nnormalEC = normalize(normalEC);\n#endif\nmaterialInput.s = v_st.s;\nmaterialInput.st = v_st;\nmaterialInput.str = vec3(v_st, 0.0);\nmaterialInput.normalEC = normalEC;\nmaterialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);\nvec3 positionToEyeEC = -v_positionEC;\nmaterialInput.positionToEyeEC = positionToEyeEC;\nczm_material material = czm_getMaterial(materialInput);\n#ifdef FLAT\ngl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\ngl_FragColor = czm_phong(normalize(positionToEyeEC), material);\n#endif\n}\n"}),c("Shaders/Appearances/EllipsoidSurfaceAppearanceVS",[],function(){"use strict";return"attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec2 st;\nvarying vec3 v_positionMC;\nvarying vec3 v_positionEC;\nvarying vec2 v_st;\nvoid main()\n{\nvec4 p = czm_computePosition();\nv_positionMC = position3DHigh + position3DLow;\nv_positionEC = (czm_modelViewRelativeToEye * p).xyz;\nv_st = st;\ngl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"}),c("Scene/EllipsoidSurfaceAppearance",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/VertexFormat","../Shaders/Appearances/EllipsoidSurfaceAppearanceFS","../Shaders/Appearances/EllipsoidSurfaceAppearanceVS","./Appearance","./Material"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(c){c=a(c,a.EMPTY_OBJECT);var d=a(c.translucent,!0),i=a(c.aboveGround,!1);this.material=b(c.material)?c.material:h.fromType(h.ColorType),this.translucent=a(c.translucent,!0),this._vertexShaderSource=a(c.vertexShaderSource,f),this._fragmentShaderSource=a(c.fragmentShaderSource,e),this._renderState=g.getDefaultRenderState(d,!i,c.renderState),this._closed=!1,this._flat=a(c.flat,!1),this._faceForward=a(c.faceForward,i),this._aboveGround=i};return c(i.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return i.VERTEX_FORMAT}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}},aboveGround:{get:function(){return this._aboveGround}}}),i.VERTEX_FORMAT=d.POSITION_AND_ST,i.prototype.getFragmentShaderSource=g.prototype.getFragmentShaderSource,i.prototype.isTranslucent=g.prototype.isTranslucent,i.prototype.getRenderState=g.prototype.getRenderState,i}),c("Shaders/PostProcessFilters/FXAA",[],function(){"use strict";return"#ifndef FXAA_PRESET\n#define FXAA_PRESET 3\n#endif\n#if (FXAA_PRESET == 3)\n#define FXAA_EDGE_THRESHOLD      (1.0/8.0)\n#define FXAA_EDGE_THRESHOLD_MIN  (1.0/24.0)\n#define FXAA_SEARCH_STEPS        16\n#define FXAA_SEARCH_THRESHOLD    (1.0/4.0)\n#define FXAA_SUBPIX_CAP          (3.0/4.0)\n#define FXAA_SUBPIX_TRIM         (1.0/4.0)\n#endif\n#if (FXAA_PRESET == 4)\n#define FXAA_EDGE_THRESHOLD      (1.0/8.0)\n#define FXAA_EDGE_THRESHOLD_MIN  (1.0/24.0)\n#define FXAA_SEARCH_STEPS        24\n#define FXAA_SEARCH_THRESHOLD    (1.0/4.0)\n#define FXAA_SUBPIX_CAP          (3.0/4.0)\n#define FXAA_SUBPIX_TRIM         (1.0/4.0)\n#endif\n#if (FXAA_PRESET == 5)\n#define FXAA_EDGE_THRESHOLD      (1.0/8.0)\n#define FXAA_EDGE_THRESHOLD_MIN  (1.0/24.0)\n#define FXAA_SEARCH_STEPS        32\n#define FXAA_SEARCH_THRESHOLD    (1.0/4.0)\n#define FXAA_SUBPIX_CAP          (3.0/4.0)\n#define FXAA_SUBPIX_TRIM         (1.0/4.0)\n#endif\n#define FXAA_SUBPIX_TRIM_SCALE (1.0/(1.0 - FXAA_SUBPIX_TRIM))\nfloat FxaaLuma(vec3 rgb) {\nreturn rgb.y * (0.587/0.299) + rgb.x;\n}\nvec3 FxaaLerp3(vec3 a, vec3 b, float amountOfA) {\nreturn (vec3(-amountOfA) * b) + ((a * vec3(amountOfA)) + b);\n}\nvec4 FxaaTexOff(sampler2D tex, vec2 pos, ivec2 off, vec2 rcpFrame) {\nfloat x = pos.x + float(off.x) * rcpFrame.x;\nfloat y = pos.y + float(off.y) * rcpFrame.y;\nreturn texture2D(tex, vec2(x, y));\n}\nvec3 FxaaPixelShader(vec2 pos, sampler2D tex, vec2 rcpFrame)\n{\nvec3 rgbN = FxaaTexOff(tex, pos.xy, ivec2( 0,-1), rcpFrame).xyz;\nvec3 rgbW = FxaaTexOff(tex, pos.xy, ivec2(-1, 0), rcpFrame).xyz;\nvec3 rgbM = FxaaTexOff(tex, pos.xy, ivec2( 0, 0), rcpFrame).xyz;\nvec3 rgbE = FxaaTexOff(tex, pos.xy, ivec2( 1, 0), rcpFrame).xyz;\nvec3 rgbS = FxaaTexOff(tex, pos.xy, ivec2( 0, 1), rcpFrame).xyz;\nfloat lumaN = FxaaLuma(rgbN);\nfloat lumaW = FxaaLuma(rgbW);\nfloat lumaM = FxaaLuma(rgbM);\nfloat lumaE = FxaaLuma(rgbE);\nfloat lumaS = FxaaLuma(rgbS);\nfloat rangeMin = min(lumaM, min(min(lumaN, lumaW), min(lumaS, lumaE)));\nfloat rangeMax = max(lumaM, max(max(lumaN, lumaW), max(lumaS, lumaE)));\nfloat range = rangeMax - rangeMin;\nif(range < max(FXAA_EDGE_THRESHOLD_MIN, rangeMax * FXAA_EDGE_THRESHOLD))\n{\nreturn rgbM;\n}\nvec3 rgbL = rgbN + rgbW + rgbM + rgbE + rgbS;\nfloat lumaL = (lumaN + lumaW + lumaE + lumaS) * 0.25;\nfloat rangeL = abs(lumaL - lumaM);\nfloat blendL = max(0.0, (rangeL / range) - FXAA_SUBPIX_TRIM) * FXAA_SUBPIX_TRIM_SCALE;\nblendL = min(FXAA_SUBPIX_CAP, blendL);\nvec3 rgbNW = FxaaTexOff(tex, pos.xy, ivec2(-1,-1), rcpFrame).xyz;\nvec3 rgbNE = FxaaTexOff(tex, pos.xy, ivec2( 1,-1), rcpFrame).xyz;\nvec3 rgbSW = FxaaTexOff(tex, pos.xy, ivec2(-1, 1), rcpFrame).xyz;\nvec3 rgbSE = FxaaTexOff(tex, pos.xy, ivec2( 1, 1), rcpFrame).xyz;\nrgbL += (rgbNW + rgbNE + rgbSW + rgbSE);\nrgbL *= vec3(1.0/9.0);\nfloat lumaNW = FxaaLuma(rgbNW);\nfloat lumaNE = FxaaLuma(rgbNE);\nfloat lumaSW = FxaaLuma(rgbSW);\nfloat lumaSE = FxaaLuma(rgbSE);\nfloat edgeVert =\nabs((0.25 * lumaNW) + (-0.5 * lumaN) + (0.25 * lumaNE)) +\nabs((0.50 * lumaW ) + (-1.0 * lumaM) + (0.50 * lumaE )) +\nabs((0.25 * lumaSW) + (-0.5 * lumaS) + (0.25 * lumaSE));\nfloat edgeHorz =\nabs((0.25 * lumaNW) + (-0.5 * lumaW) + (0.25 * lumaSW)) +\nabs((0.50 * lumaN ) + (-1.0 * lumaM) + (0.50 * lumaS )) +\nabs((0.25 * lumaNE) + (-0.5 * lumaE) + (0.25 * lumaSE));\nbool horzSpan = edgeHorz >= edgeVert;\nfloat lengthSign = horzSpan ? -rcpFrame.y : -rcpFrame.x;\nif(!horzSpan)\n{\nlumaN = lumaW;\nlumaS = lumaE;\n}\nfloat gradientN = abs(lumaN - lumaM);\nfloat gradientS = abs(lumaS - lumaM);\nlumaN = (lumaN + lumaM) * 0.5;\nlumaS = (lumaS + lumaM) * 0.5;\nif (gradientN < gradientS)\n{\nlumaN = lumaS;\nlumaN = lumaS;\ngradientN = gradientS;\nlengthSign *= -1.0;\n}\nvec2 posN;\nposN.x = pos.x + (horzSpan ? 0.0 : lengthSign * 0.5);\nposN.y = pos.y + (horzSpan ? lengthSign * 0.5 : 0.0);\ngradientN *= FXAA_SEARCH_THRESHOLD;\nvec2 posP = posN;\nvec2 offNP = horzSpan ? vec2(rcpFrame.x, 0.0) : vec2(0.0, rcpFrame.y);\nfloat lumaEndN = lumaN;\nfloat lumaEndP = lumaN;\nbool doneN = false;\nbool doneP = false;\nposN += offNP * vec2(-1.0, -1.0);\nposP += offNP * vec2( 1.0,  1.0);\nfor(int i = 0; i < FXAA_SEARCH_STEPS; i++) {\nif(!doneN)\n{\nlumaEndN = FxaaLuma(texture2D(tex, posN.xy).xyz);\n}\nif(!doneP)\n{\nlumaEndP = FxaaLuma(texture2D(tex, posP.xy).xyz);\n}\ndoneN = doneN || (abs(lumaEndN - lumaN) >= gradientN);\ndoneP = doneP || (abs(lumaEndP - lumaN) >= gradientN);\nif(doneN && doneP)\n{\nbreak;\n}\nif(!doneN)\n{\nposN -= offNP;\n}\nif(!doneP)\n{\nposP += offNP;\n}\n}\nfloat dstN = horzSpan ? pos.x - posN.x : pos.y - posN.y;\nfloat dstP = horzSpan ? posP.x - pos.x : posP.y - pos.y;\nbool directionN = dstN < dstP;\nlumaEndN = directionN ? lumaEndN : lumaEndP;\nif(((lumaM - lumaN) < 0.0) == ((lumaEndN - lumaN) < 0.0))\n{\nlengthSign = 0.0;\n}\nfloat spanLength = (dstP + dstN);\ndstN = directionN ? dstN : dstP;\nfloat subPixelOffset = (0.5 + (dstN * (-1.0/spanLength))) * lengthSign;\nvec3 rgbF = texture2D(tex, vec2(\npos.x + (horzSpan ? 0.0 : subPixelOffset),\npos.y + (horzSpan ? subPixelOffset : 0.0))).xyz;\nreturn FxaaLerp3(rgbL, rgbF, blendL);\n}\nuniform sampler2D u_texture;\nuniform vec2 u_step;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\ngl_FragColor = vec4(FxaaPixelShader(v_textureCoordinates, u_texture, u_step), 1.0);\n}\n"}),c("Scene/FXAA",["../Core/Cartesian2","../Core/Color","../Core/defined","../Core/destroyObject","../Core/PixelFormat","../Renderer/ClearCommand","../Renderer/PixelDatatype","../Renderer/RenderbufferFormat","../Shaders/PostProcessFilters/FXAA"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){a._fbo=a._fbo&&a._fbo.destroy(),a._texture=a._texture&&a._texture.destroy(),a._depthTexture=a._depthTexture&&a._depthTexture.destroy(),a._depthRenderbuffer=a._depthRenderbuffer&&a._depthRenderbuffer.destroy(),a._fbo=void 0,a._texture=void 0,a._depthTexture=void 0,a._depthRenderbuffer=void 0,c(a._command)&&(a._command.shaderProgram=a._command.shaderProgram&&a._command.shaderProgram.destroy(),a._command=void 0)}var k=function(){this._texture=void 0,this._depthTexture=void 0,this._depthRenderbuffer=void 0,this._fbo=void 0,this._command=void 0;var a=new f({color:new b(0,0,0,0),depth:1,owner:this});this._clearCommand=a};return k.prototype.update=function(b){var d=b.drawingBufferWidth,f=b.drawingBufferHeight,j=this._texture,k=!c(j)||j.width!==d||j.height!==f;if(k&&(this._texture=this._texture&&this._texture.destroy(),this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy(),this._texture=b.createTexture2D({width:d,height:f,pixelFormat:e.RGBA,pixelDatatype:g.UNSIGNED_BYTE}),b.depthTexture?this._depthTexture=b.createTexture2D({width:d,height:f,pixelFormat:e.DEPTH_COMPONENT,pixelDatatype:g.UNSIGNED_SHORT}):this._depthRenderbuffer=b.createRenderbuffer({width:d,height:f,format:h.DEPTH_COMPONENT16})),(!c(this._fbo)||k)&&(this._fbo=this._fbo&&this._fbo.destroy(),this._fbo=b.createFramebuffer({colorTextures:[this._texture],depthTexture:this._depthTexture,depthRenderbuffer:this._depthRenderbuffer,destroyAttachments:!1})),c(this._command)||(this._command=b.createViewportQuadCommand(i,{renderState:b.createRenderState(),owner:this})),k){var l=this,m=new a(1/this._texture.width,1/this._texture.height);this._command.uniformMap={u_texture:function(){return l._texture},u_step:function(){return m}}}},k.prototype.execute=function(a,b){this._command.execute(a,b)},k.prototype.clear=function(a,c,d){var e=c.framebuffer;c.framebuffer=this._fbo,b.clone(d,this._clearCommand.color),this._clearCommand.execute(a,c),c.framebuffer=e},k.prototype.getColorFramebuffer=function(){return this._fbo},k.prototype.isDestroyed=function(){return!1},k.prototype.destroy=function(){return j(this),d(this)},k}),c("Scene/FrameRateMonitor",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Event","../Core/getTimestamp","../Core/TimeConstants"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){if(!(a._pauseCount>0)){var b=g();if(a._needsQuietPeriod)a._needsQuietPeriod=!1,a._frameTimes.length=0,a._quietPeriodEndTime=b+a.quietPeriod/h.SECONDS_PER_MILLISECOND,a._warmupPeriodEndTime=a._quietPeriodEndTime+(a.warmupPeriod+a.samplingWindow)/h.SECONDS_PER_MILLISECOND;else if(b>=a._quietPeriodEndTime){a._frameTimes.push(b);var c=b-a.samplingWindow/h.SECONDS_PER_MILLISECOND;if(a._frameTimes.length>=2&&a._frameTimes[0]<=c){for(;a._frameTimes.length>=2&&a._frameTimes[1]<c;)a._frameTimes.shift();var d=(b-a._frameTimes[0])/(a._frameTimes.length-1);a._lastFramesPerSecond=1e3/d;var e=1e3/(b>a._warmupPeriodEndTime?a.minimumFrameRateAfterWarmup:a.minimumFrameRateDuringWarmup);d>e?a._frameRateIsLow||(a._frameRateIsLow=!0,a._needsQuietPeriod=!0,a.lowFrameRate.raiseEvent(a.scene,a._lastFramesPerSecond)):a._frameRateIsLow&&(a._frameRateIsLow=!1,a._needsQuietPeriod=!0,a.nominalFrameRate.raiseEvent(a.scene,a._lastFramesPerSecond))}}}}function j(a){document[a._hiddenPropertyName]?a.pause():a.unpause()}var k=function(c){function d(){j(e)}this._scene=c.scene,this.samplingWindow=a(c.samplingWindow,k.defaultSettings.samplingWindow),this.quietPeriod=a(c.quietPeriod,k.defaultSettings.quietPeriod),this.warmupPeriod=a(c.warmupPeriod,k.defaultSettings.warmupPeriod),this.minimumFrameRateDuringWarmup=a(c.minimumFrameRateDuringWarmup,k.defaultSettings.minimumFrameRateDuringWarmup),this.minimumFrameRateAfterWarmup=a(c.minimumFrameRateAfterWarmup,k.defaultSettings.minimumFrameRateAfterWarmup),this._lowFrameRate=new f,this._nominalFrameRate=new f,this._frameTimes=[],this._needsQuietPeriod=!0,this._quietPeriodEndTime=0,this._warmupPeriodEndTime=0,this._frameRateIsLow=!1,this._lastFramesPerSecond=void 0,this._pauseCount=0;var e=this;this._preRenderRemoveListener=this._scene.preRender.addEventListener(function(a,b){i(e,b)}),this._hiddenPropertyName=b(document.hidden)?"hidden":b(document.mozHidden)?"mozHidden":b(document.msHidden)?"msHidden":b(document.webkitHidden)?"webkitHidden":void 0;var g=b(document.hidden)?"visibilitychange":b(document.mozHidden)?"mozvisibilitychange":b(document.msHidden)?"msvisibilitychange":b(document.webkitHidden)?"webkitvisibilitychange":void 0;this._visibilityChangeRemoveListener=void 0,b(g)&&(document.addEventListener(g,d,!1),this._visibilityChangeRemoveListener=function(){document.removeEventListener(g,d,!1)})};return k.defaultSettings={samplingWindow:5,quietPeriod:2,warmupPeriod:5,minimumFrameRateDuringWarmup:4,minimumFrameRateAfterWarmup:8},k.fromScene=function(a){return(!b(a._frameRateMonitor)||a._frameRateMonitor.isDestroyed())&&(a._frameRateMonitor=new k({scene:a})),a._frameRateMonitor},c(k.prototype,{scene:{get:function(){return this._scene}},lowFrameRate:{get:function(){return this._lowFrameRate}},nominalFrameRate:{get:function(){return this._nominalFrameRate}},lastFramesPerSecond:{get:function(){return this._lastFramesPerSecond}}}),k.prototype.pause=function(){++this._pauseCount,1===this._pauseCount&&(this._frameTimes.length=0,this._lastFramesPerSecond=void 0)},k.prototype.unpause=function(){--this._pauseCount,this._pauseCount<=0&&(this._pauseCount=0,this._needsQuietPeriod=!0)},k.prototype.isDestroyed=function(){return!1},k.prototype.destroy=function(){return this._preRenderRemoveListener(),b(this._visibilityChangeRemoveListener)&&this._visibilityChangeRemoveListener(),d(this)},k}),c("Scene/FrameState",["./SceneMode"],function(a){"use strict";var b=function(b){this.mode=a.SCENE3D,this.morphTime=a.getMorphTime(a.SCENE3D),this.frameNumber=0,this.time=void 0,this.mapProjection=void 0,this.camera=void 0,this.cullingVolume=void 0,this.occluder=void 0,this.passes={render:!1,pick:!1},this.creditDisplay=b,this.afterRender=[],this.scene3DOnly=!1};return b}),c("Scene/FrustumCommands",["../Core/defaultValue"],function(a){"use strict";var b=function(b,c){this.near=a(b,0),this.far=a(c,0),this.opaqueCommands=[],this.translucentCommands=[]};return b}),c("Shaders/GlobeFS",[],function(){"use strict";return"uniform vec4 u_initialColor;\n#if TEXTURE_UNITS > 0\nuniform sampler2D u_dayTextures[TEXTURE_UNITS];\nuniform vec4 u_dayTextureTranslationAndScale[TEXTURE_UNITS];\n#ifdef APPLY_ALPHA\nuniform float u_dayTextureAlpha[TEXTURE_UNITS];\n#endif\n#ifdef APPLY_BRIGHTNESS\nuniform float u_dayTextureBrightness[TEXTURE_UNITS];\n#endif\n#ifdef APPLY_CONTRAST\nuniform float u_dayTextureContrast[TEXTURE_UNITS];\n#endif\n#ifdef APPLY_HUE\nuniform float u_dayTextureHue[TEXTURE_UNITS];\n#endif\n#ifdef APPLY_SATURATION\nuniform float u_dayTextureSaturation[TEXTURE_UNITS];\n#endif\n#ifdef APPLY_GAMMA\nuniform float u_dayTextureOneOverGamma[TEXTURE_UNITS];\n#endif\nuniform vec4 u_dayTextureTexCoordsRectangle[TEXTURE_UNITS];\n#endif\n#ifdef SHOW_REFLECTIVE_OCEAN\nuniform sampler2D u_waterMask;\nuniform vec4 u_waterMaskTranslationAndScale;\nuniform float u_zoomedOutOceanSpecularIntensity;\n#endif\n#ifdef SHOW_OCEAN_WAVES\nuniform sampler2D u_oceanNormalMap;\n#endif\n#ifdef ENABLE_DAYNIGHT_SHADING\nuniform vec2 u_lightingFadeDistance;\n#endif\nvarying vec3 v_positionMC;\nvarying vec3 v_positionEC;\nvarying vec2 v_textureCoordinates;\nvarying vec3 v_normalMC;\nvarying vec3 v_normalEC;\nvec4 sampleAndBlend(\nvec4 previousColor,\nsampler2D texture,\nvec2 tileTextureCoordinates,\nvec4 textureCoordinateRectangle,\nvec4 textureCoordinateTranslationAndScale,\nfloat textureAlpha,\nfloat textureBrightness,\nfloat textureContrast,\nfloat textureHue,\nfloat textureSaturation,\nfloat textureOneOverGamma)\n{\nvec2 alphaMultiplier = step(textureCoordinateRectangle.st, tileTextureCoordinates);\ntextureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;\nalphaMultiplier = step(vec2(0.0), textureCoordinateRectangle.pq - tileTextureCoordinates);\ntextureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;\nvec2 translation = textureCoordinateTranslationAndScale.xy;\nvec2 scale = textureCoordinateTranslationAndScale.zw;\nvec2 textureCoordinates = tileTextureCoordinates * scale + translation;\nvec4 sample = texture2D(texture, textureCoordinates);\nvec3 color = sample.rgb;\nfloat alpha = sample.a;\n#ifdef APPLY_BRIGHTNESS\ncolor = mix(vec3(0.0), color, textureBrightness);\n#endif\n#ifdef APPLY_CONTRAST\ncolor = mix(vec3(0.5), color, textureContrast);\n#endif\n#ifdef APPLY_HUE\ncolor = czm_hue(color, textureHue);\n#endif\n#ifdef APPLY_SATURATION\ncolor = czm_saturation(color, textureSaturation);\n#endif\n#ifdef APPLY_GAMMA\ncolor = pow(color, vec3(textureOneOverGamma));\n#endif\nfloat sourceAlpha = alpha * textureAlpha;\nfloat outAlpha = mix(previousColor.a, 1.0, sourceAlpha);\nvec3 outColor = mix(previousColor.rgb * previousColor.a, color, sourceAlpha) / outAlpha;\nreturn vec4(outColor, outAlpha);\n}\nvec4 computeDayColor(vec4 initialColor, vec2 textureCoordinates);\nvec4 computeWaterColor(vec3 positionEyeCoordinates, vec2 textureCoordinates, mat3 enuToEye, vec4 imageryColor, float specularMapValue);\nvoid main()\n{\nvec4 color = computeDayColor(u_initialColor, clamp(v_textureCoordinates, 0.0, 1.0));\n#ifdef SHOW_TILE_BOUNDARIES\nif (v_textureCoordinates.x < (1.0/256.0) || v_textureCoordinates.x > (255.0/256.0) ||\nv_textureCoordinates.y < (1.0/256.0) || v_textureCoordinates.y > (255.0/256.0))\n{\ncolor = vec4(1.0, 0.0, 0.0, 1.0);\n}\n#endif\n#if defined(SHOW_REFLECTIVE_OCEAN) || defined(ENABLE_DAYNIGHT_SHADING)\nvec3 normalMC = normalize(czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));\nvec3 normalEC = normalize(czm_normal3D * normalMC);\n#elif defined(ENABLE_VERTEX_LIGHTING)\nvec3 normalMC = normalize(v_normalMC);\nvec3 normalEC = normalize(v_normalEC);\n#endif\n#ifdef SHOW_REFLECTIVE_OCEAN\nvec2 waterMaskTranslation = u_waterMaskTranslationAndScale.xy;\nvec2 waterMaskScale = u_waterMaskTranslationAndScale.zw;\nvec2 waterMaskTextureCoordinates = v_textureCoordinates * waterMaskScale + waterMaskTranslation;\nfloat mask = texture2D(u_waterMask, waterMaskTextureCoordinates).r;\nif (mask > 0.0)\n{\nmat3 enuToEye = czm_eastNorthUpToEyeCoordinates(v_positionMC, normalEC);\nvec2 ellipsoidTextureCoordinates = czm_ellipsoidWgs84TextureCoordinates(normalMC);\nvec2 ellipsoidFlippedTextureCoordinates = czm_ellipsoidWgs84TextureCoordinates(normalMC.zyx);\nvec2 textureCoordinates = mix(ellipsoidTextureCoordinates, ellipsoidFlippedTextureCoordinates, czm_morphTime * smoothstep(0.9, 0.95, normalMC.z));\ncolor = computeWaterColor(v_positionEC, textureCoordinates, enuToEye, color, mask);\n}\n#endif\n#ifdef ENABLE_VERTEX_LIGHTING\nfloat diffuseIntensity = clamp(czm_getLambertDiffuse(czm_sunDirectionEC, normalEC) * 0.9 + 0.3, 0.0, 1.0);\ngl_FragColor = vec4(color.rgb * diffuseIntensity, color.a);\n#elif defined(ENABLE_DAYNIGHT_SHADING)\nfloat diffuseIntensity = clamp(czm_getLambertDiffuse(czm_sunDirectionEC, normalEC) * 5.0 + 0.3, 0.0, 1.0);\nfloat cameraDist = length(czm_view[3]);\nfloat fadeOutDist = u_lightingFadeDistance.x;\nfloat fadeInDist = u_lightingFadeDistance.y;\nfloat t = clamp((cameraDist - fadeOutDist) / (fadeInDist - fadeOutDist), 0.0, 1.0);\ndiffuseIntensity = mix(1.0, diffuseIntensity, t);\ngl_FragColor = vec4(color.rgb * diffuseIntensity, color.a);\n#else\ngl_FragColor = color;\n#endif\n}\n#ifdef SHOW_REFLECTIVE_OCEAN\nfloat waveFade(float edge0, float edge1, float x)\n{\nfloat y = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\nreturn pow(1.0 - y, 5.0);\n}\nfloat linearFade(float edge0, float edge1, float x)\n{\nreturn clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n}\nconst float oceanFrequencyLowAltitude = 825000.0;\nconst float oceanAnimationSpeedLowAltitude = 0.004;\nconst float oceanOneOverAmplitudeLowAltitude = 1.0 / 2.0;\nconst float oceanSpecularIntensity = 0.5;\nconst float oceanFrequencyHighAltitude = 125000.0;\nconst float oceanAnimationSpeedHighAltitude = 0.008;\nconst float oceanOneOverAmplitudeHighAltitude = 1.0 / 2.0;\nvec4 computeWaterColor(vec3 positionEyeCoordinates, vec2 textureCoordinates, mat3 enuToEye, vec4 imageryColor, float specularMapValue)\n{\nvec3 positionToEyeEC = -positionEyeCoordinates;\nfloat positionToEyeECLength = length(positionToEyeEC);\nvec3 normalizedpositionToEyeEC = normalize(normalize(positionToEyeEC));\nfloat waveIntensity = waveFade(70000.0, 1000000.0, positionToEyeECLength);\n#ifdef SHOW_OCEAN_WAVES\nfloat time = czm_frameNumber * oceanAnimationSpeedHighAltitude;\nvec4 noise = czm_getWaterNoise(u_oceanNormalMap, textureCoordinates * oceanFrequencyHighAltitude, time, 0.0);\nvec3 normalTangentSpaceHighAltitude = vec3(noise.xy, noise.z * oceanOneOverAmplitudeHighAltitude);\ntime = czm_frameNumber * oceanAnimationSpeedLowAltitude;\nnoise = czm_getWaterNoise(u_oceanNormalMap, textureCoordinates * oceanFrequencyLowAltitude, time, 0.0);\nvec3 normalTangentSpaceLowAltitude = vec3(noise.xy, noise.z * oceanOneOverAmplitudeLowAltitude);\nfloat highAltitudeFade = linearFade(0.0, 60000.0, positionToEyeECLength);\nfloat lowAltitudeFade = 1.0 - linearFade(20000.0, 60000.0, positionToEyeECLength);\nvec3 normalTangentSpace =\n(highAltitudeFade * normalTangentSpaceHighAltitude) +\n(lowAltitudeFade * normalTangentSpaceLowAltitude);\nnormalTangentSpace = normalize(normalTangentSpace);\nnormalTangentSpace.xy *= waveIntensity;\nnormalTangentSpace = normalize(normalTangentSpace);\n#else\nvec3 normalTangentSpace = vec3(0.0, 0.0, 1.0);\n#endif\nvec3 normalEC = enuToEye * normalTangentSpace;\nconst vec3 waveHighlightColor = vec3(0.3, 0.45, 0.6);\nfloat diffuseIntensity = czm_getLambertDiffuse(czm_sunDirectionEC, normalEC);\nvec3 diffuseHighlight = waveHighlightColor * diffuseIntensity;\n#ifdef SHOW_OCEAN_WAVES\nfloat tsPerturbationRatio = normalTangentSpace.z;\nvec3 nonDiffuseHighlight = mix(waveHighlightColor * 5.0 * (1.0 - tsPerturbationRatio), vec3(0.0), diffuseIntensity);\n#else\nvec3 nonDiffuseHighlight = vec3(0.0);\n#endif\nfloat specularIntensity = czm_getSpecular(czm_sunDirectionEC, normalizedpositionToEyeEC, normalEC, 10.0) + 0.25 * czm_getSpecular(czm_moonDirectionEC, normalizedpositionToEyeEC, normalEC, 10.0);\nfloat surfaceReflectance = mix(0.0, mix(u_zoomedOutOceanSpecularIntensity, oceanSpecularIntensity, waveIntensity), specularMapValue);\nfloat specular = specularIntensity * surfaceReflectance;\nreturn vec4(imageryColor.rgb + diffuseHighlight + nonDiffuseHighlight + specular, imageryColor.a);\n}\n#endif\n"}),c("Shaders/GlobeFSDepth",[],function(){"use strict";return"varying vec4 positionEC;\nvoid main()\n{\nczm_ellipsoid ellipsoid = czm_getWgs84EllipsoidEC();\nvec3 direction = normalize(positionEC.xyz);\nczm_ray ray = czm_ray(vec3(0.0), direction);\nczm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid);\nif (!czm_isEmpty(intersection))\n{\ngl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);\n}\nelse\n{\ndiscard;\n}\n}\n"}),c("Shaders/GlobeFSPole",[],function(){"use strict";return"uniform vec3 u_color;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\nczm_ellipsoid ellipsoid = czm_getWgs84EllipsoidEC();\nvec3 direction = normalize(czm_windowToEyeCoordinates(gl_FragCoord).xyz);\nczm_ray ray = czm_ray(vec3(0.0), direction);\nczm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid);\nif (!czm_isEmpty(intersection))\n{\nvec3 positionEC = czm_pointAlongRay(ray, intersection.start);\nvec3 positionMC = (czm_inverseModelView * vec4(positionEC, 1.0)).xyz;\nvec3 normalMC = normalize(czm_geodeticSurfaceNormal(positionMC, vec3(0.0), vec3(1.0)));\nvec3 normalEC = normalize(czm_normal * normalMC);\nvec3 startDayColor = u_color;\ngl_FragColor = vec4(startDayColor, 1.0);\n}\nelse\n{\ndiscard;\n}\n}\n"}),c("Shaders/GlobeVS",[],function(){"use strict";return"attribute vec4 position3DAndHeight;\nattribute vec4 textureCoordAndEncodedNormals;\nuniform vec3 u_center3D;\nuniform mat4 u_modifiedModelView;\nuniform vec4 u_tileRectangle;\nuniform vec2 u_southAndNorthLatitude;\nuniform vec3 u_southMercatorYLowAndHighAndOneOverHeight;\nvarying vec3 v_positionMC;\nvarying vec3 v_positionEC;\nvarying vec2 v_textureCoordinates;\nvarying vec3 v_normalMC;\nvarying vec3 v_normalEC;\nvec4 getPosition(vec3 position3DWC);\nfloat get2DYPositionFraction();\nvec4 getPosition3DMode(vec3 position3DWC)\n{\nreturn czm_projection * (u_modifiedModelView * vec4(position3DAndHeight.xyz, 1.0));\n}\nfloat get2DMercatorYPositionFraction()\n{\nconst float maxTileWidth = 0.003068;\nfloat positionFraction = textureCoordAndEncodedNormals.y;\nfloat southLatitude = u_southAndNorthLatitude.x;\nfloat northLatitude = u_southAndNorthLatitude.y;\nif (northLatitude - southLatitude > maxTileWidth)\n{\nfloat southMercatorYLow = u_southMercatorYLowAndHighAndOneOverHeight.x;\nfloat southMercatorYHigh = u_southMercatorYLowAndHighAndOneOverHeight.y;\nfloat oneOverMercatorHeight = u_southMercatorYLowAndHighAndOneOverHeight.z;\nfloat currentLatitude = mix(southLatitude, northLatitude, textureCoordAndEncodedNormals.y);\ncurrentLatitude = clamp(currentLatitude, -czm_webMercatorMaxLatitude, czm_webMercatorMaxLatitude);\npositionFraction = czm_latitudeToWebMercatorFraction(currentLatitude, southMercatorYLow, southMercatorYHigh, oneOverMercatorHeight);\n}\nreturn positionFraction;\n}\nfloat get2DGeographicYPositionFraction()\n{\nreturn textureCoordAndEncodedNormals.y;\n}\nvec4 getPositionPlanarEarth(vec3 position3DWC, float height2D)\n{\nfloat yPositionFraction = get2DYPositionFraction();\nvec4 rtcPosition2D = vec4(height2D, mix(u_tileRectangle.st, u_tileRectangle.pq, vec2(textureCoordAndEncodedNormals.x, yPositionFraction)), 1.0);\nreturn czm_projection * (u_modifiedModelView * rtcPosition2D);\n}\nvec4 getPosition2DMode(vec3 position3DWC)\n{\nreturn getPositionPlanarEarth(position3DWC, 0.0);\n}\nvec4 getPositionColumbusViewMode(vec3 position3DWC)\n{\nreturn getPositionPlanarEarth(position3DWC, position3DAndHeight.w);\n}\nvec4 getPositionMorphingMode(vec3 position3DWC)\n{\nfloat yPositionFraction = get2DYPositionFraction();\nvec4 position2DWC = vec4(0.0, mix(u_tileRectangle.st, u_tileRectangle.pq, vec2(textureCoordAndEncodedNormals.x, yPositionFraction)), 1.0);\nvec4 morphPosition = czm_columbusViewMorph(position2DWC, vec4(position3DWC, 1.0), czm_morphTime);\nreturn czm_modelViewProjection * morphPosition;\n}\nvoid main()\n{\nvec3 position3DWC = position3DAndHeight.xyz + u_center3D;\ngl_Position = getPosition(position3DWC);\n#if defined(SHOW_REFLECTIVE_OCEAN) || defined(ENABLE_DAYNIGHT_SHADING)\nv_positionEC = (czm_modelView3D * vec4(position3DWC, 1.0)).xyz;\nv_positionMC = position3DWC;\n#elif defined(ENABLE_VERTEX_LIGHTING)\nv_positionEC = (czm_modelView3D * vec4(position3DWC, 1.0)).xyz;\nv_positionMC = position3DWC;\nfloat encodedNormal = textureCoordAndEncodedNormals.z;\nv_normalMC = czm_octDecode(encodedNormal);\nv_normalEC = czm_normal3D * v_normalMC;\n#endif\nv_textureCoordinates = textureCoordAndEncodedNormals.xy;\n}\n"}),c("Shaders/GlobeVSDepth",[],function(){"use strict";return"attribute vec4 position;\nvarying vec4 positionEC;\nvoid main()\n{\npositionEC = czm_modelView * position;\ngl_Position = czm_projection * positionEC;\n}\n"}),c("Shaders/GlobeVSPole",[],function(){"use strict";return"attribute vec4 position;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\nfloat x = (position.x - czm_viewport.x) / czm_viewport.z;\nfloat y = (position.y - czm_viewport.y) / czm_viewport.w;\nv_textureCoordinates = vec2(x, y);\ngl_Position = czm_viewportOrthographic * position;\n}\n"}),c("Scene/terrainAttributeLocations",[],function(){"use strict";return{position3DAndHeight:0,textureCoordAndEncodedNormals:1}}),c("Scene/GlobeSurfaceShaderSet",["../Core/defined","../Core/destroyObject","../Scene/terrainAttributeLocations"],function(a,b,c){"use strict";function d(){this.baseVertexShaderSource=void 0,this.baseFragmentShaderSource=void 0,this._attributeLocations=c,this._shaders={}}function e(a,b,c,d,e,f,g,h,i){return""+a+ +b+ +c+ +d+ +e+ +f+ +g+ +h+ +i}return d.prototype.invalidateShaders=function(){var a=this._shaders;for(var b in a)a.hasOwnProperty(b)&&a[b].destroy();this._shaders={}},d.prototype.getShaderProgram=function(b,c,d,f,g,h,i,j,k,l){var m=e(c,d,f,g,h,i,j,k,l),n=this._shaders[m];if(!a(n)){var o=this.baseVertexShaderSource.clone(),p=this.baseFragmentShaderSource.clone();p.defines.push("TEXTURE_UNITS "+c),d&&p.defines.push("APPLY_BRIGHTNESS"),f&&p.defines.push("APPLY_CONTRAST"),g&&p.defines.push("APPLY_HUE"),h&&p.defines.push("APPLY_SATURATION"),i&&p.defines.push("APPLY_GAMMA"),j&&p.defines.push("APPLY_ALPHA"),k&&(p.defines.push("SHOW_REFLECTIVE_OCEAN"),o.defines.push("SHOW_REFLECTIVE_OCEAN")),l&&p.defines.push("SHOW_OCEAN_WAVES");for(var q="vec4 computeDayColor(vec4 initialColor, vec2 textureCoordinates)\n{\n    vec4 color = initialColor;\n",r=0;c>r;++r)q+="    color = sampleAndBlend(\n        color,\n        u_dayTextures["+r+"],\n        textureCoordinates,\n        u_dayTextureTexCoordsRectangle["+r+"],\n        u_dayTextureTranslationAndScale["+r+"],\n        "+(j?"u_dayTextureAlpha["+r+"]":"1.0")+",\n        "+(d?"u_dayTextureBrightness["+r+"]":"0.0")+",\n        "+(f?"u_dayTextureContrast["+r+"]":"0.0")+",\n        "+(g?"u_dayTextureHue["+r+"]":"0.0")+",\n        "+(h?"u_dayTextureSaturation["+r+"]":"0.0")+",\n        "+(i?"u_dayTextureOneOverGamma["+r+"]":"0.0")+"\n    );\n";q+="    return color;\n}",p.sources.push(q),n=b.createShaderProgram(o,p,this._attributeLocations),this._shaders[m]=n}return n},d.prototype.destroy=function(){return this.invalidateShaders(),b(this)},d}),c("Scene/ImageryState",["../Core/freezeObject"],function(a){"use strict";var b={UNLOADED:0,TRANSITIONING:1,RECEIVED:2,TEXTURE_LOADED:3,READY:4,FAILED:5,INVALID:6,PLACEHOLDER:7};return a(b)}),c("Scene/QuadtreeTileLoadState",["../Core/freezeObject"],function(a){"use strict";var b={START:0,LOADING:1,DONE:2,FAILED:3};return a(b)}),c("Scene/TerrainState",["../Core/freezeObject"],function(a){"use strict";var b={FAILED:0,UNLOADED:1,RECEIVING:2,RECEIVED:3,TRANSFORMING:4,TRANSFORMED:5,READY:6};return a(b)}),c("Scene/TileTerrain",["../Core/BoundingSphere","../Core/Cartesian3","../Core/ComponentDatatype","../Core/defined","../Core/DeveloperError","../Core/IndexDatatype","../Core/TileProviderError","../Renderer/BufferUsage","../ThirdParty/when","./terrainAttributeLocations","./TerrainState"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a,b,c,e,f){function h(b){a.data=b,a.state=k.RECEIVED}function j(){a.state=k.FAILED;var d="Failed to obtain terrain tile X: "+c+" Y: "+e+" Level: "+f+".";b._requestError=g.handleError(b._requestError,b,b.errorEvent,d,c,e,f,l)}function l(){a.data=b.requestTileGeometry(c,e,f),d(a.data)?(a.state=k.RECEIVING,i(a.data,h,j)):a.state=k.UNLOADED}l()}function m(a,b,c,e,f,g){var h=c.tilingScheme,j=a.data,l=j.createMesh(h,e,f,g);d(l)&&(a.state=k.TRANSFORMING,i(l,function(b){a.mesh=b,a.state=k.TRANSFORMED},function(){a.state=k.FAILED}))}function n(a,b,e){var g,i,l=c.FLOAT,m=a.mesh.vertices,n=b.createVertexBuffer(m,h.STATIC_DRAW);e.hasVertexNormals?(g=7*c.getSizeInBytes(l),i=3):(g=6*c.getSizeInBytes(l),i=2);var o=4,p=[{index:j.position3DAndHeight,vertexBuffer:n,componentDatatype:l,componentsPerAttribute:o,
offsetInBytes:0,strideInBytes:g},{index:j.textureCoordAndEncodedNormals,vertexBuffer:n,componentDatatype:l,componentsPerAttribute:i,offsetInBytes:o*c.getSizeInBytes(l),strideInBytes:g}],q=a.mesh.indices.indexBuffers||{},r=q[b.id];if(!d(r)||r.isDestroyed()){var s=a.mesh.indices,t=2===s.BYTES_PER_ELEMENT?f.UNSIGNED_SHORT:f.UNSIGNED_INT;r=b.createIndexBuffer(s,h.STATIC_DRAW,t),r.vertexArrayDestroyable=!1,r.referenceCount=1,q[b.id]=r,a.mesh.indices.indexBuffers=q}else++r.referenceCount;a.vertexArray=b.createVertexArray(p,r),a.state=k.READY}var o=function(a){this.state=k.UNLOADED,this.data=void 0,this.mesh=void 0,this.vertexArray=void 0,this.upsampleDetails=a};return o.prototype.freeResources=function(){if(this.state=k.UNLOADED,this.data=void 0,this.mesh=void 0,d(this.vertexArray)){var a=this.vertexArray.indexBuffer;this.vertexArray.destroy(),this.vertexArray=void 0,!a.isDestroyed()&&d(a.referenceCount)&&(--a.referenceCount,0===a.referenceCount&&a.destroy())}},o.prototype.publishToTile=function(c){var d=c.data,e=this.mesh;b.clone(e.center,d.center),d.minimumHeight=e.minimumHeight,d.maximumHeight=e.maximumHeight,d.boundingSphere3D=a.clone(e.boundingSphere3D,d.boundingSphere3D),c.data.occludeePointInScaledSpace=b.clone(e.occludeePointInScaledSpace,d.occludeePointInScaledSpace),d.freeVertexArray(),d.vertexArray=this.vertexArray,this.vertexArray=void 0},o.prototype.processLoadStateMachine=function(a,b,c,d,e){this.state===k.UNLOADED&&l(this,b,c,d,e),this.state===k.RECEIVED&&m(this,a,b,c,d,e),this.state===k.TRANSFORMED&&n(this,a,b,c,d,e)},o.prototype.processUpsampleStateMachine=function(a,b,c,e,f){if(this.state===k.UNLOADED){var g=this.upsampleDetails,h=g.data,j=g.x,l=g.y,o=g.level;if(this.data=h.upsample(b.tilingScheme,j,l,o,c,e,f),!d(this.data))return;this.state=k.RECEIVING;var p=this;i(this.data,function(a){p.data=a,p.state=k.RECEIVED},function(){p.state=k.FAILED})}this.state===k.RECEIVED&&m(this,a,b,c,e,f),this.state===k.TRANSFORMED&&n(this,a,b,c,e,f)},o}),c("Scene/GlobeSurfaceTile",["../Core/BoundingSphere","../Core/Cartesian3","../Core/Cartesian4","../Core/Cartographic","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/IntersectionTests","../Core/PixelFormat","../Core/Rectangle","../Renderer/PixelDatatype","../Renderer/TextureMagnificationFilter","../Renderer/TextureMinificationFilter","../Renderer/TextureWrap","./ImageryState","./QuadtreeTileLoadState","./SceneMode","./TerrainState","./TileTerrain"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";function t(a,c,d,e,g,h){if(b.unpack(d,g*e,h),b.add(a.center,h,h),f(c)&&c.mode!==q.SCENE3D){var i=c.mapProjection,j=i.ellipsoid,k=j.cartesianToCartographic(h);i.project(k,h),b.fromElements(h.z,h.x,h.y,h)}return h}function u(a,c,d){var e=a.data,g=w(a);f(g)&&(e.upsampledTerrain=new s(g)),z(a,c)&&(e.loadedTerrain=new s);for(var h=0,i=d.length;i>h;++h){var k=d.get(h);k.show&&k._createTileImagerySkeletons(a,c)}var l=a.tilingScheme.ellipsoid,m=a.rectangle;l.cartographicToCartesian(j.southwest(m),e.southwestCornerCartesian),l.cartographicToCartesian(j.northeast(m),e.northeastCornerCartesian),M.longitude=m.west,M.latitude=.5*(m.south+m.north),M.height=0;var n=l.cartographicToCartesian(M,K),o=b.cross(n,b.UNIT_Z,I);b.normalize(o,e.westNormal),M.longitude=m.east;var p=l.cartographicToCartesian(M,L),q=b.cross(b.UNIT_Z,p,I);b.normalize(q,e.eastNormal);var r=l.geodeticSurfaceNormalCartographic(j.southeast(m),J),t=b.subtract(n,p,I),u=b.cross(r,t,J);b.normalize(u,e.southNormal);var v=l.geodeticSurfaceNormalCartographic(j.northwest(m),J),x=b.cross(t,v,J);b.normalize(x,e.northNormal)}function v(a,b,c){var d=a.data,g=d.loadedTerrain,h=d.upsampledTerrain,i=!1;f(g)&&(g.processLoadStateMachine(b,c,a.x,a.y,a.level),g.state>=r.RECEIVED&&(d.terrainData!==g.data&&(d.terrainData=g.data,B(b,d),y(a)),i=!0),g.state===r.READY?(g.publishToTile(a),d.pickTerrain=e(d.loadedTerrain,d.upsampledTerrain),d.loadedTerrain=void 0,d.upsampledTerrain=void 0):g.state===r.FAILED&&(d.loadedTerrain=void 0)),!i&&f(h)&&(h.processUpsampleStateMachine(b,c,a.x,a.y,a.level),h.state>=r.RECEIVED&&d.terrainData!==h.data&&(d.terrainData=h.data,c.hasWaterMask&&C(a),x(a)),h.state===r.READY?(h.publishToTile(a),d.pickTerrain=d.upsampledTerrain,d.upsampledTerrain=void 0):h.state===r.FAILED&&(d.upsampledTerrain=void 0))}function w(a){for(var b=a.parent;f(b)&&f(b.data)&&!f(b.data.terrainData);)b=b.parent;return f(b)&&f(b.data)?{data:b.data.terrainData,x:b.x,y:b.y,level:b.level}:void 0}function x(a){var b=a.data;if(f(a._children))for(var c=0;4>c;++c){var d=a._children[c];if(d.state!==p.START){var e=d.data;if(f(e.terrainData)&&!e.terrainData.wasCreatedByUpsampling())continue;f(e.upsampledTerrain)&&e.upsampledTerrain.freeResources(),e.upsampledTerrain=new s({data:b.terrainData,x:a.x,y:a.y,level:a.level}),d.state=p.LOADING}}}function y(a){var b=a.data;if(f(a.children))for(var c=0;4>c;++c){var d=a.children[c];if(d.state!==p.START){var e=d.data;if(f(e.terrainData)&&!e.terrainData.wasCreatedByUpsampling())continue;f(e.upsampledTerrain)&&e.upsampledTerrain.freeResources(),e.upsampledTerrain=new s({data:b.terrainData,x:a.x,y:a.y,level:a.level}),b.terrainData.isChildAvailable(a.x,a.y,d.x,d.y)&&(f(e.loadedTerrain)||(e.loadedTerrain=new s)),d.state=p.LOADING}}}function z(a,b){var c=b.getTileDataAvailable(a.x,a.y,a.level);if(f(c))return c;var d=a.parent;return f(d)?f(d.data)&&f(d.data.terrainData)?d.data.terrainData.isChildAvailable(d.x,d.y,a.x,a.y):!1:!0}function A(a){var b=a.cache.tile_waterMaskData;if(!f(b)){var c=a.createTexture2D({pixelFormat:i.LUMINANCE,pixelDatatype:k.UNSIGNED_BYTE,source:{arrayBufferView:new Uint8Array([255]),width:1,height:1}});c.referenceCount=1;var d=a.createSampler({wrapS:n.CLAMP_TO_EDGE,wrapT:n.CLAMP_TO_EDGE,minificationFilter:m.LINEAR,magnificationFilter:l.LINEAR});b={allWaterTexture:c,sampler:d,destroy:function(){this.allWaterTexture.destroy()}},a.cache.tile_waterMaskData=b}return b}function B(a,b){var d=b.waterMaskTexture;f(d)&&(--d.referenceCount,0===d.referenceCount&&d.destroy(),b.waterMaskTexture=void 0);var e=b.terrainData.waterMask;if(f(e)){var g,h=A(a),j=e.length;if(1===j){if(0===e[0])return;g=h.allWaterTexture}else{var l=Math.sqrt(j);g=a.createTexture2D({pixelFormat:i.LUMINANCE,pixelDatatype:k.UNSIGNED_BYTE,source:{width:l,height:l,arrayBufferView:e}}),g.referenceCount=0,g.sampler=h.sampler}++g.referenceCount,b.waterMaskTexture=g,c.fromElements(0,0,1,1,b.waterMaskTranslationAndScale)}}function C(a){for(var b=a.data,c=a.parent;f(c)&&!f(c.data.terrainData)||c.data.terrainData.wasCreatedByUpsampling();)c=c.parent;if(f(c)&&f(c.data.waterMaskTexture)){b.waterMaskTexture=c.data.waterMaskTexture,++b.waterMaskTexture.referenceCount;var d=c.rectangle,e=a.rectangle,g=e.east-e.west,h=e.north-e.south,i=g/(d.east-d.west),j=h/(d.north-d.south);b.waterMaskTranslationAndScale.x=i*(e.west-d.west)/g,b.waterMaskTranslationAndScale.y=j*(e.south-d.south)/h,b.waterMaskTranslationAndScale.z=i,b.waterMaskTranslationAndScale.w=j}}var D=function(){this.imagery=[],this.southwestCornerCartesian=new b,this.northeastCornerCartesian=new b,this.westNormal=new b,this.southNormal=new b,this.eastNormal=new b,this.northNormal=new b,this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new c(0,0,1,1),this.terrainData=void 0,this.center=new b,this.vertexArray=void 0,this.minimumHeight=0,this.maximumHeight=0,this.boundingSphere3D=new a,this.boundingSphere2D=new a,this.occludeePointInScaledSpace=new b,this.loadedTerrain=void 0,this.upsampledTerrain=void 0,this.pickBoundingSphere=new a,this.pickTerrain=void 0};g(D.prototype,{eligibleForUnloading:{get:function(){for(var a=this.loadedTerrain,b=f(a)&&(a.state===r.RECEIVING||a.state===r.TRANSFORMING),c=this.upsampledTerrain,d=f(c)&&(c.state===r.RECEIVING||c.state===r.TRANSFORMING),e=!b&&!d,g=this.imagery,h=0,i=g.length;e&&i>h;++h){var j=g[h];e=!f(j.loadingImagery)||j.loadingImagery.state!==o.TRANSITIONING}return e}}});var E=new b,F=new b,G=new b,H=new b;D.prototype.pick=function(a,c,d,e){var g=this.pickTerrain;if(!f(g))return void 0;var i=g.mesh;if(!f(i))return void 0;for(var j=i.vertices,k=i.stride,l=i.indices,m=l.length,n=0;m>n;n+=3){var o=l[n],p=l[n+1],q=l[n+2],r=t(this,c,j,k,o,E),s=t(this,c,j,k,p,F),u=t(this,c,j,k,q,G),v=h.rayTriangle(a,r,s,u,d,H);if(f(v))return b.clone(v,e)}return void 0},D.prototype.freeResources=function(){f(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,0===this.waterMaskTexture.referenceCount&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0),this.terrainData=void 0,f(this.loadedTerrain)&&(this.loadedTerrain.freeResources(),this.loadedTerrain=void 0),f(this.upsampledTerrain)&&(this.upsampledTerrain.freeResources(),this.upsampledTerrain=void 0),f(this.pickTerrain)&&(this.pickTerrain.freeResources(),this.pickTerrain=void 0);var a,b,c=this.imagery;for(a=0,b=c.length;b>a;++a)c[a].freeResources();this.imagery.length=0,this.freeVertexArray()},D.prototype.freeVertexArray=function(){var a;f(this.vertexArray)&&(a=this.vertexArray.indexBuffer,this.vertexArray.destroy(),this.vertexArray=void 0,!a.isDestroyed()&&f(a.referenceCount)&&(--a.referenceCount,0===a.referenceCount&&a.destroy())),f(this.wireframeVertexArray)&&(a=this.wireframeVertexArray.indexBuffer,this.wireframeVertexArray.destroy(),this.wireframeVertexArray=void 0,!a.isDestroyed()&&f(a.referenceCount)&&(--a.referenceCount,0===a.referenceCount&&a.destroy()))},D.processStateMachine=function(a,b,c,d){var e=a.data;f(e)||(e=a.data=new D),a.state===p.START&&(u(a,c,d),a.state=p.LOADING),a.state===p.LOADING&&v(a,b,c);for(var g=f(e.vertexArray),h=!f(e.loadedTerrain)&&!f(e.upsampledTerrain),i=f(e.terrainData)&&e.terrainData.wasCreatedByUpsampling(),j=e.imagery,k=0,l=j.length;l>k;++k){var m=j[k];if(f(m.loadingImagery)){if(m.loadingImagery.state===o.PLACEHOLDER){var n=m.loadingImagery.imageryLayer;if(n.imageryProvider.ready){m.freeResources(),j.splice(k,1),n._createTileImagerySkeletons(a,c,k),--k,l=j.length;continue}i=!1}var q=m.processStateMachine(a,b);h=h&&q,g=g&&(q||f(m.readyImagery)),i=i&&f(m.loadingImagery)&&(m.loadingImagery.state===o.FAILED||m.loadingImagery.state===o.INVALID)}else i=!1}a.upsampledFromParent=i,k===l&&(g&&(a.renderable=!0),h&&(a.state=p.DONE))};var I=new b,J=new b,K=new b,L=new b,M=new d;return D}),c("Shaders/ReprojectWebMercatorFS",[],function(){"use strict";return"uniform sampler2D u_texture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\ngl_FragColor = texture2D(u_texture, v_textureCoordinates);\n}\n"}),c("Shaders/ReprojectWebMercatorVS",[],function(){"use strict";return"attribute vec4 position;\nattribute float webMercatorT;\nuniform vec2 u_textureDimensions;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\nv_textureCoordinates = vec2(position.x, webMercatorT);\ngl_Position = czm_viewportOrthographic * (position * vec4(u_textureDimensions, 1.0, 1.0));\n}\n"}),c("Scene/Imagery",["../Core/defined","../Core/destroyObject","./ImageryState"],function(a,b,c){"use strict";var d=function(b,d,e,f,g){if(this.imageryLayer=b,this.x=d,this.y=e,this.level=f,0!==f){var h=0|d/2,i=0|e/2,j=f-1;this.parent=b.getImageryFromCache(h,i,j)}if(this.state=c.UNLOADED,this.imageUrl=void 0,this.image=void 0,this.texture=void 0,this.credits=void 0,this.referenceCount=0,!a(g)&&b.imageryProvider.ready){var k=b.imageryProvider.tilingScheme;g=k.tileXYToRectangle(d,e,f)}this.rectangle=g};return d.createPlaceholder=function(a){var b=new d(a,0,0,0);return b.addReference(),b.state=c.PLACEHOLDER,b},d.prototype.addReference=function(){++this.referenceCount},d.prototype.releaseReference=function(){return--this.referenceCount,0===this.referenceCount?(this.imageryLayer.removeImageryFromCache(this),a(this.parent)&&this.parent.releaseReference(),a(this.image)&&a(this.image.destroy)&&this.image.destroy(),a(this.texture)&&this.texture.destroy(),b(this),0):this.referenceCount},d}),c("Scene/TileImagery",["../Core/defined","./ImageryState"],function(a,b){"use strict";var c=function(a,b){this.readyImagery=void 0,this.loadingImagery=a,this.textureCoordinateRectangle=b,this.textureTranslationAndScale=void 0};return c.prototype.freeResources=function(){a(this.readyImagery)&&this.readyImagery.releaseReference(),a(this.loadingImagery)&&this.loadingImagery.releaseReference()},c.prototype.processStateMachine=function(c,d){var e=this.loadingImagery,f=e.imageryLayer;if(e.state===b.UNLOADED&&(e.state=b.TRANSITIONING,f._requestImagery(e)),e.state===b.RECEIVED&&(e.state=b.TRANSITIONING,f._createTexture(d,e)),e.state===b.TEXTURE_LOADED&&(e.state=b.TRANSITIONING,f._reprojectTexture(d,e)),e.state===b.READY)return a(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=this.loadingImagery,this.loadingImagery=void 0,this.textureTranslationAndScale=f._calculateTextureTranslationAndScale(c,this),!0;for(var g=e.parent,h=!1;a(g)&&g.state!==b.READY;)h=h||g.state!==b.FAILED&&g.state!==b.INVALID,g=g.parent;return this.readyImagery!==g&&(a(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=g,a(g)&&(g.addReference(),this.textureTranslationAndScale=f._calculateTextureTranslationAndScale(c,this))),h||e.state!==b.FAILED&&e.state!==b.INVALID?!1:!0},c}),c("Scene/ImageryLayer",["../Core/BoundingRectangle","../Core/Cartesian2","../Core/Cartesian4","../Core/Color","../Core/ComponentDatatype","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/FeatureDetection","../Core/GeographicTilingScheme","../Core/IndexDatatype","../Core/Math","../Core/PixelFormat","../Core/PrimitiveType","../Core/Rectangle","../Core/TerrainProvider","../Core/TileProviderError","../Renderer/BufferUsage","../Renderer/ClearCommand","../Renderer/DrawCommand","../Renderer/MipmapHint","../Renderer/ShaderSource","../Renderer/TextureMagnificationFilter","../Renderer/TextureMinificationFilter","../Renderer/TextureWrap","../Shaders/ReprojectWebMercatorFS","../Shaders/ReprojectWebMercatorVS","../ThirdParty/when","./Imagery","./ImageryState","./TileImagery"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F){"use strict";function G(a,b,c){return JSON.stringify([a,b,c])}function H(b,c,e,f){var h=c.cache.imageryLayer_reproject;if(!g(h)){h=c.cache.imageryLayer_reproject={framebuffer:void 0,vertexArray:void 0,shaderProgram:void 0,renderState:void 0,sampler:void 0,destroy:function(){g(this.framebuffer)&&this.framebuffer.destroy(),g(this.vertexArray)&&this.vertexArray.destroy(),g(this.shaderProgram)&&this.shaderProgram.destroy()}};for(var i=new Float32Array(256),j=0,k=0;64>k;++k){var n=k/63;i[j++]=0,i[j++]=n,i[j++]=1,i[j++]=n}var p={position:0,webMercatorT:1},r=q.getRegularGridIndices(2,64),C=c.createIndexBuffer(r,s.STATIC_DRAW,l.UNSIGNED_SHORT);h.vertexArray=c.createVertexArray([{index:p.position,vertexBuffer:c.createVertexBuffer(i,s.STATIC_DRAW),componentsPerAttribute:2},{index:p.webMercatorT,vertexBuffer:c.createVertexBuffer(512,s.STREAM_DRAW),componentsPerAttribute:1}],C);var D=new w({sources:[B]});h.shaderProgram=c.createShaderProgram(D,A,p),h.sampler=c.createSampler({wrapS:z.CLAMP_TO_EDGE,wrapT:z.CLAMP_TO_EDGE,minificationFilter:y.LINEAR,magnificationFilter:x.LINEAR})}e.sampler=h.sampler;var E=e.width,F=e.height;N.textureDimensions.x=E,N.textureDimensions.y=F,N.texture=e;var G=Math.sin(f.south),H=.5*Math.log((1+G)/(1-G));G=Math.sin(f.north);var I=.5*Math.log((1+G)/(1-G)),J=1/(I-H),K=c.createTexture2D({width:E,height:F,pixelFormat:e.pixelFormat,pixelDatatype:e.pixelDatatype,preMultiplyAlpha:e.preMultiplyAlpha});K.generateMipmap(v.NICEST),g(h.framebuffer)&&h.framebuffer.destroy(),h.framebuffer=c.createFramebuffer({colorTextures:[K]}),h.framebuffer.destroyAttachments=!1;for(var L=f.south,M=f.north,P=O,Q=0,R=0;64>R;++R){var S=R/63,T=m.lerp(L,M,S);G=Math.sin(T);var U=.5*Math.log((1+G)/(1-G)),V=(U-H)*J;P[Q++]=V,P[Q++]=V}h.vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(P);var W=new t({color:d.BLACK,framebuffer:h.framebuffer});W.execute(c),g(h.renderState)&&h.renderState.viewport.width===E&&h.renderState.viewport.height===F||(h.renderState=c.createRenderState({viewport:new a(0,0,E,F)}));var X=new u({framebuffer:h.framebuffer,shaderProgram:h.shaderProgram,renderState:h.renderState,primitiveType:o.TRIANGLES,vertexArray:h.vertexArray,uniformMap:N});return X.execute(c),K}function I(a,b,c){var d=a._imageryProvider,e=d.tilingScheme,f=e.ellipsoid,g=a._imageryProvider.tilingScheme instanceof k?1:Math.cos(c),h=e.rectangle,i=f.maximumRadius*(h.east-h.west)*g/(d.tileWidth*e.getNumberOfXTilesAtLevel(0)),j=i/b,l=Math.log(j)/Math.log(2),m=Math.round(l);return 0|m}var J=function a(b,c){this._imageryProvider=b,c=f(c,{}),this.alpha=f(c.alpha,f(b.defaultAlpha,1)),this.brightness=f(c.brightness,f(b.defaultBrightness,a.DEFAULT_BRIGHTNESS)),this.contrast=f(c.contrast,f(b.defaultContrast,a.DEFAULT_CONTRAST)),this.hue=f(c.hue,f(b.defaultHue,a.DEFAULT_HUE)),this.saturation=f(c.saturation,f(b.defaultSaturation,a.DEFAULT_SATURATION)),this.gamma=f(c.gamma,f(b.defaultGamma,a.DEFAULT_GAMMA)),this.show=f(c.show,!0),this._minimumTerrainLevel=c.minimumTerrainLevel,this._maximumTerrainLevel=c.maximumTerrainLevel,this._rectangle=f(c.rectangle,p.MAX_VALUE),this._maximumAnisotropy=c.maximumAnisotropy,this._imageryCache={},this._skeletonPlaceholder=new F(D.createPlaceholder(this)),this._show=!0,this._layerIndex=-1,this._isBaseLayer=!1,this._requestImageError=void 0};h(J.prototype,{imageryProvider:{get:function(){return this._imageryProvider}},rectangle:{get:function(){return this._rectangle}}}),J.DEFAULT_BRIGHTNESS=1,J.DEFAULT_CONTRAST=1,J.DEFAULT_HUE=0,J.DEFAULT_SATURATION=1,J.DEFAULT_GAMMA=1,J.prototype.isBaseLayer=function(){return this._isBaseLayer},J.prototype.isDestroyed=function(){return!1},J.prototype.destroy=function(){return i(this)};var K=new p,L=new p,M=new p;J.prototype._createTileImagerySkeletons=function(a,b,d){var e=a.data;if(g(this._minimumTerrainLevel)&&a.level<this._minimumTerrainLevel)return!1;if(g(this._maximumTerrainLevel)&&a.level>this._maximumTerrainLevel)return!1;var f=this._imageryProvider;if(g(d)||(d=e.imagery.length),!f.ready)return this._skeletonPlaceholder.loadingImagery.addReference(),e.imagery.splice(d,0,this._skeletonPlaceholder),!0;var h=p.intersectWith(f.rectangle,this._rectangle,K),i=p.intersectWith(a.rectangle,h,L);if(i.east<=i.west||i.north<=i.south){if(!this.isBaseLayer())return!1;var j=h,k=a.rectangle;k.south>=j.north?i.north=i.south=j.north:k.north<=j.south&&(i.north=i.south=j.south),k.west>=j.east?i.west=i.east=j.east:k.east<=j.west&&(i.west=i.east=j.west)}var l=0;i.south>0?l=i.south:i.north<0&&(l=i.north);var m=1,n=m*b.getLevelMaximumGeometricError(a.level),o=I(this,n,l);o=Math.max(0,o);var q=f.maximumLevel;if(o>q&&(o=q),g(f.minimumLevel)){var r=f.minimumLevel;r>o&&(o=r)}var s=f.tilingScheme,t=s.positionToTileXY(p.northwest(i),o),u=s.positionToTileXY(p.southeast(i),o),v=(a.rectangle.north-a.rectangle.south)/512,w=(a.rectangle.east-a.rectangle.west)/512,x=s.tileXYToRectangle(t.x,t.y,o);Math.abs(x.south-a.rectangle.north)<w&&t.y<u.y&&++t.y,Math.abs(x.east-a.rectangle.west)<v&&t.x<u.x&&++t.x;var y=s.tileXYToRectangle(u.x,u.y,o);Math.abs(y.north-a.rectangle.south)<w&&u.y>t.y&&--u.y,Math.abs(y.west-a.rectangle.east)<v&&u.x>t.x&&--u.x;var z,A,B=a.rectangle,C=s.tileXYToRectangle(t.x,t.y,o),D=p.intersectWith(C,h,M),E=0,G=1;!this.isBaseLayer()&&Math.abs(D.west-a.rectangle.west)>=v&&(E=Math.min(1,(D.west-B.west)/(B.east-B.west))),!this.isBaseLayer()&&Math.abs(D.north-a.rectangle.north)>=w&&(G=Math.max(0,(D.north-B.south)/(B.north-B.south)));for(var H=G,J=t.x;J<=u.x;J++){z=E,C=s.tileXYToRectangle(J,t.y,o),D=p.intersectWith(C,h,M),E=Math.min(1,(D.east-B.west)/(B.east-B.west)),J===u.x&&(this.isBaseLayer()||Math.abs(D.east-a.rectangle.east)<v)&&(E=1),G=H;for(var N=t.y;N<=u.y;N++){A=G,C=s.tileXYToRectangle(J,N,o),D=p.intersectWith(C,h,M),G=Math.max(0,(D.south-B.south)/(B.north-B.south)),N===u.y&&(this.isBaseLayer()||Math.abs(D.south-a.rectangle.south)<w)&&(G=0);var O=new c(z,G,E,A),P=this.getImageryFromCache(J,N,o,C);e.imagery.splice(d,0,new F(P,O)),++d}}return!0},J.prototype._calculateTextureTranslationAndScale=function(a,b){var d=b.readyImagery.rectangle,e=a.rectangle,f=e.east-e.west,g=e.north-e.south,h=f/(d.east-d.west),i=g/(d.north-d.south);return new c(h*(e.west-d.west)/f,i*(e.south-d.south)/g,h,i)},J.prototype._requestImagery=function(a){function b(b){return g(b)?(a.image=b,a.state=E.RECEIVED,r.handleSuccess(f._requestImageError),void 0):c()}function c(){a.state=E.FAILED;var b="Failed to obtain image tile X: "+a.x+" Y: "+a.y+" Level: "+a.level+".";f._requestImageError=r.handleError(f._requestImageError,e,e.errorEvent,b,a.x,a.y,a.level,d)}function d(){a.state=E.TRANSITIONING;var d=e.requestImage(a.x,a.y,a.level);return g(d)?(g(e.getTileCredits)&&(a.credits=e.getTileCredits(a.x,a.y,a.level)),C(d,b,c),void 0):(a.state=E.UNLOADED,void 0)}var e=this._imageryProvider,f=this;d()},J.prototype._createTexture=function(a,b){var c=this._imageryProvider;if(g(c.tileDiscardPolicy)){var d=c.tileDiscardPolicy;if(g(d)){if(!d.isReady())return b.state=E.RECEIVED,void 0;if(d.shouldDiscardImage(b.image))return b.state=E.INVALID,void 0}}var e=a.createTexture2D({source:b.image,pixelFormat:c.hasAlphaChannel?n.RGBA:n.RGB});b.texture=e,b.image=void 0,b.state=E.TEXTURE_LOADED},J.prototype._reprojectTexture=function(a,b){var c=b.texture,d=b.rectangle;if(!(this._imageryProvider.tilingScheme instanceof k)&&(d.east-d.west)/c.width>1e-5){var e=H(this,a,c,b.rectangle);c.destroy(),b.texture=c=e}if(m.isPowerOfTwo(c.width)&&m.isPowerOfTwo(c.height)){var h=a.cache.imageryLayer_mipmapSampler;if(!g(h)){var i=a.maximumTextureFilterAnisotropy;h=a.cache.imageryLayer_mipmapSampler=a.createSampler({wrapS:z.CLAMP_TO_EDGE,wrapT:z.CLAMP_TO_EDGE,minificationFilter:y.LINEAR_MIPMAP_LINEAR,magnificationFilter:x.LINEAR,maximumAnisotropy:Math.min(i,f(this._maximumAnisotropy,i))})}c.generateMipmap(v.NICEST),c.sampler=h}else{var j=a.cache.imageryLayer_nonMipmapSampler;g(j)||(j=a.cache.imageryLayer_nonMipmapSampler=a.createSampler({wrapS:z.CLAMP_TO_EDGE,wrapT:z.CLAMP_TO_EDGE,minificationFilter:y.LINEAR,magnificationFilter:x.LINEAR})),c.sampler=j}b.state=E.READY},J.prototype.getImageryFromCache=function(a,b,c,d){var e=G(a,b,c),f=this._imageryCache[e];return g(f)||(f=new D(this,a,b,c,d),this._imageryCache[e]=f),f.addReference(),f},J.prototype.removeImageryFromCache=function(a){var b=G(a.x,a.y,a.level);delete this._imageryCache[b]};var N={u_textureDimensions:function(){return this.textureDimensions},u_texture:function(){return this.texture},textureDimensions:new b,texture:void 0},O=j.supportsTypedArrays()?new Float32Array(128):void 0;return J}),c("Scene/GlobeSurfaceTileProvider",["../Core/BoundingSphere","../Core/Cartesian2","../Core/Cartesian3","../Core/Cartesian4","../Core/Color","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Event","../Core/FeatureDetection","../Core/GeometryPipeline","../Core/IndexDatatype","../Core/Intersect","../Core/Matrix4","../Core/PrimitiveType","../Core/Rectangle","../Core/Visibility","../Core/WebMercatorProjection","../Renderer/BufferUsage","../Renderer/DrawCommand","../Scene/BlendingState","../Scene/DepthFunction","../Scene/Pass","../ThirdParty/when","./GlobeSurfaceTile","./ImageryLayer","./ImageryState","./QuadtreeTileLoadState","./SceneMode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){"use strict";function E(a,b){var c=a.loadingImagery;f(c)||(c=a.readyImagery);var d=b.loadingImagery;return f(d)||(d=b.readyImagery),c.imageryLayer._layerIndex-d.imageryLayer._layerIndex}function F(){var a={u_initialColor:function(){return this.initialColor},u_zoomedOutOceanSpecularIntensity:function(){return this.zoomedOutOceanSpecularIntensity},u_oceanNormalMap:function(){return this.oceanNormalMap},u_lightingFadeDistance:function(){return this.lightingFadeDistance},u_center3D:function(){return this.center3D},u_tileRectangle:function(){return this.tileRectangle},u_modifiedModelView:function(){return this.modifiedModelView},u_dayTextures:function(){return this.dayTextures},u_dayTextureTranslationAndScale:function(){return this.dayTextureTranslationAndScale},u_dayTextureTexCoordsRectangle:function(){return this.dayTextureTexCoordsRectangle},u_dayTextureAlpha:function(){return this.dayTextureAlpha},u_dayTextureBrightness:function(){return this.dayTextureBrightness},u_dayTextureContrast:function(){return this.dayTextureContrast},u_dayTextureHue:function(){return this.dayTextureHue},u_dayTextureSaturation:function(){return this.dayTextureSaturation},u_dayTextureOneOverGamma:function(){return this.dayTextureOneOverGamma},u_dayIntensity:function(){return this.dayIntensity},u_southAndNorthLatitude:function(){return this.southAndNorthLatitude},u_southMercatorYLowAndHighAndOneOverHeight:function(){return this.southMercatorYLowAndHighAndOneOverHeight},u_waterMask:function(){return this.waterMask},u_waterMaskTranslationAndScale:function(){return this.waterMaskTranslationAndScale},initialColor:new d(0,0,.5,1),zoomedOutOceanSpecularIntensity:.5,oceanNormalMap:void 0,lightingFadeDistance:new b(65e5,9e6),center3D:void 0,modifiedModelView:new o,tileRectangle:new d,dayTextures:[],dayTextureTranslationAndScale:[],dayTextureTexCoordsRectangle:[],dayTextureAlpha:[],dayTextureBrightness:[],dayTextureContrast:[],dayTextureHue:[],dayTextureSaturation:[],dayTextureOneOverGamma:[],dayIntensity:0,southAndNorthLatitude:new b,southMercatorYLowAndHighAndOneOverHeight:new c,waterMask:void 0,waterMaskTranslationAndScale:new d};return a}function G(a,b,c){var d=c.data;if(!f(d.wireframeVertexArray)&&!f(d.meshForWireframePromise)&&(d.meshForWireframePromise=d.terrainData.createMesh(b._terrainProvider.tilingScheme,c.x,c.y,c.level),f(d.meshForWireframePromise))){var e=d.vertexArray;y(d.meshForWireframePromise,function(b){d.vertexArray===e&&(d.wireframeVertexArray=H(a,d.vertexArray,b)),d.meshForWireframePromise=void 0})}}function H(a,b,c){var d={indices:c.indices,primitiveType:p.TRIANGLES};l.toWireframe(d);var e=d.indices,f=a.createIndexBuffer(e,t.STATIC_DRAW,m.UNSIGNED_SHORT);return a.createVertexArray(b._attributes,f)}function I(b,e,g,h,i){var j=e.data,k=h.camera.viewMatrix,l=g.maximumTextureImageUnits,m=j.waterMaskTexture,n=b.hasWaterMask&&f(m),r=b.oceanNormalMap,t=n&&f(r);n&&--l,t&&--l;var v=j.center,w=N,y=0,z=0,C=0,E=0,H=0;if(h.mode!==D.SCENE3D){var I=h.mapProjection,J=I.project(q.southwest(e.rectangle),Q),K=I.project(q.northeast(e.rectangle),R);if(w.x=J.x,w.y=J.y,w.z=K.x,w.w=K.y,h.mode!==D.MORPHING&&(v=O,v.x=0,v.y=.5*(w.z+w.x),v.z=.5*(w.w+w.y),w.x-=v.y,w.y-=v.z,w.z-=v.y,w.w-=v.z),I instanceof s){y=e.rectangle.south,z=e.rectangle.north;var S=s.geodeticLatitudeToMercatorAngle(y),T=s.geodeticLatitudeToMercatorAngle(z);L[0]=S,C=L[0],E=S-L[0],H=1/(T-S)}}var U=P;U.x=v.x,U.y=v.y,U.z=v.z,U.w=1,o.multiplyByVector(k,U,U),o.setColumn(k,3,U,M);var V=j.imagery,W=0,Y=V.length,Z=b._renderState,$=b._blendRenderState,_=Z,aa=b._firstPassInitialColor;do{var ba,ca,da=0;b._drawCommands.length<=b._usedDrawCommands?(ba=new u,ba.owner=e,ba.cull=!1,ba.boundingVolume=new a,ca=F(),b._drawCommands.push(ba),b._uniformMaps.push(ca)):(ba=b._drawCommands[b._usedDrawCommands],ca=b._uniformMaps[b._usedDrawCommands]),ba.owner=e,++b._usedDrawCommands,ba.debugShowBoundingVolume=e===b._debug.boundingSphereTile,d.clone(aa,ca.initialColor),ca.oceanNormalMap=r,ca.lightingFadeDistance.x=b.lightingFadeOutDistance,ca.lightingFadeDistance.y=b.lightingFadeInDistance,ca.zoomedOutOceanSpecularIntensity=b.zoomedOutOceanSpecularIntensity,ca.center3D=j.center,d.clone(w,ca.tileRectangle),ca.southAndNorthLatitude.x=y,ca.southAndNorthLatitude.y=z,ca.southMercatorYLowAndHighAndOneOverHeight.x=E,ca.southMercatorYLowAndHighAndOneOverHeight.y=C,ca.southMercatorYLowAndHighAndOneOverHeight.z=H,o.clone(M,ca.modifiedModelView);for(var ea=!1,fa=!1,ga=!1,ha=!1,ia=!1,ja=!1;l>da&&Y>W;){var ka=V[W],la=ka.readyImagery;if(++W,f(la)&&la.state===B.READY&&0!==la.imageryLayer.alpha){var ma=la.imageryLayer;if(f(ka.textureTranslationAndScale)||(ka.textureTranslationAndScale=ma._calculateTextureTranslationAndScale(e,ka)),ca.dayTextures[da]=la.texture,ca.dayTextureTranslationAndScale[da]=ka.textureTranslationAndScale,ca.dayTextureTexCoordsRectangle[da]=ka.textureCoordinateRectangle,ca.dayTextureAlpha[da]=ma.alpha,ja=ja||1!==ca.dayTextureAlpha[da],ca.dayTextureBrightness[da]=ma.brightness,ea=ea||ca.dayTextureBrightness[da]!==A.DEFAULT_BRIGHTNESS,ca.dayTextureContrast[da]=ma.contrast,fa=fa||ca.dayTextureContrast[da]!==A.DEFAULT_CONTRAST,ca.dayTextureHue[da]=ma.hue,ga=ga||ca.dayTextureHue[da]!==A.DEFAULT_HUE,ca.dayTextureSaturation[da]=ma.saturation,ha=ha||ca.dayTextureSaturation[da]!==A.DEFAULT_SATURATION,ca.dayTextureOneOverGamma[da]=1/ma.gamma,ia=ia||ca.dayTextureOneOverGamma[da]!==1/A.DEFAULT_GAMMA,f(la.credits))for(var na=h.creditDisplay,oa=la.credits,pa=0,qa=oa.length;qa>pa;++pa)na.addCredit(oa[pa]);++da}}ca.dayTextures.length=da,ca.waterMask=m,d.clone(j.waterMaskTranslationAndScale,ca.waterMaskTranslationAndScale),ba.shaderProgram=b._surfaceShaderSet.getShaderProgram(g,da,ea,fa,ga,ha,ia,ja,n,t),ba.renderState=_,ba.primitiveType=p.TRIANGLES,ba.vertexArray=j.vertexArray,ba.uniformMap=ca,ba.pass=x.OPAQUE,b._debug.wireframe&&(G(g,b,e),f(j.wireframeVertexArray)&&(ba.vertexArray=j.wireframeVertexArray,ba.primitiveType=p.LINES));var ra=ba.boundingVolume;h.mode!==D.SCENE3D?(a.fromRectangleWithHeights2D(e.rectangle,h.mapProjection,j.minimumHeight,j.maximumHeight,ra),c.fromElements(ra.center.z,ra.center.x,ra.center.y,ra.center),h.mode===D.MORPHING&&(ra=a.union(j.boundingSphere3D,ra,ra))):a.clone(j.boundingSphere3D,ra),i.push(ba),_=$,aa=X}while(Y>W)}var J=function a(b){this.lightingFadeOutDistance=65e5,this.lightingFadeInDistance=9e6,this.hasWaterMask=!1,this.oceanNormalMap=void 0,this.zoomedOutOceanSpecularIntensity=.5,this._quadtree=void 0,this._terrainProvider=b.terrainProvider,this._imageryLayers=b.imageryLayers,this._surfaceShaderSet=b.surfaceShaderSet,this._renderState=void 0,this._blendRenderState=void 0,this._errorEvent=new j,this._imageryLayers.layerAdded.addEventListener(a.prototype._onLayerAdded,this),this._imageryLayers.layerRemoved.addEventListener(a.prototype._onLayerRemoved,this),this._imageryLayers.layerMoved.addEventListener(a.prototype._onLayerMoved,this),this._imageryLayers.layerShownOrHidden.addEventListener(a.prototype._onLayerShownOrHidden,this),this._layerOrderChanged=!1,this._tilesToRenderByTextureCount=[],this._drawCommands=[],this._uniformMaps=[],this._usedDrawCommands=0,this._debug={wireframe:!1,boundingSphereTile:void 0},this._baseColor=void 0,this._firstPassInitialColor=void 0,this.baseColor=new e(0,0,.5,1)};g(J.prototype,{baseColor:{get:function(){return this._baseColor},set:function(a){this._baseColor=a,this._firstPassInitialColor=d.fromColor(a,this._firstPassInitialColor)}},quadtree:{get:function(){return this._quadtree},set:function(a){this._quadtree=a}},ready:{get:function(){return this._terrainProvider.ready&&(0===this._imageryLayers.length||this._imageryLayers.get(0).imageryProvider.ready)}},tilingScheme:{get:function(){return this._terrainProvider.tilingScheme}},errorEvent:{get:function(){return this._errorEvent}},terrainProvider:{get:function(){return this._terrainProvider},set:function(a){this._terrainProvider!==a&&(this._terrainProvider=a,f(this._quadtree)&&this._quadtree.invalidateAllTiles())}}}),J.prototype.beginUpdate=function(a,b){this._imageryLayers._update(),this._layerOrderChanged&&(this._layerOrderChanged=!1,this._quadtree.forEachLoadedTile(function(a){a.data.imagery.sort(E)}));var c,d,e=this._tilesToRenderByTextureCount;for(c=0,d=e.length;d>c;++c){var g=e[c];f(g)&&(g.length=0)}this._usedDrawCommands=0;var h=b.creditDisplay;this._terrainProvider.ready&&f(this._terrainProvider.credit)&&h.addCredit(this._terrainProvider.credit);var i=this._imageryLayers;for(c=0,d=i.length;d>c;++c){var j=i.get(c).imageryProvider;j.ready&&f(j.credit)&&h.addCredit(j.credit)}},J.prototype.endUpdate=function(a,b,c){
f(this._renderState)||(this._renderState=a.createRenderState({cull:{enabled:!0},depthTest:{enabled:!0}})),f(this._blendRenderState)||(this._blendRenderState=a.createRenderState({cull:{enabled:!0},depthTest:{enabled:!0,func:w.LESS_OR_EQUAL},blending:v.ALPHA_BLEND})),this._renderState.depthTest.enabled=b.mode===D.SCENE3D||b.mode===D.COLUMBUS_VIEW,this._blendRenderState.depthTest.enabled=this._renderState.depthTest.enabled;for(var d=this._tilesToRenderByTextureCount,e=0,g=d.length;g>e;++e){var h=d[e];if(f(h))for(var i=0,j=h.length;j>i;++i)I(this,h[i],a,b,c)}},J.prototype.getLevelMaximumGeometricError=function(a){return this._terrainProvider.getLevelMaximumGeometricError(a)},J.prototype.loadTile=function(a,b,c){z.processStateMachine(c,a,this._terrainProvider,this._imageryLayers)};var K=new a;J.prototype.computeTileVisibility=function(b,d,e){var g=b.data,h=d.cullingVolume,i=g.boundingSphere3D;d.mode!==D.SCENE3D&&(i=K,a.fromRectangleWithHeights2D(b.rectangle,d.mapProjection,g.minimumHeight,g.maximumHeight,i),c.fromElements(i.center.z,i.center.x,i.center.y,i.center),d.mode===D.MORPHING&&(i=a.union(g.boundingSphere3D,i,i)));var j=h.computeVisibility(i);if(j===n.OUTSIDE)return r.NONE;if(d.mode===D.SCENE3D){var k=g.occludeePointInScaledSpace;return f(k)?e.ellipsoid.isScaledSpacePointVisible(k)?j:r.NONE:j}return j};var L=k.supportsTypedArrays()?new Float32Array(1):void 0,M=new o,N=new d,O=new c,P=new d,Q=new c,R=new c;J.prototype.showTileThisFrame=function(a){for(var b=0,c=a.data.imagery,d=0,e=c.length;e>d;++d){var g=c[d];f(g.readyImagery)&&0!==g.readyImagery.imageryLayer.alpha&&++b}var h=this._tilesToRenderByTextureCount[b];f(h)||(h=[],this._tilesToRenderByTextureCount[b]=h),h.push(a);var i=this._debug;++i.tilesRendered,i.texturesRendered+=b};var S=new c,T=new c,U=new c(0,-1,0),V=new c(0,0,-1),W=new c;J.prototype.computeDistanceToTile=function(a,b){var d=a.data,e=d.southwestCornerCartesian,f=d.northeastCornerCartesian,g=d.westNormal,h=d.southNormal,i=d.eastNormal,j=d.northNormal,k=d.maximumHeight;b.mode!==D.SCENE3D&&(e=b.mapProjection.project(q.southwest(a.rectangle),S),e.z=e.y,e.y=e.x,e.x=0,f=b.mapProjection.project(q.northeast(a.rectangle),T),f.z=f.y,f.y=f.x,f.x=0,g=U,i=c.UNIT_Y,h=V,j=c.UNIT_Z,k=0);var l,m=b.camera.positionWC,n=b.camera.positionCartographic,o=c.subtract(m,e,W),p=c.dot(o,g),r=c.dot(o,h),s=c.subtract(m,f,W),t=c.dot(s,i),u=c.dot(s,j);l=b.mode===D.SCENE3D?n.height:m.x;var v=l-k,w=0;return p>0?w+=p*p:t>0&&(w+=t*t),r>0?w+=r*r:u>0&&(w+=u*u),v>0&&(w+=v*v),Math.sqrt(w)},J.prototype.isDestroyed=function(){return!1},J.prototype.destroy=function(){return this._tileProvider=this._tileProvider&&this._tileProvider.destroy(),h(this)},J.prototype._onLayerAdded=function(a){if(a.show){var b=this._terrainProvider;this._quadtree.forEachLoadedTile(function(c){a._createTileImagerySkeletons(c,b)&&(c.state=C.LOADING)}),this._layerOrderChanged=!0}},J.prototype._onLayerRemoved=function(a){this._quadtree.forEachLoadedTile(function(b){for(var c=b.data.imagery,d=-1,e=0,g=0,h=c.length;h>g;++g){var i=c[g],j=i.loadingImagery;if(f(j)||(j=i.readyImagery),j.imageryLayer===a)-1===d&&(d=g),i.freeResources(),++e;else if(-1!==d)break}-1!==d&&c.splice(d,e)})},J.prototype._onLayerMoved=function(){this._layerOrderChanged=!0},J.prototype._onLayerShownOrHidden=function(a,b,c){c?this._onLayerAdded(a,b):this._onLayerRemoved(a,b)};var X=new d(0,0,0,0);return J}),c("Scene/ImageryLayerCollection",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Event","../Core/Math","../Core/Rectangle","../ThirdParty/when","./ImageryLayer"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,b){var c=a.indexOf(b);return c}function l(a,b,c){var d=a._layers;if(b=g.clamp(b,0,d.length-1),c=g.clamp(c,0,d.length-1),b!==c){var e=d[b];d[b]=d[c],d[c]=e,a._update(),a.layerMoved.raiseEvent(e,c,b)}}var m=function(){this._layers=[],this.layerAdded=new f,this.layerRemoved=new f,this.layerMoved=new f,this.layerShownOrHidden=new f};return c(m.prototype,{length:{get:function(){return this._layers.length}}}),m.prototype.add=function(a,c){var d=b(c);d?this._layers.splice(c,0,a):(c=this._layers.length,this._layers.push(a)),this._update(),this.layerAdded.raiseEvent(a,c)},m.prototype.addImageryProvider=function(a,b){var c=new j(a);return this.add(c,b),c},m.prototype.remove=function(b,c){c=a(c,!0);var d=this._layers.indexOf(b);return-1!==d?(this._layers.splice(d,1),this._update(),this.layerRemoved.raiseEvent(b,d),c&&b.destroy(),!0):!1},m.prototype.removeAll=function(b){b=a(b,!0);for(var c=this._layers,d=0,e=c.length;e>d;d++){var f=c[d];this.layerRemoved.raiseEvent(f,d),b&&f.destroy()}this._layers=[]},m.prototype.contains=function(a){return-1!==this.indexOf(a)},m.prototype.indexOf=function(a){return this._layers.indexOf(a)},m.prototype.get=function(a){return this._layers[a]},m.prototype.raise=function(a){var b=k(this._layers,a);l(this,b,b+1)},m.prototype.lower=function(a){var b=k(this._layers,a);l(this,b,b-1)},m.prototype.raiseToTop=function(a){var b=k(this._layers,a);b!==this._layers.length-1&&(this._layers.splice(b,1),this._layers.push(a),this._update(),this.layerMoved.raiseEvent(a,this._layers.length-1,b))},m.prototype.lowerToBottom=function(a){var b=k(this._layers,a);0!==b&&(this._layers.splice(b,1),this._layers.splice(0,0,a),this._update(),this.layerMoved.raiseEvent(a,0,b))},m.prototype.pickImageryLayerFeatures=function(a,c){var d=c.globe.pick(a,c);if(!b(d))return void 0;var e=c.globe.ellipsoid.cartesianToCartographic(d),f=c.globe._surface._tilesToRender;f.length;for(var g,j=0;!b(g)&&j<f.length;++j){var k=f[j];h.contains(k.rectangle,e)&&(g=k)}if(!b(g))return void 0;g.rectangle;for(var l=g.data.imagery,m=[],n=l.length-1;n>=0;--n){var o=l[n],p=o.readyImagery;if(b(p)){var q=p.imageryLayer.imageryProvider;if(b(q.pickFeatures)){var r=q.pickFeatures(p.x,p.y,p.level,e.longitude,e.latitude);b(r)&&m.push(r)}}}return 0===m.length?void 0:i.all(m,function(a){for(var c=[],d=0;d<a.length;++d){var f=a[d];if(b(f)&&f.length>0)for(var g=0;g<f.length;++g){var h=f[g];b(h.position)||(h.position=e),c.push(h)}}return c})},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return this.removeAll(!0),d(this)},m.prototype._update=function(){for(var a,c,d=!0,e=this._layers,f=0,g=e.length;g>f;++f)c=e[f],c._layerIndex=f,c.show?(c._isBaseLayer=d,d=!1):c._isBaseLayer=!1,c.show!==c._show&&(b(c._show)&&(b(a)||(a=[]),a.push(c)),c._show=c.show);if(b(a))for(f=0,g=a.length;g>f;++f)c=a[f],this.layerShownOrHidden.raiseEvent(c,c._layerIndex,c.show)},m}),c("Scene/QuadtreeOccluders",["../Core/Cartesian3","../Core/defineProperties","../Core/EllipsoidalOccluder"],function(a,b,c){"use strict";var d=function(b){this._ellipsoid=new c(b.ellipsoid,a.ZERO)};return b(d.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),d}),c("Scene/QuadtreeTile",["../Core/defined","../Core/defineProperties","../Core/DeveloperError","./QuadtreeTileLoadState"],function(a,b,c,d){"use strict";var e=function(a){this._tilingScheme=a.tilingScheme,this._x=a.x,this._y=a.y,this._level=a.level,this._parent=a.parent,this._rectangle=this._tilingScheme.tileXYToRectangle(this._x,this._y,this._level),this._children=void 0,this._replacementPrevious=void 0,this._replacementNext=void 0,this._distance=0,this.state=d.START,this.renderable=!1,this.upsampledFromParent=!1,this.data=void 0};return e.createLevelZeroTiles=function(b){if(!a(b))throw new c("tilingScheme is required.");for(var d=b.getNumberOfXTilesAtLevel(0),f=b.getNumberOfYTilesAtLevel(0),g=new Array(d*f),h=0,i=0;f>i;++i)for(var j=0;d>j;++j)g[h++]=new e({tilingScheme:b,x:j,y:i,level:0});return g},b(e.prototype,{tilingScheme:{get:function(){return this._tilingScheme}},x:{get:function(){return this._x}},y:{get:function(){return this._y}},level:{get:function(){return this._level}},parent:{get:function(){return this._parent}},rectangle:{get:function(){return this._rectangle}},children:{get:function(){if(!a(this._children)){var b=this.tilingScheme,c=this.level+1,d=2*this.x,f=2*this.y;this._children=[new e({tilingScheme:b,x:d,y:f,level:c,parent:this}),new e({tilingScheme:b,x:d+1,y:f,level:c,parent:this}),new e({tilingScheme:b,x:d,y:f+1,level:c,parent:this}),new e({tilingScheme:b,x:d+1,y:f+1,level:c,parent:this})]}return this._children}},needsLoading:{get:function(){return this.state<d.DONE}},eligibleForUnloading:{get:function(){var b=!0;return a(this.data)&&(b=this.data.eligibleForUnloading,a(b)||(b=!0)),b}}}),e.prototype.freeResources=function(){if(this.state=d.START,this.renderable=!1,this.upsampledFromParent=!1,a(this.data)&&a(this.data.freeResources)&&this.data.freeResources(),a(this._children)){for(var b=0,c=this._children.length;c>b;++b)this._children[b].freeResources();this._children=void 0}},e}),c("Scene/TileReplacementQueue",["../Core/defined"],function(a){"use strict";function b(a,b){var c=b.replacementPrevious,d=b.replacementNext;b===a._lastBeforeStartOfFrame&&(a._lastBeforeStartOfFrame=d),b===a.head?a.head=d:c.replacementNext=d,b===a.tail?a.tail=c:d.replacementPrevious=c,b.replacementPrevious=void 0,b.replacementNext=void 0,--a.count}var c=function(){this.head=void 0,this.tail=void 0,this.count=0,this._lastBeforeStartOfFrame=void 0};return c.prototype.markStartOfRenderFrame=function(){this._lastBeforeStartOfFrame=this.head},c.prototype.trimTiles=function(c){for(var d=this.tail,e=!0;e&&a(this._lastBeforeStartOfFrame)&&this.count>c&&a(d);){e=d!==this._lastBeforeStartOfFrame;var f=d.replacementPrevious;d.eligibleForUnloading&&(d.freeResources(),b(this,d)),d=f}},c.prototype.markTileRendered=function(c){var d=this.head;return d===c?(c===this._lastBeforeStartOfFrame&&(this._lastBeforeStartOfFrame=c.replacementNext),void 0):(++this.count,a(d)?((a(c.replacementPrevious)||a(c.replacementNext))&&b(this,c),c.replacementPrevious=void 0,c.replacementNext=d,d.replacementPrevious=c,this.head=c,void 0):(c.replacementPrevious=void 0,c.replacementNext=void 0,this.head=c,this.tail=c,void 0))},c}),c("Scene/QuadtreePrimitive",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/getTimestamp","../Core/Queue","../Core/Visibility","./QuadtreeOccluders","./QuadtreeTile","./QuadtreeTileLoadState","./SceneMode","./TileReplacementQueue"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,c,d){var e=a._debug;if(!e.suspendLodUpdate){var f,h,j=a._tilesToRender;j.length=0;var k=a._tileTraversalQueue;if(k.clear(),e.maxDepth=0,e.tilesVisited=0,e.tilesCulled=0,e.tilesRendered=0,e.tilesWaitingForChildren=0,a._tileLoadQueue.length=0,a._tileReplacementQueue.markStartOfRenderFrame(),!b(a._levelZeroTiles)){if(!a._tileProvider.ready)return;var l=a._tileProvider.tilingScheme;a._levelZeroTiles=i.createLevelZeroTiles(l)}a._occluders.ellipsoid.cameraPosition=d.camera.positionWC;var m,o=a._tileProvider,s=a._occluders,t=a._levelZeroTiles;for(f=0,h=t.length;h>f;++f)m=t[f],a._tileReplacementQueue.markTileRendered(m),m.needsLoading&&r(a,m),m.renderable&&o.computeTileVisibility(m,d,s)!==g.NONE?k.enqueue(m):(++e.tilesCulled,m.renderable||++e.tilesWaitingForChildren);for(;b(m=k.dequeue());)if(++e.tilesVisited,a._tileReplacementQueue.markTileRendered(m),m.level>e.maxDepth&&(e.maxDepth=m.level),n(a,c,d,m)<a.maximumScreenSpaceError)p(a,m);else if(q(a,m)){var u=m.children;for(f=0,h=u.length;h>f;++f)o.computeTileVisibility(u[f],d,s)!==g.NONE?k.enqueue(u[f]):++e.tilesCulled}else++e.tilesWaitingForChildren,p(a,m);e.enableDebugOutput&&(e.tilesVisited!==e.lastTilesVisited||e.tilesRendered!==e.lastTilesRendered||e.tilesCulled!==e.lastTilesCulled||e.maxDepth!==e.lastMaxDepth||e.tilesWaitingForChildren!==e.lastTilesWaitingForChildren)&&(console.log("Visited "+e.tilesVisited+", Rendered: "+e.tilesRendered+", Culled: "+e.tilesCulled+", Max Depth: "+e.maxDepth+", Waiting for children: "+e.tilesWaitingForChildren),e.lastTilesVisited=e.tilesVisited,e.lastTilesRendered=e.tilesRendered,e.lastTilesCulled=e.tilesCulled,e.lastMaxDepth=e.maxDepth,e.lastTilesWaitingForChildren=e.tilesWaitingForChildren)}}function n(a,b,c,d){if(c.mode===k.SCENE2D)return o(a,b,c,d);var e=a._tileProvider.getLevelMaximumGeometricError(d.level),f=a._tileProvider.computeDistanceToTile(d,c);d._distance=f;var g=b.drawingBufferHeight,h=c.camera,i=h.frustum,j=i.fovy;return e*g/(2*f*Math.tan(.5*j))}function o(a,b,c,d){var e=c.camera,f=e.frustum,g=b.drawingBufferWidth,h=b.drawingBufferHeight,i=a._tileProvider.getLevelMaximumGeometricError(d.level),j=Math.max(f.top-f.bottom,f.right-f.left)/Math.max(g,h);return i/j}function p(a,b){a._tilesToRender.push(b),++a._debug.tilesRendered}function q(a,b){for(var c=!0,d=!0,e=b.children,f=0,g=e.length;g>f;++f){var h=e[f];a._tileReplacementQueue.markTileRendered(h),d=d&&h.upsampledFromParent,c=c&&h.renderable,h.needsLoading&&r(a,h)}return c||++a._debug.tilesWaitingForChildren,c&&!d}function r(a,b){a._tileLoadQueue.push(b)}function s(a,b,c){var d=a._tileLoadQueue,f=a._tileProvider;if(0!==d.length){a._tileReplacementQueue.trimTiles(a.tileCacheSize);for(var g=e(),h=a._loadQueueTimeSlice,i=g+h,j=d.length-1,k=j;k>=0;--k){var l=d[k];if(a._tileReplacementQueue.markTileRendered(l),f.loadTile(b,c,l),e()>=i)break}}}function t(a,b){return a._distance-b._distance}function u(a,b,c,d){var e=a._tileProvider,f=a._tilesToRender;f.sort(t);for(var g=0,h=f.length;h>g;++g)e.showTileThisFrame(f[g],b,c,d)}var v=function(b){this._tileProvider=b.tileProvider,this._tileProvider.quadtree=this,this._debug={enableDebugOutput:!1,maxDepth:0,tilesVisited:0,tilesCulled:0,tilesRendered:0,tilesWaitingForChildren:0,lastMaxDepth:-1,lastTilesVisited:-1,lastTilesCulled:-1,lastTilesRendered:-1,lastTilesWaitingForChildren:-1,suspendLodUpdate:!1};var c=this._tileProvider.tilingScheme,d=c.ellipsoid;this._tilesToRender=[],this._tileTraversalQueue=new f,this._tileLoadQueue=[],this._tileReplacementQueue=new l,this._levelZeroTiles=void 0,this._levelZeroTilesReady=!1,this._loadQueueTimeSlice=5,this.maximumScreenSpaceError=a(b.maximumScreenSpaceError,2),this.tileCacheSize=a(b.tileCacheSize,100),this._occluders=new h({ellipsoid:d})};return c(v.prototype,{tileProvider:{get:function(){return this._tileProvider}}}),v.prototype.invalidateAllTiles=function(){var a=this._tileReplacementQueue;a.head=void 0,a.tail=void 0,a.count=0;var c=this._levelZeroTiles;if(b(c))for(var d=0;d<c.length;++d)c[d].freeResources();this._levelZeroTiles=void 0},v.prototype.forEachLoadedTile=function(a){for(var c=this._tileReplacementQueue.head;b(c);)c.state!==j.START&&a(c),c=c.replacementNext},v.prototype.forEachRenderedTile=function(a){for(var b=this._tilesToRender,c=0,d=b.length;d>c;++c)a(b[c])},v.prototype.update=function(a,b,c){this._tileProvider.beginUpdate(a,b,c),m(this,a,b),s(this,a,b),u(this,a,b,c),this._tileProvider.endUpdate(a,b,c)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){this._tileProvider=this._tileProvider&&this._tileProvider.destroy()},v}),c("Scene/Globe",["../Core/BoundingRectangle","../Core/BoundingSphere","../Core/buildModuleUrl","../Core/Cartesian2","../Core/Cartesian3","../Core/Cartographic","../Core/combine","../Core/ComponentDatatype","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Ellipsoid","../Core/EllipsoidTerrainProvider","../Core/FeatureDetection","../Core/GeographicProjection","../Core/Geometry","../Core/GeometryAttribute","../Core/Intersect","../Core/IntersectionTests","../Core/loadImage","../Core/Math","../Core/Matrix4","../Core/Occluder","../Core/PrimitiveType","../Core/Ray","../Core/Rectangle","../Core/Transforms","../Renderer/BufferUsage","../Renderer/ClearCommand","../Renderer/DrawCommand","../Renderer/ShaderSource","../Shaders/GlobeFS","../Shaders/GlobeFSDepth","../Shaders/GlobeFSPole","../Shaders/GlobeVS","../Shaders/GlobeVSDepth","../Shaders/GlobeVSPole","../ThirdParty/when","./DepthFunction","./GlobeSurfaceShaderSet","./GlobeSurfaceTileProvider","./ImageryLayerCollection","./Pass","./QuadtreePrimitive","./SceneMode","./terrainAttributeLocations"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V){"use strict";function W(a){return function(c,d){var e=b.distanceSquaredTo(c.pickBoundingSphere,a),f=b.distanceSquaredTo(d.pickBoundingSphere,a);return e-f}}function X(a,b){var c=a._ellipsoid.radii,d=b.camera.positionWC,f=e.multiplyComponents(a._ellipsoid.oneOverRadii,d,ga),g=e.magnitude(f),h=e.normalize(f,ha),i=e.normalize(e.cross(e.UNIT_Z,f,ia),ia),j=e.normalize(e.cross(h,i,ja),ja),k=Math.sqrt(e.magnitudeSquared(f)-1),l=e.multiplyByScalar(h,1/g,ga),m=k/g,n=e.multiplyByScalar(i,m,ha),o=e.multiplyByScalar(j,m,ia),p=e.add(l,o,ja);e.subtract(p,n,p),e.multiplyComponents(c,p,p),e.pack(p,fa,0);var q=e.subtract(l,o,ja);e.subtract(q,n,q),e.multiplyComponents(c,q,q),e.pack(q,fa,3);var r=e.add(l,o,ja);e.add(r,n,r),e.multiplyComponents(c,r,r),e.pack(r,fa,6);var s=e.subtract(l,o,ja);return e.add(s,n,s),e.multiplyComponents(c,s,s),e.pack(s,fa,9),fa}function Y(b,c,d,g,h,i){var j,k=b._ellipsoid.cartographicToCartesian(new f(0,g)),l=b._ellipsoid.cartographicToCartesian(new f(Math.PI,g)),m=.5*e.magnitude(e.subtract(k,l,ka),ka),n=b._ellipsoid.cartographicToCartesian(new f(0,d)),o=c.camera.direction;j=1-e.dot(ma,o)<w.EPSILON6?e.UNIT_X:e.normalize(e.cross(o,e.UNIT_Z,ka),ka);var p=e.add(n,e.multiplyByScalar(j,m,ka),ka),q=e.add(n,e.multiplyByScalar(e.normalize(e.cross(e.UNIT_Z,j,la),la),m,la),la);C.pointToGLWindowCoordinates(h,i,n,n),C.pointToGLWindowCoordinates(h,i,p,p),C.pointToGLWindowCoordinates(h,i,q,q);var r=Math.floor(Math.max(e.distance(q,n),e.distance(p,n))),s=r;return new a(Math.floor(n.x)-r,Math.floor(n.y)-s,2*r,2*s)}function Z(a,c,d){var e=a.terrainProvider;if(d.mode===U.SCENE3D&&e.ready){var f=e.tilingScheme.rectangle,i=c.uniformState.viewProjection,k=na;k.width=c.drawingBufferWidth,k.height=c.drawingBufferHeight;var l,m,n,o,p,q,u,v=x.computeViewportTransformation(k,0,1,oa),z=.05,A=a._occluder;f.north<w.PI_OVER_TWO&&(l=new B(-Math.PI,f.north,Math.PI,w.PI_OVER_TWO),m=b.fromRectangle3D(l,a._ellipsoid),n=d.cullingVolume.computeVisibility(m)===t.OUTSIDE,o=y.computeOccludeePointFromRectangle(l,a._ellipsoid),p=o&&!A.isPointVisible(o,0)||!A.isBoundingSphereVisible(m),a._drawNorthPole=!n&&!p,a._drawNorthPole&&(u=Y(a,d,l.north,l.south-z,i,v),pa[0]=u.x,pa[1]=u.y,pa[2]=u.x+u.width,pa[3]=u.y,pa[4]=u.x+u.width,pa[5]=u.y+u.height,pa[6]=u.x,pa[7]=u.y+u.height,j(a._northPoleCommand.vertexArray)?a._northPoleCommand.vertexArray.getAttribute(0).vertexBuffer.copyFromArrayView(pa):(a._northPoleCommand.boundingVolume=b.fromRectangle3D(l,a._ellipsoid),q=new r({attributes:{position:new s({componentDatatype:h.FLOAT,componentsPerAttribute:2,values:pa})}}),a._northPoleCommand.vertexArray=c.createVertexArrayFromGeometry({geometry:q,attributeLocations:{position:0},bufferUsage:D.STREAM_DRAW})))),f.south>-w.PI_OVER_TWO&&(l=new B(-Math.PI,-w.PI_OVER_TWO,Math.PI,f.south),m=b.fromRectangle3D(l,a._ellipsoid),n=d.cullingVolume.computeVisibility(m)===t.OUTSIDE,o=y.computeOccludeePointFromRectangle(l,a._ellipsoid),p=o&&!A.isPointVisible(o)||!A.isBoundingSphereVisible(m),a._drawSouthPole=!n&&!p,a._drawSouthPole&&(u=Y(a,d,l.south,l.north+z,i,v),pa[0]=u.x,pa[1]=u.y,pa[2]=u.x+u.width,pa[3]=u.y,pa[4]=u.x+u.width,pa[5]=u.y+u.height,pa[6]=u.x,pa[7]=u.y+u.height,j(a._southPoleCommand.vertexArray)?a._southPoleCommand.vertexArray.getAttribute(0).vertexBuffer.copyFromArrayView(pa):(a._southPoleCommand.boundingVolume=b.fromRectangle3D(l,a._ellipsoid),q=new r({attributes:{position:new s({componentDatatype:h.FLOAT,componentsPerAttribute:2,values:pa})}}),a._southPoleCommand.vertexArray=c.createVertexArrayFromGeometry({geometry:q,attributeLocations:{position:0},bufferUsage:D.STREAM_DRAW}))));var C=0,E=a._imageryLayerCollection.length>0?a._imageryLayerCollection.get(0):void 0;j(E)&&j(E.imageryProvider)&&j(E.imageryProvider.getPoleIntensity)&&(C=E.imageryProvider.getPoleIntensity());var F={u_dayIntensity:function(){return C}};if(!j(a._northPoleCommand.uniformMap)){var G=g(F,{u_color:function(){return a.northPoleColor}});a._northPoleCommand.uniformMap=g(G,a._drawUniforms)}if(!j(a._southPoleCommand.uniformMap)){var H=g(F,{u_color:function(){return a.southPoleColor}});a._southPoleCommand.uniformMap=g(H,a._drawUniforms)}}}var $=function(a){a=i(a,n.WGS84);var f=new o({ellipsoid:a}),g=new R;this._ellipsoid=a,this._imageryLayerCollection=g,this._surfaceShaderSet=new P,this._surface=new T({tileProvider:new Q({terrainProvider:f,imageryLayers:g,surfaceShaderSet:this._surfaceShaderSet})}),this._occluder=new y(new b(e.ZERO,a.minimumRadius),e.ZERO),this._rsColor=void 0,this._rsColorWithoutDepthTest=void 0,this._clearDepthCommand=new E({depth:1,stencil:0,owner:this}),this._depthCommand=new F({boundingVolume:new b(e.ZERO,a.maximumRadius),pass:S.OPAQUE,owner:this}),this._northPoleCommand=new F({pass:S.OPAQUE,owner:this}),this._southPoleCommand=new F({pass:S.OPAQUE,owner:this}),this._drawNorthPole=!1,this._drawSouthPole=!1,this._mode=U.SCENE3D,this.terrainProvider=f,this.northPoleColor=new e(2/255,6/255,18/255),this.southPoleColor=new e(1,1,1),this.show=!0,this.oceanNormalMapUrl=c("Assets/Textures/waterNormalsSmall.jpg"),this._oceanNormalMapUrl=void 0,this.depthTestAgainstTerrain=!1,this.maximumScreenSpaceError=2,this.tileCacheSize=100,this.enableLighting=!1,this._enableLighting=!1,this.lightingFadeOutDistance=65e5,this.lightingFadeInDistance=9e6,this.showWaterEffect=!0,this._oceanNormalMap=void 0,this._zoomedOutOceanSpecularIntensity=.5,this._hasVertexNormals=!1,this._lightingFadeDistance=new d(this.lightingFadeOutDistance,this.lightingFadeInDistance);var h=this;this._drawUniforms={u_zoomedOutOceanSpecularIntensity:function(){return h._zoomedOutOceanSpecularIntensity},u_oceanNormalMap:function(){return h._oceanNormalMap},u_lightingFadeDistance:function(){return h._lightingFadeDistance}}};k($.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},imageryLayers:{get:function(){return this._imageryLayerCollection}},baseColor:{get:function(){return this._surface.tileProvider.baseColor},set:function(a){this._surface.tileProvider.baseColor=a}}});var _=[],aa={start:0,stop:0};$.prototype.pick=function(a,c,d){var f=c.mode,g=c.mapProjection,h=_;h.length=0;var i,k,l=this._surface._tilesToRender,m=l.length;for(k=0;m>k;++k){i=l[k];var n=i.data;if(j(n)){var o=n.pickBoundingSphere;f!==U.SCENE3D?(b.fromRectangleWithHeights2D(i.rectangle,g,n.minimumHeight,n.maximumHeight,o),e.fromElements(o.center.z,o.center.x,o.center.y,o.center)):b.clone(n.boundingSphere3D,o);var p=u.raySphere(a,o,aa);j(p)&&h.push(n)}}h.sort(W(a.origin));var q;for(m=h.length,k=0;m>k&&(q=h[k].pick(a,c,!0,d),!j(q));++k);return q};var ba=new e,ca=new e,da=new f,ea=new A;$.prototype.getHeight=function(a){var b=this._surface._levelZeroTiles;if(j(b)){var c,d,f=b.length;for(d=0;f>d&&(c=b[d],!B.contains(c.rectangle,a));++d);if(!j(c)||!B.contains(c.rectangle,a))return void 0;for(;c.renderable;){var g=c.children;for(f=g.length,d=0;f>d&&(c=g[d],!B.contains(c.rectangle,a));++d);}for(;j(c)&&(!j(c.data)||!j(c.data.pickTerrain));)c=c.parent;if(!j(c))return void 0;var h=this._surface._tileProvider.tilingScheme.ellipsoid,i=h.cartographicToCartesian(a,ba),k=ea;e.normalize(i,k.direction);var l=c.data.pick(k,void 0,!1,ca);return j(l)?h.cartesianToCartographic(l,da).height:void 0}};var fa=p.supportsTypedArrays()?new Float32Array(12):[],ga=new e,ha=new e,ia=new e,ja=new e,ka=new e,la=new e,ma=e.negate(e.UNIT_Z,new e),na=new a,oa=new x,pa=p.supportsTypedArrays()?new Float32Array(8):[];return $.prototype.update=function(a,b,c){if(this.show){var d=a.drawingBufferWidth,e=a.drawingBufferHeight;if(0!==d&&0!==e){var f=b.mode,g=b.mapProjection,i=!1;this._mode===f&&j(this._rsColor)||(i=!0,f===U.SCENE3D||f===U.COLUMBUS_VIEW?(this._rsColor=a.createRenderState({cull:{enabled:!0},depthTest:{enabled:!0}}),this._rsColorWithoutDepthTest=a.createRenderState({cull:{enabled:!0}}),this._depthCommand.renderState=a.createRenderState({cull:{enabled:!0},depthTest:{enabled:!0,func:O.ALWAYS},colorMask:{red:!1,green:!1,blue:!1,alpha:!1}})):(this._rsColor=a.createRenderState({cull:{enabled:!0}}),this._rsColorWithoutDepthTest=a.createRenderState({cull:{enabled:!0}}),this._depthCommand.renderState=a.createRenderState({cull:{enabled:!0}}))),this._mode=f;var k=this._northPoleCommand,l=this._southPoleCommand;k.renderState=this._rsColorWithoutDepthTest,l.renderState=this._rsColorWithoutDepthTest;var m=X(this,b);if(this._depthCommand.vertexArray)this._depthCommand.vertexArray.getAttribute(0).vertexBuffer.copyFromArrayView(m);else{var n=new r({attributes:{position:new s({componentDatatype:h.FLOAT,componentsPerAttribute:3,values:m})},indices:[0,1,2,2,1,3],primitiveType:z.TRIANGLES});this._depthCommand.vertexArray=a.createVertexArrayFromGeometry({geometry:n,attributeLocations:{position:0},bufferUsage:D.DYNAMIC_DRAW})}j(this._depthCommand.shaderProgram)||(this._depthCommand.shaderProgram=a.createShaderProgram(L,I,{position:0}));var o=this._surface,p=o.tileProvider,t=this.terrainProvider,u=this.showWaterEffect&&t.ready&&t.hasWaterMask;if(u&&this.oceanNormalMapUrl!==this._oceanNormalMapUrl){var w=this.oceanNormalMapUrl;if(this._oceanNormalMapUrl=w,j(w)){var x=this;N(v(w),function(b){w===x.oceanNormalMapUrl&&(x._oceanNormalMap=x._oceanNormalMap&&x._oceanNormalMap.destroy(),x._oceanNormalMap=a.createTexture2D({source:b}))})}else this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy()}var y=t.ready&&t.hasVertexNormals,A=this.enableLighting;if(!j(k.shaderProgram)||!j(l.shaderProgram)||i||this._hasVertexNormals!==y||this._enableLighting!==A){var B,C="vec4 getPosition(vec3 position3DWC) { return getPosition3DMode(position3DWC); }",E="vec4 getPosition(vec3 position3DWC) { return getPosition2DMode(position3DWC); }",F="vec4 getPosition(vec3 position3DWC) { return getPositionColumbusViewMode(position3DWC); }",P="vec4 getPosition(vec3 position3DWC) { return getPositionMorphingMode(position3DWC); }";switch(f){case U.SCENE3D:B=C;break;case U.SCENE2D:B=E;break;case U.COLUMBUS_VIEW:B=F;break;case U.MORPHING:B=P}var Q,R="float get2DYPositionFraction() { return get2DGeographicYPositionFraction(); }",S="float get2DYPositionFraction() { return get2DMercatorYPositionFraction(); }";Q=g instanceof q?R:S;var T=this._surfaceShaderSet,W=[];A&&(y?W.push("ENABLE_VERTEX_LIGHTING"):W.push("ENABLE_DAYNIGHT_SHADING")),T.baseVertexShaderSource=new G({defines:W,sources:[K,B,Q]}),T.baseFragmentShaderSource=new G({defines:W,sources:[H]}),T.invalidateShaders();var Y=a.replaceShaderProgram(k.shaderProgram,M,J,V);k.shaderProgram=Y,l.shaderProgram=Y,this._hasVertexNormals=y,this._enableLighting=A}this._occluder.cameraPosition=b.camera.positionWC,Z(this,a,b);var $=b.passes;$.render&&(f===U.SCENE3D&&(this._drawNorthPole&&c.push(k),this._drawSouthPole&&c.push(l)),this._zoomedOutOceanSpecularIntensity=f===U.SCENE3D?.5:0,o.maximumScreenSpaceError=this.maximumScreenSpaceError,o.tileCacheSize=this.tileCacheSize,p.terrainProvider=this.terrainProvider,p.lightingFadeOutDistance=this.lightingFadeOutDistance,p.lightingFadeInDistance=this.lightingFadeInDistance,p.zoomedOutOceanSpecularIntensity=this._zoomedOutOceanSpecularIntensity,p.hasWaterMask=u,p.oceanNormalMap=this._oceanNormalMap,o.update(a,b,c),(f===U.SCENE3D||f===U.COLUMBUS_VIEW)&&(this.depthTestAgainstTerrain||(c.push(this._clearDepthCommand),f===U.SCENE3D&&c.push(this._depthCommand)))),$.pick&&c.push(this._depthCommand)}}},$.prototype.isDestroyed=function(){return!1},$.prototype.destroy=function(){return this._northPoleCommand.vertexArray=this._northPoleCommand.vertexArray&&this._northPoleCommand.vertexArray.destroy(),this._southPoleCommand.vertexArray=this._southPoleCommand.vertexArray&&this._southPoleCommand.vertexArray.destroy(),this._surfaceShaderSet=this._surfaceShaderSet&&this._surfaceShaderSet.destroy(),this._northPoleCommand.shaderProgram=this._northPoleCommand.shaderProgram&&this._northPoleCommand.shaderProgram.destroy(),this._southPoleCommand.shaderProgram=this._northPoleCommand.shaderProgram,this._depthCommand.shaderProgram=this._depthCommand.shaderProgram&&this._depthCommand.shaderProgram.destroy(),this._depthCommand.vertexArray=this._depthCommand.vertexArray&&this._depthCommand.vertexArray.destroy(),this._surface=this._surface&&this._surface.destroy(),this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy(),l(this)},$}),c("Scene/GoogleEarthImageryProvider",["../Core/Credit","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/GeographicTilingScheme","../Core/loadText","../Core/Rectangle","../Core/RuntimeError","../Core/TileProviderError","../Core/WebMercatorTilingScheme","../ThirdParty/when","./ImageryProvider"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(a,b,d,e){var f=a._imageUrlTemplate;f=f.replace("{x}",b),f=f.replace("{y}",d),f=f.replace("{zoom}",e+1);var g=a._proxy;return c(g)&&(f=g.getURL(f)),f}var p=function d(e){function n(a){var b;try{b=JSON.parse(a)}catch(c){b=JSON.parse(a.replace(/([\[\{,])[\n\r ]*([A-Za-z0-9]+)[\n\r ]*:/g,'$1"$2":'))}for(var d,e=0;e<b.layers.length;e++)if(b.layers[e].id===s._channel){d=b.layers[e];break}var f;if(!c(d))throw f="Could not find layer with channel (id) of "+s._channel+".",q=k.handleError(q,s,s._errorEvent,f,void 0,void 0,void 0,p),new j(f);if(!c(d.version))throw f="Could not find a version in channel (id) "+s._channel+".",q=k.handleError(q,s,s._errorEvent,f,void 0,void 0,void 0,p),new j(f);if(s._version=d.version,c(b.projection)&&"flat"===b.projection)s._tilingScheme=new g({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new i(-Math.PI,-Math.PI,Math.PI,Math.PI)});else{if(c(b.projection)&&"mercator"!==b.projection)throw f="Unsupported projection "+b.projection+".",q=k.handleError(q,s,s._errorEvent,f,void 0,void 0,void 0,p),new j(f);s._tilingScheme=new l({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2})}s._imageUrlTemplate=s._imageUrlTemplate.replace("{request}",s._requestType).replace("{channel}",s._channel).replace("{version}",s._version),s._ready=!0,k.handleSuccess(q)}function o(){var a="An error occurred while accessing "+r+".";q=k.handleError(q,s,s._errorEvent,a,void 0,void 0,void 0,p)}function p(){var a=c(s._proxy)?s._proxy.getURL(r):r,b=h(a);m(b,n,o)}e=b(e,{}),this._url=e.url,this._path=b(e.path,"/default_map"),this._tileDiscardPolicy=e.tileDiscardPolicy,this._proxy=e.proxy,this._channel=e.channel,this._requestType="ImageryMaps",this._credit=new a("Google Imagery",d._logoData,"http://www.google.com/enterprise/mapsearth/products/earthenterprise.html"),this.defaultGamma=1.9,this._tilingScheme=void 0,this._version=void 0,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=b(e.maximumLevel,23),this._imageUrlTemplate=this._url+this._path+"/query?request={request}&channel={channel}&version={version}&x={x}&y={y}&z={zoom}",this._errorEvent=new f,this._ready=!1;var q,r=this._url+this._path+"/query?request=Json&vars=geeServerDefs&is2d=t",s=this;p()};return d(p.prototype,{url:{get:function(){return this._url}},path:{get:function(){return this._path}},proxy:{get:function(){return this._proxy}},channel:{get:function(){return this._channel}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},version:{get:function(){return this._version}},requestType:{get:function(){return this._requestType}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),p.prototype.getTileCredits=function(){return void 0},p.prototype.requestImage=function(a,b,c){var d=o(this,a,b,c)
;return n.loadImage(this,d)},p.prototype.pickFeatures=function(){return void 0},p._logoData="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAAnCAYAAACmP2LfAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAHdElNRQfcDB4TJDr1mp5kAAAAGnRFWHRTb2Z0d2FyZQBQYWludC5ORVQgdjMuNS4xMDD0cqEAAB1zSURBVHhe7ZwHeFTFFsf/u+l9N70npOxuSAKEFFIhCSH0qhEQUHkgKCgWUFGBB6IoCAoo0ntooaRvEkIIBBBpoYSa3nvvfd+5u4sQUigPfMX8v2/Y3Tkzs3fv/d0z58zcgF69Ql1SY+MM1wQJem44ZeiJk8beEOqPwG6uC7ZqyElb9eo/JZEIkH2nRQkBIlNMauuPCS3uGN/kjkmNDghoskBAgzrZ2NLmf1+JwIKQpYsoxdmIV9+N07onCegzBPM9bOdmYKnazF6g/1N6UySPqSJzvCaaiLHtP8G/Phq+FRfgU5ogKWUXMLT6Mvzqr2BE40mMadqO8c3zMabBC6PqDDC8SlY60t9HByCLVTKu+ERmHr5TWI9wjVxEaOZivWo1pil8D1tZeWnLXv1l8iZ3PF2kjymiWRgvCoJv5U243IyAXcQq8A9Mg9W+4bDe6wv+kVGwCZkL+4Sf4ZR+BZ5VGQR3EkbWn8Hopm3wq54Lz2JD6ah/P21XGopQ9Qoc16jGSqVyTJWbQbUsibFXf42mihTwZpsvAtp3k0dOhFOSEH1+ngaDefrgjFCgFkxY8fCisCBvKgODzxRh9qslBFGfYmDGLbiV5mBwRRo8KtPhVBgPu8teMP7u73chD6kMRYRGBY5xqrFKqQwz5SdTbS/Qf5mmUYw8rf01CjHC4VP7AHZxO6E3qy9ZZCQNnio2rE/4o9/tkxiQUYp+KRXgx8XC5FsXcLz/hkCrDUU4pxLHuDVYpdwL9F+qqSJZKlPwenskfOoI5tN7YPCJGVme7wKYr5EBXzgYfW+mwTI0Gjrznaj2WW+I/y8dVPdDGLcKRzXrsEqlHO8oTKHaXqAZWe9hQXCi63NhHWYI3ilfWIW/YLjqL2JRiOFBJRz+LffhcPs09D+0J8vzn3zXdBnYnp8Mi6NboTWzH9X8fVc+DhDQodxqAroe36lU9AJNWr4cEAjNwI8OAC9cT1rbUfzwGeCfKiL7dGnNc+q1NiO80b4BY1oT4V6WDcsdc6j2xbyq4wMWrA9rQmeWFn36ey/jBaoPQ4hmLYI0G/AtAf22fC/QDols8ITrIYi/Bl6knbS2o3gRbxHQxQQ0k0S/gCa2v4OJovPwacqAQ1ICjL40klr+UrWoQbFBETo18jCpZsOoFODkvuCNJYoHW3QKXFEM7ETRcKfiQe8d6NVIFImXvg4skhY40mxnQYVRIIeA1qrHEc1GrFSpxFtP99AiFbDbNKDZpAzzGkVYVcvBuBJQEo/9/6C+dyjPitwLwak74D8V6Bfw0P5VShjXFoTR7TfhUZkL29M/wfATJan1lauWC3aDOgyaVDCuTgbf1bFkfmtkye1ogsK2asivLYfCglIoD8qCknI2NHuG4QSVGMgQyMbt0fioRYh9VYcRU7QX55uDcaHtFOJEsThMtmWtQgxsDodsWaC0c3ea3MzGBJEqxrfbYmzr6xjfPAeTmt5HQPO7eK1xDibUz8eY+k8xtHYJPCtXwvHOu7AXMrMTsF/TH8HajTis1YwVqpWY0TXQDKy1OpBr5EJA52Fukxx+bmKxtjWx2DuaWawNlZD5qhzyo9KhpHAbKpJO/6t65UCPbPHA2PYrGNacgkElabCJJDev/MpDhUKKnuq44LRoYEK1IiswkS1zYCfk5y+F0qjvoTwqBOof34dGeAnUL1ZCLboEnJ9zoe0QD/Nuj00UBVXRabzVLETM3S0ICfwA8yc7Y6C3ANYbZsA7aQ1W1xzEfZEQ6dT2BkG9pP4ouo7jGE1u42JS20QMrzkCr4xwuN4+AM+cYII3EaNar2J86zmMrP8DHulCON4NhU3YWuhOYy6SZENpH9cfx7WacFC7BSvUqjBDsRPQIiugURvazeqYVaqAw6dYrJ9WQy7gayj4nYDy3HtQOVQGpYRqKEWXQf2HdGha/AFdae9Xr4czz0ubISRA75ECbSut7agegO75OLxpahze8j5GtifBpzEDLiV30Dd2mNT6StWiCbVmLt5rUkBQCEt2zWzIMSA8HgrIBkLD+Sp0jhHISYXQ/KMYukfvQ3fQxq68XCTBHId/tMTg7LV1CFs4BszJ6hBarBgHlcRv8H7tbuSKQpFPYGe0BmND+nZ0npECaPKf0r4UIxsuoF/IMpitsAVnrA4s15uh3x8fwLXkLobUZGJIXTqcUzbDaJE5FAVq0t4S7dEcjqMEc6B2K5arVWN6Z6AbdOmm5mJelQKOHWSxF44Cy4CqxW0s6RwchCovFRohdGNfLgX3WiZ0N4aD++y7jfwYJUrAPCle/ZjKV+BFTSegrGAZIm3QjXhBytTWB3zhByzryMUU986jz16wD+96ijCNUIAgmkc3tS6G7GERjCbgR82B4OTbEESqIiCIcqsIYzoGGyrBEMSmgh8xBoIIAR2fAHZhj8Z9DOhl9FHeKkSDvn809fuc+iyCddRYaiOZBTvIt1YJfs0b4N+WDO+GHPLQN2Ab7S61vjJV60C9SRPvNSqzTpxlyQfS1dGUmjppK7gW16B/LhN6abnQu5cDwzO3YNhhqqK4WJY887sEdGzWFpxfOxmDpKZOOvgWFB8sx9L6nShvP4FyUQjKGg5gScpGKEqbUE7RxiGYv6QQ4zIG/r4D2m88sjEy/EIW/a6+TQ4gHe5VhXCvy4JL7gLYnesI2i6t4Tii04r92u1YKt767gB0ozrkGzmY26zEOh7Hkt+kAKhLTX9qOVVdg9aoNOjcToR+wUVKLYKgN0Zq7l7884wn9CKgr4AfWw/B6SwqKQRKOdXVghe9CpbherASSjtIpGpxRIHFjwygNreoXy0lb+lU7lHJBP9kPcGXQnBNghUB/Lh44fbUp5JA+5Hs71LbPPLCVRDEJZDNGIJgeQI6mG6KegKzldq1U7tGKjQmHR8vwl86kgRoAQN0xBw6ztn0nQ/ocxEdQ7L4d/BjG6g+m8aZTL/xsXPuW82Fb8t+DG1Ox5D6XAwqvQ67OA+p9ZWoUQPsei78mjSwNU9GLmEzVGZJTd3qFPTn3YZhXgYMMjNhlHsDxms/hNWfoUdrNPgEc2h7BG5d/Bo7Blt0BuNxXf4MVmXrkdRyEHWiY6hr2oc7mevRX2wc18gioEeI1+N9a+/CNnImVAZ0mhEoNOPAJT8MHjUF8KTiWhqHgbfMpVaJdhLQh3XasU9bJAZ6ekeg6zQwgEKuLSWysmd3QGmatLqD8qDNug3dCX/AIPk4jGr2wDB/JXTmkan70IvmZTY/rB9BdZlKLkG0lG0d5klAObKsw1+jzyFiWPnRawiaDrMYwTyMwMwh220WP2IWFVfqN4CKO8E3n0C6R/ZUej9Y2kUiMdDRFTRePH3nA3q/m7xpAEtAXl0QrkTwscnmS/3eptdzNEYevZLnZ5booqk8tuYs9tAny+n1LL1mghezlcULH0VtHamOZhvhIvoNOXQsd2EZIbluYnlWaMO75TCFG9kYXJ8H14o76H/10Z3yClSrCm6jGtbWK7LC7kIlYRfUmY2XHnUa+mbXYRSfCuNCptyE6b1jMBD/EPKwchQPLxGdxOWWI8iKXYBPqLozgI8pfA5YBWvxbfMeNLUfRmPTLjRnr8YKsdGvRQ5j2zZTSSRQ78H+7GhxfScFAINypsG9ukDspZ0LKKE+O0pqlGi71ggcIqD3dga6RhFKjSqYT+VEFkvu/E9Q+HNWKaE2VVDgVkPFqwAaay5CN3En9M59BM2vfKDs7AvljjPGE5LlharQdL+LoCmhOHU0rIUyD+NgVTOa+q2iVQiIcAKpHtbhXuJOjPqeVCRYThNE6VTvKNs3hM3cHGIxntxKyCbP7Erj1lHZJbVIJAG6iiCroZCAPGukvOyASJbvCgoaAoKoAQ1kHcGC7nmZDkmhBR2PfSQLtkcl4zCSAE2eO6qExYuYxrE4KqdvelBiM4+ncYQy1IY8d0wbhUSLJAZGbsUceNYdwJCGPAyuy4NbZToG3JoO1Qk9AvHvqF4ejo0KCKlisyl04Jw+AE1ma71HRUJP+QqM1t2HcVEyTEoSYVYQCuN3HenCt4XDhGA+KorAnYZ9KIj5ELOl3XpU/k/wrt+OmraDaG7cjpacbxFvYAAZDG5Vw/DWCxjRdp+ATsWAS6+D69H1+XDNsoVb1T06b0VwzCmBIOYdqUWibTojcFBH1CXQctBtUcA6Oh/RmVC4sBmKA5j6erC1qqE4sRpqG25A43QIOHuXgvOmP5R4ZH6m5UY2L9SSLjZ5sKjjsI/o8olH8ngjCZoSgmw9DMIl3t42Up0g+pq89/sEjLK47knZhSkSuDepJP4JOyNJyEFAR8VQKMOR1nbWM69yxNJYwh+VLE90ffPyxLE3EwL9Jq0huWQqwL1iA7zq8+FVl0+epgBO6T+gb2TH+OglqgastxtZrNNlkLt8E5oJx6HZdab7mFZBk3UZRjMewCT7HkzLfodZxREYr5sBjiIBPYiAPt8ehvSGPSg5vwjzpd16VNkmmDTswp22QDTXbkJrxhJkzHGDFoUQmvBpvo2hrZl0TnLhlLIYfUO7nt7dSg3hURcP1/JiDEgphuXBqVKLRFsfA3oJAf3mI6Cr2OjTwGYdqWGzzmZD6WoYVCfehdqsZKjuuwS1oB1Q+5piHac3oaxBzZ9vLZ4nHEeesoXg6niDPSYWP9yUgD5PHu48eKE64krHcErchHIEuRysTpAXjObQWIYEHiV4EQYEojp5aEoyY+IIpOQugKYYOnIdJXrdJ63PtWwXMQM6m6SVT4gfZkbHV0XHsVtaQ3K8yoJr0YfwoHDDq5ZiQSqDik/B4Q9taYtn18gyNia1qGJsmTrGlUjK2FJ1jCjRwOASDnkxDvN95ZD/og5yl0qgfCMJ2leDoeksHaFHXYOJVyrMkm/DrPwMzGr2wmjnLGipthyHL0W7t9pDkduwF2U3lmGFtvbTdyirt0OreT+iWwPRUrUBbSkLkT/fCUZwKVYikBMwpDlPXNzLwuAQ2rWX8KzUh2dDDJyLSmB7/S5Mf3WRWiR6CPSezkCXQs6qBnLCKsheyoXqnTCoL9oOFd9/Qtl9KJT6UJMX3/zhCz8iuCjhiviSYtMx3ZTJBN8lCE7eIRgF0p6krRRaRBDskTTGySBKws5SuUjJHYUiMQdpzCUE0Q3y5MnSDhJJQg5JUvjSgO5hHZofaioGmvc40IycMgbRtJktjgOZ5Ma9irzSg46xYHcaVEZevkgBHqUWGFK+FENKQ+BdGAq/wiMYWbwHI6h4FwTDOes0BMKFMHxPNg9qn1dANakYanfuQSs5FJoTpaP1qBswsSGgb9+EeUU0Af0LDH4dBhXlmv3wajuOpPYQFDcEojxtNQ6sn9ZzUsiofjfUWg/iYOt+tJatRtvN95DqZgxNuKTKwLV4Jdyqc8Wz1uCGTLjmDIVDQqewQ8anwpJi6GsYkF4Ey2O/QvsfXKlJIgboAwT07s5AZ0G1TylUIsuhdKMI6vcuQ3PVAqg+9UZ8JvGEywiuNoIwD4IzaV2X+HSa1otgE3+NwJImVkycG0kx8snfyUZJW+QFApeSu+hN9BpIn6n+ZBp9bqDv+C8Fum+8IpzzJNOmR3UhTaGFcC07iAHXmamuZw28C/S/aIt+CcthF7+ToN0EQdhqOFzcBu/Sm/ApvAGX3DzYXIiF9jtWTJf74L6ZC83UfGg8SId2xnloSZKxp+gWjC0J6KSrMK8KhmnlSugtInpkCzaBV78Hl5oPoaLpECrLt+Bi4jfgS7t1q+YDUGsPwj5KDFsLlqD97JuIpmpZmP+TftM1ezjlxsOllM4H3eReDWHwKrOBW84jqMeK5OBTv4Bu6HxxgqU1s/N3MkAHSoH+ioCe+gjoJHB0s8ENLID6/UJo3E+GVlwoNEwY278tXhR50RhmeexzgmM8JXjdF36MHwEoiXn70Csv6gxBm8PiRc6gJFD1HDzFpq1cP0omo5QJZAfqQzH0f6uHZjQgeR4cC/IJZCnUtSkYVPAWBiX2/CdU/S7Ql+9TgtFCTaiP0qAEXA2yRsqwuzECziWZcM4tgv2DSljF7ID+l+JNh9+hY38HuvcYmLOhk5EEnVPfQOmpW+33YGaXhj53E2BWuxvGebOh5cPUX/sWSgXrsa9mB2qaDqCK4C7I2IA3jn8u7tat2g6D034MIbWb0fZgHlr2DscXUhNNuYdkYRPrg/7JiXDMLYBrZS6GNEZgVJM/JjWY4I16G4xr/BCDq2nKjjoAvY+Zpwo7eXBskQK9Swr0lEdAn4a2wk3o/DMNWmn54KYUQIuZsebGQuXFQ42H4kfNk4QckSOkNZ1lGkGAUoInOKkAm2jJsVtH+om9Nj9ytZxNcNdhljXByo+JJXj/i4G2u2xM02YInPJLxFB7VudTPH0ZHkWu0hbPpwHpfnAszoFDVgVsb1fDMmoL9L8S7wTFQE/1AvR33oB+QSp0czKgl34B2iO9uwJCKib5SGaZjbqLPlkhMG1YDr1gQyioSs24vQTDitagsnIL6loCUVu9C2EJK9FjYtsWBNP2Q7hb9A155zdwY5mTeGexo0w32hEcy2F7JQaOqZfgk38KY6rDMKFBiGHNt+iGPgCNYd0/s/sbAb2fgN5JQC9Wq8bkR0AzioOOx3Xo30mGbnY+tNMKoJOQCm03qfnFxRf6E1yUFAqZJcyuZRWuQmB+TWHJcgJfkjPxImcSSIUsXviMx/O9DvqfALrPDjb6nhuBAWkZ5JFKKTYuIqhz4FUdAo9CGwzO7Ra2LjUg0w9OxdlwyKxAXzHQm8lDi4HeAT1WMPSHnYXR7aswKE6Gfl4K9PdfgZ6+uG8XSmMbKyXD/LsEmFduglH2NHA7rA3Hvg+Ve1/gYO4KNFRvQUPLQVRU7MG4yn1dJ4eiULAo3JhW9xsa77+Hml8GY8FQ425uAM5wRRivNoPlTjs4XhoH35oLGFZ/S/wglyDkbWmrrsUAvY+A3kHlSwJ6ihKzCvLnuQyElmIs9LdfhmHxA+jn5kI3jcrRFOjxU6DTbTx9DybsOBh0f034EeYEVyaFD0IYhnQ9y1pTIsiPvU5AnKYkUBL78yKmQhDLgDRPSWtPp/HFkFtHqFCfRBr73wX67qsD+qFsEubCnqKBAZllcCkkT12RjSHVMfApH0bJXfcH+aQGZg6FU1EWeeoK2NwgoMM3Q++zP/fq/Smf2g392ZEwzk2Acfl9GBHURmuSYPyn132oHBizH8B8wjX0SadQI2cWtOZZQbHTdEgRn8XN93EiczFayn5GU3Mg7lJMPab5SEeoCWZZ0TF4Ne/A/ZSPUbXdDz9Qdddrrk/KtcwR7jX34VXDzGCFGFT0GzyLu922x069kdiv145tOu34jlOHBWoz4arUAZQt0LYOhmFcHJ2H6zAsYnZDc2FwKhv60+m9UQrLUJ4hSYQAVhpM1O6jj30EDD33Q6frZyoY8cMVaWZZR560kuB5V9H6iVUas+Py5L1/IHsT2ZldR4nEkMdkUd8Y8tYd43mLIMhYhenDWvgjQSQiGFOkiEv0rEAzK2u8yG10M2WwBWFdb6q9NKDNd6rCOuYD9L2VI/57QMfcEniU5cCnJgG+lR9haAnz4MzT5ZjmA4e8HBqnGtYXamF+nK7bpx0uwHxoqGyE3sKD5HHjYVJ1C6Z5qTD5Ph2G1hnQEV/0LBhxU2E+4yYsbgTCJGsuNBfYQrnjA0CPxDo2CRYJ0xGesgD1ZWvQ3LQbKeSJ54uC0UcUDVVRGExFR/FB2y7cSf4C+Zv9sXSUeQ9P2z2pQdnmBHQsPKqKqFCyWJsM75o1GMw8O/iEhFZs/KK9CD9wRfhCTYTP1dqwnBOHrQYz8IuuH5ZxxI/MLQZH5kfoeu6D4cVQGNecgXHFbRgXZsD4Xg5MjqfDeE0KTBbRDLXsLiwOR8HkxCJoOs+Eavdr08ZBBGdYP7rYzAZILsH3LYUYtgSsAXlYRwLqW0r8Ksl2id4/Onaz47IE+kayUfwddYhsgwkqXRrLgOpHEuyhVF9B7ytoTAL//qNjeFagGfGEi5nvYPEifqOx/ek4p1J/8aKBWC8N6Icy2+oL6zOhECTmw46SuoHZpXBn/pK7/DK8K1bCp3Q0vAv7wqfIBD55OuS9teFVYASPfAFccseThw+E4Ho5LOMqYB6ZCeOdK6H1bleJH2sOOPZradqlC3otDqY5F2GafQmmCZdgFnMBZteEML2yCnprh0CZWVp66gbDuD5Q2uSLUacm43jSB0gq+h55JeuRX7wRqUUbkJL8DS4GTcPqCdZgduZ6XiZjgvcp9fIY3aAH/yY+3KvcMDBjLSXQBXDML4VbaQG8a9PgUxcOzyIneKY/Or6FHDO8q7INY+RiMFJaJijE4i2VeEylej/FDs99TAPH8Dvofv8bDK/vhVHxMRhX0W+vOgXTijiY5UXANGkNnYeRUGN2VrsPNx6XVaQNgRNM03sBgUjeOKJJ/Cr+LNzFsg61YB5/elyKtic0qM031CaZAG0gqJnVEuYBIoI49gy9D6DXrQR3GoU2j3YE+WE2FI9TGBG1FLywnhNbPt1Y/OhY+o5iGqsGNmdLaVxfqZUB+g0Iztwi2AOkNZ3FCzOm30bHeHK9tKYHKfPZMFhlAtM9c2EpjALv93zY3qlE/8xyOOUVUTiSBrfy83CvDIdbRZC4uJSGwzHzd0qgkmEVfRnGW/dC79vPobtkFLRmm0HDpVt43MnrzoOm/dfQeeOf0P3wB+guJogXrIDuhHfAsdOFbKdQ5GkaYQbNNYNht2c8/AOnYNKB6Ri//Q14zRwIuohdPC76pCbWKGFCkx9GNC7B0NZD8CiJh8Odi7A59zud7EuwvU4hVUYZBhUXwqsqA56V0RiUM1Dam36UoiyFuprQhc6fRZuKKhV5+rcLKD2hrPQ+NPsvgNb0j6C9eCG0v/kU2l9/BK0ZM8EdRJQ833noG8Qib6lDkA0lYD6i8GIJlffZ/IhhbJtQjW4TP164EiWWztTnH9T+a4L/MxpjAn02hWWYDAQnefSZzm7Io7zDOpiSzGh3grwPwd3zDccPZdH4phBEkXcWBrD4wlE07qObw5pmBUGsK43T/YPfgmAFWEe5U2EeCXhGcV5nQ3u2KrTf6w+jdTNhtud7mB/ZC4vg43QAwbAMDYLF0e3os+8HGP80D7oLx0F9dD+oj9AGZ4Y85K0Yj/Vs3kQiFgeybFPIySiDzdwAz9O3JzHjPNtYk8gjv948FOOatlGodR0Dk07Bau9n0F8wFBp+luBO1CXeuDD51Q3830PRP7UIzgUlcC0vhHPRSdic6eI53ecT3W0sKyjI2EFRxhzyz3sOO8voBkEUTclYhAyshCwr642PR79diwlbBOEs8vLMFjgbbuelhpeoz5rEDxsNNl/+9ON5RWJOLsXCysQdh5IhWWbzhUmoel6v/l/RxGpZTKgbh3EtEZQMp5AX2ASd2f3AVu7695ky/7nOuc2U/BZSCFIGp+I82F/rfprsVa/+Mk0sZ2F0tTvGNZ+gRO8B7C/HQ92beWine+/IDWDBbJUmbBN/hUNOGRyyStH34vfQeP3ZV4R61atXIu9Kefg1rIB/XRJciwso9nymLXmxbP+wxcCsVAxIKwfv1AZoDH96jN6rXr1SuVeowKsuFINrs+BSXATbc59JLU/XwCwdDMw7B/vUEpgHfQYZ7v9HCNar/2E55ynDpSwYrhXF4uKUeQiY0/Oy3kM555nCITcJgmvp0F30Yo8L9KpXL1X9E2XhkPoVBuYWwbmolKDOhmv+WHiXyGNkgbTRE1pOublXkRycCz+AfUoRzPdsgKJN1w/19KpXf7n6xlnCPikE/SkWdswrozDkNoZUfIWhFTYYWaPy4a6NkgSR2XAZXSOLIWUWcCv7FP1T7sH8wFZwp7ycxz971auXIm4AG+b77MFLEKLv7ULJMy0FefCsPAOv0t0YUrIMg0s+gVfxYrgVbIJLUSzsrl2F2ZZl4L7J/Pdp/956ca969UrEna0O41/HwSJ4F3in42Fz5Trsbt5Bv3u30e9uImyvnoV15GGY/LIA6kOZP1966pZ8r3r1n5eqhwZ0F/aB4ToHGK9zh/FPHjD60RE6H1tDaaA2cdy7mvFfI+BffksPNrEksu0AAAAASUVORK5CYII=",p}),c("Scene/GridImageryProvider",["../Core/Color","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/Event","../Core/GeographicTilingScheme"],function(a,b,c,d,e,f){"use strict";var g=new a(1,1,1,.4),h=new a(0,1,0,.05),i=new a(0,.5,0,.2),j=function(a){a=b(a,b.EMPTY_OBJECT),this._tilingScheme=c(a.tilingScheme)?a.tilingScheme:new f,this._cells=b(a.cells,8),this._color=b(a.color,g),this._glowColor=b(a.glowColor,h),this._glowWidth=b(a.glowWidth,6),this._backgroundColor=b(a.backgroundColor,i),this._errorEvent=new e,this._tileWidth=b(a.tileWidth,256),this._tileHeight=b(a.tileHeight,256),this._canvasSize=b(a.canvasSize,256),this._canvas=this._createGridCanvas()};return d(j.prototype,{proxy:{get:function(){return void 0}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return void 0}},minimumLevel:{get:function(){return void 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return void 0}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return!0}},credit:{get:function(){return void 0}},hasAlphaChannel:{get:function(){return!0}}}),j.prototype._drawGrid=function(a){for(var b=0,c=this._canvasSize,d=0;d<=this._cells;++d){var e=d/this._cells,f=1+e*(c-1);a.moveTo(f,b),a.lineTo(f,c),a.moveTo(b,f),a.lineTo(c,f)}a.stroke()},j.prototype._createGridCanvas=function(){var a=document.createElement("canvas");a.width=this._canvasSize,a.height=this._canvasSize;var b=0,c=this._canvasSize,d=a.getContext("2d"),e=this._backgroundColor.toCssColorString();d.fillStyle=e,d.fillRect(b,b,c,c);var f=this._glowColor.toCssColorString();d.strokeStyle=f,d.lineWidth=this._glowWidth,d.strokeRect(b,b,c,c),this._drawGrid(d),d.lineWidth=.5*this._glowWidth,d.strokeRect(b,b,c,c),this._drawGrid(d);var g=this._color.toCssColorString();return d.strokeStyle=g,d.lineWidth=2,d.strokeRect(b,b,c,c),d.lineWidth=1,this._drawGrid(d),a},j.prototype.getTileCredits=function(){return void 0},j.prototype.requestImage=function(){return this._canvas},j.prototype.pickFeatures=function(){return void 0},j}),c("Scene/ImageryLayerFeatureInfo",["../Core/defined"],function(a){"use strict";var b=function(){this.name=void 0,this.description=void 0,this.position=void 0,this.data=void 0};return b.prototype.configureNameFromProperties=function(b){var c,d=10;for(var e in b)if(b.hasOwnProperty(e)&&b[e]){var f=e.toLowerCase();d>1&&"name"===f?(d=1,c=e):d>2&&"title"===f?(d=2,c=e):d>3&&/name/i.test(e)?(d=3,c=e):d>4&&/title/i.test(e)&&(d=4,c=e)}a(c)&&(this.name=b[c])},b.prototype.configureDescriptionFromProperties=function(b){function c(b){var d='<table class="cesium-infoBox-defaultTable">';for(var e in b)if(b.hasOwnProperty(e)){var f=b[e];a(f)&&(d+="object"==typeof f?"<tr><td>"+e+"</td><td>"+c(f)+"</td></tr>":"<tr><td>"+e+"</td><td>"+f+"</td></tr>")}return d+="</table>"}this.description=c(b)},b}),c("Scene/Moon",["../Core/buildModuleUrl","../Core/Cartesian3","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/Ellipsoid","../Core/IauOrientationAxes","../Core/Matrix3","../Core/Matrix4","../Core/Simon1994PlanetaryPositions","../Core/Transforms","./EllipsoidPrimitive","./Material"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";var o=function(b){b=c(b,c.EMPTY_OBJECT);var e=b.textureUrl;d(e)||(e=a("Assets/Textures/moonSmall.jpg")),this.show=c(b.show,!0),this.textureUrl=e,this._ellipsoid=c(b.ellipsoid,g.MOON),this.onlySunLighting=c(b.onlySunLighting,!0),this._ellipsoidPrimitive=new m({radii:this.ellipsoid.radii,material:n.fromType(n.ImageType),_owner:this}),this._ellipsoidPrimitive.material.translucent=!1,this._axes=new h};e(o.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});var p=new i,q=new i,r=new b;return o.prototype.update=function(a,b,c){if(this.show){var e=this._ellipsoidPrimitive;e.material.uniforms.image=this.textureUrl,e.onlySunLighting=this.onlySunLighting;var f=b.time;d(l.computeIcrfToFixedMatrix(f,p))||l.computeTemeToPseudoFixedMatrix(f,p);var g=this._axes.evaluate(f,q);i.transpose(g,g),i.multiply(p,g,g);var h=k.computeMoonPositionInEarthInertialFrame(f,r);i.multiplyByVector(p,h,h),j.fromRotationTranslation(g,h,e.modelMatrix),e.update(a,b,c)}},o.prototype.isDestroyed=function(){return!1},o.prototype.destroy=function(){return this._ellipsoidPrimitive=this._ellipsoidPrimitive&&this._ellipsoidPrimitive.destroy(),f(this)},o}),c("Scene/NeverTileDiscardPolicy",[],function(){"use strict";var a=function(){};return a.prototype.isReady=function(){return!0},a.prototype.shouldDiscardImage=function(){return!1},a}),c("Shaders/AdjustTranslucentFS",[],function(){"use strict";return"#ifdef MRT\n#extension GL_EXT_draw_buffers : enable\n#endif\nuniform vec4 u_bgColor;\nuniform sampler2D u_depthTexture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\nif (texture2D(u_depthTexture, v_textureCoordinates).r < 1.0)\n{\n#ifdef MRT\ngl_FragData[0] = u_bgColor;\ngl_FragData[1] = vec4(u_bgColor.a);\n#else\ngl_FragColor = u_bgColor;\n#endif\nreturn;\n}\ndiscard;\n}\n"}),c("Shaders/CompositeOITFS",[],function(){"use strict";return"uniform sampler2D u_opaque;\nuniform sampler2D u_accumulation;\nuniform sampler2D u_revealage;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\nvec4 opaque = texture2D(u_opaque, v_textureCoordinates);\nvec4 accum = texture2D(u_accumulation, v_textureCoordinates);\nfloat r = texture2D(u_revealage, v_textureCoordinates).r;\n#ifdef MRT\nvec4 transparent = vec4(accum.rgb / clamp(r, 1e-4, 5e4), accum.a);\n#else\nvec4 transparent = vec4(accum.rgb / clamp(accum.a, 1e-4, 5e4), r);\n#endif\ngl_FragColor = (1.0 - transparent.a) * transparent + transparent.a * opaque;\n}\n"}),c("Scene/OIT",["../Core/Color","../Core/defined","../Core/destroyObject","../Core/PixelFormat","../Renderer/ClearCommand","../Renderer/PixelDatatype","../Renderer/RenderState","../Renderer/ShaderSource","../Shaders/AdjustTranslucentFS","../Shaders/CompositeOITFS","./BlendEquation","./BlendFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a){a._opaqueTexture=a._opaqueTexture&&!a._opaqueTexture.isDestroyed()&&a._opaqueTexture.destroy(),a._accumulationTexture=a._accumulationTexture&&!a._accumulationTexture.isDestroyed()&&a._accumulationTexture.destroy(),a._revealageTexture=a._revealageTexture&&!a._revealageTexture.isDestroyed()&&a._revealageTexture.destroy(),a._depthTexture=a._depthTexture&&!a._depthTexture.isDestroyed()&&a._depthTexture.destroy()}function n(a){a._opaqueFBO=a._opaqueFBO&&!a._opaqueFBO.isDestroyed()&&a._opaqueFBO.destroy(),a._translucentFBO=a._translucentFBO&&!a._translucentFBO.isDestroyed()&&a._translucentFBO.destroy(),a._alphaFBO=a._alphaFBO&&!a._alphaFBO.isDestroyed()&&a._alphaFBO.destroy(),a._adjustTranslucentFBO=a._adjustTranslucentFBO&&!a._adjustTranslucentFBO.isDestroyed()&&a._adjustTranslucentFBO.destroy(),a._adjustAlphaFBO=a._adjustAlphaFBO&&!a._adjustAlphaFBO.isDestroyed()&&a._adjustAlphaFBO.destroy()}function o(a){m(a),n(a)}function p(a,b,c,e){m(a),a._opaqueTexture=b.createTexture2D({width:c,height:e,pixelFormat:d.RGBA,pixelDatatype:f.UNSIGNED_BYTE}),a._accumulationTexture=b.createTexture2D({width:c,height:e,pixelFormat:d.RGBA,pixelDatatype:f.FLOAT}),a._revealageTexture=b.createTexture2D({width:c,height:e,pixelFormat:d.RGBA,pixelDatatype:f.FLOAT}),a._depthTexture=b.createTexture2D({width:c,height:e,pixelFormat:d.DEPTH_COMPONENT,pixelDatatype:f.UNSIGNED_SHORT})}function q(a,b){n(a);var c=WebGLRenderingContext.FRAMEBUFFER_COMPLETE,d=!0;if(a._translucentMRTSupport&&(a._translucentFBO=b.createFramebuffer({colorTextures:[a._accumulationTexture,a._revealageTexture],depthTexture:a._depthTexture,destroyAttachments:!1}),a._adjustTranslucentFBO=b.createFramebuffer({colorTextures:[a._accumulationTexture,a._revealageTexture],destroyAttachments:!1}),(a._translucentFBO.status!==c||a._adjustTranslucentFBO.status!==c)&&(n(a),a._translucentMRTSupport=!1)),!a._translucentMRTSupport){a._translucentFBO=b.createFramebuffer({colorTextures:[a._accumulationTexture],depthTexture:a._depthTexture,destroyAttachments:!1}),a._alphaFBO=b.createFramebuffer({colorTextures:[a._revealageTexture],depthTexture:a._depthTexture,destroyAttachments:!1}),a._adjustTranslucentFBO=b.createFramebuffer({colorTextures:[a._accumulationTexture],destroyAttachments:!1}),a._adjustAlphaFBO=b.createFramebuffer({colorTextures:[a._revealageTexture],destroyAttachments:!1});var e=a._translucentFBO.status===c,f=a._alphaFBO.status===c,g=a._adjustTranslucentFBO.status===c,h=a._adjustAlphaFBO.status===c;e&&f&&g&&h||(o(a),a._translucentMultipassSupport=!1,d=!1)}return d&&(a._opaqueFBO=b.createFramebuffer({colorTextures:[a._opaqueTexture],depthTexture:a._depthTexture,destroyAttachments:!1})),d}function r(a,c,d,e){var f=d[e.id];if(!b(f)){var h=g.clone(e);h.depthMask=!1,h.blending=c,f=a.createRenderState(h),d[e.id]=f}return f}function s(a,b,c){return r(b,C,a._translucentRenderStateCache,c)}function t(a,b,c){return r(b,D,a._translucentRenderStateCache,c)}function u(a,b,c){return r(b,E,a._alphaRenderStateCache,c)}function v(a,c,d,e){var f=c.id,g=d[f];if(!b(g)){var h=c._attributeLocations,i=c.fragmentShaderSource.clone();i.sources=i.sources.map(function(a){return a=a.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,"void czm_translucent_main()"),a=a.replace(/gl_FragColor/g,"czm_gl_FragColor"),a=a.replace(/\bdiscard\b/g,"czm_discard = true"),a=a.replace(/czm_phong/g,"czm_translucentPhong")}),i.sources.splice(0,0,(-1!==e.indexOf("gl_FragData")?"#extension GL_EXT_draw_buffers : enable \n":"")+"vec4 czm_gl_FragColor;\n"+"bool czm_discard = false;\n"),i.sources.push("void main()\n{\n    czm_translucent_main();\n    if (czm_discard)\n    {\n        discard;\n    }\n"+e+"}\n"),g=a.createShaderProgram(c.vertexShaderSource,i,h),d[f]=g}return g}function w(a,b,c){return v(b,c,a._translucentShaderCache,F)}function x(a,b,c){return v(b,c,a._translucentShaderCache,G)}function y(a,b,c){return v(b,c,a._alphaShaderCache,H)}function z(a,c,d,e,f){var g,h,i,j,k=c.context,l=e.framebuffer,m=f.length;e.framebuffer=a._adjustTranslucentFBO,a._adjustTranslucentCommand.execute(k,e),e.framebuffer=a._adjustAlphaFBO,a._adjustAlphaCommand.execute(k,e);var n=a._opaqueFBO;for(e.framebuffer=a._translucentFBO,j=0;m>j;++j)g=f[j],b(g.oit)&&g.shaderProgram.id===g.oit.shaderProgramId||(g.oit={colorRenderState:t(a,k,g.renderState),alphaRenderState:u(a,k,g.renderState),colorShaderProgram:x(a,k,g.shaderProgram),alphaShaderProgram:y(a,k,g.shaderProgram),shaderProgramId:g.shaderProgram.id}),h=g.oit.colorRenderState,i=g.oit.colorShaderProgram,d(g,c,k,e,h,i,n);for(e.framebuffer=a._alphaFBO,j=0;m>j;++j)g=f[j],h=g.oit.alphaRenderState,i=g.oit.alphaShaderProgram,d(g,c,k,e,h,i,n);e.framebuffer=l}function A(a,c,d,e,f){var g=c.context,h=e.framebuffer,i=f.length;e.framebuffer=a._adjustTranslucentFBO,a._adjustTranslucentCommand.execute(g,e);var j=a._opaqueFBO;e.framebuffer=a._translucentFBO;for(var k=0;i>k;++k){var l=f[k];b(l.oit)&&l.shaderProgram.id===l.oit.shaderProgramId||(l.oit={translucentRenderState:s(a,g,l.renderState),translucentShaderProgram:w(a,g,l.shaderProgram),shaderProgramId:l.shaderProgram.id});var m=l.oit.translucentRenderState,n=l.oit.translucentShaderProgram;d(l,c,g,e,m,n,j)}e.framebuffer=h}var B=function(b){var c=b.floatingPointTexture&&b.depthTexture;this._translucentMRTSupport=b.drawBuffers&&c,this._translucentMultipassSupport=!this._translucentMRTSupport&&c,this._opaqueTexture=void 0,this._accumulationTexture=void 0,this._depthTexture=void 0,this._opaqueFBO=void 0,this._translucentFBO=void 0,this._alphaFBO=void 0,this._adjustTranslucentFBO=void 0,this._adjustAlphaFBO=void 0,this._opaqueClearCommand=new e({color:new a(0,0,0,0),owner:this}),this._translucentMRTClearCommand=new e({color:new a(0,0,0,1),owner:this}),this._translucentMultipassClearCommand=new e({color:new a(0,0,0,0),owner:this}),this._alphaClearCommand=new e({color:new a(1,1,1,1),owner:this}),this._translucentRenderStateCache={},this._alphaRenderStateCache={},this._translucentShaderCache={},this._alphaShaderCache={},this._compositeCommand=void 0,this._adjustTranslucentCommand=void 0,this._adjustAlphaCommand=void 0};B.prototype.update=function(a){if(this.isSupported()){var c=a.drawingBufferWidth,d=a.drawingBufferHeight,e=this._opaqueTexture,f=!b(e)||e.width!==c||e.height!==d;if(f&&p(this,a,c,d),b(this._opaqueFBO)&&!f||q(this,a)){var g,k,l=this;b(this._compositeCommand)||(g=new h({sources:[j]}),this._translucentMRTSupport&&g.defines.push("MRT"),k={u_opaque:function(){return l._opaqueTexture},u_accumulation:function(){return l._accumulationTexture},u_revealage:function(){return l._revealageTexture}},this._compositeCommand=a.createViewportQuadCommand(g,{renderState:a.createRenderState(),uniformMap:k,owner:this})),b(this._adjustTranslucentCommand)||(this._translucentMRTSupport?(g=new h({defines:["MRT"],sources:[i]}),k={u_bgColor:function(){return l._translucentMRTClearCommand.color},u_depthTexture:function(){return l._depthTexture}},this._adjustTranslucentCommand=a.createViewportQuadCommand(g,{renderState:a.createRenderState(),uniformMap:k,owner:this})):this._translucentMultipassSupport&&(g=new h({sources:[i]}),k={u_bgColor:function(){return l._translucentMultipassClearCommand.color},u_depthTexture:function(){return l._depthTexture}},this._adjustTranslucentCommand=a.createViewportQuadCommand(g,{renderState:a.createRenderState(),uniformMap:k,owner:this}),k={u_bgColor:function(){return l._alphaClearCommand.color},u_depthTexture:function(){return l._depthTexture}},this._adjustAlphaCommand=a.createViewportQuadCommand(g,{renderState:a.createRenderState(),uniformMap:k,owner:this})))}}};var C={enabled:!0,color:new a(0,0,0,0),equationRgb:k.ADD,equationAlpha:k.ADD,functionSourceRgb:l.ONE,functionDestinationRgb:l.ONE,functionSourceAlpha:l.ZERO,functionDestinationAlpha:l.ONE_MINUS_SOURCE_ALPHA},D={enabled:!0,color:new a(0,0,0,0),equationRgb:k.ADD,equationAlpha:k.ADD,functionSourceRgb:l.ONE,functionDestinationRgb:l.ONE,functionSourceAlpha:l.ONE,functionDestinationAlpha:l.ONE},E={enabled:!0,color:new a(0,0,0,0),equationRgb:k.ADD,equationAlpha:k.ADD,functionSourceRgb:l.ZERO,functionDestinationRgb:l.ONE_MINUS_SOURCE_ALPHA,functionSourceAlpha:l.ZERO,functionDestinationAlpha:l.ONE_MINUS_SOURCE_ALPHA},F="    vec3 Ci = czm_gl_FragColor.rgb * czm_gl_FragColor.a;\n    float ai = czm_gl_FragColor.a;\n    float wzi = czm_alphaWeight(ai);\n    gl_FragData[0] = vec4(Ci * wzi, ai);\n    gl_FragData[1] = vec4(ai * wzi);\n",G="    vec3 Ci = czm_gl_FragColor.rgb * czm_gl_FragColor.a;\n    float ai = czm_gl_FragColor.a;\n    float wzi = czm_alphaWeight(ai);\n    gl_FragColor = vec4(Ci, ai) * wzi;\n",H="    float ai = czm_gl_FragColor.a;\n    gl_FragColor = vec4(ai);\n";return B.prototype.executeCommands=function(a,b,c,d){return this._translucentMRTSupport?(A(this,a,b,c,d),void 0):(z(this,a,b,c,d),void 0)},B.prototype.execute=function(a,b){this._compositeCommand.execute(a,b)},B.prototype.clear=function(b,c,d){var e=c.framebuffer;c.framebuffer=this._opaqueFBO,a.clone(d,this._opaqueClearCommand.color),this._opaqueClearCommand.execute(b,c),c.framebuffer=this._translucentFBO;var f=this._translucentMRTSupport?this._translucentMRTClearCommand:this._translucentMultipassClearCommand;f.execute(b,c),this._translucentMultipassSupport&&(c.framebuffer=this._alphaFBO,this._alphaClearCommand.execute(b,c)),c.framebuffer=e},B.prototype.getColorFramebuffer=function(){return this._opaqueFBO},B.prototype.isSupported=function(){return this._translucentMRTSupport||this._translucentMultipassSupport},B.prototype.isDestroyed=function(){return!1},B.prototype.destroy=function(){o(this),b(this._compositeCommand)&&(this._compositeCommand.shaderProgram=this._compositeCommand.shaderProgram&&this._compositeCommand.shaderProgram.destroy()),b(this._adjustTranslucentCommand)&&(this._adjustTranslucentCommand.shaderProgram=this._adjustTranslucentCommand.shaderProgram&&this._adjustTranslucentCommand.shaderProgram.destroy()),b(this._adjustAlphaCommand)&&(this._adjustAlphaCommand.shaderProgram=this._adjustAlphaCommand.shaderProgram&&this._adjustAlphaCommand.shaderProgram.destroy());var a,d=this._translucentShaderCache;for(a in d)d.hasOwnProperty(a)&&b(d[a])&&d[a].destroy();this._translucentShaderCache={},d=this._alphaShaderCache;for(a in d)d.hasOwnProperty(a)&&b(d[a])&&d[a].destroy();return this._alphaShaderCache={},c(this)},B}),c("Scene/OpenStreetMapImageryProvider",["../Core/Credit","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/Rectangle","../Core/WebMercatorTilingScheme","./ImageryProvider"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a,b,d,e){var f=a._url+e+"/"+b+"/"+d+"."+a._fileExtension,g=a._proxy;return c(g)&&(f=g.getURL(f)),f}var k=/\/$/,l=new a("MapQuest, Open Street Map and contributors, CC-BY-SA"),m=function(c){c=b(c,{});var d=b(c.url,"//a.tile.openstreetmap.org/");k.test(d)||(d+="/"),this._url=d,this._fileExtension=b(c.fileExtension,"png"),this._proxy=c.proxy,this._tileDiscardPolicy=c.tileDiscardPolicy,this._tilingScheme=new h,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=b(c.minimumLevel,0),this._maximumLevel=b(c.maximumLevel,18),this._rectangle=b(c.rectangle,this._tilingScheme.rectangle);var i=this._tilingScheme.positionToTileXY(g.southwest(this._rectangle),this._minimumLevel),j=this._tilingScheme.positionToTileXY(g.northeast(this._rectangle),this._minimumLevel),m=(Math.abs(j.x-i.x)+1)*(Math.abs(j.y-i.y)+1);if(m>4)throw new e("The imagery provider's rectangle and minimumLevel indicate that there are "+m+" tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.");this._errorEvent=new f,this._ready=!0;var n=b(c.credit,l);"string"==typeof n&&(n=new a(n)),this._credit=n};return d(m.prototype,{url:{get:function(){return this._url}},proxy:{get:function(){return this._proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),m.prototype.getTileCredits=function(){return void 0},m.prototype.requestImage=function(a,b,c){var d=j(this,a,b,c);return i.loadImage(this,d)},m.prototype.pickFeatures=function(){return void 0},m}),c("Scene/OrthographicFrustum",["../Core/Cartesian2","../Core/Cartesian3","../Core/Cartesian4","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Matrix4","./CullingVolume"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){(a.top!==a._top||a.bottom!==a._bottom||a.left!==a._left||a.right!==a._right||a.near!==a._near||a.far!==a._far)&&(a._left=a.left,a._right=a.right,a._top=a.top,a._bottom=a.bottom,a._near=a.near,a._far=a.far,a._orthographicMatrix=g.computeOrthographicOffCenter(a.left,a.right,a.bottom,a.top,a.near,a.far,a._orthographicMatrix))}var j=function(){this.left=void 0,this._left=void 0,this.right=void 0,this._right=void 0,this.top=void 0,this._top=void 0,this.bottom=void 0,this._bottom=void 0,this.near=1,this._near=this.near,this.far=5e8,this._far=this.far,this._cullingVolume=new h,this._orthographicMatrix=new g};e(j.prototype,{projectionMatrix:{get:function(){return i(this),this._orthographicMatrix}}});var k=new b,l=new b,m=new b,n=new b;return j.prototype.computeCullingVolume=function(a,e,f){var g=this._cullingVolume.planes,h=this.top,i=this.bottom,j=this.right,o=this.left,p=this.near,q=this.far,r=b.cross(e,f,k),s=l;b.multiplyByScalar(e,p,s),b.add(a,s,s);var t=m;b.multiplyByScalar(r,o,t),b.add(s,t,t);var u=g[0];return d(u)||(u=g[0]=new c),u.x=r.x,u.y=r.y,u.z=r.z,u.w=-b.dot(r,t),b.multiplyByScalar(r,j,t),b.add(s,t,t),u=g[1],d(u)||(u=g[1]=new c),u.x=-r.x,u.y=-r.y,u.z=-r.z,u.w=-b.dot(b.negate(r,n),t),b.multiplyByScalar(f,i,t),b.add(s,t,t),u=g[2],d(u)||(u=g[2]=new c),u.x=f.x,u.y=f.y,u.z=f.z,u.w=-b.dot(f,t),b.multiplyByScalar(f,h,t),b.add(s,t,t),u=g[3],d(u)||(u=g[3]=new c),u.x=-f.x,u.y=-f.y,u.z=-f.z,u.w=-b.dot(b.negate(f,n),t),u=g[4],d(u)||(u=g[4]=new c),u.x=e.x,u.y=e.y,u.z=e.z,u.w=-b.dot(e,s),b.multiplyByScalar(e,q,t),b.add(a,t,t),u=g[5],d(u)||(u=g[5]=new c),u.x=-e.x,u.y=-e.y,u.z=-e.z,u.w=-b.dot(b.negate(e,n),t),this._cullingVolume},j.prototype.getPixelSize=function(b,c,e){i(this);var f=this.right-this.left,g=this.top-this.bottom,h=f/b.x,j=g/b.y;return d(e)?(e.x=h,e.y=j,e):new a(h,j)},j.prototype.clone=function(a){return d(a)||(a=new j),a.left=this.left,a.right=this.right,a.top=this.top,a.bottom=this.bottom,a.near=this.near,a.far=this.far,a._left=void 0,a._right=void 0,a._top=void 0,a._bottom=void 0,a._near=void 0,a._far=void 0,a},j.prototype.equals=function(a){return d(a)&&this.right===a.right&&this.left===a.left&&this.top===a.top&&this.bottom===a.bottom&&this.near===a.near&&this.far===a.far},j}),c("Widgets/getElement",["../Core/DeveloperError"],function(){"use strict";var a=function(a){if("string"==typeof a){var b=document.getElementById(a);a=b}return a};return a}),
c("Scene/PerformanceDisplay",["../Core/Color","../Core/defaultValue","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Core/getTimestamp","../Widgets/getElement"],function(a,b,c,d,e,f,g){"use strict";var h=a.fromCssColorString("#e52"),i=a.fromCssColorString("#de3"),j=a.fromCssColorString("rgba(40, 40, 40, 0.7)"),k=function(a){a=b(a,b.EMPTY_OBJECT);var d=g(a.container);if(!c(d))throw new e("container is required");this._container=d,this._fpsColor=b(a.fpsColor,h).toCssColorString(),this._frameTimeColor=b(a.frameTimeColor,i).toCssColorString(),this._backgroundColor=b(a.backgroundColor,j).toCssColorString(),this._font=b(a.font,"bold 12px Helvetica,Arial,sans-serif");var f=document.createElement("div"),k=document.createElement("div");this._fpsText=document.createTextNode(""),k.appendChild(this._fpsText),k.style.color=this._fpsColor;var l=document.createElement("div");this._msText=document.createTextNode(""),l.style.color=this._frameTimeColor,l.appendChild(this._msText),f.appendChild(k),f.appendChild(l),f.style["z-index"]=1,f.style["background-color"]=this._backgroundColor,f.style.font=this._font,f.style.padding="7px",f.style["border-radius"]="5px",f.style.border="1px solid #444",this._container.appendChild(f),this._lastFpsSampleTime=void 0,this._frameCount=0,this._time=void 0,this._fps=0,this._frameTime=0};return k.prototype.update=function(){if(!c(this._time))return this._lastFpsSampleTime=f(),this._time=f(),void 0;var a=this._time,b=f();this._time=b;var d=b-a;this._frameCount++;var e=this._fps,g=b-this._lastFpsSampleTime;g>1e3&&(e=0|1e3*this._frameCount/g,this._lastFpsSampleTime=b,this._frameCount=0),e!==this._fps&&(this._fpsText.nodeValue=e+" FPS",this._fps=e),d!==this._frameTime&&(this._msText.nodeValue=d.toFixed(2)+" MS",this._frameTime=d)},k.prototype.destroy=function(){return d(this)},k}),c("Scene/Polygon",["../Core/Color","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/Ellipsoid","../Core/GeometryInstance","../Core/Math","../Core/PolygonGeometry","./EllipsoidSurfaceAppearance","./Material","./Primitive"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=function(d){d=b(d,b.EMPTY_OBJECT),this.ellipsoid=b(d.ellipsoid,g.WGS84),this._ellipsoid=void 0,this.granularity=b(d.granularity,i.RADIANS_PER_DEGREE),this._granularity=void 0,this.height=b(d.height,0),this._height=void 0,this.textureRotationAngle=b(d.textureRotationAngle,0),this._textureRotationAngle=void 0,this.show=b(d.show,!0);var e=l.fromType(l.ColorType,{color:new a(1,1,0,.5)});this.material=b(d.material,e),this.id=d.id,this._id=void 0,this.asynchronous=b(d.asynchronous,!0),this.debugShowBoundingVolume=b(d.debugShowBoundingVolume,!1),this._positions=void 0,this._polygonHierarchy=void 0,this._createPrimitive=!1,this._primitive=void 0,c(d.positions)?this.positions=d.positions:c(d.polygonHierarchy)&&this.configureFromPolygonHierarchy(d.polygonHierarchy)};return d(n.prototype,{positions:{get:function(){return this._positions},set:function(a){this._positions=a,this._polygonHierarchy=void 0,this._createPrimitive=!0}}}),n.prototype.configureFromPolygonHierarchy=function(a){this._positions=void 0,this._polygonHierarchy=a,this._createPrimitive=!0},n.prototype.update=function(a,b,d){if(this.show&&(this._createPrimitive||c(this._primitive))){if(this._createPrimitive||this._ellipsoid!==this.ellipsoid||this._granularity!==this.granularity||this._height!==this.height||this._textureRotationAngle!==this.textureRotationAngle||this._id!==this.id){if(this._createPrimitive=!1,this._ellipsoid=this.ellipsoid,this._granularity=this.granularity,this._height=this.height,this._textureRotationAngle=this.textureRotationAngle,this._id=this.id,this._primitive=this._primitive&&this._primitive.destroy(),!c(this._positions)&&!c(this._polygonHierarchy))return;var e;e=c(this._positions)?new h({geometry:j.fromPositions({positions:this._positions,height:this.height,vertexFormat:k.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity}),id:this.id,pickPrimitive:this}):new h({geometry:new j({polygonHierarchy:this._polygonHierarchy,height:this.height,vertexFormat:k.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity}),id:this.id,pickPrimitive:this}),this._primitive=new m({geometryInstances:e,appearance:new k({aboveGround:this.height>0}),asynchronous:this.asynchronous})}var f=this._primitive;f.debugShowBoundingVolume=this.debugShowBoundingVolume,f.appearance.material=this.material,f.update(a,b,d)}},n.prototype.isDestroyed=function(){return!1},n.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),e(this)},n}),c("Scene/PrimitiveCollection",["../Core/createGuid","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError"],function(a,b,c,d,e){"use strict";function f(a,b){return a._primitives.indexOf(b)}var g=function(c){c=b(c,b.EMPTY_OBJECT),this._primitives=[],this._guid=a(),this.show=b(c.show,!0),this.destroyPrimitives=b(c.destroyPrimitives,!0)};return d(g.prototype,{length:{get:function(){return this._primitives.length}}}),g.prototype.add=function(a){var b=a._external=a._external||{},c=b._composites=b._composites||{};return c[this._guid]={collection:this},this._primitives.push(a),a},g.prototype.remove=function(a){if(this.contains(a)){var b=this._primitives.indexOf(a);if(-1!==b)return this._primitives.splice(b,1),delete a._external._composites[this._guid],this.destroyPrimitives&&a.destroy(),!0}return!1},g.prototype.removeAll=function(){if(this.destroyPrimitives)for(var a=this._primitives,b=a.length,c=0;b>c;++c)a[c].destroy();this._primitives=[]},g.prototype.contains=function(a){return!!(c(a)&&a._external&&a._external._composites&&a._external._composites[this._guid])},g.prototype.raise=function(a){if(c(a)){var b=f(this,a),d=this._primitives;if(b!==d.length-1){var e=d[b];d[b]=d[b+1],d[b+1]=e}}},g.prototype.raiseToTop=function(a){if(c(a)){var b=f(this,a),d=this._primitives;b!==d.length-1&&(d.splice(b,1),d.push(a))}},g.prototype.lower=function(a){if(c(a)){var b=f(this,a),d=this._primitives;if(0!==b){var e=d[b];d[b]=d[b-1],d[b-1]=e}}},g.prototype.lowerToBottom=function(a){if(c(a)){var b=f(this,a),d=this._primitives;0!==b&&(d.splice(b,1),d.unshift(a))}},g.prototype.get=function(a){return this._primitives[a]},g.prototype.update=function(a,b,c){if(this.show)for(var d=this._primitives,e=0;e<d.length;++e)d[e].update(a,b,c)},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){return this.removeAll(),e(this)},g}),c("Scene/QuadtreeTileProvider",["../Core/defineProperties","../Core/DeveloperError"],function(a,b){"use strict";var c=function(){b.throwInstantiationError()};return c.computeDefaultLevelZeroMaximumGeometricError=function(a){return.25*2*a.ellipsoid.maximumRadius*Math.PI/(65*a.getNumberOfXTilesAtLevel(0))},a(c.prototype,{quadtree:{get:b.throwInstantiationError,set:b.throwInstantiationError},ready:{get:b.throwInstantiationError},tilingScheme:{get:b.throwInstantiationError},errorEvent:{get:b.throwInstantiationError}}),c.prototype.beginUpdate=b.throwInstantiationError,c.prototype.endUpdate=b.throwInstantiationError,c.prototype.getLevelMaximumGeometricError=b.throwInstantiationError,c.prototype.loadTile=b.throwInstantiationError,c.prototype.computeTileVisibility=b.throwInstantiationError,c.prototype.showTileThisFrame=b.throwInstantiationError,c.prototype.computeDistanceToTile=b.throwInstantiationError,c.prototype.isDestroyed=b.throwInstantiationError,c.prototype.destroy=b.throwInstantiationError,c}),c("Scene/RectanglePrimitive",["../Core/Color","../Core/defaultValue","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Core/Ellipsoid","../Core/GeometryInstance","../Core/Math","../Core/Rectangle","../Core/RectangleGeometry","./EllipsoidSurfaceAppearance","./Material","./Primitive"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=function(c){c=b(c,b.EMPTY_OBJECT),this.ellipsoid=b(c.ellipsoid,f.WGS84),this._ellipsoid=void 0,this.rectangle=i.clone(c.rectangle),this._rectangle=void 0,this.granularity=b(c.granularity,h.RADIANS_PER_DEGREE),this._granularity=void 0,this.height=b(c.height,0),this._height=void 0,this.rotation=b(c.rotation,0),this._rotation=void 0,this.textureRotationAngle=b(c.textureRotationAngle,0),this._textureRotationAngle=void 0,this.show=b(c.show,!0);var d=l.fromType(l.ColorType,{color:new a(1,1,0,.5)});this.material=b(c.material,d),this.id=c.id,this._id=void 0,this.asynchronous=b(c.asynchronous,!0),this.debugShowBoundingVolume=b(c.debugShowBoundingVolume,!1),this._primitive=void 0};return n.prototype.update=function(a,b,d){if(this.show&&c(this.rectangle)){if(!i.equals(this._rectangle,this.rectangle)||this._ellipsoid!==this.ellipsoid||this._granularity!==this.granularity||this._height!==this.height||this._rotation!==this.rotation||this._textureRotationAngle!==this.textureRotationAngle||this._id!==this.id){this._rectangle=i.clone(this.rectangle,this._rectangle),this._ellipsoid=this.ellipsoid,this._granularity=this.granularity,this._height=this.height,this._rotation=this.rotation,this._textureRotationAngle=this.textureRotationAngle,this._id=this.id;var e=new g({geometry:new j({rectangle:this.rectangle,vertexFormat:k.VERTEX_FORMAT,ellipsoid:this.ellipsoid,granularity:this.granularity,height:this.height,rotation:this.rotation,stRotation:this.textureRotationAngle}),id:this.id,pickPrimitive:this});c(this._primitive)&&this._primitive.destroy(),this._primitive=new m({geometryInstances:e,appearance:new k({aboveGround:this.height>0}),asynchronous:this.asynchronous})}var f=this._primitive;f.appearance.material=this.material,f.debugShowBoundingVolume=this.debugShowBoundingVolume,f.update(a,b,d)}},n.prototype.isDestroyed=function(){return!1},n.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),d(this)},n}),c("Scene/SceneTransitioner",["../Core/Cartesian3","../Core/defaultValue","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Core/EasingFunction","../Core/Ellipsoid","../Core/Math","../Core/Matrix4","../Core/ScreenSpaceEventHandler","../Core/ScreenSpaceEventType","./Camera","./OrthographicFrustum","./PerspectiveFrustum","./SceneMode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";function p(a,b){if(a._scene.completeMorphOnUserInput){a._morphHandler=new j(a._scene.canvas);var c=function(){a._morphCancelled=!0,b(a)};a._completeMorph=c,a._morphHandler.setInputAction(c,k.LEFT_DOWN),a._morphHandler.setInputAction(c,k.MIDDLE_DOWN),a._morphHandler.setInputAction(c,k.RIGHT_DOWN),a._morphHandler.setInputAction(c,k.WHEEL)}}function q(a){for(var b=a._currentTweens,c=0;c<b.length;++c)b[c].cancelTween();a._currentTweens.length=0,a._morphHandler=a._morphHandler&&a._morphHandler.destroy()}function r(b,c,d,e){var g=b._scene,h=g.camera;h.setTransform(i.IDENTITY);var j=h.position,k=h.direction,l=h.up,m=a.clone(b._camera2D.position),n=a.clone(b._camera2D.direction),o=a.clone(b._camera2D.up),p=function(b){h.position=t(j,m,b.time),h.direction=t(k,n,b.time),h.up=t(l,o,b.time),h.right=a.cross(h.direction,h.up,h.right),a.normalize(h.right,h.right)},q=g.tweens.add({duration:c,easingFunction:f.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:p});b._currentTweens.push(q),A(b,g,0,1,c,e)}function s(a,b,c,d){b*=.5;var e=a._scene.camera;e.setTransform(i.IDENTITY),x(a,b,c,function(){e.frustum=a._cameraCV.frustum.clone(),r(a,b,c,d)})}function t(b,c,d){return a.lerp(b,c,d,new a)}function u(b,c,d){var e=b._scene,g=e.camera,i=g.position,j=g.frustum.fov,k=.5*h.RADIANS_PER_DEGREE,l=a.magnitude(i)*Math.tan(.5*j);g.frustum.far=l/Math.tan(.5*k)+1e7;var m=function(b){g.frustum.fov=h.lerp(j,k,b.time);var c=l/Math.tan(.5*g.frustum.fov),d=new a;g.position=a.multiplyByScalar(a.normalize(g.position,d),c,d)},n=e.tweens.add({duration:c,easingFunction:f.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:m,complete:function(){g.frustum=b._camera2D.frustum.clone(),d(b)}});b._currentTweens.push(n)}function v(b,c,d,e){var g=b._scene,h=g.camera;h.setTransform(i.IDENTITY);var j=d.maximumRadius,k=a.clone(h.position),l=a.clone(h.direction),m=a.clone(h.up),n=Math.tan(.5*b._cameraCV.frustum.fovy),o=b._cameraCV.frustum.aspectRatio*n,p=j*Math.PI/o,q=new a;q=a.multiplyByScalar(a.normalize(b._camera2D.position,q),p,q);var r=a.clone(b._camera2D.direction),s=a.clone(b._camera2D.up),v=function(b){h.position=t(k,q,b.time),h.direction=t(l,r,b.time),h.up=t(m,s,b.time),h.right=a.cross(h.direction,h.up,h.right),a.normalize(h.right,h.right)};c*=.5;var w=g.tweens.add({duration:c,easingFunction:f.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:v,complete:function(){u(b,c,e)}});b._currentTweens.push(w)}function w(b,c,d,e){c*=.5;var f=d.maximumRadius,g=Math.tan(.5*b._camera3D.frustum.fovy),h=b._camera3D.frustum.aspectRatio*g,i=f*Math.PI/h,j={},k=new a;j.position2D=a.multiplyByScalar(a.normalize(b._camera2D.position2D,k),i,k),j.direction2D=a.clone(b._camera2D.direction2D),j.up2D=a.clone(b._camera2D.up2D);var l=function(){u(b,c,e)};z(b,c,j,l)}function x(b,c,d,e){var g=b._scene,i=g.camera,j=d.maximumRadius,k=Math.tan(.5*b._cameraCV.frustum.fovy),l=b._cameraCV.frustum.aspectRatio*k,m=j*Math.PI/l,n=new a;n=a.multiplyByScalar(a.normalize(b._camera2D.position,n),m,n);var o=i.frustum.top,p=i.frustum.bottom,q=i.frustum.right,r=i.frustum.left,s=b._camera2D.frustum,u=b._cameraCV.frustum,v=a.clone(i.position),w=function(a){i.position=t(v,n,a.time),i.frustum.top=h.lerp(o,s.top,a.time),i.frustum.bottom=h.lerp(p,s.bottom,a.time),i.frustum.right=h.lerp(q,s.right,a.time),i.frustum.left=h.lerp(r,s.left,a.time)},x=(q-r)/(2*j*Math.PI),y=1;x>y&&(x=0);var z=(y-x)*c;if(z<h.EPSILON6){if(a.equalsEpsilon(v,n,h.EPSILON6))return i.position=n,i.frustum=u.clone(),e(b),void 0;z=c,x=0,y=1}var A=g.tweens.add({easingFunction:f.QUARTIC_OUT,duration:z,startObject:{time:x},stopObject:{time:y},update:w,complete:function(){i.frustum=u.clone(),e(b)}});b._currentTweens.push(A)}function y(b,c,d,e){var g=b._scene,h=g.camera;h.setTransform(i.IDENTITY),c*=.5;var j=function(){var d=a.clone(h.position),i=a.clone(h.direction),j=a.clone(h.up),k=a.clone(b._cameraCV.position),l=a.clone(b._cameraCV.direction),m=a.clone(b._cameraCV.up),n=function(b){h.position=t(d,k,b.time),h.direction=t(i,l,b.time),h.up=t(j,m,b.time),h.right=a.cross(h.direction,h.up,h.right),a.normalize(h.right,h.right)},o=g.tweens.add({duration:c,easingFunction:f.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:n,complete:function(){e(b)}});b._currentTweens.push(o)};x(b,c,d,j)}function z(b,c,d,e){var g=b._scene,h=g.camera;h.setTransform(i.IDENTITY);var j=a.clone(h.position),k=a.clone(h.direction),l=a.clone(h.up),m=a.clone(d.position2D),n=a.clone(d.direction2D),o=a.clone(d.up2D),p=function(b){h.position=t(j,m,b.time),h.direction=t(k,n,b.time),h.up=t(l,o,b.time),h.right=a.cross(h.direction,h.up,h.right),a.normalize(h.right,h.right)},q=g.tweens.add({duration:c,easingFunction:f.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:p,complete:function(){h.position=m,h.direction=n,h.up=o,h.right=a.cross(n,o,h.right),a.normalize(h.right,h.right)}});b._currentTweens.push(q),A(b,g,1,0,c,e)}function A(a,b,d,e,g,h){var i={object:b,property:"morphTime",startValue:d,stopValue:e,duration:g,easingFunction:f.QUARTIC_OUT};c(h)&&(i.complete=function(){h(a)});var j=b.tweens.addProperty(i);a._currentTweens.push(j)}function B(a){var b=a._scene,c=b.drawingBufferHeight/b.drawingBufferWidth,d=a._camera2D.frustum;d.top=d.right*c,d.bottom=-d.top,c=1/c,d=a._cameraCV.frustum,d.aspectRatio=c,d=a._camera3D.frustum,d.aspectRatio=c;var e=b.camera;switch(b.mode){case o.SCENE3D:e.frustum=a._camera3D.frustum.clone();break;case o.COLUMBUS_VIEW:e.frustum=a._cameraCV.frustum.clone();break;case o.SCENE2D:e.frustum=a._camera2D.frustum.clone()}}function C(b){var d=b._scene;if(d.mode=o.SCENE3D,d.morphTime=o.getMorphTime(o.SCENE3D),q(b),B(b),b._previousMode!==o.MORPHING||b._morphCancelled){b._morphCancelled=!1;var e=d.camera;e.position=a.clone(b._camera3D.position),e.direction=a.clone(b._camera3D.direction),e.up=a.clone(b._camera3D.up),e.right=a.cross(e.direction,e.up,e.right),a.normalize(e.right,e.right)}var f=c(b._completeMorph);b._completeMorph=void 0,b._scene.morphComplete.raiseEvent(b,b._previousMode,o.SCENE3D,f)}function D(b){var d=b._scene;d.mode=o.SCENE2D,d.morphTime=o.getMorphTime(o.SCENE2D),q(b),B(b);var e=d.camera;a.clone(b._camera2D.position,e.position),a.clone(b._camera2D.direction,e.direction),a.clone(b._camera2D.up,e.up),a.cross(e.direction,e.up,e.right),a.normalize(e.right,e.right);var f=c(b._completeMorph);b._completeMorph=void 0,b._scene.morphComplete.raiseEvent(b,b._previousMode,o.SCENE2D,f)}function E(b){var d=b._scene;if(d.mode=o.COLUMBUS_VIEW,d.morphTime=o.getMorphTime(o.COLUMBUS_VIEW),q(b),B(b),b._previousModeMode!==o.MORPHING||b._morphCancelled){b._morphCancelled=!1;var e=d.camera;a.clone(b._cameraCV.position,e.position),a.clone(b._cameraCV.direction,e.direction),a.clone(b._cameraCV.up,e.up),a.cross(e.direction,e.up,e.right),a.normalize(e.right,e.right)}var f=c(b._completeMorph);b._completeMorph=void 0,b._scene.morphComplete.raiseEvent(b,b._previousMode,o.COLUMBUS_VIEW,f)}var F=function(c,d){this._scene=c,d=b(d,g.WGS84);var e=d.maximumRadius,f=new a(0,0,2*e),j=new a;j=a.normalize(a.negate(f,j),j);var k=a.clone(a.UNIT_Y),o=i.multiplyByPoint(l.TRANSFORM_2D,f,new a),p=i.multiplyByPointAsVector(l.TRANSFORM_2D,j,new a),q=i.multiplyByPointAsVector(l.TRANSFORM_2D,k,new a),r=new m;r.right=e*Math.PI,r.left=-r.right,r.top=r.right*(c.drawingBufferHeight/c.drawingBufferWidth),r.bottom=-r.top,this._camera2D={position:f,direction:j,up:k,position2D:o,direction2D:p,up2D:q,frustum:r},f=new a(0,-1,1),f=a.multiplyByScalar(a.normalize(f,f),5*e,f),j=new a,j=a.normalize(a.subtract(a.ZERO,f,j),j);var s=new a;s=a.normalize(a.cross(j,a.UNIT_Z,s),s),k=new a,k=a.normalize(a.cross(s,j,k),k),o=i.multiplyByPoint(l.TRANSFORM_2D,f,new a),p=i.multiplyByPointAsVector(l.TRANSFORM_2D,j,new a);var t=i.multiplyByPointAsVector(l.TRANSFORM_2D,s,new a);q=new a,q=a.normalize(a.cross(t,p,q),q),r=new n,r.aspectRatio=c.drawingBufferWidth/c.drawingBufferHeight,r.fov=h.toRadians(60),this._cameraCV={position:f,direction:j,up:k,position2D:o,direction2D:p,up2D:q,frustum:r},f=new a,f=a.multiplyByScalar(a.normalize(new a(0,-2,1),f),2*e,f),j=new a,j=a.normalize(a.subtract(a.ZERO,f,j),j),s=new a,s=a.normalize(a.cross(j,a.UNIT_Z,s),s),k=new a,k=a.normalize(a.cross(s,j,k),k),this._camera3D={position:f,direction:j,up:k,frustum:r},this._currentTweens=[],this._morphHandler=void 0,this._morphCancelled=!1,this._completeMorph=void 0};return F.prototype.completeMorph=function(){c(this._completeMorph)&&this._completeMorph()},F.prototype.morphTo2D=function(a,b){c(this._completeMorph)&&this._completeMorph();var d=this._scene;this._previousMode=d.mode,this._previousMode!==o.SCENE2D&&this._previousMode!==o.MORPHING&&(this._scene.morphStart.raiseEvent(this,this._previousMode,o.SCENE2D,!0),B(this),d.mode=o.MORPHING,p(this,D),this._previousMode===o.COLUMBUS_VIEW?v(this,a,b,D):w(this,a,b,D),0===a&&c(this._completeMorph)&&this._completeMorph())},F.prototype.morphToColumbusView=function(a,b){c(this._completeMorph)&&this._completeMorph();var d=this._scene;this._previousMode=d.mode,this._previousMode!==o.COLUMBUS_VIEW&&this._previousMode!==o.MORPHING&&(this._scene.morphStart.raiseEvent(this,this._previousMode,o.COLUMBUS_VIEW,!0),B(this),d.mode=o.MORPHING,p(this,E),this._previousMode===o.SCENE2D?y(this,a,b,E):z(this,a,this._cameraCV,E),0===a&&c(this._completeMorph)&&this._completeMorph())},F.prototype.morphTo3D=function(a,b){c(this._completeMorph)&&this._completeMorph();var d=this._scene;this._previousMode=d.mode,this._previousMode!==o.SCENE3D&&this._previousMode!==o.MORPHING&&(this._scene.morphStart.raiseEvent(this,this._previousMode,o.SCENE3D,!0),B(this),d.mode=o.MORPHING,p(this,C),this._previousMode===o.SCENE2D?s(this,a,b,C):r(this,a,b,C),0===a&&c(this._completeMorph)&&this._completeMorph())},F.prototype.isDestroyed=function(){return!1},F.prototype.destroy=function(){return q(this),d(this)},F}),c("Scene/TweenCollection",["../Core/clone","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/EasingFunction","../Core/getTimestamp","../Core/TimeConstants","../ThirdParty/Tween"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(b,c,d,e,f,g,h,i,j,k){this._tweens=b,this._tweenjs=c,this._startObject=a(d),this._stopObject=a(e),this._duration=f,this._delay=g,this._easingFunction=h,this._update=i,this._complete=j,this.cancel=k,this.needsStart=!0};d(j.prototype,{startObject:{get:function(){return this._startObject}},stopObject:{get:function(){return this._stopObject}},duration:{get:function(){return this._duration}},delay:{get:function(){return this._delay}},easingFunction:{get:function(){return this._easingFunction}},update:{get:function(){return this._update}},complete:{get:function(){return this._complete}},tweenjs:{get:function(){return this._tweenjs}}}),j.prototype.cancelTween=function(){this._tweens.remove(this)};var k=function(){this._tweens=[]};return d(k.prototype,{length:{get:function(){return this._tweens.length}}}),k.prototype.add=function(d){if(d=b(d,b.EMPTY_OBJECT),0===d.duration)return c(d.complete)&&d.complete(),new j(this);var e=d.duration/h.SECONDS_PER_MILLISECOND,g=b(d.delay,0),k=g/h.SECONDS_PER_MILLISECOND,l=b(d.easingFunction,f.LINEAR_NONE),m=d.startObject,n=new i.Tween(m);n.to(a(d.stopObject),e),n.delay(k),n.easing(l),c(d.update)&&n.onUpdate(function(){d.update(m)}),n.onComplete(b(d.complete,null)),n.repeat(b(d._repeat,0));var o=new j(this,n,d.startObject,d.stopObject,d.duration,g,l,d.update,d.complete,d.cancel);return this._tweens.push(o),o},k.prototype.addProperty=function(a){function c(a){d[e]=a.value}a=b(a,b.EMPTY_OBJECT);var d=a.object,e=a.property,f=a.startValue,g=a.stopValue;return this.add({startObject:{value:f},stopObject:{value:g},duration:b(a.duration,3),delay:a.delay,easingFunction:a.easingFunction,update:c,complete:a.complete,cancel:a.cancel,_repeat:a._repeat})},k.prototype.addAlpha=function(a){function d(a){for(var b=f.length,c=0;b>c;++c)e.uniforms[f[c]].alpha=a.alpha}a=b(a,b.EMPTY_OBJECT);var e=a.material,f=[];for(var g in e.uniforms)e.uniforms.hasOwnProperty(g)&&c(e.uniforms[g])&&c(e.uniforms[g].alpha)&&f.push(g);return this.add({startObject:{alpha:b(a.startValue,0)},stopObject:{alpha:b(a.stopValue,1)},duration:b(a.duration,3),delay:a.delay,easingFunction:a.easingFunction,update:d,complete:a.complete,cancel:a.cancel})},k.prototype.addOffsetIncrement=function(a){a=b(a,b.EMPTY_OBJECT);var c=a.material,d=c.uniforms;return this.addProperty({object:d,property:"offset",startValue:d.offset,stopValue:d.offset+1,duration:a.duration,delay:a.delay,easingFunction:a.easingFunction,update:a.update,cancel:a.cancel,_repeat:1/0})},k.prototype.remove=function(a){if(!c(a))return!1;var b=this._tweens.indexOf(a);return-1!==b?(a.tweenjs.stop(),c(a.cancel)&&a.cancel(),this._tweens.splice(b,1),!0):!1},k.prototype.removeAll=function(){for(var a=this._tweens,b=0;b<a.length;++b){var d=a[b];d.tweenjs.stop(),c(d.cancel)&&d.cancel()}a.length=0},k.prototype.contains=function(a){return c(a)&&-1!==this._tweens.indexOf(a)},k.prototype.get=function(a){return this._tweens[a]},k.prototype.update=function(a){var b=this._tweens,d=0;for(a=c(a)?a/h.SECONDS_PER_MILLISECOND:g();d<b.length;){var e=b[d],f=e.tweenjs;e.needsStart?(e.needsStart=!1,f.start(a)):f.update(a)?d++:(f.stop(),b.splice(d,1))}},k}),c("Scene/ScreenSpaceCameraController",["../Core/Cartesian2","../Core/Cartesian3","../Core/Cartesian4","../Core/Cartographic","../Core/defaultValue","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Core/Ellipsoid","../Core/IntersectionTests","../Core/isArray","../Core/KeyboardEventModifier","../Core/Math","../Core/Matrix3","../Core/Matrix4","../Core/Plane","../Core/Quaternion","../Core/Ray","../Core/Transforms","./CameraEventAggregator","./CameraEventType","./SceneMode","./TweenCollection"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){"use strict";function x(a,b){if(0>a)return 0;var c=25*(1-b);return Math.exp(-c*a)}function y(b){return a.equalsEpsilon(b.startPosition,b.endPosition,m.EPSILON14)}function z(b,c,d,e,g,h,i){var j=h[i];f(j)||(j=h[i]={startPosition:new a,endPosition:new a,motion:new a,active:!1});var k=b.getButtonPressTime(c,d),l=b.getButtonReleaseTime(c,d),m=k&&l&&(l.getTime()-k.getTime())/1e3,n=new Date,o=l&&(n.getTime()-l.getTime())/1e3;if(k&&l&&Y>m){var p=x(o,e);if(j.active)j.startPosition=a.clone(j.endPosition,j.startPosition),j.endPosition=a.multiplyByScalar(j.motion,p,j.endPosition),j.endPosition=a.add(j.startPosition,j.endPosition,j.endPosition),j.motion=a.clone(a.ZERO,j.motion);else{var q=b.getLastMovement(c,d);if(!f(q)||y(q))return;j.motion.x=.5*(q.endPosition.x-q.startPosition.x),j.motion.y=.5*(q.endPosition.y-q.startPosition.y),j.startPosition=a.clone(q.startPosition,j.startPosition),j.endPosition=a.multiplyByScalar(j.motion,p,j.endPosition),j.endPosition=a.add(j.startPosition,j.endPosition,j.endPosition),j.active=!0}if(isNaN(j.endPosition.x)||isNaN(j.endPosition.y)||y(j))return j.active=!1,void 0;if(!b.isButtonDown(c,d)){var r=b.getStartMousePosition(c,d);g(h,r,j)}}else j.active=!1}function A(a,b,c,d,e,g){if(f(c)){var h=a._aggregator;k(c)||(Z[0]=c,c=Z);for(var i=c.length,j=0;i>j;++j){var l=c[j],m=f(l.eventType)?l.eventType:l,n=l.modifier,o=h.isMoving(m,n)&&h.getMovement(m,n),p=h.getStartMousePosition(m,n);a.enableInputs&&b&&(o?d(a,p,o):1>e&&z(h,m,n,e,d,a,g))}}}function B(a,b,c,d,e,g){var h=1;f(g)&&(h=m.clamp(Math.abs(g),.25,1));var i=a.minimumZoomDistance*h,j=a.maximumZoomDistance,k=e-i,l=d*k;l=m.clamp(l,a._minimumZoomRate,a._maximumZoomRate);var n=c.endPosition.y-c.startPosition.y,o=n/a._scene.canvas.clientHeight;o=Math.min(o,a.maximumMovementRatio);var p=l*o;p>0&&Math.abs(e-i)<1||0>p&&Math.abs(e-j)<1||(i>e-p?p=e-i-1:e-p>j&&(p=e-j),a._scene.camera.zoomIn(p))}function C(a,c,d){var e=a._scene,f=e.camera,g=f.getPickRay(d.startPosition,$).origin,h=f.getPickRay(d.endPosition,_).origin,i=f.position,j=b.subtract(g,i,aa),k=b.subtract(h,i,ba),l=b.subtract(j,k,aa),m=b.magnitude(l);m>0&&(b.normalize(l,l),f.move(l,m))}function D(a,b,c){f(c.distance)&&(c=c.distance);var d=a._scene,e=d.camera;B(a,b,c,a._zoomFactor,e.getMagnitude())}function E(b,c,d){if(f(d.angleAndHeight))return F(b,c,d.angleAndHeight),void 0;var e=b._scene,g=e.camera,h=e.canvas,i=h.clientWidth,j=h.clientHeight,k=ca;k.x=2/i*d.startPosition.x-1,k.y=2/j*(j-d.startPosition.y)-1,k=a.normalize(k,k);var l=da;l.x=2/i*d.endPosition.x-1,l.y=2/j*(j-d.endPosition.y)-1,l=a.normalize(l,l);var n=m.acosClamped(k.x);k.y<0&&(n=m.TWO_PI-n);var o=m.acosClamped(l.x);l.y<0&&(o=m.TWO_PI-o);var p=o-n;g.twistRight(p)}function F(a,b,c){var d=a._rotateFactor*a._rotateRateRangeAdjustment;d>a._maximumRotateRate&&(d=a._maximumRotateRate),d<a._minimumRotateRate&&(d=a._minimumRotateRate);var e=a._scene,f=e.camera,g=e.canvas,h=(c.endPosition.x-c.startPosition.x)/g.clientWidth;h=Math.min(h,a.maximumMovementRatio);var i=4*d*h*Math.PI;f.twistRight(i)}function G(a){var b=a._tweens;a._aggregator.anyButtonDown&&b.removeAll();var c=a._scene,d=c.camera;if(b.contains(a._tween)||(o.equals(o.IDENTITY,d.transform)?(A(a,a.enableTranslate,a.translateEventTypes,C,a.inertiaTranslate,"_lastInertiaTranslateMovement"),A(a,a.enableZoom,a.zoomEventTypes,D,a.inertiaZoom,"_lastInertiaZoomMovement"),A(a,a.enableRotate,a.tiltEventTypes,E,a.inertiaSpin,"_lastInertiaTiltMovement")):(A(a,a.enableRotate,a.translateEventTypes,E,a.inertiaSpin,"_lastInertiaSpinMovement"),A(a,a.enableZoom,a.zoomEventTypes,D,a.inertiaZoom,"_lastInertiaZoomMovement"))),!(a._aggregator.anyButtonDown||f(a._lastInertiaZoomMovement)&&a._lastInertiaZoomMovement.active||f(a._lastInertiaTranslateMovement)&&a._lastInertiaTranslateMovement.active||b.contains(a._tween))){var e=d.createCorrectPositionTween(a.bounceAnimationTime);f(e)&&(a._tween=b.add(e))}b.update()}function H(c,d,e){if(b.equals(d,c._translateMousePosition)||(c._looking=!1),c._looking)return U(c,d,e),void 0;var g=c._scene,h=g.camera,i=a.clone(e.startPosition,la),k=a.clone(e.endPosition,ma),l=h.getPickRay(i,ea),n=b.clone(b.ZERO,ja),o=b.UNIT_X;if(f(c._globe)&&h.position.z<c.minimumPickingTerrainHeight){var q=c._globe.pick(l,g,ga);f(q)&&(n.x=q.x)}if(n.x>h.position.z){var r=i.y;i.y=k.y,k.y=r}var s=p.fromPointNormal(n,o,ka);l=h.getPickRay(i,ea);var t=j.rayPlane(l,s,ga),u=h.getPickRay(k,fa),v=j.rayPlane(u,s,ha);if(!f(t)||!f(v))return c._looking=!0,U(c,d,e),a.clone(d,c._translateMousePosition),void 0;var w=b.subtract(t,v,ia),x=w.x;w.x=w.y,w.y=w.z,w.z=x;var y=b.magnitude(w);y>m.EPSILON6&&(b.normalize(w,w),h.move(w,y))}function I(b,c,d){if(f(d.angleAndHeight)&&(d=d.angleAndHeight),a.equals(c,b._tiltCenterMousePosition)||(b._tiltCVOffMap=!1,b._looking=!1),b._looking)return U(b,c,d),void 0;var e=b._scene,g=e.camera,h=b._maxCoord,i=Math.abs(g.position.x)-h.x<0&&Math.abs(g.position.y)-h.y<0;b._tiltCVOffMap||!i||g.position.z>b.minimumPickingTerrainHeight?(b._tiltCVOffMap=!0,J(b,c,d)):K(b,c,d)}function J(c,d,e){var g=c._scene,h=g.camera,j=g.canvas,k=na;k.x=j.clientWidth/2,k.y=j.clientHeight/2;var l,n=h.getPickRay(k,oa),p=b.UNIT_X,q=n.origin,r=n.direction,t=b.dot(p,r);if(Math.abs(t)>m.EPSILON6&&(l=-b.dot(p,q)/t),!f(l)||0>=l)return c._looking=!0,U(c,d,e),a.clone(d,c._tiltCenterMousePosition),void 0;var u=b.multiplyByScalar(r,l,pa);b.add(q,u,u);var v=g.mapProjection,w=v.ellipsoid;b.fromElements(u.y,u.z,u.x,u);var x=v.unproject(u,wa);w.cartographicToCartesian(x,u);var y=s.eastNorthUpToFixedFrame(u,w,ra),z=c._globe,A=c._ellipsoid;c._globe=void 0,c._ellipsoid=i.UNIT_SPHERE,c._rotateFactor=1,c._rotateRateRangeAdjustment=1;var B=o.clone(h.transform,xa);h.setTransform(y),O(c,d,e,b.UNIT_Z),h.setTransform(B),c._globe=z,c._ellipsoid=A;var C=A.maximumRadius;c._rotateFactor=1/C,c._rotateRateRangeAdjustment=C}function K(c,d,e){var g,h,k=c._ellipsoid,l=c._scene,r=l.camera,t=b.UNIT_X;if(a.equals(d,c._tiltCenterMousePosition))g=b.clone(c._tiltCenter,pa);else{if(h=r.getPickRay(d,oa),f(c._globe)&&r.position.z<c.minimumPickingTerrainHeight&&(g=c._globe.pick(h,l,pa)),!f(g)){var u,v=h.origin,w=h.direction,x=b.dot(t,w);if(Math.abs(x)>m.EPSILON6&&(u=-b.dot(t,v)/x),!f(u)||0>=u)return c._looking=!0,U(c,d,e),a.clone(d,c._tiltCenterMousePosition),void 0;g=b.multiplyByScalar(w,u,pa),b.add(v,g,g)}a.clone(d,c._tiltCenterMousePosition),b.clone(g,c._tiltCenter)}var y=l.canvas,z=na;z.x=y.clientWidth/2,z.y=c._tiltCenterMousePosition.y,h=r.getPickRay(z,oa);var A=b.clone(b.ZERO,ta);A.x=g.x;var B=p.fromPointNormal(A,t,ua),C=j.rayPlane(h,B,qa),D=r._projection;k=D.ellipsoid,b.fromElements(g.y,g.z,g.x,g);var E=D.unproject(g,wa);k.cartographicToCartesian(E,g);var F,G=s.eastNorthUpToFixedFrame(g,k,ra);f(C)?(b.fromElements(C.y,C.z,C.x,C),E=D.unproject(C,wa),k.cartographicToCartesian(E,C),F=s.eastNorthUpToFixedFrame(C,k,sa)):F=G;var H=c._globe,I=c._ellipsoid;c._globe=void 0,c._ellipsoid=i.UNIT_SPHERE,c._rotateFactor=1,c._rotateRateRangeAdjustment=1;var J=b.UNIT_Z,K=o.clone(r.transform,xa);r.setTransform(G);var L=b.cross(b.UNIT_Z,b.normalize(r.position,va),va),M=b.dot(r.right,L);if(O(c,d,e,J,!1,!0),r.setTransform(F),0>M){e.startPosition.y>e.endPosition.y&&(J=void 0);var N=r.constrainedAxis;r.constrainedAxis=void 0,O(c,d,e,J,!0,!1),r.constrainedAxis=N}else O(c,d,e,J,!0,!1);if(f(r.constrainedAxis)){var P=b.cross(r.direction,r.constrainedAxis,Za);b.equalsEpsilon(P,b.ZERO,m.EPSILON6)||(b.dot(P,r.right)<0&&b.negate(P,P),b.cross(P,r.direction,r.up),b.cross(r.direction,r.up,r.right),b.normalize(r.up,r.up),b.normalize(r.right,r.right))}r.setTransform(K),c._globe=H,c._ellipsoid=I;var Q=I.maximumRadius;c._rotateFactor=1/Q,c._rotateRateRangeAdjustment=Q;var R=b.clone(r.positionWC,va);if(W(c),!b.equals(r.positionWC,R)){r.setTransform(F),r.worldToCameraCoordinatesPoint(R,R);var S=b.magnitudeSquared(R)
;b.magnitudeSquared(r.position)>S&&(b.normalize(r.position,r.position),b.multiplyByScalar(r.position,Math.sqrt(S),r.position));var T=b.angleBetween(R,r.position),V=b.cross(R,r.position,R);b.normalize(V,V);var X=q.fromAxisAngle(V,T,ya),Y=n.fromQuaternion(X,za);n.multiplyByVector(Y,r.direction,r.direction),n.multiplyByVector(Y,r.up,r.up),b.cross(r.direction,r.up,r.right),b.cross(r.right,r.direction,r.up),r.setTransform(K)}}function L(a,c,d){f(d.distance)&&(d=d.distance);var e=a._scene,g=e.camera,h=e.canvas,i=Aa;i.x=h.clientWidth/2,i.y=h.clientHeight/2;var j,k=g.getPickRay(i,Ba);f(a._globe)&&g.position.z<a.minimumPickingTerrainHeight&&(j=a._globe.pick(k,e,Ca));var l;if(f(j))l=b.distance(k.origin,j);else{var m=b.UNIT_X,n=k.origin,o=k.direction;l=-b.dot(m,n)/b.dot(m,o)}B(a,c,d,a._zoomFactor,l)}function M(a){var b=a._scene,c=b.camera;if(o.equals(o.IDENTITY,c.transform)){var d=a._tweens;if(a._aggregator.anyButtonDown&&d.removeAll(),A(a,a.enableTilt,a.tiltEventTypes,I,a.inertiaSpin,"_lastInertiaTiltMovement"),A(a,a.enableTranslate,a.translateEventTypes,H,a.inertiaTranslate,"_lastInertiaTranslateMovement"),A(a,a.enableZoom,a.zoomEventTypes,L,a.inertiaZoom,"_lastInertiaZoomMovement"),A(a,a.enableLook,a.lookEventTypes,U),!(a._aggregator.anyButtonDown||f(a._lastInertiaZoomMovement)&&a._lastInertiaZoomMovement.active||f(a._lastInertiaTranslateMovement)&&a._lastInertiaTranslateMovement.active||d.contains(a._tween))){var e=c.createCorrectPositionTween(a.bounceAnimationTime);f(e)&&(a._tween=d.add(e))}d.update()}else A(a,a.enableRotate,a.rotateEventTypes,O,a.inertiaSpin,"_lastInertiaSpinMovement"),A(a,a.enableZoom,a.zoomEventTypes,Q,a.inertiaZoom,"_lastInertiaZoomMovement")}function N(c,d,e){var g=c._scene,h=g.camera;if(!o.equals(h.transform,o.IDENTITY))return O(c,d,e),void 0;var j,k,l,m=c._ellipsoid.geodeticSurfaceNormal(h.position,Ja);if(a.equals(d,c._rotateMousePosition))return c._looking?U(c,d,e,m):c._rotating?O(c,d,e):(j=b.magnitude(c._rotateStartPosition),k=Ha,k.x=k.y=k.z=j,l=i.fromCartesian3(k,Ia),P(c,d,e,l)),void 0;c._looking=!1,c._rotating=!1;var n=c._ellipsoid.cartesianToCartographic(h.positionWC,Fa).height;if(f(c._globe)&&n<c.minimumPickingTerrainHeight){var p=h.getPickRay(e.startPosition,Ea),q=c._globe.pick(p,g,Ga);f(q)?(j=b.magnitude(q),k=Ha,k.x=k.y=k.z=j,l=i.fromCartesian3(k,Ia),P(c,d,e,l),b.clone(q,c._rotateStartPosition)):(c._looking=!0,U(c,d,e,m))}else f(h.pickEllipsoid(e.startPosition,c._ellipsoid,Da))?(P(c,d,e,c._ellipsoid),b.clone(Da,c._rotateStartPosition)):n>c.minimumTrackBallHeight?(c._rotating=!0,O(c,d,e)):(c._looking=!0,U(c,d,e,m));a.clone(d,c._rotateMousePosition)}function O(a,c,d,g,h,i){h=e(h,!1),i=e(i,!1);var j=a._scene,k=j.camera,l=j.canvas,m=k.constrainedAxis;f(g)&&(k.constrainedAxis=g);var n=b.magnitude(k.position),o=a._rotateFactor*(n-a._rotateRateRangeAdjustment);o>a._maximumRotateRate&&(o=a._maximumRotateRate),o<a._minimumRotateRate&&(o=a._minimumRotateRate);var p=(d.startPosition.x-d.endPosition.x)/l.clientWidth,q=(d.startPosition.y-d.endPosition.y)/l.clientHeight;p=Math.min(p,a.maximumMovementRatio),q=Math.min(q,a.maximumMovementRatio);var r=2*o*p*Math.PI,s=o*q*Math.PI;h||k.rotateRight(r),i||k.rotateUp(s),k.constrainedAxis=m}function P(c,d,e,g){var h=c._scene,j=h.camera,k=b.magnitude(j.position),l=a.clone(e.startPosition,Qa),n=a.clone(e.endPosition,Ra);if(k<g.maximumRadius){l.y=n.y,n.y=e.startPosition.y;var o=k+2*(g.maximumRadius-k),p=Ha;p.x=p.y=p.z=o,g=i.fromCartesian3(p,g)}var q=j.pickEllipsoid(l,g,Ka),r=j.pickEllipsoid(n,g,La);if(!f(q)||!f(r))return c._rotating=!0,O(c,d,e),void 0;if(q=j.worldToCameraCoordinates(q,q),r=j.worldToCameraCoordinates(r,r),f(j.constrainedAxis)){var s=j.constrainedAxis,t=b.mostOrthogonalAxis(s,Ma);b.cross(t,s,t),b.normalize(t,t);var u=b.cross(s,t,Na),v=b.magnitude(q),w=b.dot(s,q),x=Math.acos(w/v),y=b.multiplyByScalar(s,w,Oa);b.subtract(q,y,y),b.normalize(y,y);var z=b.magnitude(r),A=b.dot(s,r),B=Math.acos(A/z),C=b.multiplyByScalar(s,A,Pa);b.subtract(r,C,C),b.normalize(C,C);var D=Math.acos(b.dot(y,t));b.dot(y,u)<0&&(D=m.TWO_PI-D);var E=Math.acos(b.dot(C,t));b.dot(C,u)<0&&(E=m.TWO_PI-E);var F,G=D-E;F=b.equalsEpsilon(s,j.position,m.EPSILON2)?j.right:b.cross(s,j.position,Ma);var H,I=b.cross(s,F,Ma),J=b.dot(I,b.subtract(q,s,Na)),K=b.dot(I,b.subtract(r,s,Na));H=J>0&&K>0?B-x:J>0&&0>=K?b.dot(j.position,s)>0?-x-B:x+B:x-B,j.rotateRight(G),j.rotateUp(H)}else{b.normalize(q,q),b.normalize(r,r);var L=b.dot(q,r),M=b.cross(q,r,Ma);if(1>L&&!b.equalsEpsilon(M,b.ZERO,m.EPSILON14)){var N=Math.acos(L);j.rotate(M,N)}}}function Q(a,c,d){f(d.distance)&&(d=d.distance);var e=a._ellipsoid,g=a._scene,h=g.camera,i=g.canvas,j=Aa;j.x=i.clientWidth/2,j.y=i.clientHeight/2;var k,l=h.getPickRay(j,Ba),m=e.cartesianToCartographic(h.position).height;f(a._globe)&&m<a.minimumPickingTerrainHeight&&(k=a._globe.pick(l,g,Ca));var n;n=f(k)?b.distance(l.origin,k):m;var o=b.normalize(h.position,Sa);B(a,c,d,a._zoomFactor,n,b.dot(o,h.direction))}function R(b,c,d){var e=b._scene,g=e.camera;if(o.equals(g.transform,o.IDENTITY)){if(f(d.angleAndHeight)&&(d=d.angleAndHeight),a.equals(c,b._tiltCenterMousePosition)||(b._tiltOnEllipsoid=!1,b._looking=!1),b._looking){var h=b._ellipsoid.geodeticSurfaceNormal(g.position,cb);return U(b,c,d,h),void 0}var i=b._ellipsoid,j=i.cartesianToCartographic(g.position,bb);b._tiltOnEllipsoid||j.height>b.minimumCollisionTerrainHeight?(b._tiltOnEllipsoid=!0,S(b,c,d)):T(b,c,d)}}function S(c,d,e){var g=c._ellipsoid,h=c._scene,k=h.camera,l=.25*c.minimumZoomDistance,n=g.cartesianToCartographic(k.positionWC).height;if(!(n-l-1<m.EPSILON3&&e.endPosition.y-e.startPosition.y<0)){var p=h.canvas,q=Ta;q.x=p.clientWidth/2,q.y=p.clientHeight/2;var t,u=k.getPickRay(q,Ua),v=j.rayEllipsoid(u,g);if(f(v))t=r.getPoint(u,v.start,Va);else{if(!(n>c.minimumTrackBallHeight)){c._looking=!0;var w=c._ellipsoid.geodeticSurfaceNormal(k.position,cb);return U(c,d,e,w),a.clone(d,c._tiltCenterMousePosition),void 0}var x=j.grazingAltitudeLocation(u,g);if(!f(x))return;var y=g.cartesianToCartographic(x,bb);y.height=0,t=g.cartographicToCartesian(y,Va)}var z=s.eastNorthUpToFixedFrame(t,g,Xa),A=c._globe,B=c._ellipsoid;c._globe=void 0,c._ellipsoid=i.UNIT_SPHERE,c._rotateFactor=1,c._rotateRateRangeAdjustment=1;var C=o.clone(k.transform,$a);k.setTransform(z),O(c,d,e,b.UNIT_Z),k.setTransform(C),c._globe=A,c._ellipsoid=B;var D=B.maximumRadius;c._rotateFactor=1/D,c._rotateRateRangeAdjustment=D}}function T(c,d,e){var g,h,k,l=c._ellipsoid,p=c._scene,t=p.camera;if(a.equals(d,c._tiltCenterMousePosition))g=b.clone(c._tiltCenter,Va);else{if(h=t.getPickRay(d,Ua),f(c._globe)&&(g=c._globe.pick(h,p,Va)),!f(g)){if(k=j.rayEllipsoid(h,l),!f(k)){var u=l.cartesianToCartographic(t.position,bb);if(u.height<=c.minimumTrackBallHeight){c._looking=!0;var v=c._ellipsoid.geodeticSurfaceNormal(t.position,cb);U(c,d,e,v),a.clone(d,c._tiltCenterMousePosition)}return}g=r.getPoint(h,k.start,Va)}a.clone(d,c._tiltCenterMousePosition),b.clone(g,c._tiltCenter)}var w=p.canvas,x=Ta;x.x=w.clientWidth/2,x.y=c._tiltCenterMousePosition.y,h=t.getPickRay(x,Ua);var y=b.magnitude(g),z=b.fromElements(y,y,y,Ha),A=i.fromCartesian3(z,Ia);if(k=j.rayEllipsoid(h,A),f(k)){var B=b.magnitude(h.origin)>y?k.start:k.stop,C=r.getPoint(h,B,Wa),D=s.eastNorthUpToFixedFrame(g,l,Xa),E=s.eastNorthUpToFixedFrame(C,A,Ya),F=c._globe,G=c._ellipsoid;c._globe=void 0,c._ellipsoid=i.UNIT_SPHERE,c._rotateFactor=1,c._rotateRateRangeAdjustment=1;var H=b.UNIT_Z,I=o.clone(t.transform,$a);t.setTransform(D);var J=b.cross(C,t.positionWC,Za),K=b.dot(t.rightWC,J);if(O(c,d,e,H,!1,!0),t.setTransform(E),0>K){e.startPosition.y>e.endPosition.y&&(H=void 0);var L=t.constrainedAxis;t.constrainedAxis=void 0,O(c,d,e,H,!0,!1),t.constrainedAxis=L}else O(c,d,e,H,!0,!1);if(f(t.constrainedAxis)){var M=b.cross(t.direction,t.constrainedAxis,Za);b.equalsEpsilon(M,b.ZERO,m.EPSILON6)||(b.dot(M,t.right)<0&&b.negate(M,M),b.cross(M,t.direction,t.up),b.cross(t.direction,t.up,t.right),b.normalize(t.up,t.up),b.normalize(t.right,t.right))}t.setTransform(I),c._globe=F,c._ellipsoid=G;var N=G.maximumRadius;c._rotateFactor=1/N,c._rotateRateRangeAdjustment=N;var P=b.clone(t.positionWC,Za);if(W(c),!b.equals(t.positionWC,P)){t.setTransform(E),t.worldToCameraCoordinatesPoint(P,P);var Q=b.magnitudeSquared(P);b.magnitudeSquared(t.position)>Q&&(b.normalize(t.position,t.position),b.multiplyByScalar(t.position,Math.sqrt(Q),t.position));var R=b.angleBetween(P,t.position),S=b.cross(P,t.position,P);b.normalize(S,S);var T=q.fromAxisAngle(S,R,_a),V=n.fromQuaternion(T,ab);n.multiplyByVector(V,t.direction,t.direction),n.multiplyByVector(V,t.up,t.up),b.cross(t.direction,t.up,t.right),b.cross(t.right,t.direction,t.up),t.setTransform(I)}}}function U(a,c,d,g){var h=a._scene,i=h.camera,j=db;j.x=d.startPosition.x,j.y=0;var k=eb;k.x=d.endPosition.x,k.y=0;var l=i.getPickRay(j,fb).direction,n=i.getPickRay(k,gb).direction,o=0,p=b.dot(l,n);1>p&&(o=Math.acos(p)),o=d.startPosition.x>d.endPosition.x?-o:o;var q=a._horizontalRotationAxis;if(f(g)?i.look(g,-o):f(q)?i.look(q,-o):i.lookLeft(o),j.x=0,j.y=d.startPosition.y,k.x=0,k.y=d.endPosition.y,l=i.getPickRay(j,fb).direction,n=i.getPickRay(k,gb).direction,o=0,p=b.dot(l,n),1>p&&(o=Math.acos(p)),o=d.startPosition.y>d.endPosition.y?-o:o,g=e(g,q),f(g)){var r=i.direction,s=b.negate(g,hb),t=b.equalsEpsilon(r,g,m.EPSILON2),u=b.equalsEpsilon(r,s,m.EPSILON2);if(t||u)(t&&0>o||u&&o>0)&&i.look(i.right,-o);else{p=b.dot(r,g);var v=m.acosClamped(p);o>0&&o>v&&(o=v-m.EPSILON4),p=b.dot(r,s),v=m.acosClamped(p),0>o&&-o>v&&(o=-v+m.EPSILON4);var w=b.cross(g,r,ib);i.look(w,o)}}else i.lookUp(o)}function V(a){A(a,a.enableRotate,a.rotateEventTypes,N,a.inertiaSpin,"_lastInertiaSpinMovement"),A(a,a.enableZoom,a.zoomEventTypes,Q,a.inertiaZoom,"_lastInertiaZoomMovement"),A(a,a.enableTilt,a.tiltEventTypes,R,a.inertiaSpin,"_lastInertiaTiltMovement"),A(a,a.enableLook,a.lookEventTypes,U)}function W(a){var b=a._scene,c=b.mode,d=a._globe;if(f(d)&&c!==v.SCENE2D&&c!==v.MORPHING){var e=b.camera,g=a._ellipsoid,h=b.mapProjection,i=jb;if(c===v.SCENE3D?g.cartesianToCartographic(e.position,i):h.unproject(e.position,i),!(i.height>a.minimumCollisionTerrainHeight)){var j=d.getHeight(i);f(j)&&(j+=a.minimumZoomDistance,i.height>=j||(i.height=j,c===v.SCENE3D?g.cartographicToCartesian(i,e.position):h.project(i,e.position)))}}}var X=function(c){this.enableInputs=!0,this.enableTranslate=!0,this.enableZoom=!0,this.enableRotate=!0,this.enableTilt=!0,this.enableLook=!0,this.inertiaSpin=.9,this.inertiaTranslate=.9,this.inertiaZoom=.8,this.maximumMovementRatio=.1,this.bounceAnimationTime=3,this.minimumZoomDistance=20,this.maximumZoomDistance=Number.POSITIVE_INFINITY,this.translateEventTypes=u.LEFT_DRAG,this.zoomEventTypes=[u.RIGHT_DRAG,u.WHEEL,u.PINCH],this.rotateEventTypes=u.LEFT_DRAG,this.tiltEventTypes=[u.MIDDLE_DRAG,u.PINCH,{eventType:u.LEFT_DRAG,modifier:l.CTRL}],this.lookEventTypes={eventType:u.LEFT_DRAG,modifier:l.SHIFT},this.minimumPickingTerrainHeight=15e4,this.minimumCollisionTerrainHeight=1e4,this.minimumTrackBallHeight=75e5,this._scene=c,this._globe=void 0,this._ellipsoid=void 0,this._aggregator=new t(c.canvas),this._lastInertiaSpinMovement=void 0,this._lastInertiaZoomMovement=void 0,this._lastInertiaTranslateMovement=void 0,this._lastInertiaWheelZoomMovement=void 0,this._lastInertiaTiltMovement=void 0,this._tweens=new w,this._tween=void 0,this._horizontalRotationAxis=void 0,this._tiltCenterMousePosition=new a(-1,-1),this._tiltCenter=new b,this._rotateMousePosition=new a(-1,-1),this._rotateStartPosition=new b,this._tiltCVOffMap=!1,this._looking=!1,this._rotating=!1;var e=c.mapProjection;this._maxCoord=e.project(new d(Math.PI,m.PI_OVER_TWO)),this._zoomFactor=5,this._rotateFactor=void 0,this._rotateRateRangeAdjustment=void 0,this._maximumRotateRate=1.77,this._minimumRotateRate=2e-4,this._translateFactor=1,this._minimumZoomRate=20,this._maximumZoomRate=5906376272e3},Y=.4,Z=[],$=new r,_=new r,aa=new b,ba=new b,ca=new a,da=new a,ea=new r,fa=new r,ga=new b,ha=new b,ia=new b,ja=new b,ka=new p(b.ZERO,0),la=new a,ma=new a,na=new a,oa=new r,pa=new b,qa=new b,ra=new o,sa=new o,ta=new b,ua=new p(b.ZERO,0),va=new b,wa=new d,xa=new o,ya=new q,za=new n,Aa=new a,Ba=new r,Ca=new b,Da=new b,Ea=new r,Fa=new d,Ga=new b,Ha=new b,Ia=new i,Ja=new b,Ka=c.clone(c.UNIT_W),La=c.clone(c.UNIT_W),Ma=new b,Na=new b,Oa=new b,Pa=new b,Qa=new a,Ra=new a,Sa=new b,Ta=new a,Ua=new r,Va=new b,Wa=new b,Xa=new o,Ya=new o,Za=new b,$a=new o,_a=new q,ab=new n,bb=new d,cb=new b,db=new a,eb=new a,fb=new r,gb=new r,hb=new b,ib=new b,jb=new d;return X.prototype.update=function(){o.equals(this._scene.camera.transform,o.IDENTITY)?(this._globe=this._scene.globe,this._ellipsoid=f(this._globe)?this._globe.ellipsoid:this._scene.mapProjection.ellipsoid):(this._globe=void 0,this._ellipsoid=i.UNIT_SPHERE);var a=this._ellipsoid.maximumRadius;this._rotateFactor=1/a,this._rotateRateRangeAdjustment=a;var c=this._scene,d=c.mode;d===v.SCENE2D?G(this):d===v.COLUMBUS_VIEW?(this._horizontalRotationAxis=b.UNIT_Z,M(this)):d===v.SCENE3D&&(this._horizontalRotationAxis=void 0,V(this)),W(this),this._aggregator.reset()},X.prototype.isDestroyed=function(){return!1},X.prototype.destroy=function(){return this._tweens.removeAll(),this._spinHandler=this._spinHandler&&this._spinHandler.destroy(),this._translateHandler=this._translateHandler&&this._translateHandler.destroy(),this._lookHandler=this._lookHandler&&this._lookHandler.destroy(),this._rotateHandler=this._rotateHandler&&this._rotateHandler.destroy(),this._zoomHandler=this._zoomHandler&&this._zoomHandler.destroy(),this._zoomWheelHandler=this._zoomWheelHandler&&this._zoomWheelHandler.destroy(),this._pinchHandler=this._pinchHandler&&this._pinchHandler.destroy(),g(this)},X}),c("Shaders/PostProcessFilters/AdditiveBlend",[],function(){"use strict";return"uniform sampler2D u_texture0;\nuniform sampler2D u_texture1;\nuniform vec2 u_center;\nuniform float u_radius;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\nvec4 color0 = texture2D(u_texture0, v_textureCoordinates);\nvec4 color1 = texture2D(u_texture1, v_textureCoordinates);\nfloat x = length(gl_FragCoord.xy - u_center) / u_radius;\nfloat t = smoothstep(0.5, 0.8, x);\ngl_FragColor = mix(color0 + color1, color0, t);\n}\n"}),c("Shaders/PostProcessFilters/BrightPass",[],function(){"use strict";return"uniform sampler2D u_texture;\nuniform float u_avgLuminance;\nuniform float u_threshold;\nuniform float u_offset;\nvarying vec2 v_textureCoordinates;\nfloat key(float avg)\n{\nfloat guess = 1.5 - (1.5 / (avg * 0.1 + 1.0));\nreturn max(0.0, guess) + 0.1;\n}\nvoid main()\n{\nvec4 color = texture2D(u_texture, v_textureCoordinates);\nvec3 xyz = czm_RGBToXYZ(color.rgb);\nfloat luminance = xyz.r;\nfloat scaledLum = key(u_avgLuminance) * luminance / u_avgLuminance;\nfloat brightLum = max(scaledLum - u_threshold, 0.0);\nfloat brightness = brightLum / (u_offset + brightLum);\nxyz.r = brightness;\ngl_FragColor = vec4(czm_XYZToRGB(xyz), 1.0);\n}\n"}),c("Shaders/PostProcessFilters/GaussianBlur1D",[],function(){"use strict";return"#define SAMPLES 8\nuniform float delta;\nuniform float sigma;\nuniform float direction;\nuniform sampler2D u_texture;\nuniform vec2 u_step;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\nvec2 st = v_textureCoordinates;\nvec2 dir = vec2(1.0 - direction, direction);\nvec3 g;\ng.x = 1.0 / (sqrt(czm_twoPi) * sigma);\ng.y = exp((-0.5 * delta * delta) / (sigma * sigma));\ng.z = g.y * g.y;\nvec4 result = texture2D(u_texture, st) * g.x;\nfor (int i = 1; i < SAMPLES; ++i)\n{\ng.xy *= g.yz;\nvec2 offset = float(i) * dir * u_step;\nresult += texture2D(u_texture, st - offset) * g.x;\nresult += texture2D(u_texture, st + offset) * g.x;\n}\ngl_FragColor = result;\n}\n"}),c("Shaders/PostProcessFilters/PassThrough",[],function(){"use strict";return"uniform sampler2D u_texture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\ngl_FragColor = texture2D(u_texture, v_textureCoordinates);\n}\n"}),c("Scene/SunPostProcess",["../Core/BoundingRectangle","../Core/Cartesian2","../Core/Cartesian4","../Core/Color","../Core/defaultValue","../Core/defined","../Core/destroyObject","../Core/Math","../Core/Matrix4","../Core/PixelFormat","../Core/Transforms","../Renderer/ClearCommand","../Renderer/PassState","../Renderer/PixelDatatype","../Renderer/RenderbufferFormat","../Shaders/PostProcessFilters/AdditiveBlend","../Shaders/PostProcessFilters/BrightPass","../Shaders/PostProcessFilters/GaussianBlur1D","../Shaders/PostProcessFilters/PassThrough"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";var t=function(){this._fbo=void 0,this._downSampleFBO1=void 0,this._downSampleFBO2=void 0,this._clearFBO1Command=void 0,this._clearFBO2Command=void 0,this._downSampleCommand=void 0,this._brightPassCommand=void 0,this._blurXCommand=void 0,this._blurYCommand=void 0,this._blendCommand=void 0,this._fullScreenCommand=void 0,this._downSamplePassState=new m,this._downSamplePassState.scissorTest={enable:!0,rectangle:new a},this._upSamplePassState=new m,this._upSamplePassState.scissorTest={enabled:!0,rectangle:new a},this._uCenter=new b,this._uRadius=void 0,this._blurStep=new b};t.prototype.clear=function(a,b){var c=this._clearFBO1Command;d.clone(e(b,d.BLACK),c.color),c.execute(a),c=this._clearFBO2Command,d.clone(e(b,d.BLACK),c.color),c.execute(a)},t.prototype.execute=function(a,b){this._downSampleCommand.execute(a,this._downSamplePassState),this._brightPassCommand.execute(a,this._downSamplePassState),this._blurXCommand.execute(a,this._downSamplePassState),this._blurYCommand.execute(a,this._downSamplePassState),this._fullScreenCommand.framebuffer=b,this._blendCommand.framebuffer=b,this._fullScreenCommand.execute(a),this._blendCommand.execute(a,this._upSamplePassState)};var u=new a,v=new a,w=new c,x=new b,y=new b,z=new i;return t.prototype.update=function(a){var c=a.drawingBufferWidth,e=a.drawingBufferHeight,g=this;if(!f(this._downSampleCommand)){this._clearFBO1Command=new l({color:new d}),this._clearFBO2Command=new l({color:new d});var m,t={};this._downSampleCommand=a.createViewportQuadCommand(s,{renderState:m,uniformMap:t,owner:this}),t={u_avgLuminance:function(){return.5},u_threshold:function(){return.25},u_offset:function(){return.1}},this._brightPassCommand=a.createViewportQuadCommand(q,{renderState:m,uniformMap:t,owner:this});var A=1,B=2;t={delta:function(){return A},sigma:function(){return B},direction:function(){return 0}},this._blurXCommand=a.createViewportQuadCommand(r,{renderState:m,uniformMap:t,owner:this}),t={delta:function(){return A},sigma:function(){return B},direction:function(){return 1}},this._blurYCommand=a.createViewportQuadCommand(r,{renderState:m,uniformMap:t,owner:this}),t={u_center:function(){return g._uCenter},u_radius:function(){return g._uRadius}},this._blendCommand=a.createViewportQuadCommand(p,{renderState:m,uniformMap:t,owner:this}),t={},this._fullScreenCommand=a.createViewportQuadCommand(s,{renderState:m,uniformMap:t,owner:this})}var C=Math.pow(2,Math.ceil(Math.log(c)/Math.log(2))-2),D=Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))-2),E=Math.max(C,D),F=u;F.width=c,F.height=e;var G=v;G.width=E,G.height=E;var H=this._fbo,I=f(H)&&H.getColorTexture(0)||void 0;if(!f(I)||I.width!==c||I.height!==e){H=H&&H.destroy(),this._downSampleFBO1=this._downSampleFBO1&&this._downSampleFBO1.destroy(),this._downSampleFBO2=this._downSampleFBO2&&this._downSampleFBO2.destroy(),this._blurStep.x=this._blurStep.y=1/E;var J=[a.createTexture2D({width:c,height:e})];H=this._fbo=a.depthTexture?a.createFramebuffer({colorTextures:J,depthTexture:a.createTexture2D({width:c,height:e,pixelFormat:j.DEPTH_COMPONENT,pixelDatatype:n.UNSIGNED_SHORT})}):a.createFramebuffer({colorTextures:J,depthRenderbuffer:a.createRenderbuffer({format:o.DEPTH_COMPONENT16})}),this._downSampleFBO1=a.createFramebuffer({colorTextures:[a.createTexture2D({width:E,height:E})]}),this._downSampleFBO2=a.createFramebuffer({colorTextures:[a.createTexture2D({width:E,height:E})]}),this._clearFBO1Command.framebuffer=this._downSampleFBO1,this._clearFBO2Command.framebuffer=this._downSampleFBO2,this._downSampleCommand.framebuffer=this._downSampleFBO1,this._brightPassCommand.framebuffer=this._downSampleFBO2,this._blurXCommand.framebuffer=this._downSampleFBO1,this._blurYCommand.framebuffer=this._downSampleFBO2;var K=a.createRenderState({viewport:G}),L=a.createRenderState();this._downSampleCommand.uniformMap.u_texture=function(){return H.getColorTexture(0)},this._downSampleCommand.renderState=K,this._brightPassCommand.uniformMap.u_texture=function(){return g._downSampleFBO1.getColorTexture(0)},this._brightPassCommand.renderState=K,this._blurXCommand.uniformMap.u_texture=function(){return g._downSampleFBO2.getColorTexture(0)},this._blurXCommand.uniformMap.u_step=function(){return g._blurStep},this._blurXCommand.renderState=K,this._blurYCommand.uniformMap.u_texture=function(){return g._downSampleFBO1.getColorTexture(0)},this._blurYCommand.uniformMap.u_step=function(){return g._blurStep},this._blurYCommand.renderState=K,this._blendCommand.uniformMap.u_texture0=function(){return H.getColorTexture(0)},this._blendCommand.uniformMap.u_texture1=function(){return g._downSampleFBO2.getColorTexture(0)},this._blendCommand.renderState=L,this._fullScreenCommand.uniformMap.u_texture=function(){return H.getColorTexture(0)},this._fullScreenCommand.renderState=L}var M=a.uniformState,N=M.sunPositionWC,O=M.view,P=M.viewProjection,Q=M.projection,R=i.computeViewportTransformation(F,0,1,z),S=i.multiplyByPoint(O,N,w),T=k.pointToGLWindowCoordinates(P,R,N,x);S.x+=h.SOLAR_RADIUS;var U=k.pointToGLWindowCoordinates(Q,R,S,S),V=2*30*b.magnitude(b.subtract(U,T,U)),W=y;W.x=V,W.y=V;var X=this._upSamplePassState.scissorTest.rectangle;return X.x=Math.max(T.x-.5*W.x,0),X.y=Math.max(T.y-.5*W.y,0),X.width=Math.min(W.x,c),X.height=Math.min(W.y,e),this._uCenter=b.clone(T,this._uCenter),this._uRadius=.5*Math.max(W.x,W.y),R=i.computeViewportTransformation(G,0,1,z),T=k.pointToGLWindowCoordinates(P,R,N,x),W.x*=C/c,W.y*=D/e,X=this._downSamplePassState.scissorTest.rectangle,X.x=Math.max(T.x-.5*W.x,0),X.y=Math.max(T.y-.5*W.y,0),X.width=Math.min(W.x,c),X.height=Math.min(W.y,e),this._downSamplePassState.context=a,this._upSamplePassState.context=a,this._fbo},t.prototype.isDestroyed=function(){return!1},t.prototype.destroy=function(){return this._fbo=this._fbo&&this._fbo.destroy(),this._downSampleFBO1=this._downSampleFBO1&&this._downSampleFBO1.destroy(),this._downSampleFBO2=this._downSampleFBO2&&this._downSampleFBO2.destroy(),this._downSampleCommand=this._downSampleCommand&&this._downSampleCommand.shaderProgram&&this._downSampleCommand.shaderProgram.destroy(),this._brightPassCommand=this._brightPassCommand&&this._brightPassCommand.shaderProgram&&this._brightPassCommand.shaderProgram.destroy(),this._blurXCommand=this._blurXCommand&&this._blurXCommand.shaderProgram&&this._blurXCommand.shaderProgram.destroy(),this._blurYCommand=this._blurYCommand&&this._blurYCommand.shaderProgram&&this._blurYCommand.shaderProgram.destroy(),this._blendCommand=this._blendCommand&&this._blendCommand.shaderProgram&&this._blendCommand.shaderProgram.destroy(),this._fullScreenCommand=this._fullScreenCommand&&this._fullScreenCommand.shaderProgram&&this._fullScreenCommand.shaderProgram.destroy(),g(this)},t}),c("Scene/Scene",["../Core/BoundingRectangle","../Core/BoundingSphere","../Core/Cartesian2","../Core/Cartesian3","../Core/Color","../Core/ColorGeometryInstanceAttribute","../Core/createGuid","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError","../Core/EllipsoidGeometry","../Core/Event","../Core/GeographicProjection","../Core/GeometryInstance","../Core/GeometryPipeline","../Core/Intersect","../Core/Interval","../Core/JulianDate","../Core/Math","../Core/Matrix4","../Core/mergeSort","../Core/Occluder","../Core/ShowGeometryInstanceAttribute","../Renderer/ClearCommand","../Renderer/Context","../Renderer/PassState","./Camera","./CreditDisplay","./CullingVolume","./FrameState","./FrustumCommands","./FXAA","./OIT","./OrthographicFrustum","./Pass","./PerformanceDisplay","./PerInstanceColorAppearance","./PerspectiveFrustum","./PerspectiveOffCenterFrustum","./Primitive","./PrimitiveCollection","./SceneMode","./SceneTransforms","./SceneTransitioner","./ScreenSpaceCameraController","./SunPostProcess","./TweenCollection"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W){"use strict";function X(a){var b=a.globe;if(a._mode===R.SCENE3D&&i(b)){var c=b.ellipsoid;return sa.radius=c.minimumRadius,ra=x.fromBoundingSphere(sa,a._camera.positionWC,ra)}return void 0}function Y(a){a.render=!1,a.pick=!1}function Z(a,b,c){var d=a._camera,e=a._frameState;e.mode=a._mode,e.morphTime=a.morphTime,e.mapProjection=a.mapProjection,e.frameNumber=b,e.time=t.clone(c,e.time),e.camera=d,e.cullingVolume=d.frustum.computeCullingVolume(d.positionWC,d.directionWC,d.upWC),e.occluder=X(a),e.afterRender.length=0,Y(e.passes)}function $(a,b,c,d,e){e.length=d;for(var f=0;d>f;++f){var g=Math.max(a,Math.pow(c,f)*a),h=Math.min(b,c*g),j=e[f];i(j)?(j.near=g,j.far=h):j=e[f]=new G(g,h)}}function _(a,b,c){a.debugShowFrustums&&(b.debugOverlappingFrustums=0);for(var d=a._frustumCommandsList,e=d.length,f=0;e>f;++f){var g=d[f],h=g.near,j=g.far;if(!(c.start>j)){if(c.stop<h)break;if(b.pass===K.OPAQUE||b instanceof z?g.opaqueCommands[g.opaqueIndex++]=b:b.pass===K.TRANSLUCENT&&(g.translucentCommands[g.translucentIndex++]=b),a.debugShowFrustums&&(b.debugOverlappingFrustums|=1<<f),b.executeInClosestFrustum)break}}if(a.debugShowFrustums){var k=a._debugFrustumStatistics.commandsInFrustums;k[b.debugOverlappingFrustums]=i(k[b.debugOverlappingFrustums])?k[b.debugOverlappingFrustums]+1:1,++a._debugFrustumStatistics.totalCommands}}function aa(a){var c=a._commandList,d=a._overlayCommandList,e=a._frameState.cullingVolume,f=a._camera,g=f.directionWC,h=f.positionWC;a.debugShowFrustums&&(a._debugFrustumStatistics={totalCommands:0,commandsInFrustums:{}});for(var j=a._frustumCommandsList,k=j.length,l=0;k>l;++l)j[l].opaqueIndex=0,j[l].translucentIndex=0;var m,n=Number.MAX_VALUE,o=Number.MIN_VALUE,p=!1;a._frameState.mode===R.SCENE3D&&(m=a._frameState.occluder);for(var q=ta.planes,s=0;5>s;++s)q[s]=e.planes[s];e=ta;for(var t=c.length,u=0;t>u;++u){var v=c[u],w=v.pass;if(w===K.OVERLAY)d.push(v);else{var x=v.boundingVolume;if(i(x)){if(v.cull&&(e.computeVisibility(x)===r.OUTSIDE||i(m)&&!m.isBoundingSphereVisible(x)))continue;ua=b.computePlaneDistances(x,h,g,ua),n=Math.min(n,ua.start),o=Math.max(o,ua.stop)}else ua.start=f.frustum.near,ua.stop=f.frustum.far,p=!(v instanceof z);_(a,v,ua)}}p?(n=f.frustum.near,o=f.frustum.far):(n=Math.min(Math.max(n,f.frustum.near),f.frustum.far),o=Math.max(Math.min(o,f.frustum.far),n));var y=a.farToNearRatio,A=Math.ceil(Math.log(o/n)/Math.log(y));n!==Number.MAX_VALUE&&(A!==k||0!==j.length&&(n<j[0].near||o>j[k-1].far))&&($(n,o,y,A,j),aa(a))}function ba(a){var b={},c=a.vertexAttributes;for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d].index);return b}function ca(a,b,c){var d=b.context,f=h(c,a.shaderProgram),g=f.fragmentShaderSource.clone();g.sources=g.sources.map(function(a){return a=a.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,"void czm_Debug_main()")});var j="void main() \n{ \n    czm_Debug_main(); \n";if(b.debugShowCommands){i(a._debugColor)||(a._debugColor=e.fromRandom());var k=a._debugColor;j+="    gl_FragColor.rgb *= vec3("+k.red+", "+k.green+", "+k.blue+"); \n"}if(b.debugShowFrustums){var l=1&a.debugOverlappingFrustums?"1.0":"0.0",m=2&a.debugOverlappingFrustums?"1.0":"0.0",n=4&a.debugOverlappingFrustums?"1.0":"0.0";j+="    gl_FragColor.rgb *= vec3("+l+", "+m+", "+n+"); \n"}j+="}",g.sources.push(j);var o=ba(f);return d.createShaderProgram(f.vertexShaderSource,g,o)}function da(a,b,c,d,e){if(i(a.shaderProgram)||i(e)){var f=ca(a,b,e);a.execute(b.context,c,d,f),f.destroy()}}function ea(a,b,c,e,g,h,j){if((!i(b.debugCommandFilter)||b.debugCommandFilter(a))&&(b.debugShowCommands||b.debugShowFrustums?da(a,b,e,g,h):a.execute(c,e,g,h),a.debugShowBoundingVolume&&i(a.boundingVolume))){i(b._debugSphere)&&b._debugSphere.destroy();var k=b._frameState,l=a.boundingVolume,n=l.radius,o=l.center,r=q.toWireframe(m.createGeometry(new m({radii:new d(n,n,n),vertexFormat:M.FLAT_VERTEX_FORMAT})));if(k.mode!==R.SCENE3D){o=v.multiplyByPoint(va,o,o);var s=k.mapProjection,t=s.unproject(o);o=s.ellipsoid.cartographicToCartesian(t)}b._debugSphere=new P({geometryInstances:new p({geometry:r,modelMatrix:v.multiplyByTranslation(v.IDENTITY,o,new v),attributes:{color:new f(1,0,0,1)}}),appearance:new M({flat:!0,translucent:!1}),asynchronous:!1});var u=[];b._debugSphere.update(c,k,u);var w;i(j)&&(w=e.framebuffer,e.framebuffer=j),u[0].execute(c,e),i(w)&&(e.framebuffer=w)}}function fa(a,b){if(i(a)){for(var c=b.mode===R.SCENE3D?b.occluder:void 0,d=b.cullingVolume,e=ta.planes,f=0;5>f;++f)e[f]=d.planes[f];d=ta;var g=a.boundingVolume;return i(a)&&(!i(a.boundingVolume)||!a.cull||d.computeVisibility(g)!==r.OUTSIDE&&(!i(c)||c.isBoundingSphereVisible(g)))}}function ga(a,c,d){return b.distanceSquaredTo(c.boundingVolume,d)-b.distanceSquaredTo(a.boundingVolume,d)}function ha(a,b,c,d){var e=a.context;w(d,ga,a._camera.positionWC);for(var f=d.length,g=0;f>g;++g)b(d[g],a,e,c)}function ia(a,b,c,d){var f,g=a._frameState,h=a._camera,j=a.context,k=j.uniformState;f=i(h.frustum.fov)?h.frustum.clone(wa):i(h.frustum.infiniteProjectionMatrix)?h.frustum.clone(xa):h.frustum.clone(ya),i(a.sun)&&a.sunBloom!==a._sunBloom?(a.sunBloom?a._sunPostProcess=new V:i(a._sunPostProcess)&&(a._sunPostProcess=a._sunPostProcess.destroy()),a._sunBloom=a.sunBloom):!i(a.sun)&&i(a._sunPostProcess)&&(a._sunPostProcess=a._sunPostProcess.destroy(),a._sunBloom=!1);var l=g.passes.render&&i(a.skyBox)?a.skyBox.update(j,g):void 0,m=g.passes.render&&i(a.skyAtmosphere)?a.skyAtmosphere.update(j,g):void 0,n=g.passes.render&&i(a.sun)?a.sun.update(a):void 0,o=fa(n,g),p=a._clearColorCommand;e.clone(c,p.color),p.execute(j,b);var q,r=!1,s=a._frustumCommandsList,t=s.length;for(q=0;t>q;++q)if(s[q].translucentIndex>0){r=!0;break}var u=!d&&r&&i(a._oit)&&a._oit.isSupported();u&&(a._oit.update(j),a._oit.clear(j,b,c),u=u&&a._oit.isSupported());var v=!d&&(a.fxaa||u&&a.fxaaOrderIndependentTranslucency);v&&(a._fxaa.update(j),a._fxaa.clear(j,b,c));var w=b.framebuffer;u?w=a._oit.getColorFramebuffer():v&&(w=a._fxaa.getColorFramebuffer()),b.framebuffer=o&&a.sunBloom?a._sunPostProcess.update(j):w,f.near=h.frustum.near,f.far=h.frustum.far,k.updateFrustum(f),i(l)&&ea(l,a,j,b),i(m)&&ea(m,a,j,b),i(n)&&o&&(n.execute(j,b),a.sunBloom&&(a._sunPostProcess.execute(j,w),b.framebuffer=w));var x,y=a._depthClearCommand;for(u?(i(a._executeOITFunction)||(a._executeOITFunction=function(a,b,c,d){a._oit.executeCommands(a,b,c,d)}),x=a._executeOITFunction):x=ha,q=0;t>q;++q){var z=t-q-1,A=s[z];f.near=A.near,f.far=A.far,0!==z&&(f.near*=.99),k.updateFrustum(f),y.execute(j,b);for(var B=A.opaqueCommands,C=A.opaqueIndex,D=0;C>D;++D)ea(B[D],a,j,b);f.near=A.near,k.updateFrustum(f),B=A.translucentCommands,B.length=A.translucentIndex,x(a,ea,b,B)}u&&(b.framebuffer=v?a._fxaa.getColorFramebuffer():void 0,a._oit.execute(j,b)),v&&(b.framebuffer=void 0,a._fxaa.execute(j,b))}function ja(a,b){for(var c=a.context,d=a._overlayCommandList,e=d.length,f=0;e>f;++f)d[f].execute(c,b)}function ka(a){var b=a.context,c=a._frameState,d=a._commandList;a._globe&&a._globe.update(b,c,d),a._primitives.update(b,c,d),i(a.moon)&&a.moon.update(b,c,d)}function la(a){for(var b=a.afterRender,c=0,d=b.length;d>c;++c)b[c]();b.length=0}function ma(a,b){i(b)||(b=t.now()),a._preRender.raiseEvent(a,b);var c=a.context.uniformState,d=a._frameState,f=u.incrementWrap(d.frameNumber,15e6,1);Z(a,f,b),d.passes.render=!0,d.creditDisplay.beginFrame();var g=a.context;c.update(g,d),a._commandList.length=0,a._overlayCommandList.length=0,ka(a),aa(a);var j=a._passState;if(ia(a,j,h(a.backgroundColor,e.BLACK)),ja(a,j),d.creditDisplay.endFrame(),a.debugShowFramesPerSecond){if(!i(a._performanceDisplay)){var k=document.createElement("div");k.className="cesium-performanceDisplay",k.style.position="absolute",
k.style.top="50px",k.style.right="10px";var l=a._canvas.parentNode;l.appendChild(k);var m=new L({container:k});a._performanceDisplay=m,a._performanceContainer=k}a._performanceDisplay.update()}else i(a._performanceDisplay)&&(a._performanceDisplay=a._performanceDisplay&&a._performanceDisplay.destroy(),a._performanceContainer.parentNode.removeChild(a._performanceContainer));g.endFrame(),la(d),a._postRender.raiseEvent(a,b)}function na(a,b){var c=a._camera,e=c.frustum,f=a.drawingBufferWidth,g=a.drawingBufferHeight,h=2/f*b.x-1;h*=.5*(e.right-e.left);var i=2/g*(g-b.y)-1;i*=.5*(e.top-e.bottom);var j=d.clone(c.position,Aa);d.multiplyByScalar(c.right,h,Ba),d.add(Ba,j,j),d.multiplyByScalar(c.up,i,Ba),d.add(Ba,j,j),d.fromElements(j.z,j.x,j.y,j),Ca.x=f,Ca.y=g;var k=e.getPixelSize(Ca,void 0,Da),l=za;return l.right=.5*k.x,l.left=-l.right,l.top=.5*k.y,l.bottom=-l.top,l.near=e.near,l.far=e.far,l.computeCullingVolume(j,c.directionWC,c.upWC)}function oa(a,b,c,d){var e=a._camera,f=e.frustum,g=f.near,h=a.drawingBufferWidth,i=a.drawingBufferHeight,j=Math.tan(.5*f.fovy),k=f.aspectRatio*j,l=2/h*b.x-1,m=2/i*(i-b.y)-1,n=l*g*k,o=m*g*j;Ca.x=h,Ca.y=i;var p=f.getPixelSize(Ca,void 0,Da),q=.5*p.x*c,r=.5*p.y*d,s=Ea;return s.top=o+r,s.bottom=o-r,s.right=n+q,s.left=n-q,s.near=g,s.far=f.far,s.computeCullingVolume(e.positionWC,e.directionWC,e.upWC)}function pa(a,b,c,d){return a._mode===R.SCENE2D?na(a,b,c,d):oa(a,b,c,d)}var qa=function(a){a=h(a,h.EMPTY_OBJECT);var b=a.canvas,c=a.contextOptions,d=a.creditContainer,f=new A(b,c);i(d)||(d=document.createElement("div"),d.style.position="absolute",d.style.bottom="0",d.style["text-shadow"]="0px 0px 2px #000000",d.style.color="#ffffff",d.style["font-size"]="10px",d.style["padding-right"]="5px",b.parentNode.appendChild(d)),this._id=g(),this._frameState=new F(new D(d)),this._frameState.scene3DOnly=h(a.scene3DOnly,!1),this._passState=new B(f),this._canvas=b,this._context=f,this._globe=void 0,this._primitives=new Q,this._pickFramebuffer=void 0,this._tweens=new W,this._shaderFrameCount=0,this._sunPostProcess=void 0,this._commandList=[],this._frustumCommandsList=[],this._overlayCommandList=[],this._oit=h(a.orderIndependentTranslucency,!0)?new I(f):void 0,this._executeOITFunction=void 0,this._fxaa=new H,this._clearColorCommand=new z({color:new e,owner:this}),this._depthClearCommand=new z({depth:1,owner:this}),this._transitioner=new T(this),this._renderError=new n,this._preRender=new n,this._postRender=new n,this.rethrowRenderErrors=!1,this.completeMorphOnUserInput=!0,this.morphStart=new n,this.morphComplete=new n,this.skyBox=void 0,this.skyAtmosphere=void 0,this.sun=void 0,this.sunBloom=!0,this._sunBloom=void 0,this.moon=void 0,this.backgroundColor=e.clone(e.BLACK),this._mode=R.SCENE3D,this._mapProjection=i(a.mapProjection)?a.mapProjection:new o,this.morphTime=1,this.farToNearRatio=1e3,this.debugCommandFilter=void 0,this.debugShowCommands=!1,this.debugShowFrustums=!1,this._debugFrustumStatistics=void 0,this.debugShowFramesPerSecond=!1,this.fxaaOrderIndependentTranslucency=!0,this.fxaa=!1,this._performanceDisplay=void 0,this._debugSphere=void 0;var j=new C(this);this._camera=j,this._screenSpaceCameraController=new U(this);var k=j.frustum.near,l=j.frustum.far,m=Math.ceil(Math.log(l/k)/Math.log(this.farToNearRatio));$(k,l,this.farToNearRatio,m,this._frustumCommandsList),Z(this,0,t.now()),this.initializeFrame()};j(qa.prototype,{canvas:{get:function(){return this._canvas}},drawingBufferHeight:{get:function(){return this._context.drawingBufferHeight}},drawingBufferWidth:{get:function(){return this._context.drawingBufferWidth}},maximumAliasedLineWidth:{get:function(){return this._context.maximumAliasedLineWidth}},globe:{get:function(){return this._globe},set:function(a){this._globe=this._globe&&this._globe.destroy(),this._globe=a}},primitives:{get:function(){return this._primitives}},camera:{get:function(){return this._camera}},screenSpaceCameraController:{get:function(){return this._screenSpaceCameraController}},mapProjection:{get:function(){return this._mapProjection}},frameState:{get:function(){return this._frameState}},tweens:{get:function(){return this._tweens}},imageryLayers:{get:function(){return this.globe.imageryLayers}},terrainProvider:{get:function(){return this.globe.terrainProvider},set:function(a){this.globe.terrainProvider=a}},renderError:{get:function(){return this._renderError}},preRender:{get:function(){return this._preRender}},postRender:{get:function(){return this._postRender}},context:{get:function(){return this._context}},debugFrustumStatistics:{get:function(){return this._debugFrustumStatistics}},scene3DOnly:{get:function(){return this._frameState.scene3DOnly}},orderIndependentTranslucency:{get:function(){return i(this._oit)}},id:{get:function(){return this._id}},mode:{get:function(){return this._mode},set:function(a){if(this.scene3DOnly&&a!==R.SCENE3D)throw new l("Only SceneMode.SCENE3D is valid when scene3DOnly is true.");this._mode=a}}});var ra,sa=new b,ta=new E,ua=new s,va=new v(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1);va=v.inverseTransformation(va,va);var wa=new N,xa=new O,ya=new J;qa.prototype.initializeFrame=function(){120===this._shaderFrameCount++&&(this._shaderFrameCount=0,this._context.shaderCache.destroyReleasedShaderPrograms()),this._tweens.update(),this._camera.update(this._mode),this._screenSpaceCameraController.update()},qa.prototype.render=function(a){try{ma(this,a)}catch(a){if(this._renderError.raiseEvent(this,a),this.rethrowRenderErrors)throw a}},qa.prototype.clampLineWidth=function(a){var b=this._context;return Math.max(b.minimumAliasedLineWidth,Math.min(a,b.maximumAliasedLineWidth))};var za=new J,Aa=new d,Ba=new d,Ca=new c,Da=new c,Ea=new O,Fa=3,Ga=3,Ha=new a(0,0,Fa,Ga),Ia=new e(0,0,0,0),Ja=new c;return qa.prototype.pick=function(a){var b=this._context,c=b.uniformState,d=this._frameState,e=S.transformWindowToDrawingBuffer(this,a,Ja);i(this._pickFramebuffer)||(this._pickFramebuffer=b.createPickFramebuffer()),Z(this,d.frameNumber,d.time),d.cullingVolume=pa(this,e,Fa,Ga),d.passes.pick=!0,c.update(b,d),this._commandList.length=0,ka(this),aa(this),Ha.x=e.x-.5*(Fa-1),Ha.y=this.drawingBufferHeight-e.y-.5*(Ga-1),ia(this,this._pickFramebuffer.begin(Ha),Ia,!0);var f=this._pickFramebuffer.end(Ha);return b.endFrame(),la(d),f},qa.prototype.drillPick=function(a){for(var b=[],c=this.pick(a);i(c)&&i(c.primitive);){var d=c.primitive;if(b.push(c),i(d.show))d.show=!1;else if("function"==typeof d.getGeometryInstanceAttributes){var e=d.getGeometryInstanceAttributes(c.id);i(e)&&i(e.show)&&(e.show=y.toValue(!1))}c=this.pick(a)}for(var f=0;f<b.length;++f){var g=b[f].primitive;if(i(g.show))g.show=!0;else if("function"==typeof g.getGeometryInstanceAttributes){var h=g.getGeometryInstanceAttributes(b[f].id);i(h)&&i(h.show)&&(h.show=y.toValue(!0))}}return b},qa.prototype.completeMorph=function(){this._transitioner.completeMorph()},qa.prototype.morphTo2D=function(a){var b,c=this.globe;b=i(c)?c.ellipsoid:this.mapProjection.ellipsoid,a=h(a,2),this._transitioner.morphTo2D(a,b)},qa.prototype.morphToColumbusView=function(a){var b,c=this.globe;b=i(c)?c.ellipsoid:this.mapProjection.ellipsoid,a=h(a,2),this._transitioner.morphToColumbusView(a,b)},qa.prototype.morphTo3D=function(a){var b,c=this.globe;b=i(c)?c.ellipsoid:this.mapProjection.ellipsoid,a=h(a,2),this._transitioner.morphTo3D(a,b)},qa.prototype.isDestroyed=function(){return!1},qa.prototype.destroy=function(){return this._tweens.removeAll(),this._screenSpaceCameraController=this._screenSpaceCameraController&&this._screenSpaceCameraController.destroy(),this._pickFramebuffer=this._pickFramebuffer&&this._pickFramebuffer.destroy(),this._primitives=this._primitives&&this._primitives.destroy(),this._globe=this._globe&&this._globe.destroy(),this.skyBox=this.skyBox&&this.skyBox.destroy(),this.skyAtmosphere=this.skyAtmosphere&&this.skyAtmosphere.destroy(),this._debugSphere=this._debugSphere&&this._debugSphere.destroy(),this.sun=this.sun&&this.sun.destroy(),this._sunPostProcess=this._sunPostProcess&&this._sunPostProcess.destroy(),this._transitioner.destroy(),i(this._oit)&&this._oit.destroy(),this._fxaa.destroy(),this._context=this._context&&this._context.destroy(),this._frameState.creditDisplay.destroy(),i(this._performanceDisplay)&&(this._performanceDisplay=this._performanceDisplay&&this._performanceDisplay.destroy(),this._performanceContainer.parentNode.removeChild(this._performanceContainer)),k(this)},qa}),c("Scene/SingleTileImageryProvider",["../Core/Credit","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/GeographicTilingScheme","../Core/loadImage","../Core/Rectangle","../Core/TileProviderError","../ThirdParty/when"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=function(d){function e(a){u._image=a,u._tileWidth=a.width,u._tileHeight=a.height,u._ready=!0,j.handleSuccess(u._errorEvent)}function l(){var a="Failed to load image "+r+".";t=j.handleError(t,u,u._errorEvent,a,0,0,0,m)}function m(){k(h(r),e,l)}d=b(d,{});var n=d.url;this._url=n;var o=d.proxy;this._proxy=o;var p=b(d.rectangle,i.MAX_VALUE),q=new g({rectangle:p,numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1});this._tilingScheme=q,this._image=void 0,this._texture=void 0,this._tileWidth=0,this._tileHeight=0,this._errorEvent=new f,this._ready=!1;var r=n;c(o)&&(r=o.getURL(r));var s=d.credit;"string"==typeof s&&(s=new a(s)),this._credit=s;var t,u=this;m()};return d(l.prototype,{url:{get:function(){return this._url}},proxy:{get:function(){return this._proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 0}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return void 0}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),l.prototype.getTileCredits=function(){return void 0},l.prototype.requestImage=function(){return this._image},l.prototype.pickFeatures=function(){return void 0},l}),c("Shaders/SkyAtmosphereFS",[],function(){"use strict";return"const float g = -0.95;\nconst float g2 = g * g;\nvarying vec3 v_rayleighColor;\nvarying vec3 v_mieColor;\nvarying vec3 v_toCamera;\nvarying vec3 v_positionEC;\nvoid main (void)\n{\nczm_ellipsoid ellipsoid = czm_getWgs84EllipsoidEC();\nvec3 direction = normalize(v_positionEC);\nczm_ray ray = czm_ray(vec3(0.0), direction);\nczm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid);\nif (!czm_isEmpty(intersection)) {\ndiscard;\n}\nfloat fCos = dot(czm_sunDirectionWC, normalize(v_toCamera)) / length(v_toCamera);\nfloat fRayleighPhase = 0.75 * (1.0 + fCos*fCos);\nfloat fMiePhase = 1.5 * ((1.0 - g2) / (2.0 + g2)) * (1.0 + fCos*fCos) / pow(1.0 + g2 - 2.0*g*fCos, 1.5);\nconst float fExposure = 2.0;\nvec3 rgb = fRayleighPhase * v_rayleighColor + fMiePhase * v_mieColor;\nrgb = vec3(1.0) - exp(-fExposure * rgb);\nfloat l = czm_luminance(rgb);\ngl_FragColor = vec4(rgb, min(smoothstep(0.0, 0.1, l), 1.0) * smoothstep(0.0, 1.0, czm_morphTime));\n}\n"}),c("Shaders/SkyAtmosphereVS",[],function(){"use strict";return"attribute vec4 position;\nuniform float fCameraHeight;\nuniform float fCameraHeight2;\nuniform float fOuterRadius;\nuniform float fOuterRadius2;\nuniform float fInnerRadius;\nuniform float fScale;\nuniform float fScaleDepth;\nuniform float fScaleOverScaleDepth;\nconst float Kr = 0.0025;\nconst float fKr4PI = Kr * 4.0 * czm_pi;\nconst float Km = 0.0015;\nconst float fKm4PI = Km * 4.0 * czm_pi;\nconst float ESun = 15.0;\nconst float fKmESun = Km * ESun;\nconst float fKrESun = Kr * ESun;\nconst vec3 v3InvWavelength = vec3(\n5.60204474633241,\n9.473284437923038,\n19.643802610477206);\nconst float rayleighScaleDepth = 0.25;\nconst int nSamples = 2;\nconst float fSamples = 2.0;\nvarying vec3 v_rayleighColor;\nvarying vec3 v_mieColor;\nvarying vec3 v_toCamera;\nvarying vec3 v_positionEC;\nfloat scale(float fCos)\n{\nfloat x = 1.0 - fCos;\nreturn fScaleDepth * exp(-0.00287 + x*(0.459 + x*(3.83 + x*(-6.80 + x*5.25))));\n}\nvoid main(void)\n{\nvec3 v3Pos = position.xyz;\nvec3 v3Ray = v3Pos - czm_viewerPositionWC;\nfloat fFar = length(v3Ray);\nv3Ray /= fFar;\n#ifdef SKY_FROM_SPACE\nfloat B = 2.0 * dot(czm_viewerPositionWC, v3Ray);\nfloat C = fCameraHeight2 - fOuterRadius2;\nfloat fDet = max(0.0, B*B - 4.0 * C);\nfloat fNear = 0.5 * (-B - sqrt(fDet));\nvec3 v3Start = czm_viewerPositionWC + v3Ray * fNear;\nfFar -= fNear;\nfloat fStartAngle = dot(v3Ray, v3Start) / fOuterRadius;\nfloat fStartDepth = exp(-1.0 / fScaleDepth);\nfloat fStartOffset = fStartDepth*scale(fStartAngle);\n#else\nvec3 v3Start = czm_viewerPositionWC;\nfloat fHeight = length(v3Start);\nfloat fDepth = exp(fScaleOverScaleDepth * (fInnerRadius - fCameraHeight));\nfloat fStartAngle = dot(v3Ray, v3Start) / fHeight;\nfloat fStartOffset = fDepth*scale(fStartAngle);\n#endif\nfloat fSampleLength = fFar / fSamples;\nfloat fScaledLength = fSampleLength * fScale;\nvec3 v3SampleRay = v3Ray * fSampleLength;\nvec3 v3SamplePoint = v3Start + v3SampleRay * 0.5;\nvec3 v3FrontColor = vec3(0.0, 0.0, 0.0);\nfor(int i=0; i<nSamples; i++)\n{\nfloat fHeight = length(v3SamplePoint);\nfloat fDepth = exp(fScaleOverScaleDepth * (fInnerRadius - fHeight));\nvec3 lightPosition = normalize(czm_viewerPositionWC);\nfloat fLightAngle = dot(lightPosition, v3SamplePoint) / fHeight;\nfloat fCameraAngle = dot(v3Ray, v3SamplePoint) / fHeight;\nfloat fScatter = (fStartOffset + fDepth*(scale(fLightAngle) - scale(fCameraAngle)));\nvec3 v3Attenuate = exp(-fScatter * (v3InvWavelength * fKr4PI + fKm4PI));\nv3FrontColor += v3Attenuate * (fDepth * fScaledLength);\nv3SamplePoint += v3SampleRay;\n}\nv_mieColor = v3FrontColor * fKmESun;\nv_rayleighColor = v3FrontColor * (v3InvWavelength * fKrESun);\nv_toCamera = czm_viewerPositionWC - v3Pos;\nv_positionEC = (czm_modelView * position).xyz;\ngl_Position = czm_modelViewProjection * position;\n}\n"}),c("Scene/SkyAtmosphere",["../Core/Cartesian3","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/Ellipsoid","../Core/EllipsoidGeometry","../Core/GeometryPipeline","../Core/VertexFormat","../Renderer/BufferUsage","../Renderer/DrawCommand","../Renderer/ShaderSource","../Shaders/SkyAtmosphereFS","../Shaders/SkyAtmosphereVS","./BlendingState","./CullFace","./SceneMode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";var r=function(c){c=b(c,f.WGS84),this.show=!0,this._ellipsoid=c,this._command=new k({owner:this}),this._spSkyFromSpace=void 0,this._spSkyFromAtmosphere=void 0,this._fCameraHeight=void 0,this._fCameraHeight2=void 0,this._outerRadius=a.maximumComponent(a.multiplyByScalar(c.radii,1.025,new a));var d=c.maximumRadius,e=.25,g=this;this._command.uniformMap={fCameraHeight:function(){return g._fCameraHeight},fCameraHeight2:function(){return g._fCameraHeight2},fOuterRadius:function(){return g._outerRadius},fOuterRadius2:function(){return g._outerRadius*g._outerRadius},fInnerRadius:function(){return d},fScale:function(){return 1/(g._outerRadius-d)},fScaleDepth:function(){return e},fScaleOverScaleDepth:function(){return 1/(g._outerRadius-d)/e}}};return d(r.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),r.prototype.update=function(b,d){if(!this.show)return void 0;if(d.mode!==q.SCENE3D&&d.mode!==q.MORPHING)return void 0;if(!d.passes.render)return void 0;var e=this._command;if(!c(e.vertexArray)){var f=g.createGeometry(new g({radii:a.multiplyByScalar(this._ellipsoid.radii,1.025,new a),slicePartitions:256,stackPartitions:256,vertexFormat:i.POSITION_ONLY}));e.vertexArray=b.createVertexArrayFromGeometry({geometry:f,attributeLocations:h.createAttributeLocations(f),bufferUsage:j.STATIC_DRAW}),e.renderState=b.createRenderState({cull:{enabled:!0,face:p.FRONT},blending:o.ALPHA_BLEND});var k=new l({defines:["SKY_FROM_SPACE"],sources:[n]});this._spSkyFromSpace=b.createShaderProgram(k,m),k=new l({defines:["SKY_FROM_ATMOSPHERE"],sources:[n]}),this._spSkyFromAtmosphere=b.createShaderProgram(k,m)}var r=d.camera.positionWC;return this._fCameraHeight2=a.magnitudeSquared(r),this._fCameraHeight=Math.sqrt(this._fCameraHeight2),e.shaderProgram=this._fCameraHeight>this._outerRadius?this._spSkyFromSpace:this._spSkyFromAtmosphere,e},r.prototype.isDestroyed=function(){return!1},r.prototype.destroy=function(){var a=this._command;return a.vertexArray=a.vertexArray&&a.vertexArray.destroy(),this._spSkyFromSpace=this._spSkyFromSpace&&this._spSkyFromSpace.destroy(),this._spSkyFromAtmosphere=this._spSkyFromAtmosphere&&this._spSkyFromAtmosphere.destroy(),e(this)},r}),c("Shaders/SkyBoxFS",[],function(){"use strict";return"uniform samplerCube u_cubeMap;\nvarying vec3 v_texCoord;\nvoid main()\n{\nvec3 rgb = textureCube(u_cubeMap, normalize(v_texCoord)).rgb;\ngl_FragColor = vec4(rgb, czm_morphTime);\n}\n"}),c("Shaders/SkyBoxVS",[],function(){"use strict";return"attribute vec3 position;\nvarying vec3 v_texCoord;\nvoid main()\n{\nvec3 p = czm_viewRotation * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));\ngl_Position = czm_projection * vec4(p, 1.0);\nv_texCoord = position.xyz;\n}\n"}),c("Scene/SkyBox",["../Core/BoxGeometry","../Core/Cartesian3","../Core/defaultValue","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Core/GeometryPipeline","../Core/Matrix4","../Core/VertexFormat","../Renderer/BufferUsage","../Renderer/DrawCommand","../Renderer/loadCubeMap","../Shaders/SkyBoxFS","../Shaders/SkyBoxVS","./BlendingState","./SceneMode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";var q=function(a){this.sources=a.sources,this._sources=void 0,this.show=c(a.show,!0),this._command=new k({modelMatrix:h.clone(h.IDENTITY),owner:this}),this._cubeMap=void 0};return q.prototype.update=function(c,e){if(!this.show)return void 0;if(e.mode!==p.SCENE3D&&e.mode!==p.MORPHING)return void 0;if(!e.passes.render)return void 0;if(this._sources!==this.sources){this._sources=this.sources;var f=this.sources;"string"==typeof f.positiveX?l(c,this._sources).then(function(a){k._cubeMap=k._cubeMap&&k._cubeMap.destroy(),k._cubeMap=a}):(this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),this._cubeMap=c.createCubeMap({source:f}))}var h=this._command;if(!d(h.vertexArray)){var k=this;h.uniformMap={u_cubeMap:function(){return k._cubeMap}};var q=a.createGeometry(a.fromDimensions({dimensions:new b(2,2,2),vertexFormat:i.POSITION_ONLY})),r=g.createAttributeLocations(q);h.vertexArray=c.createVertexArrayFromGeometry({geometry:q,attributeLocations:r,bufferUsage:j.STATIC_DRAW}),h.shaderProgram=c.createShaderProgram(n,m,r),h.renderState=c.createRenderState({blending:o.ALPHA_BLEND})}return d(this._cubeMap)?h:void 0},q.prototype.isDestroyed=function(){return!1},q.prototype.destroy=function(){var a=this._command;return a.vertexArray=a.vertexArray&&a.vertexArray.destroy(),a.shaderProgram=a.shaderProgram&&a.shaderProgram.destroy(),this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),e(this)},q}),c("Scene/StencilFunction",["../Core/freezeObject"],function(a){"use strict";var b={NEVER:512,LESS:513,EQUAL:514,LESS_OR_EQUAL:515,GREATER:516,NOT_EQUAL:517,GREATER_OR_EQUAL:518,ALWAYS:519};return a(b)}),c("Scene/StencilOperation",["../Core/freezeObject"],function(a){"use strict";var b={ZERO:0,KEEP:7680,REPLACE:7681,INCREMENT:7682,DECREMENT:7683,INVERT:5386,INCREMENT_WRAP:34055,DECREMENT_WRAP:34056};return a(b)}),c("Shaders/SunFS",[],function(){"use strict";return"uniform sampler2D u_texture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\ngl_FragColor = texture2D(u_texture, v_textureCoordinates);\n}\n"}),c("Shaders/SunTextureFS",[],function(){"use strict";return"uniform float u_glowLengthTS;\nuniform float u_radiusTS;\nvarying vec2 v_textureCoordinates;\nvec2 rotate(vec2 p, vec2 direction)\n{\nreturn vec2(p.x * direction.x - p.y * direction.y, p.x * direction.y + p.y * direction.x);\n}\nvec4 addBurst(vec2 position, vec2 direction)\n{\nvec2 rotatedPosition = rotate(position, direction) * vec2(25.0, 0.75);\nfloat radius = length(rotatedPosition);\nfloat burst = 1.0 - smoothstep(0.0, 0.55, radius);\nreturn vec4(burst);\n}\nvoid main()\n{\nvec2 position = v_textureCoordinates - vec2(0.5);\nfloat radius = length(position);\nfloat surface = step(radius, u_radiusTS);\nvec4 color = vec4(1.0, 1.0, surface + 0.2, surface);\nfloat glow = 1.0 - smoothstep(0.0, 0.55, radius);\ncolor.ba += mix(vec2(0.0), vec2(1.0), glow) * 0.75;\nvec4 burst = vec4(0.0);\nburst += 0.4 * addBurst(position, vec2(0.38942,  0.92106));\nburst += 0.4 * addBurst(position, vec2(0.99235,  0.12348));\nburst += 0.4 * addBurst(position, vec2(0.60327, -0.79754));\nburst += 0.3 * addBurst(position, vec2(0.31457,  0.94924));\nburst += 0.3 * addBurst(position, vec2(0.97931,  0.20239));\nburst += 0.3 * addBurst(position, vec2(0.66507, -0.74678));\ncolor += clamp(burst, vec4(0.0), vec4(1.0)) * 0.15;\ngl_FragColor = clamp(color, vec4(0.0), vec4(1.0));\n}\n"}),c("Shaders/SunVS",[],function(){"use strict";return"attribute vec2 direction;\nuniform float u_size;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\nvec4 position;\nif (czm_morphTime == 1.0)\n{\nposition = vec4(czm_sunPositionWC, 1.0);\n}\nelse\n{\nposition = vec4(czm_sunPositionColumbusView.zxy, 1.0);\n}\nvec4 positionEC = czm_view * position;\nvec4 positionWC = czm_eyeToWindowCoordinates(positionEC);\nvec2 halfSize = vec2(u_size * 0.5);\nhalfSize *= ((direction * 2.0) - 1.0);\ngl_Position = czm_viewportOrthographic * vec4(positionWC.xy + halfSize, -positionWC.z, 1.0);\nv_textureCoordinates = direction;\n}\n"}),c("Scene/Sun",["../Core/BoundingRectangle","../Core/BoundingSphere","../Core/Cartesian2","../Core/Cartesian3","../Core/Cartesian4","../Core/Color","../Core/ComponentDatatype","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/IndexDatatype","../Core/Math","../Core/Matrix4","../Core/PixelFormat","../Core/PrimitiveType","../Renderer/BufferUsage","../Renderer/ClearCommand","../Renderer/DrawCommand","../Shaders/SunFS","../Shaders/SunTextureFS","../Shaders/SunVS","./BlendingState","./SceneMode","./SceneTransforms"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){"use strict";var y=function(){this.show=!0,this._command=new r({primitiveType:o.TRIANGLES,boundingVolume:new b,owner:this}),this._boundingVolume=new b,this._boundingVolume2D=new b,this._texture=void 0,this._drawingBufferWidth=void 0,this._drawingBufferHeight=void 0,this._radiusTS=void 0,this._size=void 0,this.glowFactor=1,this._glowFactorDirty=!1;var a=this;this._uniformMap={u_texture:function(){return a._texture},u_size:function(){return a._size}}};i(y.prototype,{glowFactor:{get:function(){return this._glowFactor},set:function(a){a=Math.max(a,0),this._glowFactor=a,this._glowFactorDirty=!0}}});var z=new c,A=new c,B=new e,C=new e;return y.prototype.update=function(e){var i=e.frameState,j=e.context;if(!this.show)return void 0;var o=i.mode;if(o===w.SCENE2D||o===w.MORPHING)return void 0;if(!i.passes.render)return void 0;var r=e.drawingBufferWidth,y=e.drawingBufferHeight;if(!h(this._texture)||r!==this._drawingBufferWidth||y!==this._drawingBufferHeight||this._glowFactorDirty){this._texture=this._texture&&this._texture.destroy(),this._drawingBufferWidth=r,this._drawingBufferHeight=y,this._glowFactorDirty=!1;var D=Math.max(r,y);D=Math.pow(2,Math.ceil(Math.log(D)/Math.log(2))-2),this._texture=j.createTexture2D({width:D,height:D,pixelFormat:n.RGBA});var E=j.createFramebuffer({colorTextures:[this._texture]});E.destroyAttachments=!1;var F=new q({color:new f(0,0,0,0),framebuffer:E}),G=j.createRenderState({viewport:new a(0,0,D,D)});this._glowLengthTS=5*this._glowFactor,this._radiusTS=.5*(1/(1+2*this._glowLengthTS));var H=this,I={u_glowLengthTS:function(){return H._glowLengthTS},u_radiusTS:function(){return H._radiusTS}},J=j.createViewportQuadCommand(t,{renderState:G,uniformMap:I,framebuffer:E,owner:this});F.execute(j),J.execute(j),J.shaderProgram.destroy(),E.destroy()}var K=this._command;if(!h(K.vertexArray)){var L={direction:0},M=new Uint8Array(8);M[0]=0,M[1]=0,M[2]=255,M[3]=0,M[4]=255,M[5]=255,M[6]=0,M[7]=255;var N=j.createVertexBuffer(M,p.STATIC_DRAW),O=[{index:L.direction,vertexBuffer:N,componentsPerAttribute:2,normalize:!0,componentDatatype:g.UNSIGNED_BYTE}],P=j.createIndexBuffer(new Uint16Array([0,1,2,0,2,3]),p.STATIC_DRAW,k.UNSIGNED_SHORT);K.vertexArray=j.createVertexArray(O,P),K.shaderProgram=j.createShaderProgram(u,s,L),K.renderState=j.createRenderState({blending:v.ALPHA_BLEND}),K.uniformMap=this._uniformMap}var Q=j.uniformState.sunPositionWC,R=j.uniformState.sunPositionColumbusView,S=this._boundingVolume,T=this._boundingVolume2D;d.clone(Q,S.center),T.center.x=R.z,T.center.y=R.x,T.center.z=R.y,S.radius=l.SOLAR_RADIUS+l.SOLAR_RADIUS*this._glowLengthTS,T.radius=S.radius,o===w.SCENE3D?b.clone(S,K.boundingVolume):o===w.COLUMBUS_VIEW&&b.clone(T,K.boundingVolume);var U=x.computeActualWgs84Position(i,Q,C),V=d.magnitude(d.subtract(U,e.camera.position,C)),W=j.uniformState.projection,X=B;X.x=0,X.y=0,X.z=-V,X.w=1;var Y=m.multiplyByVector(W,X,C),Z=x.clipToDrawingBufferCoordinates(e,Y,z);X.x=l.SOLAR_RADIUS;var $=m.multiplyByVector(W,X,C),_=x.clipToDrawingBufferCoordinates(e,$,A);return this._size=Math.ceil(c.magnitude(c.subtract(_,Z,C))),this._size=2*this._size*(1+2*this._glowLengthTS),K},y.prototype.isDestroyed=function(){return!1},y.prototype.destroy=function(){var a=this._command;return a.vertexArray=a.vertexArray&&a.vertexArray.destroy(),a.shaderProgram=a.shaderProgram&&a.shaderProgram.destroy(),this._texture=this._texture&&this._texture.destroy(),j(this)},y}),c("Scene/TileCoordinatesImageryProvider",["../Core/Color","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/Event","../Core/GeographicTilingScheme"],function(a,b,c,d,e,f){"use strict";var g=function(d){d=b(d,b.EMPTY_OBJECT),this._tilingScheme=c(d.tilingScheme)?d.tilingScheme:new f,this._color=b(d.color,a.YELLOW),this._errorEvent=new e,this._tileWidth=b(d.tileWidth,256),this._tileHeight=b(d.tileHeight,256)};return d(g.prototype,{proxy:{get:function(){return void 0}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return void 0}},minimumLevel:{get:function(){return void 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return void 0}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return!0}},credit:{get:function(){return void 0}},hasAlphaChannel:{get:function(){return!0}}}),g.prototype.getTileCredits=function(){return void 0},g.prototype.requestImage=function(a,b,c){var d=document.createElement("canvas");d.width=256,d.height=256;var e=d.getContext("2d"),f=this._color.toCssColorString();e.strokeStyle=f,e.lineWidth=2,e.strokeRect(1,1,255,255);var g="L"+c+"X"+a+"Y"+b;return e.font="bold 25px Arial",e.textAlign="center",e.fillStyle="black",e.fillText(g,127,127),e.fillStyle=f,e.fillText(g,124,124),d},g.prototype.pickFeatures=function(){return void 0},g}),c("Scene/TileDiscardPolicy",["../Core/DeveloperError"],function(a){"use strict";var b=function(){a.throwInstantiationError()};return b.prototype.isReady=a.throwInstantiationError,b.prototype.shouldDiscardImage=a.throwInstantiationError,b}),c("Scene/TileMapServiceImageryProvider",["../Core/Cartesian2","../Core/Cartographic","../Core/Credit","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/GeographicTilingScheme","../Core/loadXML","../Core/Rectangle","../Core/TileProviderError","../Core/WebMercatorTilingScheme","../ThirdParty/when","./ImageryProvider"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";function p(a,b,c,d){var f=a._tilingScheme.getNumberOfYTilesAtLevel(d),g=a._url+d+"/"+b+"/"+(f-c-1)+"."+a._fileExtension,h=a._proxy;return e(h)&&(g=h.getURL(g)),g}var q=/\/$/,r=function(f){function g(c){for(var f,g,h,j,n=/tileformat/i,o=/tileset/i,q=/tilesets/i,s=/boundingbox/i,v=/srs/i,w=[],x=c.childNodes[0].childNodes,y=0;y<x.length;y++)if(n.test(x.item(y).nodeName))f=x.item(y);else if(q.test(x.item(y).nodeName)){h=x.item(y);for(var z=x.item(y).childNodes,A=0;A<z.length;A++)o.test(z.item(A).nodeName)&&w.push(z.item(A))}else s.test(x.item(y).nodeName)?g=x.item(y):v.test(x.item(y).nodeName)&&(j=x.item(y).textContent);u._fileExtension=d(u._fileExtension,f.getAttribute("extension")),u._tileWidth=d(u._tileWidth,parseInt(f.getAttribute("width"),10)),u._tileHeight=d(u._tileHeight,parseInt(f.getAttribute("height"),10)),u._minimumLevel=d(u._minimumLevel,parseInt(w[0].getAttribute("order"),10)),u._maximumLevel=d(u._maximumLevel,parseInt(w[w.length-1].getAttribute("order"),10));var B=h.getAttribute("profile"),C=!1;if(("geodetic"===B||"mercator"===B)&&(C=!0),!e(u._tilingScheme))if("geodetic"===B||"global-geodetic"===B)u._tilingScheme=new i;else{if("mercator"!==B&&"global-mercator"!==B){var D=r+"tilemapresource.xml specifies an unsupported profile attribute, "+B+".";return t=l.handleError(t,u,u._errorEvent,D,void 0,void 0,void 0,p),void 0}u._tilingScheme=new m}var E=u._tilingScheme;if(!e(u._rectangle)){var F,G,H,I;if(C)F=new a(parseFloat(g.getAttribute("miny")),parseFloat(g.getAttribute("minx"))),G=new a(parseFloat(g.getAttribute("maxy")),parseFloat(g.getAttribute("maxx"))),H=b.fromDegrees(F.x,F.y),I=b.fromDegrees(G.x,G.y);else if(F=new a(parseFloat(g.getAttribute("minx")),parseFloat(g.getAttribute("miny"))),G=new a(parseFloat(g.getAttribute("maxx")),parseFloat(g.getAttribute("maxy"))),u._tilingScheme instanceof i)H=b.fromDegrees(F.x,F.y),I=b.fromDegrees(G.x,G.y);else{var J=u._tilingScheme.projection;H=J.unproject(F),I=J.unproject(G)}u._rectangle=new k(H.longitude,H.latitude,I.longitude,I.latitude)}u._rectangle.west<E.rectangle.west&&(u._rectangle.west=E.rectangle.west),u._rectangle.east>E.rectangle.east&&(u._rectangle.east=E.rectangle.east),u._rectangle.south<E.rectangle.south&&(u._rectangle.south=E.rectangle.south),u._rectangle.north>E.rectangle.north&&(u._rectangle.north=E.rectangle.north);var K=E.positionToTileXY(k.southwest(u._rectangle),u._minimumLevel),L=E.positionToTileXY(k.northeast(u._rectangle),u._minimumLevel),M=(Math.abs(L.x-K.x)+1)*(Math.abs(L.y-K.y)+1);M>4&&(u._minimumLevel=0),u._tilingScheme=E,u._ready=!0}function o(){u._fileExtension=d(f.fileExtension,"png"),u._tileWidth=d(f.tileWidth,256),u._tileHeight=d(f.tileHeight,256),u._minimumLevel=d(f.minimumLevel,0),u._maximumLevel=d(f.maximumLevel,18),u._tilingScheme=e(f.tilingScheme)?f.tilingScheme:new m,u._rectangle=d(f.rectangle,u._tilingScheme.rectangle),u._ready=!0}function p(){n(j(r+"tilemapresource.xml"),g,o)}f=d(f,{});var r=f.url;q.test(r)||(r+="/"),this._url=r,this._ready=!1,this._proxy=f.proxy,this._tileDiscardPolicy=f.tileDiscardPolicy,this._errorEvent=new h,this._fileExtension=f.fileExtension,this._tileWidth=f.tileWidth,this._tileHeight=f.tileHeight,this._minimumLevel=f.minimumLevel,this._maximumLevel=f.maximumLevel,this._rectangle=k.clone(f.rectangle),this._tilingScheme=f.tilingScheme;var s=f.credit;"string"==typeof s&&(s=new c(s)),this._credit=s;var t,u=this;p()};return f(r.prototype,{url:{get:function(){return this._url}},proxy:{get:function(){return this._proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),
r.prototype.getTileCredits=function(){return void 0},r.prototype.requestImage=function(a,b,c){var d=p(this,a,b,c);return o.loadImage(this,d)},r.prototype.pickFeatures=function(){return void 0},r}),c("Scene/TileState",["../Core/freezeObject"],function(a){"use strict";var b={START:0,LOADING:1,READY:2,UPSAMPLED_ONLY:3};return a(b)}),c("Shaders/ViewportQuadFS",[],function(){"use strict";return"varying vec2 v_textureCoordinates;\nvoid main()\n{\nczm_materialInput materialInput;\nmaterialInput.s = v_textureCoordinates.s;\nmaterialInput.st = v_textureCoordinates;\nmaterialInput.str = vec3(v_textureCoordinates, 0.0);\nmaterialInput.normalEC = vec3(0.0, 0.0, -1.0);\nczm_material material = czm_getMaterial(materialInput);\ngl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n}\n"}),c("Scene/ViewportQuad",["../Core/BoundingRectangle","../Core/Color","../Core/defined","../Core/destroyObject","../Core/DeveloperError","../Renderer/ShaderSource","../Shaders/ViewportQuadFS","./BlendingState","./Material","./Pass"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=function(d,e){this.show=!0,c(d)||(d=new a),this.rectangle=a.clone(d),c(e)||(e=i.fromType(i.ColorType,{color:new b(1,1,1,1)})),this.material=e,this._material=void 0,this._overlayCommand=void 0,this._rs=void 0};return k.prototype.update=function(b,d,e){if(this.show){var i=this._rs;c(i)&&a.equals(i.viewport,this.rectangle)||(this._rs=b.createRenderState({blending:h.ALPHA_BLEND,viewport:this.rectangle}));var k=d.passes;if(k.render){if(this._material!==this.material||!c(this._overlayCommand)){this._material=this.material,c(this._overlayCommand)&&this._overlayCommand.shaderProgram.destroy();var l=new f({sources:[this._material.shaderSource,g]});this._overlayCommand=b.createViewportQuadCommand(l,{renderState:this._rs,uniformMap:this._material._uniforms,owner:this}),this._overlayCommand.pass=j.OVERLAY}this._material.update(b),this._overlayCommand.uniformMap=this._material._uniforms,e.push(this._overlayCommand)}}},k.prototype.isDestroyed=function(){return!1},k.prototype.destroy=function(){return c(this._overlayCommand)&&(this._overlayCommand.shaderProgram=this._overlayCommand.shaderProgram&&this._overlayCommand.shaderProgram.destroy()),d(this)},k}),c("Scene/WebMapServiceImageryProvider",["../Core/Cartesian3","../Core/Cartographic","../Core/combine","../Core/Credit","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/freezeObject","../Core/GeographicTilingScheme","../Core/loadJson","../Core/loadXML","../Core/Math","../Core/objectToQuery","../Core/queryToObject","../Core/Rectangle","../Core/WebMercatorTilingScheme","../ThirdParty/Uri","../ThirdParty/when","./ImageryLayerFeatureInfo","./ImageryProvider"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){"use strict";function w(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c.toLowerCase()]=a[c]);return b}function x(a,b,d,g){var h=new s(a._url),i=p(e(h.query,""));if(i=c(a._parameters,i),f(i.layers)||(i.layers=a._layers),f(i.srs)||(i.srs=a._tilingScheme instanceof r?"EPSG:3857":"EPSG:4326"),!f(i.bbox)){var j=a._tilingScheme.tileXYToNativeRectangle(b,d,g);i.bbox=j.west+","+j.south+","+j.east+","+j.north}f(i.width)||(i.width=a._tileWidth),f(i.height)||(i.height=a._tileHeight),h.query=o(i);var k=h.toString(),l=a._proxy;return f(l)&&(k=l.getURL(k)),k}function y(a,b,d,g,h,i,j){var k=new s(a._url),l=p(e(k.query,""));if(l=c(a._getFeatureInfoParameters,l),f(l.layers)||(l.layers=a._layers),f(l.query_layers)||(l.query_layers=a._layers),f(l.srs)||(l.srs=a._tilingScheme instanceof r?"EPSG:3857":"EPSG:4326"),!f(l.bbox)){var m=a._tilingScheme.tileXYToNativeRectangle(d,g,h);l.bbox=m.west+","+m.south+","+m.east+","+m.north}f(l.x)||(l.x=i),f(l.y)||(l.y=j),f(l.width)||(l.width=a._tileWidth),f(l.height)||(l.height=a._tileHeight),f(l.info_format)||(l.info_format=b),k.query=o(l);var n=k.toString(),q=a._proxy;return f(q)&&(n=q.getURL(n)),n}function z(a){for(var c=[],d=a.features,e=0;e<d.length;++e){var f=d[e],g=new u;if(g.data=f,g.configureNameFromProperties(f.properties),g.configureDescriptionFromProperties(f.properties),"Point"===f.geometry.type){var h=f.geometry.coordinates[0],i=f.geometry.coordinates[1];g.position=b.fromDegrees(h,i)}c.push(g)}return c}function A(a){var b=a.documentElement;return"MultiFeatureCollection"===b.localName&&b.namespaceURI===H?B(a):"FeatureInfoResponse"===b.localName&&b.namespaceURI===I?C(a):"ServiceExceptionReport"===b.localName?void 0:D(a)}function B(a){for(var b=[],c=a.documentElement,d=c.getElementsByTagNameNS(H,"Feature"),e=0;e<d.length;++e){for(var f=d[e],g={},h=f.getElementsByTagNameNS(H,"Val"),i=0;i<h.length;++i){var j=h[i];if(j.hasAttribute("ref")){var k=j.getAttribute("ref"),l=j.textContent.trim();g[k]=l}}var m=new u;m.data=f,m.configureNameFromProperties(g),m.configureDescriptionFromProperties(g),b.push(m)}return b}function C(a){for(var b=[],c=a.documentElement,d=c.getElementsByTagNameNS(I,"FIELDS"),e=0;e<d.length;++e){for(var f=d[e],g={},h=f.attributes,i=0;i<h.length;++i){var j=h[i];g[j.name]=j.value}var k=new u;k.data=f,k.configureNameFromProperties(g),k.configureDescriptionFromProperties(g),b.push(k)}return b}function D(a){var b=(new XMLSerializer).serializeToString(a),c=document.createElement("div"),d=document.createElement("pre");d.textContent=b,c.appendChild(d);var e=new u;return e.data=a,e.description=c.innerHTML,[e]}var E=function a(b){b=e(b,e.EMPTY_OBJECT),this._url=b.url,this._tileDiscardPolicy=b.tileDiscardPolicy,this._proxy=b.proxy,this._layers=b.layers,this._enablePickFeatures=e(b.enablePickFeatures,!0),this._getFeatureInfoAsGeoJson=e(b.getFeatureInfoAsGeoJson,!0),this._getFeatureInfoAsXml=e(b.getFeatureInfoAsXml,!0),this._parameters=c(w(e(b.parameters,e.EMPTY_OBJECT)),a.DefaultParameters),this._getFeatureInfoParameters=c(w(e(b.getFeatureInfoParameters,e.EMPTY_OBJECT)),a.GetFeatureInfoDefaultParameters),this._tileWidth=e(b.tileWidth,256),this._tileHeight=e(b.tileHeight,256),this._minimumLevel=e(b.minimumLevel,0),this._maximumLevel=b.maximumLevel,this._rectangle=e(b.rectangle,q.MAX_VALUE),this._tilingScheme=f(b.tilingScheme)?b.tilingScheme:new k,this._rectangle=q.intersectWith(this._rectangle,this._tilingScheme.rectangle);var g=b.credit;"string"==typeof g&&(g=new d(g)),this._credit=g,this._errorEvent=new i,this._ready=!0};g(E.prototype,{url:{get:function(){return this._url}},proxy:{get:function(){return this._proxy}},layers:{get:function(){return this._layers}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),E.prototype.getTileCredits=function(){return void 0},E.prototype.requestImage=function(a,b,c){var d=x(this,a,b,c);return v.loadImage(this,d)};var F=new b,G=new a;E.prototype.pickFeatures=function(a,b,c,d,e){if(!this._enablePickFeatures)return void 0;var f,g=this._tilingScheme.tileXYToNativeRectangle(a,b,c);if(this._tilingScheme instanceof k)f=G,f.x=n.toDegrees(d),f.y=n.toDegrees(e);else{var h=F;h.longitude=d,h.latitude=e,f=this._tilingScheme.projection.project(h,G)}var i,j=0|this._tileWidth*(f.x-g.west)/(g.east-g.west),o=0|this._tileHeight*(g.north-f.y)/(g.north-g.south);if(this._getFeatureInfoAsGeoJson){i=y(this,"application/json",a,b,c,j,o);var p=this;return t(l(i),function(a){return z(a)},function(d){return p._getFeatureInfoAsXml?(i=y(p,"text/xml",a,b,c,j,o),t(m(i),function(a){return A(a)})):t.reject(d)})}return this._getFeatureInfoAsXml?(i=y(this,"text/xml",a,b,c,j,o),t(m(i),function(a){return A(a)})):void 0},E.DefaultParameters=j({service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"}),E.GetFeatureInfoDefaultParameters=j({service:"WMS",version:"1.1.1",request:"GetFeatureInfo"});var H="http://www.mapinfo.com/mxp",I="http://www.esri.com/wms";return E}),c("Scene/WebMapTileServiceImageryProvider",["../Core/combine","../Core/Credit","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../Core/freezeObject","../Core/objectToQuery","../Core/queryToObject","../Core/Rectangle","../Core/WebMercatorTilingScheme","../ThirdParty/Uri","./ImageryProvider"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(b,e,f,g){var h,k=new m(b._url),l=j(c(k.query,""));l=a(q,l),h=b._tileMatrixLabels,l.tilematrix=d(h)?h[g]:g,l.layer=b._layer,l.style=b._style,l.tilerow=f,l.tilecol=e,l.tilematrixset=b._tileMatrixSetID,l.format=b._format,k.query=i(l);var n=k.toString(),o=b._proxy;return d(o)&&(n=o.getURL(n)),n}var p=function(a){if(a=c(a,c.EMPTY_OBJECT),!d(a.url))throw new f("options.url is required.");if(!d(a.layer))throw new f("options.layer is required.");if(!d(a.style))throw new f("options.style is required.");if(!d(a.tileMatrixSetID))throw new f("options.tileMatrixSetID is required.");this._url=a.url,this._layer=a.layer,this._style=a.style,this._tileMatrixSetID=a.tileMatrixSetID,this._tileMatrixLabels=a.tileMatrixLabels,this._format=c(a.format,"image/jpeg"),this._proxy=a.proxy,this._tileDiscardPolicy=a.tileDiscardPolicy,this._tilingScheme=d(a.tilingScheme)?a.tilingScheme:new l,this._tileWidth=c(a.tileWidth,256),this._tileHeight=c(a.tileHeight,256),this._minimumLevel=c(a.minimumLevel,0),this._maximumLevel=c(a.maximumLevel,18),this._rectangle=c(a.rectangle,this._tilingScheme.rectangle);var e=this._tilingScheme.positionToTileXY(k.southwest(this._rectangle),this._minimumLevel),h=this._tilingScheme.positionToTileXY(k.northeast(this._rectangle),this._minimumLevel),i=(Math.abs(h.x-e.x)+1)*(Math.abs(h.y-e.y)+1);if(i>4)throw new f("The imagery provider's rectangle and minimumLevel indicate that there are "+i+" tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.");this._errorEvent=new g;var j=a.credit;this._credit="string"==typeof j?new b(j):j},q=h({service:"WMTS",version:"1.0.0",request:"GetTile"});return e(p.prototype,{url:{get:function(){return this._url}},proxy:{get:function(){return this._proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},format:{get:function(){return this._format}},ready:{value:!0},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),p.prototype.getTileCredits=function(){return void 0},p.prototype.requestImage=function(a,b,c){var d=o(this,a,b,c);return n.loadImage(this,d)},p.prototype.pickFeatures=function(){return void 0},p}),c("Scene/createTangentSpaceDebugPrimitive",["../Core/ColorGeometryInstanceAttribute","../Core/defaultValue","../Core/defined","../Core/DeveloperError","../Core/GeometryInstance","../Core/GeometryPipeline","../Core/Matrix4","./PerInstanceColorAppearance","./Primitive"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(d){d=b(d,b.EMPTY_OBJECT);var j=[],k=d.geometry;c(k.attributes)&&c(k.primitiveType)||(k=k.constructor.createGeometry(k));var l=k.attributes,m=g.clone(b(d.modelMatrix,g.IDENTITY)),n=b(d.length,1e4);return c(l.normal)&&j.push(new e({geometry:f.createLineSegmentsForVectors(k,"normal",n),attributes:{color:new a(1,0,0,1)},modelMatrix:m})),c(l.binormal)&&j.push(new e({geometry:f.createLineSegmentsForVectors(k,"binormal",n),attributes:{color:new a(0,1,0,1)},modelMatrix:m})),c(l.tangent)&&j.push(new e({geometry:f.createLineSegmentsForVectors(k,"tangent",n),attributes:{color:new a(0,0,1,1)},modelMatrix:m})),j.length>0?new i({geometryInstances:j,appearance:new h({flat:!0,translucent:!1})}):void 0}return j}),function(){!function(a){var d=this||(0,eval)("this"),e=d.document,f=d.navigator,g=d.jQuery,h=d.JSON;!function(a){"function"==typeof b&&"object"==typeof exports&&"object"==typeof module?a(module.exports||exports,b):"function"==typeof c&&c.amd?c("ThirdParty/knockout-3.2.0",["exports","require"],a):a(d.ko={})}(function(b,c){function i(a,b){return null===a||typeof a in n?a===b:!1}function j(b,c){var d;return function(){d||(d=setTimeout(function(){d=a,b()},c))}}function k(a,b){var c;return function(){clearTimeout(c),c=setTimeout(a,b)}}function l(a,b,c,d){m.d[a]={init:function(a,e,f,g,h){var i,j;return m.s(function(){var f=m.a.c(e()),g=!c!=!f,k=!j;(k||b||g!==i)&&(k&&m.Y.la()&&(j=m.a.ia(m.f.childNodes(a),!0)),g?(k||m.f.T(a,m.a.ia(j)),m.Ca(d?d(h,f):h,a)):m.f.ja(a),i=g)},null,{o:a}),{controlsDescendantBindings:!0}}},m.h.ha[a]=!1,m.f.Q[a]=!0}var m="undefined"!=typeof b?b:{};m.b=function(a,b){for(var c=a.split("."),d=m,e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=b},m.A=function(a,b,c){a[b]=c},m.version="3.2.0",m.b("version",m.version),m.a=function(){function b(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function c(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function i(a,b){return a.__proto__=b,a}var j={__proto__:[]}instanceof Array,k={},l={};k[f&&/Firefox\/2/i.test(f.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],k.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),b(k,function(a,b){if(b.length)for(var c=0,d=b.length;d>c;c++)l[b[c]]=a});var n={propertychange:!0},o=e&&function(){for(var b=3,c=e.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="\x3c!--[if gt IE "+ ++b+"]><i></i><![endif]--\x3e",d[0];);return b>4?b:a}();return{vb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],u:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)},m:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},qb:function(a,b,c){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d))return a[d];return null},ua:function(a,b){var c=m.a.m(a,b);c>0?a.splice(c,1):0===c&&a.shift()},rb:function(a){a=a||[];for(var b=[],c=0,d=a.length;d>c;c++)0>m.a.m(b,a[c])&&b.push(a[c]);return b},Da:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)c.push(b(a[d],d));return c},ta:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)b(a[d],d)&&c.push(a[d]);return c},ga:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;d>c;c++)a.push(b[c]);return a},ea:function(a,b,c){var d=m.a.m(m.a.Xa(a),b);0>d?c&&a.push(b):c||a.splice(d,1)},xa:j,extend:c,za:i,Aa:j?i:c,G:b,na:function(a,b){if(!a)return a;var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=b(a[c],c,a));return d},Ka:function(a){for(;a.firstChild;)m.removeNode(a.firstChild)},oc:function(a){a=m.a.S(a);for(var b=e.createElement("div"),c=0,d=a.length;d>c;c++)b.appendChild(m.R(a[c]));return b},ia:function(a,b){for(var c=0,d=a.length,e=[];d>c;c++){var f=a[c].cloneNode(!0);e.push(b?m.R(f):f)}return e},T:function(a,b){if(m.a.Ka(a),b)for(var c=0,d=b.length;d>c;c++)a.appendChild(b[c])},Lb:function(a,b){var c=a.nodeType?[a]:a;if(0<c.length){for(var d=c[0],e=d.parentNode,f=0,g=b.length;g>f;f++)e.insertBefore(b[f],d);for(f=0,g=c.length;g>f;f++)m.removeNode(c[f])}},ka:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.shift();if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)if(a.push(c),c=c.nextSibling,!c)return;a.push(d)}}return a},Nb:function(a,b){7>o?a.setAttribute("selected",b):a.selected=b},cb:function(b){return null===b||b===a?"":b.trim?b.trim():b.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},vc:function(a,b){return a=a||"",b.length>a.length?!1:a.substring(0,b.length)===b},cc:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(3===a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(16&b.compareDocumentPosition(a));for(;a&&a!=b;)a=a.parentNode;return!!a},Ja:function(a){return m.a.cc(a,a.ownerDocument.documentElement)},ob:function(a){return!!m.a.qb(a,m.a.Ja)},t:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},n:function(a,b,c){var d=o&&n[b];if(!d&&g)g(a).bind(b,c);else if(d||"function"!=typeof a.addEventListener){if("undefined"==typeof a.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var e=function(b){c.call(a,b)},f="on"+b;a.attachEvent(f,e),m.a.w.da(a,function(){a.detachEvent(f,e)})}else a.addEventListener(b,c,!1)},oa:function(a,b){if(!a||!a.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var c;if("input"===m.a.t(a)&&a.type&&"click"==b.toLowerCase()?(c=a.type,c="checkbox"==c||"radio"==c):c=!1,g&&!c)g(a).trigger(b);else if("function"==typeof e.createEvent){if("function"!=typeof a.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");c=e.createEvent(l[b]||"HTMLEvents"),c.initEvent(b,!0,!0,d,0,0,0,0,0,!1,!1,!1,!1,0,a),a.dispatchEvent(c)}else if(c&&a.click)a.click();else{if("undefined"==typeof a.fireEvent)throw Error("Browser doesn't support triggering events");a.fireEvent("on"+b)}},c:function(a){return m.C(a)?a():a},Xa:function(a){return m.C(a)?a.v():a},Ba:function(a,b,c){if(b){var d=/\S+/g,e=a.className.match(d)||[];m.a.u(b.match(d),function(a){m.a.ea(e,a,c)}),a.className=e.join(" ")}},bb:function(b,c){var d=m.a.c(c);(null===d||d===a)&&(d="");var e=m.f.firstChild(b);!e||3!=e.nodeType||m.f.nextSibling(e)?m.f.T(b,[b.ownerDocument.createTextNode(d)]):e.data=d,m.a.fc(b)},Mb:function(a,b){if(a.name=b,7>=o)try{a.mergeAttributes(e.createElement("<input name='"+a.name+"'/>"),!1)}catch(a){}},fc:function(a){o>=9&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},dc:function(a){if(o){var b=a.style.width;a.style.width=0,a.style.width=b}},sc:function(a,b){a=m.a.c(a),b=m.a.c(b);for(var c=[],d=a;b>=d;d++)c.push(d);return c},S:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},yc:6===o,zc:7===o,L:o,xb:function(a,b){for(var c=m.a.S(a.getElementsByTagName("input")).concat(m.a.S(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[],f=c.length-1;f>=0;f--)d(c[f])&&e.push(c[f]);return e},pc:function(a){return"string"==typeof a&&(a=m.a.cb(a))?h&&h.parse?h.parse(a):new Function("return "+a)():null},eb:function(a,b,c){if(!h||!h.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return h.stringify(m.a.c(a),b,c)},qc:function(a,c,d){d=d||{};var f=d.params||{},g=d.includeFields||this.vb,h=a;if("object"==typeof a&&"form"===m.a.t(a))for(var h=a.action,i=g.length-1;i>=0;i--)for(var j=m.a.xb(a,g[i]),k=j.length-1;k>=0;k--)f[j[k].name]=j[k].value;c=m.a.c(c);var l=e.createElement("form");l.style.display="none",l.action=h,l.method="post";for(var n in c)a=e.createElement("input"),a.type="hidden",a.name=n,a.value=m.a.eb(m.a.c(c[n])),l.appendChild(a);b(f,function(a,b){var c=e.createElement("input");c.type="hidden",c.name=a,c.value=b,l.appendChild(c)}),e.body.appendChild(l),d.submitter?d.submitter(l):l.submit(),setTimeout(function(){l.parentNode.removeChild(l)},0)}}}(),m.b("utils",m.a),m.b("utils.arrayForEach",m.a.u),m.b("utils.arrayFirst",m.a.qb),m.b("utils.arrayFilter",m.a.ta),m.b("utils.arrayGetDistinctValues",m.a.rb),m.b("utils.arrayIndexOf",m.a.m),m.b("utils.arrayMap",m.a.Da),m.b("utils.arrayPushAll",m.a.ga),m.b("utils.arrayRemoveItem",m.a.ua),m.b("utils.extend",m.a.extend),m.b("utils.fieldsIncludedWithJsonPost",m.a.vb),m.b("utils.getFormFields",m.a.xb),m.b("utils.peekObservable",m.a.Xa),m.b("utils.postJson",m.a.qc),m.b("utils.parseJson",m.a.pc),m.b("utils.registerEventHandler",m.a.n),m.b("utils.stringifyJson",m.a.eb),m.b("utils.range",m.a.sc),m.b("utils.toggleDomNodeCssClass",m.a.Ba),m.b("utils.triggerEvent",m.a.oa),m.b("utils.unwrapObservable",m.a.c),m.b("utils.objectForEach",m.a.G),m.b("utils.addOrRemoveItem",m.a.ea),m.b("unwrap",m.a.c),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments);return a=c.shift(),function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),m.a.e=new function(){function b(b,f){var g=b[d];if(!g||"null"===g||!e[g]){if(!f)return a;g=b[d]="ko"+c++,e[g]={}}return e[g]}var c=0,d="__ko__"+(new Date).getTime(),e={};return{get:function(c,d){var e=b(c,!1);return e===a?a:e[d]},set:function(c,d,e){(e!==a||b(c,!1)!==a)&&(b(c,!0)[d]=e)},clear:function(a){var b=a[d];return b?(delete e[b],a[d]=null,!0):!1},F:function(){return c+++d}}},m.b("utils.domData",m.a.e),m.b("utils.domData.clear",m.a.e.clear),m.a.w=new function(){function b(b,c){var e=m.a.e.get(b,d);return e===a&&c&&(e=[],m.a.e.set(b,d,e)),e}function c(a){var d=b(a,!1);if(d)for(var d=d.slice(0),e=0;e<d.length;e++)d[e](a);if(m.a.e.clear(a),m.a.w.cleanExternalData(a),f[a.nodeType])for(d=a.firstChild;a=d;)d=a.nextSibling,8===a.nodeType&&c(a)}var d=m.a.e.F(),e={1:!0,8:!0,9:!0},f={1:!0,9:!0};return{da:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},Kb:function(c,e){var f=b(c,!1);f&&(m.a.ua(f,e),0==f.length&&m.a.e.set(c,d,a))},R:function(a){if(e[a.nodeType]&&(c(a),f[a.nodeType])){var b=[];m.a.ga(b,a.getElementsByTagName("*"));for(var d=0,g=b.length;g>d;d++)c(b[d])}return a},removeNode:function(a){m.R(a),a.parentNode&&a.parentNode.removeChild(a)},cleanExternalData:function(a){g&&"function"==typeof g.cleanData&&g.cleanData([a])}}},m.R=m.a.w.R,m.removeNode=m.a.w.removeNode,m.b("cleanNode",m.R),m.b("removeNode",m.removeNode),m.b("utils.domNodeDisposal",m.a.w),m.b("utils.domNodeDisposal.addDisposeCallback",m.a.w.da),m.b("utils.domNodeDisposal.removeDisposeCallback",m.a.w.Kb),function(){m.a.ba=function(a){var b;if(g){if(g.parseHTML)b=g.parseHTML(a)||[];else if((b=g.clean([a]))&&b[0]){for(a=b[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{var c=m.a.cb(a).toLowerCase();for(b=e.createElement("div"),c=c.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!c.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!c.indexOf("<td")||!c.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],a="ignored<div>"+c[1]+a+c[2]+"</div>","function"==typeof d.innerShiv?b.appendChild(d.innerShiv(a)):b.innerHTML=a;c[0]--;)b=b.lastChild;b=m.a.S(b.lastChild.childNodes)}return b},m.a.$a=function(b,c){if(m.a.Ka(b),c=m.a.c(c),null!==c&&c!==a)if("string"!=typeof c&&(c=c.toString()),g)g(b).html(c);else for(var d=m.a.ba(c),e=0;e<d.length;e++)b.appendChild(d[e])}}(),m.b("utils.parseHtmlFragment",m.a.ba),m.b("utils.setHtml",m.a.$a),m.D=function(){function b(a,c){if(a)if(8==a.nodeType){var d=m.D.Gb(a.nodeValue);null!=d&&c.push({bc:a,mc:d})}else if(1==a.nodeType)for(var d=0,e=a.childNodes,f=e.length;f>d;d++)b(e[d],c)}var c={};return{Ua:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(0|4294967296*(1+Math.random())).toString(16).substring(1)+(0|4294967296*(1+Math.random())).toString(16).substring(1);return c[b]=a,"\x3c!--[ko_memo:"+b+"]--\x3e"},Rb:function(b,d){var e=c[b];if(e===a)throw Error("Couldn't find any memo with ID "+b+". Perhaps it's already been unmemoized.");try{return e.apply(null,d||[]),!0}finally{delete c[b]}},Sb:function(a,c){var d=[];b(a,d);for(var e=0,f=d.length;f>e;e++){var g=d[e].bc,h=[g];c&&m.a.ga(h,c),m.D.Rb(d[e].mc,h),g.nodeValue="",g.parentNode&&g.parentNode.removeChild(g)}},Gb:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}(),m.b("memoization",m.D),m.b("memoization.memoize",m.D.Ua),m.b("memoization.unmemoize",m.D.Rb),m.b("memoization.parseMemoText",m.D.Gb),m.b("memoization.unmemoizeDomNodeAndDescendants",m.D.Sb),m.La={throttle:function(a,b){a.throttleEvaluation=b;var c=null;return m.j({read:a,write:function(d){clearTimeout(c),c=setTimeout(function(){a(d)},b)}})},rateLimit:function(a,b){var c,d,e;"number"==typeof b?c=b:(c=b.timeout,d=b.method),e="notifyWhenChangesStop"==d?k:j,a.Ta(function(a){return e(a,c)})},notify:function(a,b){a.equalityComparer="always"==b?null:i}};var n={undefined:1,boolean:1,number:1,string:1};m.b("extenders",m.La),m.Pb=function(a,b,c){this.target=a,this.wa=b,this.ac=c,this.Cb=!1,m.A(this,"dispose",this.K)},m.Pb.prototype.K=function(){this.Cb=!0,this.ac()},m.P=function(){m.a.Aa(this,m.P.fn),this.M={}};var o="change",p={U:function(a,b,c){var d=this;c=c||o;var e=new m.Pb(d,b?a.bind(b):a,function(){m.a.ua(d.M[c],e),d.nb&&d.nb()});return d.va&&d.va(c),d.M[c]||(d.M[c]=[]),d.M[c].push(e),e},notifySubscribers:function(a,b){if(b=b||o,this.Ab(b))try{m.k.Ea();for(var c,d=this.M[b].slice(0),e=0;c=d[e];++e)c.Cb||c.wa(a)}finally{m.k.end()}},Ta:function(a){var b,c,d,e=this,f=m.C(e);e.qa||(e.qa=e.notifySubscribers,e.notifySubscribers=function(a,b){b&&b!==o?"beforeChange"===b?e.kb(a):e.qa(a,b):e.lb(a)});var g=a(function(){f&&d===e&&(d=e()),b=!1,e.Pa(c,d)&&e.qa(c=d)});e.lb=function(a){b=!0,d=a,g()},e.kb=function(a){b||(c=a,e.qa(a,"beforeChange"))}},Ab:function(a){return this.M[a]&&this.M[a].length},yb:function(){var a=0;return m.a.G(this.M,function(b,c){a+=c.length}),a},Pa:function(a,b){return!this.equalityComparer||!this.equalityComparer(a,b)},extend:function(a){var b=this;return a&&m.a.G(a,function(a,c){var d=m.La[a];"function"==typeof d&&(b=d(b,c)||b)}),b}};m.A(p,"subscribe",p.U),m.A(p,"extend",p.extend),m.A(p,"getSubscriptionsCount",p.yb),m.a.xa&&m.a.za(p,Function.prototype),m.P.fn=p,m.Db=function(a){return null!=a&&"function"==typeof a.U&&"function"==typeof a.notifySubscribers},m.b("subscribable",m.P),m.b("isSubscribable",m.Db),m.Y=m.k=function(){function a(a){d.push(c),c=a}function b(){c=d.pop()}var c,d=[],e=0;return{Ea:a,end:b,Jb:function(a){if(c){if(!m.Db(a))throw Error("Only subscribable things can act as dependencies");c.wa(a,a.Vb||(a.Vb=++e))}},B:function(c,d,e){try{return a(),c.apply(d,e||[])}finally{b()}},la:function(){return c?c.s.la():void 0},ma:function(){return c?c.ma:void 0}}}(),m.b("computedContext",m.Y),m.b("computedContext.getDependenciesCount",m.Y.la),m.b("computedContext.isInitial",m.Y.ma),m.b("computedContext.isSleeping",m.Y.Ac),m.p=function(a){function b(){return 0<arguments.length?(b.Pa(c,arguments[0])&&(b.X(),c=arguments[0],b.W()),this):(m.k.Jb(b),c)}var c=a;return m.P.call(b),m.a.Aa(b,m.p.fn),b.v=function(){return c},b.W=function(){b.notifySubscribers(c)},b.X=function(){b.notifySubscribers(c,"beforeChange")},m.A(b,"peek",b.v),m.A(b,"valueHasMutated",b.W),m.A(b,"valueWillMutate",b.X),b},m.p.fn={equalityComparer:i};var q=m.p.rc="__ko_proto__";m.p.fn[q]=m.p,m.a.xa&&m.a.za(m.p.fn,m.P.fn),m.Ma=function(b,c){return null===b||b===a||b[q]===a?!1:b[q]===c?!0:m.Ma(b[q],c)},m.C=function(a){return m.Ma(a,m.p)},m.Ra=function(a){return"function"==typeof a&&a[q]===m.p||"function"==typeof a&&a[q]===m.j&&a.hc?!0:!1},m.b("observable",m.p),m.b("isObservable",m.C),m.b("isWriteableObservable",m.Ra),m.b("isWritableObservable",m.Ra),m.aa=function(a){if(a=a||[],"object"!=typeof a||!("length"in a))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return a=m.p(a),m.a.Aa(a,m.aa.fn),a.extend({trackArrayChanges:!0})},m.aa.fn={remove:function(a){for(var b=this.v(),c=[],d="function"!=typeof a||m.C(a)?function(b){return b===a}:a,e=0;e<b.length;e++){var f=b[e];d(f)&&(0===c.length&&this.X(),c.push(f),b.splice(e,1),e--)}return c.length&&this.W(),c},removeAll:function(b){if(b===a){var c=this.v(),d=c.slice(0);return this.X(),c.splice(0,c.length),this.W(),d}return b?this.remove(function(a){return 0<=m.a.m(b,a)}):[]},destroy:function(a){var b=this.v(),c="function"!=typeof a||m.C(a)?function(b){return b===a}:a;this.X();for(var d=b.length-1;d>=0;d--)c(b[d])&&(b[d]._destroy=!0);this.W()},destroyAll:function(b){return b===a?this.destroy(function(){return!0}):b?this.destroy(function(a){return 0<=m.a.m(b,a)}):[]},indexOf:function(a){var b=this();return m.a.m(b,a)},replace:function(a,b){var c=this.indexOf(a);c>=0&&(this.X(),this.v()[c]=b,this.W())}},m.a.u("pop push reverse shift sort splice unshift".split(" "),function(a){m.aa.fn[a]=function(){var b=this.v();return this.X(),this.sb(b,a,arguments),b=b[a].apply(b,arguments),this.W(),b}}),m.a.u(["slice"],function(a){m.aa.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}}),m.a.xa&&m.a.za(m.aa.fn,m.p.fn),m.b("observableArray",m.aa);var r="arrayChange";m.La.trackArrayChanges=function(a){function b(){if(!c){c=!0;var b=a.notifySubscribers;a.notifySubscribers=function(a,c){return c&&c!==o||++e,b.apply(this,arguments)};var f=[].concat(a.v()||[]);d=null,a.U(function(b){if(b=[].concat(b||[]),a.Ab(r)){var c;(!d||e>1)&&(d=m.a.Fa(f,b,{sparse:!0})),c=d,c.length&&a.notifySubscribers(c,r)}f=b,d=null,e=0})}}if(!a.sb){var c=!1,d=null,e=0,f=a.U;a.U=a.subscribe=function(a,c,d){return d===r&&b(),f.apply(this,arguments)},a.sb=function(a,b,f){function g(a,b,c){return h[h.length]={status:a,value:b,index:c}}if(c&&!e){var h=[],i=a.length,j=f.length,k=0;switch(b){case"push":k=i;case"unshift":for(b=0;j>b;b++)g("added",f[b],k+b);break;case"pop":k=i-1;case"shift":i&&g("deleted",a[k],k);break;case"splice":b=Math.min(Math.max(0,0>f[0]?i+f[0]:f[0]),i);for(var i=1===j?i:Math.min(b+(f[1]||0),i),j=b+j-2,k=Math.max(i,j),l=[],n=[],o=2;k>b;++b,++o)i>b&&n.push(g("deleted",a[b],b)),j>b&&l.push(g("added",f[o],b));m.a.wb(n,l);break;default:return}d=h}}}},m.s=m.j=function(b,c,d){function e(){m.a.G(z,function(a,b){b.K()}),z={}}function f(){e(),A=0,q=!0,n=!1}function g(){var a=i.throttleEvaluation;a&&a>=0?(clearTimeout(B),B=setTimeout(h,a)):i.ib?i.ib():h()}function h(b){if(o){if(s)throw Error("A 'pure' computed must not be called recursively")}else if(!q){if(x&&x()){if(!p)return y(),void 0}else p=!1;if(o=!0,t)try{var d={};m.k.Ea({wa:function(a,b){d[b]||(d[b]=1,++A)},s:i,ma:a}),A=0,l=r.call(c)}finally{m.k.end(),o=!1}else try{var e=z,f=A;m.k.Ea({wa:function(a,b){q||(f&&e[b]?(z[b]=e[b],++A,delete e[b],--f):z[b]||(z[b]=a.U(g),++A))},s:i,ma:s?a:!A}),z={},A=0;try{var h=c?r.call(c):r()}finally{m.k.end(),f&&m.a.G(e,function(a,b){b.K()}),n=!1}i.Pa(l,h)&&(i.notifySubscribers(l,"beforeChange"),l=h,!0!==b&&i.notifySubscribers(l))}finally{o=!1}A||y()}}function i(){if(0<arguments.length){if("function"!=typeof u)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return u.apply(c,arguments),this}return m.k.Jb(i),n&&h(!0),l}function j(){return n&&!A&&h(!0),l}function k(){return n||A>0}var l,n=!0,o=!1,p=!1,q=!1,r=b,s=!1,t=!1;if(r&&"object"==typeof r?(d=r,r=d.read):(d=d||{},r||(r=d.read)),"function"!=typeof r)throw Error("Pass a function that returns the value of the ko.computed");var u=d.write,v=d.disposeWhenNodeIsRemoved||d.o||null,w=d.disposeWhen||d.Ia,x=w,y=f,z={},A=0,B=null;c||(c=d.owner),m.P.call(i),m.a.Aa(i,m.j.fn),i.v=j,i.la=function(){return A},i.hc="function"==typeof d.write,i.K=function(){y()},i.Z=k;var C=i.Ta;return i.Ta=function(a){C.call(i,a),i.ib=function(){i.kb(l),n=!0,i.lb(i)}},d.pure?(t=s=!0,i.va=function(){t&&(t=!1,h(!0))},i.nb=function(){i.yb()||(e(),t=n=!0)}):d.deferEvaluation&&(i.va=function(){j(),delete i.va}),m.A(i,"peek",i.v),m.A(i,"dispose",i.K),m.A(i,"isActive",i.Z),m.A(i,"getDependenciesCount",i.la),v&&(p=!0,v.nodeType&&(x=function(){return!m.a.Ja(v)||w&&w()})),t||d.deferEvaluation||h(),v&&k()&&v.nodeType&&(y=function(){m.a.w.Kb(v,y),f()},m.a.w.da(v,y)),i},m.jc=function(a){return m.Ma(a,m.j)},
p=m.p.rc,m.j[p]=m.p,m.j.fn={equalityComparer:i},m.j.fn[p]=m.j,m.a.xa&&m.a.za(m.j.fn,m.P.fn),m.b("dependentObservable",m.j),m.b("computed",m.j),m.b("isComputed",m.jc),m.Ib=function(a,b){return"function"==typeof a?m.s(a,b,{pure:!0}):(a=m.a.extend({},a),a.pure=!0,m.s(a,b))},m.b("pureComputed",m.Ib),function(){function b(e,f,g){if(g=g||new d,e=f(e),"object"!=typeof e||null===e||e===a||e instanceof Date||e instanceof String||e instanceof Number||e instanceof Boolean)return e;var h=e instanceof Array?[]:{};return g.save(e,h),c(e,function(c){var d=f(e[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":h[c]=d;break;case"object":case"undefined":var i=g.get(d);h[c]=i!==a?i:b(d,f,g)}}),h}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}function d(){this.keys=[],this.hb=[]}m.Qb=function(a){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return b(a,function(a){for(var b=0;m.C(a)&&10>b;b++)a=a();return a})},m.toJSON=function(a,b,c){return a=m.Qb(a),m.a.eb(a,b,c)},d.prototype={save:function(a,b){var c=m.a.m(this.keys,a);c>=0?this.hb[c]=b:(this.keys.push(a),this.hb.push(b))},get:function(b){return b=m.a.m(this.keys,b),b>=0?this.hb[b]:a}}}(),m.b("toJS",m.Qb),m.b("toJSON",m.toJSON),function(){m.i={q:function(b){switch(m.a.t(b)){case"option":return!0===b.__ko__hasDomDataOptionValue__?m.a.e.get(b,m.d.options.Va):7>=m.a.L?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case"select":return 0<=b.selectedIndex?m.i.q(b.options[b.selectedIndex]):a;default:return b.value}},ca:function(b,c,d){switch(m.a.t(b)){case"option":switch(typeof c){case"string":m.a.e.set(b,m.d.options.Va,a),"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c;break;default:m.a.e.set(b,m.d.options.Va,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"==typeof c?c:""}break;case"select":(""===c||null===c)&&(c=a);for(var e,f=-1,g=0,h=b.options.length;h>g;++g)if(e=m.i.q(b.options[g]),e==c||""==e&&c===a){f=g;break}(d||f>=0||c===a&&1<b.size)&&(b.selectedIndex=f);break;default:(null===c||c===a)&&(c=""),b.value=c}}}}(),m.b("selectExtensions",m.i),m.b("selectExtensions.readValue",m.i.q),m.b("selectExtensions.writeValue",m.i.ca),m.h=function(){function a(a){a=m.a.cb(a),123===a.charCodeAt(0)&&(a=a.slice(1,-1));var b,c,g=[],h=a.match(d),i=0;if(h){h.push(",");for(var j,k=0;j=h[k];++k){var l=j.charCodeAt(0);if(44===l){if(0>=i){b&&g.push(c?{key:b,value:c.join("")}:{unknown:b}),b=c=i=0;continue}}else if(58===l){if(!c)continue}else if(47===l&&k&&1<j.length)(l=h[k-1].match(e))&&!f[l[0]]&&(a=a.substr(a.indexOf(j)+1),h=a.match(d),h.push(","),k=-1,j="/");else if(40===l||123===l||91===l)++i;else if(41===l||125===l||93===l)--i;else if(!b&&!c){b=34===l||39===l?j.slice(1,-1):j;continue}c?c.push(j):c=[j]}}return g}var b=["true","false","null","undefined"],c=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,d=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),e=/[\])"'A-Za-z0-9_$]+$/,f={in:1,return:1,typeof:1},g={};return{ha:[],V:g,Wa:a,ya:function(d,e){function f(a,d){var e;if(!k){var l=m.getBindingHandler(a);if(l&&l.preprocess&&!(d=l.preprocess(d,a,f)))return;(l=g[a])&&(e=d,0<=m.a.m(b,e)?e=!1:(l=e.match(c),e=null===l?!1:l[1]?"Object("+l[1]+")"+l[2]:e),l=e),l&&i.push("'"+a+"':function(_z){"+e+"=_z}")}j&&(d="function(){return "+d+" }"),h.push("'"+a+"':"+d)}e=e||{};var h=[],i=[],j=e.valueAccessors,k=e.bindingParams,l="string"==typeof d?a(d):d;return m.a.u(l,function(a){f(a.key||a.unknown,a.value)}),i.length&&f("_ko_property_writers","{"+i.join(",")+" }"),h.join(",")},lc:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},pa:function(a,b,c,d,e){a&&m.C(a)?!m.Ra(a)||e&&a.v()===d||a(d):(a=b.get("_ko_property_writers"))&&a[c]&&a[c](d)}}}(),m.b("expressionRewriting",m.h),m.b("expressionRewriting.bindingRewriteValidators",m.h.ha),m.b("expressionRewriting.parseObjectLiteral",m.h.Wa),m.b("expressionRewriting.preProcessBindings",m.h.ya),m.b("expressionRewriting._twoWayBindings",m.h.V),m.b("jsonExpressionRewriting",m.h),m.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",m.h.ya),function(){function a(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function b(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function c(c,d){for(var e=c,f=1,g=[];e=e.nextSibling;){if(b(e)&&(f--,0===f))return g;g.push(e),a(e)&&f++}if(!d)throw Error("Cannot find closing comment tag to match: "+c.nodeValue);return null}function d(a,b){var d=c(a,b);return d?0<d.length?d[d.length-1].nextSibling:a.nextSibling:null}var f=e&&"\x3c!--test--\x3e"===e.createComment("test").text,g=f?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,h=f?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,i={ul:!0,ol:!0};m.f={Q:{},childNodes:function(b){return a(b)?c(b):b.childNodes},ja:function(b){if(a(b)){b=m.f.childNodes(b);for(var c=0,d=b.length;d>c;c++)m.removeNode(b[c])}else m.a.Ka(b)},T:function(b,c){if(a(b)){m.f.ja(b);for(var d=b.nextSibling,e=0,f=c.length;f>e;e++)d.parentNode.insertBefore(c[e],d)}else m.a.T(b,c)},Hb:function(b,c){a(b)?b.parentNode.insertBefore(c,b.nextSibling):b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)},Bb:function(b,c,d){d?a(b)?b.parentNode.insertBefore(c,d.nextSibling):d.nextSibling?b.insertBefore(c,d.nextSibling):b.appendChild(c):m.f.Hb(b,c)},firstChild:function(c){return a(c)?!c.nextSibling||b(c.nextSibling)?null:c.nextSibling:c.firstChild},nextSibling:function(c){return a(c)&&(c=d(c)),c.nextSibling&&b(c.nextSibling)?null:c.nextSibling},gc:a,xc:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},Fb:function(c){if(i[m.a.t(c)]){var e=c.firstChild;if(e)do{if(1===e.nodeType){var f;f=e.firstChild;var g=null;if(f)do{if(g)g.push(f);else if(a(f)){var h=d(f,!0);h?f=h:g=[f]}else b(f)&&(g=[f])}while(f=f.nextSibling);if(f=g)for(g=e.nextSibling,h=0;h<f.length;h++)g?c.insertBefore(f[h],g):c.appendChild(f[h])}}while(e=e.nextSibling)}}}}(),m.b("virtualElements",m.f),m.b("virtualElements.allowedBindings",m.f.Q),m.b("virtualElements.emptyNode",m.f.ja),m.b("virtualElements.insertAfter",m.f.Bb),m.b("virtualElements.prepend",m.f.Hb),m.b("virtualElements.setDomNodeChildren",m.f.T),function(){m.J=function(){this.Yb={}},m.a.extend(m.J.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return null!=a.getAttribute("data-bind")||m.g.getComponentNameForNode(a);case 8:return m.f.gc(a);default:return!1}},getBindings:function(a,b){var c=this.getBindingsString(a,b),c=c?this.parseBindingsString(c,b,a):null;return m.g.mb(c,a,b,!1)},getBindingAccessors:function(a,b){var c=this.getBindingsString(a,b),c=c?this.parseBindingsString(c,b,a,{valueAccessors:!0}):null;return m.g.mb(c,a,b,!0)},getBindingsString:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return m.f.xc(a);default:return null}},parseBindingsString:function(a,b,c,d){try{var e,f=this.Yb,g=a+(d&&d.valueAccessors||"");if(!(e=f[g])){var h,i="with($context){with($data||{}){return{"+m.h.ya(a,d)+"}}}";h=new Function("$context","$element",i),e=f[g]=h}return e(b,c)}catch(b){throw b.message="Unable to parse bindings.\nBindings value: "+a+"\nMessage: "+b.message,b}}}),m.J.instance=new m.J}(),m.b("bindingProvider",m.J),function(){function b(a){return function(){return a}}function c(a){return a()}function e(a){return m.a.na(m.k.B(a),function(b,c){return function(){return a()[c]}})}function f(a,b){return e(this.getBindings.bind(this,a,b))}function h(a,b,c){var d,e=m.f.firstChild(b),f=m.J.instance,g=f.preprocessNode;if(g){for(;d=e;)e=m.f.nextSibling(d),g.call(f,d);e=m.f.firstChild(b)}for(;d=e;)e=m.f.nextSibling(d),i(a,d,c)}function i(a,b,c){var d=!0,e=1===b.nodeType;e&&m.f.Fb(b),(e&&c||m.J.instance.nodeHasBindings(b))&&(d=k(b,null,a,c).shouldBindDescendants),d&&!n[m.a.t(b)]&&h(a,b,!e)}function j(a){var b=[],c={},d=[];return m.a.G(a,function e(f){if(!c[f]){var g=m.getBindingHandler(f);g&&(g.after&&(d.push(f),m.a.u(g.after,function(b){if(a[b]){if(-1!==m.a.m(d,b))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+d.join(", "));e(b)}}),d.length--),b.push({key:f,zb:g})),c[f]=!0}}),b}function k(b,d,e,g){var h=m.a.e.get(b,o);if(!d){if(h)throw Error("You cannot apply bindings multiple times to the same element.");m.a.e.set(b,o,!0)}!h&&g&&m.Ob(b,e);var i;if(d&&"function"!=typeof d)i=d;else{var k=m.J.instance,l=k.getBindingAccessors||f,n=m.j(function(){return(i=d?d(e,b):l.call(k,b,e))&&e.I&&e.I(),i},null,{o:b});i&&n.Z()||(n=null)}var p;if(i){var q=n?function(a){return function(){return c(n()[a])}}:function(a){return i[a]},r=function(){return m.a.na(n?n():i,c)};r.get=function(a){return i[a]&&c(q(a))},r.has=function(a){return a in i},g=j(i),m.a.u(g,function(c){var d=c.zb.init,f=c.zb.update,g=c.key;if(8===b.nodeType&&!m.f.Q[g])throw Error("The binding '"+g+"' cannot be used with virtual elements");try{"function"==typeof d&&m.k.B(function(){var c=d(b,q(g),r,e.$data,e);if(c&&c.controlsDescendantBindings){if(p!==a)throw Error("Multiple bindings ("+p+" and "+g+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");p=g}}),"function"==typeof f&&m.j(function(){f(b,q(g),r,e.$data,e)},null,{o:b})}catch(a){throw a.message='Unable to process binding "'+g+": "+i[g]+'"\nMessage: '+a.message,a}})}return{shouldBindDescendants:p===a}}function l(a){return a&&a instanceof m.N?a:new m.N(a)}m.d={};var n={script:!0};m.getBindingHandler=function(a){return m.d[a]},m.N=function(b,c,d,e){var f,g=this,h="function"==typeof b&&!m.C(b),i=m.j(function(){var a=h?b():b,f=m.a.c(a);return c?(c.I&&c.I(),m.a.extend(g,c),i&&(g.I=i)):(g.$parents=[],g.$root=f,g.ko=m),g.$rawData=a,g.$data=f,d&&(g[d]=f),e&&e(g,c,f),g.$data},null,{Ia:function(){return f&&!m.a.ob(f)},o:!0});i.Z()&&(g.I=i,i.equalityComparer=null,f=[],i.Tb=function(b){f.push(b),m.a.w.da(b,function(b){m.a.ua(f,b),f.length||(i.K(),g.I=i=a)})})},m.N.prototype.createChildContext=function(a,b,c){return new m.N(a,this,b,function(a,b){a.$parentContext=b,a.$parent=b.$data,a.$parents=(b.$parents||[]).slice(0),a.$parents.unshift(a.$parent),c&&c(a)})},m.N.prototype.extend=function(a){return new m.N(this.I||this.$data,this,null,function(b,c){b.$rawData=c.$rawData,m.a.extend(b,"function"==typeof a?a():a)})};var o=m.a.e.F(),p=m.a.e.F();m.Ob=function(a,b){return 2!=arguments.length?m.a.e.get(a,p):(m.a.e.set(a,p,b),b.I&&b.I.Tb(a),void 0)},m.ra=function(a,b,c){return 1===a.nodeType&&m.f.Fb(a),k(a,b,l(c),!0)},m.Wb=function(a,c,d){return d=l(d),m.ra(a,"function"==typeof c?e(c.bind(null,d,a)):m.a.na(c,b),d)},m.Ca=function(a,b){1!==b.nodeType&&8!==b.nodeType||h(l(a),b,!0)},m.pb=function(a,b){if(!g&&d.jQuery&&(g=d.jQuery),b&&1!==b.nodeType&&8!==b.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");b=b||d.document.body,i(l(a),b,!0)},m.Ha=function(b){switch(b.nodeType){case 1:case 8:var c=m.Ob(b);if(c)return c;if(b.parentNode)return m.Ha(b.parentNode)}return a},m.$b=function(b){return(b=m.Ha(b))?b.$data:a},m.b("bindingHandlers",m.d),m.b("applyBindings",m.pb),m.b("applyBindingsToDescendants",m.Ca),m.b("applyBindingAccessorsToNode",m.ra),m.b("applyBindingsToNode",m.Wb),m.b("contextFor",m.Ha),m.b("dataFor",m.$b)}(),function(a){function b(b,d){var g,h=e.hasOwnProperty(b)?e[b]:a;h||(h=e[b]=new m.P,c(b,function(a){f[b]=a,delete e[b],g?h.notifySubscribers(a):setTimeout(function(){h.notifySubscribers(a)},0)}),g=!0),h.U(d)}function c(a,b){d("getConfig",[a],function(c){c?d("loadComponent",[a,c],function(a){b(a)}):b(null)})}function d(b,c,e,f){f||(f=m.g.loaders.slice(0));var g=f.shift();if(g){var h=g[b];if(h){var i=!1;if(h.apply(g,c.concat(function(a){i?e(null):null!==a?e(a):d(b,c,e,f)}))!==a&&(i=!0,!g.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else d(b,c,e,f)}else e(null)}var e={},f={};m.g={get:function(c,d){var e=f.hasOwnProperty(c)?f[c]:a;e?setTimeout(function(){d(e)},0):b(c,d)},tb:function(a){delete f[a]},jb:d},m.g.loaders=[],m.b("components",m.g),m.b("components.get",m.g.get),m.b("components.clearCachedDefinition",m.g.tb)}(),function(){function a(a,b,c,d){function e(){0===--g&&d(f)}var f={},g=2,i=c.template;c=c.viewModel,i?h(b,i,function(b){m.g.jb("loadTemplate",[a,b],function(a){f.template=a,e()})}):e(),c?h(b,c,function(b){m.g.jb("loadViewModel",[a,b],function(a){f[k]=a,e()})}):e()}function b(a,c,d){if("function"==typeof c)d(function(a){return new c(a)});else if("function"==typeof c[k])d(c[k]);else if("instance"in c){var e=c.instance;d(function(){return e})}else"viewModel"in c?b(a,c.viewModel,d):a("Unknown viewModel value: "+c)}function f(a){switch(m.a.t(a)){case"script":return m.a.ba(a.text);case"textarea":return m.a.ba(a.value);case"template":if(g(a.content))return m.a.ia(a.content.childNodes)}return m.a.ia(a.childNodes)}function g(a){return d.DocumentFragment?a instanceof DocumentFragment:a&&11===a.nodeType}function h(a,b,e){"string"==typeof b.require?c||d.require?(c||d.require)([b.require],e):a("Uses require, but no AMD loader is present"):e(b)}function i(a){return function(b){throw Error("Component '"+a+"': "+b)}}var j={};m.g.tc=function(a,b){if(!b)throw Error("Invalid configuration for "+a);if(m.g.Qa(a))throw Error("Component "+a+" is already registered");j[a]=b},m.g.Qa=function(a){return a in j},m.g.wc=function(a){delete j[a],m.g.tb(a)},m.g.ub={getConfig:function(a,b){b(j.hasOwnProperty(a)?j[a]:null)},loadComponent:function(b,c,d){var e=i(b);h(e,c,function(c){a(b,e,c,d)})},loadTemplate:function(a,b,c){if(a=i(a),"string"==typeof b)c(m.a.ba(b));else if(b instanceof Array)c(b);else if(g(b))c(m.a.S(b.childNodes));else if(b.element)if(b=b.element,d.HTMLElement?b instanceof HTMLElement:b&&b.tagName&&1===b.nodeType)c(f(b));else if("string"==typeof b){var h=e.getElementById(b);h?c(f(h)):a("Cannot find element with ID "+b)}else a("Unknown element type: "+b);else a("Unknown template value: "+b)},loadViewModel:function(a,c,d){b(i(a),c,d)}};var k="createViewModel";m.b("components.register",m.g.tc),m.b("components.isRegistered",m.g.Qa),m.b("components.unregister",m.g.wc),m.b("components.defaultLoader",m.g.ub),m.g.loaders.push(m.g.ub),m.g.Ub=j}(),function(){function a(a,c){var d=a.getAttribute("params");if(d){var d=b.parseBindingsString(d,c,a,{valueAccessors:!0,bindingParams:!0}),d=m.a.na(d,function(b){return m.s(b,null,{o:a})}),e=m.a.na(d,function(b){return b.Z()?m.s(function(){return m.a.c(b())},null,{o:a}):b.v()});return e.hasOwnProperty("$raw")||(e.$raw=d),e}return{$raw:{}}}m.g.getComponentNameForNode=function(a){return a=m.a.t(a),m.g.Qa(a)&&a},m.g.mb=function(b,c,d,e){if(1===c.nodeType){var f=m.g.getComponentNameForNode(c);if(f){if(b=b||{},b.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var g={name:f,params:a(c,d)};b.component=e?function(){return g}:g}}return b};var b=new m.J;9>m.a.L&&(m.g.register=function(a){return function(b){return e.createElement(b),a.apply(this,arguments)}}(m.g.register),e.createDocumentFragment=function(a){return function(){var b,c=a(),d=m.g.Ub;for(b in d)d.hasOwnProperty(b)&&c.createElement(b);return c}}(e.createDocumentFragment))}(),function(){var a=0;m.d.component={init:function(b,c,d,e,f){function g(){var a=h&&h.dispose;"function"==typeof a&&a.call(h),i=null}var h,i;return m.a.w.da(b,g),m.s(function(){var d,e,j=m.a.c(c());if("string"==typeof j?d=j:(d=m.a.c(j.name),e=m.a.c(j.params)),!d)throw Error("No component name specified");var k=i=++a;m.g.get(d,function(a){if(i===k){if(g(),!a)throw Error("Unknown component '"+d+"'");var c=a.template;if(!c)throw Error("Component '"+d+"' has no template");c=m.a.ia(c),m.f.T(b,c);var c=e,j=a.createViewModel;a=j?j.call(a,c,{element:b}):c,c=f.createChildContext(a),h=a,m.Ca(c,b)}})},null,{o:b}),{controlsDescendantBindings:!0}}},m.f.Q.component=!0}();var s={class:"className",for:"htmlFor"};m.d.attr={update:function(b,c){var d=m.a.c(c())||{};m.a.G(d,function(c,d){d=m.a.c(d);var e=!1===d||null===d||d===a;e&&b.removeAttribute(c),8>=m.a.L&&c in s?(c=s[c],e?b.removeAttribute(c):b[c]=d):e||b.setAttribute(c,d.toString()),"name"===c&&m.a.Mb(b,e?"":d.toString())})}},function(){m.d.checked={after:["value","attr"],init:function(b,c,d){function e(){var a=b.checked,e=l?g():a;if(!m.Y.ma()&&(!i||a)){var f=m.k.B(c);j?k!==e?(a&&(m.a.ea(f,e,!0),m.a.ea(f,k,!1)),k=e):m.a.ea(f,e,a):m.h.pa(f,d,"checked",e,!0)}}function f(){var a=m.a.c(c());b.checked=j?0<=m.a.m(a,g()):h?a:g()===a}var g=m.Ib(function(){return d.has("checkedValue")?m.a.c(d.get("checkedValue")):d.has("value")?m.a.c(d.get("value")):b.value}),h="checkbox"==b.type,i="radio"==b.type;if(h||i){var j=h&&m.a.c(c())instanceof Array,k=j?g():a,l=i||j;i&&!b.name&&m.d.uniqueName.init(b,function(){return!0}),m.s(e,null,{o:b}),m.a.n(b,"click",e),m.s(f,null,{o:b})}}},m.h.V.checked=!0,m.d.checkedValue={update:function(a,b){a.value=m.a.c(b())}}}(),m.d.css={update:function(a,b){var c=m.a.c(b());"object"==typeof c?m.a.G(c,function(b,c){c=m.a.c(c),m.a.Ba(a,b,c)}):(c=String(c||""),m.a.Ba(a,a.__ko__cssValue,!1),a.__ko__cssValue=c,m.a.Ba(a,c,!0))}},m.d.enable={update:function(a,b){var c=m.a.c(b());c&&a.disabled?a.removeAttribute("disabled"):c||a.disabled||(a.disabled=!0)}},m.d.disable={update:function(a,b){m.d.enable.update(a,function(){return!m.a.c(b())})}},m.d.event={init:function(a,b,c,d,e){var f=b()||{};m.a.G(f,function(f){"string"==typeof f&&m.a.n(a,f,function(a){var g,h=b()[f];if(h){try{var i=m.a.S(arguments);d=e.$data,i.unshift(d),g=h.apply(d,i)}finally{!0!==g&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}!1===c.get(f+"Bubble")&&(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())}})})}},m.d.foreach={Eb:function(a){return function(){var b=a(),c=m.a.Xa(b);return c&&"number"!=typeof c.length?(m.a.c(b),{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:m.O.Oa}):{foreach:b,templateEngine:m.O.Oa}}},init:function(a,b){return m.d.template.init(a,m.d.foreach.Eb(b))},update:function(a,b,c,d,e){return m.d.template.update(a,m.d.foreach.Eb(b),c,d,e)}},m.h.ha.foreach=!1,m.f.Q.foreach=!0,m.d.hasfocus={init:function(a,b,c){function d(d){a.__ko_hasfocusUpdating=!0;var e=a.ownerDocument;if("activeElement"in e){var f;try{f=e.activeElement}catch(a){f=e.body}d=f===a}e=b(),m.h.pa(e,c,"hasfocus",d,!0),a.__ko_hasfocusLastValue=d,a.__ko_hasfocusUpdating=!1}var e=d.bind(null,!0),f=d.bind(null,!1);m.a.n(a,"focus",e),m.a.n(a,"focusin",e),m.a.n(a,"blur",f),m.a.n(a,"focusout",f)},update:function(a,b){var c=!!m.a.c(b());a.__ko_hasfocusUpdating||a.__ko_hasfocusLastValue===c||(c?a.focus():a.blur(),m.k.B(m.a.oa,null,[a,c?"focusin":"focusout"]))}},m.h.V.hasfocus=!0,m.d.hasFocus=m.d.hasfocus,m.h.V.hasFocus=!0,m.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){m.a.$a(a,b())}},l("if"),l("ifnot",!1,!0),l("with",!0,!1,function(a,b){return a.createChildContext(b)});var t={};m.d.options={init:function(a){if("select"!==m.a.t(a))throw Error("options binding applies only to SELECT elements");for(;0<a.length;)a.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return m.a.ta(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function g(a,c){if(l.length){var d=0<=m.a.m(l,m.i.q(c[0]));m.a.Nb(c[0],d),n&&!d&&m.k.B(m.a.oa,null,[b,"change"])}}var h=0!=b.length&&b.multiple?b.scrollTop:null,i=m.a.c(c()),j=d.get("optionsIncludeDestroyed");c={};var k,l;l=b.multiple?m.a.Da(e(),m.i.q):0<=b.selectedIndex?[m.i.q(b.options[b.selectedIndex])]:[],i&&("undefined"==typeof i.length&&(i=[i]),k=m.a.ta(i,function(b){return j||b===a||null===b||!m.a.c(b._destroy)}),d.has("optionsCaption")&&(i=m.a.c(d.get("optionsCaption")),null!==i&&i!==a&&k.unshift(t)));var n=!1;c.beforeRemove=function(a){b.removeChild(a)},i=g,d.has("optionsAfterRender")&&(i=function(b,c){g(0,c),m.k.B(d.get("optionsAfterRender"),null,[c[0],b!==t?b:a])}),m.a.Za(b,k,function(c,e,g){return g.length&&(l=g[0].selected?[m.i.q(g[0])]:[],n=!0),e=b.ownerDocument.createElement("option"),c===t?(m.a.bb(e,d.get("optionsCaption")),m.i.ca(e,a)):(g=f(c,d.get("optionsValue"),c),m.i.ca(e,m.a.c(g)),c=f(c,d.get("optionsText"),g),m.a.bb(e,c)),[e]},c,i),m.k.B(function(){d.get("valueAllowUnset")&&d.has("value")?m.i.ca(b,m.a.c(d.get("value")),!0):(b.multiple?l.length&&e().length<l.length:l.length&&0<=b.selectedIndex?m.i.q(b.options[b.selectedIndex])!==l[0]:l.length||0<=b.selectedIndex)&&m.a.oa(b,"change")}),m.a.dc(b),h&&20<Math.abs(h-b.scrollTop)&&(b.scrollTop=h)}},m.d.options.Va=m.a.e.F(),m.d.selectedOptions={after:["options","foreach"],init:function(a,b,c){m.a.n(a,"change",function(){var d=b(),e=[];m.a.u(a.getElementsByTagName("option"),function(a){a.selected&&e.push(m.i.q(a))}),m.h.pa(d,c,"selectedOptions",e)})},update:function(a,b){if("select"!=m.a.t(a))throw Error("values binding applies only to SELECT elements");var c=m.a.c(b());c&&"number"==typeof c.length&&m.a.u(a.getElementsByTagName("option"),function(a){var b=0<=m.a.m(c,m.i.q(a));m.a.Nb(a,b)})}},m.h.V.selectedOptions=!0,m.d.style={update:function(b,c){var d=m.a.c(c()||{});m.a.G(d,function(c,d){d=m.a.c(d),(null===d||d===a||!1===d)&&(d=""),b.style[c]=d})}},m.d.submit={init:function(a,b,c,d,e){if("function"!=typeof b())throw Error("The value for a submit binding must be a function");m.a.n(a,"submit",function(c){var d,f=b();try{d=f.call(e.$data,a)}finally{!0!==d&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}},m.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){m.a.bb(a,b())}},m.f.Q.text=!0,function(){if(d&&d.navigator)var b=function(a){return a?parseFloat(a[1]):void 0},c=d.opera&&d.opera.version&&parseInt(d.opera.version()),e=d.navigator.userAgent,f=b(e.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),g=b(e.match(/Firefox\/([^ ]*)/));if(10>m.a.L)var h=m.a.e.F(),i=m.a.e.F(),j=function(a){var b=this.activeElement;(b=b&&m.a.e.get(b,i))&&b(a)},k=function(a,b){var c=a.ownerDocument;m.a.e.get(c,h)||(m.a.e.set(c,h,!0),m.a.n(c,"selectionchange",j)),m.a.e.set(a,i,b)};m.d.textInput={init:function(b,d,e){function h(a,c){m.a.n(b,a,c)}function i(){var c=m.a.c(d());(null===c||c===a)&&(c=""),o!==a&&c===o?setTimeout(i,4):b.value!==c&&(p=c,b.value=c)}function j(){n||(o=b.value,n=setTimeout(l,4))}function l(){clearTimeout(n),o=n=a;var c=b.value;p!==c&&(p=c,m.h.pa(d(),e,"textInput",c))}var n,o,p=b.value;10>m.a.L?(h("propertychange",function(a){"value"===a.propertyName&&l()}),8==m.a.L&&(h("keyup",l),h("keydown",l)),8<=m.a.L&&(k(b,l),h("dragend",j))):(h("input",l),5>f&&"textarea"===m.a.t(b)?(h("keydown",j),h("paste",j),h("cut",j)):11>c?h("keydown",j):4>g&&(h("DOMAutoComplete",l),h("dragdrop",l),h("drop",l))),h("change",l),m.s(i,null,{o:b})}},m.h.V.textInput=!0,m.d.textinput={preprocess:function(a,b,c){c("textInput",a)}}}(),m.d.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++m.d.uniqueName.Zb;m.a.Mb(a,c)}}},m.d.uniqueName.Zb=0,m.d.value={after:["options","foreach"],init:function(a,b,c){if("input"!=a.tagName.toLowerCase()||"checkbox"!=a.type&&"radio"!=a.type){var d=["change"],e=c.get("valueUpdate"),f=!1,g=null;e&&("string"==typeof e&&(e=[e]),m.a.ga(d,e),d=m.a.rb(d));var h=function(){g=null,f=!1;var d=b(),e=m.i.q(a);m.h.pa(d,c,"value",e)};!m.a.L||"input"!=a.tagName.toLowerCase()||"text"!=a.type||"off"==a.autocomplete||a.form&&"off"==a.form.autocomplete||-1!=m.a.m(d,"propertychange")||(m.a.n(a,"propertychange",function(){f=!0}),m.a.n(a,"focus",function(){f=!1}),m.a.n(a,"blur",function(){f&&h()})),m.a.u(d,function(b){var c=h;m.a.vc(b,"after")&&(c=function(){g=m.i.q(a),setTimeout(h,0)},b=b.substring(5)),m.a.n(a,b,c)});var i=function(){var d=m.a.c(b()),e=m.i.q(a);if(null!==g&&d===g)setTimeout(i,0);else if(d!==e)if("select"===m.a.t(a)){var f=c.get("valueAllowUnset"),e=function(){m.i.ca(a,d,f)};e(),f||d===m.i.q(a)?setTimeout(e,0):m.k.B(m.a.oa,null,[a,"change"])}else m.i.ca(a,d)};m.s(i,null,{o:a})}else m.ra(a,{checkedValue:b})},update:function(){}},m.h.V.value=!0,m.d.visible={update:function(a,b){var c=m.a.c(b()),d="none"!=a.style.display;c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}},function(a){m.d[a]={init:function(b,c,d,e,f){return m.d.event.init.call(this,b,function(){var b={};return b[a]=c(),b},d,e,f)}}}("click"),m.H=function(){},m.H.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},m.H.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},m.H.prototype.makeTemplateSource=function(a,b){if("string"==typeof a){b=b||e;var c=b.getElementById(a);if(!c)throw Error("Cannot find template with ID "+a);return new m.r.l(c)}if(1==a.nodeType||8==a.nodeType)return new m.r.fa(a);throw Error("Unknown template type: "+a)},m.H.prototype.renderTemplate=function(a,b,c,d){return a=this.makeTemplateSource(a,d),this.renderTemplateSource(a,b,c)},m.H.prototype.isTemplateRewritten=function(a,b){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,b).data("isRewritten")},m.H.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c),b=b(a.text()),a.text(b),a.data("isRewritten",!0)},m.b("templateEngine",m.H),m.fb=function(){function a(a,b,c,d){a=m.h.Wa(a);for(var e=m.h.ha,f=0;f<a.length;f++){var g=a[f].key;if(e.hasOwnProperty(g)){var h=e[g];if("function"==typeof h){if(g=h(a[f].value))throw Error(g)}else if(!h)throw Error("This template engine does not support the '"+g+"' binding within its templates")}}return c="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+m.h.ya(a,{valueAccessors:!0})+" } })()},'"+c.toLowerCase()+"')",d.createJavaScriptEvaluatorBlock(c)+b}var b=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,c=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{ec:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return m.fb.nc(a,b)},c)},nc:function(d,e){return d.replace(b,function(b,c,d,f,g){return a(g,c,d,e)}).replace(c,function(b,c){return a(c,"\x3c!-- ko --\x3e","#comment",e)})},Xb:function(a,b){return m.D.Ua(function(c,d){var e=c.nextSibling;e&&e.nodeName.toLowerCase()===b&&m.ra(e,a,d)})}}}(),m.b("__tr_ambtns",m.fb.Xb),function(){m.r={},m.r.l=function(a){this.l=a},m.r.l.prototype.text=function(){var a=m.a.t(this.l),a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.l[a];var b=arguments[0];"innerHTML"===a?m.a.$a(this.l,b):this.l[a]=b};var b=m.a.e.F()+"_";m.r.l.prototype.data=function(a){return 1===arguments.length?m.a.e.get(this.l,b+a):(m.a.e.set(this.l,b+a,arguments[1]),void 0)};var c=m.a.e.F();m.r.fa=function(a){this.l=a},m.r.fa.prototype=new m.r.l,m.r.fa.prototype.text=function(){if(0==arguments.length){var b=m.a.e.get(this.l,c)||{};return b.gb===a&&b.Ga&&(b.gb=b.Ga.innerHTML),b.gb}m.a.e.set(this.l,c,{gb:arguments[0]})},m.r.l.prototype.nodes=function(){return 0==arguments.length?(m.a.e.get(this.l,c)||{}).Ga:(m.a.e.set(this.l,c,{Ga:arguments[0]}),void 0)},m.b("templateSources",m.r),m.b("templateSources.domElement",m.r.l),m.b("templateSources.anonymousTemplate",m.r.fa)}(),function(){function b(a,b,c){var d;for(b=m.f.nextSibling(b);a&&(d=a)!==b;)a=m.f.nextSibling(d),c(d,a)}function c(a,c){if(a.length){var d=a[0],e=a[a.length-1],f=d.parentNode,g=m.J.instance,h=g.preprocessNode;if(h){if(b(d,e,function(a,b){var c=a.previousSibling,f=h.call(g,a);f&&(a===d&&(d=f[0]||b),a===e&&(e=f[f.length-1]||c))}),a.length=0,!d)return;d===e?a.push(d):(a.push(d,e),m.a.ka(a,f))}b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||m.pb(c,a)}),b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||m.D.Sb(a,[c])}),m.a.ka(a,f)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(a,b,e,g,h){h=h||{};var i=a&&d(a),i=i&&i.ownerDocument,j=h.templateEngine||f;if(m.fb.ec(e,j,i),e=j.renderTemplate(e,g,h,i),"number"!=typeof e.length||0<e.length&&"number"!=typeof e[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(i=!1,b){case"replaceChildren":m.f.T(a,e),i=!0;break;case"replaceNode":m.a.Lb(a,e),i=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+b)}return i&&(c(e,g),h.afterRender&&m.k.B(h.afterRender,null,[e,g.$data])),e}var f;m.ab=function(b){if(b!=a&&!(b instanceof m.H))throw Error("templateEngine must inherit from ko.templateEngine");f=b},m.Ya=function(b,c,g,h,i){if(g=g||{},(g.templateEngine||f)==a)throw Error("Set a template engine before calling renderTemplate");if(i=i||"replaceChildren",h){var j=d(h);return m.j(function(){var a=c&&c instanceof m.N?c:new m.N(m.a.c(c)),f=m.C(b)?b():"function"==typeof b?b(a.$data,a):b,a=e(h,i,f,a,g);"replaceNode"==i&&(h=a,j=d(h))},null,{Ia:function(){return!j||!m.a.Ja(j)},o:j&&"replaceNode"==i?j.parentNode:j})}return m.D.Ua(function(a){m.Ya(b,c,g,a,"replaceNode")})},m.uc=function(b,d,f,g,h){function i(a,b){c(b,k),f.afterRender&&f.afterRender(b,a)}function j(a,c){k=h.createChildContext(a,f.as,function(a){a.$index=c});var d=m.C(b)?b():"function"==typeof b?b(a,k):b;return e(null,"ignoreTargetNode",d,k,f)}var k;return m.j(function(){var b=m.a.c(d)||[];"undefined"==typeof b.length&&(b=[b]),b=m.a.ta(b,function(b){return f.includeDestroyed||b===a||null===b||!m.a.c(b._destroy)}),m.k.B(m.a.Za,null,[g,b,j,f,i])},null,{o:g})};var g=m.a.e.F();m.d.template={init:function(a,b){var c=m.a.c(b());return"string"==typeof c||c.name?m.f.ja(a):(c=m.f.childNodes(a),c=m.a.oc(c),new m.r.fa(a).nodes(c)),{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var h,i=c();c=m.a.c(i),d=!0,e=null,"string"==typeof c?c={}:(i=c.name,"if"in c&&(d=m.a.c(c["if"])),d&&"ifnot"in c&&(d=!m.a.c(c.ifnot)),h=m.a.c(c.data)),"foreach"in c?e=m.uc(i||b,d&&c.foreach||[],c,b,f):d?(f="data"in c?f.createChildContext(h,c.as):f,e=m.Ya(i||b,f,c,b)):m.f.ja(b),f=e,(h=m.a.e.get(b,g))&&"function"==typeof h.K&&h.K(),m.a.e.set(b,g,f&&f.Z()?f:a)}},m.h.ha.template=function(a){return a=m.h.Wa(a),1==a.length&&a[0].unknown||m.h.lc(a,"name")?null:"This template engine does not support anonymous templates nested within its templates"},m.f.Q.template=!0}(),m.b("setTemplateEngine",m.ab),m.b("renderTemplate",m.Ya),m.a.wb=function(a,b,c){if(a.length&&b.length){var d,e,f,g,h;for(d=e=0;(!c||c>d)&&(g=a[e]);++e){for(f=0;h=b[f];++f)if(g.value===h.value){g.moved=h.index,h.moved=g.index,b.splice(f,1),d=f=0;break}d+=f}}},m.a.Fa=function(){function a(a,b,c,d,e){var f,g,h,i,j,k=Math.min,l=Math.max,n=[],o=a.length,p=b.length,q=p-o||1,r=o+p+1;for(f=0;o>=f;f++)for(i=h,n.push(h=[]),j=k(p,f+q),g=l(0,f-1);j>=g;g++)h[g]=g?f?a[f-1]===b[g-1]?i[g-1]:k(i[g]||r,h[g-1]||r)+1:g+1:f+1;for(k=[],l=[],q=[],f=o,g=p;f||g;)p=n[f][g]-1,g&&p===n[f][g-1]?l.push(k[k.length]={status:c,value:b[--g],index:g}):f&&p===n[f-1][g]?q.push(k[k.length]={status:d,value:a[--f],index:f}):(--g,--f,e.sparse||k.push({status:"retained",value:b[g]}));return m.a.wb(l,q,10*o),k.reverse()}return function(b,c,d){return d="boolean"==typeof d?{dontLimitMoves:d}:d||{},b=b||[],c=c||[],b.length<=c.length?a(b,c,"added","deleted",d):a(c,b,"deleted","added",d)}}(),m.b("utils.compareArrays",m.a.Fa),function(){function b(b,c,d,e,f){var g=[],h=m.j(function(){var a=c(d,f,m.a.ka(g,b))||[];0<g.length&&(m.a.Lb(g,a),e&&m.k.B(e,null,[d,a,f])),g.length=0,m.a.ga(g,a)},null,{o:b,Ia:function(){return!m.a.ob(g)}});return{$:g,j:h.Z()?h:a}}var c=m.a.e.F();m.a.Za=function(d,e,f,g,h){function i(a,b){u=l[b],r!==b&&(x[a]=u),u.Na(r++),m.a.ka(u.$,d),p.push(u),t.push(u)}function j(a,b){if(a)for(var c=0,d=b.length;d>c;c++)b[c]&&m.a.u(b[c].$,function(d){a(d,c,b[c].sa)})}e=e||[],g=g||{};var k=m.a.e.get(d,c)===a,l=m.a.e.get(d,c)||[],n=m.a.Da(l,function(a){return a.sa
}),o=m.a.Fa(n,e,g.dontLimitMoves),p=[],q=0,r=0,s=[],t=[];e=[];for(var u,v,w,x=[],n=[],y=0;v=o[y];y++)switch(w=v.moved,v.status){case"deleted":w===a&&(u=l[q],u.j&&u.j.K(),s.push.apply(s,m.a.ka(u.$,d)),g.beforeRemove&&(e[y]=u,t.push(u))),q++;break;case"retained":i(y,q++);break;case"added":w!==a?i(y,w):(u={sa:v.value,Na:m.p(r++)},p.push(u),t.push(u),k||(n[y]=u))}j(g.beforeMove,x),m.a.u(s,g.beforeRemove?m.R:m.removeNode);for(var z,y=0,k=m.f.firstChild(d);u=t[y];y++){for(u.$||m.a.extend(u,b(d,f,u.sa,h,u.Na)),q=0;o=u.$[q];k=o.nextSibling,z=o,q++)o!==k&&m.f.Bb(d,o,z);!u.ic&&h&&(h(u.sa,u.$,u.Na),u.ic=!0)}j(g.beforeRemove,e),j(g.afterMove,x),j(g.afterAdd,n),m.a.e.set(d,c,p)}}(),m.b("utils.setDomNodeChildrenFromArrayMapping",m.a.Za),m.O=function(){this.allowTemplateRewriting=!1},m.O.prototype=new m.H,m.O.prototype.renderTemplateSource=function(a){var b=(9>m.a.L?0:a.nodes)?a.nodes():null;return b?m.a.S(b.cloneNode(!0).childNodes):(a=a.text(),m.a.ba(a))},m.O.Oa=new m.O,m.ab(m.O.Oa),m.b("nativeTemplateEngine",m.O),function(){m.Sa=function(){var a=this.kc=function(){if(!g||!g.tmpl)return 0;try{if(0<=g.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,c,d){if(d=d||{},2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var f=b.data("precompiled");return f||(f=b.text()||"",f=g.template(null,"{{ko_with $item.koBindingContext}}"+f+"{{/ko_with}}"),b.data("precompiled",f)),b=[c.$data],c=g.extend({koBindingContext:c},d.templateOptions),c=g.tmpl(f,b,c),c.appendTo(e.createElement("div")),g.fragments={},c},this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"},this.addTemplate=function(a,b){e.write("<script type='text/html' id='"+a+"'>"+b+"<\/script>")},a>0&&(g.tmpl.tag.ko_code={open:"__.push($1 || '');"},g.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},m.Sa.prototype=new m.H;var a=new m.Sa;0<a.kc&&m.ab(a),m.b("jqueryTmplTemplateEngine",m.Sa)}()})}()}(),c("ThirdParty/knockout-es5",[],function(){"use strict";function a(a,c){if(!a)throw new Error("When calling ko.track, you must pass an object as the first parameter.");var e=this,f=b(a,!0);return c=c||Object.getOwnPropertyNames(a),c.forEach(function(b){if(b!==l&&b!==m&&!(b in f)){var c=a[b],g=c instanceof Array,h=e.isObservable(c)?c:g?e.observableArray(c):e.observable(c);Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:h,set:e.isWriteableObservable(h)?h:void 0}),f[b]=h,g&&d(e,h)}}),a}function b(a,b){var c=a[l];return!c&&b&&(c={},Object.defineProperty(a,l,{value:c})),c}function c(b,c,d){var e=this,f={owner:b,deferEvaluation:!0};if("function"==typeof d)f.read=d;else{if("value"in d)throw new Error('For ko.defineProperty, you must not specify a "value" for the property. You must provide a "get" function.');if("function"!=typeof d.get)throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".');f.read=d.get,f.write=d.set}return b[c]=e.computed(f),a.call(e,b,[c]),b}function d(a,b){var c=null;a.computed(function(){c&&(c.dispose(),c=null);var d=b();d instanceof Array&&(c=e(a,b,d))})}function e(a,b,c){var d=f(a,c);return d.subscribe(b)}function f(a,b){var c=b[m];if(!c){c=new a.subscribable,Object.defineProperty(b,m,{value:c});var d={};g(b,c,d),h(a,b,c,d)}return c}function g(a,b,c){["pop","push","reverse","shift","sort","splice","unshift"].forEach(function(d){var e=a[d];a[d]=function(){var a=e.apply(this,arguments);return c.pause!==!0&&b.notifySubscribers(this),a}})}function h(a,b,c,d){["remove","removeAll","destroy","destroyAll","replace"].forEach(function(e){Object.defineProperty(b,e,{enumerable:!1,value:function(){var f;d.pause=!0;try{f=a.observableArray.fn[e].apply(a.observableArray(b),arguments)}finally{d.pause=!1}return c.notifySubscribers(b),f}})})}function i(a,c){if(!a)return null;var d=b(a,!1);return d&&d[c]||null}function j(a,b){var c=i(a,b);c&&c.valueHasMutated()}function k(b){b.track=a,b.getObservable=i,b.valueHasMutated=j,b.defineProperty=c}var l="__knockoutObservables",m="__knockoutSubscribable";return{attachToKo:k}}),c("Widgets/SvgPathBindingHandler",[],function(){"use strict";var a="http://www.w3.org/2000/svg",b="cesium-svgPath-svg",c={register:function(c){c.bindingHandlers.cesiumSvgPath={init:function(d,e){var f=document.createElementNS(a,"svg:svg");f.setAttribute("class",b);var g=document.createElementNS(a,"path");return f.appendChild(g),c.virtualElements.setDomNodeChildren(d,[f]),c.computed({read:function(){var a=c.unwrap(e());g.setAttribute("d",c.unwrap(a.path));var d=c.unwrap(a.width),h=c.unwrap(a.height);f.setAttribute("width",d),f.setAttribute("height",h),f.setAttribute("viewBox","0 0 "+d+" "+h),a.css&&f.setAttribute("class",b+" "+c.unwrap(a.css))},disposeWhenNodeIsRemoved:d}),{controlsDescendantBindings:!0}}},c.virtualElements.allowedBindings.cesiumSvgPath=!0}};return c}),c("ThirdParty/knockout",["./knockout-3.2.0","./knockout-es5","../Widgets/SvgPathBindingHandler"],function(a,b,c){"use strict";return b.attachToKo(a),c.register(a),a}),c("Widgets/subscribeAndEvaluate",["../ThirdParty/knockout"],function(a){"use strict";var b=function(b,c,d,e,f){return d.call(e,b[c]),a.getObservable(b,c).subscribe(d,e,f)};return b}),c("Widgets/Animation/Animation",["../../Core/Color","../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../getElement","../subscribeAndEvaluate"],function(a,b,c,d,e,f,g){"use strict";function h(b){return a.fromCssColorString(window.getComputedStyle(b).getPropertyValue("color"))}function i(a){var b=document.createElementNS(q,a.tagName);for(var c in a)if(a.hasOwnProperty(c)&&"tagName"!==c)if("children"===c){var d,e=a.children.length;for(d=0;e>d;++d)b.appendChild(i(a.children[d]))}else 0===c.indexOf("xlink:")?b.setAttributeNS(r,c.substring(6),a[c]):"textContent"===c?b.textContent=a[c]:b.setAttribute(c,a[c]);return b}function j(a,b,c){var d=document.createElementNS(q,"text");d.setAttribute("x",a),d.setAttribute("y",b),d.setAttribute("class","cesium-animation-svgText");var e=document.createElementNS(q,"tspan");return e.textContent=c,d.appendChild(e),d}function k(a,b,c){a.setAttribute("transform","translate(100,100) rotate("+c+")"),b.setAttribute("transform","rotate("+c+")")}function l(a,b){var c=b.alpha,d=1-c;return A.red=a.red*d+b.red*c,A.green=a.green*d+b.green*c,A.blue=a.blue*d+b.blue*c,A.toCssColorString()}function m(a,b,c){var d={tagName:"g",class:"cesium-animation-rectButton",transform:"translate("+a+","+b+")",children:[{tagName:"rect",class:"cesium-animation-buttonGlow",width:32,height:32,rx:2,ry:2},{tagName:"rect",class:"cesium-animation-buttonMain",width:32,height:32,rx:4,ry:4},{tagName:"use",class:"cesium-animation-buttonPath","xlink:href":c},{tagName:"title",textContent:""}]};return i(d)}function n(a,b,c){var d={tagName:"g",class:"cesium-animation-rectButton",transform:"translate("+a+","+b+")",children:[{tagName:"use",class:"cesium-animation-buttonGlow","xlink:href":"#animation_pathWingButton"},{tagName:"use",class:"cesium-animation-buttonMain","xlink:href":"#animation_pathWingButton"},{tagName:"use",class:"cesium-animation-buttonPath","xlink:href":c},{tagName:"title",textContent:""}]};return i(d)}function o(a,b){var c=a._viewModel,d=c.shuttleRingDragging;if(!d||p===a)if("mousedown"===b.type||d&&"mousemove"===b.type||"touchstart"===b.type&&1===b.touches.length||d&&"touchmove"===b.type&&1===b.touches.length){var e,f,g=a._centerX,h=a._centerY,i=a._svgNode,j=i.getBoundingClientRect();if("touchstart"===b.type||"touchmove"===b.type?(e=b.touches[0].clientX,f=b.touches[0].clientY):(e=b.clientX,f=b.clientY),!d&&(e>j.right||e<j.left||f<j.top||f>j.bottom))return;var k=a._shuttleRingPointer.getBoundingClientRect(),l=e-g-j.left,m=f-h-j.top,n=180*Math.atan2(m,l)/Math.PI+90;n>180&&(n-=360);var o=c.shuttleRingAngle;d||e<k.right&&e>k.left&&f>k.top&&f<k.bottom?(p=a,c.shuttleRingDragging=!0,c.shuttleRingAngle=n):o>n?c.slower():n>o&&c.faster(),b.preventDefault()}else a===p&&(p=void 0),c.shuttleRingDragging=!1}var p,q="http://www.w3.org/2000/svg",r="http://www.w3.org/1999/xlink",s=a.fromCssColorString("rgba(247,250,255,0.384)"),t=a.fromCssColorString("rgba(143,191,255,0.216)"),u=a.fromCssColorString("rgba(153,197,255,0.098)"),v=a.fromCssColorString("rgba(255,255,255,0.086)"),w=a.fromCssColorString("rgba(255,255,255,0.267)"),x=a.fromCssColorString("rgba(255,255,255,0)"),y=a.fromCssColorString("rgba(66,67,68,0.3)"),z=a.fromCssColorString("rgba(0,0,0,0.5)"),A=new a,B=function(a,b){this._viewModel=b,this.svgElement=a,this._enabled=void 0,this._toggled=void 0;var c=this;this._clickFunction=function(){var a=c._viewModel.command;a.canExecute&&a()},a.addEventListener("click",this._clickFunction,!0),this._subscriptions=[g(b,"toggled",this.setToggled,this),g(b,"tooltip",this.setTooltip,this),g(b.command,"canExecute",this.setEnabled,this)]};B.prototype.destroy=function(){this.svgElement.removeEventListener("click",this._clickFunction,!0);for(var a=this._subscriptions,b=0,c=a.length;c>b;b++)a[b].dispose();d(this)},B.prototype.isDestroyed=function(){return!1},B.prototype.setEnabled=function(a){if(this._enabled!==a){if(this._enabled=a,!a)return this.svgElement.setAttribute("class","cesium-animation-buttonDisabled"),void 0;if(this._toggled)return this.svgElement.setAttribute("class","cesium-animation-rectButton cesium-animation-buttonToggled"),void 0;this.svgElement.setAttribute("class","cesium-animation-rectButton")}},B.prototype.setToggled=function(a){this._toggled!==a&&(this._toggled=a,this._enabled&&(a?this.svgElement.setAttribute("class","cesium-animation-rectButton cesium-animation-buttonToggled"):this.svgElement.setAttribute("class","cesium-animation-rectButton")))},B.prototype.setTooltip=function(a){this.svgElement.getElementsByTagName("title")[0].textContent=a};var C=function(a,b){a=f(a),this._viewModel=b,this._container=a,this._centerX=0,this._centerY=0,this._defsElement=void 0,this._svgNode=void 0,this._topG=void 0,this._lastHeight=void 0,this._lastWidth=void 0;var c=document.createElement("style");c.textContent=".cesium-animation-rectButton .cesium-animation-buttonGlow { filter: url(#animation_blurred); }.cesium-animation-rectButton .cesium-animation-buttonMain { fill: url(#animation_buttonNormal); }.cesium-animation-buttonToggled .cesium-animation-buttonMain { fill: url(#animation_buttonToggled); }.cesium-animation-rectButton:hover .cesium-animation-buttonMain { fill: url(#animation_buttonHovered); }.cesium-animation-buttonDisabled .cesium-animation-buttonMain { fill: url(#animation_buttonDisabled); }.cesium-animation-shuttleRingG .cesium-animation-shuttleRingSwoosh { fill: url(#animation_shuttleRingSwooshGradient); }.cesium-animation-shuttleRingG:hover .cesium-animation-shuttleRingSwoosh { fill: url(#animation_shuttleRingSwooshHovered); }.cesium-animation-shuttleRingPointer { fill: url(#animation_shuttleRingPointerGradient); }.cesium-animation-shuttleRingPausePointer { fill: url(#animation_shuttleRingPointerPaused); }.cesium-animation-knobOuter { fill: url(#animation_knobOuter); }.cesium-animation-knobInner { fill: url(#animation_knobInner); }",document.head.insertBefore(c,document.head.childNodes[0]);var d=document.createElement("div");d.className="cesium-animation-theme",d.innerHTML='<div class="cesium-animation-themeNormal"></div><div class="cesium-animation-themeHover"></div><div class="cesium-animation-themeSelect"></div><div class="cesium-animation-themeDisabled"></div><div class="cesium-animation-themeKnob"></div><div class="cesium-animation-themePointer"></div><div class="cesium-animation-themeSwoosh"></div><div class="cesium-animation-themeSwooshHover"></div>',this._theme=d,this._themeNormal=d.childNodes[0],this._themeHover=d.childNodes[1],this._themeSelect=d.childNodes[2],this._themeDisabled=d.childNodes[3],this._themeKnob=d.childNodes[4],this._themePointer=d.childNodes[5],this._themeSwoosh=d.childNodes[6],this._themeSwooshHover=d.childNodes[7];var e=document.createElementNS(q,"svg:svg");this._svgNode=e,e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",r);var h=document.createElementNS(q,"g");this._topG=h,this._realtimeSVG=new B(n(3,4,"#animation_pathClock"),b.playRealtimeViewModel),this._playReverseSVG=new B(m(44,99,"#animation_pathPlayReverse"),b.playReverseViewModel),this._playForwardSVG=new B(m(124,99,"#animation_pathPlay"),b.playForwardViewModel),this._pauseSVG=new B(m(84,99,"#animation_pathPause"),b.pauseViewModel);var l=document.createElementNS(q,"g");l.appendChild(this._realtimeSVG.svgElement),l.appendChild(this._playReverseSVG.svgElement),l.appendChild(this._playForwardSVG.svgElement),l.appendChild(this._pauseSVG.svgElement);var p=i({tagName:"circle",class:"cesium-animation-shuttleRingBack",cx:100,cy:100,r:99});this._shuttleRingBackPanel=p;var s=i({tagName:"g",class:"cesium-animation-shuttleRingSwoosh",children:[{tagName:"use",transform:"translate(100,97) scale(-1,1)","xlink:href":"#animation_pathSwooshFX"},{tagName:"use",transform:"translate(100,97)","xlink:href":"#animation_pathSwooshFX"},{tagName:"line",x1:100,y1:8,x2:100,y2:22}]});this._shuttleRingSwooshG=s,this._shuttleRingPointer=i({tagName:"use",class:"cesium-animation-shuttleRingPointer","xlink:href":"#animation_pathPointer"});var t=i({tagName:"g",transform:"translate(100,100)"});this._knobOuter=i({tagName:"circle",class:"cesium-animation-knobOuter",cx:0,cy:0,r:71});var u=61,v=i({tagName:"circle",class:"cesium-animation-knobInner",cx:0,cy:0,r:u});this._knobDate=j(0,-24,""),this._knobTime=j(0,-7,""),this._knobStatus=j(0,-41,"");var w=i({tagName:"circle",class:"cesium-animation-blank",cx:0,cy:0,r:u}),x=document.createElementNS(q,"g");x.setAttribute("class","cesium-animation-shuttleRingG"),a.appendChild(d),h.appendChild(x),h.appendChild(t),h.appendChild(l),x.appendChild(p),x.appendChild(s),x.appendChild(this._shuttleRingPointer),t.appendChild(this._knobOuter),t.appendChild(v),t.appendChild(this._knobDate),t.appendChild(this._knobTime),t.appendChild(this._knobStatus),t.appendChild(w),e.appendChild(h),a.appendChild(e);var y=this,z=function(a){o(y,a)};this._mouseCallback=z,p.addEventListener("mousedown",z,!0),p.addEventListener("touchstart",z,!0),s.addEventListener("mousedown",z,!0),s.addEventListener("touchstart",z,!0),document.addEventListener("mousemove",z,!0),document.addEventListener("touchmove",z,!0),document.addEventListener("mouseup",z,!0),document.addEventListener("touchend",z,!0),this._shuttleRingPointer.addEventListener("mousedown",z,!0),this._shuttleRingPointer.addEventListener("touchstart",z,!0),this._knobOuter.addEventListener("mousedown",z,!0),this._knobOuter.addEventListener("touchstart",z,!0);var A,C=this._knobTime.childNodes[0],D=this._knobDate.childNodes[0],E=this._knobStatus.childNodes[0];this._subscriptions=[g(b.pauseViewModel,"toggled",function(a){A!==a&&(A=a,A?y._shuttleRingPointer.setAttribute("class","cesium-animation-shuttleRingPausePointer"):y._shuttleRingPointer.setAttribute("class","cesium-animation-shuttleRingPointer"))}),g(b,"shuttleRingAngle",function(a){k(y._shuttleRingPointer,y._knobOuter,a)}),g(b,"dateLabel",function(a){D.textContent!==a&&(D.textContent=a)}),g(b,"timeLabel",function(a){C.textContent!==a&&(C.textContent=a)}),g(b,"multiplierLabel",function(a){E.textContent!==a&&(E.textContent=a)})],this.applyThemeChanges(),this.resize()};return c(C.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){var a=this._mouseCallback;this._shuttleRingBackPanel.removeEventListener("mousedown",a,!0),this._shuttleRingBackPanel.removeEventListener("touchstart",a,!0),this._shuttleRingSwooshG.removeEventListener("mousedown",a,!0),this._shuttleRingSwooshG.removeEventListener("touchstart",a,!0),document.removeEventListener("mousemove",a,!0),document.removeEventListener("touchmove",a,!0),document.removeEventListener("mouseup",a,!0),document.removeEventListener("touchend",a,!0),this._shuttleRingPointer.removeEventListener("mousedown",a,!0),this._shuttleRingPointer.removeEventListener("touchstart",a,!0),this._knobOuter.removeEventListener("mousedown",a,!0),this._knobOuter.removeEventListener("touchstart",a,!0),this._container.removeChild(this._svgNode),this._container.removeChild(this._theme),this._realtimeSVG.destroy(),this._playReverseSVG.destroy(),this._playForwardSVG.destroy(),this._pauseSVG.destroy();for(var b=this._subscriptions,c=0,e=b.length;e>c;c++)b[c].dispose();return d(this)},C.prototype.resize=function(){var a=this._container.clientWidth,b=this._container.clientHeight;if(a!==this._lastWidth||b!==this._lastHeight){var c=this._svgNode,d=200,e=132,f=a,g=b;0===a&&0===b?(f=d,g=e):0===a?(g=b,f=d*(b/e)):0===b&&(f=a,g=e*(a/d));var h=f/d,i=g/e;c.style.cssText="width: "+f+"px; height: "+g+"px; position: absolute; bottom: 0; left: 0; overflow: hidden;",c.setAttribute("width",f),c.setAttribute("height",g),c.setAttribute("viewBox","0 0 "+f+" "+g),this._topG.setAttribute("transform","scale("+h+","+i+")"),this._centerX=Math.max(1,100*h),this._centerY=Math.max(1,100*i),this._lastHeight=a,this._lastWidth=b}},C.prototype.applyThemeChanges=function(){var a=h(this._themeNormal),c=h(this._themeHover),d=h(this._themeSelect),e=h(this._themeDisabled),f=h(this._themeKnob),g=h(this._themePointer),j=h(this._themeSwoosh),k=h(this._themeSwooshHover),m=i({tagName:"defs",children:[{id:"animation_buttonNormal",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":l(a,s)},{tagName:"stop",offset:"12%","stop-color":l(a,t)},{tagName:"stop",offset:"46%","stop-color":l(a,u)},{tagName:"stop",offset:"81%","stop-color":l(a,v)}]},{id:"animation_buttonHovered",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":l(c,s)},{tagName:"stop",offset:"12%","stop-color":l(c,t)},{tagName:"stop",offset:"46%","stop-color":l(c,u)},{tagName:"stop",offset:"81%","stop-color":l(c,v)}]},{id:"animation_buttonToggled",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":l(d,s)},{tagName:"stop",offset:"12%","stop-color":l(d,t)},{tagName:"stop",offset:"46%","stop-color":l(d,u)},{tagName:"stop",offset:"81%","stop-color":l(d,v)}]},{id:"animation_buttonDisabled",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":l(e,w)},{tagName:"stop",offset:"75%","stop-color":l(e,x)}]},{id:"animation_blurred",tagName:"filter",width:"200%",height:"200%",x:"-50%",y:"-50%",children:[{tagName:"feGaussianBlur",stdDeviation:4,in:"SourceGraphic"}]},{id:"animation_shuttleRingSwooshGradient",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-opacity":.2,"stop-color":j.toCssColorString()},{tagName:"stop",offset:"85%","stop-opacity":.85,"stop-color":j.toCssColorString()},{tagName:"stop",offset:"95%","stop-opacity":.05,"stop-color":j.toCssColorString()}]},{id:"animation_shuttleRingSwooshHovered",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-opacity":.2,"stop-color":k.toCssColorString()},{tagName:"stop",offset:"85%","stop-opacity":.85,"stop-color":k.toCssColorString()},{tagName:"stop",offset:"95%","stop-opacity":.05,"stop-color":k.toCssColorString()}]},{id:"animation_shuttleRingPointerGradient",tagName:"linearGradient",x1:"0%",y1:"50%",x2:"100%",y2:"50%",children:[{tagName:"stop",offset:"0%","stop-color":g.toCssColorString()},{tagName:"stop",offset:"40%","stop-color":g.toCssColorString()},{tagName:"stop",offset:"60%","stop-color":l(g,z)},{tagName:"stop",offset:"100%","stop-color":l(g,z)}]},{id:"animation_shuttleRingPointerPaused",tagName:"linearGradient",x1:"0%",y1:"50%",x2:"100%",y2:"50%",children:[{tagName:"stop",offset:"0%","stop-color":"#CCC"},{tagName:"stop",offset:"40%","stop-color":"#CCC"},{tagName:"stop",offset:"60%","stop-color":"#555"},{tagName:"stop",offset:"100%","stop-color":"#555"}]},{id:"animation_knobOuter",tagName:"linearGradient",x1:"20%",y1:"0%",x2:"90%",y2:"100%",children:[{tagName:"stop",offset:"5%","stop-color":l(f,s)},{tagName:"stop",offset:"60%","stop-color":l(f,y)},{tagName:"stop",offset:"85%","stop-color":l(f,t)}]},{id:"animation_knobInner",tagName:"linearGradient",x1:"20%",y1:"0%",x2:"90%",y2:"100%",children:[{tagName:"stop",offset:"5%","stop-color":l(f,y)},{tagName:"stop",offset:"60%","stop-color":l(f,s)},{tagName:"stop",offset:"85%","stop-color":l(f,v)}]},{id:"animation_pathReset",tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M24.316,5.318,9.833,13.682,9.833,5.5,5.5,5.5,5.5,25.5,9.833,25.5,9.833,17.318,24.316,25.682z"},{id:"animation_pathPause",tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M13,5.5,7.5,5.5,7.5,25.5,13,25.5zM24.5,5.5,19,5.5,19,25.5,24.5,25.5z"},{id:"animation_pathPlay",tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M6.684,25.682L24.316,15.5L6.684,5.318V25.682z"},{id:"animation_pathPlayReverse",tagName:"path",transform:"translate(16,16) scale(-0.85,0.85) translate(-16,-16)",d:"M6.684,25.682L24.316,15.5L6.684,5.318V25.682z"},{id:"animation_pathLoop",tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M24.249,15.499c-0.009,4.832-3.918,8.741-8.75,8.75c-2.515,0-4.768-1.064-6.365-2.763l2.068-1.442l-7.901-3.703l0.744,8.694l2.193-1.529c2.244,2.594,5.562,4.242,9.26,4.242c6.767,0,12.249-5.482,12.249-12.249H24.249zM15.499,6.75c2.516,0,4.769,1.065,6.367,2.764l-2.068,1.443l7.901,3.701l-0.746-8.693l-2.192,1.529c-2.245-2.594-5.562-4.245-9.262-4.245C8.734,3.25,3.25,8.734,3.249,15.499H6.75C6.758,10.668,10.668,6.758,15.499,6.75z"},{id:"animation_pathClock",tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-15.5)",d:"M15.5,2.374C8.251,2.375,2.376,8.251,2.374,15.5C2.376,22.748,8.251,28.623,15.5,28.627c7.249-0.004,13.124-5.879,13.125-13.127C28.624,8.251,22.749,2.375,15.5,2.374zM15.5,25.623C9.909,25.615,5.385,21.09,5.375,15.5C5.385,9.909,9.909,5.384,15.5,5.374c5.59,0.01,10.115,4.535,10.124,10.125C25.615,21.09,21.091,25.615,15.5,25.623zM8.625,15.5c-0.001-0.552-0.448-0.999-1.001-1c-0.553,0-1,0.448-1,1c0,0.553,0.449,1,1,1C8.176,16.5,8.624,16.053,8.625,15.5zM8.179,18.572c-0.478,0.277-0.642,0.889-0.365,1.367c0.275,0.479,0.889,0.641,1.365,0.365c0.479-0.275,0.643-0.887,0.367-1.367C9.27,18.461,8.658,18.297,8.179,18.572zM9.18,10.696c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366c0.479,0.276,1.09,0.113,1.367-0.366C9.821,11.584,9.657,10.973,9.18,10.696zM22.822,12.428c0.478-0.275,0.643-0.888,0.366-1.366c-0.275-0.478-0.89-0.642-1.366-0.366c-0.479,0.278-0.642,0.89-0.366,1.367C21.732,12.54,22.344,12.705,22.822,12.428zM12.062,21.455c-0.478-0.275-1.089-0.111-1.366,0.367c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.277,1.091,0.111,1.365-0.365C12.704,22.344,12.54,21.732,12.062,21.455zM12.062,9.545c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,9.658,11.584,9.822,12.062,9.545zM22.823,18.572c-0.48-0.275-1.092-0.111-1.367,0.365c-0.275,0.479-0.112,1.092,0.367,1.367c0.477,0.275,1.089,0.113,1.365-0.365C23.464,19.461,23.3,18.848,22.823,18.572zM19.938,7.813c-0.477-0.276-1.091-0.111-1.365,0.366c-0.275,0.48-0.111,1.091,0.366,1.367s1.089,0.112,1.366-0.366C20.581,8.702,20.418,8.089,19.938,7.813zM23.378,14.5c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1c0.551,0,1-0.447,1-1C24.378,14.949,23.929,14.5,23.378,14.5zM15.501,6.624c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96c-0.478,0.277-0.642,0.889-0.365,1.365c0.275,0.479,0.889,0.643,1.365,0.367l3.305-1.676C15.39,16.99,15.444,17,15.501,17c0.828,0,1.5-0.671,1.5-1.5l-0.5-7.876C16.501,7.072,16.053,6.624,15.501,6.624zM15.501,22.377c-0.552,0-1,0.447-1,1s0.448,1,1,1s1-0.447,1-1S16.053,22.377,15.501,22.377zM18.939,21.455c-0.479,0.277-0.643,0.889-0.366,1.367c0.275,0.477,0.888,0.643,1.366,0.365c0.478-0.275,0.642-0.889,0.366-1.365C20.028,21.344,19.417,21.18,18.939,21.455z"},{id:"animation_pathWingButton",tagName:"path",d:"m 4.5,0.5 c -2.216,0 -4,1.784 -4,4 l 0,24 c 0,2.216 1.784,4 4,4 l 13.71875,0 C 22.478584,27.272785 27.273681,22.511272 32.5,18.25 l 0,-13.75 c 0,-2.216 -1.784,-4 -4,-4 l -24,0 z"},{id:"animation_pathPointer",tagName:"path",d:"M-15,-65,-15,-55,15,-55,15,-65,0,-95z"},{id:"animation_pathSwooshFX",tagName:"path",d:"m 85,0 c 0,16.617 -4.813944,35.356 -13.131081,48.4508 h 6.099803 c 8.317138,-13.0948 13.13322,-28.5955 13.13322,-45.2124 0,-46.94483 -38.402714,-85.00262 -85.7743869,-85.00262 -1.0218522,0 -2.0373001,0.0241 -3.0506131,0.0589 45.958443,1.59437 82.723058,35.77285 82.723058,81.70532 z"}]});b(this._defsElement)?this._svgNode.replaceChild(m,this._defsElement):this._svgNode.appendChild(m),this._defsElement=m},C}),c("Widgets/createCommand",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","../ThirdParty/knockout"],function(a,b,c,d,e,f){"use strict";var g=function(b,d){function g(){var a,c={args:arguments,cancel:!1};return h.raiseEvent(c),c.cancel||(a=b.apply(null,arguments),i.raiseEvent(a)),a}d=a(d,!0);var h=new e,i=new e;return g.canExecute=d,f.track(g,["canExecute"]),c(g,{beforeExecute:{value:h},afterExecute:{value:i}}),g};return g}),c("Widgets/ToggleButtonViewModel",["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../ThirdParty/knockout"],function(a,b,c,d,e){"use strict";var f=function(b,c){this._command=b,c=a(c,a.EMPTY_OBJECT),this.toggled=a(c.toggled,!1),this.tooltip=a(c.tooltip,""),e.track(this,["toggled","tooltip"])};return c(f.prototype,{command:{get:function(){return this._command}}}),f}),c("Widgets/Animation/AnimationViewModel",["../../Core/binarySearch","../../Core/ClockRange","../../Core/ClockStep","../../Core/defined","../../Core/defineProperties","../../Core/DeveloperError","../../Core/JulianDate","../../ThirdParty/knockout","../../ThirdParty/sprintf","../createCommand","../ToggleButtonViewModel"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a){a.clockStep===c.SYSTEM_CLOCK&&(a.clockStep=c.SYSTEM_CLOCK_MULTIPLIER,a.multiplier=1)}function m(a){l(a),a.shouldAnimate=!0}function n(a,b){return a-b}function o(b,c){var d=a(c,b,n);return 0>d?~d:d}function p(a,b){if(Math.abs(a)<=s)return a/s;var c,d,e=s,f=t,g=0;return a>0?(c=Math.log(b[b.length-1]),d=(c-g)/(f-e),Math.exp(g+d*(a-e))):(c=Math.log(-b[0]),d=(c-g)/(f-e),-Math.exp(g+d*(Math.abs(a)-e)))}function q(a,b,d){if(d.clockStep===c.SYSTEM_CLOCK)return s;if(Math.abs(a)<=1)return a*s;var e,f,g=s,h=t,i=0;return a>0?(e=Math.log(b[b.length-1]),f=(e-i)/(h-g),(Math.log(a)-i)/f+g):(e=Math.log(-b[0]),f=(e-i)/(h-g),-((Math.log(Math.abs(a))-i)/f+g))}var r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=15,t=105,u=function(a){var d=this;this._clockViewModel=a,this._allShuttleRingTicks=[],this._dateFormatter=u.defaultDateFormatter,this._timeFormatter=u.defaultTimeFormatter,this.shuttleRingDragging=!1,this.snapToTicks=!1,h.track(this,["_allShuttleRingTicks","_dateFormatter","_timeFormatter","shuttleRingDragging","snapToTicks"]),this._sortedFilteredPositiveTicks=[],this.setShuttleRingTicks(u.defaultTicks),this.timeLabel=void 0,h.defineProperty(this,"timeLabel",function(){return d._timeFormatter(d._clockViewModel.currentTime,d)}),this.dateLabel=void 0,h.defineProperty(this,"dateLabel",function(){return d._dateFormatter(d._clockViewModel.currentTime,d)}),this.multiplierLabel=void 0,h.defineProperty(this,"multiplierLabel",function(){var a=d._clockViewModel;if(a.clockStep===c.SYSTEM_CLOCK)return"Today";var b=a.multiplier;return 0===b%1?b.toFixed(0)+"x":b.toFixed(3).replace(/0{0,3}$/,"")+"x"}),this.shuttleRingAngle=void 0,h.defineProperty(this,"shuttleRingAngle",{get:function(){return q(a.multiplier,d._allShuttleRingTicks,a)},set:function(a){a=Math.max(Math.min(a,t),-t);var b=d._allShuttleRingTicks,e=d._clockViewModel;if(e.clockStep=c.SYSTEM_CLOCK_MULTIPLIER,Math.abs(a)===t)return e.multiplier=a>0?b[b.length-1]:b[0],void 0;var f=p(a,b);if(d.snapToTicks)f=b[o(f,b)];else if(0!==f){var g=Math.abs(f);if(g>100){var h=g.toFixed(0).length-2,i=Math.pow(10,h);f=0|Math.round(f/i)*i}else g>s?f=Math.round(f):g>1?f=+f.toFixed(1):g>0&&(f=+f.toFixed(2))}e.multiplier=f}}),this._canAnimate=void 0,h.defineProperty(this,"_canAnimate",function(){var a=d._clockViewModel,c=a.clockRange;if(d.shuttleRingDragging||c===b.UNBOUNDED)return!0;var e=a.multiplier,f=a.currentTime,h=a.startTime,i=!1;if(c===b.LOOP_STOP)i=g.greaterThan(f,h)||f.equals(h)&&e>0;else{var j=a.stopTime;i=g.greaterThan(f,h)&&g.lessThan(f,j)||f.equals(h)&&e>0||f.equals(j)&&0>e}return i||(a.shouldAnimate=!1),i}),this._isSystemTimeAvailable=void 0,h.defineProperty(this,"_isSystemTimeAvailable",function(){var a=d._clockViewModel,c=a.clockRange;if(c===b.UNBOUNDED)return!0;var e=a.systemTime;return g.greaterThanOrEquals(e,a.startTime)&&g.lessThanOrEquals(e,a.stopTime)}),this._isAnimating=void 0,h.defineProperty(this,"_isAnimating",function(){return d._clockViewModel.shouldAnimate&&(d._canAnimate||d.shuttleRingDragging)});var e=j(function(){var a=d._clockViewModel;a.shouldAnimate?(l(a),a.shouldAnimate=!1):d._canAnimate&&m(a)});this._pauseViewModel=new k(e,{toggled:h.computed(function(){return!d._isAnimating}),tooltip:"Pause"});var f=j(function(){var a=d._clockViewModel;l(a);var b=a.multiplier;b>0&&(a.multiplier=-b),a.shouldAnimate=!0});this._playReverseViewModel=new k(f,{toggled:h.computed(function(){return d._isAnimating&&a.multiplier<0}),tooltip:"Play Reverse"});var i=j(function(){var a=d._clockViewModel;l(a);var b=a.multiplier;0>b&&(a.multiplier=-b),a.shouldAnimate=!0});this._playForwardViewModel=new k(i,{toggled:h.computed(function(){return d._isAnimating&&a.multiplier>0&&a.clockStep!==c.SYSTEM_CLOCK}),tooltip:"Play Forward"});var n=j(function(){var a=d._clockViewModel;a.clockStep=c.SYSTEM_CLOCK,a.multiplier=1,a.shouldAnimate=!0},h.getObservable(this,"_isSystemTimeAvailable"));this._playRealtimeViewModel=new k(n,{toggled:h.computed(function(){return a.shouldAnimate&&a.clockStep===c.SYSTEM_CLOCK}),tooltip:h.computed(function(){return d._isSystemTimeAvailable?"Today (real-time)":"Current time not in range"})}),this._slower=j(function(){var a=d._clockViewModel;l(a);var b=d._allShuttleRingTicks,c=a.multiplier,e=o(c,b)-1;e>=0&&(a.multiplier=b[e])}),this._faster=j(function(){var a=d._clockViewModel;l(a);var b=d._allShuttleRingTicks,c=a.multiplier,e=o(c,b)+1;e<b.length&&(a.multiplier=b[e])})};return u.defaultDateFormatter=function(a){var b=g.toGregorianDate(a);return r[b.month-1]+" "+b.day+" "+b.year},u.defaultTicks=[.001,.002,.005,.01,.02,.05,.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,14400,21600,43200,86400,172800,345600,604800],u.defaultTimeFormatter=function(a,b){var c=g.toGregorianDate(a),d=Math.round(c.millisecond);return Math.abs(b._clockViewModel.multiplier)<1?i("%02d:%02d:%02d.%03d",c.hour,c.minute,c.second,d):i("%02d:%02d:%02d UTC",c.hour,c.minute,c.second)},u.prototype.getShuttleRingTicks=function(){return this._sortedFilteredPositiveTicks.slice(0)},u.prototype.setShuttleRingTicks=function(a){var b,c,d,e={},f=this._sortedFilteredPositiveTicks;for(f.length=0,b=0,c=a.length;c>b;++b)d=a[b],e.hasOwnProperty(d)||(e[d]=!0,f.push(d));f.sort(n);var g=[];for(c=f.length,b=c-1;b>=0;--b)d=f[b],0!==d&&g.push(-d);Array.prototype.push.apply(g,f),this._allShuttleRingTicks=g},e(u.prototype,{slower:{get:function(){return this._slower}},faster:{get:function(){return this._faster}},clockViewModel:{get:function(){return this._clockViewModel}},pauseViewModel:{get:function(){return this._pauseViewModel}},playReverseViewModel:{get:function(){return this._playReverseViewModel}},playForwardViewModel:{get:function(){return this._playForwardViewModel}},playRealtimeViewModel:{get:function(){return this._playRealtimeViewModel}},dateFormatter:{
get:function(){return this._dateFormatter},set:function(a){this._dateFormatter=a}},timeFormatter:{get:function(){return this._timeFormatter},set:function(a){this._timeFormatter=a}}}),u._maxShuttleRingAngle=t,u._realtimeShuttleRingAngle=s,u}),c("Widgets/BaseLayerPicker/BaseLayerPickerViewModel",["../../Core/defaultValue","../../Core/defined","../../Core/defineProperties","../../Core/DeveloperError","../../Core/EllipsoidTerrainProvider","../../Core/isArray","../../ThirdParty/knockout","../createCommand"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(c){c=a(c,a.EMPTY_OBJECT);var d=c.globe,i=a(c.imageryProviderViewModels,[]),j=a(c.terrainProviderViewModels,[]);this._globe=d,this.imageryProviderViewModels=i.slice(0),this.terrainProviderViewModels=j.slice(0),this.dropDownVisible=!1,g.track(this,["imageryProviderViewModels","terrainProviderViewModels","dropDownVisible"]),this.buttonTooltip=void 0,g.defineProperty(this,"buttonTooltip",function(){var a=this.selectedImagery,c=this.selectedTerrain,d=b(a)?a.name:void 0,e=b(c)?c.name:void 0;return b(d)&&b(e)?d+"\n"+e:b(d)?d:e}),this.buttonImageUrl=void 0,g.defineProperty(this,"buttonImageUrl",function(){var a=this.selectedImagery;return b(a)?a.iconUrl:void 0}),this.selectedImagery=void 0;var k=g.observable();this._currentImageryProviders=[],g.defineProperty(this,"selectedImagery",{get:function(){return k()},set:function(a){if(k()===a)return this.dropDownVisible=!1,void 0;var c,d=this._currentImageryProviders,e=d.length,g=this._globe.imageryLayers;for(c=0;e>c;c++)for(var h=g.length,i=0;h>i;i++){var j=g.get(i);if(j.imageryProvider===d[c]){g.remove(j);break}}if(b(a)){var l=a.creationCommand();if(f(l)){var m=l.length;for(c=m-1;c>=0;c--)g.addImageryProvider(l[c],0);this._currentImageryProviders=l.slice(0)}else this._currentImageryProviders=[l],g.addImageryProvider(l,0)}k(a),this.dropDownVisible=!1}}),this.selectedTerrain=void 0;var l=g.observable();g.defineProperty(this,"selectedTerrain",{get:function(){return l()},set:function(a){if(l()===a)return this.dropDownVisible=!1,void 0;var c;b(a)&&(c=a.creationCommand()),this._globe.depthTestAgainstTerrain=!(c instanceof e),this._globe.terrainProvider=c,l(a),this.dropDownVisible=!1}});var m=this;this._toggleDropDown=h(function(){m.dropDownVisible=!m.dropDownVisible}),this.selectedImagery=a(c.selectedImageryProviderViewModel,i[0]),this.selectedTerrain=a(c.selectedTerrainProviderViewModel,j[0])};return c(i.prototype,{toggleDropDown:{get:function(){return this._toggleDropDown}},globe:{get:function(){return this._globe}}}),i}),c("Widgets/BaseLayerPicker/BaseLayerPicker",["../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../ThirdParty/knockout","../getElement","./BaseLayerPickerViewModel"],function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){a=f(a);var c=new g(b),d=document.createElement("button");d.type="button",d.className="cesium-button cesium-toolbar-button",d.setAttribute("data-bind","attr: { title: buttonTooltip },click: toggleDropDown"),a.appendChild(d);var h=document.createElement("img");h.setAttribute("draggable","false"),h.className="cesium-baseLayerPicker-selected",h.setAttribute("data-bind","attr: { src: buttonImageUrl }"),d.appendChild(h);var i=document.createElement("div");i.className="cesium-baseLayerPicker-dropDown",i.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-dropDown-visible" : dropDownVisible }'),a.appendChild(i);var j=document.createElement("div");j.className="cesium-baseLayerPicker-sectionTitle",j.setAttribute("data-bind","visible: imageryProviderViewModels.length > 0"),j.innerHTML="Imagery",i.appendChild(j);var k=document.createElement("div");k.className="cesium-baseLayerPicker-choices",k.setAttribute("data-bind","foreach: imageryProviderViewModels"),i.appendChild(k);var l=document.createElement("div");l.className="cesium-baseLayerPicker-item",l.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parent.selectedImagery },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parent.selectedImagery = $data; }'),k.appendChild(l);var m=document.createElement("img");m.className="cesium-baseLayerPicker-itemIcon",m.setAttribute("data-bind","attr: { src: iconUrl }"),m.setAttribute("draggable","false"),l.appendChild(m);var n=document.createElement("div");n.className="cesium-baseLayerPicker-itemLabel",n.setAttribute("data-bind","text: name"),l.appendChild(n);var o=document.createElement("div");o.className="cesium-baseLayerPicker-sectionTitle",o.setAttribute("data-bind","visible: terrainProviderViewModels.length > 0"),o.innerHTML="Terrain",i.appendChild(o);var p=document.createElement("div");p.className="cesium-baseLayerPicker-choices",p.setAttribute("data-bind","foreach: terrainProviderViewModels"),i.appendChild(p);var q=document.createElement("div");q.className="cesium-baseLayerPicker-item",q.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parent.selectedTerrain },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parent.selectedTerrain = $data; }'),p.appendChild(q);var r=document.createElement("img");r.className="cesium-baseLayerPicker-itemIcon",r.setAttribute("data-bind","attr: { src: iconUrl }"),r.setAttribute("draggable","false"),q.appendChild(r);var s=document.createElement("div");s.className="cesium-baseLayerPicker-itemLabel",s.setAttribute("data-bind","text: name"),q.appendChild(s),e.applyBindings(c,d),e.applyBindings(c,i),this._viewModel=c,this._container=a,this._element=d,this._dropPanel=i,this._closeDropDown=function(a){d.contains(a.target)||i.contains(a.target)||(c.dropDownVisible=!1)},document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0)};return b(h.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0),e.cleanNode(this._element),e.cleanNode(this._dropPanel),this._container.removeChild(this._element),this._container.removeChild(this._dropPanel),c(this)},h}),c("Widgets/BaseLayerPicker/ProviderViewModel",["../../Core/defined","../../Core/defineProperties","../../Core/DeveloperError","../../ThirdParty/knockout","../createCommand"],function(a,b,c,d,e){"use strict";var f=function(b){var c=b.creationFunction;a(c.canExecute)||(c=e(c)),this._creationCommand=c,this.name=b.name,this.tooltip=b.tooltip,this.iconUrl=b.iconUrl,d.track(this,["name","tooltip","iconUrl"])};return b(f.prototype,{creationCommand:{get:function(){return this._creationCommand}}}),f}),c("Widgets/BaseLayerPicker/createDefaultImageryProviderViewModels",["../../Core/buildModuleUrl","../../Scene/ArcGisMapServerImageryProvider","../../Scene/BingMapsImageryProvider","../../Scene/BingMapsStyle","../../Scene/OpenStreetMapImageryProvider","../../Scene/TileMapServiceImageryProvider","../BaseLayerPicker/ProviderViewModel"],function(a,b,c,d,e,f,g){"use strict";function h(){var h=[];return h.push(new g({name:"Bing Maps Aerial",iconUrl:a("Widgets/Images/ImageryProviders/bingAerial.png"),tooltip:"Bing Maps aerial imagery \nhttp://www.bing.com/maps",creationFunction:function(){return new c({url:"//dev.virtualearth.net",mapStyle:d.AERIAL})}})),h.push(new g({name:"Bing Maps Aerial with Labels",iconUrl:a("Widgets/Images/ImageryProviders/bingAerialLabels.png"),tooltip:"Bing Maps aerial imagery with label overlays \nhttp://www.bing.com/maps",creationFunction:function(){return new c({url:"//dev.virtualearth.net",mapStyle:d.AERIAL_WITH_LABELS})}})),h.push(new g({name:"Bing Maps Roads",iconUrl:a("Widgets/Images/ImageryProviders/bingRoads.png"),tooltip:"Bing Maps standard road maps\nhttp://www.bing.com/maps",creationFunction:function(){return new c({url:"//dev.virtualearth.net",mapStyle:d.ROAD})}})),h.push(new g({name:"ESRI World Imagery",iconUrl:a("Widgets/Images/ImageryProviders/esriWorldImagery.png"),tooltip:"World Imagery provides one meter or better satellite and aerial imagery in many parts of the world and lower resolution satellite imagery worldwide.  The map includes NASA Blue Marble: Next Generation 500m resolution imagery at small scales (above 1:1,000,000), i-cubed 15m eSAT imagery at medium-to-large scales (down to 1:70,000) for the world, and USGS 15m Landsat imagery for Antarctica. The map features 0.3m resolution imagery in the continental United States and 0.6m resolution imagery in parts of Western Europe from DigitalGlobe. In other parts of the world, 1 meter resolution imagery is available from GeoEye IKONOS, i-cubed Nationwide Prime, Getmapping, AeroGRID, IGN Spain, and IGP Portugal.  Additionally, imagery at different resolutions has been contributed by the GIS User Community.\nhttp://www.esri.com",creationFunction:function(){return new b({url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"})}})),h.push(new g({name:"ESRI World Street Map",iconUrl:a("Widgets/Images/ImageryProviders/esriWorldStreetMap.png"),tooltip:"This worldwide street map presents highway-level data for the world. Street-level data includes the United States; much of Canada; Japan; most countries in Europe; Australia and New Zealand; India; parts of South America including Argentina, Brazil, Chile, Colombia, and Venezuela; Ghana; and parts of southern Africa including Botswana, Lesotho, Namibia, South Africa, and Swaziland.\nhttp://www.esri.com",creationFunction:function(){return new b({url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"})}})),h.push(new g({name:"ESRI National Geographic",iconUrl:a("Widgets/Images/ImageryProviders/esriNationalGeographic.png"),tooltip:"This web map contains the National Geographic World Map service. This map service is designed to be used as a general reference map for informational and educational purposes as well as a basemap by GIS professionals and other users for creating web maps and web mapping applications.\nhttp://www.esri.com",creationFunction:function(){return new b({url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/"})}})),h.push(new g({name:"OpenStreetMap",iconUrl:a("Widgets/Images/ImageryProviders/openStreetMap.png"),tooltip:"OpenStreetMap (OSM) is a collaborative project to create a free editable map of the world.\nhttp://www.openstreetmap.org",creationFunction:function(){return new e({url:"//a.tile.openstreetmap.org/"})}})),h.push(new g({name:"Stamen Watercolor",iconUrl:a("Widgets/Images/ImageryProviders/stamenWatercolor.png"),tooltip:"Reminiscent of hand drawn maps, Stamen watercolor maps apply raster effect area washes and organic edges over a paper texture to add warm pop to any map.\nhttp://maps.stamen.com",creationFunction:function(){return new e({url:"//stamen-tiles.a.ssl.fastly.net/watercolor/",credit:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under CC BY SA."})}})),h.push(new g({name:"Stamen Toner",iconUrl:a("Widgets/Images/ImageryProviders/stamenToner.png"),tooltip:"A high contrast black and white map.\nhttp://maps.stamen.com",creationFunction:function(){return new e({url:"//stamen-tiles.a.ssl.fastly.net/toner/",credit:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under CC BY SA."})}})),h.push(new g({name:"MapQuest OpenStreetMap",iconUrl:a("Widgets/Images/ImageryProviders/mapQuestOpenStreetMap.png"),tooltip:"OpenStreetMap (OSM) is a collaborative project to create a free editable map of the world.\nhttp://www.openstreetmap.org",creationFunction:function(){return new e({url:"//otile1-s.mqcdn.com/tiles/1.0.0/osm/"})}})),h.push(new g({name:"The Black Marble",iconUrl:a("Widgets/Images/ImageryProviders/blackMarble.png"),tooltip:"The lights of cities and villages trace the outlines of civilization in this global view of the Earth at night as seen by NASA/NOAA's Suomi NPP satellite.",creationFunction:function(){return new f({url:"//cesiumjs.org/blackmarble",maximumLevel:8,credit:"Black Marble imagery courtesy NASA Earth Observatory"})}})),h.push(new g({name:"Natural EarthII",iconUrl:a("Widgets/Images/ImageryProviders/naturalEarthII.png"),tooltip:"Natural Earth II, darkened for contrast.\nhttp://www.naturalearthdata.com/",creationFunction:function(){return new f({url:a("Assets/Textures/NaturalEarthII")})}})),h}return h}),c("Widgets/BaseLayerPicker/createDefaultTerrainProviderViewModels",["../../Core/buildModuleUrl","../../Core/CesiumTerrainProvider","../../Core/EllipsoidTerrainProvider","../BaseLayerPicker/ProviderViewModel"],function(a,b,c,d){"use strict";function e(){var e=[];return e.push(new d({name:"WGS84 Ellipsoid",iconUrl:a("Widgets/Images/TerrainProviders/Ellipsoid.png"),tooltip:"WGS84 standard ellipsoid, also known as EPSG:4326",creationFunction:function(){return new c}})),e.push(new d({name:"STK World Terrain meshes",iconUrl:a("Widgets/Images/TerrainProviders/STK.png"),tooltip:"High-resolution, mesh-based terrain for the entire globe. Free for use on the Internet. Closed-network options are available.\nhttp://www.agi.com",creationFunction:function(){return new b({url:"//cesiumjs.org/stk-terrain/tilesets/world/tiles"})}})),e.push(new d({name:"Small Terrain heightmaps with water",iconUrl:a("Widgets/Images/TerrainProviders/STK.png"),tooltip:"Medium-resolution, heightmap-based terrain for the entire globe. This tileset also includes a water mask. Free for use on the Internet.\nhttp://www.agi.com",creationFunction:function(){return new b({url:"//cesiumjs.org/smallterrain",credit:"Terrain data courtesy Analytical Graphics, Inc."})}})),e}return e}),c("Widgets/CesiumInspector/CesiumInspectorViewModel",["../../Core/Color","../../Core/defined","../../Core/defineProperties","../../Core/DeveloperError","../../Core/Rectangle","../../Scene/DebugModelMatrixPrimitive","../../Scene/PerformanceDisplay","../../Scene/TileCoordinatesImageryProvider","../../ThirdParty/knockout","../createCommand"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a){var c;if(b(a)){c="Command Statistics";var d=a.commandsInFrustums;for(var e in d)if(d.hasOwnProperty(e)){var f,g=parseInt(e,10);if(7===g)f="1, 2 and 3";else{for(var h=[],i=2;i>=0;i--){var j=Math.pow(2,i);g>=j&&(h.push(i+1),g-=j)}f=h.reverse().join(" and ")}c+="<br>&nbsp;&nbsp;&nbsp;&nbsp;"+d[e]+" in frustum "+f}c+="<br>Total: "+a.totalCommands}return c}var l=new a(.15,.15,.15,.75),m=function(a,c){var d=this,k=a.canvas;this._scene=a,this._canvas=k,this._primitive=void 0,this._tile=void 0,this._modelMatrixPrimitive=void 0,this._performanceDisplay=void 0,this._performanceContainer=c;var m=this._scene.globe;m.depthTestAgainstTerrain=!0,this.frustums=!1,this.performance=!1,this.primitiveBoundingSphere=!1,this.primitiveReferenceFrame=!1,this.filterPrimitive=!1,this.tileBoundingSphere=!1,this.filterTile=!1,this.wireframe=!1,this.suspendUpdates=!1,this.tileCoordinates=!1,this.frustumStatisticText="",this.tileText="",this.hasPickedPrimitive=!1,this.hasPickedTile=!1,this.pickPimitiveActive=!1,this.pickTileActive=!1,this.dropDownVisible=!0,this.generalVisible=!0,this.primitivesVisible=!1,this.terrainVisible=!1,this.generalSwitchText="-",this.primitivesSwitchText="+",this.terrainSwitchText="+",i.track(this,["filterTile","suspendUpdates","dropDownVisible","frustums","frustumStatisticText","pickTileActive","pickPrimitiveActive","hasPickedPrimitive","hasPickedTile","tileText","generalVisible","generalSwitchText","primitivesVisible","primitivesSwitchText","terrainVisible","terrainSwitchText"]),this._toggleDropDown=j(function(){d.dropDownVisible=!d.dropDownVisible}),this._toggleGeneral=j(function(){d.generalVisible=!d.generalVisible,d.generalSwitchText=d.generalVisible?"-":"+"}),this._togglePrimitives=j(function(){d.primitivesVisible=!d.primitivesVisible,d.primitivesSwitchText=d.primitivesVisible?"-":"+"}),this._toggleTerrain=j(function(){d.terrainVisible=!d.terrainVisible,d.terrainSwitchText=d.terrainVisible?"-":"+"}),this._showFrustums=j(function(){return d._scene.debugShowFrustums=d.frustums?!0:!1,!0}),this._showPerformance=j(function(){return d.performance?d._performanceDisplay=new g({container:d._performanceContainer,backgroundColor:l,font:"12px arial,sans-serif"}):d._performanceContainer.innerHTML="",!0}),this._showPrimitiveBoundingSphere=j(function(){return d._primitive.debugShowBoundingVolume=d.primitiveBoundingSphere,!0}),this._showPrimitiveReferenceFrame=j(function(){if(d.primitiveReferenceFrame){var a=d._primitive.modelMatrix;d._modelMatrixPrimitive=new f({modelMatrix:a}),d._scene.primitives.add(d._modelMatrixPrimitive)}else b(d._modelMatrixPrimitive)&&(d._scene.primitives.remove(d._modelMatrixPrimitive),d._modelMatrixPrimitive=void 0);return!0}),this._doFilterPrimitive=j(function(){return d._scene.debugCommandFilter=d.filterPrimitive?function(a){return b(d._modelMatrixPrimitive)&&a.owner===d._modelMatrixPrimitive._primitive?!0:b(d._primitive)?a.owner===d._primitive||a.owner===d._primitive._billboardCollection||a.owner.primitive===d._primitive:!1}:void 0,!0}),this._showWireframe=j(function(){return m._surface.tileProvider._debug.wireframe=d.wireframe,!0}),this._doSuspendUpdates=j(function(){return m._surface._debug.suspendLodUpdate=d.suspendUpdates,d.suspendUpdates||(d.filterTile=!1),!0});var n;this._showTileCoordinates=j(function(){return d.tileCoordinates&&!b(n)?n=a.imageryLayers.addImageryProvider(new h({tilingScheme:a.terrainProvider.tilingScheme})):!d.tileCoordinates&&b(n)&&(a.imageryLayers.remove(n),n=void 0),!0}),this._showTileBoundingSphere=j(function(){return m._surface.tileProvider._debug.boundingSphereTile=d.tileBoundingSphere?d._tile:void 0,!0}),this._doFilterTile=j(function(){return d.filterTile?(d.suspendUpdates=!0,d.doSuspendUpdates(),m._surface._tilesToRender=[],b(d._tile)&&m._surface._tilesToRender.push(d._tile)):(d.suspendUpdates=!1,d.doSuspendUpdates()),!0});var o=function(a){d._canvas.removeEventListener("mousedown",o,!1),d.pickPrimitiveActive=!1;var c=d._scene.pick({x:a.clientX,y:a.clientY});b(c)&&(d.primitive=b(c.collection)?c.collection:c.primitive)};this._pickPrimitive=j(function(){d.pickPrimitiveActive=!d.pickPrimitiveActive,d.pickPrimitiveActive?d._canvas.addEventListener("mousedown",o,!1):d._canvas.removeEventListener("mousedown",o,!1)});var p=function(a){var c,f=m.ellipsoid,g=d._scene.camera.pickEllipsoid({x:a.clientX,y:a.clientY},f);if(b(g))for(var h=f.cartesianToCartographic(g),i=m._surface.tileProvider._tilesToRenderByTextureCount,j=0;!c&&j<i.length;++j){var k=i[j];if(b(k))for(var l=0;!c&&l<k.length;++l){var n=k[l];e.contains(n.rectangle,h)&&(c=n)}}d.tile=c,d._canvas.removeEventListener("mousedown",p,!1),d.pickTileActive=!1};this._pickTile=j(function(){d.pickTileActive=!d.pickTileActive,d.pickTileActive?d._canvas.addEventListener("mousedown",p,!1):d._canvas.removeEventListener("mousedown",p,!1)})};return c(m.prototype,{scene:{get:function(){return this._scene}},performanceContainer:{get:function(){return this._performanceContainer}},toggleDropDown:{get:function(){return this._toggleDropDown}},showFrustums:{get:function(){return this._showFrustums}},showPerformance:{get:function(){return this._showPerformance}},showPrimitiveBoundingSphere:{get:function(){return this._showPrimitiveBoundingSphere}},showPrimitiveReferenceFrame:{get:function(){return this._showPrimitiveReferenceFrame}},doFilterPrimitive:{get:function(){return this._doFilterPrimitive}},showWireframe:{get:function(){return this._showWireframe}},doSuspendUpdates:{get:function(){return this._doSuspendUpdates}},showTileCoordinates:{get:function(){return this._showTileCoordinates}},showTileBoundingSphere:{get:function(){return this._showTileBoundingSphere}},doFilterTile:{get:function(){return this._doFilterTile}},toggleGeneral:{get:function(){return this._toggleGeneral}},togglePrimitives:{get:function(){return this._togglePrimitives}},toggleTerrain:{get:function(){return this._toggleTerrain}},pickPrimitive:{get:function(){return this._pickPrimitive}},pickTile:{get:function(){return this._pickTile}},selectParent:{get:function(){var a=this;return j(function(){a.tile=a.tile.parent})}},selectNW:{get:function(){var a=this;return j(function(){a.tile=a.tile.children[0]})}},selectNE:{get:function(){var a=this;return j(function(){a.tile=a.tile.children[1]})}},selectSW:{get:function(){var a=this;return j(function(){a.tile=a.tile.children[2]})}},selectSE:{get:function(){var a=this;return j(function(){a.tile=a.tile.children[3]})}},primitive:{set:function(a){var c=this._primitive;a!==c&&(this.hasPickedPrimitive=!0,b(c)&&(c.debugShowBoundingVolume=!1),this._scene.debugCommandFilter=void 0,b(this._modelMatrixPrimitive)&&(this._scene.primitives.remove(this._modelMatrixPrimitive),this._modelMatrixPrimitive=void 0),this._primitive=a,a.show=!1,setTimeout(function(){a.show=!0},50),this.showPrimitiveBoundingSphere(),this.showPrimitiveReferenceFrame(),this.doFilterPrimitive())},get:function(){return this._primitive}},tile:{set:function(a){if(b(a)){this.hasPickedTile=!0;var c=this._tile;a!==c&&(this.tileText="L: "+a.level+" X: "+a.x+" Y: "+a.y,this.tileText+="<br>SW corner: "+a.rectangle.west+", "+a.rectangle.south,this.tileText+="<br>NE corner: "+a.rectangle.east+", "+a.rectangle.north,this.tileText+="<br>Min: "+a.data.minimumHeight+" Max: "+a.data.maximumHeight),this._tile=a,this.showTileBoundingSphere(),this.doFilterTile()}else this.hasPickedTile=!1,this._tile=void 0},get:function(){return this._tile}},update:{get:function(){var a=this;return function(){a.frustums&&(a.frustumStatisticText=k(a._scene.debugFrustumStatistics)),a.performance&&a._performanceDisplay.update(),a.primitiveReferenceFrame&&(a._modelMatrixPrimitive.modelMatrix=a._primitive.modelMatrix)}}}}),m}),c("Widgets/CesiumInspector/CesiumInspector",["../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../ThirdParty/knockout","../getElement","./CesiumInspectorViewModel"],function(a,b,c,d,e,f,g){"use strict";var h=function(b,c){if(!a(b))throw new d("container is required.");if(!a(c))throw new d("scene is required.");b=f(b);var h=document.createElement("div"),i=new g(c,h);this._viewModel=i,this._container=b;var j=document.createElement("div");this._element=j;var k=document.createElement("div");k.textContent="Cesium Inspector",k.className="cesium-cesiumInspector-button",k.setAttribute("data-bind","click: toggleDropDown"),j.appendChild(k),j.className="cesium-cesiumInspector",j.setAttribute("data-bind",'css: { "cesium-cesiumInspector-visible" : dropDownVisible, "cesium-cesiumInspector-hidden" : !dropDownVisible }'),b.appendChild(this._element);var l=document.createElement("div");this._panel=l,l.className="cesium-cesiumInspector-dropDown",j.appendChild(l);var m=document.createElement("div");m.className="cesium-cesiumInspector-sectionHeader";var n=document.createElement("span");n.className="cesium-cesiumInspector-toggleSwitch",n.setAttribute("data-bind","click: toggleGeneral, text: generalSwitchText"),m.appendChild(n),m.appendChild(document.createTextNode("General")),l.appendChild(m);var o=document.createElement("div");o.className="cesium-cesiumInspector-section",o.setAttribute("data-bind",'css: {"cesium-cesiumInspector-show" : generalVisible, "cesium-cesiumInspector-hide" : !generalVisible}'),l.appendChild(o);var p=document.createElement("div");o.appendChild(p);var q=document.createElement("div");q.className="cesium-cesiumInspector-frustumStats",q.setAttribute("data-bind",'css: {"cesium-cesiumInspector-show" : frustums, "cesium-cesiumInspector-hide" : !frustums}, html: frustumStatisticText');var r=document.createElement("input");r.type="checkbox",r.setAttribute("data-bind","checked: frustums, click: showFrustums"),p.appendChild(r),p.appendChild(document.createTextNode("Show Frustums")),p.appendChild(q);var s=document.createElement("div");o.appendChild(s);var t=document.createElement("input");t.type="checkbox",t.setAttribute("data-bind","checked: performance, click: showPerformance"),s.appendChild(t),s.appendChild(document.createTextNode("Performance Display")),h.className="cesium-cesiumInspector-performanceDisplay",o.appendChild(h);var u=document.createElement("div");u.className="cesium-cesiumInspector-sectionHeader",n=document.createElement("span"),n.className="cesium-cesiumInspector-toggleSwitch",n.setAttribute("data-bind","click: togglePrimitives, text: primitivesSwitchText"),u.appendChild(n),u.appendChild(document.createTextNode("Primitives")),l.appendChild(u);var v=document.createElement("div");v.className="cesium-cesiumInspector-section",v.setAttribute("data-bind",'css: {"cesium-cesiumInspector-show" : primitivesVisible, "cesium-cesiumInspector-hide" : !primitivesVisible}'),l.appendChild(v);var w=document.createElement("div");w.className="cesium-cesiumInspector-pickSection",v.appendChild(w);var x=document.createElement("input");x.type="button",x.value="Pick a primitive",x.className="cesium-cesiumInspector-pickButton",x.setAttribute("data-bind",'css: {"cesium-cesiumInspector-pickButtonHighlight" : pickPrimitiveActive}, click: pickPrimitive');var y=document.createElement("div");y.className="cesium-cesiumInspector-center",y.appendChild(x),w.appendChild(y);var z=document.createElement("div");w.appendChild(z);var A=document.createElement("input");A.type="checkbox",A.setAttribute("data-bind","checked: primitiveBoundingSphere, click: showPrimitiveBoundingSphere, enable: hasPickedPrimitive"),z.appendChild(A),z.appendChild(document.createTextNode("Show bounding sphere"));var B=document.createElement("div");w.appendChild(B);var C=document.createElement("input");C.type="checkbox",C.setAttribute("data-bind","checked: primitiveReferenceFrame, click: showPrimitiveReferenceFrame, enable: hasPickedPrimitive"),B.appendChild(C),B.appendChild(document.createTextNode("Show reference frame"));var D=document.createElement("div");this._primitiveOnly=D,w.appendChild(D);var E=document.createElement("input");E.type="checkbox",E.setAttribute("data-bind","checked: filterPrimitive, click: doFilterPrimitive, enable: hasPickedPrimitive"),D.appendChild(E),D.appendChild(document.createTextNode("Show only selected"));var F=document.createElement("div");F.className="cesium-cesiumInspector-sectionHeader",n=document.createElement("span"),n.className="cesium-cesiumInspector-toggleSwitch",n.setAttribute("data-bind","click: toggleTerrain, text: terrainSwitchText"),F.appendChild(n),F.appendChild(document.createTextNode("Terrain")),l.appendChild(F);var G=document.createElement("div");G.className="cesium-cesiumInspector-section",G.setAttribute("data-bind",'css: {"cesium-cesiumInspector-show" : terrainVisible, "cesium-cesiumInspector-hide" : !terrainVisible}'),l.appendChild(G);var H=document.createElement("div");H.className="cesium-cesiumInspector-pickSection",G.appendChild(H);var I=document.createElement("input");I.type="button",I.value="Pick a tile",I.className="cesium-cesiumInspector-pickButton",I.setAttribute("data-bind",'css: {"cesium-cesiumInspector-pickButtonHighlight" : pickTileActive}, click: pickTile'),y=document.createElement("div"),y.appendChild(I),y.className="cesium-cesiumInspector-center",H.appendChild(y);var J=document.createElement("div");H.appendChild(J);var K=document.createElement("input");K.type="button",K.value="Parent",K.className="cesium-cesiumInspector-pickButton",K.setAttribute("data-bind","click: selectParent");var L=document.createElement("input");L.type="button",L.value="NW",L.className="cesium-cesiumInspector-pickButton",L.setAttribute("data-bind","click: selectNW");var M=document.createElement("input");M.type="button",M.value="NE",M.className="cesium-cesiumInspector-pickButton",M.setAttribute("data-bind","click: selectNE");var N=document.createElement("input");N.type="button",N.value="SW",N.className="cesium-cesiumInspector-pickButton",N.setAttribute("data-bind","click: selectSW");var O=document.createElement("input");O.type="button",O.value="SE",O.className="cesium-cesiumInspector-pickButton",O.setAttribute("data-bind","click: selectSE");var P=document.createElement("div");P.className="cesium-cesiumInspector-tileText",J.className="cesium-cesiumInspector-frustumStats",J.appendChild(P),J.setAttribute("data-bind",'css: {"cesium-cesiumInspector-show" : hasPickedTile, "cesium-cesiumInspector-hide" : !hasPickedTile}'),P.setAttribute("data-bind","html: tileText");var Q=document.createElement("div");Q.className="cesium-cesiumInspector-relativeText",Q.textContent="Select relative:",J.appendChild(Q);var R=document.createElement("table"),S=document.createElement("tr"),T=document.createElement("tr"),U=document.createElement("td");U.appendChild(K);var V=document.createElement("td");V.appendChild(L);var W=document.createElement("td");W.appendChild(M),S.appendChild(U),S.appendChild(V),S.appendChild(W);var X=document.createElement("td"),Y=document.createElement("td");Y.appendChild(N);var Z=document.createElement("td");Z.appendChild(O),T.appendChild(X),T.appendChild(Y),T.appendChild(Z),R.appendChild(S),R.appendChild(T),J.appendChild(R);var $=document.createElement("div");H.appendChild($);var _=document.createElement("input");_.type="checkbox",_.setAttribute("data-bind","checked: tileBoundingSphere, enable: hasPickedTile, click: showTileBoundingSphere"),$.appendChild(_),$.appendChild(document.createTextNode("Show bounding sphere"));var aa=document.createElement("div");H.appendChild(aa);var ba=document.createElement("input");ba.type="checkbox",ba.setAttribute("data-bind","checked: filterTile, enable: hasPickedTile, click: doFilterTile"),aa.appendChild(ba),aa.appendChild(document.createTextNode("Show only selected"));var ca=document.createElement("div");G.appendChild(ca);var da=document.createElement("input");da.type="checkbox",da.setAttribute("data-bind","checked: wireframe, click: showWireframe"),ca.appendChild(da),ca.appendChild(document.createTextNode("Wireframe"));var ea=document.createElement("div");G.appendChild(ea);var fa=document.createElement("input");fa.type="checkbox",fa.setAttribute("data-bind","checked: suspendUpdates, click: doSuspendUpdates"),ea.appendChild(fa),ea.appendChild(document.createTextNode("Suspend LOD update"));var ga=document.createElement("div");G.appendChild(ga);var ha=document.createElement("input");ha.type="checkbox",ha.setAttribute("data-bind","checked: tileCoordinates, click: showTileCoordinates"),ga.appendChild(ha),ga.appendChild(document.createTextNode("Show tile coordinates")),e.applyBindings(i,this._element)};return b(h.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return e.cleanNode(this._element),this._container.removeChild(this._element),c(this)},h}),c("Widgets/CesiumWidget/CesiumWidget",["../../Core/buildModuleUrl","../../Core/Cartesian3","../../Core/Clock","../../Core/Credit","../../Core/defaultValue","../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../Core/Ellipsoid","../../Core/formatError","../../Core/requestAnimationFrame","../../Core/ScreenSpaceEventHandler","../../Scene/BingMapsImageryProvider","../../Scene/Globe","../../Scene/Moon","../../Scene/Scene","../../Scene/SceneMode","../../Scene/SkyAtmosphere","../../Scene/SkyBox","../../Scene/Sun","../getElement"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){"use strict";function w(b){return a("Assets/Textures/SkyBox/tycho2t3_80_"+b+".jpg")}function x(a){function b(d){if(!a.isDestroyed())if(a._useDefaultRenderLoop)try{var e=a._targetFrameRate;if(f(e)){var g=1e3/e,h=d-c;h>g&&(a.resize(),a.render(),c=d-h%g),l(b)}else a.resize(),a.render(),l(b)}catch(b){if(a._useDefaultRenderLoop=!1,a._renderLoopRunning=!1,a._showRenderLoopErrors){var i="An error occurred while rendering.  Rendering has stopped.";a.showErrorPanel(i,void 0,b)}
}else a._renderLoopRunning=!1}a._renderLoopRunning=!0;var c=0;l(b)}function y(a){var b=a._canvas,c=b.clientWidth,d=b.clientHeight,f=e(window.devicePixelRatio,1)*a._resolutionScale;a._canvasWidth=c,a._canvasHeight=d,c*=f,d*=f,b.width=c,b.height=d,a._canRender=0!==c&&0!==d}function z(a){var b=a._canvas,c=b.width,d=b.height;if(0!==c&&0!==d){var e=a._scene.camera.frustum;f(e.aspectRatio)?e.aspectRatio=c/d:(e.top=e.right*(d/c),e.bottom=-e.top)}}var A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHYAAAAaCAYAAABikagwAAAAAXNSR0IArs4c6QAAAAlwSFlzAAAN1wAADdcBQiibeAAAAAd0SU1FB9wGGRQyF371QVsAABOHSURBVGje7Vp5cFTHmf91v2Nm3owGnYMuEEJCOBiEjDlsDMYQjGMOOwmXcWxiLywpJ9iuTXZd612corJssFOxi8LerXizxEGUvWsivNxxHHCQ8WYBYSFzmUMCCXQjaUajOd/V+4f6Kc14kI/KZv/xq+p6M/PmO15/9/c1wa0vwpcMQAHgBuAFoPG7mz8jAGwASQBxADFhJQGYACwAjK+vrr/AJQ8jVMqfuwH4AGQByAaQnTNqXGHWqHGFbq8/g1BJsgw9GQ12Bds/qWsxEvEeAEEAfQDCAKKCgPGVcP//BOsIVQHgAZAJIACgsHTqvDvK7150T2bR2DFaZm6W4slwUypR20yaiUg4OtDbcaP36rlPPt6/7f2B3q5mAB0AeriAE18J9y93kVu4X4W73BwAhQBK5v/gZ98ZVXXvDG92IJMx569MQDEoK0tPmOHu1s4L7799sH7vtvcAXAPQCaCfu2qLu+7h+Eh3sS8Bcyt48iVgPos2+4J7jS+BIx2etDBSynfH/Xq46y0CUL70n3/zXMmUuXepWoZHFCQhFIQARCBFJYV6/Nn+QHnVBH9Ovq/51JFWADpfJhcqEzyDcx9ukTTr/xr2VnDpng0nuHR0h1u3wvWF6EspgBIAFYAfQAGAsuU/rfm7kePvvJ0QiTj6QSgBISS9ujEGSikkxaXklIwfK8uK2Xru2HVurWKspZyezGmmWwp/LqVsupPQub4grPQ5YIejKQvPJAGflLLJSBGmxPEqKXhU4XdJEBq7BR5Z+L+DKx3MTTHWEaybx9WCud/btCJQMeX2Qevk+NPoks0YPArF/RUj0NyXxOmO2CAy1a1OmL9yUVfTmatXTx52EildYFQVNlgRmBR1xQJgCBbPBAVUhcw8lTObLz0FVk4RIEmJJyJNZzFBiCTFBRL+f50rriFUATRFiZSU/XYEAw6X5LlIUghZqXvl5p8pfycRZsgjymlKGw1Adm7JbRUVs785nwGghP5pp9mfFMOxWstmuC3gwdcrRqA/buJUWwyKRMAYgydrZNZt9337623njn+ixyN9nAmdM5nBvYOPfxc3mnEmTQ4T5VZv8hfz8aUKnocJd5tvVhxAhOMADzNefleFjRUFa/D/xzi8LQhIEpTG4VXnNBzlZYISufk7juCfqaAoLkHYcZ6HBAEM8O+ObJz3HcFDpJfDJwWYfiHMMTklviocKHv6I3+zRFLdKhEEatmALBFIBIibNhQ6KFyJEjT2JHDoUj/a+nVIVIBhBGOnzptWXzhmTFfT2TZBOH4AgSeeeGJqRUVFqdfr9btcLnVQXwapmqZpJZPJRCgUCh47duzie++9dwWAXl5enrlp06bF0WhUM01TYYwRrmg2vzNKqS3Lsunz+Yy6urpTP//5z09blkVLSkryVq9ePT03NzegqqqbUnqTGyOEMNM0k319fX2///3vz9bW1l4DYD700EPFy5Ytm65pmvbBBx9c2rp166Wnnnqq7MEHH5zAGIu8/vrr+w8ePPgJVwrRO2gAcg8cOLA2mUx62tvbB9avX39s+fLlo++///5JXNiwbXugpqam9tChQ2cEj6NzuQwlsi+//PKSzMzMQtu2qcfjMZqbm09v2LDht4J3sQEQOU2Jo8mKKzt7VEU5lSgFBi3PZkBZrgv3lGbCo1Jc7I7iSGN40JcQgoGkhXdO94ESQJEoGI+1k/M9mDKqQHEv++akl186e45rNAAE3njjjccWLFhwfyAQyJEkiabGbcc7JJNJva2trX3Lli3vvPbaa+eKi4uLV6xY8d10cf5TcZ8x5OXl5b366qs9lFLtrbfeWldVVXW7pmkuxhjS0SSEIJlMGitXrrz2/PPPv1lTU3NtypQp0x955JG/kmVZdrlcR7du3WrOnTt33pIlS+YDwNGjR68ePHiwjVtukm+wI9ichQsXPgUAHR0d3evXr78xc+bMu9asWbOQUjpENz8/v/jQoUP/IiiH40UzAeQvW7Zs1rp16/7a5/NpDr/19fWlGzZsOM4tNsphkc5iPaXTvl6uuDUvY4MZLwNQ4Ffw+LR8+KQQTCuJSQUFcMsEe88FoSkSKCFwyWSISQbg9pEefHdGAJHIdUydVjFecL3K448/Pm3hwoUPBAKBHFGIlmU5pRCRpMGEze12q2PHjh2zatWqeTt37gwODAxkOQIJhUJ6Y2Njn6IojFJqE0KYsGyPx0POnTvXnUgkfGvXrr1j5syZU7iFsKampv5YLBZ34GzbJgAwatSo7MzMTE95eXnZT37yk0dramr+PRQKZSQSCdPn88nBYNADID8UCmkAYBiGGQ6Hna6cksbdZliWZUuSRKPRKAAUBINBfywWM30+n+yEtenTp9+5YsWKGTt37oxwz+a44RwARc8+++xSr9eriQrY398v8311CUncTTHN0Q7Vl1OQJymq4iBwyxQPT8qDVwri1d1/i8ttp/AP39mOBeMn41pQx9mOGFSZ3qT52ZqMR6aMRGvXKfzbgX9Ea3PnSLEdOWXKlK/5/X4/AFy8ePHG6tWr90QikS5VVaOEEIsxRhljngcffLBi8+bNjxBCUFJSMrKkpMRvGIbboXP27Nn+2bNn/3cgEIgSQmKEEAOARQixKKVxRVEioVAoYtu2dMcdd4x24Hbv3t3+ox/96ONoNBqklMa4ppNkMinNnz8///nnn6/y+Xw0mUxaANy6rrsdl28YhguAX9d1F98jwn9TUjJkJ5N1DWV0ti0ByDAMw+PsbzQatX0+Hy0oKMhcvnz5nP3791+IxWJRIUaPfO655+ZVVlaOA4BoNGprmkZ5uJJThZouKyYAqOrWVEKoE7cwszQDlQUK3jr8S5y++iEIIXh55/fwylOH8e3KHHSEdfQnLFBuRbJEsLQyF27Sh3eO/iuudV+EaSuqkJF6MjMzs9xutwIAv/rVr06eOHHiEwCtPBHQOaPaxYsXLxcXF8cKCwtzOzo6+ltbW4OFhYU+h2nDMAgAqbu7W8xkLSEBcsos1bbtocZIIBBQs7Ky5Pb2dkvXdV1wfaipqemsqak5yF1bFABljNEU4Sj87nia1LKHCJWGLLh6AkDhiksAoLq6um/VqlWZWVlZ8gMPPHDHwoULK2tqasJcYJ7y8vKyb33rW/f4/X43YwybNm26vnnz5pIUb0tvVe44maSVjEfizDJtmwFlOS4srczGiQvv4ncnd4ASAkIo+mN92LLrB/j7Vb/GQxOz8Z/1PTDsQXc6p3QEqopU7Dr6S5y8fAiKpCKhs6SQSUqyLKsO4d7e3j4AvbxD1csFQQF4EolEaP369TVCFjuiqKiogG8w5s6dm8sY++ZwcfbZZ5/dvHXr1isnT55scVz+rFmz8urr6xc4Ls22bZZIJExd181oNGr09PREDx06dPmFF144Ho/HTVGIjiE4guECoyl1LYTPcppGEAghDAAikUjixRdfbHnppZfKfD6fa82aNfMOHz7cHgwGbwBwr1ix4u677rqrgsfU4I4dO66lCPZTXSkqpOaMa60e7mjuosw0RmYoWHf3SLT3NOKt91+CbsZBeOlDCcX5luP4rw9fw4wSH+4p9cMlU3xtpAfLJmej/vIR7PnjLyDRwXeKhoxubokWAOYkDXxTLE5brB11oTZMCrWoNQgymJwZhsHC4bAZjUaNaDRqxGIx3VnxeDzJky8TQGLHjh3n9u3bd6ytrS3U2dkZ6e3tjfX398cHBgYS8XjcIIQQr9frKioq8ldWVhb88Ic/vHfbtm3zAXhs25aHUx7uEt1COeXEXM3JfAWLvWnSxRhLbNu2rampqSlMCME3vvGNyXPmzKkCUFZeXn776tWr72WMwbZtvPDCCx+5XK6wo6BcOdhwQ4Chuu/KR39onDGS9T80u9ivkgiqD/0UbT2NcKvelMaEhXfrqlGaPwEPT5qH0lwvqopcaOtpxPb3/gmGmYBEFRBC0HUlfp67tQQALxMKYsaYU+tlcSadNN8NIOO+++4bnZ2d7Q+Hw+zIkSNJxtiQ9TQ1NUW3bNnSmJWVlZBlWaeUWs5SVTUxYsSIRF1dXScAwzTN2MMPP7w3Pz//ZFVVVUFubq7L6/VKmqZRl8ulKIriVlVVmz59ev6cOXMCLpeLLliwYDyAOpGm08SglA659mQy6eHTrwiPtRYXbi6vP2/yjI61AoDL5Ur09vZ2bt++/ezGjRvvppSSjRs3Lti9e/fvnnzyyfHjx48fyRjDwYMHL9TW1jYWFhZ6xfIs3UhUTlPQRwGE9Gv/c/ba9YGi2rPv0FONf/iUUB3Lj8SDqD60GYtmdGBcYSVOnL+K39b9Gp19zVDkwZzBSpLY9Qv9Z3lKHgOgmaYZd9zg1KlTS994441L3G3lcD6oo/1btmxZFwgEctrb27vWrFlzwLIs2cmKW1pa4q+//vp1AbchdIKiPGZHAJDFixcHpk+ffnsoFNLefvvt3ra2Nl0YSDhdt4zy8vLwsWPHsl0ul6ooigSACuEZXKBJwzAMxhhUVZW8Xm8uH5hQ3mCwOf95VVVVYx03yQVhUEpNQbBxADfefPPN6NKlS8dUVlYWVlZW5r344osz1q1bV8IYQzAYjFVXV5+IxWIdkiTlpfDCUgcC6Sw2CqBvw4ZN+7/9d+Wzo1avT5HU9N1tMpj4dfU14z/efxletx9xPYpIPAhVccO2bVBKcf189I/h3mSLkBi5b9y40RWLxZJer9f12GOPTa6oqMjq6enpJYQYlFLGyx21tLQ0MGnSpDGEECQSCZMQIjuNCF6aqI8++mheVlZWJrdYkzcoLEVREj6fL1FfX39x165dzfPnzy/7/ve/v1LXdWvlypVde/bsuRKLxQyn1LEsS2aMeebNm1fs8/lkxhgsy7IAJBRF0Yc2TZZ1AANNTU0djoJt2rRpzqxZs/K6urq6JUnSCSHMMAxZ07SsxYsXV1JKCWMMAwMDMQBhVVWTjtU6gr1y5Yq1d+/ej8aNG5eraZr6zDPPjPV4PBJjDLW1ted27dr1MYCYqqpDcpMkyRIaEyydxToxNgagr7e3t+XEe0rNxPkjnvhTznNr4Sb0KBL6YO9BovJQnRXptTqaPgr9wTLsDgAhTkOurq4+unz58vs1TRvl9/vVuXPnljHGxgqxw2GcEjLYJLlw4cKV06dPd06bNo04+MePH+/ftm3bNNG1iW5KVVVl//79ew4cONC8d+/ey88884ysKIp85513jpo8eXJh2pHX4EUIITh58uRFAN1utzvHcb0ejycGoKuurk5vbW29u7i4ODB69OisJ5988i4xxDhsKIoiEUJgmqZ94MCBOgBdmqaVODxrmhbhiaP+4x//+N2lS5dOmjBhwhiPxyMBQFdXV191dfX7tm23AdBdLtdQzFYUxWmb3iRcmqbh7vQfOz9+v/PdjvP6kcHuE288MJZWuM4Smw1mgkQvHw/v6Wga+BjADY53AEDfmTNnLq9du/Znp06datB13RA3ROwGmaZphcPhgX379v326aefftO27Tafz9fJGGOmadqMMSbLMpEkiaZbjDFommYQQsK1tbWNr7zyymvhcLifEIJbwRBCmGVZ1vHjxz9atGjRLwA0Z2dndzpdHb/fHwTQcuLEiYann3761fPnz3+i67pBCCGUUkoIofwjpZQS27ZZd3f3ja1bt1Zv3LhxL4CrmZmZPYQQkxCCjIyMEIB2AG0Amrdv3/6beDweNwzD1nXdPHXq1Indu3cf48+7MjIyupw98ng8EW4wCWH4kHbQLgsnJ4oAlN332Ji1hbeps6lEaLohQLrhQCJi9zcei77TcLh9H4CrALp4rLN5LBvBE4scAP6JEyfmBQIBL6VUopSCMcYGBgYSly5dCvX19YW5QkQAmD6fz3PvvfeWxmIxr2EYHqFXPBRrKKWWJEmG1+uNtbW1dTU0NNzgz7wA/OXl5bkFBQV+XsYQwVpZMpk0jh8/3snpRQCYo0aN8k6YMCHX5XLRa9euBRsaGnr4Jnp458c7ceLEbK/X6xL5MQzDbGhoCNq2HeO4YgBYWVmZv6KiIkdVVbS0tHQ3NDR0CsORrDlz5oyllHoYY3p9ff31cDjczeGhaVrGkiVLSg3DkLu7u/s+/PDDFn4UKeJYLhnmAJvGs9QCAKOnLMhfNHqSNl/LlHOpTORbWa4et2ORXqv1wgf9NVfO9B7nTYcuPvlICq02t9CJ8ggjOJomodOF0ZQtHNvxCC08pBnbmcIhO53jdA7mpXaKUkOSWGoxYaaKlIa7IozT0uET+XDGehDGhhBGb6bTmBHezeb8OyNPCPQk/ptzeHConCSfcZDNI1hWQXaBVl5254hZmSPVce4MKUdxEQ+VJMnUbcNIWJFoyOzoa02eOX2k+yg/79TFNWkgZchOUobe4vA63WzUEmpYsa+dCoM0Izgz5aQkTUOPpGvUpKFJBaUR8Q03cLdT8NkppyEgPGOCYcnCiNASsn2SwrstDA2Gxnbkc5xSdHGrcmaBWYoqZ+YUe4pcXuqXJCobupWIhaze3vZohzAfdOaKN2mSwPxwR0ZSZ6uptZoIN9yxFCYIiqV5v3THStgwNNPhvtXxFgzDP9K8q52Cj6ZRNnaLffoUDfI5zhVLgrvxCN0Ux5URYXYYF84Wf2qqf4uDV591ZuiLHir7c8F+mZOU5M+Iazg8n3mYjnxORkV3I6dxg6KrMQW3Yaexlq+uv8D1v2IL+t4z3B/NAAAAAElFTkSuQmCC",B=function(a,g){a=v(a),g=e(g,{});var h=document.createElement("div");h.className="cesium-widget",a.appendChild(h);var i=document.createElement("canvas");i.oncontextmenu=function(){return!1},i.onselectstart=function(){return!1},h.appendChild(i);var k=document.createElement("div");k.className="cesium-widget-credits";var l=f(g.creditContainer)?v(g.creditContainer):h;l.appendChild(k),this._element=h,this._container=a,this._canvas=i,this._canvasWidth=0,this._canvasHeight=0,this._creditContainer=k,this._canRender=!1,this._renderLoopRunning=!1,this._showRenderLoopErrors=e(g.showRenderLoopErrors,!0),this._resolutionScale=1,this._forceResize=!1,this._clock=f(g.clock)?g.clock:new c,y(this);try{var x=new q({canvas:i,contextOptions:g.contextOptions,creditContainer:k,mapProjection:g.mapProjection,orderIndependentTranslucency:g.orderIndependentTranslucency,scene3DOnly:e(g.scene3DOnly,!1)});this._scene=x,x.camera.constrainedAxis=b.UNIT_Z,z(this);var B=j.WGS84,C=x.frameState.creditDisplay,D=new d("Cesium",A,"http://cesiumjs.org/");C.addDefaultCredit(D);var E=new o(B);this._globe=E,x.globe=E;var F=g.skyBox;f(F)||(F=new t({sources:{positiveX:w("px"),negativeX:w("mx"),positiveY:w("py"),negativeY:w("my"),positiveZ:w("pz"),negativeZ:w("mz")}})),x.skyBox=F,x.skyAtmosphere=new s(B),x.sun=new u,x.moon=new p;var G=g.imageryProvider;f(G)||(G=new n({url:"//dev.virtualearth.net"})),G!==!1&&x.imageryLayers.addImageryProvider(G),f(g.terrainProvider)&&(x.terrainProvider=g.terrainProvider),this._screenSpaceEventHandler=new m(i),f(g.sceneMode)&&(g.sceneMode===r.SCENE2D&&this._scene.morphTo2D(0),g.sceneMode===r.COLUMBUS_VIEW&&this._scene.morphToColumbusView(0)),this._useDefaultRenderLoop=void 0,this.useDefaultRenderLoop=e(g.useDefaultRenderLoop,!0),this._targetFrameRate=void 0,this.targetFrameRate=g.targetFrameRate;var H=this;x.renderError.addEventListener(function(a,b){if(H._useDefaultRenderLoop=!1,H._renderLoopRunning=!1,H._showRenderLoopErrors){var c="An error occurred while rendering.  Rendering has stopped.";H.showErrorPanel(c,void 0,b)}})}catch(a){var I="Error constructing CesiumWidget.",J='Visit <a href="http://get.webgl.org">http://get.webgl.org</a> to verify that your web browser and hardware support WebGL.  Consider trying a different web browser or updating your video drivers.  Detailed error information is below:';throw this.showErrorPanel(I,J,a),a}};return g(B.prototype,{container:{get:function(){return this._container}},canvas:{get:function(){return this._canvas}},creditContainer:{get:function(){return this._creditContainer}},scene:{get:function(){return this._scene}},clock:{get:function(){return this._clock}},screenSpaceEventHandler:{get:function(){return this._screenSpaceEventHandler}},targetFrameRate:{get:function(){return this._targetFrameRate},set:function(a){if(0>=a)throw new i("targetFrameRate must be greater than 0.");this._targetFrameRate=a}},useDefaultRenderLoop:{get:function(){return this._useDefaultRenderLoop},set:function(a){this._useDefaultRenderLoop!==a&&(this._useDefaultRenderLoop=a,a&&!this._renderLoopRunning&&x(this))}},resolutionScale:{get:function(){return this._resolutionScale},set:function(a){if(0>=a)throw new i("resolutionScale must be greater than 0.");this._resolutionScale=a,this._forceResize=!0}}}),B.prototype.showErrorPanel=function(a,b,c){var d=this._element,e=document.createElement("div");e.className="cesium-widget-errorPanel";var g=document.createElement("div");g.className="cesium-widget-errorPanel-content",e.appendChild(g);var h=document.createElement("div");h.className="cesium-widget-errorPanel-header",h.appendChild(document.createTextNode(a)),g.appendChild(h);var i=document.createElement("div");i.className="cesium-widget-errorPanel-scroll",g.appendChild(i);var j=function(){i.style.maxHeight=Math.max(Math.round(.9*d.clientHeight-100),30)+"px"};if(j(),f(window.addEventListener)&&window.addEventListener("resize",j,!1),f(b)){var l=document.createElement("div");l.className="cesium-widget-errorPanel-message",l.innerHTML="<p>"+b+"</p>",i.appendChild(l)}var m="(no error details available)";f(c)&&(m=k(c));var n=document.createElement("div");n.className="cesium-widget-errorPanel-message",n.appendChild(document.createTextNode(m)),i.appendChild(n);var o=document.createElement("div");o.className="cesium-widget-errorPanel-buttonPanel",g.appendChild(o);var p=document.createElement("button");p.setAttribute("type","button"),p.className="cesium-button",p.appendChild(document.createTextNode("OK")),p.onclick=function(){f(j)&&f(window.removeEventListener)&&window.removeEventListener("resize",j,!1),d.removeChild(e)},o.appendChild(p),d.appendChild(e),console.error(a+"\n"+b+"\n"+m)},B.prototype.isDestroyed=function(){return!1},B.prototype.destroy=function(){this._scene=this._scene&&this._scene.destroy(),this._container.removeChild(this._element),h(this)},B.prototype.resize=function(){var a=this._canvas,b=a.clientWidth,c=a.clientHeight;(this._forceResize||this._canvasWidth!==b||this._canvasHeight!==c)&&(this._forceResize=!1,y(this),z(this))},B.prototype.render=function(){this._scene.initializeFrame();var a=this._clock.tick();this._canRender&&this._scene.render(a)},B}),c("Widgets/ClockViewModel",["../Core/Clock","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/EventHelper","../Core/JulianDate","../ThirdParty/knockout"],function(a,b,c,d,e,f,g){"use strict";var h=function(c){b(c)||(c=new a),this._clock=c,this._eventHelper=new e,this._eventHelper.add(c.onTick,this.synchronize,this);var d=g.observable(c.startTime);d.equalityComparer=f.equals,this.systemTime=g.observable(f.now()),this.systemTime.equalityComparer=f.equals,g.track(this,["systemTime"]),this.startTime=void 0,g.defineProperty(this,"startTime",{get:d,set:function(a){d(a),c.startTime=a}});var h=g.observable(c.stopTime);h.equalityComparer=f.equals,this.stopTime=void 0,g.defineProperty(this,"stopTime",{get:h,set:function(a){c.stopTime=a,h(a)}});var i=g.observable(c.currentTime);i.equalityComparer=f.equals,this.currentTime=void 0,g.defineProperty(this,"currentTime",{get:i,set:function(a){c.currentTime=a,i(a)}});var j=g.observable(c.multiplier);this.multiplier=void 0,g.defineProperty(this,"multiplier",{get:j,set:function(a){c.multiplier=a,j(a)}});var k=g.observable(c.clockStep);k.equalityComparer=function(a,b){return a===b},this.clockStep=void 0,g.defineProperty(this,"clockStep",{get:k,set:function(a){k(a),c.clockStep=a}});var l=g.observable(c.clockRange);l.equalityComparer=function(a,b){return a===b},this.clockRange=void 0,g.defineProperty(this,"clockRange",{get:l,set:function(a){l(a),c.clockRange=a}});var m=g.observable(c.canAnimate);this.canAnimate=void 0,g.defineProperty(this,"canAnimate",{get:m,set:function(a){m(a),c.canAnimate=a}});var n=g.observable(c.shouldAnimate);this.shouldAnimate=void 0,g.defineProperty(this,"shouldAnimate",{get:n,set:function(a){n(a),c.shouldAnimate=a}})};return c(h.prototype,{clock:{get:function(){return this._clock}}}),h.prototype.synchronize=function(){var a=this._clock,b=a.startTime,c=a.stopTime,d=a.currentTime,e=a.multiplier,g=a.clockStep,h=a.clockRange,i=a.canAnimate,j=a.shouldAnimate;this.systemTime=f.now(),this.startTime=b,this.stopTime=c,this.currentTime=d,this.multiplier=e,this.clockStep=g,this.clockRange=h,this.canAnimate=i,this.shouldAnimate=j},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){this._eventHelper.removeAll(),d(this)},h}),c("Widgets/Command",["../Core/DeveloperError"],function(a){"use strict";var b=function(){this.canExecute=void 0,this.beforeExecute=void 0,this.afterExecute=void 0,a.throwInstantiationError()};return b}),c("Widgets/FullscreenButton/FullscreenButtonViewModel",["../../Core/defaultValue","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../Core/Fullscreen","../../ThirdParty/knockout","../createCommand"],function(a,b,c,d,e,f,g){"use strict";var h=function(b){var c=this,d=f.observable(e.fullscreen),h=f.observable(e.enabled);this.isFullscreen=void 0,f.defineProperty(this,"isFullscreen",{get:function(){return d()}}),this.isFullscreenEnabled=void 0,f.defineProperty(this,"isFullscreenEnabled",{get:function(){return h()},set:function(a){h(a&&e.enabled)}}),this.tooltip=void 0,f.defineProperty(this,"tooltip",function(){return this.isFullscreenEnabled?d()?"Exit full screen":"Full screen":"Full screen unavailable"}),this._command=g(function(){e.fullscreen?e.exitFullscreen():e.requestFullscreen(c._fullscreenElement)},f.getObservable(this,"isFullscreenEnabled")),this._fullscreenElement=a(b,document.body),this._callback=function(){d(e.fullscreen)},document.addEventListener(e.changeEventName,this._callback)};return b(h.prototype,{fullscreenElement:{get:function(){return this._fullscreenElement},set:function(a){this._fullscreenElement=a}},command:{get:function(){return this._command}}}),h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){document.removeEventListener(e.changeEventName,this._callback),c(this)},h}),c("Widgets/FullscreenButton/FullscreenButton",["../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../ThirdParty/knockout","../getElement","./FullscreenButtonViewModel"],function(a,b,c,d,e,f,g){"use strict";var h="M 83.96875 17.5625 L 83.96875 17.59375 L 76.65625 24.875 L 97.09375 24.96875 L 76.09375 45.96875 L 81.9375 51.8125 L 102.78125 30.9375 L 102.875 51.15625 L 110.15625 43.875 L 110.1875 17.59375 L 83.96875 17.5625 z M 44.125 17.59375 L 17.90625 17.625 L 17.9375 43.90625 L 25.21875 51.1875 L 25.3125 30.96875 L 46.15625 51.8125 L 52 45.96875 L 31 25 L 51.4375 24.90625 L 44.125 17.59375 z M 46.0625 76.03125 L 25.1875 96.875 L 25.09375 76.65625 L 17.8125 83.9375 L 17.8125 110.21875 L 44 110.25 L 51.3125 102.9375 L 30.90625 102.84375 L 51.875 81.875 L 46.0625 76.03125 z M 82 76.15625 L 76.15625 82 L 97.15625 103 L 76.71875 103.0625 L 84.03125 110.375 L 110.25 110.34375 L 110.21875 84.0625 L 102.9375 76.8125 L 102.84375 97 L 82 76.15625 z",i="M 104.34375 17.5625 L 83.5 38.4375 L 83.40625 18.21875 L 76.125 25.5 L 76.09375 51.78125 L 102.3125 51.8125 L 102.3125 51.78125 L 109.625 44.5 L 89.1875 44.40625 L 110.1875 23.40625 L 104.34375 17.5625 z M 23.75 17.59375 L 17.90625 23.4375 L 38.90625 44.4375 L 18.5 44.53125 L 25.78125 51.8125 L 52 51.78125 L 51.96875 25.53125 L 44.6875 18.25 L 44.625 38.46875 L 23.75 17.59375 z M 25.6875 76.03125 L 18.375 83.3125 L 38.78125 83.40625 L 17.8125 104.40625 L 23.625 110.25 L 44.5 89.375 L 44.59375 109.59375 L 51.875 102.3125 L 51.875 76.0625 L 25.6875 76.03125 z M 102.375 76.15625 L 76.15625 76.1875 L 76.1875 102.4375 L 83.46875 109.71875 L 83.5625 89.53125 L 104.40625 110.375 L 110.25 104.53125 L 89.25 83.53125 L 109.6875 83.46875 L 102.375 76.15625 z",j=function(a,b){a=f(a);var c=new g(b);c._exitFullScreenPath=i,c._enterFullScreenPath=h;var d=document.createElement("button");d.type="button",d.className="cesium-button cesium-fullscreenButton",d.setAttribute("data-bind","attr: { title: tooltip },click: command,enable: isFullscreenEnabled,cesiumSvgPath: { path: isFullscreen ? _exitFullScreenPath : _enterFullScreenPath, width: 128, height: 128 }"),a.appendChild(d),e.applyBindings(c,d),this._container=a,this._viewModel=c,this._element=d};return b(j.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),j.prototype.isDestroyed=function(){return!1},j.prototype.destroy=function(){return this._viewModel.destroy(),e.cleanNode(this._element),this._container.removeChild(this._element),c(this)},j}),c("Widgets/Geocoder/GeocoderViewModel",["../../Core/BingMapsApi","../../Core/defaultValue","../../Core/defined","../../Core/defineProperties","../../Core/DeveloperError","../../Core/jsonp","../../Core/Matrix4","../../Core/Rectangle","../../ThirdParty/knockout","../../ThirdParty/when","../createCommand"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a){var b=a.searchText;if(!/^\s*$/.test(b)){a._isSearchInProgress=!0;var d=f(a._url+"REST/v1/Locations",{parameters:{query:b,key:a._key},callbackParameterName:"jsonp"}),e=a._geocodeInProgress=j(d,function(b){if(!e.cancel){if(a._isSearchInProgress=!1,0===b.resourceSets.length)return a.searchText=a._searchText+" (not found)",void 0;var d=b.resourceSets[0];if(0===d.resources.length)return a.searchText=a._searchText+" (not found)",void 0;var f=d.resources[0];a._searchText=f.name;var i=f.bbox,j=i[0],k=i[1],l=i[2],m=i[3],n=h.fromDegrees(k,j,m,l),o=a._scene.camera,p=o.getRectangleCameraCoordinates(n);c(p)&&a._scene.camera.flyTo({destination:p,duration:a._flightDuration,endTransform:g.IDENTITY,convert:!1})}},function(){e.cancel||(a._isSearchInProgress=!1,a.searchText=a._searchText+" (error)")})}}function m(a){a._isSearchInProgress=!1,c(a._geocodeInProgress)&&(a._geocodeInProgress.cancel=!0,a._geocodeInProgress=void 0)}var n=function(c){this._url=b(c.url,"//dev.virtualearth.net/"),this._url.length>0&&"/"!==this._url[this._url.length-1]&&(this._url+="/"),this._key=a.getKey(c.key),this._scene=c.scene,this._flightDuration=b(c.flightDuration,1.5),this._searchText="",this._isSearchInProgress=!1,this._geocodeInProgress=void 0;var d=this;this._searchCommand=k(function(){d.isSearchInProgress?m(d):l(d)}),i.track(this,["_searchText","_isSearchInProgress"]),this.isSearchInProgress=void 0,i.defineProperty(this,"isSearchInProgress",{get:function(){return this._isSearchInProgress}}),this.searchText=void 0,i.defineProperty(this,"searchText",{get:function(){return this.isSearchInProgress?"Searching...":this._searchText},set:function(a){this._searchText=a}}),this.flightDuration=void 0,i.defineProperty(this,"flightDuration",{get:function(){return this._flightDuration},set:function(a){this._flightDuration=a}})};return d(n.prototype,{url:{get:function(){return this._url}},key:{get:function(){return this._key}},scene:{get:function(){return this._scene}},search:{get:function(){return this._searchCommand}}}),n}),c("Widgets/Geocoder/Geocoder",["../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../ThirdParty/knockout","../getElement","./GeocoderViewModel"],function(a,b,c,d,e,f,g){"use strict";var h="M29.772,26.433l-7.126-7.126c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127L29.772,26.433zM7.203,13.885c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486c-0.007,3.58-2.905,6.476-6.484,6.484C10.106,20.361,7.209,17.465,7.203,13.885z",i="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z",j=function(a){var b=f(a.container),c=new g(a);c._startSearchPath=h,c._stopSearchPath=i;var d=document.createElement("form");d.setAttribute("data-bind","submit: search");var j=document.createElement("input");j.type="search",j.className="cesium-geocoder-input",j.setAttribute("placeholder","Enter an address or landmark..."),j.setAttribute("data-bind",'value: searchText,valueUpdate: "afterkeydown",disable: isSearchInProgress,css: { "cesium-geocoder-input-wide" : searchText.length > 0 }'),d.appendChild(j);var k=document.createElement("span");k.className="cesium-geocoder-searchButton",k.setAttribute("data-bind","click: search,cesiumSvgPath: { path: isSearchInProgress ? _stopSearchPath : _startSearchPath, width: 32, height: 32 }"),d.appendChild(k),b.appendChild(d),e.applyBindings(c,d),this._container=b,this._viewModel=c,this._form=d,this._onInputBegin=function(a){b.contains(a.target)||j.blur()},this._onInputEnd=function(a){b.contains(a.target)&&j.focus()},document.addEventListener("mousedown",this._onInputBegin,!0),document.addEventListener("mouseup",this._onInputEnd,!0),document.addEventListener("touchstart",this._onInputBegin,!0),document.addEventListener("touchend",this._onInputEnd,!0)};return b(j.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),j.prototype.isDestroyed=function(){return!1},j.prototype.destroy=function(){return document.removeEventListener("mousedown",this._onInputBegin,!0),document.removeEventListener("mouseup",this._onInputEnd,!0),document.removeEventListener("touchstart",this._onInputBegin,!0),document.removeEventListener("touchend",this._onInputEnd,!0),e.cleanNode(this._form),this._container.removeChild(this._form),c(this)},j}),c("Widgets/HomeButton/HomeButtonViewModel",["../../Core/Cartesian3","../../Core/defaultValue","../../Core/defined","../../Core/defineProperties","../../Core/DeveloperError","../../Core/Matrix4","../../Core/Rectangle","../../Scene/Camera","../../Scene/SceneMode","../../ThirdParty/knockout","../createCommand"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(b,d){var e=b.mode;c(b)&&e===i.MORPHING&&b.completeMorph();var j,k,l;if(e===i.SCENE2D)b.camera.flyToRectangle({destination:g.MAX_VALUE,duration:d,endTransform:f.IDENTITY});else if(e===i.SCENE3D){var m=b.camera.getRectangleCameraCoordinates(h.DEFAULT_VIEW_RECTANGLE),n=a.magnitude(m);n+=n*h.DEFAULT_VIEW_FACTOR,a.normalize(m,m),a.multiplyByScalar(m,n,m),j=a.normalize(m,new a),a.negate(j,j),k=a.cross(j,a.UNIT_Z,new a),l=a.cross(k,j,new a),b.camera.flyTo({destination:m,direction:j,up:l,duration:d,endTransform:f.IDENTITY})}else if(e===i.COLUMBUS_VIEW){var o=b.globe.ellipsoid.maximumRadius,p=new a(0,-1,1);p=a.multiplyByScalar(a.normalize(p,p),5*o,p),j=new a,j=a.normalize(a.subtract(a.ZERO,p,j),j),k=a.cross(j,a.UNIT_Z,new a),l=a.cross(k,j,new a),b.camera.flyTo({destination:p,duration:d,up:l,direction:j,endTransform:f.IDENTITY,convert:!1})}}var m=function(a,c){c=b(c,1.5),this._scene=a,this._duration=c;var d=this;this._command=k(function(){l(d._scene,d._duration)}),this.tooltip="View Home",j.track(this,["tooltip"])};return d(m.prototype,{scene:{get:function(){return this._scene}},command:{get:function(){return this._command}},duration:{get:function(){return this._duration},set:function(a){this._duration=a}}}),m}),c("Widgets/HomeButton/HomeButton",["../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../ThirdParty/knockout","../getElement","./HomeButtonViewModel"],function(a,b,c,d,e,f,g){"use strict";var h=function(a,b,c){a=f(a);var d=new g(b,c);d._svgPath="M14,4l-10,8.75h20l-4.25-3.7188v-4.6562h-2.812v2.1875l-2.938-2.5625zm-7.0938,9.906v10.094h14.094v-10.094h-14.094zm2.1876,2.313h3.3122v4.25h-3.3122v-4.25zm5.8442,1.281h3.406v6.438h-3.406v-6.438z";var h=document.createElement("button");h.type="button",h.className="cesium-button cesium-toolbar-button cesium-home-button",h.setAttribute("data-bind","attr: { title: tooltip },click: command,cesiumSvgPath: { path: _svgPath, width: 28, height: 28 }"),a.appendChild(h),e.applyBindings(d,h),this._container=a,this._viewModel=d,this._element=h};return b(h.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return e.cleanNode(this._element),this._container.removeChild(this._element),c(this)},h}),c("Widgets/InfoBox/InfoBoxViewModel",["../../Core/defaultValue","../../Core/defined","../../Core/defineProperties","../../Core/Event","../../Core/formatError","../../Core/TaskProcessor","../../ThirdParty/knockout","../../ThirdParty/when"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){return b(m)||(m=new f("sanitizeHtml",1/0)),m.scheduleTask(a)}var j="M 13.84375 7.03125 C 11.412798 7.03125 9.46875 8.975298 9.46875 11.40625 L 9.46875 11.59375 L 2.53125 7.21875 L 2.53125 24.0625 L 9.46875 19.6875 C 9.4853444 22.104033 11.423165 24.0625 13.84375 24.0625 L 25.875 24.0625 C 28.305952 24.0625 30.28125 22.087202 30.28125 19.65625 L 30.28125 11.40625 C 30.28125 8.975298 28.305952 7.03125 25.875 7.03125 L 13.84375 7.03125 z",k="M 27.34375 1.65625 L 5.28125 27.9375 L 8.09375 30.3125 L 30.15625 4.03125 L 27.34375 1.65625 z M 13.84375 7.03125 C 11.412798 7.03125 9.46875 8.975298 9.46875 11.40625 L 9.46875 11.59375 L 2.53125 7.21875 L 2.53125 24.0625 L 9.46875 19.6875 C 9.4724893 20.232036 9.5676108 20.7379 9.75 21.21875 L 21.65625 7.03125 L 13.84375 7.03125 z M 28.21875 7.71875 L 14.53125 24.0625 L 25.875 24.0625 C 28.305952 24.0625 30.28125 22.087202 30.28125 19.65625 L 30.28125 11.40625 C 30.28125 9.8371439 29.456025 8.4902779 28.21875 7.71875 z",l=function(){this._sanitizer=void 0,this._descriptionRawHtml="",this._descriptionSanitizedHtml="",this._cameraClicked=new d,this._closeClicked=new d,this.maxHeight=500,this.enableCamera=!1,this.isCameraTracking=!1,this.showInfo=!1,this.titleText="",this.loadingIndicatorHtml='<div class="cesium-infoBox-loadingContainer"><span class="cesium-infoBox-loading"></span></div>',g.track(this,["showInfo","titleText","_descriptionRawHtml","_descriptionSanitizedHtml","maxHeight","enableCamera","isCameraTracking"]),this.descriptionRawHtml=void 0,g.defineProperty(this,"descriptionRawHtml",{get:function(){return this._descriptionRawHtml},set:function(a){if(this._descriptionRawHtml!==a){this._descriptionRawHtml=a,this._descriptionSanitizedHtml=this.loadingIndicatorHtml;var b=this;h(this.sanitizer(a),function(c){b._descriptionRawHtml===a&&(b._descriptionSanitizedHtml=c)}).otherwise(function(a){console.log("An error occurred while sanitizing HTML: "+e(a))})}}}),this.descriptionSanitizedHtml=void 0,g.defineProperty(this,"descriptionSanitizedHtml",{get:function(){return this._descriptionSanitizedHtml}}),this.cameraIconPath=void 0,g.defineProperty(this,"cameraIconPath",{get:function(){return this.enableCamera||this.isCameraTracking?j:k}}),g.defineProperty(this,"_bodyless",{get:function(){return!this._descriptionSanitizedHtml}})};l.prototype.maxHeightOffset=function(a){return this.maxHeight-a+"px"};var m;return l.defaultSanitizer=i,c(l.prototype,{cameraClicked:{get:function(){return this._cameraClicked}},closeClicked:{get:function(){return this._closeClicked}},sanitizer:{get:function(){return a(this._sanitizer,l.defaultSanitizer)},set:function(a){this._sanitizer=a;var b=this._descriptionRawHtml;this._descriptionRawHtml="",this.descriptionRawHtml=b}}}),l}),c("Widgets/InfoBox/InfoBox",["../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../ThirdParty/knockout","../getElement","./InfoBoxViewModel"],function(a,b,c,d,e,f,g){"use strict";var h=function(a){a=f(a),this._container=a;var b=document.createElement("div");b.className="cesium-infoBox",b.setAttribute("data-bind",'css: { "cesium-infoBox-visible" : showInfo, "cesium-infoBox-bodyless" : _bodyless }'),a.appendChild(b),this._element=b;var c=document.createElement("div");c.className="cesium-infoBox-title",c.setAttribute("data-bind","text: titleText"),b.appendChild(c);var d=document.createElement("button");d.type="button",d.className="cesium-button cesium-infoBox-camera",d.setAttribute("data-bind",'attr: { title: "Focus camera on object" },click: function () { cameraClicked.raiseEvent(); },enable: enableCamera,cesiumSvgPath: { path: cameraIconPath, width: 32, height: 32 }'),b.appendChild(d);var h=document.createElement("button");h.type="button",h.className="cesium-infoBox-close",h.setAttribute("data-bind","click: function () { closeClicked.raiseEvent(); }"),h.innerHTML="&times;",b.appendChild(h);var i=document.createElement("div");i.className="cesium-infoBox-body",b.appendChild(i);var j=document.createElement("div");j.className="cesium-infoBox-description",j.setAttribute("data-bind","html: descriptionSanitizedHtml,style : { maxHeight : maxHeightOffset(40) }"),i.appendChild(j);var k=new g;this._viewModel=k,e.applyBindings(this._viewModel,b)};return b(h.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){var a=this._container;return e.cleanNode(this._element),a.removeChild(this._element),c(this)},h}),c("Widgets/NavigationHelpButton/NavigationHelpButtonViewModel",["../../Core/defineProperties","../../ThirdParty/knockout","../createCommand"],function(a,b,c){"use strict";var d=function(){this.showInstructions=!1;var a=this;this._command=c(function(){a.showInstructions=!a.showInstructions}),this._showClick=c(function(){a._touch=!1}),this._showTouch=c(function(){a._touch=!0}),this._touch=!1,this.tooltip="Navigation Instructions",b.track(this,["tooltip","showInstructions","_touch"])};return a(d.prototype,{command:{get:function(){return this._command}},showClick:{get:function(){return this._showClick}},showTouch:{get:function(){
return this._showTouch}}}),d}),c("Widgets/NavigationHelpButton/NavigationHelpButton",["../../Core/buildModuleUrl","../../Core/defaultValue","../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../ThirdParty/knockout","../getElement","./NavigationHelpButtonViewModel"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(c){var d=h(c.container),e=new i,f=b(c.instructionsInitiallyVisible,!1);e.showInstructions=f,e._svgPath="M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466z M17.328,24.371h-2.707v-2.596h2.707V24.371zM17.328,19.003v0.858h-2.707v-1.057c0-3.19,3.63-3.696,3.63-5.963c0-1.034-0.924-1.826-2.134-1.826c-1.254,0-2.354,0.924-2.354,0.924l-1.541-1.915c0,0,1.519-1.584,4.137-1.584c2.487,0,4.796,1.54,4.796,4.136C21.156,16.208,17.328,16.627,17.328,19.003z";var j=document.createElement("span");j.className="cesium-navigationHelpButton-wrapper",d.appendChild(j);var k=document.createElement("button");k.type="button",k.className="cesium-button cesium-toolbar-button cesium-navigation-help-button",k.setAttribute("data-bind","attr: { title: tooltip },click: command,cesiumSvgPath: { path: _svgPath, width: 32, height: 32 }"),j.appendChild(k);var l=document.createElement("div");l.className="cesium-navigation-help",l.setAttribute("data-bind",'css: { "cesium-navigation-help-visible" : showInstructions}'),j.appendChild(l);var m=document.createElement("button");m.className="cesium-navigation-button cesium-navigation-button-left",m.setAttribute("data-bind",'click: showClick, css: {"cesium-navigation-button-selected": !_touch, "cesium-navigation-button-unselected": _touch}');var n=document.createElement("img");n.src=a("Widgets/Images/NavigationHelp/Mouse.svg"),n.className="cesium-navigation-button-icon",n.style.width="25px",n.style.height="25px",m.appendChild(n),m.appendChild(document.createTextNode("Mouse"));var o=document.createElement("button");o.className="cesium-navigation-button cesium-navigation-button-right",o.setAttribute("data-bind",'click: showTouch, css: {"cesium-navigation-button-selected": _touch, "cesium-navigation-button-unselected": !_touch}');var p=document.createElement("img");p.src=a("Widgets/Images/NavigationHelp/Touch.svg"),p.className="cesium-navigation-button-icon",p.style.width="25px",p.style.height="25px",o.appendChild(p),o.appendChild(document.createTextNode("Touch")),l.appendChild(m),l.appendChild(o);var q=document.createElement("div");q.className="cesium-click-navigation-help cesium-navigation-help-instructions",q.setAttribute("data-bind",'css: { "cesium-click-navigation-help-visible" : !_touch}'),q.innerHTML='            <table>                <tr>                    <td><img src="'+a("Widgets/Images/NavigationHelp/MouseLeft.svg")+'" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-pan">Pan view</div>                        <div class="cesium-navigation-help-details">Left click + drag</div>                    </td>                </tr>                <tr>                    <td><img src="'+a("Widgets/Images/NavigationHelp/MouseRight.svg")+'" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-zoom">Zoom view</div>                        <div class="cesium-navigation-help-details">Right click + drag, or</div>                        <div class="cesium-navigation-help-details">Mouse wheel scroll</div>                    </td>                </tr>                <tr>                    <td><img src="'+a("Widgets/Images/NavigationHelp/MouseMiddle.svg")+'" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-rotate">Rotate view</div>                        <div class="cesium-navigation-help-details">Middle click + drag, or</div>                        <div class="cesium-navigation-help-details">CTRL + Left click + drag</div>                    </td>                </tr>            </table>',l.appendChild(q);var r=document.createElement("div");r.className="cesium-touch-navigation-help cesium-navigation-help-instructions",r.setAttribute("data-bind",'css: { "cesium-touch-navigation-help-visible" : _touch}'),r.innerHTML='            <table>                <tr>                    <td><img src="'+a("Widgets/Images/NavigationHelp/TouchDrag.svg")+'" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-pan">Pan view</div>                        <div class="cesium-navigation-help-details">One finger drag</div>                    </td>                </tr>                <tr>                    <td><img src="'+a("Widgets/Images/NavigationHelp/TouchZoom.svg")+'" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-zoom">Zoom view</div>                        <div class="cesium-navigation-help-details">Two finger pinch</div>                    </td>                </tr>                <tr>                    <td><img src="'+a("Widgets/Images/NavigationHelp/TouchTilt.svg")+'" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-rotate">Tilt view</div>                        <div class="cesium-navigation-help-details">Two finger drag, same direction</div>                    </td>                </tr>                <tr>                    <td><img src="'+a("Widgets/Images/NavigationHelp/TouchRotate.svg")+'" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-tilt">Rotate view</div>                        <div class="cesium-navigation-help-details">Two finger drag, opposite direction</div>                    </td>                </tr>            </table>',l.appendChild(r),g.applyBindings(e,j),this._container=d,this._viewModel=e,this._wrapper=j,this._closeInstructions=function(a){j.contains(a.target)||(e.showInstructions=!1)},document.addEventListener("mousedown",this._closeInstructions,!0),document.addEventListener("touchstart",this._closeInstructions,!0)};return d(j.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),j.prototype.isDestroyed=function(){return!1},j.prototype.destroy=function(){return document.removeEventListener("mousedown",this._closeInstructions,!0),document.removeEventListener("touchstart",this._closeInstructions,!0),g.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),e(this)},j}),c("Widgets/PerformanceWatchdog/PerformanceWatchdogViewModel",["../../Core/defaultValue","../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../Scene/FrameRateMonitor","../../ThirdParty/knockout","../createCommand"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(b){this._scene=b.scene,this.lowFrameRateMessage=a(b.lowFrameRateMessage,"This application appears to be performing poorly on your system.  Please try using a different web browser or updating your video drivers."),this.lowFrameRateMessageDismissed=!1,this.showingLowFrameRateMessage=!1,g.track(this,["lowFrameRateMessage","lowFrameRateMessageDismissed","showingLowFrameRateMessage"]);var c=this;this._dismissMessage=h(function(){c.showingLowFrameRateMessage=!1,c.lowFrameRateMessageDismissed=!0});var d=f.fromScene(b.scene);this._unsubscribeLowFrameRate=d.lowFrameRate.addEventListener(function(){c.lowFrameRateMessageDismissed||(c.showingLowFrameRateMessage=!0)}),this._unsubscribeNominalFrameRate=d.nominalFrameRate.addEventListener(function(){c.showingLowFrameRateMessage=!1})};return c(i.prototype,{scene:{get:function(){return this._scene}},dismissMessage:{get:function(){return this._dismissMessage}}}),i.prototype.destroy=function(){return this._unsubscribeLowFrameRate(),this._unsubscribeNominalFrameRate(),d(this)},i}),c("Widgets/PerformanceWatchdog/PerformanceWatchdog",["../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../ThirdParty/knockout","../getElement","./PerformanceWatchdogViewModel"],function(a,b,c,d,e,f,g){"use strict";var h=function(a){var b=f(a.container),c=new g(a),d=document.createElement("div");d.className="cesium-performance-watchdog-message-area",d.setAttribute("data-bind","visible: showingLowFrameRateMessage");var h=document.createElement("button");h.setAttribute("type","button"),h.className="cesium-performance-watchdog-message-dismiss",h.innerHTML="&times;",h.setAttribute("data-bind","click: dismissMessage"),d.appendChild(h);var i=document.createElement("div");i.className="cesium-performance-watchdog-message",i.setAttribute("data-bind","html: lowFrameRateMessage"),d.appendChild(i),b.appendChild(d),e.applyBindings(c,d),this._container=b,this._viewModel=c,this._element=d};return b(h.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return this._viewModel.destroy(),e.cleanNode(this._element),this._container.removeChild(this._element),c(this)},h}),c("Widgets/SceneModePicker/SceneModePickerViewModel",["../../Core/defaultValue","../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../Core/EventHelper","../../Scene/SceneMode","../../ThirdParty/knockout","../createCommand"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(b,c){this._scene=b;var d=this,e=function(a,b,c){d.sceneMode=c,d.dropDownVisible=!1};this._eventHelper=new f,this._eventHelper.add(b.morphStart,e),this._duration=a(c,2),this.sceneMode=b.mode,this.dropDownVisible=!1,this.tooltip2D="2D",this.tooltip3D="3D",this.tooltipColumbusView="Columbus View",h.track(this,["sceneMode","dropDownVisible","tooltip2D","tooltip3D","tooltipColumbusView"]),this.selectedTooltip=void 0,h.defineProperty(this,"selectedTooltip",function(){var a=d.sceneMode;return a===g.SCENE2D?d.tooltip2D:a===g.SCENE3D?d.tooltip3D:d.tooltipColumbusView}),this._toggleDropDown=i(function(){d.dropDownVisible=!d.dropDownVisible}),this._morphTo2D=i(function(){b.morphTo2D(d._duration)}),this._morphTo3D=i(function(){b.morphTo3D(d._duration)}),this._morphToColumbusView=i(function(){b.morphToColumbusView(d._duration)}),this._sceneMode=g};return c(j.prototype,{scene:{get:function(){return this._scene}},duration:{get:function(){return this._duration},set:function(a){this._duration=a}},toggleDropDown:{get:function(){return this._toggleDropDown}},morphTo2D:{get:function(){return this._morphTo2D}},morphTo3D:{get:function(){return this._morphTo3D}},morphToColumbusView:{get:function(){return this._morphToColumbusView}}}),j.prototype.isDestroyed=function(){return!1},j.prototype.destroy=function(){this._eventHelper.removeAll(),d(this)},j}),c("Widgets/SceneModePicker/SceneModePicker",["../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../ThirdParty/knockout","../getElement","./SceneModePickerViewModel"],function(a,b,c,d,e,f,g){"use strict";var h="m 32.401392,4.9330437 c -7.087603,0 -14.096095,2.884602 -19.10793,7.8946843 -5.0118352,5.010083 -7.9296167,11.987468 -7.9296167,19.072999 0,7.085531 2.9177815,14.097848 7.9296167,19.107931 4.837653,4.835961 11.541408,7.631372 18.374354,7.82482 0.05712,0.01231 0.454119,0.139729 0.454119,0.139729 l 0.03493,-0.104797 c 0.08246,7.84e-4 0.162033,0.03493 0.244525,0.03493 0.08304,0 0.161515,-0.03414 0.244526,-0.03493 l 0.03493,0.104797 c 0,0 0.309474,-0.129487 0.349323,-0.139729 6.867765,-0.168094 13.582903,-2.965206 18.444218,-7.82482 2.558195,-2.5573 4.551081,-5.638134 5.903547,-8.977584 1.297191,-3.202966 2.02607,-6.661489 2.02607,-10.130347 0,-6.237309 -2.366261,-12.31219 -6.322734,-17.116794 -0.0034,-0.02316 0.0049,-0.04488 0,-0.06986 -0.01733,-0.08745 -0.104529,-0.278855 -0.104797,-0.279458 -5.31e-4,-0.0012 -0.522988,-0.628147 -0.523984,-0.62878         -3.47e-4,-2.2e-4 -0.133444,-0.03532 -0.244525,-0.06987 C 51.944299,13.447603 51.751076,13.104317 51.474391,12.827728 46.462556,7.8176457 39.488996,4.9330437 32.401392,4.9330437 z m -2.130866,3.5281554 0.104797,9.6762289 c -4.111695,-0.08361 -7.109829,-0.423664 -9.257041,-0.943171 1.198093,-2.269271 2.524531,-4.124404 3.91241,-5.414496 2.167498,-2.0147811 3.950145,-2.8540169 5.239834,-3.3185619 z m 2.794579,0 c 1.280302,0.4754953 3.022186,1.3285948 5.065173,3.2486979 1.424667,1.338973 2.788862,3.303645 3.982275,5.728886 -2.29082,0.403367 -5.381258,0.621049 -8.942651,0.698645 L 33.065105,8.4611991 z m 5.728886,0.2445256 c 4.004072,1.1230822 7.793098,3.1481363 10.724195,6.0782083 0.03468,0.03466 0.07033,0.06991 0.104797,0.104797 -0.45375,0.313891 -0.923054,0.663002 -1.956205,1.082899 -0.647388,0.263114 -1.906242,0.477396 -2.829511,0.733577 -1.382296,-2.988132         -3.027146,-5.368585 -4.785716,-7.0213781 -0.422866,-0.397432 -0.835818,-0.6453247 -1.25756,-0.9781032 z m -15.33525,0.7685092 c -0.106753,0.09503 -0.207753,0.145402 -0.31439,0.244526 -1.684973,1.5662541 -3.298068,3.8232211 -4.680919,6.5672591 -0.343797,-0.14942 -1.035052,-0.273198 -1.292493,-0.419186 -0.956528,-0.542427 -1.362964,-1.022024 -1.537018,-1.292493 -0.0241,-0.03745 -0.01868,-0.0401 -0.03493,-0.06986 2.250095,-2.163342 4.948824,-3.869984 7.859752,-5.0302421 z m -9.641296,7.0912431 c 0.464973,0.571618 0.937729,1.169056 1.956205,1.746612 0.349907,0.198425 1.107143,0.335404 1.537018,0.523983 -1.20166,3.172984 -1.998037,7.051901 -2.165798,11.772162 C 14.256557,30.361384 12.934823,30.161483 12.280427,29.90959 10.644437,29.279855 9.6888882,28.674891 9.1714586,28.267775 8.6540289,27.860658 8.6474751,27.778724 8.6474751,27.778724 l -0.069864,0.03493 C 9.3100294,23.691285         11.163248,19.798527 13.817445,16.565477 z m 37.552149,0.523984 c 2.548924,3.289983 4.265057,7.202594 4.890513,11.318043 -0.650428,0.410896 -1.756876,1.001936 -3.563088,1.606882 -1.171552,0.392383 -3.163859,0.759153 -4.960377,1.117832 -0.04367,-4.752703 -0.784809,-8.591423 -1.88634,-11.807094 0.917574,-0.263678 2.170552,-0.486495 2.864443,-0.76851 1.274693,-0.518066 2.003942,-1.001558 2.654849,-1.467153 z m -31.439008,2.619917 c 2.487341,0.672766 5.775813,1.137775 10.479669,1.222628 l 0.104797,10.689263 0,0.03493 0,0.733577 c -5.435005,-0.09059 -9.512219,-0.519044 -12.610536,-1.117831 0.106127,-4.776683 0.879334,-8.55791 2.02607,-11.562569 z m 23.264866,0.31439 c 1.073459,3.067541 1.833795,6.821314 1.816476,11.702298 -3.054474,0.423245 -7.062018,0.648559 -11.702298,0.698644 l 0,-0.838373 -0.104796,-10.654331 c 4.082416,-0.0864 7.404468,-0.403886 9.990618,-0.908238 z         M 8.2632205,30.922625 c 0.7558676,0.510548 1.5529563,1.013339 3.0041715,1.57195 0.937518,0.360875 2.612202,0.647642 3.91241,0.978102 0.112814,3.85566 0.703989,7.107756 1.606883,9.920754 -1.147172,-0.324262 -2.644553,-0.640648 -3.423359,-0.978102 -1.516688,-0.657177 -2.386627,-1.287332 -2.864443,-1.71168 -0.477816,-0.424347 -0.489051,-0.489051 -0.489051,-0.489051 L 9.8002387,40.319395 C 8.791691,37.621767 8.1584238,34.769583 8.1584238,31.900727 c 0,-0.330153 0.090589,-0.648169 0.1047967,-0.978102 z m 48.2763445,0.419186 c 0.0047,0.188973 0.06986,0.36991 0.06986,0.558916 0,2.938869 -0.620228,5.873558 -1.676747,8.628261 -0.07435,0.07583 -0.06552,0.07411 -0.454119,0.349323 -0.606965,0.429857 -1.631665,1.042044 -3.318562,1.676747 -1.208528,0.454713 -3.204964,0.850894 -5.135038,1.25756 0.84593,-2.765726 1.41808,-6.005357 1.606883,-9.815957 2.232369,-0.413371 4.483758,-0.840201         5.938479,-1.327425 1.410632,-0.472457 2.153108,-0.89469 2.96924,-1.327425 z m -38.530252,2.864443 c 3.208141,0.56697 7.372279,0.898588 12.575603,0.978103 l 0.174662,9.885821 c -4.392517,-0.06139 -8.106722,-0.320566 -10.863925,-0.803441 -1.051954,-2.664695 -1.692909,-6.043794 -1.88634,-10.060483 z m 26.793022,0.31439 c -0.246298,3.923551 -0.877762,7.263679 -1.816476,9.885822 -2.561957,0.361954 -5.766249,0.560708 -9.431703,0.62878 l -0.174661,-9.815957 c 4.491734,-0.04969 8.334769,-0.293032 11.42284,-0.698645 z M 12.035901,44.860585 c 0.09977,0.04523 0.105535,0.09465 0.209594,0.139729 1.337656,0.579602 3.441099,1.058072 5.589157,1.537018 1.545042,3.399208 3.548524,5.969402 5.589157,7.789888 -3.034411,-1.215537 -5.871615,-3.007978 -8.174142,-5.309699 -1.245911,-1.245475 -2.271794,-2.662961 -3.213766,-4.156936 z m 40.69605,0 c -0.941972,1.493975 -1.967855,2.911461         -3.213765,4.156936 -2.74253,2.741571 -6.244106,4.696717 -9.955686,5.868615 0.261347,-0.241079 0.507495,-0.394491 0.768509,-0.663713 1.674841,-1.727516 3.320792,-4.181056 4.645987,-7.265904 2.962447,-0.503021 5.408965,-1.122293 7.161107,-1.781544 0.284034,-0.106865 0.337297,-0.207323 0.593848,-0.31439 z m -31.404076,2.305527 c 2.645807,0.376448 5.701178,0.649995 9.466635,0.698645 l 0.139729,7.789888 c -1.38739,-0.480844 -3.316218,-1.29837 -5.659022,-3.388427 -1.388822,-1.238993 -2.743668,-3.0113 -3.947342,-5.100106 z m 20.365491,0.104797 c -1.04872,2.041937 -2.174337,3.779068 -3.353494,4.995309 -1.853177,1.911459 -3.425515,2.82679 -4.611055,3.353494 l -0.139729,-7.789887 c 3.13091,-0.05714 5.728238,-0.278725 8.104278,-0.558916 z",i="m 2.9825053,17.550598 0,1.368113 0,26.267766 0,1.368113 1.36811,0 54.9981397,0 1.36811,0 0,-1.368113 0,-26.267766 0,-1.368113 -1.36811,0 -54.9981397,0 -1.36811,0 z m 2.73623,2.736226 10.3292497,0 0,10.466063 -10.3292497,0 0,-10.466063 z m 13.0654697,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 10.32926,0 0,10.466063 -10.32926,0 0,-10.466063 z m -41.9326497,13.202288 10.3292497,0 0,10.329252 -10.3292497,0 0,-10.329252 z m 13.0654697,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 10.32926,0 0,10.329252 -10.32926,0 0,-10.329252 z",j="m 14.723969,17.675598 -0.340489,0.817175 -11.1680536,26.183638 -0.817175,1.872692 2.076986,0 54.7506996,0 2.07698,0 -0.81717,-1.872692 -11.16805,-26.183638 -0.34049,-0.817175 -0.91933,0 -32.414586,0 -0.919322,0 z m 1.838643,2.723916 6.196908,0 -2.928209,10.418977 -7.729111,0 4.460412,-10.418977 z m 9.02297,0 4.903049,0 0,10.418977 -7.831258,0 2.928209,-10.418977 z m 7.626964,0 5.584031,0 2.62176,10.418977 -8.205791,0 0,-10.418977 z m 8.410081,0 5.51593,0 4.46042,10.418977 -7.38863,0 -2.58772,-10.418977 z m -30.678091,13.142892 8.103649,0 -2.89416,10.282782 -9.6018026,0 4.3923136,-10.282782 z m 10.929711,0 8.614384,0 0,10.282782 -11.508544,0 2.89416,-10.282782 z m 11.338299,0 8.852721,0 2.58772,10.282782 -11.440441,0 0,-10.282782 z m 11.678781,0 7.86531,0 4.39231,10.282782 -9.6699,0 -2.58772,-10.282782 z",k=function(a,b,c){a=f(a);var d=new g(b,c);d._globePath=h,d._flatMapPath=i,d._columbusViewPath=j;var k=document.createElement("span");k.className="cesium-sceneModePicker-wrapper cesium-toolbar-button",a.appendChild(k);var l=document.createElement("button");l.type="button",l.className="cesium-button cesium-toolbar-button",l.setAttribute("data-bind",'css: { "cesium-sceneModePicker-button2D": sceneMode === _sceneMode.SCENE2D,       "cesium-sceneModePicker-button3D": sceneMode === _sceneMode.SCENE3D,       "cesium-sceneModePicker-buttonColumbusView": sceneMode === _sceneMode.COLUMBUS_VIEW,       "cesium-sceneModePicker-selected": dropDownVisible },attr: { title: selectedTooltip },click: toggleDropDown'),l.innerHTML='\x3c!-- ko cesiumSvgPath: { path: _globePath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-icon3D" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _flatMapPath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-icon2D" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _columbusViewPath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-iconColumbusView" } --\x3e\x3c!-- /ko --\x3e',k.appendChild(l);var m=document.createElement("button");m.type="button",m.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",m.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.SCENE3D)) || (!dropDownVisible && (sceneMode === _sceneMode.SCENE3D)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.SCENE3D,       "cesium-sceneModePicker-hidden" : !dropDownVisible },attr: { title: tooltip3D },click: morphTo3D,cesiumSvgPath: { path: _globePath, width: 64, height: 64 }'),k.appendChild(m);var n=document.createElement("button");n.type="button",n.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",n.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.SCENE2D)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.SCENE2D,       "cesium-sceneModePicker-hidden" : !dropDownVisible },attr: { title: tooltip2D },click: morphTo2D,cesiumSvgPath: { path: _flatMapPath, width: 64, height: 64 }'),k.appendChild(n);var o=document.createElement("button");o.type="button",o.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",o.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.COLUMBUS_VIEW)) || (!dropDownVisible && (sceneMode === _sceneMode.COLUMBUS_VIEW)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.COLUMBUS_VIEW,       "cesium-sceneModePicker-hidden" : !dropDownVisible},attr: { title: tooltipColumbusView },click: morphToColumbusView,cesiumSvgPath: { path: _columbusViewPath, width: 64, height: 64 }'),k.appendChild(o),e.applyBindings(d,k),this._viewModel=d,this._container=a,this._wrapper=k,this._closeDropDown=function(a){k.contains(a.target)||(d.dropDownVisible=!1)},document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0)};return b(k.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),k.prototype.isDestroyed=function(){return!1},k.prototype.destroy=function(){return this._viewModel.destroy(),document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0),e.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),c(this)},k}),c("Widgets/SelectionIndicator/SelectionIndicatorViewModel",["../../Core/Cartesian2","../../Core/defaultValue","../../Core/defined","../../Core/defineProperties","../../Core/DeveloperError","../../Core/EasingFunction","../../Scene/SceneTransforms","../../ThirdParty/knockout"],function(a,b,c,d,e,f,g,h){"use strict";var i=new a,j="-1000px",k=function(a,d,e){this._scene=a,this._screenPositionX=j,this._screenPositionY=j,this._tweens=a.tweens,this._container=b(e,document.body),this._selectionIndicatorElement=d,this._scale=1,this.position=void 0,this.showSelection=!1,h.track(this,["position","_screenPositionX","_screenPositionY","_scale","showSelection"]),this.isVisible=void 0,h.defineProperty(this,"isVisible",{get:function(){return this.showSelection&&c(this.position)}}),h.defineProperty(this,"_transform",{get:function(){return"scale("+this._scale+")"}}),this.computeScreenSpacePosition=function(b,c){return g.wgs84ToWindowCoordinates(a,b,c)}};return k.prototype.update=function(){if(this.showSelection&&c(this.position)){var a=this.computeScreenSpacePosition(this.position,i);if(c(a)){var b=this._container,d=b.parentNode.clientWidth,e=b.parentNode.clientHeight,f=this._selectionIndicatorElement.clientWidth,g=.5*f;a.x=Math.min(Math.max(a.x,-f),d+f)-g,a.y=Math.min(Math.max(a.y,-f),e+f)-g,this._screenPositionX=Math.floor(a.x+.25)+"px",this._screenPositionY=Math.floor(a.y+.25)+"px"}else this._screenPositionX=j,this._screenPositionY=j}},k.prototype.animateAppear=function(){this._tweens.addProperty({object:this,property:"_scale",startValue:2,stopValue:1,duration:.8,easingFunction:f.EXPONENTIAL_OUT})},k.prototype.animateDepart=function(){this._tweens.addProperty({object:this,property:"_scale",startValue:this._scale,stopValue:1.5,duration:.8,easingFunction:f.EXPONENTIAL_OUT})},d(k.prototype,{container:{get:function(){return this._container}},selectionIndicatorElement:{get:function(){return this._selectionIndicatorElement}},scene:{get:function(){return this._scene}}}),k}),c("Widgets/SelectionIndicator/SelectionIndicator",["../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../ThirdParty/knockout","../getElement","./SelectionIndicatorViewModel"],function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){a=f(a),this._container=a;var c=document.createElement("div");c.className="cesium-selection-wrapper",c.setAttribute("data-bind",'style: { "top" : _screenPositionY, "left" : _screenPositionX },css: { "cesium-selection-wrapper-visible" : isVisible }'),a.appendChild(c),this._element=c;var d="http://www.w3.org/2000/svg",h="M -34 -34 L -34 -11.25 L -30 -15.25 L -30 -30 L -15.25 -30 L -11.25 -34 L -34 -34 z M 11.25 -34 L 15.25 -30 L 30 -30 L 30 -15.25 L 34 -11.25 L 34 -34 L 11.25 -34 z M -34 11.25 L -34 34 L -11.25 34 L -15.25 30 L -30 30 L -30 15.25 L -34 11.25 z M 34 11.25 L 30 15.25 L 30 30 L 15.25 30 L 11.25 34 L 34 34 L 34 11.25 z",i=document.createElementNS(d,"svg:svg");i.setAttribute("width",160),i.setAttribute("height",160),i.setAttribute("viewBox","0 0 160 160");var j=document.createElementNS(d,"g");j.setAttribute("transform","translate(80,80)"),i.appendChild(j);var k=document.createElementNS(d,"path");k.setAttribute("data-bind","attr: { transform: _transform }"),k.setAttribute("d",h),j.appendChild(k),c.appendChild(i);var l=new g(b,this._element,this._container);this._viewModel=l,e.applyBindings(this._viewModel,this._element)};return b(h.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){var a=this._container;return e.cleanNode(this._element),a.removeChild(this._element),c(this)},h}),c("Widgets/Timeline/TimelineHighlightRange",["../../Core/defaultValue","../../Core/JulianDate"],function(a,b){"use strict";function c(b,c,d){this._color=b,this._height=c,this._base=a(d,0)}return c.prototype.getHeight=function(){return this._height},c.prototype.getBase=function(){return this._base},c.prototype.getStartTime=function(){return this._start},c.prototype.getStopTime=function(){return this._stop},c.prototype.setRange=function(a,b){this._start=a,this._stop=b},c.prototype.render=function(a){var c="";if(this._start&&this._stop&&this._color){var d=b.secondsDifference(this._start,a.epochJulian),e=Math.round(a.timeBarWidth*a.getAlpha(d)),f=b.secondsDifference(this._stop,a.epochJulian),g=Math.round(a.timeBarWidth*a.getAlpha(f))-e;0>e&&(g+=e,e=0),e+g>a.timeBarWidth&&(g=a.timeBarWidth-e),g>0&&(c='<span class="cesium-timeline-highlight" style="left: '+e.toString()+"px; width: "+g.toString()+"px; bottom: "+this._base.toString()+"px; height: "+this._height+"px; background-color: "+this._color+';"></span>')}return c},c}),c("Widgets/Timeline/TimelineTrack",["../../Core/Color","../../Core/defined","../../Core/JulianDate"],function(a,b,c){"use strict";function d(b,c,d,e){this.interval=b,this.height=c,this.color=d||new a(.5,.5,.5,1),this.backgroundColor=e||new a(0,0,0,0)}return d.prototype.render=function(a,d){var e=this.interval.start,f=this.interval.stop,g=d.startJulian,h=c.addSeconds(d.startJulian,d.duration,new c);if(c.lessThan(e,g)&&c.greaterThan(f,h))a.fillStyle=this.color.toCssColorString(),a.fillRect(0,d.y,d.timeBarWidth,this.height);else if(c.lessThanOrEquals(e,h)&&c.greaterThanOrEquals(f,g)){var i,j,k;for(i=0;i<d.timeBarWidth;++i){var l=c.addSeconds(d.startJulian,i/d.timeBarWidth*d.duration,new c);!b(j)&&c.greaterThanOrEquals(l,e)?j=i:!b(k)&&c.greaterThanOrEquals(l,f)&&(k=i)}a.fillStyle=this.backgroundColor.toCssColorString(),a.fillRect(0,d.y,d.timeBarWidth,this.height),b(j)&&(b(k)||(k=d.timeBarWidth),a.fillStyle=this.color.toCssColorString(),a.fillRect(j,d.y,Math.max(k-j,1),this.height))}},d}),c("Widgets/Timeline/Timeline",["../../Core/ClockRange","../../Core/defined","../../Core/destroyObject","../../Core/DeveloperError","../../Core/JulianDate","../getElement","./TimelineHighlightRange","./TimelineTrack"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){return 10>a?"0"+a.toString():a.toString()}function j(a){return function(b){a._mouseMode!==r.touchOnly&&(0===b.button?(a._mouseMode=r.scrub,a._scrubElement&&(a._scrubElement.style.backgroundPosition="-16px 0"),a._onMouseMove(b)):(a._mouseX=b.clientX,a._mouseMode=2===b.button?r.zoom:r.slide)),b.preventDefault()}}function k(a){return function(){a._mouseMode=r.none,a._scrubElement&&(a._scrubElement.style.backgroundPosition="0px 0px"),a._timelineDrag=0,a._timelineDragLocation=void 0}}function l(a){return function(b){var c;if(a._mouseMode===r.scrub){b.preventDefault();var d=b.clientX-a._topDiv.getBoundingClientRect().left;0>d?(a._timelineDragLocation=0,a._timelineDrag=-.01*a._timeBarSecondsSpan):d>a._topDiv.clientWidth?(a._timelineDragLocation=a._topDiv.clientWidth,a._timelineDrag=.01*a._timeBarSecondsSpan):(a._timelineDragLocation=void 0,a._setTimeBarTime(d,d*a._timeBarSecondsSpan/a._topDiv.clientWidth))}else if(a._mouseMode===r.slide){if(c=a._mouseX-b.clientX,a._mouseX=b.clientX,0!==c){var f=c*a._timeBarSecondsSpan/a._topDiv.clientWidth;a.zoomTo(e.addSeconds(a._startJulian,f,new e),e.addSeconds(a._endJulian,f,new e))}}else a._mouseMode===r.zoom&&(c=a._mouseX-b.clientX,a._mouseX=b.clientX,0!==c&&a.zoomFrom(Math.pow(1.01,c)))}}function m(a){return function(b){var c=b.wheelDeltaY||b.wheelDelta||-b.detail;q=Math.max(Math.min(Math.abs(c),q),1),c/=q,a.zoomFrom(Math.pow(1.05,-c))}}function n(a){return function(b){var c,d,f=b.touches.length,g=a._topDiv.getBoundingClientRect().left;b.preventDefault(),a._mouseMode=r.touchOnly,1===f?(c=e.secondsDifference(a._scrubJulian,a._startJulian),d=Math.round(c*a._topDiv.clientWidth/a._timeBarSecondsSpan+g),Math.abs(b.touches[0].clientX-d)<50?(a._touchMode=s.scrub,a._scrubElement&&(a._scrubElement.style.backgroundPosition=1===f?"-16px 0":"0 0")):(a._touchMode=s.singleTap,a._touchState.centerX=b.touches[0].clientX-g)):2===f?(a._touchMode=s.slideZoom,a._touchState.centerX=.5*(b.touches[0].clientX+b.touches[1].clientX)-g,a._touchState.spanX=Math.abs(b.touches[0].clientX-b.touches[1].clientX)):a._touchMode=s.ignore}}function o(a){return function(b){var c=b.touches.length,d=a._topDiv.getBoundingClientRect().left;a._touchMode===s.singleTap?(a._touchMode=s.scrub,a._handleTouchMove(b)):a._touchMode===s.scrub&&a._handleTouchMove(b),a._mouseMode=r.touchOnly,1!==c?a._touchMode=c>0?s.ignore:s.none:a._touchMode===s.slideZoom&&(a._touchState.centerX=b.touches[0].clientX-d),a._scrubElement&&(a._scrubElement.style.backgroundPosition="0 0")}}function p(a){return function(c){var d,f,g,h,i,j,k=1,l=a._topDiv.getBoundingClientRect().left;a._touchMode===s.singleTap&&(a._touchMode=s.slideZoom),a._mouseMode=r.touchOnly,a._touchMode===s.scrub?(c.preventDefault(),1===c.changedTouches.length&&(f=c.changedTouches[0].clientX-l,f>=0&&f<=a._topDiv.clientWidth&&a._setTimeBarTime(f,f*a._timeBarSecondsSpan/a._topDiv.clientWidth))):a._touchMode===s.slideZoom&&(g=c.touches.length,2===g?(h=.5*(c.touches[0].clientX+c.touches[1].clientX)-l,i=Math.abs(c.touches[0].clientX-c.touches[1].clientX)):1===g&&(h=c.touches[0].clientX-l,i=0),b(h)&&(i>0&&a._touchState.spanX>0?(k=a._touchState.spanX/i,j=e.addSeconds(a._startJulian,(a._touchState.centerX*a._timeBarSecondsSpan-h*a._timeBarSecondsSpan*k)/a._topDiv.clientWidth,new e)):(d=a._touchState.centerX-h,j=e.addSeconds(a._startJulian,d*a._timeBarSecondsSpan/a._topDiv.clientWidth,new e)),a.zoomTo(j,e.addSeconds(j,a._timeBarSecondsSpan*k,new e)),a._touchState.centerX=h,
a._touchState.spanX=i))}}var q=1e12,r={none:0,scrub:1,slide:2,zoom:3,touchOnly:4},s={none:0,scrub:1,slideZoom:2,singleTap:3,ignore:4},t=[.001,.002,.005,.01,.02,.05,.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,14400,21600,43200,86400,172800,345600,604800,1296e3,2592e3,5184e3,7776e3,15552e3,31536e3,63072e3,126144e3,15768e4,31536e4,63072e4,126144e4,15768e5,31536e5,63072e5,126144e5,15768e6,31536e6],u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],v=function(a,b){a=f(a),this.container=a;var c=document.createElement("div");c.className="cesium-timeline-main",a.appendChild(c),this._topDiv=c,this._endJulian=void 0,this._epochJulian=void 0,this._lastXPos=void 0,this._scrubElement=void 0,this._startJulian=void 0,this._timeBarSecondsSpan=void 0,this._clock=b,this._scrubJulian=b.currentTime,this._mainTicSpan=-1,this._mouseMode=r.none,this._touchMode=s.none,this._touchState={centerX:0,spanX:0},this._mouseX=0,this._timelineDrag=0,this._timelineDragLocation=void 0,this._lastHeight=void 0,this._lastWidth=void 0,this._topDiv.innerHTML='<div class="cesium-timeline-bar"></div><div class="cesium-timeline-trackContainer"><canvas class="cesium-timeline-tracks" width="10" height="1"></canvas></div><div class="cesium-timeline-needle"></div><span class="cesium-timeline-ruler"></span>',this._timeBarEle=this._topDiv.childNodes[0],this._trackContainer=this._topDiv.childNodes[1],this._trackListEle=this._topDiv.childNodes[1].childNodes[0],this._needleEle=this._topDiv.childNodes[2],this._rulerEle=this._topDiv.childNodes[3],this._context=this._trackListEle.getContext("2d"),this._trackList=[],this._highlightRanges=[],this.zoomTo(b.startTime,b.stopTime),this._onMouseDown=j(this),this._onMouseUp=k(this),this._onMouseMove=l(this),this._onMouseWheel=m(this),this._onTouchStart=n(this),this._onTouchMove=p(this),this._onTouchEnd=o(this);var d=this._timeBarEle;document.addEventListener("mouseup",this._onMouseUp,!1),document.addEventListener("mousemove",this._onMouseMove,!1),d.addEventListener("mousedown",this._onMouseDown,!1),d.addEventListener("DOMMouseScroll",this._onMouseWheel,!1),d.addEventListener("mousewheel",this._onMouseWheel,!1),d.addEventListener("touchstart",this._onTouchStart,!1),d.addEventListener("touchmove",this._onTouchMove,!1),d.addEventListener("touchend",this._onTouchEnd,!1),this._topDiv.oncontextmenu=function(){return!1},b.onTick.addEventListener(this.updateFromClock,this),this.updateFromClock()};return v.prototype.addEventListener=function(a,b,c){this._topDiv.addEventListener(a,b,c)},v.prototype.removeEventListener=function(a,b,c){this._topDiv.removeEventListener(a,b,c)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){this._clock.onTick.removeEventListener(this.updateFromClock,this),document.removeEventListener("mouseup",this._onMouseUp,!1),document.removeEventListener("mousemove",this._onMouseMove,!1);var a=this._timeBarEle;a.removeEventListener("mousedown",this._onMouseDown,!1),a.removeEventListener("DOMMouseScroll",this._onMouseWheel,!1),a.removeEventListener("mousewheel",this._onMouseWheel,!1),a.removeEventListener("touchstart",this._onTouchStart,!1),a.removeEventListener("touchmove",this._onTouchMove,!1),a.removeEventListener("touchend",this._onTouchEnd,!1),this.container.removeChild(this._topDiv),c(this)},v.prototype.addHighlightRange=function(a,b,c){var d=new g(a,b,c);return this._highlightRanges.push(d),this.resize(),d},v.prototype.addTrack=function(a,b,c,d){var e=new h(a,b,c,d);return this._trackList.push(e),this._lastHeight=void 0,this.resize(),e},v.prototype.zoomTo=function(b,c){if(this._startJulian=b,this._endJulian=c,this._timeBarSecondsSpan=e.secondsDifference(c,b),this._clock&&this._clock.clockRange!==a.UNBOUNDED){var d=this._clock.startTime,f=this._clock.stopTime,g=e.secondsDifference(f,d),h=e.secondsDifference(d,this._startJulian),i=e.secondsDifference(f,this._endJulian);this._timeBarSecondsSpan>=g?(this._timeBarSecondsSpan=g,this._startJulian=this._clock.startTime,this._endJulian=this._clock.stopTime):h>0?(this._endJulian=e.addSeconds(this._endJulian,h,new e),this._startJulian=d,this._timeBarSecondsSpan=e.secondsDifference(this._endJulian,this._startJulian)):0>i&&(this._startJulian=e.addSeconds(this._startJulian,i,new e),this._endJulian=f,this._timeBarSecondsSpan=e.secondsDifference(this._endJulian,this._startJulian))}this._makeTics();var j=document.createEvent("Event");j.initEvent("setzoom",!0,!0),j.startJulian=this._startJulian,j.endJulian=this._endJulian,j.epochJulian=this._epochJulian,j.totalSpan=this._timeBarSecondsSpan,j.mainTicSpan=this._mainTicSpan,this._topDiv.dispatchEvent(j)},v.prototype.zoomFrom=function(a){var b=e.secondsDifference(this._scrubJulian,this._startJulian);a>1||0>b||b>this._timeBarSecondsSpan?b=.5*this._timeBarSecondsSpan:b+=b-.5*this._timeBarSecondsSpan;var c=this._timeBarSecondsSpan-b;this.zoomTo(e.addSeconds(this._startJulian,b-b*a,new e),e.addSeconds(this._endJulian,c*a-c,new e))},v.prototype.makeLabel=function(a){var b=e.toGregorianDate(a),c=b.millisecond,d=" UTC";if(c>0&&this._timeBarSecondsSpan<3600){for(d=Math.floor(c).toString();d.length<3;)d="0"+d;d="."+d}return u[b.month-1]+" "+b.day+" "+b.year+" "+i(b.hour)+":"+i(b.minute)+":"+i(b.second)+d},v.prototype.smallestTicInPixels=7,v.prototype._makeTics=function(){function a(a){return Math.floor(w/a)*a}function b(a,b){return Math.ceil(a/b+.5)*b}function c(a){return(a-w)/q}function d(a,b){return a-b*Math.round(a/b)}var f,g=this._timeBarEle,h=e.secondsDifference(this._scrubJulian,this._startJulian),i=Math.round(h*this._topDiv.clientWidth/this._timeBarSecondsSpan),j=i-8,k=this;this._needleEle.style.left=i.toString()+"px";var l="",m=.01,n=31536e6,o=1e-10,p=0,q=this._timeBarSecondsSpan;m>q?(q=m,this._timeBarSecondsSpan=m,this._endJulian=e.addSeconds(this._startJulian,m,new e)):q>n&&(q=n,this._timeBarSecondsSpan=n,this._endJulian=e.addSeconds(this._startJulian,n,new e));var r=this._timeBarEle.clientWidth;10>r&&(r=10);var s,u=this._startJulian,v=Math.min(1e-5*(q/r),.4);s=q>31536e4?e.fromIso8601(e.toDate(u).toISOString().substring(0,2)+"00-01-01T00:00:00Z"):q>31536e3?e.fromIso8601(e.toDate(u).toISOString().substring(0,3)+"0-01-01T00:00:00Z"):q>86400?e.fromIso8601(e.toDate(u).toISOString().substring(0,4)+"-01-01T00:00:00Z"):e.fromIso8601(e.toDate(u).toISOString().substring(0,10)+"T00:00:00Z");var w=e.secondsDifference(this._startJulian,e.addSeconds(s,v,new e)),x=w+q;this._epochJulian=s,this._rulerEle.innerHTML=this.makeLabel(e.addSeconds(this._endJulian,-m,new e));var y=this._rulerEle.offsetWidth+20;30>y&&(y=180);var z=p;p-=o;var A={startTime:w,startJulian:u,epochJulian:s,duration:q,timeBarWidth:r,getAlpha:c};this._highlightRanges.forEach(function(a){l+=a.render(A)});var B=0,C=0,D=0,E=y/r;E>1&&(E=1),E*=this._timeBarSecondsSpan;var F,G=-1,H=-1,I=t.length;for(F=0;I>F;++F){var J=t[F];if(++G,B=J,J>E&&J>p)break;0>H&&r*(J/this._timeBarSecondsSpan)>=this.smallestTicInPixels&&(H=G)}if(G>0){for(;G>0;)if(--G,Math.abs(d(B,t[G]))<1e-5){t[G]>=p&&(C=t[G]);break}if(H>=0)for(;G>H;){if(Math.abs(d(C,t[H]))<1e-5&&t[H]>=p){D=t[H];break}++H}}p=z,p>o&&1e-5>D&&Math.abs(p-B)>o&&(D=p,B+o>=p&&(C=0));var K,L=-999999;if(r*(D/this._timeBarSecondsSpan)>=3)for(f=a(D);x>=f;f=b(f,D))l+='<span class="cesium-timeline-ticTiny" style="left: '+Math.round(r*c(f)).toString()+'px;"></span>';if(r*(C/this._timeBarSecondsSpan)>=3)for(f=a(C);x>=f;f=b(f,C))l+='<span class="cesium-timeline-ticSub" style="left: '+Math.round(r*c(f)).toString()+'px;"></span>';if(r*(B/this._timeBarSecondsSpan)>=2){this._mainTicSpan=B,x+=B,f=a(B);for(var M=e.computeTaiMinusUtc(s);x>=f;){var N=e.addSeconds(u,f-w,new e);if(B>2.1){var O=e.computeTaiMinusUtc(N);Math.abs(O-M)>.1&&(f+=O-M,N=e.addSeconds(u,f-w,new e))}var P=Math.round(r*c(f)),Q=this.makeLabel(N);this._rulerEle.innerHTML=Q,K=this._rulerEle.offsetWidth,10>K&&(K=y);var R=P-(K/2-1);R>L?(L=R+K+5,l+='<span class="cesium-timeline-ticMain" style="left: '+P.toString()+'px;"></span>'+'<span class="cesium-timeline-ticLabel" style="left: '+R.toString()+'px;">'+Q+"</span>"):l+='<span class="cesium-timeline-ticSub" style="left: '+P.toString()+'px;"></span>',f=b(f,B)}}else this._mainTicSpan=-1;l+='<span class="cesium-timeline-icon16" style="left:'+j+'px;bottom:0;background-position: 0px 0px;"></span>',g.innerHTML=l,this._scrubElement=g.lastChild,this._context.clearRect(0,0,this._trackListEle.width,this._trackListEle.height),A.y=0,this._trackList.forEach(function(a){a.render(k._context,A),A.y+=a.height})},v.prototype.updateFromClock=function(){this._scrubJulian=this._clock.currentTime;var a=this._scrubElement;if(b(this._scrubElement)){var c=e.secondsDifference(this._scrubJulian,this._startJulian),d=Math.round(c*this._topDiv.clientWidth/this._timeBarSecondsSpan);this._lastXPos!==d&&(this._lastXPos=d,a.style.left=d-8+"px",this._needleEle.style.left=d+"px")}b(this._timelineDragLocation)&&(this._setTimeBarTime(this._timelineDragLocation,this._timelineDragLocation*this._timeBarSecondsSpan/this._topDiv.clientWidth),this.zoomTo(e.addSeconds(this._startJulian,this._timelineDrag,new e),e.addSeconds(this._endJulian,this._timelineDrag,new e)))},v.prototype._setTimeBarTime=function(a,b){if(a=Math.round(a),this._scrubJulian=e.addSeconds(this._startJulian,b,new e),this._scrubElement){var c=a-8;this._scrubElement.style.left=c.toString()+"px",this._needleEle.style.left=a.toString()+"px"}var d=document.createEvent("Event");d.initEvent("settime",!0,!0),d.clientX=a,d.timeSeconds=b,d.timeJulian=this._scrubJulian,d.clock=this._clock,this._topDiv.dispatchEvent(d)},v.prototype.resize=function(){var a=this.container.clientWidth,b=this.container.clientHeight;if(a!==this._lastWidth||b!==this._lastHeight){this._trackContainer.style.height=b+"px";var c=1;this._trackList.forEach(function(a){c+=a.height}),this._trackListEle.style.height=c.toString()+"px",this._trackListEle.width=this._trackListEle.clientWidth,this._trackListEle.height=c,this._makeTics(),this._lastWidth=a,this._lastHeight=b}},v}),c("Widgets/Viewer/Viewer",["../../Core/defaultValue","../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../Core/EventHelper","../../DataSources/DataSourceCollection","../../DataSources/DataSourceDisplay","../../ThirdParty/knockout","../Animation/Animation","../Animation/AnimationViewModel","../BaseLayerPicker/BaseLayerPicker","../BaseLayerPicker/createDefaultImageryProviderViewModels","../BaseLayerPicker/createDefaultTerrainProviderViewModels","../CesiumWidget/CesiumWidget","../ClockViewModel","../FullscreenButton/FullscreenButton","../Geocoder/Geocoder","../getElement","../HomeButton/HomeButton","../InfoBox/InfoBox","../NavigationHelpButton/NavigationHelpButton","../SceneModePicker/SceneModePicker","../SelectionIndicator/SelectionIndicator","../subscribeAndEvaluate","../Timeline/Timeline"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){"use strict";function A(a){var b=a.clock;b.currentTime=a.timeJulian,b.shouldAnimate=!1}function B(a){var c=a._container,d=c.clientWidth,e=c.clientHeight,f=b(a._animation),g=b(a._timeline);if(d!==a._lastWidth||e!==a._lastHeight){var h=e-125,i=a._baseLayerPickerDropDown;b(i)&&(i.style.maxHeight=h+"px"),b(a._infoBox)&&(a._infoBox.viewModel.maxHeight=h);var j,k=a._timeline,l=0,m=0,n=0;if(f&&"hidden"!==window.getComputedStyle(a._animation.container).visibility){var o=a._lastWidth;j=a._animation.container,d>900?(l=169,900>=o&&(j.style.width="169px",j.style.height="112px",a._animation.resize())):d>=600?(l=136,(600>o||o>900)&&(j.style.width="136px",j.style.height="90px",a._animation.resize())):(l=106,(o>600||0===o)&&(j.style.width="106px",j.style.height="70px",a._animation.resize())),m=l+5}if(g&&"hidden"!==window.getComputedStyle(a._timeline.container).visibility){var p=a._fullscreenButton,q=k.container,r=q.style;n=q.clientHeight+3,r.left=l+"px",b(p)&&(r.right=p.container.clientWidth+"px"),k.resize()}a._bottomContainer.style.left=m+"px",a._bottomContainer.style.bottom=n+"px",a._lastWidth=d,a._lastHeight=e}}var C=function(c,d){function C(a){if(b(a)){var c=a.clock;b(c)&&(c.getValue(M),b(ga)&&(ga.updateFromClock(),ga.zoomTo(c.startTime,c.stopTime)))}}c=s(c),d=a(d,a.EMPTY_OBJECT);var D=!b(d.baseLayerPicker)||d.baseLayerPicker!==!1,E=document.createElement("div");E.className="cesium-viewer",c.appendChild(E);var F=document.createElement("div");F.className="cesium-viewer-cesiumWidgetContainer",E.appendChild(F);var G=document.createElement("div");G.className="cesium-viewer-bottom",E.appendChild(G);var H=a(d.scene3DOnly,!1),I=new o(F,{terrainProvider:d.terrainProvider,imageryProvider:D?!1:d.imageryProvider,clock:d.clock,skyBox:d.skyBox,sceneMode:d.sceneMode,mapProjection:d.mapProjection,orderIndependentTranslucency:d.orderIndependentTranslucency,contextOptions:d.contextOptions,useDefaultRenderLoop:d.useDefaultRenderLoop,targetFrameRate:d.targetFrameRate,showRenderLoopErrors:d.showRenderLoopErrors,creditContainer:b(d.creditContainer)?d.creditContainer:G,scene3DOnly:H}),J=d.dataSources,K=!1;b(J)||(J=new g,K=!0);var L=new h({scene:I.scene,dataSourceCollection:J}),M=I.clock,N=new p(M),O=new f,P=this;O.add(M.onTick,function(a){var b=L.update(a.currentTime);P._allowDataSourcesToSuspendAnimation&&(N.canAnimate=b)});var Q;if(!b(d.selectionIndicator)||d.selectionIndicator!==!1){var R=document.createElement("div");R.className="cesium-viewer-selectionIndicatorContainer",E.appendChild(R),Q=new x(R,I.scene)}var S;if(!b(d.infoBox)||d.infoBox!==!1){var T=document.createElement("div");T.className="cesium-viewer-infoBoxContainer",E.appendChild(T),S=new u(T)}var U=document.createElement("div");U.className="cesium-viewer-toolbar",E.appendChild(U);var V;if(!b(d.geocoder)||d.geocoder!==!1){var W=document.createElement("div");W.className="cesium-viewer-geocoderContainer",U.appendChild(W),V=new r({container:W,scene:I.scene})}var X;if(b(d.homeButton)&&d.homeButton===!1||(X=new t(U,I.scene),b(V)&&O.add(X.viewModel.command.afterExecute,function(){var a=V.viewModel;a.searchText="",a.isSearchInProgress&&a.search()})),d.sceneModePicker===!0&&H)throw new e("options.sceneModePicker is not available when options.scene3DOnly is set to true.");var Y;H||b(d.sceneModePicker)&&d.sceneModePicker===!1||(Y=new w(U,I.scene));var Z;if(D){var $=a(d.imageryProviderViewModels,m()),_=a(d.terrainProviderViewModels,n());Z=new l(U,{globe:I.scene.globe,imageryProviderViewModels:$,selectedImageryProviderViewModel:d.selectedImageryProviderViewModel,terrainProviderViewModels:_,selectedTerrainProviderViewModel:d.selectedTerrainProviderViewModel});var aa=U.getElementsByClassName("cesium-baseLayerPicker-dropDown");this._baseLayerPickerDropDown=aa[0]}var ba;if(!b(d.navigationHelpButton)||d.navigationHelpButton!==!1){var ca=!0;if(b(window.localStorage)){var da=window.localStorage.getItem("cesium-hasSeenNavHelp");b(da)&&Boolean(da)?ca=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}ba=new v({container:U,instructionsInitiallyVisible:a(d.navigationInstructionsInitiallyVisible,ca)})}var ea;if(!b(d.animation)||d.animation!==!1){var fa=document.createElement("div");fa.className="cesium-viewer-animationContainer",E.appendChild(fa),ea=new j(fa,new k(N))}var ga;if(!b(d.timeline)||d.timeline!==!1){var ha=document.createElement("div");ha.className="cesium-viewer-timelineContainer",E.appendChild(ha),ga=new z(ha,M),ga.addEventListener("settime",A,!1),ga.zoomTo(M.startTime,M.stopTime)}var ia;if(b(d.fullscreenButton)&&d.fullscreenButton===!1)b(ga)&&(ga.container.style.right=0);else{var ja=document.createElement("div");ja.className="cesium-viewer-fullscreenContainer",E.appendChild(ja),ia=new q(ja,d.fullscreenElement),this._fullscreenSubscription=y(ia.viewModel,"isFullscreenEnabled",function(a){ja.style.display=a?"block":"none",b(ga)&&(ga.container.style.right=ja.clientWidth+"px",ga.resize())})}this.clockTrackedDataSource=void 0,i.track(this,["clockTrackedDataSource"]),this._dataSourceChangedListeners={},this._knockoutSubscriptions=[];var ka=a(d.automaticallyTrackDataSourceClocks,!0);this._knockoutSubscriptions.push(y(this,"clockTrackedDataSource",function(a){C(a)}));var la=function(a){P.clockTrackedDataSource===a&&C(a)},ma=function(a,b){ka&&(P.clockTrackedDataSource=b);var c=b.entities.id,d=O.add(b.changedEvent,la);P._dataSourceChangedListeners[c]=d},na=function(a,b){var c=P.clockTrackedDataSource===b,d=b.entities.id;if(P._dataSourceChangedListeners[d](),P._dataSourceChangedListeners[d]=void 0,c){var e=a.length;P.clockTrackedDataSource=ka&&e>0?a.get(e-1):void 0}};O.add(J.dataSourceAdded,ma),O.add(J.dataSourceRemoved,na),this._container=c,this._bottomContainer=G,this._element=E,this._cesiumWidget=I,this._selectionIndicator=Q,this._infoBox=S,this._dataSourceCollection=J,this._destroyDataSourceCollection=K,this._dataSourceDisplay=L,this._clockViewModel=N,this._toolbar=U,this._homeButton=X,this._sceneModePicker=Y,this._baseLayerPicker=Z,this._animation=ea,this._timeline=ga,this._fullscreenButton=ia,this._geocoder=V,this._eventHelper=O,this._lastWidth=0,this._lastHeight=0,this._allowDataSourcesToSuspendAnimation=!0,I.scene.preRender.addEventListener(function(){B(P)})};return c(C.prototype,{container:{get:function(){return this._container}},bottomContainer:{get:function(){return this._bottomContainer}},cesiumWidget:{get:function(){return this._cesiumWidget}},selectionIndicator:{get:function(){return this._selectionIndicator}},infoBox:{get:function(){return this._infoBox}},geocoder:{get:function(){return this._geocoder}},homeButton:{get:function(){return this._homeButton}},sceneModePicker:{get:function(){return this._sceneModePicker}},baseLayerPicker:{get:function(){return this._baseLayerPicker}},animation:{get:function(){return this._animation}},timeline:{get:function(){return this._timeline}},fullscreenButton:{get:function(){return this._fullscreenButton}},dataSourceDisplay:{get:function(){return this._dataSourceDisplay}},dataSources:{get:function(){return this._dataSourceCollection}},canvas:{get:function(){return this._cesiumWidget.canvas}},cesiumLogo:{get:function(){return this._cesiumWidget.cesiumLogo}},scene:{get:function(){return this._cesiumWidget.scene}},clock:{get:function(){return this._cesiumWidget.clock}},screenSpaceEventHandler:{get:function(){return this._cesiumWidget.screenSpaceEventHandler}},targetFrameRate:{get:function(){return this._cesiumWidget.targetFrameRate},set:function(a){this._cesiumWidget.targetFrameRate=a}},useDefaultRenderLoop:{get:function(){return this._cesiumWidget.useDefaultRenderLoop},set:function(a){this._cesiumWidget.useDefaultRenderLoop=a}},resolutionScale:{get:function(){return this._cesiumWidget.resolutionScale},set:function(a){this._cesiumWidget.resolutionScale=a}},allowDataSourcesToSuspendAnimation:{get:function(){return this._allowDataSourcesToSuspendAnimation},set:function(a){this._allowDataSourcesToSuspendAnimation=a}}}),C.prototype.extend=function(a,b){a(this,b)},C.prototype.resize=function(){var a=this._cesiumWidget;a.resize(),B(this)},C.prototype.forceResize=function(){this._lastWidth=0,this.resize()},C.prototype.render=function(){this._cesiumWidget.render()},C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){var a,c=this._knockoutSubscriptions.length;for(a=0;c>a;a++)this._knockoutSubscriptions[a].dispose();return this._container.removeChild(this._element),this._element.removeChild(this._toolbar),this._eventHelper.removeAll(),b(this._geocoder)&&(this._geocoder=this._geocoder.destroy()),b(this._homeButton)&&(this._homeButton=this._homeButton.destroy()),b(this._sceneModePicker)&&(this._sceneModePicker=this._sceneModePicker.destroy()),b(this._baseLayerPicker)&&(this._baseLayerPicker=this._baseLayerPicker.destroy()),b(this._animation)&&(this._element.removeChild(this._animation.container),this._animation=this._animation.destroy()),b(this._timeline)&&(this._timeline.removeEventListener("settime",A,!1),this._element.removeChild(this._timeline.container),this._timeline=this._timeline.destroy()),b(this._fullscreenButton)&&(this._fullscreenSubscription.dispose(),this._element.removeChild(this._fullscreenButton.container),this._fullscreenButton=this._fullscreenButton.destroy()),b(this._infoBox)&&(this._element.removeChild(this._infoBox.container),this._infoBox=this._infoBox.destroy()),b(this._selectionIndicator)&&(this._element.removeChild(this._selectionIndicator.container),this._selectionIndicator=this._selectionIndicator.destroy()),this._clockViewModel=this._clockViewModel.destroy(),this._dataSourceDisplay=this._dataSourceDisplay.destroy(),this._cesiumWidget=this._cesiumWidget.destroy(),this._destroyDataSourceCollection&&(this._dataSourceCollection=this._dataSourceCollection.destroy()),d(this)},C}),c("Widgets/Viewer/viewerCesiumInspectorMixin",["../../Core/defined","../../Core/defineProperties","../../Core/DeveloperError","../CesiumInspector/CesiumInspector"],function(a,b,c,d){"use strict";var e=function(e){if(!a(e))throw new c("viewer is required.");var f=document.createElement("div");f.className="cesium-viewer-cesiumInspectorContainer",e.container.appendChild(f);var g=new d(f,e.scene);b(e,{cesiumInspector:{get:function(){return g}}}),e.scene.postRender.addEventListener(function(){e.cesiumInspector.viewModel.update()})};return e}),c("Widgets/Viewer/viewerDragDropMixin",["../../Core/defaultValue","../../Core/defined","../../Core/defineProperties","../../Core/DeveloperError","../../Core/Event","../../Core/wrapFunction","../../DataSources/CzmlDataSource","../../DataSources/GeoJsonDataSource","../getElement"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){a.stopPropagation(),a.preventDefault()}function k(a,c){var d=a;b(d)&&(d.removeEventListener("drop",c,!1),d.removeEventListener("dragenter",j,!1),d.removeEventListener("dragover",j,!1),d.removeEventListener("dragexit",j,!1))}function l(a,b){a.addEventListener("drop",b,!1),a.addEventListener("dragenter",j,!1),a.addEventListener("dragover",j,!1),a.addEventListener("dragexit",j,!1)}function m(a,c){return function(d){var e=c.name;try{var f,i;if(/\.czml$/i.test(e))f=new g(e),f.load(JSON.parse(d.target.result),e);else{if(!(/\.geojson$/i.test(e)||/\.json$/i.test(e)||/\.topojson$/i.test(e)))return a.dropError.raiseEvent(a,e,"Unrecognized file: "+e),void 0;f=new h(e),i=f.load(JSON.parse(d.target.result),e)}a.dataSources.add(f),b(i)&&i.otherwise(function(b){a.dropError.raiseEvent(a,e,b)})}catch(b){a.dropError.raiseEvent(a,e,b)}}}function n(a,b){return function(c){a.dropError.raiseEvent(a,b.name,c.target.error)}}var o=function(b,d){function g(a){j(a),p&&b.dataSources.removeAll();for(var c=a.dataTransfer.files,d=c.length,e=0;d>e;e++){var f=c[e],g=new FileReader;g.onload=m(b,f),g.onerror=n(b,f),g.readAsText(f)}}d=a(d,a.EMPTY_OBJECT);var h=!0,o=new e,p=a(d.clearOnDrop,!0),q=a(d.dropTarget,b.container);q=i(q),c(b,{dropTarget:{get:function(){return q},set:function(a){k(q,g),q=a,l(q,g)}},dropEnabled:{get:function(){return h},set:function(a){a!==h&&(a?l(q,g):k(q,g),h=a)}},dropError:{get:function(){return o}},clearOnDrop:{get:function(){return p},set:function(a){p=a}}}),l(q,g),b.destroy=f(b,b.destroy,function(){b.dropEnabled=!1}),b._handleDrop=g};return o}),c("Widgets/Viewer/viewerEntityMixin",["../../Core/Cartesian3","../../Core/defaultValue","../../Core/defined","../../Core/DeveloperError","../../Core/EventHelper","../../Core/ScreenSpaceEventType","../../Core/wrapFunction","../../DataSources/ConstantPositionProperty","../../DataSources/Entity","../../DataSources/EntityView","../../Scene/SceneMode","../../ThirdParty/knockout","../../ThirdParty/when","../subscribeAndEvaluate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(a,b){var d=a.scene,e=d.camera.getPickRay(b),f=d.imageryLayers.pickImageryLayerFeatures(e,d);if(c(f)){var g=new i("Loading...");return g.description={getValue:function(){return"Loading feature information..."}},m(f,function(b){if(a.selectedEntity===g){if(!c(b)||0===b.length)return a.selectedEntity=p(),void 0;var d=b[0],e=new i(d.name);if(e.description={getValue:function(){return d.description}},c(d.position)){var f=a.scene.globe.ellipsoid.cartographicToCartesian(d.position,r);e.position=new h(f)}a.selectedEntity=e}},function(){if(a.selectedEntity===g){var b=new i("None");b.description={getValue:function(){return"No features found."}},a.selectedEntity=p()}}),g}}function p(){var a=new i("None");return a.description={getValue:function(){return"No features found."}},a}var q=function(a){function d(){a.trackedEntity=a.selectedEntity}function h(){a.trackedEntity=void 0}function m(){a.selectedEntity=void 0}function p(){a.trackedEntity=void 0,a.selectedEntity=void 0}function q(d){var e=d.currentTime;c(y)&&y.update(e);var f=a.selectedEntity,g=c(f)&&D;if(g){var h,i=c(C)?C.position:void 0,j=!1;f.isAvailable(e)&&c(f.position)&&(h=f.position.getValue(e,i),j=c(h)&&a.trackedEntity!==a.selectedEntity),c(C)&&(C.position=h),c(A)&&(A.enableCamera=j,A.isCameraTracking=a.trackedEntity===a.selectedEntity,A.descriptionRawHtml=c(f.description)?b(f.description.getValue(e),""):"")}c(C)&&(C.showSelection=g,C.update()),c(A)&&(A.showInfo=g)}function r(d){var e=a.scene.pick(d.position);if(c(e)){var f=b(e.id,e.primitive.id);if(f instanceof i)return f}return o(a,d.position)}function s(b){c(b)&&c(b.position)&&(a.trackedEntity=b)}function t(a){var b=r(a);c(b)&&s(b)}function u(b){a.selectedEntity=r(b)}function v(b,c,d){for(var e=d.length,f=0;e>f;f++){var g=d[f];a.trackedEntity===g&&a.homeButton.viewModel.command(),a.selectedEntity===g&&(a.selectedEntity=void 0)}}function w(a,b){var c=b.entities;c.collectionChanged.addEventListener(v)}function x(b,d){var e=d.entities;e.collectionChanged.removeEventListener(v),c(a.trackedEntity)&&e.getById(a.trackedEntity.id)===a.trackedEntity&&a.homeButton.viewModel.command(),c(a.selectedEntity)&&e.getById(a.selectedEntity.id)===a.selectedEntity&&(a.selectedEntity=void 0)}var y,z=a.infoBox,A=c(z)?z.viewModel:void 0,B=a.selectionIndicator,C=c(B)?B.viewModel:void 0,D=c(z)||c(B),E=new e;c(A)&&(E.add(A.cameraClicked,d),E.add(A.closeClicked,m)),E.add(a.clock.onTick,q),c(a.homeButton)&&E.add(a.homeButton.viewModel.command.beforeExecute,h),c(a.geocoder)&&E.add(a.geocoder.viewModel.search.beforeExecute,p);for(var F=a.dataSources,G=F.length,H=0;G>H;H++)w(F,F.get(H));E.add(a.dataSources.dataSourceAdded,w),E.add(a.dataSources.dataSourceRemoved,x),a.screenSpaceEventHandler.setInputAction(u,f.LEFT_CLICK),a.screenSpaceEventHandler.setInputAction(t,f.LEFT_DOUBLE_CLICK),a.trackedEntity=void 0,a.selectedEntity=void 0,l.track(a,["trackedEntity","selectedEntity"]);var I=[];I.push(n(a,"trackedEntity",function(b){var d=a.scene,e=d.mode,f=c(b);(e===k.COLUMBUS_VIEW||e===k.SCENE2D)&&(d.screenSpaceCameraController.enableTranslate=!f),(e===k.COLUMBUS_VIEW||e===k.SCENE3D)&&(d.screenSpaceCameraController.enableTilt=!f),y=f&&c(b.position)?new j(b,d,a.scene.globe.ellipsoid):void 0})),I.push(n(a,"selectedEntity",function(a){c(a)?(c(A)&&(A.titleText=c(a.name)?a.name:a.id),c(C)&&C.animateAppear()):c(C)&&C.animateDepart()})),a.destroy=g(a,a.destroy,function(){E.removeAll();var b;for(b=0;b<I.length;b++)I[b].dispose();a.screenSpaceEventHandler.removeInputAction(f.LEFT_CLICK),a.screenSpaceEventHandler.removeInputAction(f.LEFT_DOUBLE_CLICK);var c=a.dataSources,d=c.length;for(b=0;d>b;b++)x(c,c.get(b))})},r=new a;return q}),c("Widgets/Viewer/viewerPerformanceWatchdogMixin",["../../Core/defaultValue","../../Core/defined","../../Core/defineProperties","../../Core/DeveloperError","../PerformanceWatchdog/PerformanceWatchdog"],function(a,b,c,d,e){"use strict";var f=function(f,g){if(!b(f))throw new d("viewer is required.");g=a(g,a.EMPTY_OBJECT);var h=new e({scene:f.scene,container:f.bottomContainer,lowFrameRateMessage:g.lowFrameRateMessage});c(f,{performanceWatchdog:{get:function(){return h}}})};return f}),c("Workers/createTaskProcessorWorker",["../Core/defaultValue","../Core/defined","../Core/formatError"],function(a,b,c){"use strict";var d=function(d){var e,f=[],g={id:void 0,result:void 0,error:void 0};return function(h){var i=h.data;f.length=0,g.id=i.id,g.error=void 0,g.result=void 0;try{g.result=d(i.parameters,f)}catch(a){g.error=a instanceof Error?{name:a.name,message:a.message,stack:a.stack}:a}b(e)||(e=a(self.webkitPostMessage,self.postMessage)),i.canTransferArrayBuffer||(f.length=0);try{e(g,f)}catch(a){g.result=void 0,g.error="postMessage failed with error: "+c(a)+"\n  with responseMessage: "+JSON.stringify(g),e(g)}}};return d}),
c("Cesium",["./Core/ArcGisImageServerTerrainProvider","./Core/AssociativeArray","./Core/AttributeCompression","./Core/AxisAlignedBoundingBox","./Core/BingMapsApi","./Core/BoundingRectangle","./Core/BoundingSphere","./Core/BoxGeometry","./Core/BoxOutlineGeometry","./Core/Cartesian2","./Core/Cartesian3","./Core/Cartesian4","./Core/Cartographic","./Core/CatmullRomSpline","./Core/CesiumTerrainProvider","./Core/CircleGeometry","./Core/CircleOutlineGeometry","./Core/Clock","./Core/ClockRange","./Core/ClockStep","./Core/Color","./Core/ColorGeometryInstanceAttribute","./Core/ComponentDatatype","./Core/CornerType","./Core/CorridorGeometry","./Core/CorridorGeometryLibrary","./Core/CorridorOutlineGeometry","./Core/Credit","./Core/CubicRealPolynomial","./Core/CylinderGeometry","./Core/CylinderGeometryLibrary","./Core/CylinderOutlineGeometry","./Core/DefaultProxy","./Core/DeveloperError","./Core/EarthOrientationParameters","./Core/EarthOrientationParametersSample","./Core/EasingFunction","./Core/EllipseGeometry","./Core/EllipseGeometryLibrary","./Core/EllipseOutlineGeometry","./Core/Ellipsoid","./Core/EllipsoidGeodesic","./Core/EllipsoidGeometry","./Core/EllipsoidOutlineGeometry","./Core/EllipsoidTangentPlane","./Core/EllipsoidTerrainProvider","./Core/EllipsoidalOccluder","./Core/EncodedCartesian3","./Core/Event","./Core/EventHelper","./Core/ExtrapolationType","./Core/FeatureDetection","./Core/Fullscreen","./Core/GeographicProjection","./Core/GeographicTilingScheme","./Core/Geometry","./Core/GeometryAttribute","./Core/GeometryAttributes","./Core/GeometryInstance","./Core/GeometryInstanceAttribute","./Core/GeometryPipeline","./Core/GeometryType","./Core/GregorianDate","./Core/HeightmapTerrainData","./Core/HeightmapTessellator","./Core/HermitePolynomialApproximation","./Core/HermiteSpline","./Core/Iau2000Orientation","./Core/Iau2006XysData","./Core/Iau2006XysSample","./Core/IauOrientationAxes","./Core/IauOrientationParameters","./Core/IndexDatatype","./Core/InterpolationAlgorithm","./Core/Intersect","./Core/IntersectionTests","./Core/Intersections2D","./Core/Interval","./Core/Iso8601","./Core/JulianDate","./Core/KeyboardEventModifier","./Core/LagrangePolynomialApproximation","./Core/LeapSecond","./Core/LinearApproximation","./Core/LinearSpline","./Core/MapProjection","./Core/Math","./Core/Matrix2","./Core/Matrix3","./Core/Matrix4","./Core/NearFarScalar","./Core/ObjectOrientedBoundingBox","./Core/Occluder","./Core/Packable","./Core/PackableForInterpolation","./Core/PinBuilder","./Core/PixelFormat","./Core/Plane","./Core/PolygonGeometry","./Core/PolygonGeometryLibrary","./Core/PolygonOutlineGeometry","./Core/PolygonPipeline","./Core/PolylineGeometry","./Core/PolylinePipeline","./Core/PolylineVolumeGeometry","./Core/PolylineVolumeGeometryLibrary","./Core/PolylineVolumeOutlineGeometry","./Core/PrimitiveType","./Core/QuadraticRealPolynomial","./Core/QuantizedMeshTerrainData","./Core/QuarticRealPolynomial","./Core/Quaternion","./Core/QuaternionSpline","./Core/Queue","./Core/Ray","./Core/Rectangle","./Core/RectangleGeometry","./Core/RectangleGeometryLibrary","./Core/RectangleOutlineGeometry","./Core/ReferenceFrame","./Core/RequestErrorEvent","./Core/RuntimeError","./Core/ScreenSpaceEventHandler","./Core/ScreenSpaceEventType","./Core/ShowGeometryInstanceAttribute","./Core/Simon1994PlanetaryPositions","./Core/SimplePolylineGeometry","./Core/SphereGeometry","./Core/SphereOutlineGeometry","./Core/Spherical","./Core/Spline","./Core/TaskProcessor","./Core/TerrainData","./Core/TerrainMesh","./Core/TerrainProvider","./Core/TileProviderError","./Core/TilingScheme","./Core/TimeConstants","./Core/TimeInterval","./Core/TimeIntervalCollection","./Core/TimeStandard","./Core/Tipsify","./Core/Transforms","./Core/TridiagonalSystemSolver","./Core/VRTheWorldTerrainProvider","./Core/VertexFormat","./Core/Visibility","./Core/WallGeometry","./Core/WallGeometryLibrary","./Core/WallOutlineGeometry","./Core/WebMercatorProjection","./Core/WebMercatorTilingScheme","./Core/WindingOrder","./Core/appendForwardSlash","./Core/barycentricCoordinates","./Core/binarySearch","./Core/buildModuleUrl","./Core/cancelAnimationFrame","./Core/clone","./Core/combine","./Core/createGuid","./Core/defaultValue","./Core/defineProperties","./Core/defined","./Core/deprecationWarning","./Core/destroyObject","./Core/formatError","./Core/freezeObject","./Core/getFilenameFromUri","./Core/getImagePixels","./Core/getTimestamp","./Core/isArray","./Core/isCrossOriginUrl","./Core/isLeapYear","./Core/jsonp","./Core/loadArrayBuffer","./Core/loadBlob","./Core/loadImage","./Core/loadImageViaBlob","./Core/loadJson","./Core/loadText","./Core/loadWithXhr","./Core/loadXML","./Core/mergeSort","./Core/objectToQuery","./Core/parseResponseHeaders","./Core/pointInsideTriangle","./Core/queryToObject","./Core/requestAnimationFrame","./Core/sampleTerrain","./Core/subdivideArray","./Core/throttleRequestByServer","./Core/wrapFunction","./Core/writeTextToCanvas","./DataSources/BillboardGraphics","./DataSources/BillboardVisualizer","./DataSources/CallbackProperty","./DataSources/ColorMaterialProperty","./DataSources/CompositeEntityCollection","./DataSources/CompositeMaterialProperty","./DataSources/CompositePositionProperty","./DataSources/CompositeProperty","./DataSources/ConstantPositionProperty","./DataSources/ConstantProperty","./DataSources/CzmlDataSource","./DataSources/DataSource","./DataSources/DataSourceClock","./DataSources/DataSourceCollection","./DataSources/DataSourceDisplay","./DataSources/DynamicGeometryUpdater","./DataSources/EllipseGeometryUpdater","./DataSources/EllipseGraphics","./DataSources/EllipsoidGeometryUpdater","./DataSources/EllipsoidGraphics","./DataSources/Entity","./DataSources/EntityCollection","./DataSources/EntityView","./DataSources/GeoJsonDataSource","./DataSources/GeometryUpdater","./DataSources/GeometryVisualizer","./DataSources/GridMaterialProperty","./DataSources/ImageMaterialProperty","./DataSources/LabelGraphics","./DataSources/LabelVisualizer","./DataSources/MaterialProperty","./DataSources/ModelGraphics","./DataSources/ModelVisualizer","./DataSources/PathGraphics","./DataSources/PathVisualizer","./DataSources/PointGraphics","./DataSources/PointVisualizer","./DataSources/PolygonGeometryUpdater","./DataSources/PolygonGraphics","./DataSources/PolylineGeometryUpdater","./DataSources/PolylineGlowMaterialProperty","./DataSources/PolylineGraphics","./DataSources/PolylineOutlineMaterialProperty","./DataSources/PositionProperty","./DataSources/PositionPropertyArray","./DataSources/Property","./DataSources/PropertyArray","./DataSources/RectangleGeometryUpdater","./DataSources/RectangleGraphics","./DataSources/ReferenceProperty","./DataSources/SampledPositionProperty","./DataSources/SampledProperty","./DataSources/StaticGeometryColorBatch","./DataSources/StaticGeometryPerMaterialBatch","./DataSources/StaticOutlineGeometryBatch","./DataSources/StripeMaterialProperty","./DataSources/StripeOrientation","./DataSources/TimeIntervalCollectionPositionProperty","./DataSources/TimeIntervalCollectionProperty","./DataSources/Visualizer","./DataSources/WallGeometryUpdater","./DataSources/WallGraphics","./DataSources/createPropertyDescriptor","./Renderer/AutomaticUniforms","./Renderer/Buffer","./Renderer/BufferUsage","./Renderer/ClearCommand","./Renderer/Context","./Renderer/CubeMap","./Renderer/CubeMapFace","./Renderer/DrawCommand","./Renderer/Framebuffer","./Renderer/MipmapHint","./Renderer/PassState","./Renderer/PickFramebuffer","./Renderer/PixelDatatype","./Renderer/RenderState","./Renderer/Renderbuffer","./Renderer/RenderbufferFormat","./Renderer/ShaderCache","./Renderer/ShaderProgram","./Renderer/ShaderSource","./Renderer/Texture","./Renderer/TextureMagnificationFilter","./Renderer/TextureMinificationFilter","./Renderer/TextureWrap","./Renderer/UniformState","./Renderer/VertexArray","./Renderer/VertexArrayFacade","./Renderer/loadCubeMap","./Scene/Appearance","./Scene/ArcGisMapServerImageryProvider","./Scene/Billboard","./Scene/BillboardCollection","./Scene/BingMapsImageryProvider","./Scene/BingMapsStyle","./Scene/BlendEquation","./Scene/BlendFunction","./Scene/BlendingState","./Scene/Camera","./Scene/CameraEventAggregator","./Scene/CameraEventType","./Scene/CameraFlightPath","./Scene/CreditDisplay","./Scene/CullFace","./Scene/CullingVolume","./Scene/DebugAppearance","./Scene/DebugModelMatrixPrimitive","./Scene/DepthFunction","./Scene/DiscardMissingTileImagePolicy","./Scene/EllipsoidPrimitive","./Scene/EllipsoidSurfaceAppearance","./Scene/FXAA","./Scene/FrameRateMonitor","./Scene/FrameState","./Scene/FrustumCommands","./Scene/Globe","./Scene/GlobeSurfaceShaderSet","./Scene/GlobeSurfaceTile","./Scene/GlobeSurfaceTileProvider","./Scene/GoogleEarthImageryProvider","./Scene/GridImageryProvider","./Scene/HorizontalOrigin","./Scene/Imagery","./Scene/ImageryLayer","./Scene/ImageryLayerCollection","./Scene/ImageryLayerFeatureInfo","./Scene/ImageryProvider","./Scene/ImageryState","./Scene/Label","./Scene/LabelCollection","./Scene/LabelStyle","./Scene/Material","./Scene/MaterialAppearance","./Scene/Model","./Scene/ModelAnimation","./Scene/ModelAnimationCache","./Scene/ModelAnimationCollection","./Scene/ModelAnimationLoop","./Scene/ModelAnimationState","./Scene/ModelMaterial","./Scene/ModelMesh","./Scene/ModelNode","./Scene/Moon","./Scene/NeverTileDiscardPolicy","./Scene/OIT","./Scene/OpenStreetMapImageryProvider","./Scene/OrthographicFrustum","./Scene/Pass","./Scene/PerInstanceColorAppearance","./Scene/PerformanceDisplay","./Scene/PerspectiveFrustum","./Scene/PerspectiveOffCenterFrustum","./Scene/Polygon","./Scene/Polyline","./Scene/PolylineCollection","./Scene/PolylineColorAppearance","./Scene/PolylineMaterialAppearance","./Scene/Primitive","./Scene/PrimitiveCollection","./Scene/PrimitivePipeline","./Scene/PrimitiveState","./Scene/QuadtreeOccluders","./Scene/QuadtreePrimitive","./Scene/QuadtreeTile","./Scene/QuadtreeTileLoadState","./Scene/QuadtreeTileProvider","./Scene/RectanglePrimitive","./Scene/Scene","./Scene/SceneMode","./Scene/SceneTransforms","./Scene/SceneTransitioner","./Scene/ScreenSpaceCameraController","./Scene/SingleTileImageryProvider","./Scene/SkyAtmosphere","./Scene/SkyBox","./Scene/StencilFunction","./Scene/StencilOperation","./Scene/Sun","./Scene/SunPostProcess","./Scene/TerrainState","./Scene/TextureAtlas","./Scene/TileCoordinatesImageryProvider","./Scene/TileDiscardPolicy","./Scene/TileImagery","./Scene/TileMapServiceImageryProvider","./Scene/TileReplacementQueue","./Scene/TileState","./Scene/TileTerrain","./Scene/TweenCollection","./Scene/VerticalOrigin","./Scene/ViewportQuad","./Scene/WebMapServiceImageryProvider","./Scene/WebMapTileServiceImageryProvider","./Scene/createTangentSpaceDebugPrimitive","./Scene/getModelAccessor","./Scene/terrainAttributeLocations","./Shaders/AdjustTranslucentFS","./Shaders/Appearances/AllMaterialAppearanceFS","./Shaders/Appearances/AllMaterialAppearanceVS","./Shaders/Appearances/BasicMaterialAppearanceFS","./Shaders/Appearances/BasicMaterialAppearanceVS","./Shaders/Appearances/EllipsoidSurfaceAppearanceFS","./Shaders/Appearances/EllipsoidSurfaceAppearanceVS","./Shaders/Appearances/PerInstanceColorAppearanceFS","./Shaders/Appearances/PerInstanceColorAppearanceVS","./Shaders/Appearances/PerInstanceFlatColorAppearanceFS","./Shaders/Appearances/PerInstanceFlatColorAppearanceVS","./Shaders/Appearances/PolylineColorAppearanceVS","./Shaders/Appearances/PolylineMaterialAppearanceVS","./Shaders/Appearances/TexturedMaterialAppearanceFS","./Shaders/Appearances/TexturedMaterialAppearanceVS","./Shaders/BillboardCollectionFS","./Shaders/BillboardCollectionVS","./Shaders/Builtin/Constants/degreesPerRadian","./Shaders/Builtin/Constants/depthRange","./Shaders/Builtin/Constants/epsilon1","./Shaders/Builtin/Constants/epsilon2","./Shaders/Builtin/Constants/epsilon3","./Shaders/Builtin/Constants/epsilon4","./Shaders/Builtin/Constants/epsilon5","./Shaders/Builtin/Constants/epsilon6","./Shaders/Builtin/Constants/epsilon7","./Shaders/Builtin/Constants/infinity","./Shaders/Builtin/Constants/oneOverPi","./Shaders/Builtin/Constants/oneOverTwoPi","./Shaders/Builtin/Constants/pi","./Shaders/Builtin/Constants/piOverFour","./Shaders/Builtin/Constants/piOverSix","./Shaders/Builtin/Constants/piOverThree","./Shaders/Builtin/Constants/piOverTwo","./Shaders/Builtin/Constants/radiansPerDegree","./Shaders/Builtin/Constants/sceneMode2D","./Shaders/Builtin/Constants/sceneMode3D","./Shaders/Builtin/Constants/sceneModeColumbusView","./Shaders/Builtin/Constants/sceneModeMorphing","./Shaders/Builtin/Constants/solarRadius","./Shaders/Builtin/Constants/threePiOver2","./Shaders/Builtin/Constants/twoPi","./Shaders/Builtin/Constants/webMercatorMaxLatitude","./Shaders/Builtin/CzmBuiltins","./Shaders/Builtin/Functions/RGBToXYZ","./Shaders/Builtin/Functions/XYZToRGB","./Shaders/Builtin/Functions/alphaWeight","./Shaders/Builtin/Functions/antialias","./Shaders/Builtin/Functions/columbusViewMorph","./Shaders/Builtin/Functions/computePosition","./Shaders/Builtin/Functions/cosineAndSine","./Shaders/Builtin/Functions/decompressTextureCoordinates","./Shaders/Builtin/Functions/eastNorthUpToEyeCoordinates","./Shaders/Builtin/Functions/ellipsoidContainsPoint","./Shaders/Builtin/Functions/ellipsoidNew","./Shaders/Builtin/Functions/ellipsoidWgs84TextureCoordinates","./Shaders/Builtin/Functions/equalsEpsilon","./Shaders/Builtin/Functions/eyeOffset","./Shaders/Builtin/Functions/eyeToWindowCoordinates","./Shaders/Builtin/Functions/geodeticSurfaceNormal","./Shaders/Builtin/Functions/getDefaultMaterial","./Shaders/Builtin/Functions/getLambertDiffuse","./Shaders/Builtin/Functions/getSpecular","./Shaders/Builtin/Functions/getWaterNoise","./Shaders/Builtin/Functions/getWgs84EllipsoidEC","./Shaders/Builtin/Functions/hue","./Shaders/Builtin/Functions/isEmpty","./Shaders/Builtin/Functions/isFull","./Shaders/Builtin/Functions/latitudeToWebMercatorFraction","./Shaders/Builtin/Functions/luminance","./Shaders/Builtin/Functions/modelToWindowCoordinates","./Shaders/Builtin/Functions/multiplyWithColorBalance","./Shaders/Builtin/Functions/octDecode","./Shaders/Builtin/Functions/phong","./Shaders/Builtin/Functions/pointAlongRay","./Shaders/Builtin/Functions/rayEllipsoidIntersectionInterval","./Shaders/Builtin/Functions/saturation","./Shaders/Builtin/Functions/signNotZero","./Shaders/Builtin/Functions/tangentToEyeSpaceMatrix","./Shaders/Builtin/Functions/translateRelativeToEye","./Shaders/Builtin/Functions/translucentPhong","./Shaders/Builtin/Functions/transpose","./Shaders/Builtin/Functions/windowToEyeCoordinates","./Shaders/Builtin/Structs/depthRangeStruct","./Shaders/Builtin/Structs/ellipsoid","./Shaders/Builtin/Structs/material","./Shaders/Builtin/Structs/materialInput","./Shaders/Builtin/Structs/ray","./Shaders/Builtin/Structs/raySegment","./Shaders/CompositeOITFS","./Shaders/EllipsoidFS","./Shaders/EllipsoidVS","./Shaders/GlobeFS","./Shaders/GlobeFSDepth","./Shaders/GlobeFSPole","./Shaders/GlobeVS","./Shaders/GlobeVSDepth","./Shaders/GlobeVSPole","./Shaders/Materials/BumpMapMaterial","./Shaders/Materials/CheckerboardMaterial","./Shaders/Materials/DotMaterial","./Shaders/Materials/FadeMaterial","./Shaders/Materials/GridMaterial","./Shaders/Materials/NormalMapMaterial","./Shaders/Materials/PolylineArrowMaterial","./Shaders/Materials/PolylineGlowMaterial","./Shaders/Materials/PolylineOutlineMaterial","./Shaders/Materials/RimLightingMaterial","./Shaders/Materials/StripeMaterial","./Shaders/Materials/Water","./Shaders/PolylineCommon","./Shaders/PolylineFS","./Shaders/PolylineVS","./Shaders/PostProcessFilters/AdditiveBlend","./Shaders/PostProcessFilters/BrightPass","./Shaders/PostProcessFilters/FXAA","./Shaders/PostProcessFilters/GaussianBlur1D","./Shaders/PostProcessFilters/PassThrough","./Shaders/ReprojectWebMercatorFS","./Shaders/ReprojectWebMercatorVS","./Shaders/SkyAtmosphereFS","./Shaders/SkyAtmosphereVS","./Shaders/SkyBoxFS","./Shaders/SkyBoxVS","./Shaders/SunFS","./Shaders/SunTextureFS","./Shaders/SunVS","./Shaders/ViewportQuadFS","./Shaders/ViewportQuadVS","./ThirdParty/Tween","./ThirdParty/Uri","./ThirdParty/gltfDefaults","./ThirdParty/knockout-3.2.0","./ThirdParty/knockout-es5","./ThirdParty/knockout","./ThirdParty/measureText","./ThirdParty/mersenne-twister","./ThirdParty/sprintf","./ThirdParty/topojson","./ThirdParty/when","./Widgets/Animation/Animation","./Widgets/Animation/AnimationViewModel","./Widgets/BaseLayerPicker/BaseLayerPicker","./Widgets/BaseLayerPicker/BaseLayerPickerViewModel","./Widgets/BaseLayerPicker/ProviderViewModel","./Widgets/BaseLayerPicker/createDefaultImageryProviderViewModels","./Widgets/BaseLayerPicker/createDefaultTerrainProviderViewModels","./Widgets/CesiumInspector/CesiumInspector","./Widgets/CesiumInspector/CesiumInspectorViewModel","./Widgets/CesiumWidget/CesiumWidget","./Widgets/ClockViewModel","./Widgets/Command","./Widgets/FullscreenButton/FullscreenButton","./Widgets/FullscreenButton/FullscreenButtonViewModel","./Widgets/Geocoder/Geocoder","./Widgets/Geocoder/GeocoderViewModel","./Widgets/HomeButton/HomeButton","./Widgets/HomeButton/HomeButtonViewModel","./Widgets/InfoBox/InfoBox","./Widgets/InfoBox/InfoBoxViewModel","./Widgets/NavigationHelpButton/NavigationHelpButton","./Widgets/NavigationHelpButton/NavigationHelpButtonViewModel","./Widgets/PerformanceWatchdog/PerformanceWatchdog","./Widgets/PerformanceWatchdog/PerformanceWatchdogViewModel","./Widgets/SceneModePicker/SceneModePicker","./Widgets/SceneModePicker/SceneModePickerViewModel","./Widgets/SelectionIndicator/SelectionIndicator","./Widgets/SelectionIndicator/SelectionIndicatorViewModel","./Widgets/SvgPathBindingHandler","./Widgets/Timeline/Timeline","./Widgets/Timeline/TimelineHighlightRange","./Widgets/Timeline/TimelineTrack","./Widgets/ToggleButtonViewModel","./Widgets/Viewer/Viewer","./Widgets/Viewer/viewerCesiumInspectorMixin","./Widgets/Viewer/viewerDragDropMixin","./Widgets/Viewer/viewerEntityMixin","./Widgets/Viewer/viewerPerformanceWatchdogMixin","./Widgets/createCommand","./Widgets/getElement","./Widgets/subscribeAndEvaluate","./Workers/createTaskProcessorWorker"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,Ac,Bc,Cc,Dc,Ec,Fc,Gc,Hc,Ic,Jc,Kc,Lc,Mc,Nc,Oc,Pc,Qc,Rc,Sc,Tc,Uc,Vc,Wc,Xc,Yc,Zc,$c,_c,ad,bd,cd,dd,ed,fd,gd,hd,id,jd,kd,ld,md,nd,od,pd,qd,rd,sd,td,ud,vd,wd,xd,yd,zd,Ad,Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd,Od,Pd,Qd,Rd,Sd,Td,Ud,Vd,Wd,Xd,Yd,Zd,$d,_d,ae,be,ce,de,ee,fe,ge,he,ie,je,ke,le,me,ne,oe,pe,qe,re,se,te,ue,ve,we,xe,ye,ze,Ae,Be,Ce,De,Ee,Fe,Ge,He,Ie,Je,Ke,Le,Me,Ne,Oe,Pe,Qe,Re,Se,Te,Ue,Ve,We,Xe,Ye,Ze,$e,_e,af,bf,cf,df,ef,ff,gf,hf,jf,kf,lf,mf,nf,of,pf,qf,rf,sf,tf,uf,vf,wf,xf,yf,zf,Af,Bf,Cf,Df,Ef,Ff,Gf,Hf,If,Jf,Kf,Lf,Mf,Nf,Of,Pf,Qf,Rf,Sf,Tf,Uf,Vf,Wf,Xf,Yf,Zf,$f,_f,ag,bg,cg,dg,eg,fg,gg,hg,ig,jg,kg,lg,mg,ng,og,pg,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,_g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh,wh,xh,yh,zh,Ah,Bh,Ch,Dh,Eh,Fh,Gh,Hh,Ih,Jh,Kh,Lh,Mh,Nh,Oh,Ph,Qh,Rh,Sh,Th,Uh,Vh,Wh,Xh,Yh,Zh,$h,_h,ai,bi,ci,di,ei,fi,gi,hi,ii,ji,ki,li,mi,ni,oi,pi,qi,ri,si,ti,ui,vi,wi,xi,yi,zi,Ai,Bi,Ci,Di,Ei,Fi,Gi,Hi,Ii,Ji,Ki,Li,Mi,Ni,Oi,Pi,Qi,Ri,Si,Ti,Ui,Vi,Wi,Xi,Yi,Zi,$i,_i,aj,bj,cj,dj,ej,fj,gj,hj,ij,jj,kj,lj,mj,nj,oj,pj,qj,rj,sj,tj,uj,vj,wj,xj,yj,zj,Aj,Bj,Cj,Dj,Ej,Fj,Gj,Hj){"use strict";var Ij={VERSION:"1.4",_shaders:{}};return Ij.ArcGisImageServerTerrainProvider=a,Ij.AssociativeArray=b,Ij.AttributeCompression=c,Ij.AxisAlignedBoundingBox=d,Ij.BingMapsApi=e,Ij.BoundingRectangle=f,Ij.BoundingSphere=g,Ij.BoxGeometry=h,Ij.BoxOutlineGeometry=i,Ij.Cartesian2=j,Ij.Cartesian3=k,Ij.Cartesian4=l,Ij.Cartographic=m,Ij.CatmullRomSpline=n,Ij.CesiumTerrainProvider=o,Ij.CircleGeometry=p,Ij.CircleOutlineGeometry=q,Ij.Clock=r,Ij.ClockRange=s,Ij.ClockStep=t,Ij.Color=u,Ij.ColorGeometryInstanceAttribute=v,Ij.ComponentDatatype=w,Ij.CornerType=x,Ij.CorridorGeometry=y,Ij.CorridorGeometryLibrary=z,Ij.CorridorOutlineGeometry=A,Ij.Credit=B,Ij.CubicRealPolynomial=C,Ij.CylinderGeometry=D,Ij.CylinderGeometryLibrary=E,Ij.CylinderOutlineGeometry=F,Ij.DefaultProxy=G,Ij.DeveloperError=H,Ij.EarthOrientationParameters=I,Ij.EarthOrientationParametersSample=J,Ij.EasingFunction=K,Ij.EllipseGeometry=L,Ij.EllipseGeometryLibrary=M,Ij.EllipseOutlineGeometry=N,Ij.Ellipsoid=O,Ij.EllipsoidGeodesic=P,Ij.EllipsoidGeometry=Q,Ij.EllipsoidOutlineGeometry=R,Ij.EllipsoidTangentPlane=S,Ij.EllipsoidTerrainProvider=T,Ij.EllipsoidalOccluder=U,Ij.EncodedCartesian3=V,Ij.Event=W,Ij.EventHelper=X,Ij.ExtrapolationType=Y,Ij.FeatureDetection=Z,Ij.Fullscreen=$,Ij.GeographicProjection=_,Ij.GeographicTilingScheme=aa,Ij.Geometry=ba,Ij.GeometryAttribute=ca,Ij.GeometryAttributes=da,Ij.GeometryInstance=ea,Ij.GeometryInstanceAttribute=fa,Ij.GeometryPipeline=ga,Ij.GeometryType=ha,Ij.GregorianDate=ia,Ij.HeightmapTerrainData=ja,Ij.HeightmapTessellator=ka,Ij.HermitePolynomialApproximation=la,Ij.HermiteSpline=ma,Ij.Iau2000Orientation=na,Ij.Iau2006XysData=oa,Ij.Iau2006XysSample=pa,Ij.IauOrientationAxes=qa,Ij.IauOrientationParameters=ra,Ij.IndexDatatype=sa,Ij.InterpolationAlgorithm=ta,Ij.Intersect=ua,Ij.IntersectionTests=va,Ij.Intersections2D=wa,Ij.Interval=xa,Ij.Iso8601=ya,Ij.JulianDate=za,Ij.KeyboardEventModifier=Aa,Ij.LagrangePolynomialApproximation=Ba,Ij.LeapSecond=Ca,Ij.LinearApproximation=Da,Ij.LinearSpline=Ea,Ij.MapProjection=Fa,Ij.Math=Ga,Ij.Matrix2=Ha,Ij.Matrix3=Ia,Ij.Matrix4=Ja,Ij.NearFarScalar=Ka,Ij.ObjectOrientedBoundingBox=La,Ij.Occluder=Ma,Ij.Packable=Na,Ij.PackableForInterpolation=Oa,Ij.PinBuilder=Pa,Ij.PixelFormat=Qa,Ij.Plane=Ra,Ij.PolygonGeometry=Sa,Ij.PolygonGeometryLibrary=Ta,Ij.PolygonOutlineGeometry=Ua,Ij.PolygonPipeline=Va,Ij.PolylineGeometry=Wa,Ij.PolylinePipeline=Xa,Ij.PolylineVolumeGeometry=Ya,Ij.PolylineVolumeGeometryLibrary=Za,Ij.PolylineVolumeOutlineGeometry=$a,Ij.PrimitiveType=_a,Ij.QuadraticRealPolynomial=ab,Ij.QuantizedMeshTerrainData=bb,Ij.QuarticRealPolynomial=cb,Ij.Quaternion=db,Ij.QuaternionSpline=eb,Ij.Queue=fb,Ij.Ray=gb,Ij.Rectangle=hb,Ij.RectangleGeometry=ib,Ij.RectangleGeometryLibrary=jb,Ij.RectangleOutlineGeometry=kb,Ij.ReferenceFrame=lb,Ij.RequestErrorEvent=mb,Ij.RuntimeError=nb,Ij.ScreenSpaceEventHandler=ob,Ij.ScreenSpaceEventType=pb,Ij.ShowGeometryInstanceAttribute=qb,Ij.Simon1994PlanetaryPositions=rb,Ij.SimplePolylineGeometry=sb,Ij.SphereGeometry=tb,Ij.SphereOutlineGeometry=ub,Ij.Spherical=vb,Ij.Spline=wb,Ij.TaskProcessor=xb,Ij.TerrainData=yb,Ij.TerrainMesh=zb,Ij.TerrainProvider=Ab,Ij.TileProviderError=Bb,Ij.TilingScheme=Cb,Ij.TimeConstants=Db,Ij.TimeInterval=Eb,Ij.TimeIntervalCollection=Fb,Ij.TimeStandard=Gb,Ij.Tipsify=Hb,Ij.Transforms=Ib,Ij.TridiagonalSystemSolver=Jb,Ij.VRTheWorldTerrainProvider=Kb,Ij.VertexFormat=Lb,Ij.Visibility=Mb,Ij.WallGeometry=Nb,Ij.WallGeometryLibrary=Ob,Ij.WallOutlineGeometry=Pb,Ij.WebMercatorProjection=Qb,Ij.WebMercatorTilingScheme=Rb,Ij.WindingOrder=Sb,Ij.appendForwardSlash=Tb,Ij.barycentricCoordinates=Ub,Ij.binarySearch=Vb,Ij.buildModuleUrl=Wb,Ij.cancelAnimationFrame=Xb,Ij.clone=Yb,Ij.combine=Zb,Ij.createGuid=$b,Ij.defaultValue=_b,Ij.defineProperties=ac,Ij.defined=bc,Ij.deprecationWarning=cc,Ij.destroyObject=dc,Ij.formatError=ec,Ij.freezeObject=fc,Ij.getFilenameFromUri=gc,Ij.getImagePixels=hc,Ij.getTimestamp=ic,Ij.isArray=jc,Ij.isCrossOriginUrl=kc,Ij.isLeapYear=lc,Ij.jsonp=mc,Ij.loadArrayBuffer=nc,Ij.loadBlob=oc,Ij.loadImage=pc,Ij.loadImageViaBlob=qc,Ij.loadJson=rc,Ij.loadText=sc,Ij.loadWithXhr=tc,Ij.loadXML=uc,Ij.mergeSort=vc,Ij.objectToQuery=wc,Ij.parseResponseHeaders=xc,Ij.pointInsideTriangle=yc,Ij.queryToObject=zc,Ij.requestAnimationFrame=Ac,Ij.sampleTerrain=Bc,Ij.subdivideArray=Cc,Ij.throttleRequestByServer=Dc,Ij.wrapFunction=Ec,Ij.writeTextToCanvas=Fc,Ij.BillboardGraphics=Gc,Ij.BillboardVisualizer=Hc,Ij.CallbackProperty=Ic,Ij.ColorMaterialProperty=Jc,Ij.CompositeEntityCollection=Kc,Ij.CompositeMaterialProperty=Lc,Ij.CompositePositionProperty=Mc,Ij.CompositeProperty=Nc,Ij.ConstantPositionProperty=Oc,Ij.ConstantProperty=Pc,Ij.CzmlDataSource=Qc,Ij.DataSource=Rc,Ij.DataSourceClock=Sc,Ij.DataSourceCollection=Tc,Ij.DataSourceDisplay=Uc,Ij.DynamicGeometryUpdater=Vc,Ij.EllipseGeometryUpdater=Wc,Ij.EllipseGraphics=Xc,Ij.EllipsoidGeometryUpdater=Yc,Ij.EllipsoidGraphics=Zc,Ij.Entity=$c,Ij.EntityCollection=_c,Ij.EntityView=ad,Ij.GeoJsonDataSource=bd,Ij.GeometryUpdater=cd,Ij.GeometryVisualizer=dd,Ij.GridMaterialProperty=ed,Ij.ImageMaterialProperty=fd,Ij.LabelGraphics=gd,Ij.LabelVisualizer=hd,Ij.MaterialProperty=id,Ij.ModelGraphics=jd,Ij.ModelVisualizer=kd,Ij.PathGraphics=ld,Ij.PathVisualizer=md,Ij.PointGraphics=nd,Ij.PointVisualizer=od,Ij.PolygonGeometryUpdater=pd,Ij.PolygonGraphics=qd,Ij.PolylineGeometryUpdater=rd,Ij.PolylineGlowMaterialProperty=sd,Ij.PolylineGraphics=td,Ij.PolylineOutlineMaterialProperty=ud,Ij.PositionProperty=vd,Ij.PositionPropertyArray=wd,Ij.Property=xd,Ij.PropertyArray=yd,Ij.RectangleGeometryUpdater=zd,Ij.RectangleGraphics=Ad,Ij.ReferenceProperty=Bd,Ij.SampledPositionProperty=Cd,Ij.SampledProperty=Dd,Ij.StaticGeometryColorBatch=Ed,Ij.StaticGeometryPerMaterialBatch=Fd,Ij.StaticOutlineGeometryBatch=Gd,Ij.StripeMaterialProperty=Hd,Ij.StripeOrientation=Id,Ij.TimeIntervalCollectionPositionProperty=Jd,Ij.TimeIntervalCollectionProperty=Kd,Ij.Visualizer=Ld,Ij.WallGeometryUpdater=Md,Ij.WallGraphics=Nd,Ij.createPropertyDescriptor=Od,Ij.AutomaticUniforms=Pd,Ij.Buffer=Qd,Ij.BufferUsage=Rd,Ij.ClearCommand=Sd,Ij.Context=Td,Ij.CubeMap=Ud,Ij.CubeMapFace=Vd,Ij.DrawCommand=Wd,Ij.Framebuffer=Xd,Ij.MipmapHint=Yd,Ij.PassState=Zd,Ij.PickFramebuffer=$d,Ij.PixelDatatype=_d,Ij.RenderState=ae,Ij.Renderbuffer=be,Ij.RenderbufferFormat=ce,Ij.ShaderCache=de,Ij.ShaderProgram=ee,Ij.ShaderSource=fe,Ij.Texture=ge,Ij.TextureMagnificationFilter=he,Ij.TextureMinificationFilter=ie,Ij.TextureWrap=je,Ij.UniformState=ke,Ij.VertexArray=le,Ij.VertexArrayFacade=me,Ij.loadCubeMap=ne,Ij.Appearance=oe,Ij.ArcGisMapServerImageryProvider=pe,Ij.Billboard=qe,Ij.BillboardCollection=re,Ij.BingMapsImageryProvider=se,Ij.BingMapsStyle=te,Ij.BlendEquation=ue,Ij.BlendFunction=ve,Ij.BlendingState=we,Ij.Camera=xe,Ij.CameraEventAggregator=ye,Ij.CameraEventType=ze,Ij.CameraFlightPath=Ae,Ij.CreditDisplay=Be,Ij.CullFace=Ce,Ij.CullingVolume=De,Ij.DebugAppearance=Ee,Ij.DebugModelMatrixPrimitive=Fe,Ij.DepthFunction=Ge,Ij.DiscardMissingTileImagePolicy=He,Ij.EllipsoidPrimitive=Ie,Ij.EllipsoidSurfaceAppearance=Je,Ij.FXAA=Ke,Ij.FrameRateMonitor=Le,Ij.FrameState=Me,Ij.FrustumCommands=Ne,Ij.Globe=Oe,Ij.GlobeSurfaceShaderSet=Pe,Ij.GlobeSurfaceTile=Qe,Ij.GlobeSurfaceTileProvider=Re,Ij.GoogleEarthImageryProvider=Se,Ij.GridImageryProvider=Te,Ij.HorizontalOrigin=Ue,Ij.Imagery=Ve,Ij.ImageryLayer=We,Ij.ImageryLayerCollection=Xe,Ij.ImageryLayerFeatureInfo=Ye,Ij.ImageryProvider=Ze,Ij.ImageryState=$e,Ij.Label=_e,Ij.LabelCollection=af,Ij.LabelStyle=bf,Ij.Material=cf,Ij.MaterialAppearance=df,Ij.Model=ef,Ij.ModelAnimation=ff,Ij.ModelAnimationCache=gf,Ij.ModelAnimationCollection=hf,Ij.ModelAnimationLoop=jf,Ij.ModelAnimationState=kf,Ij.ModelMaterial=lf,Ij.ModelMesh=mf,Ij.ModelNode=nf,Ij.Moon=of,Ij.NeverTileDiscardPolicy=pf,Ij.OIT=qf,Ij.OpenStreetMapImageryProvider=rf,Ij.OrthographicFrustum=sf,Ij.Pass=tf,Ij.PerInstanceColorAppearance=uf,Ij.PerformanceDisplay=vf,Ij.PerspectiveFrustum=wf,Ij.PerspectiveOffCenterFrustum=xf,Ij.Polygon=yf,Ij.Polyline=zf,Ij.PolylineCollection=Af,Ij.PolylineColorAppearance=Bf,Ij.PolylineMaterialAppearance=Cf,Ij.Primitive=Df,Ij.PrimitiveCollection=Ef,Ij.PrimitivePipeline=Ff,Ij.PrimitiveState=Gf,Ij.QuadtreeOccluders=Hf,Ij.QuadtreePrimitive=If,Ij.QuadtreeTile=Jf,Ij.QuadtreeTileLoadState=Kf,Ij.QuadtreeTileProvider=Lf,Ij.RectanglePrimitive=Mf,Ij.Scene=Nf,Ij.SceneMode=Of,Ij.SceneTransforms=Pf,Ij.SceneTransitioner=Qf,Ij.ScreenSpaceCameraController=Rf,Ij.SingleTileImageryProvider=Sf,Ij.SkyAtmosphere=Tf,Ij.SkyBox=Uf,Ij.StencilFunction=Vf,Ij.StencilOperation=Wf,Ij.Sun=Xf,Ij.SunPostProcess=Yf,Ij.TerrainState=Zf,Ij.TextureAtlas=$f,Ij.TileCoordinatesImageryProvider=_f,Ij.TileDiscardPolicy=ag,Ij.TileImagery=bg,Ij.TileMapServiceImageryProvider=cg,Ij.TileReplacementQueue=dg,Ij.TileState=eg,Ij.TileTerrain=fg,Ij.TweenCollection=gg,Ij.VerticalOrigin=hg,Ij.ViewportQuad=ig,Ij.WebMapServiceImageryProvider=jg,Ij.WebMapTileServiceImageryProvider=kg,Ij.createTangentSpaceDebugPrimitive=lg,Ij.getModelAccessor=mg,Ij.terrainAttributeLocations=ng,Ij._shaders.AdjustTranslucentFS=og,Ij._shaders.AllMaterialAppearanceFS=pg,Ij._shaders.AllMaterialAppearanceVS=qg,Ij._shaders.BasicMaterialAppearanceFS=rg,Ij._shaders.BasicMaterialAppearanceVS=sg,Ij._shaders.EllipsoidSurfaceAppearanceFS=tg,Ij._shaders.EllipsoidSurfaceAppearanceVS=ug,Ij._shaders.PerInstanceColorAppearanceFS=vg,Ij._shaders.PerInstanceColorAppearanceVS=wg,Ij._shaders.PerInstanceFlatColorAppearanceFS=xg,Ij._shaders.PerInstanceFlatColorAppearanceVS=yg,Ij._shaders.PolylineColorAppearanceVS=zg,Ij._shaders.PolylineMaterialAppearanceVS=Ag,Ij._shaders.TexturedMaterialAppearanceFS=Bg,Ij._shaders.TexturedMaterialAppearanceVS=Cg,Ij._shaders.BillboardCollectionFS=Dg,Ij._shaders.BillboardCollectionVS=Eg,Ij._shaders.degreesPerRadian=Fg,Ij._shaders.depthRange=Gg,Ij._shaders.epsilon1=Hg,Ij._shaders.epsilon2=Ig,Ij._shaders.epsilon3=Jg,Ij._shaders.epsilon4=Kg,Ij._shaders.epsilon5=Lg,Ij._shaders.epsilon6=Mg,Ij._shaders.epsilon7=Ng,Ij._shaders.infinity=Og,Ij._shaders.oneOverPi=Pg,Ij._shaders.oneOverTwoPi=Qg,Ij._shaders.pi=Rg,Ij._shaders.piOverFour=Sg,Ij._shaders.piOverSix=Tg,Ij._shaders.piOverThree=Ug,Ij._shaders.piOverTwo=Vg,Ij._shaders.radiansPerDegree=Wg,Ij._shaders.sceneMode2D=Xg,Ij._shaders.sceneMode3D=Yg,Ij._shaders.sceneModeColumbusView=Zg,Ij._shaders.sceneModeMorphing=$g,Ij._shaders.solarRadius=_g,Ij._shaders.threePiOver2=ah,Ij._shaders.twoPi=bh,Ij._shaders.webMercatorMaxLatitude=ch,Ij._shaders.CzmBuiltins=dh,Ij._shaders.RGBToXYZ=eh,Ij._shaders.XYZToRGB=fh,Ij._shaders.alphaWeight=gh,Ij._shaders.antialias=hh,Ij._shaders.columbusViewMorph=ih,Ij._shaders.computePosition=jh,Ij._shaders.cosineAndSine=kh,Ij._shaders.decompressTextureCoordinates=lh,Ij._shaders.eastNorthUpToEyeCoordinates=mh,Ij._shaders.ellipsoidContainsPoint=nh,Ij._shaders.ellipsoidNew=oh,Ij._shaders.ellipsoidWgs84TextureCoordinates=ph,Ij._shaders.equalsEpsilon=qh,Ij._shaders.eyeOffset=rh,Ij._shaders.eyeToWindowCoordinates=sh,Ij._shaders.geodeticSurfaceNormal=th,Ij._shaders.getDefaultMaterial=uh,Ij._shaders.getLambertDiffuse=vh,Ij._shaders.getSpecular=wh,Ij._shaders.getWaterNoise=xh,Ij._shaders.getWgs84EllipsoidEC=yh,Ij._shaders.hue=zh,Ij._shaders.isEmpty=Ah,Ij._shaders.isFull=Bh,Ij._shaders.latitudeToWebMercatorFraction=Ch,Ij._shaders.luminance=Dh,Ij._shaders.modelToWindowCoordinates=Eh,Ij._shaders.multiplyWithColorBalance=Fh,Ij._shaders.octDecode=Gh,Ij._shaders.phong=Hh,Ij._shaders.pointAlongRay=Ih,Ij._shaders.rayEllipsoidIntersectionInterval=Jh,Ij._shaders.saturation=Kh,Ij._shaders.signNotZero=Lh,Ij._shaders.tangentToEyeSpaceMatrix=Mh,Ij._shaders.translateRelativeToEye=Nh,Ij._shaders.translucentPhong=Oh,Ij._shaders.transpose=Ph,Ij._shaders.windowToEyeCoordinates=Qh,Ij._shaders.depthRangeStruct=Rh,Ij._shaders.ellipsoid=Sh,Ij._shaders.material=Th,Ij._shaders.materialInput=Uh,Ij._shaders.ray=Vh,Ij._shaders.raySegment=Wh,Ij._shaders.CompositeOITFS=Xh,Ij._shaders.EllipsoidFS=Yh,Ij._shaders.EllipsoidVS=Zh,Ij._shaders.GlobeFS=$h,Ij._shaders.GlobeFSDepth=_h,Ij._shaders.GlobeFSPole=ai,Ij._shaders.GlobeVS=bi,Ij._shaders.GlobeVSDepth=ci,Ij._shaders.GlobeVSPole=di,Ij._shaders.BumpMapMaterial=ei,Ij._shaders.CheckerboardMaterial=fi,Ij._shaders.DotMaterial=gi,Ij._shaders.FadeMaterial=hi,Ij._shaders.GridMaterial=ii,
Ij._shaders.NormalMapMaterial=ji,Ij._shaders.PolylineArrowMaterial=ki,Ij._shaders.PolylineGlowMaterial=li,Ij._shaders.PolylineOutlineMaterial=mi,Ij._shaders.RimLightingMaterial=ni,Ij._shaders.StripeMaterial=oi,Ij._shaders.Water=pi,Ij._shaders.PolylineCommon=qi,Ij._shaders.PolylineFS=ri,Ij._shaders.PolylineVS=si,Ij._shaders.AdditiveBlend=ti,Ij._shaders.BrightPass=ui,Ij._shaders.FXAA=vi,Ij._shaders.GaussianBlur1D=wi,Ij._shaders.PassThrough=xi,Ij._shaders.ReprojectWebMercatorFS=yi,Ij._shaders.ReprojectWebMercatorVS=zi,Ij._shaders.SkyAtmosphereFS=Ai,Ij._shaders.SkyAtmosphereVS=Bi,Ij._shaders.SkyBoxFS=Ci,Ij._shaders.SkyBoxVS=Di,Ij._shaders.SunFS=Ei,Ij._shaders.SunTextureFS=Fi,Ij._shaders.SunVS=Gi,Ij._shaders.ViewportQuadFS=Hi,Ij._shaders.ViewportQuadVS=Ii,Ij.Tween=Ji,Ij.Uri=Ki,Ij.gltfDefaults=Li,Ij["knockout-3.2.0"]=Mi,Ij["knockout-es5"]=Ni,Ij.knockout=Oi,Ij.measureText=Pi,Ij["mersenne-twister"]=Qi,Ij.sprintf=Ri,Ij.topojson=Si,Ij.when=Ti,Ij.Animation=Ui,Ij.AnimationViewModel=Vi,Ij.BaseLayerPicker=Wi,Ij.BaseLayerPickerViewModel=Xi,Ij.ProviderViewModel=Yi,Ij.createDefaultImageryProviderViewModels=Zi,Ij.createDefaultTerrainProviderViewModels=$i,Ij.CesiumInspector=_i,Ij.CesiumInspectorViewModel=aj,Ij.CesiumWidget=bj,Ij.ClockViewModel=cj,Ij.Command=dj,Ij.FullscreenButton=ej,Ij.FullscreenButtonViewModel=fj,Ij.Geocoder=gj,Ij.GeocoderViewModel=hj,Ij.HomeButton=ij,Ij.HomeButtonViewModel=jj,Ij.InfoBox=kj,Ij.InfoBoxViewModel=lj,Ij.NavigationHelpButton=mj,Ij.NavigationHelpButtonViewModel=nj,Ij.PerformanceWatchdog=oj,Ij.PerformanceWatchdogViewModel=pj,Ij.SceneModePicker=qj,Ij.SceneModePickerViewModel=rj,Ij.SelectionIndicator=sj,Ij.SelectionIndicatorViewModel=tj,Ij.SvgPathBindingHandler=uj,Ij.Timeline=vj,Ij.TimelineHighlightRange=wj,Ij.TimelineTrack=xj,Ij.ToggleButtonViewModel=yj,Ij.Viewer=zj,Ij.viewerCesiumInspectorMixin=Aj,Ij.viewerDragDropMixin=Bj,Ij.viewerEntityMixin=Cj,Ij.viewerPerformanceWatchdogMixin=Dj,Ij.createCommand=Ej,Ij.getElement=Fj,Ij.subscribeAndEvaluate=Gj,Ij.createTaskProcessorWorker=Hj,Ij}),b(["Cesium"],function(a){"use strict";var b="undefined"!=typeof window?window:"undefined"!=typeof self?self:{};b.Cesium=a},void 0,!0)}();(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}})(function(a){a.ui=a.ui||{};a.extend(a.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({scrollParent:function(b){var c=this.css("position"),d=c==="absolute",e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);if(d&&b.css("position")==="static"){return false}return e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return c==="fixed"||!f.length?a(this[0].ownerDocument||document):f},uniqueId:function(){var a=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+ ++a}})}}(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){a(this).removeAttr("id")}})}});function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();if("area"===h){e=b.parentNode;f=e.name;if(!b.href||!f||e.nodeName.toLowerCase()!=="map"){return false}g=a("img[usemap='#"+f+"']")[0];return!!g&&c(g)}return(/^(input|select|textarea|button|object)$/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return a.css(this,"visibility")==="hidden"}).length}a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}});if(!a("<a>").outerWidth(1).jquery){a.each(["Width","Height"],function(b,c){var d=c==="Width"?["Left","Right"]:["Top","Bottom"],e=c.toLowerCase(),f={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function g(b,c,e,f){a.each(d,function(){c-=parseFloat(a.css(b,"padding"+this))||0;if(e){c-=parseFloat(a.css(b,"border"+this+"Width"))||0}if(f){c-=parseFloat(a.css(b,"margin"+this))||0}});return c}a.fn["inner"+c]=function(b){if(b===undefined){return f["inner"+c].call(this)}return this.each(function(){a(this).css(e,g(this,b)+"px")})};a.fn["outer"+c]=function(b,d){if(typeof b!=="number"){return f["outer"+c].call(this,b)}return this.each(function(){a(this).css(e,g(this,b,true,d)+"px")})}})}if(!a.fn.addBack){a.fn.addBack=function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}if(a("<a>").data("a-b","a").removeData("a-b").data("a-b")){a.fn.removeData=function(b){return function(c){if(arguments.length){return b.call(this,a.camelCase(c))}else{return b.call(this)}}}(a.fn.removeData)}a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());a.fn.extend({focus:function(b){return function(c,d){return typeof c==="number"?this.each(function(){var b=this;setTimeout(function(){a(b).focus();if(d){d.call(b)}},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(b!==undefined){return this.css("zIndex",b)}if(this.length){var c=a(this[0]),d,e;while(c.length&&c[0]!==document){d=c.css("position");if(d==="absolute"||d==="relative"||d==="fixed"){e=parseInt(c.css("zIndex"),10);if(!isNaN(e)&&e!==0){return e}}c=c.parent()}}return 0}});a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d){f.plugins[e]=f.plugins[e]||[];f.plugins[e].push([c,d[e]])}},call:function(a,b,c,d){var e,f=a.plugins[b];if(!f){return}if(!d&&(!a.element[0].parentNode||a.element[0].parentNode.nodeType===11)){return}for(e=0;e<f.length;e++){if(a.options[f[e][0]]){f[e][1].apply(a.element,c)}}}};var d=0,e=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;(e=c[f])!=null;f++){try{d=a._data(e,"events");if(d&&d.remove){a(e).triggerHandler("remove")}}catch(a){}}b(c)}}(a.cleanData);a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1];e=j+"-"+b;if(!d){d=c;c=a.Widget}a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)};a[j]=a[j]||{};f=a[j][b];g=a[j][b]=function(a,b){if(!this._createWidget){return new g(a,b)}if(arguments.length){this._createWidget(a,b)}};a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]});h=new c;h.options=a.widget.extend({},h.options);a.each(d,function(b,d){if(!a.isFunction(d)){i[b]=d;return}i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b=this._super,c=this._superApply,f;this._super=a;this._superApply=e;f=d.apply(this,arguments);this._super=b;this._superApply=c;return f}}()});g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e});if(f){a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)});delete f._childConstructors}else{c._childConstructors.push(g)}a.widget.bridge(b,g);return g};a.widget.extend=function(b){var c=e.call(arguments,1),d=0,f=c.length,g,h;for(;d<f;d++){for(g in c[d]){h=c[d][g];if(c[d].hasOwnProperty(g)&&h!==undefined){if(a.isPlainObject(h)){b[g]=a.isPlainObject(b[g])?a.widget.extend({},b[g],h):a.widget.extend({},h)}else{b[g]=h}}}}return b};a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(f){var g=typeof f==="string",h=e.call(arguments,1),i=this;if(g){this.each(function(){var c,e=a.data(this,d);if(f==="instance"){i=e;return false}if(!e){return a.error("cannot call methods on "+b+" prior to initialization; "+"attempted to call method '"+f+"'")}if(!a.isFunction(e[f])||f.charAt(0)==="_"){return a.error("no such method '"+f+"' for "+b+" widget instance")}c=e[f].apply(e,h);if(c!==e&&c!==undefined){i=c&&c.jquery?i.pushStack(c.get()):c;return false}})}else{if(h.length){f=a.widget.extend.apply(null,[f].concat(h))}this.each(function(){var b=a.data(this,d);if(b){b.option(f||{});if(b._init){b._init()}}else{a.data(this,d,new c(f,this))}})}return i}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0];this.element=a(c);this.uuid=d++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=a();this.hoverable=a();this.focusable=a();if(c!==this){a.data(c,this.widgetFullName,this);this._on(true,this.element,{remove:function(a){if(a.target===c){this.destroy()}}});this.document=a(c.style?c.ownerDocument:c.document||c);this.window=a(this.document[0].defaultView||this.document[0].parentWindow)}this.options=a.widget.extend({},this.options,this._getCreateOptions(),b);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d=b,e,f,g;if(arguments.length===0){return a.widget.extend({},this.options)}if(typeof b==="string"){d={};e=b.split(".");b=e.shift();if(e.length){f=d[b]=a.widget.extend({},this.options[b]);for(g=0;g<e.length-1;g++){f[e[g]]=f[e[g]]||{};f=f[e[g]]}b=e.pop();if(arguments.length===1){return f[b]===undefined?null:f[b]}f[b]=c}else{if(arguments.length===1){return this.options[b]===undefined?null:this.options[b]}d[b]=c}}this._setOptions(d);return this},_setOptions:function(a){var b;for(b in a){this._setOption(b,a[b])}return this},_setOption:function(a,b){this.options[a]=b;if(a==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!b);if(b){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}}return this},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_on:function(b,c,d){var e,f=this;if(typeof b!=="boolean"){d=c;c=b;b=false}if(!d){d=c;c=this.element;e=this.widget()}else{c=e=a(c);this.bindings=this.bindings.add(c)}a.each(d,function(d,g){function h(){if(!b&&(f.options.disabled===true||a(this).hasClass("ui-state-disabled"))){return}return(typeof g==="string"?f[g]:g).apply(f,arguments)}if(typeof g!=="string"){h.guid=g.guid=g.guid||h.guid||a.guid++}var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];if(k){e.delegate(k,j,h)}else{c.bind(j,h)}})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;b.unbind(c).undelegate(c);this.bindings=a(this.bindings.not(b).get());this.focusable=a(this.focusable.not(b).get());this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return(typeof a==="string"?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{};c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];f=c.originalEvent;if(f){for(e in f){if(!(e in c)){c[e]=f[e]}}}this.element.trigger(c,d);return!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===false||c.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){if(typeof e==="string"){e={effect:e}}var g,h=!e?b:e===true||typeof e==="number"?c:e.effect||c;e=e||{};if(typeof e==="number"){e={duration:e}}g=!a.isEmptyObject(e);e.complete=f;if(e.delay){d.delay(e.delay)}if(g&&a.effects&&a.effects.effect[h]){d[b](e)}else if(h!==b&&d[h]){d[h](e.duration,e.easing,f)}else{d.queue(function(c){a(this)[b]();if(f){f.call(d[0])}c()})}}});var f=a.widget;var g=false;a(document).mouseup(function(){g=false});var h=a.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(true===a.data(c.target,b.widgetName+".preventClickEvent")){a.removeData(c.target,b.widgetName+".preventClickEvent");c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(b){if(g){return}this._mouseMoved=false;this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var c=this,d=b.which===1,e=typeof this.options.cancel==="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:false;if(!d||e||!this._mouseCapture(b)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==false;if(!this._mouseStarted){b.preventDefault();return true}}if(true===a.data(b.target,this.widgetName+".preventClickEvent")){a.removeData(b.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);b.preventDefault();g=true;return true},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button){return this._mouseUp(b)}else if(!b.which){return this._mouseUp(b)}}if(b.which||b.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==false;this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)}return!this._mouseStarted},_mouseUp:function(b){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(b.target===this._mouseDownEvent.target){a.data(b.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(b)}g=false;return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}});(function(){a.ui=a.ui||{};var b,c,d=Math.max,e=Math.abs,f=Math.round,g=/left|center|right/,h=/top|center|bottom/,i=/[\+\-]\d+(\.[\d]+)?%?/,j=/^\w+/,k=/%$/,l=a.fn.position;function m(a,b,c){return[parseFloat(a[0])*(k.test(a[0])?b/100:1),parseFloat(a[1])*(k.test(a[1])?c/100:1)]}function n(b,c){return parseInt(a.css(b,c),10)||0}function o(b){var c=b[0];if(c.nodeType===9){return{width:b.width(),height:b.height(),offset:{top:0,left:0}}}if(a.isWindow(c)){return{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}}if(c.preventDefault){return{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}}return{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.position={scrollbarWidth:function(){if(b!==undefined){return b}var c,d,e=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=e.children()[0];a("body").append(e);c=f.offsetWidth;e.css("overflow","scroll");d=f.offsetWidth;if(c===d){d=e[0].clientWidth}e.remove();return b=c-d},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e=c==="scroll"||c==="auto"&&b.width<b.element[0].scrollWidth,f=d==="scroll"||d==="auto"&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&c[0].nodeType===9;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d||e?c.width():c.outerWidth(),height:d||e?c.height():c.outerHeight()}}};a.fn.position=function(b){if(!b||!b.of){return l.apply(this,arguments)}b=a.extend({},b);var k,p,q,r,s,t,u=a(b.of),v=a.position.getWithinInfo(b.within),w=a.position.getScrollInfo(v),x=(b.collision||"flip").split(" "),y={};t=o(u);if(u[0].preventDefault){b.at="left top"}p=t.width;q=t.height;r=t.offset;s=a.extend({},r);a.each(["my","at"],function(){var a=(b[this]||"").split(" "),c,d;if(a.length===1){a=g.test(a[0])?a.concat(["center"]):h.test(a[0])?["center"].concat(a):["center","center"]}a[0]=g.test(a[0])?a[0]:"center";a[1]=h.test(a[1])?a[1]:"center";c=i.exec(a[0]);d=i.exec(a[1]);y[this]=[c?c[0]:0,d?d[0]:0];b[this]=[j.exec(a[0])[0],j.exec(a[1])[0]]});if(x.length===1){x[1]=x[0]}if(b.at[0]==="right"){s.left+=p}else if(b.at[0]==="center"){s.left+=p/2}if(b.at[1]==="bottom"){s.top+=q}else if(b.at[1]==="center"){s.top+=q/2}k=m(y.at,p,q);s.left+=k[0];s.top+=k[1];return this.each(function(){var g,h,i=a(this),j=i.outerWidth(),l=i.outerHeight(),o=n(this,"marginLeft"),t=n(this,"marginTop"),z=j+o+n(this,"marginRight")+w.width,A=l+t+n(this,"marginBottom")+w.height,B=a.extend({},s),C=m(y.my,i.outerWidth(),i.outerHeight());if(b.my[0]==="right"){B.left-=j}else if(b.my[0]==="center"){B.left-=j/2}if(b.my[1]==="bottom"){B.top-=l}else if(b.my[1]==="center"){B.top-=l/2}B.left+=C[0];B.top+=C[1];if(!c){B.left=f(B.left);B.top=f(B.top)}g={marginLeft:o,marginTop:t};a.each(["left","top"],function(c,d){if(a.ui.position[x[c]]){a.ui.position[x[c]][d](B,{targetWidth:p,targetHeight:q,elemWidth:j,elemHeight:l,collisionPosition:g,collisionWidth:z,collisionHeight:A,offset:[k[0]+C[0],k[1]+C[1]],my:b.my,at:b.at,within:v,elem:i})}});if(b.using){h=function(a){var c=r.left-B.left,f=c+p-j,g=r.top-B.top,h=g+q-l,k={target:{element:u,left:r.left,top:r.top,width:p,height:q},element:{element:i,left:B.left,top:B.top,width:j,height:l},horizontal:f<0?"left":c>0?"right":"center",vertical:h<0?"top":g>0?"bottom":"middle"};if(p<j&&e(c+f)<p){k.horizontal="center"}if(q<l&&e(g+h)<q){k.vertical="middle"}if(d(e(c),e(f))>d(e(g),e(h))){k.important="horizontal"}else{k.important="vertical"}b.using.call(this,a,k)}}i.offset(a.extend(B,{using:h}))})};a.ui.position={fit:{left:function(a,b){var c=b.within,e=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,h=e-g,i=g+b.collisionWidth-f-e,j;if(b.collisionWidth>f){if(h>0&&i<=0){j=a.left+h+b.collisionWidth-f-e;a.left+=h-j}else if(i>0&&h<=0){a.left=e}else{if(h>i){a.left=e+f-b.collisionWidth}else{a.left=e}}}else if(h>0){a.left+=h}else if(i>0){a.left-=i}else{a.left=d(a.left-g,a.left)}},top:function(a,b){var c=b.within,e=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,h=e-g,i=g+b.collisionHeight-f-e,j;if(b.collisionHeight>f){if(h>0&&i<=0){j=a.top+h+b.collisionHeight-f-e;a.top+=h-j}else if(i>0&&h<=0){a.top=e}else{if(h>i){a.top=e+f-b.collisionHeight}else{a.top=e}}}else if(h>0){a.top+=h}else if(i>0){a.top-=i}else{a.top=d(a.top-g,a.top)}}},flip:{left:function(a,b){var c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft,i=h-g,j=h+b.collisionWidth-f-g,k=b.my[0]==="left"?-b.elemWidth:b.my[0]==="right"?b.elemWidth:0,l=b.at[0]==="left"?b.targetWidth:b.at[0]==="right"?-b.targetWidth:0,m=-2*b.offset[0],n,o;if(i<0){n=a.left+k+l+m+b.collisionWidth-f-d;if(n<0||n<e(i)){a.left+=k+l+m}}else if(j>0){o=a.left-b.collisionPosition.marginLeft+k+l+m-g;if(o>0||e(o)<j){a.left+=k+l+m}}},top:function(a,b){var c=b.within,d=c.offset.top+c.scrollTop,f=c.height,g=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop,i=h-g,j=h+b.collisionHeight-f-g,k=b.my[1]==="top",l=k?-b.elemHeight:b.my[1]==="bottom"?b.elemHeight:0,m=b.at[1]==="top"?b.targetHeight:b.at[1]==="bottom"?-b.targetHeight:0,n=-2*b.offset[1],o,p;if(i<0){p=a.top+l+m+n+b.collisionHeight-f-d;if(p<0||p<e(i)){a.top+=l+m+n}}else if(j>0){o=a.top-b.collisionPosition.marginTop+l+m+n-g;if(o>0||e(o)<j){a.top+=l+m+n}}}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}};(function(){var b,d,e,f,g,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body");e={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(h){a.extend(e,{position:"absolute",left:"-1000px",top:"-1000px"})}for(g in e){b.style[g]=e[g]}b.appendChild(i);d=h||document.documentElement;d.insertBefore(b,d.firstChild);i.style.cssText="position: absolute; left: 10.7432222px;";f=a(i).offset().left;c=f>10&&f<11;b.innerHTML="";d.removeChild(b)})()})();var i=a.ui.position;var j=a.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:false,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=a();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");if(!b.collapsible&&(b.active===false||b.active==null)){b.active=0}this._processPanels();if(b.active<0){b.active+=this.headers.length}this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?a():this.active.next()}},_createIcons:function(){var b=this.options.icons;if(b){a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers);this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader);this.headers.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default "+"ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId();this._destroyIcons();a=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom "+"ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId();if(this.options.heightStyle!=="content"){a.css("height","")}},_setOption:function(a,b){if(a==="active"){this._activate(b);return}if(a==="event"){if(this.options.event){this._off(this.headers,this.options.event)}this._setupEvents(b)}this._super(a,b);if(a==="collapsible"&&!b&&this.options.active===false){this._activate(0)}if(a==="icons"){this._destroyIcons();if(b){this._createIcons()}}if(a==="disabled"){this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b);this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b)}},_keydown:function(b){if(b.altKey||b.ctrlKey){return}var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=false;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1];break}if(f){a(b.target).attr("tabIndex",-1);a(f).attr("tabIndex",0);f.focus();b.preventDefault()}},_panelKeyDown:function(b){if(b.keyCode===a.ui.keyCode.UP&&b.ctrlKey){a(b.currentTarget).prev().focus()}},refresh:function(){var b=this.options;this._processPanels();if(b.active===false&&b.collapsible===true||!this.headers.length){b.active=false;this.active=a()}else if(b.active===false){this._activate(0)}else if(this.active.length&&!a.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".ui-state-disabled").length){b.active=false;this.active=a()}else{this._activate(Math.max(0,b.active-1))}}else{b.active=this.headers.index(this.active)}this._destroyIcons();this._refresh()},_processPanels:function(){var a=this.headers,b=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all");this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();if(b){this._off(a.not(this.headers));this._off(b.not(this.panels))}},_refresh:function(){var b,c=this.options,d=c.heightStyle,e=this.element.parent();this.active=this._findActive(c.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(){var b=a(this),c=b.uniqueId().attr("id"),d=b.next(),e=d.uniqueId().attr("id");b.attr("aria-controls",e);d.attr("aria-labelledby",c)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"})}this._createIcons();this._setupEvents(c.event);if(d==="fill"){b=e.height();this.element.siblings(":visible").each(function(){var c=a(this),d=c.css("position");if(d==="absolute"||d==="fixed"){return}b-=c.outerHeight(true)});this.headers.each(function(){b-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else if(d==="auto"){b=0;this.headers.next().each(function(){b=Math.max(b,a(this).css("height","").height())}).height(b)}},_activate:function(b){var c=this._findActive(b)[0];if(c===this.active[0]){return}c=c||this.active[0];this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop})},_findActive:function(b){return typeof b==="number"?this.headers.eq(b):a()},_setupEvents:function(b){var c={keydown:"_keydown"};if(b){a.each(b.split(" "),function(a,b){c[b]="_eventHandler"})}this._off(this.headers.add(this.headers.next()));this._on(this.headers,c);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e[0]===d[0],g=f&&c.collapsible,h=g?a():e.next(),i=d.next(),j={oldHeader:d,oldPanel:i,newHeader:g?a():e,newPanel:h};b.preventDefault();if(f&&!c.collapsible||this._trigger("beforeActivate",b,j)===false){return}c.active=g?false:this.headers.index(e);this.active=f?a():e;this._toggle(j);d.removeClass("ui-accordion-header-active ui-state-active");if(c.icons){d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header)}if(!f){e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top");if(c.icons){e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader)}e.next().addClass("ui-accordion-content-active")}},_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=c;this.prevHide=d;if(this.options.animate){this._animate(c,d,b)}else{d.hide();c.show();this._toggleComplete(b)}d.attr({"aria-hidden":"true"});d.prev().attr({"aria-selected":"false","aria-expanded":"false"});if(c.length&&d.length){d.prev().attr({tabIndex:-1,"aria-expanded":"false"})}else if(c.length){this.headers.filter(function(){return parseInt(a(this).attr("tabIndex"),10)===0}).attr("tabIndex",-1)}c.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(a,b,c){var d,e,f,g=this,h=0,i=a.css("box-sizing"),j=a.length&&(!b.length||a.index()<b.index()),k=this.options.animate||{},l=j&&k.down||k,m=function(){g._toggleComplete(c)};if(typeof l==="number"){f=l}if(typeof l==="string"){e=l}e=e||l.easing||k.easing;f=f||l.duration||k.duration;if(!b.length){return a.animate(this.showProps,f,e,m)}if(!a.length){return b.animate(this.hideProps,f,e,m)}d=a.show().outerHeight();b.animate(this.hideProps,{duration:f,easing:e,step:function(a,b){b.now=Math.round(a)}});a.hide().animate(this.showProps,{duration:f,easing:e,complete:m,step:function(a,c){c.now=Math.round(a);if(c.prop!=="height"){if(i==="content-box"){h+=c.now}}else if(g.options.heightStyle!=="content"){c.now=Math.round(d-b.outerHeight()-h);h=0}}})},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");if(b.length){b.parent()[0].className=b.parent()[0].className}this._trigger("activate",null,a)}});var k=a.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0});if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true")}this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},"click .ui-menu-item":function(b){var c=a(b.target);if(!this.mouseHandled&&c.not(".ui-state-disabled").length){this.select(b);if(!b.isPropagationStopped()){this.mouseHandled=true}if(c.has(".ui-menu").length){this.expand(b)}else if(!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".ui-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer)}}}},"mouseenter .ui-menu-item":function(b){if(this.previousFilter){return}var c=a(b.currentTarget);c.siblings(".ui-state-active").removeClass("ui-state-active");this.focus(b,c)},
mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.find(this.options.items).eq(0);if(!b){this.focus(a,c)}},blur:function(b){this._delay(function(){if(!a.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(b)}})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(a){if(this._closeOnDocumentClick(a)){this.collapseAll(a)}this.mouseHandled=false}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);if(b.data("ui-menu-submenu-carat")){b.remove()}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){var c,d,e,f,g=true;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(b)}break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:g=false;d=this.previousFilter||"";e=String.fromCharCode(b.keyCode);f=false;clearTimeout(this.filterTimer);if(e===d){f=true}else{e=d+e}c=this._filterMenuItems(e);c=f&&c.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):c;if(!c.length){e=String.fromCharCode(b.keyCode);c=this._filterMenuItems(e)}if(c.length){this.focus(b,c);this.previousFilter=e;this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)}else{delete this.previousFilter}}if(g){b.preventDefault()}},_activate:function(a){if(!this.active.is(".ui-state-disabled")){if(this.active.is("[aria-haspopup='true']")){this.expand(a)}else{this.select(a)}}},refresh:function(){var b,c,d=this,e=this.options.icons.submenu,f=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);f.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),c=b.parent(),d=a("<span>").addClass("ui-menu-icon ui-icon "+e).data("ui-menu-submenu-carat",true);c.attr("aria-haspopup","true").prepend(d);b.attr("aria-labelledby",c.attr("id"))});b=f.add(this.element);c=b.find(this.options.items);c.not(".ui-menu-item").each(function(){var b=a(this);if(d._isDivider(b)){b.addClass("ui-widget-content ui-menu-divider")}});c.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});c.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!a.contains(this.element[0],this.active[0])){this.blur()}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){if(a==="icons"){this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu)}if(a==="disabled"){this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b)}this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&a.type==="focus");this._scrollIntoView(b);this.active=b.first();d=this.active.addClass("ui-state-focus").removeClass("ui-state-active");if(this.options.role){this.element.attr("aria-activedescendant",d.attr("id"))}this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");if(a&&a.type==="keydown"){this._close()}else{this.timer=this._delay(function(){this._close()},this.delay)}c=b.children(".ui-menu");if(c.length&&a&&/^mouse/.test(a.type)){this._startOpening(c)}this.activeMenu=b.parent();this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;if(this._hasScroll()){c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0;d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0;e=b.offset().top-this.activeMenu.offset().top-c-d;f=this.activeMenu.scrollTop();g=this.activeMenu.height();h=b.outerHeight();if(e<0){this.activeMenu.scrollTop(f+e)}else if(e+h>g){this.activeMenu.scrollTop(f+e-g+h)}}},blur:function(a,b){if(!b){clearTimeout(this.timer)}if(!this.active){return}this.active.removeClass("ui-state-focus");this.active=null;this._trigger("blur",a,{item:this.active})},_startOpening:function(a){clearTimeout(this.timer);if(a.attr("aria-hidden")!=="true"){return}this.timer=this._delay(function(){this._close();this._open(a)},this.delay)},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer);this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));if(!d.length){d=this.element}this._close(d);this.blur(b);this.activeMenu=d},this.delay)},_close:function(a){if(!a){a=this.active?this.active.parent():this.element}a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(b){return!a(b.target).closest(".ui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(b&&b.length){this._close();this.focus(a,b)}},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();if(b&&b.length){this._open(b.parent());this._delay(function(){this.focus(a,b)})}},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;if(this.active){if(a==="first"||a==="last"){d=this.active[a==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1)}else{d=this.active[a+"All"](".ui-menu-item").eq(0)}}if(!d||!d.length||!this.active){d=this.activeMenu.find(this.options.items)[b]()}this.focus(c,d)},nextPage:function(b){var c,d,e;if(!this.active){this.next(b);return}if(this.isLastItem()){return}if(this._hasScroll()){d=this.active.offset().top;e=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){c=a(this);return c.offset().top-d-e<0});this.focus(b,c)}else{this.focus(b,this.activeMenu.find(this.options.items)[!this.active?"first":"last"]())}},previousPage:function(b){var c,d,e;if(!this.active){this.next(b);return}if(this.isFirstItem()){return}if(this._hasScroll()){d=this.active.offset().top;e=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){c=a(this);return c.offset().top-d+e>0});this.focus(b,c)}else{this.focus(b,this.activeMenu.find(this.options.items).first())}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(b,true)}this._trigger("select",b,c)},_filterMenuItems:function(b){var c=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),d=new RegExp("^"+c,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return d.test(a.trim(a(this).text()))})}});a.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f=e==="textarea",g=e==="input";this.isMultiLine=f?true:g?false:this.element.prop("isContentEditable");this.valueMethod=this.element[f||g?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly")){b=true;d=true;c=true;return}b=false;d=false;c=false;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=true;this._move("previousPage",e);break;case f.PAGE_DOWN:b=true;this._move("nextPage",e);break;case f.UP:b=true;this._keyEvent("previous",e);break;case f.DOWN:b=true;this._keyEvent("next",e);break;case f.ENTER:if(this.menu.active){b=true;e.preventDefault();this.menu.select(e)}break;case f.TAB:if(this.menu.active){this.menu.select(e)}break;case f.ESCAPE:if(this.menu.element.is(":visible")){if(!this.isMultiLine){this._value(this.term)}this.close(e);e.preventDefault()}break;default:c=true;this._searchTimeout(e);break}},keypress:function(d){if(b){b=false;if(!this.isMultiLine||this.menu.element.is(":visible")){d.preventDefault()}return}if(c){return}var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d);break}},input:function(a){if(d){d=false;a.preventDefault();return}this._searchTimeout(a)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(a);this._change(a)}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._on(this.menu.element,{mousedown:function(b){b.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];if(!a(b.target).closest(".ui-menu-item").length){this._delay(function(){var b=this;this.document.one("mousedown",function(d){if(d.target!==b.element[0]&&d.target!==c&&!a.contains(c,d.target)){b.close()}})})}},menufocus:function(b,c){var d,e;if(this.isNewMenu){this.isNewMenu=false;if(b.originalEvent&&/^mouse/.test(b.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});return}}e=c.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",b,{item:e})){if(b.originalEvent&&/^key/.test(b.originalEvent.type)){this._value(e.value)}}d=c.item.attr("aria-label")||e.value;if(d&&a.trim(d).length){this.liveRegion.children().hide();a("<div>").text(d).appendTo(this.liveRegion)}},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=d;this._delay(function(){this.previous=d;this.selectedItem=c})}if(false!==this._trigger("select",a,{item:c})){this._value(c.value)}this.term=this._value();this.close(a);this.selectedItem=c}});this.liveRegion=a("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b);if(a==="source"){this._initSource()}if(a==="appendTo"){this.menu.element.appendTo(this._appendTo())}if(a==="disabled"&&b&&this.xhr){this.xhr.abort()}},_appendTo:function(){var b=this.options.appendTo;if(b){b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)}if(!b||!b[0]){b=this.element.closest(".ui-front")}if(!b.length){b=this.document[0].body}return b},_initSource:function(){var b,c,d=this;if(a.isArray(this.options.source)){b=this.options.source;this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}}else if(typeof this.options.source==="string"){c=this.options.source;this.source=function(b,e){if(d.xhr){d.xhr.abort()}d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}}else{this.source=this.options.source}},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){var b=this.term===this._value(),c=this.menu.element.is(":visible"),d=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;if(!b||b&&!c&&!d){this.selectedItem=null;this.search(null,a)}},this.options.delay)},search:function(a,b){a=a!=null?a:this._value();this.term=this._value();if(a.length<this.options.minLength){return this.close(b)}if(this._trigger("search",b)===false){return}return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){if(b===this.requestIndex){this.__response(a)}this.pending--;if(!this.pending){this.element.removeClass("ui-autocomplete-loading")}},this)},__response:function(a){if(a){a=this._normalize(a)}this._trigger("response",null,{content:a});if(!this.options.disabled&&a&&a.length&&!this.cancelSearch){this._suggest(a);this._trigger("open")}else{this._close()}},close:function(a){this.cancelSearch=true;this._close(a)},_close:function(a){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",a)}},_change:function(a){if(this.previous!==this._value()){this._trigger("change",a,{item:this.selectedItem})}},_normalize:function(b){if(b.length&&b[0].label&&b[0].value){return b}return a.map(b,function(b){if(typeof b==="string"){return{label:b,value:b}}return a.extend({},b,{label:b.label||b.value,value:b.value||b.label})})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b);this.isNewMenu=true;this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next()}},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").text(c.label).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)){if(!this.isMultiLine){this._value(this.term)}this.menu.blur();return}this.menu[a](b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(a,b);b.preventDefault()}}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var c;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}if(b&&b.length){c=this.options.messages.results(b.length)}else{c=this.options.messages.noResults}this.liveRegion.children().hide();a("<div>").text(c).appendTo(this.liveRegion)}});var l=a.ui.autocomplete;var m,n="ui-button ui-widget ui-state-default ui-corner-all",o="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",p=function(){var b=a(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},q=function(b){var c=b.name,d=b.form,e=a([]);if(c){c=c.replace(/'/g,"\\'");if(d){e=a(d).find("[name='"+c+"'][type=radio]")}else{e=a("[name='"+c+"'][type=radio]",b.ownerDocument).filter(function(){return!this.form})}}return e};a.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,p);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled")}else{this.element.prop("disabled",this.options.disabled)}this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var b=this,c=this.options,d=this.type==="checkbox"||this.type==="radio",e=!d?"ui-state-active":"";if(c.label===null){c.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()}this._hoverable(this.buttonElement);this.buttonElement.addClass(n).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(c.disabled){return}if(this===m){a(this).addClass("ui-state-active")}}).bind("mouseleave"+this.eventNamespace,function(){if(c.disabled){return}a(this).removeClass(e)}).bind("click"+this.eventNamespace,function(a){if(c.disabled){a.preventDefault();a.stopImmediatePropagation()}});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}});if(d){this.element.bind("change"+this.eventNamespace,function(){b.refresh()})}if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(c.disabled){return false}})}else if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(c.disabled){return false}a(this).addClass("ui-state-active");b.buttonElement.attr("aria-pressed","true");var d=b.element[0];q(d).not(d).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")})}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(c.disabled){return false}a(this).addClass("ui-state-active");m=this;b.document.one("mouseup",function(){m=null})}).bind("mouseup"+this.eventNamespace,function(){if(c.disabled){return false}a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){if(c.disabled){return false}if(b.keyCode===a.ui.keyCode.SPACE||b.keyCode===a.ui.keyCode.ENTER){a(this).addClass("ui-state-active")}}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(b){if(b.keyCode===a.ui.keyCode.SPACE){a(this).click()}})}}this._setOption("disabled",c.disabled);this._resetButton()},_determineButtonType:function(){var a,b,c;if(this.element.is("[type=checkbox]")){this.type="checkbox"}else if(this.element.is("[type=radio]")){this.type="radio"}else if(this.element.is("input")){this.type="input"}else{this.type="button"}if(this.type==="checkbox"||this.type==="radio"){a=this.element.parents().last();b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b);if(!this.buttonElement.length){a=a.length?a.siblings():this.element.siblings();this.buttonElement=a.filter(b);if(!this.buttonElement.length){this.buttonElement=a.find(b)}}this.element.addClass("ui-helper-hidden-accessible");c=this.element.is(":checked");if(c){this.buttonElement.addClass("ui-state-active")}this.buttonElement.prop("aria-pressed",c)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(n+" ui-state-active "+o).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title")}},_setOption:function(a,b){this._super(a,b);if(a==="disabled"){this.widget().toggleClass("ui-state-disabled",!!b);this.element.prop("disabled",!!b);if(b){if(this.type==="checkbox"||this.type==="radio"){this.buttonElement.removeClass("ui-state-focus")}else{this.buttonElement.removeClass("ui-state-focus ui-state-active")}}return}this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");if(b!==this.options.disabled){this._setOption("disabled",b)}if(this.type==="radio"){q(this.element[0]).each(function(){if(a(this).is(":checked")){a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true")}else{a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}})}else if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true")}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false")}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label)}return}var b=this.buttonElement.removeClass(o),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];if(d.primary||d.secondary){if(this.options.text){f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary"))}if(d.primary){b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>")}if(d.secondary){b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>")}if(!this.options.text){f.push(e?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){b.attr("title",a.trim(c))}}}else{f.push("ui-button-text-only")}b.addClass(f.join(" "))}});a.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){if(a==="disabled"){this.buttons.button("option",a,b)}this._super(a,b)},refresh:function(){var b=this.element.css("direction")==="rtl",c=this.element.find(this.options.items),d=c.filter(":ui-button");c.not(":ui-button").button();d.button("refresh");this.buttons=c.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});var r=a.ui.button;a.extend(a.ui,{datepicker:{version:"1.11.4"}});var s;function t(a){var b,c;while(a.length&&a[0]!==document){b=a.css("position");if(b==="absolute"||b==="relative"||b==="fixed"){c=parseInt(a.css("zIndex"),10);if(!isNaN(c)&&c!==0){return c}}a=a.parent()}return 0}function u(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};a.extend(this._defaults,this.regional[""]);this.regional.en=a.extend(true,{},this.regional[""]);this.regional["en-US"]=a.extend(true,{},this.regional.en);this.dpDiv=v(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}a.extend(u.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){x(this._defaults,a||{});return this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase();e=d==="div"||d==="span";if(!b.id){this.uuid+=1;b.id="dp"+this.uuid}f=this._newInst(a(b),e);f.settings=a.extend({},c||{});if(d==="input"){this._connectDatepicker(b,f)}else if(e){this._inlineDatepicker(b,f)}},_newInst:function(b,c){var d=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:d,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:!c?this.dpDiv:v(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]);c.trigger=a([]);if(d.hasClass(this.markerClassName)){return}this._attachments(d,c);d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(c);a.data(b,"datepicker",c);if(c.settings.disabled){this._disableDatepicker(b)}},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");if(c.append){c.append.remove()}if(g){c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>");b[h?"before":"after"](c.append)}b.unbind("focus",this._showDatepicker);if(c.trigger){c.trigger.remove()}d=this._get(c,"showOn");if(d==="focus"||d==="both"){b.focus(this._showDatepicker)}if(d==="button"||d==="both"){e=this._get(c,"buttonText");f=this._get(c,"buttonImage");c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(!f?e:a("<img/>").attr({src:f,alt:e,title:e})));b[h?"before":"after"](c.trigger);c.trigger.click(function(){if(a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]){a.datepicker._hideDatepicker()}else if(a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]){a.datepicker._hideDatepicker();a.datepicker._showDatepicker(b[0])}else{a.datepicker._showDatepicker(b[0])}return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,12-1,20),g=this._get(a,"dateFormat");if(g.match(/[DM]/)){b=function(a){c=0;d=0;for(e=0;e<a.length;e++){if(a[e].length>c){c=a[e].length;d=e}}return d};f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort")));f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())}a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);if(d.hasClass(this.markerClassName)){return}d.addClass(this.markerClassName).append(c.dpDiv);a.data(b,"datepicker",c);this._setDate(c,this._getDefaultDate(c),true);this._updateDatepicker(c);this._updateAlternate(c);if(c.settings.disabled){this._disableDatepicker(b)}c.dpDiv.css("display","block")},_dialogDatepicker:function(b,c,d,e,f){var g,h,i,j,k,l=this._dialogInst;if(!l){this.uuid+=1;g="dp"+this.uuid;this._dialogInput=a("<input type='text' id='"+g+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);a("body").append(this._dialogInput);l=this._dialogInst=this._newInst(this._dialogInput,false);l.settings={};a.data(this._dialogInput[0],"datepicker",l)}x(l.settings,e||{});c=c&&c.constructor===Date?this._formatDate(l,c):c;this._dialogInput.val(c);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos){h=document.documentElement.clientWidth;i=document.documentElement.clientHeight;j=document.documentElement.scrollLeft||document.body.scrollLeft;k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");l.settings.onSelect=d;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if(a.blockUI){a.blockUI(this.dpDiv)}a.data(this._dialogInput[0],"datepicker",l);return this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,"datepicker");if(!d.hasClass(this.markerClassName)){return}c=b.nodeName.toLowerCase();a.removeData(b,"datepicker");if(c==="input"){e.append.remove();e.trigger.remove();d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(c==="div"||c==="span"){d.removeClass(this.markerClassName).empty()}if(s===e){s=null}},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");if(!e.hasClass(this.markerClassName)){return}c=b.nodeName.toLowerCase();if(c==="input"){b.disabled=false;f.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(c==="div"||c==="span"){d=e.children("."+this._inlineClass);d.children().removeClass("ui-state-disabled");d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a})},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");if(!e.hasClass(this.markerClassName)){return}c=b.nodeName.toLowerCase();if(c==="input"){b.disabled=true;f.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(c==="div"||c==="span"){d=e.children("."+this._inlineClass);d.children().addClass("ui-state-disabled");d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a});this._disabledInputs[this._disabledInputs.length]=b},_isDisabledDatepicker:function(a){if(!a){return false}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]===a){return true}}return false},_getInst:function(b){try{return a.data(b,"datepicker")}catch(a){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(b,c,d){var e,f,g,h,i=this._getInst(b);if(arguments.length===2&&typeof c==="string"){
return c==="defaults"?a.extend({},a.datepicker._defaults):i?c==="all"?a.extend({},i.settings):this._get(i,c):null}e=c||{};if(typeof c==="string"){e={};e[c]=d}if(i){if(this._curInst===i){this._hideDatepicker()}f=this._getDateDatepicker(b,true);g=this._getMinMaxDate(i,"min");h=this._getMinMaxDate(i,"max");x(i.settings,e);if(g!==null&&e.dateFormat!==undefined&&e.minDate===undefined){i.settings.minDate=this._formatDate(i,g)}if(h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined){i.settings.maxDate=this._formatDate(i,h)}if("disabled"in e){if(e.disabled){this._disableDatepicker(b)}else{this._enableDatepicker(b)}}this._attachments(a(b),i);this._autoSize(i);this._setDate(i,f);this._updateAlternate(i);this._updateDatepicker(i)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);if(b){this._updateDatepicker(b)}},_setDateDatepicker:function(a,b){var c=this._getInst(a);if(c){this._setDate(c,b);this._updateDatepicker(c);this._updateAlternate(c)}},_getDateDatepicker:function(a,b){var c=this._getInst(a);if(c&&!c.inline){this._setDateFromField(c,b)}return c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=true,h=f.dpDiv.is(".ui-datepicker-rtl");f._keyEvent=true;if(a.datepicker._datepickerShowing){switch(b.keyCode){case 9:a.datepicker._hideDatepicker();g=false;break;case 13:e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv);if(e[0]){a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0])}c=a.datepicker._get(f,"onSelect");if(c){d=a.datepicker._formatDate(f);c.apply(f.input?f.input[0]:null,[d,f])}else{a.datepicker._hideDatepicker()}return false;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:if(b.ctrlKey||b.metaKey){a.datepicker._clearDate(b.target)}g=b.ctrlKey||b.metaKey;break;case 36:if(b.ctrlKey||b.metaKey){a.datepicker._gotoToday(b.target)}g=b.ctrlKey||b.metaKey;break;case 37:if(b.ctrlKey||b.metaKey){a.datepicker._adjustDate(b.target,h?+1:-1,"D")}g=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey){a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M")}break;case 38:if(b.ctrlKey||b.metaKey){a.datepicker._adjustDate(b.target,-7,"D")}g=b.ctrlKey||b.metaKey;break;case 39:if(b.ctrlKey||b.metaKey){a.datepicker._adjustDate(b.target,h?-1:+1,"D")}g=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey){a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M")}break;case 40:if(b.ctrlKey||b.metaKey){a.datepicker._adjustDate(b.target,+7,"D")}g=b.ctrlKey||b.metaKey;break;default:g=false}}else if(b.keyCode===36&&b.ctrlKey){a.datepicker._showDatepicker(this)}else{g=false}if(g){b.preventDefault();b.stopPropagation()}},_doKeyPress:function(b){var c,d,e=a.datepicker._getInst(b.target);if(a.datepicker._get(e,"constrainInput")){c=a.datepicker._possibleChars(a.datepicker._get(e,"dateFormat"));d=String.fromCharCode(b.charCode==null?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||(d<" "||!c||c.indexOf(d)>-1)}},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal){try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d));if(c){a.datepicker._setDateFromField(d);a.datepicker._updateAlternate(d);a.datepicker._updateDatepicker(d)}}catch(a){}}return true},_showDatepicker:function(b){b=b.target||b;if(b.nodeName.toLowerCase()!=="input"){b=a("input",b.parentNode)[0]}if(a.datepicker._isDisabledDatepicker(b)||a.datepicker._lastInput===b){return}var c,d,e,f,g,h,i;c=a.datepicker._getInst(b);if(a.datepicker._curInst&&a.datepicker._curInst!==c){a.datepicker._curInst.dpDiv.stop(true,true);if(c&&a.datepicker._datepickerShowing){a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])}}d=a.datepicker._get(c,"beforeShow");e=d?d.apply(b,[b,c]):{};if(e===false){return}x(c.settings,e);c.lastVal=null;a.datepicker._lastInput=b;a.datepicker._setDateFromField(c);if(a.datepicker._inDialog){b.value=""}if(!a.datepicker._pos){a.datepicker._pos=a.datepicker._findPos(b);a.datepicker._pos[1]+=b.offsetHeight}f=false;a(b).parents().each(function(){f|=a(this).css("position")==="fixed";return!f});g={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;c.dpDiv.empty();c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(c);g=a.datepicker._checkOffset(c,g,f);c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":f?"fixed":"absolute",display:"none",left:g.left+"px",top:g.top+"px"});if(!c.inline){h=a.datepicker._get(c,"showAnim");i=a.datepicker._get(c,"duration");c.dpDiv.css("z-index",t(a(b))+1);a.datepicker._datepickerShowing=true;if(a.effects&&a.effects.effect[h]){c.dpDiv.show(h,a.datepicker._get(c,"showOptions"),i)}else{c.dpDiv[h||"show"](h?i:null)}if(a.datepicker._shouldFocusInput(c)){c.input.focus()}a.datepicker._curInst=c}},_updateDatepicker:function(b){this.maxRows=4;s=b;b.dpDiv.empty().append(this._generateHTML(b));this._attachHandlers(b);var c,d=this._getNumberOfMonths(b),e=d[1],f=17,g=b.dpDiv.find("."+this._dayOverClass+" a");if(g.length>0){w.apply(g.get(0))}b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(e>1){b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",f*e+"em")}b.dpDiv[(d[0]!==1||d[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)){b.input.focus()}if(b.yearshtml){c=b.yearshtml;setTimeout(function(){if(c===b.yearshtml&&b.yearshtml){b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml)}c=b.yearshtml=null},0)}},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());c.left-=this._get(b,"isRTL")?e-g:0;c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0;c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0;c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0);c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0);return c},_findPos:function(b){var c,d=this._getInst(b),e=this._get(d,"isRTL");while(b&&(b.type==="hidden"||b.nodeType!==1||a.expr.filters.hidden(b))){b=b[e?"previousSibling":"nextSibling"]}c=a(b).offset();return[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,g=this._curInst;if(!g||b&&g!==a.data(b,"datepicker")){return}if(this._datepickerShowing){c=this._get(g,"showAnim");d=this._get(g,"duration");e=function(){a.datepicker._tidyDialog(g)};if(a.effects&&(a.effects.effect[c]||a.effects[c])){g.dpDiv.hide(c,a.datepicker._get(g,"showOptions"),d,e)}else{g.dpDiv[c==="slideDown"?"slideUp":c==="fadeIn"?"fadeOut":"hide"](c?d:null,e)}if(!c){e()}this._datepickerShowing=false;f=this._get(g,"onClose");if(f){f.apply(g.input?g.input[0]:null,[g.input?g.input.val():"",g])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(a.blockUI){a.unblockUI();a("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(!a.datepicker._curInst){return}var c=a(b.target),d=a.datepicker._getInst(c[0]);if(c[0].id!==a.datepicker._mainDivId&&c.parents("#"+a.datepicker._mainDivId).length===0&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&!(a.datepicker._inDialog&&a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d){a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);if(this._isDisabledDatepicker(e[0])){return}this._adjustInstDate(f,c+(d==="M"?this._get(f,"showCurrentAtPos"):0),d);this._updateDatepicker(f)},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);if(this._get(e,"gotoCurrent")&&e.currentDay){e.selectedDay=e.currentDay;e.drawMonth=e.selectedMonth=e.currentMonth;e.drawYear=e.selectedYear=e.currentYear}else{c=new Date;e.selectedDay=c.getDate();e.drawMonth=e.selectedMonth=c.getMonth();e.drawYear=e.selectedYear=c.getFullYear()}this._notifyChange(e);this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+(d==="M"?"Month":"Year")]=f["draw"+(d==="M"?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10);this._notifyChange(f);this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);if(a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])){return}f=this._getInst(g[0]);f.selectedDay=f.currentDay=a("a",e).html();f.selectedMonth=f.currentMonth=c;f.selectedYear=f.currentYear=d;this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=c!=null?c:this._formatDate(f);if(f.input){f.input.val(c)}this._updateAlternate(f);d=this._get(f,"onSelect");if(d){d.apply(f.input?f.input[0]:null,[c,f])}else if(f.input){f.input.trigger("change")}if(f.inline){this._updateDatepicker(f)}else{this._hideDatepicker();this._lastInput=f.input[0];if(typeof f.input[0]!=="object"){f.input.focus()}this._lastInput=null}},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");if(f){c=this._get(b,"altFormat")||this._get(b,"dateFormat");d=this._getDate(b);e=this.formatDate(c,d,this._getFormatConfig(b));a(f).each(function(){a(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());c.setDate(c.getDate()+4-(c.getDay()||7));b=c.getTime();c.setMonth(0);c.setDate(1);return Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(b,c,d){if(b==null||c==null){throw"Invalid arguments"}c=typeof c==="object"?c.toString():c+"";if(c===""){return null}var e,f,g,h=0,i=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,j=typeof i!=="string"?i:(new Date).getFullYear()%100+parseInt(i,10),k=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,l=(d?d.dayNames:null)||this._defaults.dayNames,m=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,n=(d?d.monthNames:null)||this._defaults.monthNames,o=-1,p=-1,q=-1,r=-1,s=false,t,u=function(a){var c=e+1<b.length&&b.charAt(e+1)===a;if(c){e++}return c},v=function(a){var b=u(a),d=a==="@"?14:a==="!"?20:a==="y"&&b?4:a==="o"?3:2,e=a==="y"?d:1,f=new RegExp("^\\d{"+e+","+d+"}"),g=c.substring(h).match(f);if(!g){throw"Missing number at position "+h}h+=g[0].length;return parseInt(g[0],10)},w=function(b,d,e){var f=-1,g=a.map(u(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});a.each(g,function(a,b){var d=b[1];if(c.substr(h,d.length).toLowerCase()===d.toLowerCase()){f=b[0];h+=d.length;return false}});if(f!==-1){return f+1}else{throw"Unknown name at position "+h}},x=function(){if(c.charAt(h)!==b.charAt(e)){throw"Unexpected literal at position "+h}h++};for(e=0;e<b.length;e++){if(s){if(b.charAt(e)==="'"&&!u("'")){s=false}else{x()}}else{switch(b.charAt(e)){case"d":q=v("d");break;case"D":w("D",k,l);break;case"o":r=v("o");break;case"m":p=v("m");break;case"M":p=w("M",m,n);break;case"y":o=v("y");break;case"@":t=new Date(v("@"));o=t.getFullYear();p=t.getMonth()+1;q=t.getDate();break;case"!":t=new Date((v("!")-this._ticksTo1970)/1e4);o=t.getFullYear();p=t.getMonth()+1;q=t.getDate();break;case"'":if(u("'")){x()}else{s=true}break;default:x()}}}if(h<c.length){g=c.substr(h);if(!/^\s+/.test(g)){throw"Extra/unparsed characters found in date: "+g}}if(o===-1){o=(new Date).getFullYear()}else if(o<100){o+=(new Date).getFullYear()-(new Date).getFullYear()%100+(o<=j?0:-100)}if(r>-1){p=1;q=r;do{f=this._getDaysInMonth(o,p-1);if(q<=f){break}p++;q-=f}while(true)}t=this._daylightSavingAdjust(new Date(o,p-1,q));if(t.getFullYear()!==o||t.getMonth()+1!==p||t.getDate()!==q){throw"Invalid date"}return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(a,b,c){if(!b){return""}var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=d+1<a.length&&a.charAt(d+1)===b;if(c){d++}return c},j=function(a,b,c){var d=""+b;if(i(a)){while(d.length<c){d="0"+d}}return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=false;if(b){for(d=0;d<a.length;d++){if(m){if(a.charAt(d)==="'"&&!i("'")){m=false}else{l+=a.charAt(d)}}else{switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=b.getTime()*1e4+this._ticksTo1970;break;case"'":if(i("'")){l+="'"}else{m=true}break;default:l+=a.charAt(d)}}}}return l},_possibleChars:function(a){var b,c="",d=false,e=function(c){var d=b+1<a.length&&a.charAt(b+1)===c;if(d){b++}return d};for(b=0;b<a.length;b++){if(d){if(a.charAt(b)==="'"&&!e("'")){d=false}else{c+=a.charAt(b)}}else{switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":if(e("'")){c+="'"}else{d=true}break;default:c+=a.charAt(b)}}}return c},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()===a.lastVal){return}var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(a){d=b?"":d}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=d?f.getDate():0;a.currentMonth=d?f.getMonth():0;a.currentYear=d?f.getFullYear():0;this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(a){}var d=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(c);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10);g=Math.min(g,a.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10);g=Math.min(g,a.datepicker._getDaysInMonth(e,f));break}i=h.exec(c)}return new Date(e,f,g)},g=c==null||c===""?d:typeof c==="string"?f(c):typeof c==="number"?isNaN(c)?d:e(c):new Date(c.getTime());g=g&&g.toString()==="Invalid Date"?d:g;if(g){g.setHours(0);g.setMinutes(0);g.setSeconds(0);g.setMilliseconds(0)}return this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){if(!a){return null}a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth();a.drawYear=a.selectedYear=a.currentYear=g.getFullYear();if((e!==a.selectedMonth||f!==a.selectedYear)&&!c){this._notifyChange(a)}this._adjustInstDate(a);if(a.input){a.input.val(d?"":this._formatDate(a))}},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()===""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){a.datepicker._selectMonthYear(d,this,"M");return false},selectYear:function(){a.datepicker._selectMonthYear(d,this,"Y");return false}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=U[0]!==1||U[1]!==1,Y=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,aa=a.drawYear;if(_<0){_+=12;aa--}if($){b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate()));b=Z&&b<Z?Z:b;while(this._daylightSavingAdjust(new Date(aa,_,1))>b){_--;if(_<0){_=11;aa--}}}a.drawMonth=_;a.drawYear=aa;c=this._get(a,"prevText");c=!T?c:this.formatDate(c,this._daylightSavingAdjust(new Date(aa,_-W,1)),this._getFormatConfig(a));d=this._canAdjustMonth(a,-1,aa,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>";e=this._get(a,"nextText");e=!T?e:this.formatDate(e,this._daylightSavingAdjust(new Date(aa,_+W,1)),this._getFormatConfig(a));f=this._canAdjustMonth(a,+1,aa,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>";g=this._get(a,"currentText");h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P;g=!T?g:this.formatDate(g,h,this._getFormatConfig(a));i=!a.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>":"";j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+g+"</button>":"")+(Q?"":i)+"</div>":"";k=parseInt(this._get(a,"firstDay"),10);k=isNaN(k)?0:k;l=this._get(a,"showWeek");m=this._get(a,"dayNames");n=this._get(a,"dayNamesMin");o=this._get(a,"monthNames");p=this._get(a,"monthNamesShort");q=this._get(a,"beforeShowDay");r=this._get(a,"showOtherMonths");s=this._get(a,"selectOtherMonths");t=this._getDefaultDate(a);u="";v;for(w=0;w<U[0];w++){x="";this.maxRows=4;for(y=0;y<U[1];y++){z=this._daylightSavingAdjust(new Date(aa,_,a.selectedDay));A=" ui-corner-all";B="";if(X){B+="<div class='ui-datepicker-group";if(U[1]>1){switch(y){case 0:B+=" ui-datepicker-group-first";A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last";A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle";A="";break}}B+="'>"}B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&w===0?Q?f:d:"")+(/all|right/.test(A)&&w===0?Q?d:f:"")+this._generateMonthYearHeader(a,_,aa,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"";for(v=0;v<7;v++){D=(v+k)%7;C+="<th scope='col'"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+m[D]+"'>"+n[D]+"</span></th>"}B+=C+"</tr></thead><tbody>";E=this._getDaysInMonth(aa,_);if(aa===a.selectedYear&&_===a.selectedMonth){a.selectedDay=Math.min(a.selectedDay,E)}F=(this._getFirstDayOfMonth(aa,_)-k+7)%7;G=Math.ceil((F+E)/7);H=X?this.maxRows>G?this.maxRows:G:G;this.maxRows=H;I=this._daylightSavingAdjust(new Date(aa,_,1-F));for(J=0;J<H;J++){B+="<tr>";K=!l?"":"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>";for(v=0;v<7;v++){L=q?q.apply(a.input?a.input[0]:null,[I]):[true,""];M=I.getMonth()!==_;N=M&&!s||!L[0]||Z&&I<Z||$&&I>$;K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+((!M||r)&&L[2]?" title='"+L[2].replace(/'/g,"&#39;")+"'":"")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>";I.setDate(I.getDate()+1);I=this._daylightSavingAdjust(I)}B+=K+"</tr>"}_++;if(_>11){_=0;aa++}B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");x+=B}u+=x}u+=j;a._keyEvent=false;return u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q){u+="<span class='ui-datepicker-month'>"+g[b]+"</span>"}else{i=d&&d.getFullYear()===c;j=e&&e.getFullYear()===c;u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(k=0;k<12;k++){if((!i||k>=d.getMonth())&&(!j||k<=e.getMonth())){u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>"}}u+="</select>"}if(!s){t+=u+(f||!(q&&r)?"&#xa0;":"")}if(!a.yearshtml){a.yearshtml="";if(f||!r){t+="<span class='ui-datepicker-year'>"+c+"</span>"}else{l=this._get(a,"yearRange").split(":");m=(new Date).getFullYear();n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b};o=n(l[0]);p=Math.max(o,n(l[1]||""));o=d?Math.max(o,d.getFullYear()):o;p=e?Math.min(p,e.getFullYear()):p;a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;o<=p;o++){a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>"}a.yearshtml+="</select>";t+=a.yearshtml;a.yearshtml=null}}t+=this._get(a,"yearSuffix");if(s){t+=(f||!(q&&r)?"&#xa0;":"")+u}t+="</div>";return t},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c==="Y"?b:0),e=a.drawMonth+(c==="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c==="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate();a.drawMonth=a.selectedMonth=g.getMonth();a.drawYear=a.selectedYear=g.getFullYear();if(c==="M"||c==="Y"){this._notifyChange(a)}},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");if(b){b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])}},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b==="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));if(b<0){f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth()))}return this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");if(i){c=i.split(":");d=(new Date).getFullYear();g=parseInt(c[0],10);h=parseInt(c[1],10);if(c[0].match(/[+\-].*/)){g+=d}if(c[1].match(/[+\-].*/)){h+=d}}return(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||b.getFullYear()<=h)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!=="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){if(!b){a.currentDay=a.selectedDay;a.currentMonth=a.selectedMonth;a.currentYear=a.selectedYear}var e=b?typeof b==="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}});function v(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){a(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){a(this).removeClass("ui-datepicker-next-hover")}}).delegate(c,"mouseover",w)}function w(){if(!a.datepicker._isDisabledDatepicker(s.inline?s.dpDiv.parent()[0]:s.input[0])){a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");a(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){a(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){a(this).addClass("ui-datepicker-next-hover")}}}function x(b,c){a.extend(b,c);for(var d in c){if(c[d]==null){b[d]=c[d]}}return b}a.fn.datepicker=function(b){if(!this.length){return this}if(!a.datepicker.initialized){a(document).mousedown(a.datepicker._checkExternalClick);a.datepicker.initialized=true}if(a("#"+a.datepicker._mainDivId).length===0){a("body").append(a.datepicker.dpDiv)}var c=Array.prototype.slice.call(arguments,1);if(typeof b==="string"&&(b==="isDisabled"||b==="getDate"||b==="widget")){return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))}if(b==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))}return this.each(function(){typeof b==="string"?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new u;a.datepicker.initialized=false;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.11.4";var y=a.datepicker;a.widget("ui.draggable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative()}if(this.options.addClasses){this.element.addClass("ui-draggable")}if(this.options.disabled){this.element.addClass("ui-draggable-disabled")}this._setHandleClassName();this._mouseInit()},_setOption:function(a,b){this._super(a,b);if(a==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;this._blurActiveElement(b);if(this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(b);if(!this.handle){return false}this._blockFrames(c.iframeFix===true?"iframe":c.iframeFix);return true},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(b){var c=this.document[0];if(!this.handleElement.is(b.target)){return}try{if(c.activeElement&&c.activeElement.nodeName.toLowerCase()!=="body"){a(c.activeElement).blur()}}catch(a){}},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return a(this).css("position")==="fixed"}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(b);this.originalPosition=this.position=this._generatePosition(b,false);this.originalPageX=b.pageX;this.originalPageY=b.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);this._setContainment();if(this._trigger("start",b)===false){this._clear();return false}this._cacheHelperProportions();if(a.ui.ddmanager&&!c.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,b)}this._normalizeRightBottom();this._mouseDrag(b,true);if(a.ui.ddmanager){a.ui.ddmanager.dragStart(this,b)}return true},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,c){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(b,true)
;this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(this._trigger("drag",b,d)===false){this._mouseUp({});return false}this.position=d.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(a.ui.ddmanager){a.ui.ddmanager.drag(this,b)}return false},_mouseStop:function(b){var c=this,d=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){d=a.ui.ddmanager.drop(this,b)}if(this.dropped){d=this.dropped;this.dropped=false}if(this.options.revert==="invalid"&&!d||this.options.revert==="valid"&&d||this.options.revert===true||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(c._trigger("stop",b)!==false){c._clear()}})}else{if(this._trigger("stop",b)!==false){this._clear()}}return false},_mouseUp:function(b){this._unblockFrames();if(a.ui.ddmanager){a.ui.ddmanager.dragStop(this,b)}if(this.handleElement.is(b.target)){this.element.focus()}return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper),e=d?a(c.helper.apply(this.element[0],[b])):c.helper==="clone"?this.element.clone().removeAttr("id"):this.element;if(!e.parents("body").length){e.appendTo(c.appendTo==="parent"?this.element[0].parentNode:c.appendTo)}if(d&&e[0]===this.element[0]){this._setPositionRelative()}if(e[0]!==this.element[0]&&!/(fixed|absolute)/.test(e.css("position"))){e.css("position","absolute")}return e},_setPositionRelative:function(){if(!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}},_adjustOffsetFromHelper:function(b){if(typeof b==="string"){b=b.split(" ")}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left"in b){this.offset.click.left=b.left+this.margins.left}if("right"in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if("top"in b){this.offset.click.top=b.top+this.margins.top}if("bottom"in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0])){b={top:0,left:0}}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(!b?this.scrollParent.scrollTop():0),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(!b?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];this.relativeContainer=null;if(!e.containment){this.containment=null;return}if(e.containment==="window"){this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(e.containment==="document"){this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(e.containment.constructor===Array){this.containment=e.containment;return}if(e.containment==="parent"){e.containment=this.helper[0].parentNode}c=a(e.containment);d=c[0];if(!d){return}b=/(scroll|auto)/.test(c.css("overflow"));this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=c},_convertPositionTo:function(a,b){if(!b){b=this.position}var c=a==="absolute"?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-(this.cssPosition==="fixed"?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-(this.cssPosition==="fixed"?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;if(!h||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(b){if(this.containment){if(this.relativeContainer){d=this.relativeContainer.offset();c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]}else{c=this.containment}if(a.pageX-this.offset.click.left<c[0]){i=c[0]+this.offset.click.left}if(a.pageY-this.offset.click.top<c[1]){j=c[1]+this.offset.click.top}if(a.pageX-this.offset.click.left>c[2]){i=c[2]+this.offset.click.left}if(a.pageY-this.offset.click.top>c[3]){j=c[3]+this.offset.click.top}}if(g.grid){e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY;j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e;f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX;i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f}if(g.axis==="y"){i=this.originalPageX}if(g.axis==="x"){j=this.originalPageY}}return{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_normalizeRightBottom:function(){if(this.options.axis!=="y"&&this.helper.css("right")!=="auto"){this.helper.width(this.helper.width());this.helper.css("right","auto")}if(this.options.axis!=="x"&&this.helper.css("bottom")!=="auto"){this.helper.height(this.helper.height());this.helper.css("bottom","auto")}},_trigger:function(b,c,d){d=d||this._uiHash();a.ui.plugin.call(this,b,[c,d,this],true);if(/^(drag|start|stop)/.test(b)){this.positionAbs=this._convertPositionTo("absolute");d.offset=this.positionAbs}return a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=a.extend({},c,{item:d.element});d.sortables=[];a(d.options.connectToSortable).each(function(){var c=a(this).sortable("instance");if(c&&!c.options.disabled){d.sortables.push(c);c.refreshPositions();c._trigger("activate",b,e)}})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});d.cancelHelperRemoval=false;a.each(d.sortables,function(){var a=this;if(a.isOver){a.isOver=0;d.cancelHelperRemoval=true;a.cancelHelperRemoval=false;a._storedCSS={position:a.placeholder.css("position"),top:a.placeholder.css("top"),left:a.placeholder.css("left")};a._mouseStop(b);a.options.helper=a.options._helper}else{a.cancelHelperRemoval=true;a._trigger("deactivate",b,e)}})},drag:function(b,c,d){a.each(d.sortables,function(){var e=false,f=this;f.positionAbs=d.positionAbs;f.helperProportions=d.helperProportions;f.offset.click=d.offset.click;if(f._intersectsWith(f.containerCache)){e=true;a.each(d.sortables,function(){this.positionAbs=d.positionAbs;this.helperProportions=d.helperProportions;this.offset.click=d.offset.click;if(this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])){e=false}return e})}if(e){if(!f.isOver){f.isOver=1;d._parent=c.helper.parent();f.currentItem=c.helper.appendTo(f.element).data("ui-sortable-item",true);f.options._helper=f.options.helper;f.options.helper=function(){return c.helper[0]};b.target=f.currentItem[0];f._mouseCapture(b,true);f._mouseStart(b,true,true);f.offset.click.top=d.offset.click.top;f.offset.click.left=d.offset.click.left;f.offset.parent.left-=d.offset.parent.left-f.offset.parent.left;f.offset.parent.top-=d.offset.parent.top-f.offset.parent.top;d._trigger("toSortable",b);d.dropped=f.element;a.each(d.sortables,function(){this.refreshPositions()});d.currentItem=d.element;f.fromOutside=d}if(f.currentItem){f._mouseDrag(b);c.position=f.position}}else{if(f.isOver){f.isOver=0;f.cancelHelperRemoval=true;f.options._revert=f.options.revert;f.options.revert=false;f._trigger("out",b,f._uiHash(f));f._mouseStop(b,true);f.options.revert=f.options._revert;f.options.helper=f.options._helper;if(f.placeholder){f.placeholder.remove()}c.helper.appendTo(d._parent);d._refreshOffsets(b);c.position=d._generatePosition(b,true);d._trigger("fromSortable",b);d.dropped=false;a.each(d.sortables,function(){this.refreshPositions()})}}})}});a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;if(e.css("cursor")){f._cursor=e.css("cursor")}e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;if(e._cursor){a("body").css("cursor",e._cursor)}}});a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;if(e.css("opacity")){f._opacity=e.css("opacity")}e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;if(e._opacity){a(c.helper).css("opacity",e._opacity)}}});a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){if(!c.scrollParentNotHidden){c.scrollParentNotHidden=c.helper.scrollParent(false)}if(c.scrollParentNotHidden[0]!==c.document[0]&&c.scrollParentNotHidden[0].tagName!=="HTML"){c.overflowOffset=c.scrollParentNotHidden.offset()}},drag:function(b,c,d){var e=d.options,f=false,g=d.scrollParentNotHidden[0],h=d.document[0];if(g!==h&&g.tagName!=="HTML"){if(!e.axis||e.axis!=="x"){if(d.overflowOffset.top+g.offsetHeight-b.pageY<e.scrollSensitivity){g.scrollTop=f=g.scrollTop+e.scrollSpeed}else if(b.pageY-d.overflowOffset.top<e.scrollSensitivity){g.scrollTop=f=g.scrollTop-e.scrollSpeed}}if(!e.axis||e.axis!=="y"){if(d.overflowOffset.left+g.offsetWidth-b.pageX<e.scrollSensitivity){g.scrollLeft=f=g.scrollLeft+e.scrollSpeed}else if(b.pageX-d.overflowOffset.left<e.scrollSensitivity){g.scrollLeft=f=g.scrollLeft-e.scrollSpeed}}}else{if(!e.axis||e.axis!=="x"){if(b.pageY-a(h).scrollTop()<e.scrollSensitivity){f=a(h).scrollTop(a(h).scrollTop()-e.scrollSpeed)}else if(a(window).height()-(b.pageY-a(h).scrollTop())<e.scrollSensitivity){f=a(h).scrollTop(a(h).scrollTop()+e.scrollSpeed)}}if(!e.axis||e.axis!=="y"){if(b.pageX-a(h).scrollLeft()<e.scrollSensitivity){f=a(h).scrollLeft(a(h).scrollLeft()-e.scrollSpeed)}else if(a(window).width()-(b.pageX-a(h).scrollLeft())<e.scrollSensitivity){f=a(h).scrollLeft(a(h).scrollLeft()+e.scrollSpeed)}}}if(f!==false&&a.ui.ddmanager&&!e.dropBehaviour){a.ui.ddmanager.prepareOffsets(d,b)}}});a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[];a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();if(this!==d.element[0]){d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})}})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--){i=d.snapElements[m].left-d.margins.left;j=i+d.snapElements[m].width;k=d.snapElements[m].top-d.margins.top;l=k+d.snapElements[m].height;if(r<i-p||q>j+p||t<k-p||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)){if(d.snapElements[m].snapping){d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item}))}d.snapElements[m].snapping=false;continue}if(o.snapMode!=="inner"){e=Math.abs(k-t)<=p;f=Math.abs(l-s)<=p;g=Math.abs(i-r)<=p;h=Math.abs(j-q)<=p;if(e){c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top}if(f){c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top}if(g){c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left}if(h){c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left}}n=e||f||g||h;if(o.snapMode!=="outer"){e=Math.abs(k-s)<=p;f=Math.abs(l-t)<=p;g=Math.abs(i-q)<=p;h=Math.abs(j-r)<=p;if(e){c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top}if(f){c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top}if(g){c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left}if(h){c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left}}if(!d.snapElements[m].snapping&&(e||f||g||h||n)){d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item}))}d.snapElements[m].snapping=e||f||g||h||n}}});a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!g.length){return}e=parseInt(a(g[0]).css("zIndex"),10)||0;a(g).each(function(b){a(this).css("zIndex",e+b)});this.css("zIndex",e+g.length)}});a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;if(e.css("zIndex")){f._zIndex=e.css("zIndex")}e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;if(e._zIndex){a(c.helper).css("zIndex",e._zIndex)}}});var z=a.ui.draggable;a.widget("ui.resizable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseInt(a,10)||0},_isNumber:function(a){return!isNaN(parseInt(a,10))},_hasScroll:function(b,c){if(a(b).css("overflow")==="hidden"){return false}var d=c&&c==="left"?"scrollLeft":"scrollTop",e=false;if(b[d]>0){return true}b[d]=1;e=b[d]>0;b[d]=0;return e},_create:function(){var b,c,d,e,f,g=this,h=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=h.handles||(!a(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=a();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}b=this.handles.split(",");this.handles={};for(c=0;c<b.length;c++){d=a.trim(b[c]);f="ui-resizable-"+d;e=a("<div class='ui-resizable-handle "+f+"'></div>");e.css({zIndex:h.zIndex});if("se"===d){e.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[d]=".ui-resizable-"+d;this.element.append(e)}}this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles){if(this.handles[c].constructor===String){this.handles[c]=this.element.children(this.handles[c]).first().show()}else if(this.handles[c].jquery||this.handles[c].nodeType){this.handles[c]=a(this.handles[c]);this._on(this.handles[c],{mousedown:g._mouseDown})}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){d=a(this.handles[c],this.element);f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(e,f);this._proportionallyResize()}this._handles=this._handles.add(this.handles[c])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.mouseover(function(){if(!g.resizing){if(this.className){e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}g.axis=e&&e[1]?e[1]:"se"}});if(h.autoHide){this._handles.hide();a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(h.disabled){return}a(this).removeClass("ui-resizable-autohide");g._handles.show()}).mouseleave(function(){if(h.disabled){return}if(!g.resizing){a(this).addClass("ui-resizable-autohide");g._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){c(this.element);b=this.element;this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b);b.remove()}this.originalElement.css("resize",this.originalResizeStyle);c(this.originalElement);return this},_mouseCapture:function(b){var c,d,e=false;for(c in this.handles){d=a(this.handles[c])[0];if(d===b.target||a.contains(d,b.target)){e=true}}return!this.options.disabled&&e},_mouseStart:function(b){var c,d,e,f=this.options,g=this.element;this.resizing=true;this._renderProxy();c=this._num(this.helper.css("left"));d=this._num(this.helper.css("top"));if(f.containment){c+=a(f.containment).scrollLeft()||0;d+=a(f.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:c,top:d};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()};this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()};this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()};this.originalPosition={left:c,top:d};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio=typeof f.aspectRatio==="number"?f.aspectRatio:this.originalSize.width/this.originalSize.height||1;e=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",e==="auto"?this.axis+"-resize":e);g.addClass("ui-resizable-resizing");this._propagate("start",b);return true},_mouseDrag:function(b){var c,d,e=this.originalMousePosition,f=this.axis,g=b.pageX-e.left||0,h=b.pageY-e.top||0,i=this._change[f];this._updatePrevProperties();if(!i){return false}c=i.apply(this,[b,g,h]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey){c=this._updateRatio(c,b)}c=this._respectSize(c,b);this._updateCache(c);this._propagate("resize",b);d=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!a.isEmptyObject(d)){this._updatePrevProperties();this._trigger("resize",b,this.ui());this._applyChanges()}return false},_mouseStop:function(b){this.resizing=false;var c,d,e,f,g,h,i,j=this.options,k=this;if(this._helper){c=this._proportionallyResizeElements;d=c.length&&/textarea/i.test(c[0].nodeName);e=d&&this._hasScroll(c[0],"left")?0:k.sizeDiff.height;f=d?0:k.sizeDiff.width;g={width:k.helper.width()-f,height:k.helper.height()-e};h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null;i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null;if(!j.animate){this.element.css(a.extend(g,{top:i,left:h}))}k.helper.height(k.size.height);k.helper.width(k.size.width);if(this._helper&&!j.animate){this._proportionallyResize()}}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",b);if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};if(this.position.top!==this.prevPosition.top){a.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){a.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){a.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){a.height=this.size.height+"px"}this.helper.css(a);return a},_updateVirtualBoundaries:function(a){var b,c,d,e,f,g=this.options;f={minWidth:this._isNumber(g.minWidth)?g.minWidth:0,maxWidth:this._isNumber(g.maxWidth)?g.maxWidth:Infinity,minHeight:this._isNumber(g.minHeight)?g.minHeight:0,maxHeight:this._isNumber(g.maxHeight)?g.maxHeight:Infinity};if(this._aspectRatio||a){b=f.minHeight*this.aspectRatio;d=f.minWidth/this.aspectRatio;c=f.maxHeight*this.aspectRatio;e=f.maxWidth/this.aspectRatio;if(b>f.minWidth){f.minWidth=b}if(d>f.minHeight){f.minHeight=d}if(c<f.maxWidth){f.maxWidth=c}if(e<f.maxHeight){f.maxHeight=e}}this._vBoundaries=f},_updateCache:function(a){this.offset=this.helper.offset();if(this._isNumber(a.left)){this.position.left=a.left}if(this._isNumber(a.top)){this.position.top=a.top}if(this._isNumber(a.height)){this.size.height=a.height}if(this._isNumber(a.width)){this.size.width=a.width}},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;if(this._isNumber(a.height)){a.width=a.height*this.aspectRatio}else if(this._isNumber(a.width)){a.height=a.width/this.aspectRatio}if(d==="sw"){a.left=b.left+(c.width-a.width);a.top=null}if(d==="nw"){a.top=b.top+(c.height-a.height);a.left=b.left+(c.width-a.width)}return a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,d=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,e=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,i=this.position.top+this.size.height,j=/sw|nw|w/.test(c),k=/nw|ne|n/.test(c);if(f){a.width=b.minWidth}if(g){a.height=b.minHeight}if(d){a.width=b.maxWidth}if(e){a.height=b.maxHeight}if(f&&j){a.left=h-b.minWidth}if(d&&j){a.left=h-b.maxWidth}if(g&&k){a.top=i-b.minHeight}if(e&&k){a.top=i-b.maxHeight}if(!a.width&&!a.height&&!a.left&&a.top){a.top=null}else if(!a.width&&!a.height&&!a.top&&a.left){a.left=null}return a},_getPaddingPlusBorderDimensions:function(a){var b=0,c=[],d=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],e=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];for(;b<4;b++){c[b]=parseInt(d[b],10)||0;c[b]+=parseInt(e[b],10)||0}return{height:c[0]+c[2],width:c[1]+c[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var a,b=0,c=this.helper||this.element;for(;b<this._proportionallyResizeElements.length;b++){a=this._proportionallyResizeElements[b];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(a)}a.css({height:c.height()-this.outerDimensions.height||0,width:c.width()-this.outerDimensions.width||0})}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset();if(this._helper){this.helper=this.helper||a("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]);b!=="resize"&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).resizable("instance"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&c._hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};if(e&&e.length){a(e[0]).css({width:d.width,height:d.height})}c._updateCache(d);c._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var b,c,d,e,f,g,h,i=a(this).resizable("instance"),j=i.options,k=i.element,l=j.containment,m=l instanceof a?l.get(0):/parent/.test(l)?k.parent().get(0):l;if(!m){return}i.containerElement=a(m);if(/document/.test(l)||l===document){i.containerOffset={left:0,top:0};i.containerPosition={left:0,top:0};i.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}}else{b=a(m);c=[];a(["Top","Right","Left","Bottom"]).each(function(a,d){c[a]=i._num(b.css("padding"+d))});i.containerOffset=b.offset();i.containerPosition=b.position();i.containerSize={height:b.innerHeight()-c[3],width:b.innerWidth()-c[1]};d=i.containerOffset;e=i.containerSize.height;f=i.containerSize.width;g=i._hasScroll(m,"left")?m.scrollWidth:f;h=i._hasScroll(m)?m.scrollHeight:e;i.parentData={element:m,left:d.left,top:d.top,width:g,height:h}}},resize:function(b){var c,d,e,f,g=a(this).resizable("instance"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement,n=true;if(m[0]!==document&&/static/.test(m.css("position"))){l=i}if(j.left<(g._helper?i.left:0)){g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left);if(k){g.size.height=g.size.width/g.aspectRatio;n=false}g.position.left=h.helper?i.left:0}if(j.top<(g._helper?i.top:0)){g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top);if(k){g.size.width=g.size.height*g.aspectRatio;n=false}g.position.top=g._helper?i.top:0}e=g.containerElement.get(0)===g.element.parent().get(0);f=/relative|absolute/.test(g.containerElement.css("position"));if(e&&f){g.offset.left=g.parentData.left+g.position.left;g.offset.top=g.parentData.top+g.position.top}else{g.offset.left=g.element.offset().left;g.offset.top=g.element.offset().top}c=Math.abs(g.sizeDiff.width+(g._helper?g.offset.left-l.left:g.offset.left-i.left));d=Math.abs(g.sizeDiff.height+(g._helper?g.offset.top-l.top:g.offset.top-i.top));if(c+g.size.width>=g.parentData.width){g.size.width=g.parentData.width-c;if(k){g.size.height=g.size.width/g.aspectRatio;n=false}}if(d+g.size.height>=g.parentData.height){g.size.height=g.parentData.height-d;if(k){g.size.width=g.size.height*g.aspectRatio;n=false}}if(!n){g.position.left=g.prevPosition.left;g.position.top=g.prevPosition.top;g.size.width=g.prevSize.width;g.size.height=g.prevSize.height}},stop:function(){var b=a(this).resizable("instance"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;if(b._helper&&!c.animate&&/relative/.test(f.css("position"))){a(this).css({left:h.left-e.left-d.left,width:i,height:j})}if(b._helper&&!c.animate&&/static/.test(f.css("position"))){a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}});a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance"),c=b.options;a(c.alsoResize).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})},resize:function(b,c){var d=a(this).resizable("instance"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0}
;a(e.alsoResize).each(function(){var b=a(this),d=a(this).data("ui-resizable-alsoresize"),e={},f=b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(f,function(a,b){var c=(d[b]||0)+(h[b]||0);if(c&&c>=0){e[b]=c||null}});b.css(e)})},stop:function(){a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).resizable("instance"),c=b.options,d=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof c.ghost==="string"?c.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");if(b.ghost){b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})}},stop:function(){var b=a(this).resizable("instance");if(b.ghost&&b.helper){b.helper.get(0).removeChild(b.ghost.get(0))}}});a.ui.plugin.add("resizable","grid",{resize:function(){var b,c=a(this).resizable("instance"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis,i=typeof d.grid==="number"?[d.grid,d.grid]:d.grid,j=i[0]||1,k=i[1]||1,l=Math.round((e.width-f.width)/j)*j,m=Math.round((e.height-f.height)/k)*k,n=f.width+l,o=f.height+m,p=d.maxWidth&&d.maxWidth<n,q=d.maxHeight&&d.maxHeight<o,r=d.minWidth&&d.minWidth>n,s=d.minHeight&&d.minHeight>o;d.grid=i;if(r){n+=j}if(s){o+=k}if(p){n-=j}if(q){o-=k}if(/^(se|s|e)$/.test(h)){c.size.width=n;c.size.height=o}else if(/^(ne)$/.test(h)){c.size.width=n;c.size.height=o;c.position.top=g.top-m}else if(/^(sw)$/.test(h)){c.size.width=n;c.size.height=o;c.position.left=g.left-l}else{if(o-k<=0||n-j<=0){b=c._getPaddingPlusBorderDimensions(this)}if(o-k>0){c.size.height=o;c.position.top=g.top-m}else{o=k-b.height;c.size.height=o;c.position.top=g.top+f.height-o}if(n-j>0){c.size.width=n;c.position.left=g.left-l}else{n=j-b.width;c.size.width=n;c.position.left=g.left+f.width-n}}}});var A=a.ui.resizable;var B=a.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:true,buttons:[],closeOnEscape:true,closeText:"Close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;if(c<0){a(this).css("top",b.top-c)}}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions:{maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();if(this.options.draggable&&a.fn.draggable){this._makeDraggable()}if(this.options.resizable&&a.fn.resizable){this._makeResizable()}this._isOpen=false;this._trackFocus()},_init:function(){if(this.options.autoOpen){this.open()}},_appendTo:function(){var b=this.options.appendTo;if(b&&(b.jquery||b.nodeType)){return a(b)}return this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(true,true).remove();if(this.originalTitle){this.element.attr("title",this.originalTitle)}a=b.parent.children().eq(b.index);if(a.length&&a[0]!==this.element[0]){a.before(this.element)}else{b.parent.append(this.element)}},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c,d=this;if(!this._isOpen||this._trigger("beforeClose",b)===false){return}this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").focus().length){try{c=this.document[0].activeElement;if(c&&c.nodeName.toLowerCase()!=="body"){a(c).blur()}}catch(a){}}this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",b)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,c){var d=false,e=this.uiDialog.siblings(".ui-front:visible").map(function(){return+a(this).css("z-index")}).get(),f=Math.max.apply(null,e);if(f>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",f+1);d=true}if(d&&!c){this._trigger("focus",b)}return d},open:function(){var b=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable()}return}this._isOpen=true;this.opener=a(this.document[0].activeElement);this._size();this._position();this._createOverlay();this._moveToTop(null,true);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1)}this._show(this.uiDialog,this.options.show,function(){b._focusTabbable();b._trigger("focus")});this._makeFocusTarget();this._trigger("open")},_focusTabbable:function(){var a=this._focusedElement;if(!a){a=this.element.find("[autofocus]")}if(!a.length){a=this.element.find(":tabbable")}if(!a.length){a=this.uiDialogButtonPane.find(":tabbable")}if(!a.length){a=this.uiDialogTitlebarClose.filter(":tabbable")}if(!a.length){a=this.uiDialog}a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);if(!c){this._focusTabbable()}}b.preventDefault();c.call(this);this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE){b.preventDefault();this.close(b);return}if(b.keyCode!==a.ui.keyCode.TAB||b.isDefaultPrevented()){return}var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");if((b.target===e[0]||b.target===this.uiDialog[0])&&!b.shiftKey){this._delay(function(){d.focus()});b.preventDefault()}else if((b.target===d[0]||b.target===this.uiDialog[0])&&b.shiftKey){this._delay(function(){e.focus()});b.preventDefault()}},mousedown:function(a){if(this._moveToTop(a)){this._focusTabbable()}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})}},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(b){if(!a(b.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.focus()}}});this.uiDialogTitlebarClose=a("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:false}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault();this.close(a)}});b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(b);this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){if(!this.options.title){a.html("&#160;")}a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(a.isEmptyObject(c)||a.isArray(c)&&!c.length){this.uiDialog.removeClass("ui-dialog-buttons");return}a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d;d=a.extend({type:"button"},d);e=d.click;d.click=function(){e.apply(b.element[0],arguments)};f={icons:d.icons,text:d.showText};delete d.icons;delete d.showText;a("<button></button>",d).button(f).appendTo(b.uiButtonSet)});this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var b=this,c=this.options;function d(a){return{position:a.position,offset:a.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(c,e){a(this).addClass("ui-dialog-dragging");b._blockFrames();b._trigger("dragStart",c,d(e))},drag:function(a,c){b._trigger("drag",a,d(c))},stop:function(e,f){var g=f.offset.left-b.document.scrollLeft(),h=f.offset.top-b.document.scrollTop();c.position={my:"left top",at:"left"+(g>=0?"+":"")+g+" "+"top"+(h>=0?"+":"")+h,of:b.window};a(this).removeClass("ui-dialog-dragging");b._unblockFrames();b._trigger("dragStop",e,d(f))}})},_makeResizable:function(){var b=this,c=this.options,d=c.resizable,e=this.uiDialog.css("position"),f=typeof d==="string"?d:"n,e,s,w,se,sw,ne,nw";function g(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:c.maxWidth,maxHeight:c.maxHeight,minWidth:c.minWidth,minHeight:this._minHeight(),handles:f,start:function(c,d){a(this).addClass("ui-dialog-resizing");b._blockFrames();b._trigger("resizeStart",c,g(d))},resize:function(a,c){b._trigger("resize",a,g(c))},stop:function(d,e){var f=b.uiDialog.offset(),h=f.left-b.document.scrollLeft(),i=f.top-b.document.scrollTop();c.height=b.uiDialog.height();c.width=b.uiDialog.width();c.position={my:"left top",at:"left"+(h>=0?"+":"")+h+" "+"top"+(i>=0?"+":"")+i,of:b.window};a(this).removeClass("ui-dialog-resizing");b._unblockFrames();b._trigger("resizeStop",d,g(e))}}).css("position",e)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget();this._focusedElement=a(b.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),c=a.inArray(this,b);if(c!==-1){b.splice(c,1)}},_trackingInstances:function(){var a=this.document.data("ui-dialog-instances");if(!a){a=[];this.document.data("ui-dialog-instances",a)}return a},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");if(!a){this.uiDialog.show()}this.uiDialog.position(this.options.position);if(!a){this.uiDialog.hide()}},_setOptions:function(b){var c=this,d=false,e={};a.each(b,function(a,b){c._setOption(a,b);if(a in c.sizeRelatedOptions){d=true}if(a in c.resizableRelatedOptions){e[a]=b}});if(d){this._size();this._position()}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",e)}},_setOption:function(a,b){var c,d,e=this.uiDialog;if(a==="dialogClass"){e.removeClass(this.options.dialogClass).addClass(b)}if(a==="disabled"){return}this._super(a,b);if(a==="appendTo"){this.uiDialog.appendTo(this._appendTo())}if(a==="buttons"){this._createButtons()}if(a==="closeText"){this.uiDialogTitlebarClose.button({label:""+b})}if(a==="draggable"){c=e.is(":data(ui-draggable)");if(c&&!b){e.draggable("destroy")}if(!c&&b){this._makeDraggable()}}if(a==="position"){this._position()}if(a==="resizable"){d=e.is(":data(ui-resizable)");if(d&&!b){e.resizable("destroy")}if(d&&typeof b==="string"){e.resizable("option","handles",b)}if(!d&&b!==false){this._makeResizable()}}if(a==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))}},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(d.minWidth>d.width){d.width=d.minWidth}a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight();b=Math.max(0,d.minHeight-a);c=typeof d.maxHeight==="number"?Math.max(0,d.maxHeight-a):"none";if(d.height==="auto"){this.element.css({minHeight:b,maxHeight:c,height:"auto"})}else{this.element.height(Math.max(0,d.height-a))}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_allowInteraction:function(b){if(a(b.target).closest(".ui-dialog").length){return true}return!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal){return}var b=true;this._delay(function(){b=false});if(!this.document.data("ui-dialog-overlays")){this._on(this.document,{focusin:function(a){if(b){return}if(!this._allowInteraction(a)){a.preventDefault();this._trackingInstances()[0]._focusTabbable()}}})}this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)},_destroyOverlay:function(){if(!this.options.modal){return}if(this.overlay){var a=this.document.data("ui-dialog-overlays")-1;if(!a){this.document.unbind("focusin").removeData("ui-dialog-overlays")}else{this.document.data("ui-dialog-overlays",a)}this.overlay.remove();this.overlay=null}}});a.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=false;this.isout=true;this.accept=a.isFunction(d)?d:function(a){return a.is(d)};this.proportions=function(){if(arguments.length){b=arguments[0]}else{return b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}}};this._addToManager(c.scope);c.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[];a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){var b=0;for(;b<a.length;b++){if(a[b]===this){a.splice(b,1)}}},_destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];this._splice(b);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){if(b==="accept"){this.accept=a.isFunction(c)?c:function(a){return a.is(c)}}else if(b==="scope"){var d=a.ui.ddmanager.droppables[this.options.scope];this._splice(d);this._addToManager(c)}this._super(b,c)},_activate:function(b){var c=a.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}if(c){this._trigger("activate",b,this.ui(c))}},_deactivate:function(b){var c=a.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(c){this._trigger("deactivate",b,this.ui(c))}},_over:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],c.currentItem||c.element)){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",b,this.ui(c))}},_out:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],c.currentItem||c.element)){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",b,this.ui(c))}},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=false;if(!d||(d.currentItem||d.element)[0]===this.element[0]){return false}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");if(c.options.greedy&&!c.options.disabled&&c.options.scope===d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,b)){e=true;return false}});if(e){return false}if(this.accept.call(this.element[0],d.currentItem||d.element)){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",b,this.ui(d));return this.element}return false},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});a.ui.intersect=function(){function a(a,b,c){return a>=b&&a<b+c}return function(b,c,d,e){if(!c.offset){return false}var f=(b.positionAbs||b.position.absolute).left+b.margins.left,g=(b.positionAbs||b.position.absolute).top+b.margins.top,h=f+b.helperProportions.width,i=g+b.helperProportions.height,j=c.offset.left,k=c.offset.top,l=j+c.proportions().width,m=k+c.proportions().height;switch(d){case"fit":return j<=f&&h<=l&&k<=g&&i<=m;case"intersect":return j<f+b.helperProportions.width/2&&h-b.helperProportions.width/2<l&&k<g+b.helperProportions.height/2&&i-b.helperProportions.height/2<m;case"pointer":return a(e.pageY,k,c.proportions().height)&&a(e.pageX,j,c.proportions().width);case"touch":return(g>=k&&g<=m||i>=k&&i<=m||g<k&&i>m)&&(f>=j&&f<=l||h>=j&&h<=l||f<j&&h>l);default:return false}}}();a.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;d<f.length;d++){if(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element)){continue}for(e=0;e<h.length;e++){if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}}f[d].visible=f[d].element.css("display")!=="none";if(!f[d].visible){continue}if(g==="mousedown"){f[d]._activate.call(f[d],c)}f[d].offset=f[d].element.offset();f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight})}},drop:function(b,c){var d=false;a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance,c)){d=this._drop.call(this,c)||d}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)){this.isout=true;this.isover=false;this._deactivate.call(this,c)}});return d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){if(!b.options.refreshPositions){a.ui.ddmanager.prepareOffsets(b,c)}})},drag:function(b,c){if(b.options.refreshPositions){a.ui.ddmanager.prepareOffsets(b,c)}a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance,c),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;if(!h){return}if(this.options.greedy){e=this.options.scope;f=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===e});if(f.length){d=a(f[0]).droppable("instance");d.greedyChild=h==="isover"}}if(d&&h==="isover"){d.isover=false;d.isout=true;d._out.call(d,c)}this[h]=true;this[h==="isout"?"isover":"isout"]=false;this[h==="isover"?"_over":"_out"].call(this,c);if(d&&h==="isout"){d.isout=false;d.isover=true;d._over.call(d,c)}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable");if(!b.options.refreshPositions){a.ui.ddmanager.prepareOffsets(b,c)}}};var C=a.ui.droppable;var D="ui-effects-",E=a;a.effects={effect:{}};(function(a,b){var c="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",d=/^([\-+])=\s*(\d+\.?\d*)/,e=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1]*2.55,a[2]*2.55,a[3]*2.55,a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],f=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},g={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={byte:{floor:true,max:255},percent:{max:1},degrees:{mod:360,floor:true}},i=f.support={},j=a("<p>")[0],k,l=a.each;j.style.cssText="background-color:rgba(1,1,1,.5)";i.rgba=j.style.backgroundColor.indexOf("rgba")>-1;l(g,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});function m(a,b,c){var d=h[b.type]||{};if(a==null){return c||!b.def?null:b.def}a=d.floor?~~a:parseFloat(a);if(isNaN(a)){return b.def}if(d.mod){return(a+d.mod)%d.mod}return 0>a?0:d.max<a?d.max:a}function n(b){var c=f(),d=c._rgba=[];b=b.toLowerCase();l(e,function(a,e){var f,h=e.re.exec(b),i=h&&e.parse(h),j=e.space||"rgba";if(i){f=c[j](i);c[g[j].cache]=f[g[j].cache];d=c._rgba=f._rgba;return false}});if(d.length){if(d.join()==="0,0,0,0"){a.extend(d,k.transparent)}return c}return k[b]}f.fn=a.extend(f.prototype,{parse:function(c,d,e,h){if(c===b){this._rgba=[null,null,null,null];return this}if(c.jquery||c.nodeType){c=a(c).css(d);d=b}var i=this,j=a.type(c),o=this._rgba=[];if(d!==b){c=[c,d,e,h];j="array"}if(j==="string"){return this.parse(n(c)||k._default)}if(j==="array"){l(g.rgba.props,function(a,b){o[b.idx]=m(c[b.idx],b)});return this}if(j==="object"){if(c instanceof f){l(g,function(a,b){if(c[b.cache]){i[b.cache]=c[b.cache].slice()}})}else{l(g,function(b,d){var e=d.cache;l(d.props,function(a,b){if(!i[e]&&d.to){if(a==="alpha"||c[a]==null){return}i[e]=d.to(i._rgba)}i[e][b.idx]=m(c[a],b,true)});if(i[e]&&a.inArray(null,i[e].slice(0,3))<0){i[e][3]=1;if(d.from){i._rgba=d.from(i[e])}}})}return this}},is:function(a){var b=f(a),c=true,d=this;l(g,function(a,e){var f,g=b[e.cache];if(g){f=d[e.cache]||e.to&&e.to(d._rgba)||[];l(e.props,function(a,b){if(g[b.idx]!=null){c=g[b.idx]===f[b.idx];return c}})}return c});return c},_space:function(){var a=[],b=this;l(g,function(c,d){if(b[d.cache]){a.push(c)}});return a.pop()},transition:function(a,b){var c=f(a),d=c._space(),e=g[d],i=this.alpha()===0?f("transparent"):this,j=i[e.cache]||e.to(i._rgba),k=j.slice();c=c[e.cache];l(e.props,function(a,d){var e=d.idx,f=j[e],g=c[e],i=h[d.type]||{};if(g===null){return}if(f===null){k[e]=g}else{if(i.mod){if(g-f>i.mod/2){f+=i.mod}else if(f-g>i.mod/2){f-=i.mod}}k[e]=m((g-f)*b+f,d)}});return this[d](k)},blend:function(b){if(this._rgba[3]===1){return this}var c=this._rgba.slice(),d=c.pop(),e=f(b)._rgba;return f(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return a==null?b>2?1:0:a});if(c[3]===1){c.pop();b="rgb("}return b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){if(a==null){a=b>2?1:0}if(b&&b<3){a=Math.round(a*100)+"%"}return a});if(c[3]===1){c.pop();b="hsl("}return b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();if(b){c.push(~~(d*255))}return"#"+a.map(c,function(a){a=(a||0).toString(16);return a.length===1?"0"+a:a}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});f.fn.parse.prototype=f.fn;function o(a,b,c){c=(c+1)%1;if(c*6<1){return a+(b-a)*c*6}if(c*2<1){return b}if(c*3<2){return a+(b-a)*(2/3-c)*6}return a}g.hsla.to=function(a){if(a[0]==null||a[1]==null||a[2]==null){return[null,null,null,a[3]]}var b=a[0]/255,c=a[1]/255,d=a[2]/255,e=a[3],f=Math.max(b,c,d),g=Math.min(b,c,d),h=f-g,i=f+g,j=i*.5,k,l;if(g===f){k=0}else if(b===f){k=60*(c-d)/h+360}else if(c===f){k=60*(d-b)/h+120}else{k=60*(b-c)/h+240}if(h===0){l=0}else if(j<=.5){l=h/i}else{l=h/(2-i)}return[Math.round(k)%360,l,j,e==null?1:e]};g.hsla.from=function(a){if(a[0]==null||a[1]==null||a[2]==null){return[null,null,null,a[3]]}var b=a[0]/360,c=a[1],d=a[2],e=a[3],f=d<=.5?d*(1+c):d+c-d*c,g=2*d-f;return[Math.round(o(g,f,b+1/3)*255),Math.round(o(g,f,b)*255),Math.round(o(g,f,b-1/3)*255),e]};l(g,function(c,e){var g=e.props,h=e.cache,i=e.to,j=e.from;f.fn[c]=function(c){if(i&&!this[h]){this[h]=i(this._rgba)}if(c===b){return this[h].slice()}var d,e=a.type(c),k=e==="array"||e==="object"?c:arguments,n=this[h].slice();l(g,function(a,b){var c=k[e==="object"?a:b.idx];if(c==null){c=n[b.idx]}n[b.idx]=m(c,b)});if(j){d=f(j(n));d[h]=n;return d}else{return f(n)}};l(g,function(b,e){if(f.fn[b]){return}f.fn[b]=function(f){var g=a.type(f),h=b==="alpha"?this._hsla?"hsla":"rgba":c,i=this[h](),j=i[e.idx],k;if(g==="undefined"){return j}if(g==="function"){f=f.call(this,j);g=a.type(f)}if(f==null&&e.empty){return this}if(g==="string"){k=d.exec(f);if(k){f=j+parseFloat(k[2])*(k[1]==="+"?1:-1)}}i[e.idx]=f;return this[h](i)}})});f.hook=function(b){var c=b.split(" ");l(c,function(b,c){a.cssHooks[c]={set:function(b,d){var e,g,h="";if(d!=="transparent"&&(a.type(d)!=="string"||(e=n(d)))){d=f(e||d);if(!i.rgba&&d._rgba[3]!==1){g=c==="backgroundColor"?b.parentNode:b;while((h===""||h==="transparent")&&g&&g.style){try{h=a.css(g,"backgroundColor");g=g.parentNode}catch(a){}}d=d.blend(h&&h!=="transparent"?h:"_default")}d=d.toRgbaString()}try{b.style[c]=d}catch(a){}}};a.fx.step[c]=function(b){if(!b.colorInit){b.start=f(b.elem,c);b.end=f(b.end);b.colorInit=true}a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})};f.hook(c);a.cssHooks.borderColor={expand:function(a){var b={};l(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a});return b}};k=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(E);(function(){var b=["add","remove","toggle"],c={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){if(a.end!=="none"&&!a.setAttr||a.pos===1&&!a.setAttr){E.style(a.elem,c,a.end);a.setAttr=true}}});function d(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]]){d=e.length;while(d--){c=e[d];if(typeof e[c]==="string"){f[a.camelCase(c)]=e[c]}}}else{for(c in e){if(typeof e[c]==="string"){f[c]=e[c]}}}return f}function e(b,d){var e={},f,g;for(f in d){g=d[f];if(b[f]!==g){if(!c[f]){if(a.fx.step[f]||!isNaN(parseFloat(g))){e[f]=g}}}}return e}if(!a.fn.addBack){a.fn.addBack=function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}a.effects.animateClass=function(c,f,g,h){var i=a.speed(f,g,h);return this.queue(function(){var f=a(this),g=f.attr("class")||"",h,j=i.children?f.find("*").addBack():f;j=j.map(function(){var b=a(this);return{el:b,start:d(this)}});h=function(){a.each(b,function(a,b){if(c[b]){f[b+"Class"](c[b])}})};h();j=j.map(function(){this.end=d(this.el[0]);this.diff=e(this.start,this.end);return this});f.attr("class",g);j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:false,complete:function(){c.resolve(b)}});this.el.animate(this.diff,d);return c.promise()});a.when.apply(a,j.get()).done(function(){h();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});i.complete.call(f[0])})})};a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(c,d,e,f,g){if(typeof d==="boolean"||d===undefined){if(!e){return b.apply(this,arguments)}else{return a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,f,g)}}else{return a.effects.animateClass.call(this,{toggle:c},d,e,f)}}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})})();(function(){a.extend(a.effects,{version:"1.11.4",save:function(a,b){for(var c=0;c<b.length;c++){if(b[c]!==null){a.data(D+b[c],a[0].style[b[c]])}}},restore:function(a,b){var c,d;for(d=0;d<b.length;d++){if(b[d]!==null){c=a.data(D+b[d]);if(c===undefined){c=""}a.css(b[d],c)}}},setMode:function(a,b){if(b==="toggle"){b=a.is(":hidden")?"show":"hide"}return b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper")){return b.parent()}var c={width:b.outerWidth(true),height:b.outerHeight(true),float:b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(a){f=document.body}b.wrap(d);if(b[0]===f||a.contains(b[0],f)){a(f).focus()}d=b.parent();if(b.css("position")==="static"){d.css({position:"relative"});b.css({position:"relative"})}else{a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")});a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);if(isNaN(parseInt(c[d],10))){c[d]="auto"}});b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}b.css(e);return d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;if(b.parent().is(".ui-effects-wrapper")){b.parent().replaceWith(b);if(b[0]===c||a.contains(b[0],c)){a(c).focus()}}return b},setTransition:function(b,c,d,e){e=e||{};a.each(c,function(a,c){var f=b.cssUnit(c);if(f[0]>0){e[c]=f[0]*d+f[1]}});return e}});function b(b,c,d,e){if(a.isPlainObject(b)){c=b;b=b.effect}b={effect:b};if(c==null){c={}}if(a.isFunction(c)){e=c;d=null;c={}}if(typeof c==="number"||a.fx.speeds[c]){e=d;d=c;c={}}if(a.isFunction(d)){e=d;d=null}if(c){a.extend(b,c)}d=d||c.duration;b.duration=a.fx.off?0:typeof d==="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default;b.complete=e||c.complete;return b}function c(b){if(!b||typeof b==="number"||a.fx.speeds[b]){return true}if(typeof b==="string"&&!a.effects.effect[b]){return true}if(a.isFunction(b)){return true}if(typeof b==="object"&&!b.effect){return true}return false}a.fn.extend({effect:function(){var c=b.apply(this,arguments),d=c.mode,e=c.queue,f=a.effects.effect[c.effect];if(a.fx.off||!f){if(d){return this[d](c.duration,c.complete)}else{return this.each(function(){if(c.complete){c.complete.call(this)}})}}function g(b){var d=a(this),e=c.complete,g=c.mode;function h(){
if(a.isFunction(e)){e.call(d[0])}if(a.isFunction(b)){b()}}if(d.is(":hidden")?g==="hide":g==="show"){d[g]();h()}else{f.call(d[0],c,h)}}return e===false?this.each(g):this.queue(e||"fx",g)},show:function(a){return function(d){if(c(d)){return a.apply(this,arguments)}else{var e=b.apply(this,arguments);e.mode="show";return this.effect.call(this,e)}}}(a.fn.show),hide:function(a){return function(d){if(c(d)){return a.apply(this,arguments)}else{var e=b.apply(this,arguments);e.mode="hide";return this.effect.call(this,e)}}}(a.fn.hide),toggle:function(a){return function(d){if(c(d)||typeof d==="boolean"){return a.apply(this,arguments)}else{var e=b.apply(this,arguments);e.mode="toggle";return this.effect.call(this,e)}}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){if(c.indexOf(b)>0){d=[parseFloat(c),b]}});return d}})})();(function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}});a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return a===0||a===1?a:-Math.pow(2,8*(a-1))*Math.sin(((a-1)*80-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){var b,c=4;while(a<((b=Math.pow(2,--c))-1)/11){}return 1/Math.pow(4,3-c)-7.5625*Math.pow((b*3-2)/22-a,2)}});a.each(b,function(b,c){a.easing["easeIn"+b]=c;a.easing["easeOut"+b]=function(a){return 1-c(1-a)};a.easing["easeInOut"+b]=function(a){return a<.5?c(a*2)/2:1-c(a*-2+2)/2}})})();var F=a.effects;var G=a.effects.effect.blind=function(b,c){var d=a(this),e=/up|down|vertical/,f=/up|left|vertical|horizontal/,g=["position","top","bottom","left","right","height","width"],h=a.effects.setMode(d,b.mode||"hide"),i=b.direction||"up",j=e.test(i),k=j?"height":"width",l=j?"top":"left",m=f.test(i),n={},o=h==="show",p,q,r;if(d.parent().is(".ui-effects-wrapper")){a.effects.save(d.parent(),g)}else{a.effects.save(d,g)}d.show();p=a.effects.createWrapper(d).css({overflow:"hidden"});q=p[k]();r=parseFloat(p.css(l))||0;n[k]=o?q:0;if(!m){d.css(j?"bottom":"right",0).css(j?"top":"left","auto").css({position:"absolute"});n[l]=o?r:q+r}if(o){p.css(k,0);if(!m){p.css(l,r+q)}}p.animate(n,{duration:b.duration,easing:b.easing,queue:false,complete:function(){if(h==="hide"){d.hide()}a.effects.restore(d,g);a.effects.removeWrapper(d);c()}})};var H=a.effects.effect.bounce=function(b,c){var d=a(this),e=["position","top","bottom","left","right","height","width"],f=a.effects.setMode(d,b.mode||"effect"),g=f==="hide",h=f==="show",i=b.direction||"up",j=b.distance,k=b.times||5,l=k*2+(h||g?1:0),m=b.duration/l,n=b.easing,o=i==="up"||i==="down"?"top":"left",p=i==="up"||i==="left",q,r,s,t=d.queue(),u=t.length;if(h||g){e.push("opacity")}a.effects.save(d,e);d.show();a.effects.createWrapper(d);if(!j){j=d[o==="top"?"outerHeight":"outerWidth"]()/3}if(h){s={opacity:1};s[o]=0;d.css("opacity",0).css(o,p?-j*2:j*2).animate(s,m,n)}if(g){j=j/Math.pow(2,k-1)}s={};s[o]=0;for(q=0;q<k;q++){r={};r[o]=(p?"-=":"+=")+j;d.animate(r,m,n).animate(s,m,n);j=g?j*2:j/2}if(g){r={opacity:0};r[o]=(p?"-=":"+=")+j;d.animate(r,m,n)}d.queue(function(){if(g){d.hide()}a.effects.restore(d,e);a.effects.removeWrapper(d);c()});if(u>1){t.splice.apply(t,[1,0].concat(t.splice(u,l+1)))}d.dequeue()};var I=a.effects.effect.clip=function(b,c){var d=a(this),e=["position","top","bottom","left","right","height","width"],f=a.effects.setMode(d,b.mode||"hide"),g=f==="show",h=b.direction||"vertical",i=h==="vertical",j=i?"height":"width",k=i?"top":"left",l={},m,n,o;a.effects.save(d,e);d.show();m=a.effects.createWrapper(d).css({overflow:"hidden"});n=d[0].tagName==="IMG"?m:d;o=n[j]();if(g){n.css(j,0);n.css(k,o/2)}l[j]=g?o:0;l[k]=g?0:o/2;n.animate(l,{queue:false,duration:b.duration,easing:b.easing,complete:function(){if(!g){d.hide()}a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};var J=a.effects.effect.drop=function(b,c){var d=a(this),e=["position","top","bottom","left","right","opacity","height","width"],f=a.effects.setMode(d,b.mode||"hide"),g=f==="show",h=b.direction||"left",i=h==="up"||h==="down"?"top":"left",j=h==="up"||h==="left"?"pos":"neg",k={opacity:g?1:0},l;a.effects.save(d,e);d.show();a.effects.createWrapper(d);l=b.distance||d[i==="top"?"outerHeight":"outerWidth"](true)/2;if(g){d.css("opacity",0).css(i,j==="pos"?-l:l)}k[i]=(g?j==="pos"?"+=":"-=":j==="pos"?"-=":"+=")+l;d.animate(k,{queue:false,duration:b.duration,easing:b.easing,complete:function(){if(f==="hide"){d.hide()}a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};var K=a.effects.effect.explode=function(b,c){var d=b.pieces?Math.round(Math.sqrt(b.pieces)):3,e=d,f=a(this),g=a.effects.setMode(f,b.mode||"hide"),h=g==="show",i=f.show().css("visibility","hidden").offset(),j=Math.ceil(f.outerWidth()/e),k=Math.ceil(f.outerHeight()/d),l=[],m,n,o,p,q,r;function s(){l.push(this);if(l.length===d*e){t()}}for(m=0;m<d;m++){p=i.top+m*k;r=m-(d-1)/2;for(n=0;n<e;n++){o=i.left+n*j;q=n-(e-1)/2;f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-n*j,top:-m*k}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:j,height:k,left:o+(h?q*j:0),top:p+(h?r*k:0),opacity:h?0:1}).animate({left:o+(h?0:q*j),top:p+(h?0:r*k),opacity:h?1:0},b.duration||500,b.easing,s)}}function t(){f.css({visibility:"visible"});a(l).remove();if(!h){f.hide()}c()}};var L=a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:false,duration:b.duration,easing:b.easing,complete:c})};var M=a.effects.effect.fold=function(b,c){var d=a(this),e=["position","top","bottom","left","right","height","width"],f=a.effects.setMode(d,b.mode||"hide"),g=f==="show",h=f==="hide",i=b.size||15,j=/([0-9]+)%/.exec(i),k=!!b.horizFirst,l=g!==k,m=l?["width","height"]:["height","width"],n=b.duration/2,o,p,q={},r={};a.effects.save(d,e);d.show();o=a.effects.createWrapper(d).css({overflow:"hidden"});p=l?[o.width(),o.height()]:[o.height(),o.width()];if(j){i=parseInt(j[1],10)/100*p[h?0:1]}if(g){o.css(k?{height:0,width:i}:{height:i,width:0})}q[m[0]]=g?p[0]:i;r[m[1]]=g?p[1]:0;o.animate(q,n,b.easing).animate(r,n,b.easing,function(){if(h){d.hide()}a.effects.restore(d,e);a.effects.removeWrapper(d);c()})};var N=a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),g={backgroundColor:d.css("backgroundColor")};if(f==="hide"){g.opacity=0}a.effects.save(d,e);d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(g,{queue:false,duration:b.duration,easing:b.easing,complete:function(){if(f==="hide"){d.hide()}a.effects.restore(d,e);c()}})};var O=a.effects.effect.size=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],j=["width","height","overflow"],k=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],m=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=a.effects.setMode(g,b.mode||"effect"),o=b.restore||n!=="effect",p=b.scale||"both",q=b.origin||["middle","center"],r=g.css("position"),s=o?h:i,t={height:0,width:0,outerHeight:0,outerWidth:0};if(n==="show"){g.show()}d={height:g.height(),width:g.width(),outerHeight:g.outerHeight(),outerWidth:g.outerWidth()};if(b.mode==="toggle"&&n==="show"){g.from=b.to||t;g.to=b.from||d}else{g.from=b.from||(n==="show"?t:d);g.to=b.to||(n==="hide"?t:d)}f={from:{y:g.from.height/d.height,x:g.from.width/d.width},to:{y:g.to.height/d.height,x:g.to.width/d.width}};if(p==="box"||p==="both"){if(f.from.y!==f.to.y){s=s.concat(l);g.from=a.effects.setTransition(g,l,f.from.y,g.from);g.to=a.effects.setTransition(g,l,f.to.y,g.to)}if(f.from.x!==f.to.x){s=s.concat(m);g.from=a.effects.setTransition(g,m,f.from.x,g.from);g.to=a.effects.setTransition(g,m,f.to.x,g.to)}}if(p==="content"||p==="both"){if(f.from.y!==f.to.y){s=s.concat(k).concat(j);g.from=a.effects.setTransition(g,k,f.from.y,g.from);g.to=a.effects.setTransition(g,k,f.to.y,g.to)}}a.effects.save(g,s);g.show();a.effects.createWrapper(g);g.css("overflow","hidden").css(g.from);if(q){e=a.effects.getBaseline(q,d);g.from.top=(d.outerHeight-g.outerHeight())*e.y;g.from.left=(d.outerWidth-g.outerWidth())*e.x;g.to.top=(d.outerHeight-g.to.outerHeight)*e.y;g.to.left=(d.outerWidth-g.to.outerWidth)*e.x}g.css(g.from);if(p==="content"||p==="both"){l=l.concat(["marginTop","marginBottom"]).concat(k);m=m.concat(["marginLeft","marginRight"]);j=h.concat(l).concat(m);g.find("*[width]").each(function(){var c=a(this),d={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()};if(o){a.effects.save(c,j)}c.from={height:d.height*f.from.y,width:d.width*f.from.x,outerHeight:d.outerHeight*f.from.y,outerWidth:d.outerWidth*f.from.x};c.to={height:d.height*f.to.y,width:d.width*f.to.x,outerHeight:d.height*f.to.y,outerWidth:d.width*f.to.x};if(f.from.y!==f.to.y){c.from=a.effects.setTransition(c,l,f.from.y,c.from);c.to=a.effects.setTransition(c,l,f.to.y,c.to)}if(f.from.x!==f.to.x){c.from=a.effects.setTransition(c,m,f.from.x,c.from);c.to=a.effects.setTransition(c,m,f.to.x,c.to)}c.css(c.from);c.animate(c.to,b.duration,b.easing,function(){if(o){a.effects.restore(c,j)}})})}g.animate(g.to,{queue:false,duration:b.duration,easing:b.easing,complete:function(){if(g.to.opacity===0){g.css("opacity",g.from.opacity)}if(n==="hide"){g.hide()}a.effects.restore(g,s);if(!o){if(r==="static"){g.css({position:"relative",top:g.to.top,left:g.to.left})}else{a.each(["top","left"],function(a,b){g.css(b,function(b,c){var d=parseInt(c,10),e=a?g.to.left:g.to.top;if(c==="auto"){return e+"px"}return d+e+"px"})})}}a.effects.removeWrapper(g);c()}})};var P=a.effects.effect.scale=function(b,c){var d=a(this),e=a.extend(true,{},b),f=a.effects.setMode(d,b.mode||"effect"),g=parseInt(b.percent,10)||(parseInt(b.percent,10)===0?0:f==="hide"?0:100),h=b.direction||"both",i=b.origin,j={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},k={y:h!=="horizontal"?g/100:1,x:h!=="vertical"?g/100:1};e.effect="size";e.queue=false;e.complete=c;if(f!=="effect"){e.origin=i||["middle","center"];e.restore=true}e.from=b.from||(f==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:j);e.to={height:j.height*k.y,width:j.width*k.x,outerHeight:j.outerHeight*k.y,outerWidth:j.outerWidth*k.x};if(e.fade){if(f==="show"){e.from.opacity=0;e.to.opacity=1}if(f==="hide"){e.from.opacity=1;e.to.opacity=0}}d.effect(e)};var Q=a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f=e==="hide",g=parseInt(b.percent,10)||150,h=g/100,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:false,fade:true,mode:e,complete:c,percent:f?g:100,from:f?i:{height:i.height*h,width:i.width*h,outerHeight:i.outerHeight*h,outerWidth:i.outerWidth*h}});d.effect(b)};var R=a.effects.effect.pulsate=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"show"),f=e==="show",g=e==="hide",h=f||e==="hide",i=(b.times||5)*2+(h?1:0),j=b.duration/i,k=0,l=d.queue(),m=l.length,n;if(f||!d.is(":visible")){d.css("opacity",0).show();k=1}for(n=1;n<i;n++){d.animate({opacity:k},j,b.easing);k=1-k}d.animate({opacity:k},j,b.easing);d.queue(function(){if(g){d.hide()}c()});if(m>1){l.splice.apply(l,[1,0].concat(l.splice(m,i+1)))}d.dequeue()};var S=a.effects.effect.shake=function(b,c){var d=a(this),e=["position","top","bottom","left","right","height","width"],f=a.effects.setMode(d,b.mode||"effect"),g=b.direction||"left",h=b.distance||20,i=b.times||3,j=i*2+1,k=Math.round(b.duration/j),l=g==="up"||g==="down"?"top":"left",m=g==="up"||g==="left",n={},o={},p={},q,r=d.queue(),s=r.length;a.effects.save(d,e);d.show();a.effects.createWrapper(d);n[l]=(m?"-=":"+=")+h;o[l]=(m?"+=":"-=")+h*2;p[l]=(m?"-=":"+=")+h*2;d.animate(n,k,b.easing);for(q=1;q<i;q++){d.animate(o,k,b.easing).animate(p,k,b.easing)}d.animate(o,k,b.easing).animate(n,k/2,b.easing).queue(function(){if(f==="hide"){d.hide()}a.effects.restore(d,e);a.effects.removeWrapper(d);c()});if(s>1){r.splice.apply(r,[1,0].concat(r.splice(s,j+1)))}d.dequeue()};var T=a.effects.effect.slide=function(b,c){var d=a(this),e=["position","top","bottom","left","right","width","height"],f=a.effects.setMode(d,b.mode||"show"),g=f==="show",h=b.direction||"left",i=h==="up"||h==="down"?"top":"left",j=h==="up"||h==="left",k,l={};a.effects.save(d,e);d.show();k=b.distance||d[i==="top"?"outerHeight":"outerWidth"](true);a.effects.createWrapper(d).css({overflow:"hidden"});if(g){d.css(i,j?isNaN(k)?"-"+k:-k:k)}l[i]=(g?j?"+=":"-=":j?"-=":"+=")+k;d.animate(l,{queue:false,duration:b.duration,easing:b.easing,complete:function(){if(f==="hide"){d.hide()}a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};var U=a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f=e.css("position")==="fixed",g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove();c()})};var V=a.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove()},value:function(a){if(a===undefined){return this.options.value}this.options.value=this._constrainedValue(a);this._refreshValue()},_constrainedValue:function(a){if(a===undefined){a=this.options.value}this.indeterminate=a===false;if(typeof a!=="number"){a=0}return this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value;this._super(a);this.options.value=this._constrainedValue(b);this._refreshValue()},_setOption:function(a,b){if(a==="max"){b=Math.max(this.min,b)}if(a==="disabled"){this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b)}this._super(a,b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).toggleClass("ui-corner-right",b===this.options.max).width(c.toFixed(0)+"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv){this.overlayDiv=a("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv)}}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null}}if(this.oldValue!==b){this.oldValue=b;this._trigger("change")}if(b===this.options.max){this._trigger("complete")}}});var W=a.widget("ui.selectable",a.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable");this.dragged=false;this.refresh=function(){b=a(c.options.filter,c.element[0]);b.addClass("ui-selectee");b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:false,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=b.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY];if(this.options.disabled){return}this.selectees=a(d.filter,this.element[0]);this._trigger("start",b);a(d.appendTo).append(this.helper);this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0});if(d.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=true;if(!b.metaKey&&!b.ctrlKey){d.$element.removeClass("ui-selected");d.selected=false;d.$element.addClass("ui-unselecting");d.unselecting=true;c._trigger("unselecting",b,{unselecting:d.element})}});a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");if(e){d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected");e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting");e.unselecting=!d;e.selecting=d;e.selected=d;if(d){c._trigger("selecting",b,{selecting:e.element})}else{c._trigger("unselecting",b,{unselecting:e.element})}return false}})},_mouseDrag:function(b){this.dragged=true;if(this.options.disabled){return}var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;if(f>h){c=h;h=f;f=c}if(g>i){c=i;i=g;g=c}this.helper.css({left:f,top:g,width:h-f,height:i-g});this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=false;if(!c||c.element===d.element[0]){return}if(e.tolerance==="touch"){j=!(c.left>h||c.right<f||c.top>i||c.bottom<g)}else if(e.tolerance==="fit"){j=c.left>f&&c.right<h&&c.top>g&&c.bottom<i}if(j){if(c.selected){c.$element.removeClass("ui-selected");c.selected=false}if(c.unselecting){c.$element.removeClass("ui-unselecting");c.unselecting=false}if(!c.selecting){c.$element.addClass("ui-selecting");c.selecting=true;d._trigger("selecting",b,{selecting:c.element})}}else{if(c.selecting){if((b.metaKey||b.ctrlKey)&&c.startselected){c.$element.removeClass("ui-selecting");c.selecting=false;c.$element.addClass("ui-selected");c.selected=true}else{c.$element.removeClass("ui-selecting");c.selecting=false;if(c.startselected){c.$element.addClass("ui-unselecting");c.unselecting=true}d._trigger("unselecting",b,{unselecting:c.element})}}if(c.selected){if(!b.metaKey&&!b.ctrlKey&&!c.startselected){c.$element.removeClass("ui-selected");c.selected=false;c.$element.addClass("ui-unselecting");c.unselecting=true;d._trigger("unselecting",b,{unselecting:c.element})}}}});return false},_mouseStop:function(b){var c=this;this.dragged=false;a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=false;d.startselected=false;c._trigger("unselected",b,{unselected:d.element})});a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=false;d.selected=true;d.startselected=true;c._trigger("selected",b,{selected:d.element})});this._trigger("stop",b);this.helper.remove();return false}});var X=a.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var a=this.element.uniqueId().attr("id");this.ids={element:a,button:a+"-button",menu:a+"-menu"};this._drawButton();this._drawMenu();if(this.options.disabled){this.disable()}},_drawButton:function(){var b=this;this.label=a("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(a){this.button.focus();a.preventDefault()}});this.element.hide();this.button=a("<span>",{class:"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);a("<span>",{class:"ui-icon "+this.options.icons.button}).prependTo(this.button);this.buttonText=a("<span>",{class:"ui-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){if(!b.menuItems){b._refreshMenu()}});this._hoverable(this.button);this._focusable(this.button)},_drawMenu:function(){var b=this;this.menu=a("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=a("<div>",{class:"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.menu({role:"listbox",select:function(a,c){a.preventDefault();b._setSelection();b._select(c.item.data("ui-selectmenu-item"),a)},focus:function(a,c){var d=c.item.data("ui-selectmenu-item");if(b.focusIndex!=null&&d.index!==b.focusIndex){b._trigger("focus",a,{item:d});if(!b.isOpen){b._select(d,a)}}b.focusIndex=d.index;b.button.attr("aria-activedescendant",b.menuItems.eq(d.index).attr("id"))}}).menu("instance");this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false};this.menuInstance._isDivider=function(){return false}},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());if(!this.options.width){this._resizeButton()}},_refreshMenu:function(){this.menu.empty();var a,b=this.element.find("option");if(!b.length){return}this._parseOptions(b);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup");a=this._getSelectedItem();this.menuInstance.focus(null,a);this._setAria(a.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"))},open:function(a){if(this.options.disabled){return}if(!this.menuItems){this._refreshMenu()}else{this.menu.find(".ui-state-focus").removeClass("ui-state-focus");this.menuInstance.focus(null,this._getSelectedItem())}this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",a)},_position:function(){this.menuWrap.position(a.extend({of:this.button},this.options.position))},close:function(a){if(!this.isOpen){return}this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",a)},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(b,c){var d=this,e="";a.each(c,function(c,f){if(f.optgroup!==e){a("<li>",{class:"ui-selectmenu-optgroup ui-menu-divider"+(f.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:f.optgroup}).appendTo(b);e=f.optgroup}d._renderItemData(b,f)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-selectmenu-item",b)},_renderItem:function(b,c){var d=a("<li>");if(c.disabled){d.addClass("ui-state-disabled")}this._setText(d,c.label);return d.appendTo(b)},_setText:function(a,b){if(b){a.text(b)}else{a.html("&#160;")}},_move:function(a,b){var c,d,e=".ui-menu-item";if(this.isOpen){c=this.menuItems.eq(this.focusIndex)}else{c=this.menuItems.eq(this.element[0].selectedIndex);e+=":not(.ui-state-disabled)"}if(a==="first"||a==="last"){d=c[a==="first"?"prevAll":"nextAll"](e).eq(-1)}else{d=c[a+"All"](e).eq(0)}if(d.length){this.menuInstance.focus(b,d)}},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(a){this[this.isOpen?"close":"open"](a)},_setSelection:function(){var a;if(!this.range){return}if(window.getSelection){a=window.getSelection();a.removeAllRanges();a.addRange(this.range)}else{this.range.select()}this.button.focus()},_documentClick:{mousedown:function(b){if(!this.isOpen){return}if(!a(b.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length){this.close(b)}}},_buttonEvents:{mousedown:function(){var a;if(window.getSelection){a=window.getSelection();if(a.rangeCount){this.range=a.getRangeAt(0)}}else{this.range=document.selection.createRange()}},click:function(a){this._setSelection();this._toggle(a)},keydown:function(b){var c=true;switch(b.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(b);c=false;break;case a.ui.keyCode.ENTER:if(this.isOpen){this._selectFocusedItem(b)}break;case a.ui.keyCode.UP:if(b.altKey){this._toggle(b)}else{this._move("prev",b)}break;case a.ui.keyCode.DOWN:if(b.altKey){this._toggle(b)}else{this._move("next",b)}break;case a.ui.keyCode.SPACE:if(this.isOpen){this._selectFocusedItem(b)}else{this._toggle(b)}break;case a.ui.keyCode.LEFT:this._move("prev",b);break;case a.ui.keyCode.RIGHT:this._move("next",b);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",b);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b);c=false}if(c){b.preventDefault()}}},_selectFocusedItem:function(a){var b=this.menuItems.eq(this.focusIndex);if(!b.hasClass("ui-state-disabled")){this._select(b.data("ui-selectmenu-item"),a)}},_select:function(a,b){var c=this.element[0].selectedIndex;this.element[0].selectedIndex=a.index;this._setText(this.buttonText,a.label);this._setAria(a);this._trigger("select",b,{item:a});if(a.index!==c){this._trigger("change",b,{item:a})}this.close(b)},_setAria:function(a){var b=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":b,"aria-activedescendant":b});this.menu.attr("aria-activedescendant",b)},_setOption:function(a,b){if(a==="icons"){this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(b.button)}this._super(a,b);if(a==="appendTo"){this.menuWrap.appendTo(this._appendTo())}if(a==="disabled"){this.menuInstance.option("disabled",b);this.button.toggleClass("ui-state-disabled",b).attr("aria-disabled",b);this.element.prop("disabled",b);if(b){this.button.attr("tabindex",-1);this.close()}else{this.button.attr("tabindex",0)}}if(a==="width"){this._resizeButton()}},_appendTo:function(){var b=this.options.appendTo;if(b){b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)}if(!b||!b[0]){b=this.element.closest(".ui-front")}if(!b.length){b=this.document[0].body}return b},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var a=this.options.width;if(!a){a=this.element.show().outerWidth();this.element.hide()}this.button.outerWidth(a)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(b){var c=[];b.each(function(b,d){var e=a(d),f=e.parent("optgroup");c.push({element:e,index:b,value:e.val(),label:e.text(),optgroup:f.attr("label")||"",disabled:f.prop("disabled")||e.prop("disabled")})});this.items=c},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element)}});var Y=a.widget("ui.slider",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",g=[];c=d.values&&d.values.length||1;if(e.length>c){e.slice(c).remove();e=e.slice(0,c)}for(b=e.length;b<c;b++){g.push(f)}this.handles=e.add(a(g.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";if(b.range){if(b.range===true){if(!b.values){b.values=[this._valueMin(),this._valueMin()]}else if(b.values.length&&b.values.length!==2){b.values=[b.values[0],b.values[0]]}else if(a.isArray(b.values)){b.values=b.values.slice(0)}}if(!this.range||!this.range.length){this.range=a("<div></div>").appendTo(this.element);c="ui-slider-range"+" ui-widget-header ui-corner-all"}else{this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""})}this.range.addClass(c+(b.range==="min"||b.range==="max"?" ui-slider-range-"+b.range:""))}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range){this.range.remove()}this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;if(l.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c={x:b.pageX,y:b.pageY};d=this._normValueFromMouse(c);e=this._valueMax()-this._valueMin()+1;this.handles.each(function(b){var c=Math.abs(d-k.values(b));if(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min)){e=c;f=a(this);g=b}});h=this._start(b,g);if(h===false){return false}this._mouseSliding=true;this._handleIndex=g;f.addClass("ui-state-active").focus();i=f.offset();j=!a(b.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(b,g,d)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);this._slide(a,this._handleIndex,c);return false},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;if(this.orientation==="horizontal"){b=this.elementSize.width;c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{b=this.elementSize.height;c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}d=c/b;if(d>1){d=1}if(d<0){d=0}if(this.orientation==="vertical"){d=1-d}
e=this._valueMax()-this._valueMin();f=this._valueMin()+d*e;return this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);c.values=this.values()}return this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;if(this.options.values&&this.options.values.length){d=this.values(b?0:1);if(this.options.values.length===2&&this.options.range===true&&(b===0&&c>d||b===1&&c<d)){c=d}if(c!==this.values(b)){e=this.values();e[b]=c;f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e});d=this.values(b?0:1);if(f!==false){this.values(b,c)}}}else{if(c!==this.value()){f=this._trigger("slide",a,{handle:this.handles[b],value:c});if(f!==false){this.value(c)}}}},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);c.values=this.values()}this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);c.values=this.values()}this._lastChangedValue=b;this._trigger("change",a,c)}},value:function(a){if(arguments.length){this.options.value=this._trimAlignValue(a);this._refreshValue();this._change(null,0);return}return this._value()},values:function(b,c){var d,e,f;if(arguments.length>1){this.options.values[b]=this._trimAlignValue(c);this._refreshValue();this._change(null,b);return}if(arguments.length){if(a.isArray(arguments[0])){d=this.options.values;e=arguments[0];for(f=0;f<d.length;f+=1){d[f]=this._trimAlignValue(e[f]);this._change(null,f)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(b)}else{return this.value()}}}else{return this._values()}},_setOption:function(b,c){var d,e=0;if(b==="range"&&this.options.range===true){if(c==="min"){this.options.value=this._values(0);this.options.values=null}else if(c==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}if(a.isArray(this.options.values)){e=this.options.values.length}if(b==="disabled"){this.element.toggleClass("ui-state-disabled",!!c)}this._super(b,c);switch(b){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();this.handles.css(c==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(d=0;d<e;d+=1){this._change(null,d)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_value:function(){var a=this.options.value;a=this._trimAlignValue(a);return a},_values:function(a){var b,c,d;if(arguments.length){b=this.options.values[a];b=this._trimAlignValue(b);return b}else if(this.options.values&&this.options.values.length){c=this.options.values.slice();for(d=0;d<c.length;d+=1){c[d]=this._trimAlignValue(c[d])}return c}else{return[]}},_trimAlignValue:function(a){if(a<=this._valueMin()){return this._valueMin()}if(a>=this._valueMax()){return this._valueMax()}var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;if(Math.abs(c)*2>=b){d+=c>0?b:-b}return parseFloat(d.toFixed(5))},_calculateNewMax:function(){var a=this.options.max,b=this._valueMin(),c=this.options.step,d=Math.floor(+(a-b).toFixed(this._precision())/c)*c;a=d+b;this.max=parseFloat(a.toFixed(this._precision()))},_precision:function(){var a=this._precisionOf(this.options.step);if(this.options.min!==null){a=Math.max(a,this._precisionOf(this.options.min))}return a},_precisionOf:function(a){var b=a.toString(),c=b.indexOf(".");return c===-1?0:b.length-c-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=!this._animateOff?h.animate:false,k={};if(this.options.values&&this.options.values.length){this.handles.each(function(d){c=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100;k[i.orientation==="horizontal"?"left":"bottom"]=c+"%";a(this).stop(1,1)[j?"animate":"css"](k,h.animate);if(i.options.range===true){if(i.orientation==="horizontal"){if(d===0){i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate)}if(d===1){i.range[j?"animate":"css"]({width:c-b+"%"},{queue:false,duration:h.animate})}}else{if(d===0){i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate)}if(d===1){i.range[j?"animate":"css"]({height:c-b+"%"},{queue:false,duration:h.animate})}}}b=c})}else{d=this.value();e=this._valueMin();f=this._valueMax();c=f!==e?(d-e)/(f-e)*100:0;k[this.orientation==="horizontal"?"left":"bottom"]=c+"%";this.handle.stop(1,1)[j?"animate":"css"](k,h.animate);if(g==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate)}if(g==="max"&&this.orientation==="horizontal"){this.range[j?"animate":"css"]({width:100-c+"%"},{queue:false,duration:h.animate})}if(g==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate)}if(g==="max"&&this.orientation==="vertical"){this.range[j?"animate":"css"]({height:100-c+"%"},{queue:false,duration:h.animate})}}},_handleEvents:{keydown:function(b){var c,d,e,f,g=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:b.preventDefault();if(!this._keySliding){this._keySliding=true;a(b.target).addClass("ui-state-active");c=this._start(b,g);if(c===false){return}}break}f=this.options.step;if(this.options.values&&this.options.values.length){d=e=this.values(g)}else{d=e=this.value()}switch(b.keyCode){case a.ui.keyCode.HOME:e=this._valueMin();break;case a.ui.keyCode.END:e=this._valueMax();break;case a.ui.keyCode.PAGE_UP:e=this._trimAlignValue(d+(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.PAGE_DOWN:e=this._trimAlignValue(d-(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(d===this._valueMax()){return}e=this._trimAlignValue(d+f);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d===this._valueMin()){return}e=this._trimAlignValue(d-f);break}this._slide(b,g,e)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(b,c);this._change(b,c);a(b.target).removeClass("ui-state-active")}}}});var Z=a.widget("ui.sortable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&a<b+c},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(a,b){this._super(a,b);if(a==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");a.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--){this.items[a].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(b,c){var d=null,e=false,f=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(b);a(b.target).parents().each(function(){if(a.data(this,f.widgetName+"-item")===f){d=a(this);return false}});if(a.data(b.target,f.widgetName+"-item")===f){d=a(b.target)}if(!d){return false}if(this.options.handle&&!c){a(this.options.handle,d).find("*").addBack().each(function(){if(this===b.target){e=true}});if(!e){return false}}this.currentItem=d;this._removeCurrentsFromItems();return true},_mouseStart:function(b,c,d){var e,f,g=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(g.containment){this._setContainment()}if(g.cursor&&g.cursor!=="auto"){f=this.document.find("body");this.storedCursor=f.css("cursor");f.css("cursor",g.cursor);this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)}if(g.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",g.opacity)}if(g.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",g.zIndex)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",b,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!d){for(e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("activate",b,this._uiHash(this))}}if(a.ui.ddmanager){a.ui.ddmanager.current=this}if(a.ui.ddmanager&&!g.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,b)}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(b);return true},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=false;this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity){this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed}else if(b.pageY-this.overflowOffset.top<g.scrollSensitivity){this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity){this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed}else if(b.pageX-this.overflowOffset.left<g.scrollSensitivity){this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed}}else{if(b.pageY-this.document.scrollTop()<g.scrollSensitivity){h=this.document.scrollTop(this.document.scrollTop()-g.scrollSpeed)}else if(this.window.height()-(b.pageY-this.document.scrollTop())<g.scrollSensitivity){h=this.document.scrollTop(this.document.scrollTop()+g.scrollSpeed)}if(b.pageX-this.document.scrollLeft()<g.scrollSensitivity){h=this.document.scrollLeft(this.document.scrollLeft()-g.scrollSpeed)}else if(this.window.width()-(b.pageX-this.document.scrollLeft())<g.scrollSensitivity){h=this.document.scrollLeft(this.document.scrollLeft()+g.scrollSpeed)}}if(h!==false&&a.ui.ddmanager&&!g.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,b)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(c=this.items.length-1;c>=0;c--){d=this.items[c];e=d.item[0];f=this._intersectsWithPointer(d);if(!f){continue}if(d.instance!==this.currentContainer){continue}if(e!==this.currentItem[0]&&this.placeholder[f===1?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&(this.options.type==="semi-dynamic"?!a.contains(this.element[0],e):true)){this.direction=f===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(d)){this._rearrange(b,d)}else{break}this._trigger("change",b,this._uiHash());break}}this._contactContainers(b);if(a.ui.ddmanager){a.ui.ddmanager.drag(this,b)}this._trigger("sort",b,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(b,c){if(!b){return}if(a.ui.ddmanager&&!this.options.dropBehaviour){a.ui.ddmanager.drop(this,b)}if(this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};if(!f||f==="x"){g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!f||f==="y"){g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=true;a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else{this._clear(b,c)}return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var b=this.containers.length-1;b>=0;b--){this.containers[b]._trigger("deactivate",null,this._uiHash(this));if(this.containers[b].containerCache.over){this.containers[b]._trigger("out",null,this._uiHash(this));this.containers[b].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){a(this.domPosition.prev).after(this.currentItem)}else{a(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];b=b||{};a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);if(c){d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}});if(!d.length&&b.key){d.push(b.key+"=")}return d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];b=b||{};c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")});return d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=this.options.axis==="x"||d+j>h&&d+j<i,m=this.options.axis==="y"||b+k>f&&b+k<g,n=l&&m;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]){return n}else{return f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i}},_intersectsWithPointer:function(a){var b=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),c=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),d=b&&c,e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();if(!d){return false}return this.floating?f&&f==="right"||e==="down"?2:1:e&&(e==="down"?2:1)},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();if(this.floating&&e){return e==="right"&&c||e==="left"&&!c}else{return d&&(d==="down"&&b||d==="up"&&!b)}},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!==0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!==0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c,d,e,f,g=[],h=[],i=this._connectWith();if(i&&b){for(c=i.length-1;c>=0;c--){e=a(i[c],this.document[0]);for(d=e.length-1;d>=0;d--){f=a.data(e[d],this.widgetFullName);if(f&&f!==this&&!f.options.disabled){h.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f])}}}}h.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function j(){g.push(this)}for(c=h.length-1;c>=0;c--){h[c][0].each(j)}return a(g)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;c<b.length;c++){if(b[c]===a.item[0]){return false}}return true})},_refreshItems:function(b){this.items=[];this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready){for(c=m.length-1;c>=0;c--){e=a(m[c],this.document[0]);for(d=e.length-1;d>=0;d--){f=a.data(e[d],this.widgetFullName);if(f&&f!==this&&!f.options.disabled){l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]);this.containers.push(f)}}}}for(c=l.length-1;c>=0;c--){g=l[c][1];h=l[c][0];for(d=0,j=h.length;d<j;d++){i=a(h[d]);i.data(this.widgetName+"-item",g);k.push({item:i,instance:g,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var c,d,e,f;for(c=this.items.length-1;c>=0;c--){d=this.items[c];if(d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]){continue}e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;if(!b){d.width=e.outerWidth();d.height=e.outerHeight()}f=e.offset();d.left=f.left;d.top=f.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(c=this.containers.length-1;c>=0;c--){f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left;this.containers[c].containerCache.top=f.top;this.containers[c].containerCache.width=this.containers[c].element.outerWidth();this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}}return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;if(!d.placeholder||d.placeholder.constructor===String){c=d.placeholder;d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");if(d==="tbody"){b._createTrPlaceholder(b.currentItem.find("tr").eq(0),a("<tr>",b.document[0]).appendTo(e))}else if(d==="tr"){b._createTrPlaceholder(b.currentItem,e)}else if(d==="img"){e.attr("src",b.currentItem.attr("src"))}if(!c){e.css("visibility","hidden")}return e},update:function(a,e){if(c&&!d.forcePlaceholderSize){return}if(!e.height()){e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10))}if(!e.width()){e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}}b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);d.placeholder.update(b,b.placeholder)},_createTrPlaceholder:function(b,c){var d=this;b.children().each(function(){a("<td>&#160;</td>",d.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(c)})},_contactContainers:function(b){var c,d,e,f,g,h,i,j,k,l,m=null,n=null;for(c=this.containers.length-1;c>=0;c--){if(a.contains(this.currentItem[0],this.containers[c].element[0])){continue}if(this._intersectsWith(this.containers[c].containerCache)){if(m&&a.contains(this.containers[c].element[0],m.element[0])){continue}m=this.containers[c];n=c}else{if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",b,this._uiHash(this));this.containers[c].containerCache.over=0}}}if(!m){return}if(this.containers.length===1){if(!this.containers[n].containerCache.over){this.containers[n]._trigger("over",b,this._uiHash(this));this.containers[n].containerCache.over=1}}else{e=1e4;f=null;k=m.floating||this._isFloating(this.currentItem);g=k?"left":"top";h=k?"width":"height";l=k?"clientX":"clientY";for(d=this.items.length-1;d>=0;d--){if(!a.contains(this.containers[n].element[0],this.items[d].item[0])){continue}if(this.items[d].item[0]===this.currentItem[0]){continue}i=this.items[d].item.offset()[g];j=false;if(b[l]-i>this.items[d][h]/2){j=true}if(Math.abs(b[l]-i)<e){e=Math.abs(b[l]-i);f=this.items[d];this.direction=j?"up":"down"}}if(!f&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[n]){if(!this.currentContainer.containerCache.over){this.containers[n]._trigger("over",b,this._uiHash());this.currentContainer.containerCache.over=1}return}f?this._rearrange(b,f,null,true):this._rearrange(b,null,this.containers[n].element,true);this._trigger("change",b,this._uiHash());this.containers[n]._trigger("change",b,this._uiHash(this));this.currentContainer=this.containers[n];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[n]._trigger("over",b,this._uiHash(this));this.containers[n].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):c.helper==="clone"?this.currentItem.clone():this.currentItem;if(!d.parents("body").length){a(c.appendTo!=="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0])}if(d[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!d[0].style.width||c.forceHelperSize){d.width(this.currentItem.width())}if(!d[0].style.height||c.forceHelperSize){d.height(this.currentItem.height())}return d},_adjustOffsetFromHelper:function(b){if(typeof b==="string"){b=b.split(" ")}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left"in b){this.offset.click.left=b.left+this.margins.left}if("right"in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if("top"in b){this.offset.click.top=b.top+this.margins.top}if("bottom"in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&a.ui.ie){b={top:0,left:0}}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;if(e.containment==="parent"){e.containment=this.helper[0].parentNode}if(e.containment==="document"||e.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(e.containment==="document"?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(e.containment)){b=a(e.containment)[0];c=a(e.containment).offset();d=a(b).css("overflow")!=="hidden";this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){if(!c){c=this.position}var d=b==="absolute"?1:-1,e=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=/(html|body)/i.test(h[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(b.pageX-this.offset.click.left<this.containment[0]){f=this.containment[0]+this.offset.click.left}if(b.pageY-this.offset.click.top<this.containment[1]){g=this.containment[1]+this.offset.click.top}if(b.pageX-this.offset.click.left>this.containment[2]){f=this.containment[2]+this.offset.click.left}if(b.pageY-this.offset.click.top>this.containment[3]){g=this.containment[3]+this.offset.click.top}}if(e.grid){c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1];g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c;d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0];f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?b.item[0]:b.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){if(e===this.counter){this.refreshPositions(!d)}})},_clear:function(a,b){this.reverting=false;var c,d=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(c in this._storedCSS){if(this._storedCSS[c]==="auto"||this._storedCSS[c]==="static"){this._storedCSS[c]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!b){d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!b){d.push(function(a){this._trigger("update",a,this._uiHash())})}if(this!==this.currentContainer){if(!b){d.push(function(a){this._trigger("remove",a,this._uiHash())});d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer));d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer))}}function e(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}for(c=this.containers.length-1;c>=0;c--){if(!b){d.push(e("deactivate",this,this.containers[c]))}if(this.containers[c].containerCache.over){d.push(e("out",this,this.containers[c]));this.containers[c].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(!b){this._trigger("beforeStop",a,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!b){for(c=0;c<d.length;c++){d[c].call(this,a)}this._trigger("stop",a,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){if(a.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,
offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}});function $(a){return function(){var b=this.element.val();a.apply(this,arguments);this._refresh();if(b!==this.element.val()){this._trigger("change")}}}var _=a.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(this.value()!==""){this._value(this.element.val(),true)}this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},c=this.element;a.each(["min","max","step"],function(a,d){var e=c.attr(d);if(e!==undefined&&e.length){b[d]=e}});return b},_events:{keydown:function(a){if(this._start(a)&&this._keydown(a)){a.preventDefault()}},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){if(this.cancelBlur){delete this.cancelBlur;return}this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("change",a)}},mousewheel:function(a,b){if(!b){return}if(!this.spinning&&!this._start(a)){return false}this._spin((b>0?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning){this._stop(a)}},100);a.preventDefault()},"mousedown .ui-spinner-button":function(b){var c;c=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();function d(){var a=this.element[0]===this.document[0].activeElement;if(!a){this.element.focus();this.previous=c;this._delay(function(){this.previous=c})}}b.preventDefault();d.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;d.call(this)});if(this._start(b)===false){return}this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){if(!a(b.currentTarget).hasClass("ui-state-active")){return}if(this._start(b)===false){return false}this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");if(this.buttons.height()>Math.ceil(a.height()*.5)&&a.height()>0){a.height(a.height())}if(this.options.disabled){this.disable()}},_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:this._repeat(null,1,b);return true;case d.DOWN:this._repeat(null,-1,b);return true;case d.PAGE_UP:this._repeat(null,c.page,b);return true;case d.PAGE_DOWN:this._repeat(null,-c.page,b);return true}return false},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return""+"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>"+"<span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(a){if(!this.spinning&&this._trigger("start",a)===false){return false}if(!this.counter){this.counter=1}this.spinning=true;return true},_repeat:function(a,b,c){a=a||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,b,c)},a);this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;if(!this.counter){this.counter=1}c=this._adjustValue(c+a*this._increment(this.counter));if(!this.spinning||this._trigger("spin",b,{value:c})!==false){this._value(c);this.counter++}},_increment:function(b){var c=this.options.incremental;if(c){return a.isFunction(c)?c(b):Math.floor(b*b*b/5e4-b*b/500+17*b/200+1)}return 1},_precision:function(){var a=this._precisionOf(this.options.step);if(this.options.min!==null){a=Math.max(a,this._precisionOf(this.options.min))}return a},_precisionOf:function(a){var b=a.toString(),c=b.indexOf(".");return c===-1?0:b.length-c-1},_adjustValue:function(a){var b,c,d=this.options;b=d.min!==null?d.min:0;c=a-b;c=Math.round(c/d.step)*d.step;a=b+c;a=parseFloat(a.toFixed(this._precision()));if(d.max!==null&&a>d.max){return d.max}if(d.min!==null&&a<d.min){return d.min}return a},_stop:function(a){if(!this.spinning){return}clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",a)},_setOption:function(a,b){if(a==="culture"||a==="numberFormat"){var c=this._parse(this.element.val());this.options[a]=b;this.element.val(this._format(c));return}if(a==="max"||a==="min"||a==="step"){if(typeof b==="string"){b=this._parse(b)}}if(a==="icons"){this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(b.up);this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(b.down)}this._super(a,b);if(a==="disabled"){this.widget().toggleClass("ui-state-disabled",!!b);this.element.prop("disabled",!!b);this.buttons.button(b?"disable":"enable")}},_setOptions:$(function(a){this._super(a)}),_parse:function(a){if(typeof a==="string"&&a!==""){a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a}return a===""||isNaN(a)?null:a},_format:function(a){if(a===""){return""}return window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var a=this.value();if(a===null){return false}return a===this._adjustValue(a)},_value:function(a,b){var c;if(a!==""){c=this._parse(a);if(c!==null){if(!b){c=this._adjustValue(c)}a=this._format(c)}}this.element.val(a);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:$(function(a){this._stepUp(a)}),_stepUp:function(a){if(this._start()){this._spin((a||1)*this.options.step);this._stop()}},stepDown:$(function(a){this._stepDown(a)}),_stepDown:function(a){if(this._start()){this._spin((a||1)*-this.options.step);this._stop()}},pageUp:$(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:$(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){if(!arguments.length){return this._parse(this.element.val())}$(this._value).call(this,a)},widget:function(){return this.uiSpinner}});var aa=a.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=/#.*$/;return function(b){var c,d;b=b.cloneNode(false);c=b.href.replace(a,"");d=location.href.replace(a,"");try{c=decodeURIComponent(c)}catch(a){}try{d=decodeURIComponent(d)}catch(a){}return b.hash.length>1&&c===d}}(),_create:function(){var b=this,c=this.options;this.running=false;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible);this._processTabs();c.active=this._initialActive();if(a.isArray(c.disabled)){c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()}if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(c.active)}else{this.active=a()}this._refresh();if(this.active.length){this.load(c.active)}},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);if(b===null){if(d){this.tabs.each(function(c,e){if(a(e).attr("aria-controls")===d){b=c;return false}})}if(b===null){b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))}if(b===null||b===-1){b=this.tabs.length?0:false}}if(b!==false){b=this.tabs.index(this.tabs.eq(b));if(b===-1){b=c?false:0}}if(!c&&b===false&&this.anchors.length){b=0}return b},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?a():this._getPanelForTab(this.active)}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=true;if(this._handlePageNav(b)){return}switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=false;d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:b.preventDefault();clearTimeout(this.activating);this._activate(d);return;case a.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(d===this.options.active?false:d);return;default:return}b.preventDefault();clearTimeout(this.activating);d=this._focusNextTab(d,e);if(!b.ctrlKey&&!b.metaKey){c.attr("aria-selected","false");this.tabs.eq(d).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",d)},this.delay)}},_panelKeydown:function(b){if(this._handlePageNav(b)){return}if(b.ctrlKey&&b.keyCode===a.ui.keyCode.UP){b.preventDefault();this.active.focus()}},_handlePageNav:function(b){if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(b,c){var d=this.tabs.length-1;function e(){if(b>d){b=0}if(b<0){b=d}return b}while(a.inArray(e(),this.options.disabled)!==-1){b=c?b+1:b-1}return b},_focusNextTab:function(a,b){a=this._findNextTab(a,b);this.tabs.eq(a).focus();return a},_setOption:function(a,b){if(a==="active"){this._activate(b);return}if(a==="disabled"){this._setupDisabled(b);return}this._super(a,b);if(a==="collapsible"){this.element.toggleClass("ui-tabs-collapsible",b);if(!b&&this.options.active===false){this._activate(0)}}if(a==="event"){this._setupEvents(b)}if(a==="heightStyle"){this._setupHeightStyle(b)}},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)});this._processTabs();if(b.active===false||!this.anchors.length){b.active=false;this.active=a()}else if(this.active.length&&!a.contains(this.tablist[0],this.active[0])){if(this.tabs.length===b.disabled.length){b.active=false;this.active=a()}else{this._activate(this._findNextTab(Math.max(0,b.active-1),false))}}else{b.active=this.tabs.index(this.active)}this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0)}else{this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})}},_processTabs:function(){var b=this,c=this.tabs,d=this.anchors,e=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(b){if(a(this).is(".ui-state-disabled")){b.preventDefault()}}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){if(a(this).closest("li").is(".ui-state-disabled")){this.blur()}});this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=a();this.anchors.each(function(c,d){var e,f,g,h=a(d).uniqueId().attr("id"),i=a(d).closest("li"),j=i.attr("aria-controls");if(b._isLocal(d)){e=d.hash;g=e.substring(1);f=b.element.find(b._sanitizeSelector(e))}else{g=i.attr("aria-controls")||a({}).uniqueId()[0].id;e="#"+g;f=b.element.find(e);if(!f.length){f=b._createPanel(g);f.insertAfter(b.panels[c-1]||b.tablist)}f.attr("aria-live","polite")}if(f.length){b.panels=b.panels.add(f)}if(j){i.data("ui-tabs-aria-controls",j)}i.attr({"aria-controls":g,"aria-labelledby":h});f.attr("aria-labelledby",h)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel");if(c){this._off(c.not(this.tabs));this._off(d.not(this.anchors));this._off(e.not(this.panels))}},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",true)},_setupDisabled:function(b){if(a.isArray(b)){if(!b.length){b=false}else if(b.length===this.anchors.length){b=true}}for(var c=0,d;d=this.tabs[c];c++){if(b===true||a.inArray(c,b)!==-1){a(d).addClass("ui-state-disabled").attr("aria-disabled","true")}else{a(d).removeClass("ui-state-disabled").removeAttr("aria-disabled")}}this.options.disabled=b},_setupEvents:function(b){var c={};if(b){a.each(b.split(" "),function(a,b){c[b]="_eventHandler"})}this._off(this.anchors.add(this.tabs).add(this.panels));this._on(true,this.anchors,{click:function(a){a.preventDefault()}});this._on(this.anchors,c);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();if(b==="fill"){c=d.height();c-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");if(d==="absolute"||d==="fixed"){return}c-=b.outerHeight(true)});this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(true)});this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else if(b==="auto"){c=0;this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c)}},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=!d.length?a():this._getPanelForTab(d),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault();if(f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===false){return}c.active=h?false:this.tabs.index(f);this.active=g?a():f;if(this.xhr){this.xhr.abort()}if(!j.length&&!i.length){a.error("jQuery UI Tabs: Mismatching fragment identifier.")}if(i.length){this.load(this.tabs.index(f),b)}this._toggle(b,k)},_toggle:function(b,c){var d=this,e=c.newPanel,f=c.oldPanel;this.running=true;function g(){d.running=false;d._trigger("activate",b,c)}function h(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(e.length&&d.options.show){d._show(e,d.options.show,g)}else{e.show();g()}}if(f.length&&this.options.hide){this._hide(f,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");h()})}else{c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");f.hide();h()}f.attr("aria-hidden","true");c.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});if(e.length&&f.length){c.oldTab.attr("tabIndex",-1)}else if(e.length){this.tabs.filter(function(){return a(this).attr("tabIndex")===0}).attr("tabIndex",-1)}e.attr("aria-hidden","false");c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);if(d[0]===this.active[0]){return}if(!d.length){d=this.active}c=d.find(".ui-tabs-anchor")[0];this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop})},_findActive:function(b){return b===false?a():this.tabs.eq(b)},_getIndex:function(a){if(typeof a==="string"){a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))}return a},_destroy:function(){if(this.xhr){this.xhr.abort()}this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tablist.unbind(this.eventNamespace);this.tabs.add(this.panels).each(function(){if(a.data(this,"ui-tabs-destroy")){a(this).remove()}else{a(this).removeClass("ui-state-default ui-state-active ui-state-disabled "+"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}});this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");if(c){b.attr("aria-controls",c).removeData("ui-tabs-aria-controls")}else{b.removeAttr("aria-controls")}});this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","")}},enable:function(b){var c=this.options.disabled;if(c===false){return}if(b===undefined){c=false}else{b=this._getIndex(b);if(a.isArray(c)){c=a.map(c,function(a){return a!==b?a:null})}else{c=a.map(this.tabs,function(a,c){return c!==b?c:null})}}this._setupDisabled(c)},disable:function(b){var c=this.options.disabled;if(c===true){return}if(b===undefined){c=true}else{b=this._getIndex(b);if(a.inArray(b,c)!==-1){return}if(a.isArray(c)){c=a.merge([b],c).sort()}else{c=[b]}}this._setupDisabled(c)},load:function(b,c){b=this._getIndex(b);var d=this,e=this.tabs.eq(b),f=e.find(".ui-tabs-anchor"),g=this._getPanelForTab(e),h={tab:e,panel:g},i=function(a,b){if(b==="abort"){d.panels.stop(false,true)}e.removeClass("ui-tabs-loading");g.removeAttr("aria-busy");if(a===d.xhr){delete d.xhr}};if(this._isLocal(f[0])){return}this.xhr=a.ajax(this._ajaxSettings(f,c,h));if(this.xhr&&this.xhr.statusText!=="canceled"){e.addClass("ui-tabs-loading");g.attr("aria-busy","true");this.xhr.done(function(a,b,e){setTimeout(function(){g.html(a);d._trigger("load",c,h);i(e,b)},1)}).fail(function(a,b){setTimeout(function(){i(a,b)},1)})}},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}});var ba=a.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,tooltipClass:null,track:false,close:null,open:null},_addDescribedBy:function(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c);b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))},_removeDescribedBy:function(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);if(e!==-1){d.splice(e,1)}b.removeData("ui-tooltip-id");d=a.trim(d.join(" "));if(d){b.attr("aria-describedby",d)}else{b.removeAttr("aria-describedby")}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};if(this.options.disabled){this._disable()}this.liveRegion=a("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(b,c){var d=this;if(b==="disabled"){this[c?"_disable":"_enable"]();this.options[b]=c;return}this._super(b,c);if(b==="content"){a.each(this.tooltips,function(a,b){d._updateContent(b.element)})}},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d.element[0];b.close(e,true)});this.element.find(this.options.items).addBack().each(function(){var b=a(this);if(b.is("[title]")){b.data("ui-tooltip-title",b.attr("title")).removeAttr("title")}})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);if(b.data("ui-tooltip-title")){b.attr("title",b.data("ui-tooltip-title"))}})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);if(!d.length||d.data("ui-tooltip-id")){return}if(d.attr("title")){d.data("ui-tooltip-title",d.attr("title"))}d.data("ui-tooltip-open",true);if(b&&b.type==="mouseover"){d.parents().each(function(){var b=a(this),d;if(b.data("ui-tooltip-open")){d=a.Event("blur");d.target=d.currentTarget=this;c.close(d,true)}if(b.attr("title")){b.uniqueId();c.parents[this.id]={element:this,title:b.attr("title")};b.attr("title","")}})}this._registerCloseHandlers(b,d);this._updateContent(d,b)},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;if(typeof d==="string"){return this._open(b,a,d)}c=d.call(a[0],function(c){e._delay(function(){if(!a.data("ui-tooltip-open")){return}if(b){b.type=f}this._open(b,a,c)})});if(c){this._open(b,a,c)}},_open:function(b,c,d){var e,f,g,h,i=a.extend({},this.options.position);if(!d){return}e=this._find(c);if(e){e.tooltip.find(".ui-tooltip-content").html(d);return}if(c.is("[title]")){if(b&&b.type==="mouseover"){c.attr("title","")}else{c.removeAttr("title")}}e=this._tooltip(c);f=e.tooltip;this._addDescribedBy(c,f.attr("id"));f.find(".ui-tooltip-content").html(d);this.liveRegion.children().hide();if(d.clone){h=d.clone();h.removeAttr("id").find("[id]").removeAttr("id")}else{h=d}a("<div>").html(h).appendTo(this.liveRegion);function j(a){i.of=a;if(f.is(":hidden")){return}f.position(i)}if(this.options.track&&b&&/^mouse/.test(b.type)){this._on(this.document,{mousemove:j});j(b)}else{f.position(a.extend({of:c},this.options.position))}f.hide();this._show(f,this.options.show);if(this.options.show&&this.options.show.delay){g=this.delayedShow=setInterval(function(){if(f.is(":visible")){j(i.of);clearInterval(g)}},a.fx.interval)}this._trigger("open",b,{tooltip:f})},_registerCloseHandlers:function(b,c){var d={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var d=a.Event(b);d.currentTarget=c[0];this.close(d,true)}}};if(c[0]!==this.element[0]){d.remove=function(){this._removeTooltip(this._find(c).tooltip)}}if(!b||b.type==="mouseover"){d.mouseleave="close"}if(!b||b.type==="focusin"){d.focusout="close"}this._on(true,c,d)},close:function(b){var c,d=this,e=a(b?b.currentTarget:this.element),f=this._find(e);if(!f){e.removeData("ui-tooltip-open");return}c=f.tooltip;if(f.closing){return}clearInterval(this.delayedShow);if(e.data("ui-tooltip-title")&&!e.attr("title")){e.attr("title",e.data("ui-tooltip-title"))}this._removeDescribedBy(e);f.hiding=true;c.stop(true);this._hide(c,this.options.hide,function(){d._removeTooltip(a(this))});e.removeData("ui-tooltip-open");this._off(e,"mouseleave focusout keyup");if(e[0]!==this.element[0]){this._off(e,"remove")}this._off(this.document,"mousemove");if(b&&b.type==="mouseleave"){a.each(this.parents,function(b,c){a(c.element).attr("title",c.title);delete d.parents[b]})}f.closing=true;this._trigger("close",b,{tooltip:c});if(!f.hiding){f.closing=false}},_tooltip:function(b){var c=a("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),d=c.uniqueId().attr("id");a("<div>").addClass("ui-tooltip-content").appendTo(c);c.appendTo(this.document[0].body);return this.tooltips[d]={element:b,tooltip:c}},_find:function(a){var b=a.data("ui-tooltip-id");return b?this.tooltips[b]:null},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur"),f=d.element;e.target=e.currentTarget=f[0];b.close(e,true);a("#"+c).remove();if(f.data("ui-tooltip-title")){if(!f.attr("title")){f.attr("title",f.data("ui-tooltip-title"))}f.removeData("ui-tooltip-title")}});this.liveRegion.remove()}})});(function(a,b){typeof exports==="object"&&typeof module!=="undefined"?module.exports=b():typeof define==="function"&&define.amd?define(b):a.moment=b()})(this,function(){"use strict";var a;function b(){return a.apply(null,arguments)}function c(b){a=b}function d(a){return Object.prototype.toString.call(a)==="[object Array]"}function e(a){return a instanceof Date||Object.prototype.toString.call(a)==="[object Date]"}function f(a,b){var c=[],d;for(d=0;d<a.length;++d){c.push(b(a[d],d))}return c}function g(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function h(a,b){for(var c in b){if(g(b,c)){a[c]=b[c]}}if(g(b,"toString")){a.toString=b.toString}if(g(b,"valueOf")){a.valueOf=b.valueOf}return a}function i(a,b,c,d){return nb(a,b,c,d,true).utc()}function j(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function k(a){if(a._pf==null){a._pf=j()}return a._pf}function l(a){if(a._isValid==null){var b=k(a);a._isValid=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated;if(a._strict){a._isValid=a._isValid&&b.charsLeftOver===0&&b.unusedTokens.length===0&&b.bigHour===undefined}}return a._isValid}function m(a){var b=i(NaN);if(a!=null){h(k(b),a)}else{k(b).userInvalidated=true}return b}var n=b.momentProperties=[];function o(a,b){var c,d,e;if(typeof b._isAMomentObject!=="undefined"){a._isAMomentObject=b._isAMomentObject}if(typeof b._i!=="undefined"){a._i=b._i}if(typeof b._f!=="undefined"){a._f=b._f}if(typeof b._l!=="undefined"){a._l=b._l}if(typeof b._strict!=="undefined"){a._strict=b._strict}if(typeof b._tzm!=="undefined"){a._tzm=b._tzm}if(typeof b._isUTC!=="undefined"){a._isUTC=b._isUTC}if(typeof b._offset!=="undefined"){a._offset=b._offset}if(typeof b._pf!=="undefined"){a._pf=k(b)}if(typeof b._locale!=="undefined"){a._locale=b._locale}if(n.length>0){for(c in n){d=n[c];e=b[d];if(typeof e!=="undefined"){a[d]=e}}}return a}var p=false;function q(a){o(this,a);this._d=new Date(+a._d);if(p===false){p=true;b.updateOffset(this);p=false}}function r(a){return a instanceof q||a!=null&&a._isAMomentObject!=null}function s(a){var b=+a,c=0;if(b!==0&&isFinite(b)){if(b>=0){c=Math.floor(b)}else{c=Math.ceil(b)}}return c}function t(a,b,c){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0,g;for(g=0;g<d;g++){if(c&&a[g]!==b[g]||!c&&s(a[g])!==s(b[g])){f++}}return f+e}function u(){}var v={};var w;function x(a){return a?a.toLowerCase().replace("_","-"):a}function y(a){var b=0,c,d,e,f;while(b<a.length){f=x(a[b]).split("-");c=f.length;d=x(a[b+1]);d=d?d.split("-"):null;while(c>0){e=z(f.slice(0,c).join("-"));if(e){return e}if(d&&d.length>=c&&t(f,d,true)>=c-1){break}c--}b++}return null}function z(a){var b=null;if(!v[a]&&typeof module!=="undefined"&&module&&module.exports){try{b=w._abbr;require("./locale/"+a);A(b)}catch(a){}}return v[a]}function A(a,b){var c;if(a){if(typeof b==="undefined"){c=C(a)}else{c=B(a,b)}if(c){w=c}}return w._abbr}function B(a,b){if(b!==null){b.abbr=a;if(!v[a]){v[a]=new u}v[a].set(b);A(a);return v[a]}else{delete v[a];return null}}function C(a){var b;if(a&&a._locale&&a._locale._abbr){a=a._locale._abbr}if(!a){return w}if(!d(a)){b=z(a);if(b){return b}a=[a]}return y(a)}var D={};function E(a,b){var c=a.toLowerCase();D[c]=D[c+"s"]=D[b]=a}function F(a){return typeof a==="string"?D[a]||D[a.toLowerCase()]:undefined}function G(a){var b={},c,d;for(d in a){if(g(a,d)){c=F(d);if(c){b[c]=a[d]}}}return b}function H(a,c){return function(d){if(d!=null){J(this,a,d);b.updateOffset(this,c);return this}else{return I(this,a)}}}function I(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function J(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function K(a,b){var c;if(typeof a==="object"){for(c in a){this.set(c,a[c])}}else{a=F(a);if(typeof this[a]==="function"){return this[a](b)}}return this}function L(a,b,c){var d=""+Math.abs(a),e=a>=0;while(d.length<b){d="0"+d}return(e?c?"+":"":"-")+d}var M=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g;var N=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var O={};var P={};function Q(a,b,c,d){var e=d;if(typeof d==="string"){e=function(){return this[d]()}}if(a){P[a]=e}if(b){P[b[0]]=function(){return L(e.apply(this,arguments),b[1],b[2])}}if(c){P[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)}}}function R(a){if(a.match(/\[[\s\S]/)){return a.replace(/^\[|\]$/g,"")}return a.replace(/\\/g,"")}function S(a){var b=a.match(M),c,d;for(c=0,d=b.length;c<d;c++){if(P[b[c]]){b[c]=P[b[c]]}else{b[c]=R(b[c])}}return function(e){var f="";for(c=0;c<d;c++){f+=b[c]instanceof Function?b[c].call(e,a):b[c]}return f}}function T(a,b){if(!a.isValid()){return a.localeData().invalidDate()}b=U(b,a.localeData());if(!O[b]){O[b]=S(b)}return O[b](a)}function U(a,b){var c=5;function d(a){return b.longDateFormat(a)||a}N.lastIndex=0;while(c>=0&&N.test(a)){a=a.replace(N,d);N.lastIndex=0;c-=1}return a}var V=/\d/;var W=/\d\d/;var X=/\d{3}/;var Y=/\d{4}/;var Z=/[+-]?\d{6}/;var $=/\d\d?/;var _=/\d{1,3}/;var aa=/\d{1,4}/;var ba=/[+-]?\d{1,6}/;var ca=/\d+/;var da=/[+-]?\d+/;var ea=/Z|[+-]\d\d:?\d\d/gi;var fa=/[+-]?\d+(\.\d{1,3})?/;var ga=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var ha={};function ia(a,b,c){ha[a]=typeof b==="function"?b:function(a){return a&&c?c:b}}function ja(a,b){if(!g(ha,a)){return new RegExp(ka(a))}return ha[a](b._strict,b._locale)}function ka(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var la={};function ma(a,b){var c,d=b;if(typeof a==="string"){a=[a]}if(typeof b==="number"){d=function(a,c){c[b]=s(a)}}for(c=0;c<a.length;c++){la[a[c]]=d}}function na(a,b){ma(a,function(a,c,d,e){d._w=d._w||{};b(a,d._w,d,e)})}function oa(a,b,c){if(b!=null&&g(la,a)){la[a](b,c._a,c,a)}}var pa=0;var qa=1;var ra=2;var sa=3;var ta=4;var ua=5;var va=6;function wa(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}Q("M",["MM",2],"Mo",function(){return this.month()+1});Q("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});Q("MMMM",0,0,function(a){return this.localeData().months(this,a)});E("month","M");ia("M",$);ia("MM",$,W);ia("MMM",ga);ia("MMMM",ga);ma(["M","MM"],function(a,b){b[qa]=s(a)-1});ma(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);if(e!=null){b[qa]=e}else{k(c).invalidMonth=a}});var xa="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function ya(a){return this._months[a.month()]}var za="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Aa(a){return this._monthsShort[a.month()]}function Ba(a,b,c){var d,e,f;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(d=0;d<12;d++){e=i([2e3,d]);if(c&&!this._longMonthsParse[d]){this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i");this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")
}if(!c&&!this._monthsParse[d]){f="^"+this.months(e,"")+"|^"+this.monthsShort(e,"");this._monthsParse[d]=new RegExp(f.replace(".",""),"i")}if(c&&b==="MMMM"&&this._longMonthsParse[d].test(a)){return d}else if(c&&b==="MMM"&&this._shortMonthsParse[d].test(a)){return d}else if(!c&&this._monthsParse[d].test(a)){return d}}}function Ca(a,b){var c;if(typeof b==="string"){b=a.localeData().monthsParse(b);if(typeof b!=="number"){return a}}c=Math.min(a.date(),wa(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function Da(a){if(a!=null){Ca(this,a);b.updateOffset(this,true);return this}else{return I(this,"Month")}}function Ea(){return wa(this.year(),this.month())}function Fa(a){var b;var c=a._a;if(c&&k(a).overflow===-2){b=c[qa]<0||c[qa]>11?qa:c[ra]<1||c[ra]>wa(c[pa],c[qa])?ra:c[sa]<0||c[sa]>24||c[sa]===24&&(c[ta]!==0||c[ua]!==0||c[va]!==0)?sa:c[ta]<0||c[ta]>59?ta:c[ua]<0||c[ua]>59?ua:c[va]<0||c[va]>999?va:-1;if(k(a)._overflowDayOfYear&&(b<pa||b>ra)){b=ra}k(a).overflow=b}return a}function Ga(a){if(b.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+a)}}function Ha(a,b){var c=true,d=a+"\n"+(new Error).stack;return h(function(){if(c){Ga(d);c=false}return b.apply(this,arguments)},b)}var Ia={};function Ja(a,b){if(!Ia[a]){Ga(b);Ia[a]=true}}b.suppressDeprecationWarnings=false;var Ka=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var La=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]];var Ma=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]];var Na=/^\/?Date\((\-?\d+)/i;function Oa(a){var b,c,d=a._i,e=Ka.exec(d);if(e){k(a).iso=true;for(b=0,c=La.length;b<c;b++){if(La[b][1].exec(d)){a._f=La[b][0]+(e[6]||" ");break}}for(b=0,c=Ma.length;b<c;b++){if(Ma[b][1].exec(d)){a._f+=Ma[b][0];break}}if(d.match(ea)){a._f+="Z"}hb(a)}else{a._isValid=false}}function Pa(a){var c=Na.exec(a._i);if(c!==null){a._d=new Date(+c[1]);return}Oa(a);if(a._isValid===false){delete a._isValid;b.createFromInputFallback(a)}}b.createFromInputFallback=Ha("moment construction falls back to js Date. This is "+"discouraged and will be removed in upcoming major "+"release. Please refer to "+"https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});function Qa(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);if(a<1970){h.setFullYear(a)}return h}function Ra(a){var b=new Date(Date.UTC.apply(null,arguments));if(a<1970){b.setUTCFullYear(a)}return b}Q(0,["YY",2],0,function(){return this.year()%100});Q(0,["YYYY",4],0,"year");Q(0,["YYYYY",5],0,"year");Q(0,["YYYYYY",6,true],0,"year");E("year","y");ia("Y",da);ia("YY",$,W);ia("YYYY",aa,Y);ia("YYYYY",ba,Z);ia("YYYYYY",ba,Z);ma(["YYYY","YYYYY","YYYYYY"],pa);ma("YY",function(a,c){c[pa]=b.parseTwoDigitYear(a)});function Sa(a){return Ta(a)?366:365}function Ta(a){return a%4===0&&a%100!==0||a%400===0}b.parseTwoDigitYear=function(a){return s(a)+(s(a)>68?1900:2e3)};var Ua=H("FullYear",false);function Va(){return Ta(this.year())}Q("w",["ww",2],"wo","week");Q("W",["WW",2],"Wo","isoWeek");E("week","w");E("isoWeek","W");ia("w",$);ia("ww",$,W);ia("W",$);ia("WW",$,W);na(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=s(a)});function Wa(a,b,c){var d=c-b,e=c-a.day(),f;if(e>d){e-=7}if(e<d-7){e+=7}f=ob(a).add(e,"d");return{week:Math.ceil(f.dayOfYear()/7),year:f.year()}}function Xa(a){return Wa(a,this._week.dow,this._week.doy).week}var Ya={dow:0,doy:6};function Za(){return this._week.dow}function $a(){return this._week.doy}function _a(a){var b=this.localeData().week(this);return a==null?b:this.add((a-b)*7,"d")}function ab(a){var b=Wa(this,1,4).week;return a==null?b:this.add((a-b)*7,"d")}Q("DDD",["DDDD",3],"DDDo","dayOfYear");E("dayOfYear","DDD");ia("DDD",_);ia("DDDD",X);ma(["DDD","DDDD"],function(a,b,c){c._dayOfYear=s(a)});function bb(a,b,c,d,e){var f=Ra(a,0,1).getUTCDay();var g;var h;f=f===0?7:f;c=c!=null?c:e;g=e-f+(f>d?7:0)-(f<e?7:0);h=7*(b-1)+(c-e)+g+1;return{year:h>0?a:a-1,dayOfYear:h>0?h:Sa(a-1)+h}}function cb(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return a==null?b:this.add(a-b,"d")}function db(a,b,c){if(a!=null){return a}if(b!=null){return b}return c}function eb(a){var b=new Date;if(a._useUTC){return[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]}return[b.getFullYear(),b.getMonth(),b.getDate()]}function fb(a){var b,c,d=[],e,f;if(a._d){return}e=eb(a);if(a._w&&a._a[ra]==null&&a._a[qa]==null){gb(a)}if(a._dayOfYear){f=db(a._a[pa],e[pa]);if(a._dayOfYear>Sa(f)){k(a)._overflowDayOfYear=true}c=Ra(f,0,a._dayOfYear);a._a[qa]=c.getUTCMonth();a._a[ra]=c.getUTCDate()}for(b=0;b<3&&a._a[b]==null;++b){a._a[b]=d[b]=e[b]}for(;b<7;b++){a._a[b]=d[b]=a._a[b]==null?b===2?1:0:a._a[b]}if(a._a[sa]===24&&a._a[ta]===0&&a._a[ua]===0&&a._a[va]===0){a._nextDay=true;a._a[sa]=0}a._d=(a._useUTC?Ra:Qa).apply(null,d);if(a._tzm!=null){a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm)}if(a._nextDay){a._a[sa]=24}}function gb(a){var b,c,d,e,f,g,h;b=a._w;if(b.GG!=null||b.W!=null||b.E!=null){f=1;g=4;c=db(b.GG,a._a[pa],Wa(ob(),1,4).year);d=db(b.W,1);e=db(b.E,1)}else{f=a._locale._week.dow;g=a._locale._week.doy;c=db(b.gg,a._a[pa],Wa(ob(),f,g).year);d=db(b.w,1);if(b.d!=null){e=b.d;if(e<f){++d}}else if(b.e!=null){e=b.e+f}else{e=f}}h=bb(c,d,e,g,f);a._a[pa]=h.year;a._dayOfYear=h.dayOfYear}b.ISO_8601=function(){};function hb(a){if(a._f===b.ISO_8601){Oa(a);return}a._a=[];k(a).empty=true;var c=""+a._i,d,e,f,g,h,i=c.length,j=0;f=U(a._f,a._locale).match(M)||[];for(d=0;d<f.length;d++){g=f[d];e=(c.match(ja(g,a))||[])[0];if(e){h=c.substr(0,c.indexOf(e));if(h.length>0){k(a).unusedInput.push(h)}c=c.slice(c.indexOf(e)+e.length);j+=e.length}if(P[g]){if(e){k(a).empty=false}else{k(a).unusedTokens.push(g)}oa(g,e,a)}else if(a._strict&&!e){k(a).unusedTokens.push(g)}}k(a).charsLeftOver=i-j;if(c.length>0){k(a).unusedInput.push(c)}if(k(a).bigHour===true&&a._a[sa]<=12&&a._a[sa]>0){k(a).bigHour=undefined}a._a[sa]=ib(a._locale,a._a[sa],a._meridiem);fb(a);Fa(a)}function ib(a,b,c){var d;if(c==null){return b}if(a.meridiemHour!=null){return a.meridiemHour(b,c)}else if(a.isPM!=null){d=a.isPM(c);if(d&&b<12){b+=12}if(!d&&b===12){b=0}return b}else{return b}}function jb(a){var b,c,d,e,f;if(a._f.length===0){k(a).invalidFormat=true;a._d=new Date(NaN);return}for(e=0;e<a._f.length;e++){f=0;b=o({},a);if(a._useUTC!=null){b._useUTC=a._useUTC}b._f=a._f[e];hb(b);if(!l(b)){continue}f+=k(b).charsLeftOver;f+=k(b).unusedTokens.length*10;k(b).score=f;if(d==null||f<d){d=f;c=b}}h(a,c||b)}function kb(a){if(a._d){return}var b=G(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond];fb(a)}function lb(a){var b=a._i,c=a._f,f;a._locale=a._locale||C(a._l);if(b===null||c===undefined&&b===""){return m({nullInput:true})}if(typeof b==="string"){a._i=b=a._locale.preparse(b)}if(r(b)){return new q(Fa(b))}else if(d(c)){jb(a)}else if(c){hb(a)}else if(e(b)){a._d=b}else{mb(a)}f=new q(Fa(a));if(f._nextDay){f.add(1,"d");f._nextDay=undefined}return f}function mb(a){var c=a._i;if(c===undefined){a._d=new Date}else if(e(c)){a._d=new Date(+c)}else if(typeof c==="string"){Pa(a)}else if(d(c)){a._a=f(c.slice(0),function(a){return parseInt(a,10)});fb(a)}else if(typeof c==="object"){kb(a)}else if(typeof c==="number"){a._d=new Date(c)}else{b.createFromInputFallback(a)}}function nb(a,b,c,d,e){var f={};if(typeof c==="boolean"){d=c;c=undefined}f._isAMomentObject=true;f._useUTC=f._isUTC=e;f._l=c;f._i=a;f._f=b;f._strict=d;return lb(f)}function ob(a,b,c,d){return nb(a,b,c,d,false)}var pb=Ha("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=ob.apply(null,arguments);return a<this?this:a});var qb=Ha("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=ob.apply(null,arguments);return a>this?this:a});function rb(a,b){var c,e;if(b.length===1&&d(b[0])){b=b[0]}if(!b.length){return ob()}c=b[0];for(e=1;e<b.length;++e){if(b[e][a](c)){c=b[e]}}return c}function sb(){var a=[].slice.call(arguments,0);return rb("isBefore",a)}function tb(){var a=[].slice.call(arguments,0);return rb("isAfter",a)}function ub(a){var b=G(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+j*1e3+i*6e4+h*36e5;this._days=+g+f*7;this._months=+e+d*3+c*12;this._data={};this._locale=C();this._bubble()}function vb(a){return a instanceof ub}function wb(a,b){Q(a,0,0,function(){var a=this.utcOffset();var c="+";if(a<0){a=-a;c="-"}return c+L(~~(a/60),2)+b+L(~~a%60,2)})}wb("Z",":");wb("ZZ","");ia("Z",ea);ia("ZZ",ea);ma(["Z","ZZ"],function(a,b,c){c._useUTC=true;c._tzm=yb(a)});var xb=/([\+\-]|\d\d)/gi;function yb(a){var b=(a||"").match(ea)||[];var c=b[b.length-1]||[];var d=(c+"").match(xb)||["-",0,0];var e=+(d[1]*60)+s(d[2]);return d[0]==="+"?e:-e}function zb(a,c){var d,f;if(c._isUTC){d=c.clone();f=(r(a)||e(a)?+a:+ob(a))-+d;d._d.setTime(+d._d+f);b.updateOffset(d,false);return d}else{return ob(a).local()}return c._isUTC?ob(a).zone(c._offset||0):ob(a).local()}function Ab(a){return-Math.round(a._d.getTimezoneOffset()/15)*15}b.updateOffset=function(){};function Bb(a,c){var d=this._offset||0,e;if(a!=null){if(typeof a==="string"){a=yb(a)}if(Math.abs(a)<16){a=a*60}if(!this._isUTC&&c){e=Ab(this)}this._offset=a;this._isUTC=true;if(e!=null){this.add(e,"m")}if(d!==a){if(!c||this._changeInProgress){Tb(this,Ob(a-d,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;b.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?d:Ab(this)}}function Cb(a,b){if(a!=null){if(typeof a!=="string"){a=-a}this.utcOffset(a,b);return this}else{return-this.utcOffset()}}function Db(a){return this.utcOffset(0,a)}function Eb(a){if(this._isUTC){this.utcOffset(0,a);this._isUTC=false;if(a){this.subtract(Ab(this),"m")}}return this}function Fb(){if(this._tzm){this.utcOffset(this._tzm)}else if(typeof this._i==="string"){this.utcOffset(yb(this._i))}return this}function Gb(a){if(!a){a=0}else{a=ob(a).utcOffset()}return(this.utcOffset()-a)%60===0}function Hb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ib(){if(this._a){var a=this._isUTC?i(this._a):ob(this._a);return this.isValid()&&t(this._a,a.toArray())>0}return false}function Jb(){return!this._isUTC}function Kb(){return this._isUTC}function Lb(){return this._isUTC&&this._offset===0}var Mb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/;var Nb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function Ob(a,b){var c=a,d=null,e,f,h;if(vb(a)){c={ms:a._milliseconds,d:a._days,M:a._months}}else if(typeof a==="number"){c={};if(b){c[b]=a}else{c.milliseconds=a}}else if(!!(d=Mb.exec(a))){e=d[1]==="-"?-1:1;c={y:0,d:s(d[ra])*e,h:s(d[sa])*e,m:s(d[ta])*e,s:s(d[ua])*e,ms:s(d[va])*e}}else if(!!(d=Nb.exec(a))){e=d[1]==="-"?-1:1;c={y:Pb(d[2],e),M:Pb(d[3],e),d:Pb(d[4],e),h:Pb(d[5],e),m:Pb(d[6],e),s:Pb(d[7],e),w:Pb(d[8],e)}}else if(c==null){c={}}else if(typeof c==="object"&&("from"in c||"to"in c)){h=Rb(ob(c.from),ob(c.to));c={};c.ms=h.milliseconds;c.M=h.months}f=new ub(c);if(vb(a)&&g(a,"_locale")){f._locale=a._locale}return f}Ob.fn=ub.prototype;function Pb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Qb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+(b.year()-a.year())*12;if(a.clone().add(c.months,"M").isAfter(b)){--c.months}c.milliseconds=+b-+a.clone().add(c.months,"M");return c}function Rb(a,b){var c;b=zb(b,a);if(a.isBefore(b)){c=Qb(a,b)}else{c=Qb(b,a);c.milliseconds=-c.milliseconds;c.months=-c.months}return c}function Sb(a,b){return function(c,d){var e,f;if(d!==null&&!isNaN(+d)){Ja(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period).");f=c;c=d;d=f}c=typeof c==="string"?+c:c;e=Ob(c,d);Tb(this,e,a);return this}}function Tb(a,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=e==null?true:e;if(f){a._d.setTime(+a._d+f*d)}if(g){J(a,"Date",I(a,"Date")+g*d)}if(h){Ca(a,I(a,"Month")+h*d)}if(e){b.updateOffset(a,g||h)}}var Ub=Sb(1,"add");var Vb=Sb(-1,"subtract");function Wb(a){var b=a||ob(),c=zb(b,this).startOf("day"),d=this.diff(c,"days",true),e=d<-6?"sameElse":d<-1?"lastWeek":d<0?"lastDay":d<1?"sameDay":d<2?"nextDay":d<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,ob(b)))}function Xb(){return new q(this)}function Yb(a,b){var c;b=F(typeof b!=="undefined"?b:"millisecond");if(b==="millisecond"){a=r(a)?a:ob(a);return+this>+a}else{c=r(a)?+a:+ob(a);return c<+this.clone().startOf(b)}}function Zb(a,b){var c;b=F(typeof b!=="undefined"?b:"millisecond");if(b==="millisecond"){a=r(a)?a:ob(a);return+this<+a}else{c=r(a)?+a:+ob(a);return+this.clone().endOf(b)<c}}function $b(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function _b(a,b){var c;b=F(b||"millisecond");if(b==="millisecond"){a=r(a)?a:ob(a);return+this===+a}else{c=+ob(a);return+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b)}}function ac(a){if(a<0){return Math.ceil(a)}else{return Math.floor(a)}}function bc(a,b,c){var d=zb(a,this),e=(d.utcOffset()-this.utcOffset())*6e4,f,g;b=F(b);if(b==="year"||b==="month"||b==="quarter"){g=cc(this,d);if(b==="quarter"){g=g/3}else if(b==="year"){g=g/12}}else{f=this-d;g=b==="second"?f/1e3:b==="minute"?f/6e4:b==="hour"?f/36e5:b==="day"?(f-e)/864e5:b==="week"?(f-e)/6048e5:f}return c?g:ac(g)}function cc(a,b){var c=(b.year()-a.year())*12+(b.month()-a.month()),d=a.clone().add(c,"months"),e,f;if(b-d<0){e=a.clone().add(c-1,"months");f=(b-d)/(d-e)}else{e=a.clone().add(c+1,"months");f=(b-d)/(e-d)}return-(c+f)}b.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";function dc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ec(){var a=this.clone().utc();if(0<a.year()&&a.year()<=9999){if("function"===typeof Date.prototype.toISOString){return this.toDate().toISOString()}else{return T(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return T(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}function fc(a){var c=T(this,a||b.defaultFormat);return this.localeData().postformat(c)}function gc(a,b){if(!this.isValid()){return this.localeData().invalidDate()}return Ob({to:this,from:a}).locale(this.locale()).humanize(!b)}function hc(a){return this.from(ob(),a)}function ic(a,b){if(!this.isValid()){return this.localeData().invalidDate()}return Ob({from:this,to:a}).locale(this.locale()).humanize(!b)}function jc(a){return this.to(ob(),a)}function kc(a){var b;if(a===undefined){return this._locale._abbr}else{b=C(a);if(b!=null){this._locale=b}return this}}var lc=Ha("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){if(a===undefined){return this.localeData()}else{return this.locale(a)}});function mc(){return this._locale}function nc(a){a=F(a);switch(a){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(a==="week"){this.weekday(0)}if(a==="isoWeek"){this.isoWeekday(1)}if(a==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function oc(a){a=F(a);if(a===undefined||a==="millisecond"){return this}return this.startOf(a).add(1,a==="isoWeek"?"week":a).subtract(1,"ms")}function pc(){return+this._d-(this._offset||0)*6e4}function qc(){return Math.floor(+this/1e3)}function rc(){return this._offset?new Date(+this):this._d}function sc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function tc(){return l(this)}function uc(){return h({},k(this))}function vc(){return k(this).overflow}Q(0,["gg",2],0,function(){return this.weekYear()%100});Q(0,["GG",2],0,function(){return this.isoWeekYear()%100});function wc(a,b){Q(0,[a,a.length],0,b)}wc("gggg","weekYear");wc("ggggg","weekYear");wc("GGGG","isoWeekYear");wc("GGGGG","isoWeekYear");E("weekYear","gg");E("isoWeekYear","GG");ia("G",da);ia("g",da);ia("GG",$,W);ia("gg",$,W);ia("GGGG",aa,Y);ia("gggg",aa,Y);ia("GGGGG",ba,Z);ia("ggggg",ba,Z);na(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=s(a)});na(["gg","GG"],function(a,c,d,e){c[e]=b.parseTwoDigitYear(a)});function xc(a,b,c){return Wa(ob([a,11,31+b-c]),b,c).week}function yc(a){var b=Wa(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return a==null?b:this.add(a-b,"y")}function zc(a){var b=Wa(this,1,4).year;return a==null?b:this.add(a-b,"y")}function Ac(){return xc(this.year(),1,4)}function Bc(){var a=this.localeData()._week;return xc(this.year(),a.dow,a.doy)}Q("Q",0,0,"quarter");E("quarter","Q");ia("Q",V);ma("Q",function(a,b){b[qa]=(s(a)-1)*3});function Cc(a){return a==null?Math.ceil((this.month()+1)/3):this.month((a-1)*3+this.month()%3)}Q("D",["DD",2],"Do","date");E("date","D");ia("D",$);ia("DD",$,W);ia("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient});ma(["D","DD"],ra);ma("Do",function(a,b){b[ra]=s(a.match($)[0],10)});var Dc=H("Date",true);Q("d",0,"do","day");Q("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});Q("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});Q("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});Q("e",0,0,"weekday");Q("E",0,0,"isoWeekday");E("day","d");E("weekday","e");E("isoWeekday","E");ia("d",$);ia("e",$);ia("E",$);ia("dd",ga);ia("ddd",ga);ia("dddd",ga);na(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);if(d!=null){b.d=d}else{k(c).invalidWeekday=a}});na(["d","e","E"],function(a,b,c,d){b[d]=s(a)});function Ec(a,b){if(typeof a==="string"){if(!isNaN(a)){a=parseInt(a,10)}else{a=b.weekdaysParse(a);if(typeof a!=="number"){return null}}}return a}var Fc="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function Gc(a){return this._weekdays[a.day()]}var Hc="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Ic(a){return this._weekdaysShort[a.day()]}var Jc="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Kc(a){return this._weekdaysMin[a.day()]}function Lc(a){var b,c,d;if(!this._weekdaysParse){this._weekdaysParse=[]}for(b=0;b<7;b++){if(!this._weekdaysParse[b]){c=ob([2e3,1]).day(b);d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,"");this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")}if(this._weekdaysParse[b].test(a)){return b}}}function Mc(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(a!=null){a=Ec(a,this.localeData());return this.add(a-b,"d")}else{return b}}function Nc(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return a==null?b:this.add(a-b,"d")}function Oc(a){return a==null?this.day()||7:this.day(this.day()%7?a:a-7)}Q("H",["HH",2],0,"hour");Q("h",["hh",2],0,function(){return this.hours()%12||12});function Pc(a,b){Q(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}Pc("a",true);Pc("A",false);E("hour","h");function Qc(a,b){return b._meridiemParse}ia("a",Qc);ia("A",Qc);ia("H",$);ia("h",$);ia("HH",$,W);ia("hh",$,W);ma(["H","HH"],sa);ma(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});ma(["h","hh"],function(a,b,c){b[sa]=s(a);k(c).bigHour=true});function Rc(a){return(a+"").toLowerCase().charAt(0)==="p"}var Sc=/[ap]\.?m?\.?/i;function Tc(a,b,c){if(a>11){return c?"pm":"PM"}else{return c?"am":"AM"}}var Uc=H("Hours",true);Q("m",["mm",2],0,"minute");E("minute","m");ia("m",$);ia("mm",$,W);ma(["m","mm"],ta);var Vc=H("Minutes",false);Q("s",["ss",2],0,"second");E("second","s");ia("s",$);ia("ss",$,W);ma(["s","ss"],ua);var Wc=H("Seconds",false);Q("S",0,0,function(){return~~(this.millisecond()/100)});Q(0,["SS",2],0,function(){return~~(this.millisecond()/10)});function Xc(a){Q(0,[a,3],0,"millisecond")}Xc("SSS");Xc("SSSS");E("millisecond","ms");ia("S",_,V);ia("SS",_,W);ia("SSS",_,X);ia("SSSS",ca);ma(["S","SS","SSS","SSSS"],function(a,b){b[va]=s(("0."+a)*1e3)});var Yc=H("Milliseconds",false);Q("z",0,0,"zoneAbbr");Q("zz",0,0,"zoneName");function Zc(){return this._isUTC?"UTC":""}function $c(){return this._isUTC?"Coordinated Universal Time":""}var _c=q.prototype;_c.add=Ub;_c.calendar=Wb;_c.clone=Xb;_c.diff=bc;_c.endOf=oc;_c.format=fc;_c.from=gc;_c.fromNow=hc;_c.to=ic;_c.toNow=jc;_c.get=K;_c.invalidAt=vc;_c.isAfter=Yb;_c.isBefore=Zb;_c.isBetween=$b;_c.isSame=_b;_c.isValid=tc;_c.lang=lc;_c.locale=kc;_c.localeData=mc;_c.max=qb;_c.min=pb;_c.parsingFlags=uc;_c.set=K;_c.startOf=nc;_c.subtract=Vb;_c.toArray=sc;_c.toDate=rc;_c.toISOString=ec;_c.toJSON=ec;_c.toString=dc;_c.unix=qc;_c.valueOf=pc;_c.year=Ua;_c.isLeapYear=Va;_c.weekYear=yc;_c.isoWeekYear=zc;_c.quarter=_c.quarters=Cc;_c.month=Da;_c.daysInMonth=Ea;_c.week=_c.weeks=_a;_c.isoWeek=_c.isoWeeks=ab;_c.weeksInYear=Bc;_c.isoWeeksInYear=Ac;_c.date=Dc;_c.day=_c.days=Mc;_c.weekday=Nc;_c.isoWeekday=Oc;_c.dayOfYear=cb;_c.hour=_c.hours=Uc;_c.minute=_c.minutes=Vc;_c.second=_c.seconds=Wc;_c.millisecond=_c.milliseconds=Yc;_c.utcOffset=Bb;_c.utc=Db;_c.local=Eb;_c.parseZone=Fb;_c.hasAlignedHourOffset=Gb;_c.isDST=Hb;_c.isDSTShifted=Ib;_c.isLocal=Jb;_c.isUtcOffset=Kb;_c.isUtc=Lb;_c.isUTC=Lb;_c.zoneAbbr=Zc;_c.zoneName=$c;_c.dates=Ha("dates accessor is deprecated. Use date instead.",Dc);_c.months=Ha("months accessor is deprecated. Use month instead",Da);_c.years=Ha("years accessor is deprecated. Use year instead",Ua);_c.zone=Ha("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Cb);var ad=_c;function bd(a){return ob(a*1e3)}function cd(){return ob.apply(null,arguments).parseZone()}var dd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function ed(a,b,c){var d=this._calendar[a];return typeof d==="function"?d.call(b,c):d}var fd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"};function gd(a){var b=this._longDateFormat[a];if(!b&&this._longDateFormat[a.toUpperCase()]){b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});this._longDateFormat[a]=b}return b}var hd="Invalid date";function id(){return this._invalidDate}var jd="%d";var kd=/\d{1,2}/;function ld(a){return this._ordinal.replace("%d",a)}function md(a){return a}var nd={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function od(a,b,c,d){var e=this._relativeTime[c];return typeof e==="function"?e(a,b,c,d):e.replace(/%d/i,a)}function pd(a,b){var c=this._relativeTime[a>0?"future":"past"];return typeof c==="function"?c(b):c.replace(/%s/i,b)}function qd(a){var b,c;for(c in a){b=a[c];if(typeof b==="function"){this[c]=b}else{this["_"+c]=b}}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}var rd=u.prototype;rd._calendar=dd;rd.calendar=ed;rd._longDateFormat=fd;rd.longDateFormat=gd;rd._invalidDate=hd;rd.invalidDate=id;rd._ordinal=jd;rd.ordinal=ld;rd._ordinalParse=kd;rd.preparse=md;rd.postformat=md;rd._relativeTime=nd;rd.relativeTime=od;rd.pastFuture=pd;rd.set=qd;rd.months=ya;rd._months=xa;rd.monthsShort=Aa;rd._monthsShort=za;rd.monthsParse=Ba;rd.week=Xa;rd._week=Ya;rd.firstDayOfYear=$a;rd.firstDayOfWeek=Za;rd.weekdays=Gc;rd._weekdays=Fc;rd.weekdaysMin=Kc;rd._weekdaysMin=Jc;rd.weekdaysShort=Ic;rd._weekdaysShort=Hc;rd.weekdaysParse=Lc;rd.isPM=Rc;rd._meridiemParse=Sc;rd.meridiem=Tc;function sd(a,b,c,d){var e=C();var f=i().set(d,b);return e[c](f,a)}function td(a,b,c,d,e){if(typeof a==="number"){b=a;a=undefined}a=a||"";if(b!=null){return sd(a,b,c,e)}var f;var g=[];for(f=0;f<d;f++){g[f]=sd(a,f,c,e)}return g}function ud(a,b){return td(a,b,"months",12,"month")}function vd(a,b){return td(a,b,"monthsShort",12,"month")}function wd(a,b){return td(a,b,"weekdays",7,"day")}function xd(a,b){return td(a,b,"weekdaysShort",7,"day")}function yd(a,b){return td(a,b,"weekdaysMin",7,"day")}A("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=s(a%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return a+c}});b.lang=Ha("moment.lang is deprecated. Use moment.locale instead.",A);b.langData=Ha("moment.langData is deprecated. Use moment.localeData instead.",C);var zd=Math.abs;function Ad(){var a=this._data;this._milliseconds=zd(this._milliseconds);this._days=zd(this._days);this._months=zd(this._months);a.milliseconds=zd(a.milliseconds);a.seconds=zd(a.seconds);a.minutes=zd(a.minutes);a.hours=zd(a.hours);a.months=zd(a.months);a.years=zd(a.years);return this}function Bd(a,b,c,d){var e=Ob(b,c);a._milliseconds+=d*e._milliseconds;a._days+=d*e._days;a._months+=d*e._months;return a._bubble()}function Cd(a,b){return Bd(this,a,b,1)}function Dd(a,b){return Bd(this,a,b,-1)}function Ed(){var a=this._milliseconds;var b=this._days;var c=this._months;var d=this._data;var e,f,g,h=0;d.milliseconds=a%1e3;e=ac(a/1e3);d.seconds=e%60;f=ac(e/60);d.minutes=f%60;g=ac(f/60);d.hours=g%24;b+=ac(g/24);h=ac(Fd(b));b-=ac(Gd(h));c+=ac(b/30);b%=30;h+=ac(c/12);c%=12;d.days=b;d.months=c;d.years=h;return this}function Fd(a){return a*400/146097}function Gd(a){return a*146097/400}function Hd(a){var b;var c;var d=this._milliseconds;a=F(a);if(a==="month"||a==="year"){b=this._days+d/864e5;c=this._months+Fd(b)*12;return a==="month"?c:c/12}else{b=this._days+Math.round(Gd(this._months/12));switch(a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return b*24+d/36e5;case"minute":return b*1440+d/6e4;case"second":return b*86400+d/1e3;case"millisecond":return Math.floor(b*864e5)+d;default:throw new Error("Unknown unit "+a)}}}function Id(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+s(this._months/12)*31536e6}function Jd(a){return function(){return this.as(a)}}var Kd=Jd("ms");var Ld=Jd("s");var Md=Jd("m");var Nd=Jd("h");var Od=Jd("d");var Pd=Jd("w");var Qd=Jd("M");var Rd=Jd("y");function Sd(a){a=F(a);return this[a+"s"]()}function Td(a){return function(){return this._data[a]}}var Ud=Td("milliseconds");var Vd=Td("seconds");var Wd=Td("minutes");var Xd=Td("hours");var Yd=Td("days");var Zd=Td("months");var $d=Td("years");function _d(){return ac(this.days()/7)}var ae=Math.round;var be={s:45,m:45,h:22,d:26,M:11};function ce(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function de(a,b,c){var d=Ob(a).abs();var e=ae(d.as("s"));var f=ae(d.as("m"));var g=ae(d.as("h"));var h=ae(d.as("d"));var i=ae(d.as("M"));var j=ae(d.as("y"));var k=e<be.s&&["s",e]||f===1&&["m"]||f<be.m&&["mm",f]||g===1&&["h"]||g<be.h&&["hh",g]||h===1&&["d"]||h<be.d&&["dd",h]||i===1&&["M"]||i<be.M&&["MM",i]||j===1&&["y"]||["yy",j];k[2]=b;k[3]=+a>0;k[4]=c;return ce.apply(null,k)}function ee(a,b){if(be[a]===undefined){return false}if(b===undefined){return be[a]}be[a]=b;return true}function fe(a){var b=this.localeData();var c=de(this,!a,b);if(a){c=b.pastFuture(+this,c)}return b.postformat(c)}var ge=Math.abs;function he(){var a=ge(this.years());var b=ge(this.months());var c=ge(this.days());var d=ge(this.hours());var e=ge(this.minutes());var f=ge(this.seconds()+this.milliseconds()/1e3);var g=this.asSeconds();if(!g){return"P0D"}return(g<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":"")}var ie=ub.prototype;ie.abs=Ad;ie.add=Cd;ie.subtract=Dd;ie.as=Hd;ie.asMilliseconds=Kd;ie.asSeconds=Ld;ie.asMinutes=Md;ie.asHours=Nd;ie.asDays=Od;ie.asWeeks=Pd;ie.asMonths=Qd;ie.asYears=Rd;ie.valueOf=Id;ie._bubble=Ed;ie.get=Sd;ie.milliseconds=Ud;ie.seconds=Vd;ie.minutes=Wd;ie.hours=Xd;ie.days=Yd;ie.weeks=_d;ie.months=Zd;ie.years=$d;ie.humanize=fe;ie.toISOString=he;ie.toString=he;ie.toJSON=he;ie.locale=kc;ie.localeData=mc;ie.toIsoString=Ha("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",he);ie.lang=lc;Q("X",0,0,"unix");Q("x",0,0,"valueOf");ia("x",da);ia("X",fa);ma("X",function(a,b,c){c._d=new Date(parseFloat(a,10)*1e3)});ma("x",function(a,b,c){c._d=new Date(s(a))});b.version="2.10.3";c(ob);b.fn=ad;b.min=sb;b.max=tb;b.utc=i;b.unix=bd;b.months=ud;b.isDate=e;b.locale=A;b.invalid=m;b.duration=Ob;b.isMoment=r;b.weekdays=wd;b.parseZone=cd;b.localeData=C;b.isDuration=vb;b.monthsShort=vd;b.weekdaysMin=yd;b.defineLocale=B;b.weekdaysShort=xd;b.normalizeUnits=F;b.relativeTimeThreshold=ee;var je=b;return je});(function(a,b,c){"use strict";b.module("ngToast.provider",[]).provider("ngToast",[function(){var a=[],c=[];var d={animation:false,className:"success",additionalClasses:null,dismissOnTimeout:true,timeout:4e3,dismissButton:false,dismissButtonHtml:"&times;",dismissOnClick:true,compileContent:false,combineDuplications:false,horizontalPosition:"right",verticalPosition:"top",maxNumber:0};function e(c){var e=Math.floor(Math.random()*1e3);while(a.indexOf(e)>-1){e=Math.floor(Math.random()*1e3)}this.id=e;this.count=0;this.animation=d.animation;this.className=d.className;this.additionalClasses=d.additionalClasses;this.dismissOnTimeout=d.dismissOnTimeout;this.timeout=d.timeout;this.dismissButton=d.dismissButton;this.dismissButtonHtml=d.dismissButtonHtml;this.dismissOnClick=d.dismissOnClick;this.compileContent=d.compileContent;b.extend(this,c)}this.configure=function(a){b.extend(d,a)};this.$get=[function(){var b=function(a,b){b=typeof b==="object"?b:{content:b};b.className=a;return this.create(b)};return{settings:d,messages:a,dismiss:function(b){if(b){for(var d=a.length-1;d>=0;d--){if(a[d].id===b){a.splice(d,1);c.splice(c.indexOf(b),1);return}}}else{while(a.length>0){a.pop()}c=[]}},create:function(b){b=typeof b==="object"?b:{content:b};if(d.combineDuplications){for(var f=c.length-1;f>=0;f--){var g=a[f];var h=b.className||"success";if(g.content===b.content&&g.className===h){a[f].count++;return}}}if(d.maxNumber>0&&c.length>=d.maxNumber){this.dismiss(c[0])}var i=new e(b);if(d.verticalPosition==="bottom"){a.unshift(i)}else{a.push(i)}c.push(i.id);return i.id},success:function(a){return b.call(this,"success",a)},info:function(a){return b.call(this,"info",a)},warning:function(a){return b.call(this,"warning",a)},danger:function(a){return b.call(this,"danger",a)}}}]}])})(window,window.angular);(function(a,b){"use strict";b.module("ngToast.directives",["ngToast.provider"]).run(["$templateCache",function(a){a.put("ngToast/toast.html","<div class=\"ng-toast ng-toast--{{hPos}} ng-toast--{{vPos}} {{animation ? 'ng-toast--animate-' + animation : ''}}\">"+'<ul class="ng-toast__list">'+'<toast-message ng-repeat="message in messages" '+'message="message" count="message.count">'+'<span ng-bind-html="message.content"></span>'+"</toast-message>"+"</ul>"+"</div>");a.put("ngToast/toastMessage.html",'<li class="ng-toast__message {{message.additionalClasses}}"'+'ng-mouseenter="onMouseEnter()"'+'ng-mouseleave="onMouseLeave()">'+'<div class="alert alert-{{message.className}}" '+"ng-class=\"{'alert-dismissible': message.dismissButton}\">"+'<button type="button" class="close" '+'ng-if="message.dismissButton" '+'ng-bind-html="message.dismissButtonHtml" '+'ng-click="!message.dismissOnClick && dismiss()">'+"</button>"+'<span ng-if="count" class="ng-toast__message__count">'+"{{count + 1}}"+"</span>"+'<span ng-if="!message.compileContent" ng-transclude></span>'+"</div>"+"</li>")}]).directive("toast",["ngToast","$templateCache","$log",function(a,b,c){return{replace:true,restrict:"EA",templateUrl:"ngToast/toast.html",compile:function(d,e){if(e.template){var f=b.get(e.template);if(f){d.replaceWith(f)}else{c.warn("ngToast: Provided template could not be loaded. "+"Please be sure that it is populated before the <toast> element is represented.")}}return function(b){b.hPos=a.settings.horizontalPosition
;b.vPos=a.settings.verticalPosition;b.animation=a.settings.animation;b.messages=a.messages}}}}]).directive("toastMessage",["$timeout","$compile","ngToast",function(a,b,c){return{replace:true,transclude:true,restrict:"EA",scope:{message:"=",count:"="},controller:["$scope","ngToast",function(a,b){a.dismiss=function(){b.dismiss(a.message.id)}}],templateUrl:"ngToast/toastMessage.html",link:function(d,e,f,g,h){e.attr("data-message-id",d.message.id);var i;var j=d.message.compileContent;d.cancelTimeout=function(){a.cancel(i)};d.startTimeout=function(){if(d.message.dismissOnTimeout){i=a(function(){c.dismiss(d.message.id)},d.message.timeout)}};d.onMouseEnter=function(){d.cancelTimeout()};d.onMouseLeave=function(){d.startTimeout()};if(j){var k;h(d,function(a){k=a;e.children().append(k)});a(function(){b(k.contents())(typeof j==="boolean"?d.$parent:j,function(a){k.replaceWith(a)})},0)}d.startTimeout();if(d.message.dismissOnClick){e.bind("click",function(){c.dismiss(d.message.id);d.$apply()})}}}}])})(window,window.angular);(function(a,b){"use strict";b.module("ngToast",["ngSanitize","ngToast.directives","ngToast.provider"])})(window,window.angular);(function(){var a=this;var b=a._;var c=Array.prototype,d=Object.prototype,e=Function.prototype;var f=c.push,g=c.slice,h=d.toString,i=d.hasOwnProperty;var j=Array.isArray,k=Object.keys,l=e.bind,m=Object.create;var n=function(){};var o=function(a){if(a instanceof o)return a;if(!(this instanceof o))return new o(a);this._wrapped=a};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=o}exports._=o}else{a._=o}o.VERSION="1.8.3";var p=function(a,b,c){if(b===void 0)return a;switch(c==null?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}};var q=function(a,b,c){if(a==null)return o.identity;if(o.isFunction(a))return p(a,b,c);if(o.isObject(a))return o.matcher(a);return o.property(a)};o.iteratee=function(a,b){return q(a,b,Infinity)};var r=function(a,b){return function(c){var d=arguments.length;if(d<2||c==null)return c;for(var e=1;e<d;e++){var f=arguments[e],g=a(f),h=g.length;for(var i=0;i<h;i++){var j=g[i];if(!b||c[j]===void 0)c[j]=f[j]}}return c}};var s=function(a){if(!o.isObject(a))return{};if(m)return m(a);n.prototype=a;var b=new n;n.prototype=null;return b};var t=function(a){return function(b){return b==null?void 0:b[a]}};var u=Math.pow(2,53)-1;var v=t("length");var w=function(a){var b=v(a);return typeof b=="number"&&b>=0&&b<=u};o.each=o.forEach=function(a,b,c){b=p(b,c);var d,e;if(w(a)){for(d=0,e=a.length;d<e;d++){b(a[d],d,a)}}else{var f=o.keys(a);for(d=0,e=f.length;d<e;d++){b(a[f[d]],f[d],a)}}return a};o.map=o.collect=function(a,b,c){b=q(b,c);var d=!w(a)&&o.keys(a),e=(d||a).length,f=Array(e);for(var g=0;g<e;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f};function x(a){function b(b,c,d,e,f,g){for(;f>=0&&f<g;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=p(d,f,4);var g=!w(c)&&o.keys(c),h=(g||c).length,i=a>0?0:h-1;if(arguments.length<3){e=c[g?g[i]:i];i+=a}return b(c,d,e,g,i,h)}}o.reduce=o.foldl=o.inject=x(1);o.reduceRight=o.foldr=x(-1);o.find=o.detect=function(a,b,c){var d;if(w(a)){d=o.findIndex(a,b,c)}else{d=o.findKey(a,b,c)}if(d!==void 0&&d!==-1)return a[d]};o.filter=o.select=function(a,b,c){var d=[];b=q(b,c);o.each(a,function(a,c,e){if(b(a,c,e))d.push(a)});return d};o.reject=function(a,b,c){return o.filter(a,o.negate(q(b)),c)};o.every=o.all=function(a,b,c){b=q(b,c);var d=!w(a)&&o.keys(a),e=(d||a).length;for(var f=0;f<e;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return false}return true};o.some=o.any=function(a,b,c){b=q(b,c);var d=!w(a)&&o.keys(a),e=(d||a).length;for(var f=0;f<e;f++){var g=d?d[f]:f;if(b(a[g],g,a))return true}return false};o.contains=o.includes=o.include=function(a,b,c,d){if(!w(a))a=o.values(a);if(typeof c!="number"||d)c=0;return o.indexOf(a,b,c)>=0};o.invoke=function(a,b){var c=g.call(arguments,2);var d=o.isFunction(b);return o.map(a,function(a){var e=d?b:a[b];return e==null?e:e.apply(a,c)})};o.pluck=function(a,b){return o.map(a,o.property(b))};o.where=function(a,b){return o.filter(a,o.matcher(b))};o.findWhere=function(a,b){return o.find(a,o.matcher(b))};o.max=function(a,b,c){var d=-Infinity,e=-Infinity,f,g;if(b==null&&a!=null){a=w(a)?a:o.values(a);for(var h=0,i=a.length;h<i;h++){f=a[h];if(f>d){d=f}}}else{b=q(b,c);o.each(a,function(a,c,f){g=b(a,c,f);if(g>e||g===-Infinity&&d===-Infinity){d=a;e=g}})}return d};o.min=function(a,b,c){var d=Infinity,e=Infinity,f,g;if(b==null&&a!=null){a=w(a)?a:o.values(a);for(var h=0,i=a.length;h<i;h++){f=a[h];if(f<d){d=f}}}else{b=q(b,c);o.each(a,function(a,c,f){g=b(a,c,f);if(g<e||g===Infinity&&d===Infinity){d=a;e=g}})}return d};o.shuffle=function(a){var b=w(a)?a:o.values(a);var c=b.length;var d=Array(c);for(var e=0,f;e<c;e++){f=o.random(0,e);if(f!==e)d[e]=d[f];d[f]=b[e]}return d};o.sample=function(a,b,c){if(b==null||c){if(!w(a))a=o.values(a);return a[o.random(a.length-1)]}return o.shuffle(a).slice(0,Math.max(0,b))};o.sortBy=function(a,b,c){b=q(b,c);return o.pluck(o.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria;var d=b.criteria;if(c!==d){if(c>d||c===void 0)return 1;if(c<d||d===void 0)return-1}return a.index-b.index}),"value")};var y=function(a){return function(b,c,d){var e={};c=q(c,d);o.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)});return e}};o.groupBy=y(function(a,b,c){if(o.has(a,c))a[c].push(b);else a[c]=[b]});o.indexBy=y(function(a,b,c){a[c]=b});o.countBy=y(function(a,b,c){if(o.has(a,c))a[c]++;else a[c]=1});o.toArray=function(a){if(!a)return[];if(o.isArray(a))return g.call(a);if(w(a))return o.map(a,o.identity);return o.values(a)};o.size=function(a){if(a==null)return 0;return w(a)?a.length:o.keys(a).length};o.partition=function(a,b,c){b=q(b,c);var d=[],e=[];o.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)});return[d,e]};o.first=o.head=o.take=function(a,b,c){if(a==null)return void 0;if(b==null||c)return a[0];return o.initial(a,a.length-b)};o.initial=function(a,b,c){return g.call(a,0,Math.max(0,a.length-(b==null||c?1:b)))};o.last=function(a,b,c){if(a==null)return void 0;if(b==null||c)return a[a.length-1];return o.rest(a,Math.max(0,a.length-b))};o.rest=o.tail=o.drop=function(a,b,c){return g.call(a,b==null||c?1:b)};o.compact=function(a){return o.filter(a,o.identity)};var z=function(a,b,c,d){var e=[],f=0;for(var g=d||0,h=v(a);g<h;g++){var i=a[g];if(w(i)&&(o.isArray(i)||o.isArguments(i))){if(!b)i=z(i,b,c);var j=0,k=i.length;e.length+=k;while(j<k){e[f++]=i[j++]}}else if(!c){e[f++]=i}}return e};o.flatten=function(a,b){return z(a,b,false)};o.without=function(a){return o.difference(a,g.call(arguments,1))};o.uniq=o.unique=function(a,b,c,d){if(!o.isBoolean(b)){d=c;c=b;b=false}if(c!=null)c=q(c,d);var e=[];var f=[];for(var g=0,h=v(a);g<h;g++){var i=a[g],j=c?c(i,g,a):i;if(b){if(!g||f!==j)e.push(i);f=j}else if(c){if(!o.contains(f,j)){f.push(j);e.push(i)}}else if(!o.contains(e,i)){e.push(i)}}return e};o.union=function(){return o.uniq(z(arguments,true,true))};o.intersection=function(a){var b=[];var c=arguments.length;for(var d=0,e=v(a);d<e;d++){var f=a[d];if(o.contains(b,f))continue;for(var g=1;g<c;g++){if(!o.contains(arguments[g],f))break}if(g===c)b.push(f)}return b};o.difference=function(a){var b=z(arguments,true,true,1);return o.filter(a,function(a){return!o.contains(b,a)})};o.zip=function(){return o.unzip(arguments)};o.unzip=function(a){var b=a&&o.max(a,v).length||0;var c=Array(b);for(var d=0;d<b;d++){c[d]=o.pluck(a,d)}return c};o.object=function(a,b){var c={};for(var d=0,e=v(a);d<e;d++){if(b){c[a[d]]=b[d]}else{c[a[d][0]]=a[d][1]}}return c};function A(a){return function(b,c,d){c=q(c,d);var e=v(b);var f=a>0?0:e-1;for(;f>=0&&f<e;f+=a){if(c(b[f],f,b))return f}return-1}}o.findIndex=A(1);o.findLastIndex=A(-1);o.sortedIndex=function(a,b,c,d){c=q(c,d,1);var e=c(b);var f=0,g=v(a);while(f<g){var h=Math.floor((f+g)/2);if(c(a[h])<e)f=h+1;else g=h}return f};function B(a,b,c){return function(d,e,f){var h=0,i=v(d);if(typeof f=="number"){if(a>0){h=f>=0?f:Math.max(f+i,h)}else{i=f>=0?Math.min(f+1,i):f+i+1}}else if(c&&f&&i){f=c(d,e);return d[f]===e?f:-1}if(e!==e){f=b(g.call(d,h,i),o.isNaN);return f>=0?f+h:-1}for(f=a>0?h:i-1;f>=0&&f<i;f+=a){if(d[f]===e)return f}return-1}}o.indexOf=B(1,o.findIndex,o.sortedIndex);o.lastIndexOf=B(-1,o.findLastIndex);o.range=function(a,b,c){if(b==null){b=a||0;a=0}c=c||1;var d=Math.max(Math.ceil((b-a)/c),0);var e=Array(d);for(var f=0;f<d;f++,a+=c){e[f]=a}return e};var C=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=s(a.prototype);var g=a.apply(f,e);if(o.isObject(g))return g;return f};o.bind=function(a,b){if(l&&a.bind===l)return l.apply(a,g.call(arguments,1));if(!o.isFunction(a))throw new TypeError("Bind must be called on a function");var c=g.call(arguments,2);var d=function(){return C(a,d,b,this,c.concat(g.call(arguments)))};return d};o.partial=function(a){var b=g.call(arguments,1);var c=function(){var d=0,e=b.length;var f=Array(e);for(var g=0;g<e;g++){f[g]=b[g]===o?arguments[d++]:b[g]}while(d<arguments.length)f.push(arguments[d++]);return C(a,c,this,this,f)};return c};o.bindAll=function(a){var b,c=arguments.length,d;if(c<=1)throw new Error("bindAll must be passed function names");for(b=1;b<c;b++){d=arguments[b];a[d]=o.bind(a[d],a)}return a};o.memoize=function(a,b){var c=function(d){var e=c.cache;var f=""+(b?b.apply(this,arguments):d);if(!o.has(e,f))e[f]=a.apply(this,arguments);return e[f]};c.cache={};return c};o.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};o.defer=o.partial(o.delay,o,1);o.throttle=function(a,b,c){var d,e,f;var g=null;var h=0;if(!c)c={};var i=function(){h=c.leading===false?0:o.now();g=null;f=a.apply(d,e);if(!g)d=e=null};return function(){var j=o.now();if(!h&&c.leading===false)h=j;var k=b-(j-h);d=this;e=arguments;if(k<=0||k>b){if(g){clearTimeout(g);g=null}h=j;f=a.apply(d,e);if(!g)d=e=null}else if(!g&&c.trailing!==false){g=setTimeout(i,k)}return f}};o.debounce=function(a,b,c){var d,e,f,g,h;var i=function(){var j=o.now()-g;if(j<b&&j>=0){d=setTimeout(i,b-j)}else{d=null;if(!c){h=a.apply(f,e);if(!d)f=e=null}}};return function(){f=this;e=arguments;g=o.now();var j=c&&!d;if(!d)d=setTimeout(i,b);if(j){h=a.apply(f,e);f=e=null}return h}};o.wrap=function(a,b){return o.partial(b,a)};o.negate=function(a){return function(){return!a.apply(this,arguments)}};o.compose=function(){var a=arguments;var b=a.length-1;return function(){var c=b;var d=a[b].apply(this,arguments);while(c--)d=a[c].call(this,d);return d}};o.after=function(a,b){return function(){if(--a<1){return b.apply(this,arguments)}}};o.before=function(a,b){var c;return function(){if(--a>0){c=b.apply(this,arguments)}if(a<=1)b=null;return c}};o.once=o.partial(o.before,2);var D=!{toString:null}.propertyIsEnumerable("toString");var E=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function F(a,b){var c=E.length;var e=a.constructor;var f=o.isFunction(e)&&e.prototype||d;var g="constructor";if(o.has(a,g)&&!o.contains(b,g))b.push(g);while(c--){g=E[c];if(g in a&&a[g]!==f[g]&&!o.contains(b,g)){b.push(g)}}}o.keys=function(a){if(!o.isObject(a))return[];if(k)return k(a);var b=[];for(var c in a)if(o.has(a,c))b.push(c);if(D)F(a,b);return b};o.allKeys=function(a){if(!o.isObject(a))return[];var b=[];for(var c in a)b.push(c);if(D)F(a,b);return b};o.values=function(a){var b=o.keys(a);var c=b.length;var d=Array(c);for(var e=0;e<c;e++){d[e]=a[b[e]]}return d};o.mapObject=function(a,b,c){b=q(b,c);var d=o.keys(a),e=d.length,f={},g;for(var h=0;h<e;h++){g=d[h];f[g]=b(a[g],g,a)}return f};o.pairs=function(a){var b=o.keys(a);var c=b.length;var d=Array(c);for(var e=0;e<c;e++){d[e]=[b[e],a[b[e]]]}return d};o.invert=function(a){var b={};var c=o.keys(a);for(var d=0,e=c.length;d<e;d++){b[a[c[d]]]=c[d]}return b};o.functions=o.methods=function(a){var b=[];for(var c in a){if(o.isFunction(a[c]))b.push(c)}return b.sort()};o.extend=r(o.allKeys);o.extendOwn=o.assign=r(o.keys);o.findKey=function(a,b,c){b=q(b,c);var d=o.keys(a),e;for(var f=0,g=d.length;f<g;f++){e=d[f];if(b(a[e],e,a))return e}};o.pick=function(a,b,c){var d={},e=a,f,g;if(e==null)return d;if(o.isFunction(b)){g=o.allKeys(e);f=p(b,c)}else{g=z(arguments,false,false,1);f=function(a,b,c){return b in c};e=Object(e)}for(var h=0,i=g.length;h<i;h++){var j=g[h];var k=e[j];if(f(k,j,e))d[j]=k}return d};o.omit=function(a,b,c){if(o.isFunction(b)){b=o.negate(b)}else{var d=o.map(z(arguments,false,false,1),String);b=function(a,b){return!o.contains(d,b)}}return o.pick(a,b,c)};o.defaults=r(o.allKeys,true);o.create=function(a,b){var c=s(a);if(b)o.extendOwn(c,b);return c};o.clone=function(a){if(!o.isObject(a))return a;return o.isArray(a)?a.slice():o.extend({},a)};o.tap=function(a,b){b(a);return a};o.isMatch=function(a,b){var c=o.keys(b),d=c.length;if(a==null)return!d;var e=Object(a);for(var f=0;f<d;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return false}return true};var G=function(a,b,c,d){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return a===b;if(a instanceof o)a=a._wrapped;if(b instanceof o)b=b._wrapped;var e=h.call(a);if(e!==h.call(b))return false;switch(e){case"[object RegExp]":case"[object String]":return""+a===""+b;case"[object Number]":if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f=e==="[object Array]";if(!f){if(typeof a!="object"||typeof b!="object")return false;var g=a.constructor,i=b.constructor;if(g!==i&&!(o.isFunction(g)&&g instanceof g&&o.isFunction(i)&&i instanceof i)&&("constructor"in a&&"constructor"in b)){return false}}c=c||[];d=d||[];var j=c.length;while(j--){if(c[j]===a)return d[j]===b}c.push(a);d.push(b);if(f){j=a.length;if(j!==b.length)return false;while(j--){if(!G(a[j],b[j],c,d))return false}}else{var k=o.keys(a),l;j=k.length;if(o.keys(b).length!==j)return false;while(j--){l=k[j];if(!(o.has(b,l)&&G(a[l],b[l],c,d)))return false}}c.pop();d.pop();return true};o.isEqual=function(a,b){return G(a,b)};o.isEmpty=function(a){if(a==null)return true;if(w(a)&&(o.isArray(a)||o.isString(a)||o.isArguments(a)))return a.length===0;return o.keys(a).length===0};o.isElement=function(a){return!!(a&&a.nodeType===1)};o.isArray=j||function(a){return h.call(a)==="[object Array]"};o.isObject=function(a){var b=typeof a;return b==="function"||b==="object"&&!!a};o.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){o["is"+a]=function(b){return h.call(b)==="[object "+a+"]"}});if(!o.isArguments(arguments)){o.isArguments=function(a){return o.has(a,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){o.isFunction=function(a){return typeof a=="function"||false}}o.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};o.isNaN=function(a){return o.isNumber(a)&&a!==+a};o.isBoolean=function(a){return a===true||a===false||h.call(a)==="[object Boolean]"};o.isNull=function(a){return a===null};o.isUndefined=function(a){return a===void 0};o.has=function(a,b){return a!=null&&i.call(a,b)};o.noConflict=function(){a._=b;return this};o.identity=function(a){return a};o.constant=function(a){return function(){return a}};o.noop=function(){};o.property=t;o.propertyOf=function(a){return a==null?function(){}:function(b){return a[b]}};o.matcher=o.matches=function(a){a=o.extendOwn({},a);return function(b){return o.isMatch(b,a)}};o.times=function(a,b,c){var d=Array(Math.max(0,a));b=p(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d};o.random=function(a,b){if(b==null){b=a;a=0}return a+Math.floor(Math.random()*(b-a+1))};o.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var I=o.invert(H);var J=function(a){var b=function(b){return a[b]};var c="(?:"+o.keys(a).join("|")+")";var d=RegExp(c);var e=RegExp(c,"g");return function(a){a=a==null?"":""+a;return d.test(a)?a.replace(e,b):a}};o.escape=J(H);o.unescape=J(I);o.result=function(a,b,c){var d=a==null?void 0:a[b];if(d===void 0){d=c}return o.isFunction(d)?d.call(a):d};var K=0;o.uniqueId=function(a){var b=++K+"";return a?a+b:b};o.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/;var M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var N=/\\|'|\r|\n|\u2028|\u2029/g;var O=function(a){return"\\"+M[a]};o.template=function(a,b,c){if(!b&&c)b=c;b=o.defaults({},b,o.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g");var e=0;var f="__p+='";a.replace(d,function(b,c,d,g,h){f+=a.slice(e,h).replace(N,O);e=h+b.length;if(c){f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"}else if(d){f+="'+\n((__t=("+d+"))==null?'':__t)+\n'"}else if(g){f+="';\n"+g+"\n__p+='"}return b});f+="';\n";if(!b.variable)f="with(obj||{}){\n"+f+"}\n";f="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(a){a.source=f;throw a}var h=function(a){return g.call(this,a,o)};var i=b.variable||"obj";h.source="function("+i+"){\n"+f+"}";return h};o.chain=function(a){var b=o(a);b._chain=true;return b};var P=function(a,b){return a._chain?o(b).chain():b};o.mixin=function(a){o.each(o.functions(a),function(b){var c=o[b]=a[b];o.prototype[b]=function(){var a=[this._wrapped];f.apply(a,arguments);return P(this,c.apply(o,a))}})};o.mixin(o);o.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=c[a];o.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);if((a==="shift"||a==="splice")&&c.length===0)delete c[0];return P(this,c)}});o.each(["concat","join","slice"],function(a){var b=c[a];o.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}});o.prototype.value=function(){return this._wrapped};o.prototype.valueOf=o.prototype.toJSON=o.prototype.value;o.prototype.toString=function(){return""+this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return o})}}).call(this);